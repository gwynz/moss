import{g as H}from"./chunk-GHN74NOR.js";import{b as S}from"./chunk-KPWXSG5E.js";import{a as E}from"./chunk-5A2BEHTQ.js";import{a as N,bc as G,d as U}from"./chunk-ORUYTCTV.js";import{a as h,b as v}from"./chunk-T7JNUXFM.js";import{a as Y,g as z}from"./chunk-NDCLJSYC.js";import{a as m,c as g}from"./chunk-WNIGPWPI.js";import{P as K,aa as B,n as $}from"./chunk-EHX5ZB7Z.js";import{Kc as F,Ub as P,Vd as V,ee as q,fc as x,gc as C}from"./chunk-TCQHUZGC.js";import{C as W,w as b,x as I,y as M}from"./chunk-RV6OM76W.js";import{d as O}from"./chunk-56MPBIEL.js";import{q as T,t as k}from"./chunk-OWVMO73E.js";import{A as _}from"./chunk-SHY2LMMT.js";import{a as ne,r as D}from"./chunk-CNVMLXTH.js";import{a as y}from"./chunk-FFQ56KY4.js";import{f as c,h as s,n}from"./chunk-JORLGFWZ.js";s();n();var Q=c(y());s();n();var A=c(y());var ie=async()=>{let r=E("serviceWorkerMutexAcquire",void 0),e=v(await A.default.runtime.sendMessage(h(r)));if("error"in e)throw new Error(e.error.message);return()=>{let t=E("serviceWorkerMutexRelease",void 0);A.default.runtime.sendMessage(h(t))}},J=async r=>{let e=await ie();try{return await r()}finally{e()}};s();n();var X=c(y()),j=async(r,e,t)=>{let o=await X.default.identity.launchWebAuthFlow({interactive:t,url:e});if(!M(r,o))return I(r,o);throw new Error("Error fetching auth code")};var w=H(),ae={getClientID:W,redirectURL:Q.default.identity.getRedirectURL(),fetchAuthorizationCode:(r,e,t)=>j(r,e,t)},ce={storage:new m,signer:{sign:(r,e)=>x(w,r,e),getAuthenticationPublicKey:r=>w.getAuthenticationPublicKey(r),getAllSecretIdentifiers:()=>C(w)},authConfig:ae,queryClient:G,runExclusive:J,isServerTimeEnabled:()=>!T.isFeatureEnabled("kill-frontend-server-time")},me=b(ce);me.subscribe("userID",r=>{g.addUserProperties({authUserId:r})});s();n();var a=c(ne());s();n();var u=class{async get(e){let t=null;try{if(t=self.localStorage.getItem(e),typeof t!="string")return null;try{return JSON.parse(t)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${e}"`),t}}catch(o){let i=`[DeprecatedLocalStorage.get] Error getting key (${e}): ${o}`;throw new Error(i)}}async getAll(e){try{let t={};e=e||Object.keys(self.localStorage);for(let o of e)t[o]=await this.get(o);return t}catch(t){let o=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${e}): ${t}`;throw new Error(o)}}async remove(e){let t=`[DeprecatedLocalStorage.remove] Error removing key(s) (${e}): Method not implemented`;throw new Error(t)}async set(e,t){let o=`[DeprecatedLocalStorage.set] Error setting key (${e}): Method not implemented`;throw new Error(o)}async setAll(e){let o=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(e)}): Method not implemented`;throw new Error(o)}subscribe(e){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(e){let t=`[DeprecatedLocalStorage.update] Error updating key(s) (${e}): Method not implemented`;throw new Error(t)}};var ge=new m,pe=new u,ue=[...P,...N,U,F,"i18nextLng"],rt=()=>{let{data:r,isFetching:e}=V(),{data:t,isFetching:o}=B(),{data:i,isFetching:Z}=k([{key:"Local Storage",storage:ge},{key:"Deprecated Local Storage",storage:pe}],ue),{data:L}=K(),R=q(),l=(0,a.useCallback)(async()=>{let{version:d}=chrome.runtime.getManifest(),f=await g.getDeviceId(),se=await R();return{"App Version":d,"Platform Information":Y,"Display Language":$(O.language),"Phantom Auth":se,"Device Id":f,"Auto Lock Timer(ms)":L,...r,...t,...i}},[r,t,i,R,L]),ee=e||o||Z,te=(0,a.useCallback)(async d=>{d?.preventDefault();let f=await l();await _.downloadLog(f)},[l]),re=(0,a.useCallback)(()=>{S({url:z})},[]),oe=(0,a.useCallback)(()=>{S({url:D})},[]);return{appState:l,isFetching:ee,goCreateTicket:re,goSupportDesk:oe,downloadLogs:te}};export{me as a,rt as b};
//# sourceMappingURL=chunk-X7ZIPY4D.js.map
