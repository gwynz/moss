import{$a as hr,$c as Or,A as dr,Ad as lt,B as De,Ba as mr,Db as _e,Dc as Ve,Ib as wr,Jc as Pr,Kb as Er,Kc as ct,Lb as vr,Mb as Ne,Sa as fr,Sb as kr,Ua as gr,Va as yr,Wb as Le,Xb as V,Xc as ye,Zb as xr,Zc as he,_b as Cr,id as Rr,kb as Ae,mb as Tr,nb as Sr,nd as ut,pb as br,rb as Ar,sc as Ir,w as cr,x as ur,y as Fe,z as lr,za as pr}from"./chunk-MR3IPRFB.js";import{U as ar,a as it,c as st,j as at,x as ir}from"./chunk-EHX5ZB7Z.js";import{Hc as so,K as jt,L as K,Nd as X,Ua as rr,Ya as M,bb as nr,c as oo,cb as or,db as pe,eb as $,hb as me,id as se,oc as Ue,oe as ge,r as io,sb as Be}from"./chunk-TCQHUZGC.js";import{p as qt}from"./chunk-H52KJDU6.js";import{i as z,l as ie}from"./chunk-RV6OM76W.js";import{j as Z,s as sr}from"./chunk-56MPBIEL.js";import{L as tr,w as J}from"./chunk-OWVMO73E.js";import{D as O,p as $t,q as Ht,r as zt,s as Yt,u as Q,w as Y,z as W}from"./chunk-SHY2LMMT.js";import{B as Xt,a as U,aa as er,k as Jt,w as P,z as Zt}from"./chunk-SEWPLVP7.js";import{a as _,b as oe,h as d}from"./chunk-CNVMLXTH.js";import{f as B,h as i,i as m,m as Buffer,n as s}from"./chunk-JORLGFWZ.js";i();s();i();s();i();s();i();s();var _s="userExplorerPreferenceV2";i();s();i();s();var Js="isAnalyticsOptedOut";i();s();i();s();i();s();i();s();var Br=e=>{let{accountIdentifier:t,autoConfirmEnabled:r=!1,trustedAppsByAccount:n}=e;if(!t||!n)return;let o=Object.values(n),a=[],l=[];r?(o.forEach(u=>{u.autoConfirm&&ir(u.autoConfirm)?a.push(u):l.push(u)}),a.sort((u,c)=>(c.autoConfirm?.sessionStartTime??0)-(u.autoConfirm?.sessionStartTime??0))):l=o;let p=Zt(l.map(u=>{let c=u.lastConnectedTimestamp??0;return{timestamp:c,data:{...u,lastConnectedTimestamp:c}}}));return{autoConfirmEnabledApps:a,timeBucketedApps:p}};i();s();var Ur=(e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;let r=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return Xt(r).format("h:mm A")};i();s();var fo=0;function b(e,t){let r=`atom${++fo}`,n={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof e=="function"?n.read=e:(n.init=e,n.read=go,n.write=yo),t&&(n.write=t),n}function go(e){return e(this)}function yo(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}var Fr=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,gt=e=>"init"in e,ft=e=>!!e.write,We=new WeakMap,yt=e=>{var t;return ht(e)&&!((t=We.get(e))!=null&&t[1])},ho=(e,t)=>{let r=We.get(e);if(r)r[1]=!0,r[0].forEach(n=>n(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},To=e=>{if(We.has(e))return;let t=[new Set,!1];We.set(e,t);let r=()=>{t[1]=!0};e.then(r,r),e.onCancel=n=>{t[0].add(n)}},ht=e=>typeof e?.then=="function",Dr=e=>"v"in e||"e"in e,Qe=e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},_r=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},So=(e,t,r,n)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&r===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(r,n.n),yt(t.v)&&_r(e,t.v,n),(o=n.m)==null||o.t.add(e)},bo=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Nr=(...e)=>{let[t,r,n,o,a,l]=e,p=S=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!S)throw new Error("Atom is undefined or null");let h=t(S);return h||(h={d:new Map,p:new Set,n:0},r(S,h),a?.(S,Me)),h},u=new WeakMap,c=new Map,f=new Set,g=new Set,y=()=>{var S;let h=[],A=w=>{try{w()}catch(v){h.push(v)}};do{(S=Me[bo])==null||S.call(Me);let w=new Set,v=w.add.bind(w);c.forEach(E=>{var x;return(x=E.m)==null?void 0:x.l.forEach(v)}),c.clear(),f.forEach(v),f.clear(),g.forEach(v),g.clear(),w.forEach(A),c.size&&te()}while(c.size||f.size||g.size);if(h.length)throw h[0]},T=(S,h,A)=>{let w="v"in h,v=h.v,E=yt(h.v)?h.v:null;if(ht(A)){To(A);for(let x of h.d.keys())_r(S,A,p(x));h.v=A}else h.v=A;delete h.e,(!w||!Object.is(v,h.v))&&(++h.n,E&&ho(E,A))},k=S=>{var h;let A=p(S);if(Dr(A)&&(A.m&&u.get(S)!==A.n||Array.from(A.d).every(([I,re])=>k(I).n===re)))return A;A.d.clear();let w=!0,v=()=>{A.m&&(Se(S,A),te(),y())},E=I=>{if(Fr(S,I)){let ot=p(I);if(!Dr(ot))if(gt(I))T(I,ot,I.init);else throw new Error("no atom init");return Qe(ot)}let re=k(I);try{return Qe(re)}finally{So(S,A,I,re),w||v()}},x,R,L={get signal(){return x||(x=new AbortController),x.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!ft(S)&&console.warn("setSelf function cannot be used with read-only atom"),!R&&ft(S)&&(R=(...I)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&w&&console.warn("setSelf function cannot be called in sync"),!w)return rt(S,...I)}),R}};try{let I=n(S,E,L);return T(S,A,I),ht(I)&&((h=I.onCancel)==null||h.call(I,()=>x?.abort()),I.then(v,v)),A}catch(I){return delete A.v,A.e=I,++A.n,A}finally{w=!1}},C=S=>Qe(k(S)),N=S=>{var h;let A=new Map;for(let w of((h=S.m)==null?void 0:h.t)||[]){let v=p(w);v.m&&A.set(w,v)}for(let w of S.p)A.set(w,p(w));return A},H=S=>{let h=[S];for(;h.length;){let A=h.pop();for(let[w,v]of N(A))u.has(w)||(u.set(w,v.n),h.push(v))}},te=()=>{var S;let h=[],A=new WeakSet,w=new WeakSet,v=Array.from(c);for(;v.length;){let[E,x]=v[v.length-1];if(w.has(E)){v.pop();continue}if(A.has(E)){u.get(E)===x.n?h.push([E,x,x.n]):(u.delete(E),c.set(E,x)),w.add(E),v.pop();continue}A.add(E);for(let[R,L]of N(x))A.has(R)||v.push([R,L])}for(let E=h.length-1;E>=0;--E){let[x,R,L]=h[E],I=!1;for(let re of R.d.keys())if(re!==x&&c.has(re)){I=!0;break}I&&(k(x),Se(x,R),L!==R.n&&(c.set(x,R),(S=R.u)==null||S.call(R))),u.delete(x)}},de=(S,...h)=>{let A=!0,w=E=>Qe(k(E)),v=(E,...x)=>{var R;let L=p(E);try{if(Fr(S,E)){if(!gt(E))throw new Error("atom not writable");let I=L.n,re=x[0];T(E,L,re),Se(E,L),I!==L.n&&(c.set(E,L),(R=L.u)==null||R.call(L),H(L));return}else return de(E,...x)}finally{A||(te(),y())}};try{return o(S,w,v,...h)}finally{A=!1}},rt=(S,...h)=>{try{return de(S,...h)}finally{te(),y()}},Se=(S,h)=>{var A;if(h.m&&!yt(h.v)){for(let[w,v]of h.d)if(!h.m.d.has(w)){let E=p(w);be(w,E).t.add(S),h.m.d.add(w),v!==E.n&&(c.set(w,E),(A=E.u)==null||A.call(E),H(E))}for(let w of h.m.d||[])if(!h.d.has(w)){h.m.d.delete(w);let v=nt(w,p(w));v?.t.delete(S)}}},be=(S,h)=>{var A;if(!h.m){k(S);for(let w of h.d.keys())be(w,p(w)).t.add(S);if(h.m={l:new Set,d:new Set(h.d.keys()),t:new Set},(A=h.h)==null||A.call(h),ft(S)){let w=h.m,v=()=>{let E=!0,x=(...R)=>{try{return de(S,...R)}finally{E||(te(),y())}};try{let R=l(S,x);R&&(w.u=()=>{E=!0;try{R()}finally{E=!1}})}finally{E=!1}};g.add(v)}}return h.m},nt=(S,h)=>{var A;if(h.m&&!h.m.l.size&&!Array.from(h.m.t).some(w=>{var v;return(v=p(w).m)==null?void 0:v.d.has(S)})){let w=h.m.u;w&&f.add(w),delete h.m,(A=h.h)==null||A.call(h);for(let v of h.d.keys()){let E=nt(v,p(v));E?.t.delete(S)}return}return h.m},Me={get:C,set:rt,sub:(S,h)=>{let A=p(S),v=be(S,A).l;return v.add(h),y(),()=>{v.delete(h),nt(S,A),y()}},unstable_derive:S=>Nr(...S(...e))};return Me},Ao=e=>{let t=new Set,r,n=0,o=e.unstable_derive((...p)=>{let[u,c,,f]=p;return r=u,p[1]=function(y,T){c(y,T);let k=T.h;T.h=()=>{k?.(),T.m?t.add(y):t.delete(y)}},p[3]=function(y,T,k,...C){return n?k(y,...C):f(y,T,k,...C)},p}),a=o.set;return Object.assign(o,{dev4_get_internal_weak_map:()=>({get:p=>{let u=r(p);if(!(!u||u.n===0))return u}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:p=>{a({read:()=>null,write:(c,f)=>{++n;try{for(let[g,y]of p)gt(g)&&f(g,y)}finally{--n}}})}})},Tt=()=>{let e=new WeakMap,t=Nr(r=>e.get(r),(r,n)=>e.set(r,n).get(r),(r,...n)=>r.read(...n),(r,...n)=>r.write(...n),(r,...n)=>{var o;return(o=r.unstable_onInit)==null?void 0:o.call(r,...n)},(r,...n)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...n)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?Ao(t):t},we,Lr=()=>(we||(we=Tt(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=we),globalThis.__JOTAI_DEFAULT_STORE__!==we&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),we);i();s();var F=B(_(),1);var Kr=(0,F.createContext)(void 0),Qr=e=>{let t=(0,F.useContext)(Kr);return e?.store||t||Lr()},yc=({children:e,store:t})=>{let r=(0,F.useRef)(void 0);return!t&&!r.current&&(r.current=Tt()),(0,F.createElement)(Kr.Provider,{value:t||r.current},e)},bt=e=>typeof e?.then=="function",Wr=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},wo=F.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Wr(e),e)}),St=new WeakMap,Vr=e=>{let t=St.get(e);return t||(t=new Promise((r,n)=>{let o=e,a=u=>c=>{o===u&&r(c)},l=u=>c=>{o===u&&n(c)},p=u=>{"onCancel"in u&&typeof u.onCancel=="function"&&u.onCancel(c=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&c===u)throw new Error("[Bug] p is not updated even after cancelation");bt(c)?(St.set(c,t),o=c,c.then(a(c),l(c)),p(c)):r(c)})};e.then(a(e),l(e)),p(e)}),St.set(e,t)),t};function ae(e,t){let r=Qr(t),[[n,o,a],l]=(0,F.useReducer)(c=>{let f=r.get(e);return Object.is(c[0],f)&&c[1]===r&&c[2]===e?c:[f,r,e]},void 0,()=>[r.get(e),r,e]),p=n;(o!==r||a!==e)&&(l(),p=r.get(e));let u=t?.delay;if((0,F.useEffect)(()=>{let c=r.sub(e,()=>{if(typeof u=="number"){let f=r.get(e);bt(f)&&Wr(Vr(f)),setTimeout(l,u);return}l()});return l(),c},[r,e,u]),(0,F.useDebugValue)(p),bt(p)){let c=Vr(p);return wo(c)}return p}function Eo(e,t){let r=Qr(t);return(0,F.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}function hc(e,t){return[ae(e,t),Eo(e,t)]}i();s();var ko=d.object({data:d.string(),from:d.string(),to:d.string()}),xo=d.object({transaction:ko});async function Co({caip19:e,amount:t,owner:r}){let n=await z.api().post("/tokens/v1/unwrap",{owner:r,caip19:e,amount:t.toNumber()}),o=xo.safeParse(n.data);if(!o.success){let{error:a}=o;throw O.captureError(a,"fungibles"),new Le(`Failed to get unwrap transaction: ${a.message}`)}return o.data.transaction}var Io=({caip19:e,amount:t,owner:r})=>W({gcTime:Ne.Medium,staleTime:1/0,enabled:r!==""&&t.isGreaterThan(0),queryKey:V.unwrapTransaction({caip19:e,amount:t,owner:r}),async queryFn(){return await Co({caip19:e,amount:t,owner:r})}});i();s();i();s();var Po="25.13.0",ve=`fungible-tokens-${Po}`,Gr=[ve,"token-updates"],qr=[ve,"portfolio-value"],Oo=[ve,"token-balance"],Ro=[ve,"infinite-token-balances"],Mo=[ve,"visibility-overrides"],G={infiniteTokenBalances:({walletCaip19s:e})=>[...Ro,{walletCaip19s:e}],tokenBalance:({wallets:e,encodedCaip19:t,isSplCompressed:r})=>{let n=e.map(o=>typeof o=="string"?o:$({chainId:o.networkID,address:o.address,resourceType:"address"})).sort();return[...Oo,{walletCaip19s:n,encodedCaip19:t,isSplCompressed:r}]},tokenUpdates:({walletCaip19s:e,from:t})=>[...Gr,{walletCaip19s:e,from:t}],portfolioValue:({walletCaip19s:e,include:t,exclude:r,isMainnet:n})=>[...qr,{walletCaip19s:e,include:t,exclude:r,isMainnet:n}],visibilityOverrides:({accountId:e})=>[...Mo,{accountId:e}]};function Bo(){let e=J(),t=Ue(),r=Q();return Y({async mutationFn({accountId:n,mutations:o}){await Cr(e,t,{accountId:n,mutations:o})},async onSuccess(n,o){await Promise.all([r.invalidateQueries({queryKey:V.hiddenMints(o.accountId)}),r.invalidateQueries({queryKey:G.visibilityOverrides({accountId:o.accountId})})])}})}i();s();var kt=B(so());i();s();i();s();var D=[];for(let e=0;e<256;++e)D.push((e+256).toString(16).slice(1));function jr(e,t=0){return(D[e[t+0]]+D[e[t+1]]+D[e[t+2]]+D[e[t+3]]+"-"+D[e[t+4]]+D[e[t+5]]+"-"+D[e[t+6]]+D[e[t+7]]+"-"+D[e[t+8]]+D[e[t+9]]+"-"+D[e[t+10]]+D[e[t+11]]+D[e[t+12]]+D[e[t+13]]+D[e[t+14]]+D[e[t+15]]).toLowerCase()}i();s();var At,Uo=new Uint8Array(16);function wt(){if(!At){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");At=self.crypto.getRandomValues.bind(self.crypto)}return At(Uo)}i();s();i();s();var Fo=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),Et={randomUUID:Fo};function Do(e,t,r){if(Et.randomUUID&&!t&&!e)return Et.randomUUID();e=e||{};let n=e.random??e.rng?.()??wt();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return jr(n)}var vt=Do;i();s();var Ge={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new U(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},$r=class extends Error{constructor(t){super(t),this.name="SendFungibleFlowError"}};var Hr={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:Ge,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},xt=ge((e,t)=>({...(0,kt.default)(Hr),resetSendSlice:()=>{let r=(0,kt.default)(Hr);r.sendSessionId=vt(),e(r)},setAnalyticsRecipient:r=>{e({analyticsRecipient:r})},setSendFungibleKey:(r,n,o)=>{e({fungibleKey:r,splTokenAccount:n,encodedCaip19:o})},setSendFormValues:r=>{e({sendFormValues:r})},setInputAmount:r=>{let n=t();e({sendFormValues:{...n.sendFormValues,inputAmount:r}})},setShouldShowFiatValues:r=>{e({shouldShowFiatValues:r})},setRetryArgs:r=>{e({retryArgs:r})},setGasEstimation:r=>{e({gasEstimation:r})}}));i();s();var zr={collectible:void 0,sendFormValues:Ge,shouldRequireAmount:!1},_o=ge(e=>({...zr,resetSendSlice:()=>{e({...zr})},setSendCollectible:t=>{e({collectible:t})},setSendFormValues:t=>{e({sendFormValues:t})},setShouldRequireAmount:t=>{e({shouldRequireAmount:t})}}));i();s();i();s();var No={query:""},Lo=ge(e=>({...No,setQuery:t=>{e({query:t})}}));i();s();i();s();i();s();var qe=B(oo(),1),Jr=B(io(),1);var Yr=(0,qe.struct)([(0,qe.u8)("instruction")]);function Zr(e,t,r,n=[],o=Ae){let a=Ar([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,n),l=Buffer.alloc(Yr.span);return Yr.encode({instruction:br.CloseAccount},l),new Jr.TransactionInstruction({keys:a,programId:o,data:l})}var tn=B(_());i();s();function Xr(e,t,r){return K.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],Tr)[0]}var Vo=new Le("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function Ko(){let{connection:e}=Ve(),{data:t}=X(),{solanaChainAddress:r,accountIdentifier:n}=(0,tn.useMemo)(()=>({solanaChainAddress:t?.addresses.find(me),accountIdentifier:t?.identifier??""}),[t]),o=J(),a=se(),{t:l}=Z();return Y({mutationFn:async()=>{if(!r)return Promise.reject("solanaChainAddress not loaded");let{networkID:p,address:u}=r,c=new K.PublicKey(u),f=Xr(c,Sr,Ae);if(!await e.getAccountInfo(f))throw Vo;let y=Zr(f,c,c,[],Ae),T=new jt.Transaction().add(y),k={ownerAddress:u,networkID:p,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:l("assetDetailUnwrappingSOL")}}}},C=await _e({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new K.PublicKey(u),pendingTransactionInput:k,storage:o,transaction:T,useSubmissionService:!1});return{networkID:p,id:C}}})}i();s();var rn=B(_());var Qo=()=>{let{connection:e}=Ve(),{data:t}=X(),{solanaChainAddress:r,accountIdentifier:n}=(0,rn.useMemo)(()=>({solanaChainAddress:t?.addresses.find(me),accountIdentifier:t?.identifier??""}),[t]),o=J(),a=se(),{t:l}=Z();return Y({mutationFn:async p=>{if(!r)throw new Error("solanaChainAddress not loaded");if(p.type!=="CompressedSPL")throw new Error("SPL is not compressed");let u=await wr({owner:p.data.walletAddress,mint:p.data.mintAddress,amount:p.data.amount,programId:p.data.programId,connection:e}),{networkID:c,address:f}=r,g={ownerAddress:f,networkID:c,data:{signature:""},type:"decompress",display:{summary:{topLeft:{text:l("assetDetailClaiming")}}}};await _e({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new K.PublicKey(f),pendingTransactionInput:g,storage:o,transaction:u,useSubmissionService:!1})}})};i();s();var mn=B(_());i();s();i();s();var Wo=b(null),je=Wo;var Go=b(e=>{let t=e(je);return t?t.addresses.map(r=>$({chainId:r.networkID,address:r.address,resourceType:"address"})).sort():[]}),Te=Go;i();s();i();s();i();s();var qo=e=>Or(e)?.[0],ke=qo;var jo=e=>M.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType==="nativeToken"?e.queriedWalletBalances.map(n=>{let o=Be(e.decodedCaip19.chainId,n.address);return{...e,queriedWalletBalances:[n],totalQuantity:n.quantity,totalQuantityString:n.quantityString,walletAddress:n.address,legacyKey:ye.get(e.decodedCaip19.chainId).nativeTokenFungibleBalanceKey(e.decodedCaip19.chainId,o)}}):e,nn=e=>t=>t.flatMap(r=>{let n=e(r);return jo(n)}),$o=e=>{let{caip19:t,...r}=e,n=pe(t);return{...r,type:t.includes("/nativeToken:")?"native":"fungible",chainName:M.getChainName(n.chainId),encodedCaip19:t,decodedCaip19:n,legacyKey:ke(n)}},Ho=e=>{let{caip19:t,timestamp:r,...n}=e,o=pe(t);return{...n,type:t.includes("/nativeToken:")?"native":"fungible",encodedCaip19:t,decodedCaip19:o,chainName:M.getChainName(o.chainId),timestamp:r??void 0,legacyKey:ke(o),totalQuantity:e.postQuantity,totalQuantityString:e.postQuantityString}},on=nn($o),sn=nn(Ho);i();s();var zo=d.object({account:d.string(),quantity:d.number(),quantityString:d.string()}),Yo=d.object({address:d.string(),quantity:d.number(),quantityString:d.string(),lastTransferredDate:d.coerce.date().nullish(),subaccounts:d.array(zo).optional()}),Jo=d.object({price:d.number(),priceChange24h:d.number().optional(),lastUpdatedAt:d.coerce.date()}).nullish(),Zo=d.object({price:d.number(),priceChange24h:d.number().optional(),lastUpdatedAt:d.coerce.date()}),It={name:d.string().nullish(),symbol:d.string().nullish(),decimals:d.number(),spamStatus:d.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish(),logoUri:d.string().nullish(),price:Jo,livePrice:Zo.nullish().optional(),queriedWalletBalances:d.array(Yo),extraMetadata:d.object({compression:d.object({compressed:d.boolean()}).optional(),tokenProgram:d.string().nullish(),extensions:d.array(d.unknown()).nullish()}).optional()},xe=d.object({...It,type:d.enum(["native","fungible"]),totalQuantity:d.number(),totalQuantityString:d.string(),encodedCaip19:d.string(),decodedCaip19:or,chainName:d.string(),legacyKey:d.string().nullish(),timestamp:d.string().optional(),walletAddress:d.string().optional()}),jl=xe.omit({totalQuantity:!0,totalQuantityString:!0,queriedWalletBalances:!0,walletAddress:!0}),Xo=d.object({...It,caip19:d.string(),totalQuantity:d.number(),totalQuantityString:d.string()}),cn=d.object({items:d.array(Xo),cursor:d.string().nullish().default(null)}).transform(e=>{let{items:t,cursor:r,...n}=e;return{...n,nextCursor:r,tokens:t,updatedAt:Date.now()}}),ei=d.object({...It,caip19:d.string(),timestamp:d.string().nullish(),postQuantityString:d.string(),postQuantity:d.number()}),un=d.object({cursor:d.string().nullish().default(null),items:d.array(ei)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),$l=d.object({totalValueUsdCentsCurrent:d.number(),totalValueUsdStringCurrent:d.string(),totalValueUsdCents24h:d.number(),totalValueUsdString24h:d.string(),totalPercentChange24h:d.number()}),Hl=d.object({totalValueUsdCentsCurrent:d.number().optional(),totalValueUsdStringCurrent:d.string().optional(),totalValueUsdCents24h:d.number().optional(),totalValueUsdString24h:d.string().optional(),totalPercentChange24h:d.number().optional()}),an=d.object({caip19:d.string(),name:d.string(),symbol:d.string(),decimals:d.number(),logoUri:d.string().nullish().default(null),spamStatus:d.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish().transform(e=>e??"NOT_VERIFIED"),createdDate:d.coerce.date().nullish().default(null),extraMetadata:d.object({isMutable:d.boolean().nullish().default(null),creators:d.array(d.object({address:d.string(),share:d.number(),verified:d.boolean()})).nullish(),tokenProgram:d.string().nullish(),extensions:d.array(d.unknown()).nullish()}),categories:d.object({id:d.string(),name:d.string(),imageUri:d.string(),numTokens:d.number()}).array().optional()}),ti=an.extend({extraMetadata:an.shape.extraMetadata.extend({id:d.string().nullish().default(null),description:d.string().nullish().default(null),marketCap:d.coerce.number().optional(),circulatingSupply:d.coerce.number().optional(),totalSupply:d.coerce.number().optional(),liquidity:d.coerce.number().optional(),holders:d.coerce.number().optional(),links:d.array(d.object({type:d.string(),url:d.string()})).optional(),volume24hUSD:d.coerce.number().optional(),volume24hUSDChangePercentage:d.coerce.number().optional(),trades24h:d.coerce.number().optional(),trades24hChangePercentage:d.coerce.number().optional(),uniqueWallets24h:d.coerce.number().optional(),uniqueWallets24hChangePercentage:d.coerce.number().optional(),top10HoldersPercent:d.coerce.number().optional(),mintable:d.boolean().optional(),freezable:d.boolean().optional(),mutableMetadata:d.boolean().optional(),ownershipRenounced:d.boolean().optional(),updateAuthority:d.string().optional()})}),ln=ti.transform(({caip19:e,...t})=>{let r=pe(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:M.getChainName(r.chainId),encodedCaip19:e,decodedCaip19:r,legacyKey:ke(r)??e}});var ri=P({minutes:10});async function Pt({walletCaip19s:e,fungibleCaip19s:t,cursor:r}){let n={walletAddresses:e.join(","),includePrices:"true"};r&&(n.cursor=r),t&&t.length>0&&(n.fungibleAddresses=t.sort().join(","));try{let o=await z.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:n}).then(l=>{if(ie(l))return l.data;throw new Error(l.data?.message||l.data?.error||l.statusText,{cause:l.data?.code})}),a=cn.parse(o);return{...a,tokens:on(a.tokens)}}catch(o){throw o instanceof Error&&(O.addBreadcrumb("tokens","getTokenBalances","error",{...n,message:o.message,...typeof o.cause=="string"||typeof o.cause=="number"?{cause:o.cause}:{}}),O.captureError(o,"tokens")),o}}function dn({walletCaip19s:e,isEnabled:t=!0}){return{staleTime:ri,gcTime:P({days:3}),queryKey:G.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:async({pageParam:r})=>Pt({walletCaip19s:e,cursor:r}),initialPageParam:"",getNextPageParam:r=>r?.nextCursor||void 0}}function pn(e){let{walletCaip19s:t,encodedCaip19:r,queryOptions:n={enabled:!0}}=e;return{staleTime:P({seconds:10}),gcTime:P({days:3}),queryKey:G.tokenBalance({wallets:t,encodedCaip19:r}),enabled:n.enabled&&!!t.length,queryFn:async()=>(await Pt({walletCaip19s:t,fungibleCaip19s:[r]})).tokens}}var ni=(e,t,r)=>{let n=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(n!==o)return r?n?-1:1:n?1:-1},oi=(e,t,r)=>{let n=e.legacyKey===r,o=t.legacyKey===r;if(n!==o)return n?-1:1},ii=({isSplCompressed:e,legacyKey:t},r)=>r.length?r.length===1?r[0]:[...r].sort((o,a)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||a.encodedCaip19.includes("solana:"))){let l=ni(o,a,e);if(l)return l}if(t){let l=oi(o,a,t);if(l)return l}return a.totalQuantity-o.totalQuantity})[0]:null,fn=e=>{let t=ae(Te),r=pn({...e,walletCaip19s:t});return r.refetchInterval||(r.refetchInterval=P({seconds:5})),W({...r,select:n=>ii(e,n)})},$e=({networkID:e,queryOptions:t,addressType:r})=>{let n={chainId:e,slip44:M.getSlip44(e),resourceType:"nativeToken"},o=ye.get(e).nativeTokenFungibleBalanceKey(e,r)??null,a=$(n);return fn({encodedCaip19:a,legacyKey:o,queryOptions:t})},si=()=>{let{data:e}=X(),t=(0,mn.useMemo)(()=>e?.addresses.find(r=>M.isSolanaNetworkID(r.networkID)),[e]);return $e({networkID:t?.networkID||"solana:101",addressType:t?.addressType})};i();s();i();s();i();s();i();s();var ce=b(new Ht);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ot.apply(this,arguments)}m.NODE_ENV!=="production"&&(ce.debugPrivate=!0);var ai=(e,t,r)=>e?.suspense&&ci(t,r),ci=(e,t)=>e.isPending&&!t,ui=({result:e,throwOnError:t,query:r})=>e.isError&&!e.isFetching&&li(t,[e.error,r]);function li(e,t){return typeof e=="function"?e(...t):!!e}var di=e=>e.suspense&&typeof e.staleTime!="number"?Ot({},e,{staleTime:1e3}):e;function gn(e,t,r=n=>n(ce)){let n=b(0),o=b(r);m.NODE_ENV!=="production"&&(o.debugPrivate=!0);let a=b(()=>new WeakMap);m.NODE_ENV!=="production"&&(a.debugPrivate=!0);let l=b(c=>{let f=c(o),g=e(c),y=f.defaultQueryOptions(g),T=c(a).get(f);return y._optimisticResults="optimistic",T&&T.setOptions(y,{listeners:!1}),di(y)});m.NODE_ENV!=="production"&&(l.debugPrivate=!0);let p=b(c=>{let f=c(o),g=c(l),y=c(a),T=y.get(f);if(T)return T;let k=new t(f,g);return y.set(f,k),k});m.NODE_ENV!=="production"&&(p.debugPrivate=!0);let u=b(c=>{let f=c(p),g=c(l),y=f.getOptimisticResult(g),T=b(y);return m.NODE_ENV!=="production"&&(T.debugPrivate=!0),T.onMount=k=>{let C=f.subscribe($t.batchCalls(k));return()=>{f.getCurrentResult().isError&&f.getCurrentQuery().reset(),C()}},T});return m.NODE_ENV!=="production"&&(u.debugPrivate=!0),b(c=>{c(n);let f=c(p),g=c(l),y=c(c(u));if(ai(g,y,!1))return f.fetchOptimistic(g);if(ui({result:y,query:f.getCurrentQuery(),throwOnError:g.throwOnError}))throw y.error;return y},(c,f)=>{f(n,g=>g+1)})}function He(e,t=r=>r(ce)){return gn(e,zt,t)}function yn(e,t=r=>r(ce)){return gn(e,Yt,t)}i();s();var Cd=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Rt=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),pi=new WeakMap,mi=(e,t,r,n)=>{let o=Rt(()=>new WeakMap,pi,t),a=Rt(()=>new WeakMap,o,r);return Rt(e,a,n)};function q(e,t,r=Object.is){return mi(()=>{let n=Symbol(),o=([l,p])=>{if(p===n)return t(l);let u=t(l,p);return r(p,u)?p:u},a=b(l=>{let p=l(a),u=l(e);return o([u,p])});return a.init=n,a},e,t,r)}var fi=e=>typeof e?.then=="function";function gi(e=()=>{try{return self.localStorage}catch(r){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(r);return}},t){var r;let n,o,a={getItem:(u,c)=>{var f,g;let y=k=>{if(k=k||"",n!==k){try{o=JSON.parse(k,t?.reviver)}catch{return c}n=k}return o},T=(g=(f=e())==null?void 0:f.getItem(u))!=null?g:null;return fi(T)?T.then(y):y(T)},setItem:(u,c)=>{var f;return(f=e())==null?void 0:f.setItem(u,JSON.stringify(c,t?.replacer))},removeItem:u=>{var c;return(c=e())==null?void 0:c.removeItem(u)}},l=u=>(c,f,g)=>u(c,y=>{let T;try{T=JSON.parse(y||"")}catch{T=g}f(T)}),p;try{p=(r=e())==null?void 0:r.subscribe}catch{}return!p&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(p=(u,c)=>{if(!(e()instanceof self.Storage))return()=>{};let f=g=>{g.storageArea===e()&&g.key===u&&c(g.newValue)};return self.addEventListener("storage",f),()=>{self.removeEventListener("storage",f)}}),p&&(a.subscribe=l(p)),a}var Id=gi();i();s();i();s();i();s();function j(e){let t=b(0),r=b(()=>({i:0}),(u,c)=>{let f=u(r);return Object.assign(f,{m:!0,peek:u,set:c}),c(t,g=>g+1),()=>{f.m=!1,l(f),p(f)}});r.onMount=u=>u();let n=b(u=>{u(t);let c=u(r);if(!c.m||c.irc||c.i&&!c.irf)return c.p;p(c);let f=new Map,g=C=>{let N=u(C);return f.set(C,N),N};g.peek=c.peek;let y=(...C)=>{try{return++c.i,c.set(...C)}finally{Array.from(f.keys(),u),--c.i}};y.recurse=(C,...N)=>{if(c.fc){if(m.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return c.irc=!0,c.set(C,...N)}finally{c.irc=!1,Array.from(f).some(T)&&a(c)}};function T([C,N]){return u(C)!==N}++c.i;function k(){try{if(c.irf=!1,!c.m)return;l(c),c.c=o.effect(g,y)}catch(C){c.e=C,a(c)}finally{c.p=void 0,--c.i}}return c.irf?k():c.p=Promise.resolve().then(k)});if(m.NODE_ENV!=="production"){let u=function(c,f){Object.defineProperty(c,"debugLabel",{get:()=>`${o.debugLabel??"effect"}:${f}`}),c.debugPrivate=!0};u(t,"refresh"),u(r,"ref"),u(n,"base")}let o=b(u=>void u(n));return o.effect=e,o;function a(u){try{u.irf=!0,u.set(t,c=>c+1)}finally{u.irf=!1}}function l(u){if(typeof u.c=="function")try{u.fc=!0,u.c()}finally{u.fc=!1,u.c=void 0}}function p(u){if("e"in u){let c=u.e;throw delete u.e,c}}}i();s();var yi=()=>{try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},Mt=class{browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let n=(await this.storage.get(t))[t];return n==null||typeof n!="string"?null:JSON.parse(n)}catch(r){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){try{let r=await this.storage.get(t),n={};for(let o in r)if(Object.prototype.hasOwnProperty.call(r,o)){let a=r[o];if(a==null||typeof a!="string")n[o]=null;else try{n[o]=JSON.parse(a)}catch(l){console.error(`[ExtensionStorage.getAll] Error parsing key (${o}):`,l),n[o]=null}}return n}catch(r){let n=`[ExtensionStorage.getAll] Error getting keys (${t}): ${r}`;throw console.error(n),new Error(n)}}async remove(t){try{await this.storage.remove(t)}catch(r){let n=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);await this.storage.set({[t]:n})}catch(n){let o=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){try{let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=JSON.stringify(t[n]));await this.storage.set(r)}catch(r){let o=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${r}`;throw console.error(o),new Error(o)}}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),a=await r(o);a===null?await this.remove(t):await this.set(t,a)})}catch(n){let o=`[ExtensionStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{await this.storage.clear()}catch(t){let r=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},ze=class{storage=self.localStorage;async get(t){try{let r=this.storage.getItem(t);return r===null||typeof r!="string"?null:JSON.parse(r)}catch(r){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){let r={},n=t??Object.keys(this.storage);for(let o of n)try{let a=this.storage.getItem(o);if(t&&a===null)continue;if(a===null||typeof a!="string")r[o]=null;else try{r[o]=JSON.parse(a)}catch(l){console.error(`[WebLocalStorage.getAll] Error parsing key (${o}):`,l),r[o]=null}}catch(a){console.error(`[WebLocalStorage.getAll] Error reading key (${o}) from storage:`,a),t||(r[o]=null)}return r}async remove(t){try{let r=Array.isArray(t)?t:[t];for(let n of r)this.storage.removeItem(n)}catch(r){let n=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);this.storage.setItem(t,n)}catch(n){let o=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){let r=!1,n=Object.keys(t);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{await this.set(o,t[o])}catch{r=!0}if(r)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${n})`)}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),a=await r(o);a===null?await this.remove(t):await this.set(t,a)})}catch(n){let o=`[WebLocalStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{this.storage.clear()}catch(t){let r=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},Bt=class{initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl)if(yi())try{let r=(await import("./browser-polyfill-H5XEK5XD.js")).default;if(!r||!r.storage||!r.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Mt(r)}catch(t){console.error("Failed to load or initialize extension storage via polyfill:",t),console.warn("Falling back to Web Storage API (localStorage)."),this.storageImpl=new ze}else this.storageImpl=new ze}async ensureInitialized(){if(await this.initPromise,!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,r){return await this.ensureInitialized(),this.storageImpl.set(t,r)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,r){return await this.ensureInitialized(),this.storageImpl.update(t,r)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},Ut=new Bt;i();s();i();s();var Ce=class{namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(r=>{console.error("Failed to load data",r)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),r=!1;for(let n in this.data)Object.prototype.hasOwnProperty.call(this.data,n)&&this.data[n].expiresAt<=t&&(delete this.data[n],r=!0);return r}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,r){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:r,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,r){this.isLoaded||await this._load();let n=this._cleanupExpired(),o=this.data[t];if(!o)return n&&await this._save(),null;let a=this._updateExpiration(t),l=r.safeParse(o.value);return l.success?((n||a)&&await this._save(),l.data):(this.onError?.(new oe(l.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let r=this._cleanupExpired(),n=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],n=!0),(r||n)&&await this._save()}async clear(){this.data={},await this._save()}};var hn=new Map;function hi({storage:e,namespaceKey:t,ttlMs:r}){let n=hn.get(t);if(n)return n;if(!e)throw new Error("Storage is required");let o=new Ce({storage:e,namespaceKey:t,ttlMilliseconds:r,onError:(a,l)=>{console.error(`[PersistentStore Error - ${l}]:`,a.message),a instanceof oe&&console.error("Zod Issues:",a.issues)}});return hn.set(t,o),o}var Ft=hi;function Ti({atomToStoreOffline:e,namespaceKey:t,ttlMs:r,initialValue:n,schema:o,...a}){let l=b({status:"pending",value:n}),p=b(g=>{if("offlineKey"in a)return g(a.offlineKey);let y=g(e);if("offlineKey"in y&&typeof y.offlineKey=="string")return y.offlineKey;throw new Error("No key provided")}),u=j((g,y)=>{Ft({storage:Ut,namespaceKey:`.offline.${t}`,ttlMs:r}).get(g(p),o).then(T=>{T&&y(l,{status:"offline",value:T})}).catch(T=>{console.error(T)})}),c=j((g,y)=>{g(p),y(l,{status:"pending",value:n})}),f=j((g,y)=>{let T=g(e),k=g(p);T.status==="success"&&T.data&&T.data!==g(l).value&&Ft({storage:Ut,namespaceKey:`.offline.${t}`,ttlMs:r}).set(k,T.data).then(()=>{T.data&&y(l,{status:"live",value:T.data})}).catch(C=>{console.error(C)})});return q(b(g=>{let y=g(e);g(c),g(u),g(f);let T=g(l);return y.data?{status:"live",value:y.data}:{status:"offline",value:T.value}}),g=>g.value)}var Ye=Ti;i();s();async function Si(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let r=await z.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(n=>{if(ie(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText,{cause:n.data?.code??n.data?.name})}).catch(n=>{throw O.addBreadcrumb("tokens","getTokenBalanceUpdates","error",{message:n.message,cause:n.cause,...t}),O.captureError(n,"tokens"),n});try{return un.parse(r)}catch(n){throw n instanceof oe&&O.addBreadcrumb("tokens","getTokenBalanceUpdates parse error","error",{message:n.message,...n.issues?{issues:JSON.stringify(n.issues)}:{},result:JSON.stringify(r)}),n}}async function Tn(e){let t=[],r=()=>t.at(-1)?.nextCursor;do{let n=r(),o=await Si(n?{walletCaip19s:e.walletCaip19s,cursor:n}:e);t.push(o)}while(r());return sn(t.flatMap(n=>n.transfers))}i();s();function Dt({newUpdates:e,existingUpdates:t={}}){return e.reduce((r,n)=>r[n.encodedCaip19]?.totalQuantityString===n.totalQuantityString?r:{...r,[n.encodedCaip19]:n},t)}i();s();function bi(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let r=new Date(e).getTime(),a=t.groups.fraction.padEnd(6,"0").slice(-3);return r*1e3+parseInt(a,10)}var _t=bi;i();s();var Ai=b(!1),Sn=Ai;i();s();i();s();var wi=yn(e=>{let t=e(Te);return dn({walletCaip19s:t})}),ee=wi;var Ei=b(e=>{let{data:t}=e(ee),r=t?.pages[0];return!r||!r.tokens.length?0:r.updatedAt}),bn=Ei;i();s();var vi=q(je,e=>e?.identifier),ue=vi;var ki=1e3,An=5e3,wn=Math.ceil(An*2.25);function En(e){return P(e)*1e3}function xi(e){if(!e?.length)return null;let t=new Date(Date.now()-wn).toISOString();return Math.floor(Math.max(...e.map(({timestamp:r})=>_t(r||t))))}function Ci(e){let t=xi(e);return t?t-En({seconds:1}):null}var Ii=He(e=>{let t=e(ce),r=e(bn),n=Math.floor(r-P({minutes:10})),o=e(Te),a=e(Sn),l=n>Date.now()-P({days:10}),p=G.tokenUpdates({walletCaip19s:o,from:n}),u=async()=>{let c=t.getQueryData(p)?.lastTimestamp;if(!c){let T=new Date(n-wn).toISOString();return{updates:{},lastTimestamp:_t(T)}}let f=await Tn({walletCaip19s:o,fromMicroseconds:c-En({seconds:30})}),g=t.getQueryData(p)?.updates??{};return{updates:Dt({newUpdates:f,existingUpdates:g}),lastTimestamp:Math.max(Ci(f)??0,c)}};return{meta:{fetchCount:0},enabled:l&&!a&&o.length>0,queryKey:p,refetchInterval:c=>{let f=Number(c.meta?.fetchCount??0);return c.meta&&(c.meta.fetchCount=f+1),Math.min(Math.max(f*250,ki),An)},queryFn:u}}),Pi=Ye({atomToStoreOffline:Ii,offlineKey:b(e=>`${e(ue)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:d.object({updates:d.record(d.string(),xe),lastTimestamp:d.number()})}),Oi=q(Pi,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Je=Oi;i();s();i();s();function Ze(e){return t=>{let r=!1,n={...t};for(let[o,a]of Object.entries(e)){let l=a?.price,p=a?.lastUpdatedAt?new Date(a.lastUpdatedAt):null;if(!l||!p)continue;let u=t[o]?.price!==l&&(!t[o]?.lastUpdatedAt||p>t[o].lastUpdatedAt);r=r||u,u&&(n[o]={price:a.price,priceChange24h:a.priceChange24h,lastUpdatedAt:p})}return r?n:t}}i();s();var Ri=b(e=>{let{data:t,status:r}=e(ee);return{data:t?.pages.flatMap(n=>n.tokens),status:r}}),Mi=Ye({atomToStoreOffline:Ri,offlineKey:b(e=>`${e(ue)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:[],schema:d.array(xe)}),le=Mi;var Ie=b({}),Bi=j((e,t)=>{let n=e(ce).getQueryCache().subscribe(o=>{if(!o||o.type!=="updated")return;let a=o.query;a.queryKey[0]==="prices"&&t(Ie,l=>{let p=a.queryKey[1].id,u=a.state.data,c=l[p];return!u||c?.price===u?.price||!(!c?.lastUpdatedAt||u.lastUpdatedAt&&new Date(u.lastUpdatedAt)>c.lastUpdatedAt)?l:{...l,[p]:{price:u.price,priceChange24h:u.priceChange24h??u.usd_24h_change,lastUpdatedAt:new Date(u.lastUpdatedAt)}}})});return()=>{n()}}),Ui=b(e=>e(le).slice(-100).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})),Fi=j((e,t)=>{let r=e(Ui);!r||Object.keys(r).length===0||t(Ie,Ze(r))}),Di=b(e=>{let t=e(Je);return Object.values(t).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})}),_i=j((e,t)=>{let r=e(Di);!r||Object.keys(r).length===0||t(Ie,Ze(r))}),Ni=b(e=>(e(Fi),e(_i),e(Bi),e(Ie)),(e,t,r)=>{t(Ie,r)}),Xe=Ni;i();s();i();s();var Li=q(ee,e=>e.hasNextPage),et=Li;var Pe=b(1/0),tt=b(e=>(e(Vi),e(Ki),e(et)?e(Pe):0),(e,t,r)=>{if(r===null){t(Pe,1/0);return}let n=Math.min(e(Pe),r);n!==e(Pe)&&t(Pe,n)}),vn=tt,Vi=j((e,t)=>{let{hasNextPage:r}=e(ee),n=e(le),o=e(Xe);if(n.length>0&&!r){t(tt,0);return}let a=n.slice(-100).filter(l=>l.type==="fungible").map(l=>{let p=o[l.encodedCaip19]??l.price;return p?l.totalQuantity*p.price/10**l.decimals:1/0});t(tt,Math.min(...a))}),Ki=j((e,t)=>{e(ue)&&t(tt,1/0)});function Qi(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}function Wi(e,t){if(!e&&t)return 1;if(e&&!t)return-1}function kn(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}function xn(e,t){if(e!==t)return t-e}function Gi(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}var qi=b(e=>{let t=e(le),r=e(Je),n=new Set(Object.keys(r));if(t.length===0)return[];let o=t.map(a=>{let l=r[a.encodedCaip19];return l&&!a.extraMetadata?.compression?.compressed?(n.delete(a.encodedCaip19),{...a,...Gi(l)}):a});return n.forEach(a=>{let l=r[a];l&&o.push({...l,queriedWalletBalances:[]})}),o}),ji=b(e=>{let t=e(Xe),r=e(qi),n=e(vn),o=r.filter(a=>a.totalQuantity>0||a.type==="native").map(a=>({...a,livePrice:t[a.encodedCaip19]??a.price})).sort((a,l)=>{let p=a.livePrice?.price,u=l.livePrice?.price,c=Wi(p,u);if(c)return c;let f=a.totalQuantity/10**a.decimals,g=l.totalQuantity/10**l.decimals;if(!p&&!u){let C=Qi(a,l);if(C)return C;let N=xn(f,g);if(N)return N;let H=kn(a.name,l.name);return H||0}let y=(p??0)*f,T=(u??0)*g,k=xn(y,T);return k||(kn(a.name,l.name)??0)});return n?o.filter(a=>{let l=a.livePrice?.price,p=a.totalQuantity/10**a.decimals;return(l??0)*p>=n}):o}),Cn=ji;i();s();i();s();i();s();function Nt(e,t){return{gcTime:Ne.Long,staleTime:1/0,enabled:!!t&&!!e,queryKey:G.visibilityOverrides({accountId:t??""}),async queryFn(){return!t||!e?new Map:await xr(e,t)}}}i();s();var $i=b(null),In=$i;var Hi=new Map,Pn=He(e=>{let t=e(In),r=e(ue);return Nt(t,r)}),On=q(Pn,e=>e.status),zi=b(e=>e(Pn).data??Hi),Rn=zi;var Yi=b(e=>{let{isLoading:t}=e(ee),r=e(le),n=e(On);return t&&r.length===0||n==="pending"}),Mn=q(Yi,e=>e);function Bn(){let e=ae(Cn),t=ae(Mn),r=ae(et),n=ae(Rn);return{isLoading:t,hasNextPage:r,fungibleTokens:e,visibilityOverrides:n}}i();s();i();s();var Un=B(_());var Ji=({wallets:e,encodedCaip19:t,isSplCompressed:r=!1})=>{let n=Q();return(0,Un.useCallback)(()=>n.invalidateQueries({queryKey:G.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:r})}),[n,e,t,r])},Zi=Ji;i();s();function Fn({tokens:e}){return kr({tokens:e}).catch(t=>{throw O.addBreadcrumb("tokens","getTokenPrices","error",{message:t.message,cause:t.cause,tokens:e.map($).join(",")}),O.captureError(t,"tokens"),t})}i();s();i();s();i();s();function Xi(e){let t={message:"Failed to parse token details response"};if(e instanceof oe)try{t.zodIssuesJson=JSON.stringify(e.issues.map(r=>({path:r.path.join("."),message:r.message,code:r.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}var Dn=Xi;function _n(e){return e.resourceType==="nativeToken"?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}function es(e){return _n(pe(e))}function ts(e){let t=new URLSearchParams,r="encodedCaip19"in e?es(e.encodedCaip19):_n(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[r,{params:t}]}async function Lt(e){let t=await z.api().timeout(P({seconds:10})).get(...ts(e)).then(r=>{if(ie(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText,{cause:r.data?.code})}).catch(r=>{throw O.addBreadcrumb("tokens","getTokenDetails","error",{message:r.message,cause:r.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:$(e.decodedCaip19)}}),O.captureError(r,"tokens"),r});try{return ln.parse(t)}catch(r){let n=Dn(r);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?n.caip19=e.encodedCaip19:"decodedCaip19"in e&&(n.caip19=$(e.decodedCaip19)),O.addBreadcrumb("tokens","getTokenDetails.ParseError","error",n),r}}function rs({caip19:e,includePrice:t}){let{data:[r]}=tr(["enable-fungible-categories"]);return W({queryKey:["fungibleDetails",e],queryFn:async()=>{let n=await Lt(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t});return r?{...n,categories:[...Array(6).keys()].map(o=>({id:`category-${o}`,name:`Category ${o}`,imageUri:"https://api.phantom.app/image-proxy/?image=https%3A%2F%2Fbafkreibk3covs5ltyqxa272uodhculbr6kea6betidfwy3ajsav2vjzyum.ipfs.nftstorage.link&anim=false",numTokens:Math.floor(Math.random()*100)}))}:n}})}var ns=rs;i();s();var Qt=B(_());i();s();var Vt=new U(0),Kt=({chainAddress:e,type:t,balance:r,decimals:n,recipient:o,gasEstimation:a,clampToZero:l=!0})=>{let{data:p,isPending:u}=ct(e);if(!t||!r)return Vt;let c=new U(r).multipliedBy(er(n));if(!he(t))return c;if(!a)return;let f=new U(0);if(Fe(a))f=c.minus(new U(a.value));else if(dr(a)){let{gasLimit:g,maxFeePerGas:y,l1Fee:T=new U(0)}=a,k=g.times(y).plus(T);f=c.minus(k)}else if(De(a)){if(!e||u)return;let g=e.addressType,y=p?.safeToSendUtxos??[],T=ur(a.btcPerKilobyte),k=o&&rr.safeParse(o).success?o:"bc1p",N=[{value:y.reduce((te,de)=>te.plus(new U(de.value)),new U(0)).toNumber(),address:k}],H=fr(g,y,N,T.toNumber(),[]);if(H.type==="error")f=new U(H.maxAmount).integerValue(U.ROUND_DOWN);else{let{inputs:te,fee:de}=H;f=te.reduce((Se,be)=>Se.plus(new U(be.value)),new U(0)).minus(de).integerValue(U.ROUND_DOWN)}}else if(lr(a))f=c.minus(a.gasBudget);else return Jt(a);return f.isGreaterThan(Vt)?f:l?Vt:f};var os=({networkID:e,addressType:t,gasEstimation:r,transactionValue:n=new U(0),recipient:o})=>{let{data:a,isLoading:l,isError:p}=$e({networkID:e,addressType:t}),u=ye.get(e).nativeFungibleTokenType,c="unknown",f="",g=(0,Qt.useMemo)(()=>{let T=a?.queriedWalletBalances[0]?.address;if(!T)return;let k=Be(e,T);return{networkID:e,address:T,addressType:k}},[a?.queriedWalletBalances,e]),y=Kt({chainAddress:g,type:u,balance:a?.totalQuantityString?new U(a?.totalQuantityString):void 0,decimals:a?.decimals??0,recipient:o,gasEstimation:r,clampToZero:!1});return!p&&a&&y&&(y.gte(n)?c="sufficient":c="insufficient",f=a?.symbol||""),(0,Qt.useMemo)(()=>({hasSufficientFunds:c,nativeTokenSymbol:f,isLoading:l,isError:p}),[c,f,l,p])};i();s();var Qn=B(_());i();s();var Wt=B(_());i();s();var Nn=({chainAddresses:e=[]})=>{let t=V.tokensErrorCount(e);return W({queryKey:t,initialData:0})};i();s();var is=({errors:e})=>e;function Ln({chainAddresses:e,queryOptions:t}){return Rr({select:is,chainAddresses:e,queryOptions:t})}var Vn=3,ss=1,Kn=({networkID:e,chainAddresses:t=[]})=>{let{data:r=[]}=Ln({chainAddresses:t}),{data:n=0}=Nn({chainAddresses:t}),o=n>=Vn,{data:a=0}=Ir(),l=a>=Vn,p=r.length===ss&&r.some(f=>f.code==="TokensTrimmed"),{t:u}=Z(),c=(0,Wt.useMemo)(()=>{if(o)return u("partialErrorGeneric");let f=r.filter(y=>e?y.details.chainId===e:!0),g=f.length+(l?1:0);return g?g>1?u("partialErrorGeneric"):l?u("partialErrorTokenPrices"):p?u("partialErrorTokensTrimmed"):e?u("partialErrorTokenDetail"):u("partialErrorBalanceChainName",{chainName:M.getChainName(f[0].details.chainId)}):""},[o,r,l,e,p,u]);return(0,Wt.useMemo)(()=>({partialErrorMessage:c,shouldShowPartialError:c!==""}),[c])};function as(e){let{onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o,account:a}=e,{shouldShowPartialError:l,partialErrorMessage:p}=Kn({chainAddresses:a?.addresses});return{ctaActions:cs({onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o}),shouldShowPartialError:l,partialErrorMessage:p}}function cs(e){let{t}=Z();return(0,Qn.useMemo)(()=>{let n=[];return n.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),n.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),n.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),n.sort((o,a)=>(lt.get(o.type)??100)-(lt.get(a.type)??100)),{primary:n,more:[]}},[t,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}i();s();var Wn=B(_());var us=({networkID:e,unsignedTransaction:t,pendingActivityRows:r,accountIdentifier:n,accountSigner:o,storage:a,includeCallPayload:l})=>({accountSigner:o,accountIdentifier:n,networkID:e,unsignedTransaction:t,...l&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:r}},storage:a}),ls=async({t:e,fungible:t,unsignedUnwrapTx:r,gasEstimation:n,storage:o,accountMetadata:a,accountSigner:l})=>{if(!r)throw new Error("Unsigned unwrap transaction is required");if(!n)throw new Error("Gas estimation is required");let{chain:p,balance:u}=t.data;if(!M.isEthereumNetworkID(p.id))throw new Error(`Chain is not supported: ${p.id}`);let c=p.id,f={topRight:{text:`+${u} ${p.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${u} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},g=qt.parse({type:"0x2",chainId:M.getEVMNetworkIDValue(c),gas:`0x${n.gasLimit.toString(16)}`,maxFeePerGas:`0x${n.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${n.maxPriorityFeePerGas.toString(16)}`,...r}),y=us({storage:o,accountSigner:l,pendingActivityRows:f,includeCallPayload:!1,networkID:c,unsignedTransaction:g,accountIdentifier:a.accountIdentifier});return hr(y)},ds=()=>{let{data:e}=X();return(0,Wn.useMemo)(()=>{let r=e?.type,n=e?.name??"",o=e?.identifier??"";return{accountName:n,accountType:r,accountIdentifier:o}},[e])},ps=e=>{let t=J(),r=Q(),{t:n}=Z(),o=ds(),a=se();return Y({async mutationFn({fungible:l,unsignedUnwrapTx:p,gasEstimation:u}){return await ls({t:n,fungible:l,unsignedUnwrapTx:p,gasEstimation:u,accountMetadata:o,storage:t,accountSigner:a})},async onSuccess(){await r.invalidateQueries({queryKey:V.tokens(e)})}})};i();s();i();s();i();s();var Gn=()=>{let{setRetryArgs:e}=xt();return t=>{if(t instanceof yr){let{successfulTxIds:r}=t,[n,o]=r;e({type:"BRC20",commitTxId:n,revealTxId:o})}}};function ms(){let e=J(),{data:t}=X({select:l=>l.identifier}),r=Gn(),n=Pr(),o=se();return Y({mutationFn:async({multichainTransaction:l,pendingTransactionInput:p,senderAddress:u,gasEstimation:c})=>{if(!t)throw new Error("No account identifier found");let{networkID:f}=l,g=await pr.get(f).onBeforeSend({multichainTransaction:l,gasEstimation:c}),y=await vr({accountIdentifier:t,accountSigner:o,multichainTransaction:g,networkID:f,pendingTransactionInput:p,senderAddress:u,storage:e,utxoManager:n});return Er(f,y)},onError(l){l instanceof Error&&(O.captureError(l,"fungibles"),l instanceof gr&&r(l))}})}i();s();var qn=B(_());var fs=(e,t,r)=>{let n=Q(),{fungibles:o}=ut({keys:[e]}),a=o.length===1?o[0]:void 0;(0,qn.useEffect)(()=>{if(!a)return;let{type:l,data:p}=a,{balance:u,decimals:c,chain:f}=p,{id:g}=f,y=he(l)===!0;if(!r||!u||y||u.isEqualTo(t))return;let T=V.transferFungibleLoggingContext(e),k={transactionId:r,decimals:c,chainId:g,isNativeToken:y,previousBalance:u,fungibleKey:e};n.setQueryData(T,k)},[r])};i();s();var jn=P({minutes:1}),gs=(e,t=!0)=>{let r=V.solanaBalance(e);return W({enabled:!!e&&t&&me(e),gcTime:jn,staleTime:jn,queryKey:r,async queryFn(){if(!e)throw new Error("No chain address provided");if(me(e))return mr(e.networkID).getBalance(new K.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})};i();s();i();s();var $n=B(_());var ys=e=>{let{data:t}=ar();return(0,$n.useMemo)(()=>{if(!e||!t)return;let r=e.data.chain.id,n=t.explorers[r]??it.get(r).defaultExplorer,o,a;if(he(e.type))a="address",o=e.data.walletAddress;else switch(e.type){case"SuiCoin":{a="token",o=e.data.contractAddress;break}case"ERC20":{a="address",o=e.data.contractAddress;break}case"SPL":case"CompressedSPL":{a="address",o=e.data.mintAddress;break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let l=at({networkID:r,endpoint:a,explorerType:n,param:o});return{explorerName:st[n],explorerUrl:l}},[e,t])};i();s();var Hn=B(_());var hs=e=>{let t=Q();return(0,Hn.useCallback)(()=>t.invalidateQueries({queryKey:V.tokens(e)}),[t,e])};i();s();var zn=B(_()),Ts=(e,t)=>(0,zn.useMemo)(()=>{if(e)if(De(e)){let r=cr(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:r.toString()})}}else return Fe(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:sr.colors.legacy.accentWarning,rightSubtext:""}:void 0},[e,t]);i();s();var Ss=B(_());i();s();i();s();i();s();var Re=(o=>(o.FAIL_SEVERE="FAIL_SEVERE",o.FAIL_HIGH="FAIL_HIGH",o.NO_ACTION="NO_ACTION",o.DATA_NOT_FOUND="DATA_NOT_FOUND",o))(Re||{}),Yn=d.object({action:d.nativeEnum(Re),address:nr,expirationUnixtimeInSec:d.number().nullish().default(null)}),Gt=d.object({addressScreenResults:d.array(Yn)}),Oe=class extends Error{constructor(t){super(t),this.name="WalletScreenError"}};i();s();var no=B(_());i();s();i();s();var bs="@phantom/wallet-screening",Jn=`${bs}:wallet-screen-action`,Zn={walletScreenAction(e){return[Jn,e]}};i();s();var Xn=new Error("Failed to fetch wallet screen action.");async function eo(e){try{let t=await z.api().post("/wallet_screen/v1",e);if(!ie(t))throw Xn;let r=t.data;return Gt.parse(r)}catch{throw Xn}}var to=P({days:7}),ro=e=>{let t=e!==void 0&&M.isMainnetNetworkID(e.networkID),r=[];if(e!==void 0){let p=M.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;r=[{chainId:e.networkID,address:p,resourceType:"address"}]}let n={addresses:r},o=Q(),a=Zn.walletScreenAction(n),l=[a[0]];return W({enabled:t,queryKey:a,gcTime:to,staleTime:to,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(As(o,l))return"FAIL_SEVERE";let u=await eo(n);return ws(u)}})},As=(e,t)=>{let r=e.getQueriesData({queryKey:t,exact:!1}),n=!1;for(let[o,a]of r){let l=a;if(l&&l==="FAIL_SEVERE"){n=!0;break}}return n},ws=e=>{let t=e.addressScreenResults;return t.some(r=>r.action==="FAIL_SEVERE")?"FAIL_SEVERE":t.some(r=>r.action==="FAIL_HIGH")?"FAIL_HIGH":t.some(r=>r.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var Es=(e,t)=>{let r=Ue(),{data:n}=ro(e);switch((0,no.useEffect)(()=>{n&&e&&r.capture("walletScreened",{data:{walletScreen:{action:n.toString(),surface:t},chainId:M.getChainID(e.networkID),networkId:e.networkID}})},[n,e,t,r]),n){case"FAIL_SEVERE":case"FAIL_HIGH":throw new Oe(`Transaction disabled: ${t}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};i();s();i();s();export{Br as a,Ur as b,Zr as c,b as d,Qr as e,yc as f,ae as g,Eo as h,hc as i,ce as j,He as k,q as l,Io as m,G as n,Bo as o,$r as p,xt as q,_o as r,ms as s,fs as t,Kt as u,Ko as v,Qo as w,gs as x,ys as y,Zi as z,jl as A,$l as B,Hl as C,ri as D,je as E,Te as F,fn as G,si as H,Fn as I,j as J,Ye as K,Sn as L,ee as M,ue as N,Ii as O,Xe as P,et as Q,Cn as R,In as S,Rn as T,Mn as U,Bn as V,ns as W,os as X,Kn as Y,as as Z,hs as _,Ts as $,ps as aa,Oe as ba,Jn as ca,Es as da};
//# sourceMappingURL=chunk-F4IQK4JV.js.map
