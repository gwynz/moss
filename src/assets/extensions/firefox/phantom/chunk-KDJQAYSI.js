import{r as Bs}from"./chunk-F4IQK4JV.js";import{$a as ds,$b as Ze,Aa as ho,Ab as ys,Ba as vt,Bd as Ns,Ca as as,Da as ls,Db as gs,Ed as Vs,F as ss,G as Qo,Jc as Us,Ka as cs,Kb as Cs,Kc as Os,Lb as Ss,Lc as ks,Nb as ws,Oc as Ps,Qa as us,Sa as Zo,Ta as er,Tb as or,Ub as nn,Yb as Et,ac as sn,bc as bo,da as qt,ea as W,ec as an,fa as Xo,fc as xs,fd as Ms,ga as fo,gb as Lc,gc as yo,gd as Ds,ha as E,hb as ps,ia as rn,ib as ms,ja as Gt,jc as ln,ka as Wt,kc as rr,l as mo,la as I,lc as Ts,ma as V,mc as vs,na as dt,nc as Es,oa as G,od as Rs,p as ts,pa as w,qa as ue,r as os,ra as Kt,rc as As,s as rs,sa as U,ta as Yo,u as Ko,ua as ae,v as ns,va as Je,vb as tr,wa as z,wb as fs,wc as Is,x as is,xa as F,xb as hs,yb as bs,za as Jo}from"./chunk-MR3IPRFB.js";import{a as Ji,c as Zi,j as es}from"./chunk-EHX5ZB7Z.js";import{H as Di,K as Ye,L as M,La as zi,Md as Yi,Na as $o,Nd as qo,Va as zo,Wa as Hi,Ya as j,Za as qi,_a as zt,hb as Gi,id as Ht,ke as Go,nb as Wi,oc as ie,oe as Wo,sb as Ho,tb as Ki,xb as Qi,y as en,yb as Xi}from"./chunk-TCQHUZGC.js";import{p as $t}from"./chunk-H52KJDU6.js";import{i as ye,l as Ri,m as ut}from"./chunk-RV6OM76W.js";import{d as xe,j as Q}from"./chunk-56MPBIEL.js";import{w as ee}from"./chunk-OWVMO73E.js";import{D as Y,u as re,w as Pe,z as ne}from"./chunk-SHY2LMMT.js";import{T as Fi,X as tn,a as po,aa as Lo,b as pe,ca as on,e as Ni,ea as Fo,ha as $i,j as Vi,k as ji,n as _i,q as _o,r as Li,w as Z}from"./chunk-SEWPLVP7.js";import{a as O,h as b,j as jo}from"./chunk-CNVMLXTH.js";import{f as v,h as s,l as _c,m as Buffer,n as a}from"./chunk-JORLGFWZ.js";s();a();var Te=t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},Fc=t=>t??[],Ie=class extends Error{constructor(e){super(e),this.name="CollectiblesError"}},_=b.string().nullish().transform(Te),At=b.number().nullish().transform(Te),cn=b.union([_,At]).transform(t=>typeof t=="number"?t.toString():t),$c=b.object({name:_,symbol:_,decimals:At,address:_}),un=(y=>(y[y.Uninitialized=0]="Uninitialized",y[y.EditionV1=1]="EditionV1",y[y.MasterEditionV1=2]="MasterEditionV1",y[y.ReservationListV1=3]="ReservationListV1",y[y.MetadataV1=4]="MetadataV1",y[y.ReservationListV2=5]="ReservationListV2",y[y.MasterEditionV2=6]="MasterEditionV2",y[y.EditionMarker=7]="EditionMarker",y[y.UseAuthorityRecord=8]="UseAuthorityRecord",y[y.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",y[y.TokenOwnedEscrow=10]="TokenOwnedEscrow",y[y.TokenRecord=11]="TokenRecord",y[y.MetadataDelegate=12]="MetadataDelegate",y))(un||{}),nr=b.nativeEnum(un),js=b.object({price:b.number(),token:$c.nullish().transform(Te)}),zc=js.nullish().transform(Te),Hc=b.object({name:_,url:_,isVerified:b.coerce.boolean()}),_s=b.object({id:b.string(),isValidCollectionId:b.coerce.boolean(),name:_,description:_,externalUrl:_,imageUrl:_,isSpam:b.coerce.boolean(),spamStatus:b.nativeEnum(Et).optional().default("NOT_VERIFIED"),floorPrice:js.nullish().transform(Te),ownerCount:At,totalCount:At,tokenCount:At,marketplaces:b.array(Hc)}),qc=b.object({small:_,medium:_,large:_,blurhash:_}),Gc=qc.nullish().transform(Te),Wc=b.enum(["image","video","audio","model","other"]),Kc=b.object({url:_}),go=Kc.nullish().transform(Te),Qc=b.object({type:Wc,image:go,video:go,audio:go,model:go,other:go,previews:Gc}),Xc=Qc.nullish().transform(Te),Yc=b.object({trait_type:_,value:_.or(At),display_type:_}),Jc=b.object({id:b.string(),contract:b.string(),standard:b.nativeEnum(nn)}),Ls=b.object({compressed:b.boolean(),merkleTree:b.string(),leafIndex:b.number()}),Zc=b.object({mint:b.string(),tokenAccount:b.string(),standard:b.nativeEnum(or),compression:Ls.nullish().transform(Te),programId:b.string(),mintExtensions:Vi(ws).optional()}),eu=b.object({id:b.string(),url:b.string(),displayName:b.string(),description:b.string(),count:b.number()}),tu=b.object({hash:b.string(),index:b.number(),distinctRareSats:b.number(),satributes:b.array(eu),blockNumber:b.number(),value:b.number(),backgroundImageUrl:b.string()}),ou=b.object({firstCreatedTransactionHash:b.string(),firstCreatedInscriptionId:b.string(),inscriptionId:_,inscriptionNumber:cn,outputValue:cn,satNumber:cn,satName:_,satRarity:_,protocolName:_,utxoHash:_,utxoIndex:At,createdAt:b.string().nullish().transform(Te),utxoDetails:tu.nullish().transform(Te)}),ru=b.object({objectId:b.string().optional(),kioskId:b.string().optional()}),nu=b.object({listingPrice:b.string(),listingPriceUiAmount:b.string(),isNative:b.boolean(),url:b.string()}),iu=b.union([Zc,Jc,ou,ru]),dn=b.object({id:qi,chain:Wi,name:_,symbol:_,description:_,externalUrl:_,collection:_s,media:Xc,uri:_,attributes:b.array(Yc).nullish().transform(Fc),lastSalePrice:zc,balance:_,decimals:_,owner:_,chainData:iu.optional(),listings:b.record(nu).nullish().transform(Te)}),su=_s.extend({items:b.array(dn)}),Nf=b.object({items:b.array(su),isTrimmed:b.boolean()});var Vf=b.object({compression:Ls.nullish().transform(Te).refine(t=>t?.compressed),mint:b.string()}),jf=b.object({root:b.string(),proof:b.array(b.string()),merkleTree:b.string(),dataHash:b.string(),creatorHash:b.string(),leafIndex:b.number(),owner:b.string(),delegate:b.string().optional()});s();a();s();a();var pn=v(_c());s();a();var au=new M.PublicKey("NTYeYJ1wr4bpM5xo6zx5En44SvJFAd35zTxxNoERYqd"),zf=new M.PublicKey("M2mx93ekt1fmXSVkTrUL9xVFHkmME8HTUi5Cyc5aF7K");function ir(t){let e=[2,6],o=nr.safeParse(t);return o.success&&e.includes(o.data)}var mn=pn.Buffer.from("metadata"),lu=pn.Buffer.from("edition"),fn=mo.toBuffer();function Jf(t){let[e]=M.PublicKey.findProgramAddressSync([mn,fn,t],mo);return e}function Fs(t){let[e]=M.PublicKey.findProgramAddressSync([mn,fn,t,lu],mo);return e}function Zf(t){let[e]=M.PublicKey.findProgramAddressSync([mn,fn,t],mo);return e}var cu="CollectibleEdition";function uu(t,e){return ne({queryKey:[cu,{mintAddress:t}],async queryFn(){if(!e)return{};let o=Buffer.from(new M.PublicKey(t).toBytes()),r=Fs(o),{Edition:n}=await os();try{let i=await n.fromAccountAddress(e,r),l=nr.safeParse(i.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${i.key}`);return{key:l.data,isMasterEdition:ir(i.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}s();a();function le(t){return t?.tokenAccount!==void 0}function Be(t){return t?.contract!==void 0}function Ge(t){return t!==void 0&&"firstCreatedTransactionHash"in t}function $s(t){return t!==void 0&&"objectId"in t}function zs(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}function Qt(t){return t!==void 0&&"utxoDetails"in t}s();a();var bn=v(O());s();a();s();a();var pt=(t,e,o,r)=>{(!e||e>=400&&e<500)&&(Y.addBreadcrumb(o,t.message,"info",r),Y.captureError(t,"collectibles"))};s();a();var Hs=t=>{let e=!1;return{collectibles:t.reduce((r,n)=>{let i=dn.safeParse(n);return i.success?r.push(i.data):e=!0,r},[]),containsParseFailure:e}};var du="collectibles",pu=new Error("Failed to fetch collectibles for addresses");async function qs(t){let e="/collectibles/v1";try{let r=(await ye.api().post(e,{addresses:t})).data,n=!!r.isTrimmed;if(!r.collectibles)throw pu;let{collectibles:i,containsParseFailure:l}=Hs(r.collectibles);return l&&Y.captureError(new Error("collectibles failed to parse some items"),"collectibles"),{allCollectibles:i,isTrimmed:n}}catch(o){if(ut(o)){let r=o.response?.status;pt(o,r,du)}throw o}}s();a();s();a();var Ws=t=>{let e=[];for(let[o,r]of t){r.sort((i,l)=>{let c=i.name??"",d=l.name??"",p=c.localeCompare(d);if(c.localeCompare(d))return p;let m=Gs(i),h=Gs(l);return m.localeCompare(h)});let[n]=r;n&&e.push({..."externalUrl"in n?{externalUrl:n.externalUrl}:void 0,...n.collection,items:r})}return e.sort((o,r)=>{if(o.items.length>r.items.length)return-1;if(r.items.length>o.items.length)return 1;let n=o.name??o.id??"",i=r.name??r.id??"";return n.localeCompare(i)})};function Gs(t){let e=t.chainData;return le(e)?e.tokenAccount:Be(e)?e.id:(Ge(e),t.id)}function Ks(t){let e=new Map;for(let o of t){let r=o.collection.id,n=e.get(r)??[];n.push(o),e.set(r,n)}return Ws(e)}s();a();s();a();var Me="collectibles",hn=[Me,"collectibleBids"],P={collections:t=>[Me,"collections",{addresses:t.map(us)}],hiddenCollections:t=>[Me,"hiddenCollections",t],unhiddenCollections:t=>[Me,"unhiddenCollections",t],visibilityOverrides:t=>[Me,"visibilityOverrides",t],pinnedCollections:t=>[Me,"pinnedCollections",t],optimisticUpdates:()=>[Me,"optimisticUpdates"],collectibleBids:t=>[...hn,t],collectibleMintGasEstimation:t=>[Me,"mintNFTGasEstimation",t],collectibleSellSteps:t=>[Me,"collectibleSellSteps",t],createMintTransaction:t=>[Me,"createMintTransaction",t],transferTransaction:t=>[Me,"transferTransaction",t]};var mu=20;function Xt(t,e){let o=P.optimisticUpdates(),r=t.getQueryData(o)??[];t.setQueryData(o,[...r,e])}async function Qs(t,e){let o=P.optimisticUpdates(),r=await t.getQueryState(o);if(r){let n=e??Date.now(),i=r.dataUpdatedAt,l=Z({seconds:mu});return n-i>l?(t.removeQueries({queryKey:o}),[]):r?.data??[]}else return[]}function Xs(t,e){let o=e.reduce((r,n)=>{let{id:i,amount:l}=n,c=new pe(l);return r[i]=(r[i]??new pe(0)).plus(c),r},{});for(let r of t)r.items=r.items.reduce((n,i)=>{let l=i.id,c=o[l];if(c){let d=new pe(i.balance??0);return d.minus(c).isGreaterThan(0)?n.concat({...i,balance:d.minus(c).toString()}):n}else return n.concat(i)},[]);return t=t.filter(r=>r.items.length>0),t}s();a();var De=(n=>(n[n.Always=1/0]="Always",n[n.Short=Z({days:1})]="Short",n[n.Medium=Z({days:3})]="Medium",n[n.Long=Z({days:7})]="Long",n))(De||{}),Ke=(i=>(i[i.Immediate=0]="Immediate",i[i.Short=Z({minutes:1})]="Short",i[i.Medium=Z({minutes:2.5})]="Medium",i[i.Long=Z({minutes:5})]="Long",i[i.Never=1/0]="Never",i))(Ke||{}),Co=(c=>(c[c.Shortest=Z({seconds:10})]="Shortest",c[c.Shorter=Z({seconds:30})]="Shorter",c[c.Short=Z({minutes:1})]="Short",c[c.Medium=Z({minutes:2.5})]="Medium",c[c.Long=Z({minutes:5})]="Long",c[c.Longer=Z({minutes:7.5})]="Longer",c[c.Longest=Z({minutes:10})]="Longest",c))(Co||{});var Ys=({addresses:t,queryOptions:e={staleTime:Ke.Short,refetchInterval:Co.Long,enabled:!0},select:o})=>{let r=re(),n=P.collections(t),i=t.length!==0&&t.every(l=>!j.isLocalNetworkID(l.networkID));return ne({enabled:i&&e.enabled,queryKey:n,gcTime:De.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[c]=await Promise.allSettled([qs(l)]);if(c.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:d,isTrimmed:p}=c.status==="fulfilled"?c.value:{allCollectibles:[],isTrimmed:!1},m=Ks(d),h=await Qs(r),g=Xs(m,h);return{items:g,nrOfItems:g.reduce((y,C)=>y+C.items.length,0),isTrimmed:p}},select:o})},It=t=>Ys({...t,select:(0,bn.useCallback)(e=>e.items,[])}),fu=t=>Ys({...t,select:(0,bn.useCallback)(o=>o.isTrimmed,[])}).data??!1;s();a();s();a();var yn=class extends Ie{constructor(e){super(e),this.name="GetPinnedCollectionsError"}};async function sr(t){try{return await t.get("pinnedCollections")}catch{throw new yn("")}}var gn=class extends Ie{constructor(e){super(e),this.name="SetPinnedCollectionsError"}};async function Cn(t,e){try{return await t.set("pinnedCollections",e)}catch{throw new gn("")}}var ar=t=>{let e=ee();return ne({enabled:t.length!==0,queryKey:P.pinnedCollections(t),gcTime:De.Long,staleTime:1/0,refetchInterval:!1,refetchOnMount:!0,async queryFn(){try{return(await sr(e)??{})[t]||[]}catch(o){return o instanceof Error&&Y.captureError(o,"collectibles"),[]}}})};s();a();var Js=v(O());var hu=({id:t,addresses:e})=>{let{data:o,isSuccess:r}=It({addresses:e});return(0,Js.useMemo)(()=>{let i={isSuccess:r,data:void 0};for(let l of o??[])for(let c of l.items)if(c.id===t)return{...i,data:c};return i},[t,o,r])};s();a();var me=v(O());s();a();function Ce(t){let e=ee();return ne({gcTime:De.Long,staleTime:1/0,enabled:!!t,queryKey:P.visibilityOverrides(t??""),async queryFn(){return t?await Ze(e,t):new Map}})}s();a();var Ot=v(O());s();a();function Ut(){let t=ee(),e=re(),o=ie();return Pe({async mutationFn({accountId:r,mutations:n}){await bo(t,o,{accountId:r,mutations:n})},async onSuccess(r,{accountId:n}){await e.invalidateQueries({queryKey:P.visibilityOverrides(n)}),await Promise.allSettled([e.invalidateQueries({queryKey:P.hiddenCollections(n)}),e.invalidateQueries({queryKey:P.unhiddenCollections(n)})])}})}async function cr({collectible:t,visibilityOverrides:e,setVisibilityOverrides:o,accountId:r,desiredVisibility:n,onSuccess:i,onError:l}){if(!e)return;let c=t.collection.id||t.id,d=e.get(c)?.status;try{let p=ea(n,t.collection);await o({accountId:r,mutations:[{id:c,visibility:p}]}),await i({collectible:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){await l(p,{collectible:t,desiredVisibility:n})}}async function Zs({collection:t,visibilityOverrides:e,setVisibilityOverrides:o,accountId:r,desiredVisibility:n,onSuccess:i,onError:l}){if(!e)return;let c=t.id,d=e.get(c)?.status;try{let p=ea(n,t);await o({accountId:r,mutations:[{id:c,visibility:p}]}),i&&await i({collection:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){l&&await l(p,{collection:t,desiredVisibility:n})}}function ea(t,e){let{spamStatus:o}=e;switch(t){case"hidden:reported_spam":if(o==="NOT_VERIFIED"||o==="VERIFIED")return"hidden:reported_spam";if(o==="POSSIBLE_SPAM"||o==="SPAM")return null;throw new Error(`Unexpected spam status: ${o} found while marking spam.`);case"visible:reported_notSpam":if(o==="NOT_VERIFIED"||o==="VERIFIED")return null;if(o==="POSSIBLE_SPAM"||o==="SPAM")return"visible:reported_notSpam";throw new Error(`Unexpected spam status: ${o} found while marking not spam.`);case"hidden":if(o==="NOT_VERIFIED"||o==="VERIFIED")return"hidden";if(o==="POSSIBLE_SPAM"||o==="SPAM")return null;throw new Error(`Unexpected spam status: ${o} found while marking hidden.`);case"visible":if(o==="NOT_VERIFIED"||o==="VERIFIED")return null;if(o==="POSSIBLE_SPAM"||o==="SPAM")return"visible";throw new Error(`Unexpected spam status: ${o} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}function mt(t){return{networkId:t.chain.id,chainId:j.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}function ta({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await cr({collectible:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden:reported_spam",onSuccess:o,onError:e})},[r,n,t,e,o])}function oa({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await cr({collectible:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible:reported_notSpam",onSuccess:o,onError:e})},[r,n,t,e,o])}function ra({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await cr({collectible:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:o,onError:e})},[r,n,t,e,o])}function na({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await cr({collectible:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:o,onError:e})},[r,n,t,e,o])}function ia({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await Zs({collection:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:o,onError:e})},[r,n,t,e,o])}function sa({accountId:t,onError:e,onSuccess:o}){let{data:r}=Ce(t),{mutateAsync:n}=Ut();return(0,Ot.useCallback)(async i=>{await Zs({collection:i,visibilityOverrides:r,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:o,onError:e})},[r,n,t,e,o])}s();a();var Sn=v(O());var aa=({toast:t,accountId:e})=>{let{t:o}=Q(),r=ie(),n=(0,Sn.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&r.capture("collectionHidden",{data:mt(l)}),t&&t.success(o("collectionHideSuccess"))},[o,t,r]),i=(0,Sn.useCallback)((l,c)=>{t&&t.error(o("collectionHideFail"))},[o,t]);return ra({accountId:e,onSuccess:n,onError:i})};s();a();var wn=v(O());var la=({toast:t,accountId:e})=>{let{t:o}=Q(),r=ie(),n=(0,wn.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&r.capture("collectionUnhidden",{data:mt(l)}),t&&t.success(o("collectionUnhideSuccess"))},[o,t,r]),i=(0,wn.useCallback)((l,c)=>{t&&t.error(o("collectionUnhideFail"))},[o,t]);return na({accountId:e,onSuccess:n,onError:i})};function bu({accountId:t,collectible:e,toast:o}){let r=aa({accountId:t,toast:o}),n=(0,me.useCallback)(()=>{if(e)return r(e)},[r,e]),i=la({accountId:t,toast:o}),l=(0,me.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Ce(t??""),d=(0,me.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,me.useMemo)(()=>e?rr(d,{spamStatus:e.collection.spamStatus}):!1,[e,d]),m=(0,me.useCallback)(()=>p?l():n(),[p,n,l]);return(0,me.useMemo)(()=>({isHidden:p,onHideCollectible:n,onUnhideCollectible:l,onToggleHide:m}),[n,m,l,p])}function yu(t){let{data:e,isPending:o}=Ce(t),r=(0,me.useCallback)(l=>{if(!l)return!1;let c=l.collection.id||l.id;return ln(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),n=(0,me.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.collection.id||l.id;return an(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),i=(0,me.useCallback)(l=>yo(n(l)),[n]);return(0,me.useMemo)(()=>({getIsHidden:r,getSpamStatus:n,getIsSpam:i,isLoading:o}),[r,n,i,o])}function ca(t){let{data:e,isPending:o}=Ce(t),r=(0,me.useCallback)(l=>{if(!l)return!1;let c=l.id;return ln(e,{spamStatus:l.spamStatus,key:c})},[e]),n=(0,me.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.id;return an(e,{spamStatus:l.spamStatus,key:c})},[e]),i=(0,me.useCallback)(l=>yo(n(l)),[n]);return(0,me.useMemo)(()=>({getIsHidden:r,getSpamStatus:n,getIsSpam:i,isLoading:o}),[r,n,i,o])}function ua(t){let e=ca(t),o=ia({accountId:t}),r=sa({accountId:t});return(0,me.useMemo)(()=>({...e,hideCollection:o,unhideCollection:r}),[e,o,r])}s();a();var da=v(O());var gu=({id:t,addresses:e})=>{let{data:o}=It({addresses:e});return(0,da.useMemo)(()=>(o??[]).find(r=>r.id===t),[t,o])};s();a();var pa=v(O()),ur=(t,e)=>(0,pa.useMemo)(()=>e?t.includes(e):!1,[e,t]);s();a();var wy=t=>`${t/100}%`,ma=(t,e)=>t*e/100/100;s();a();var ga=v(tn()),Jt=v(O());s();a();var Cu=b.object({caip19:b.string(),name:b.string(),symbol:b.string()}),ha=b.object({bps:b.number(),kind:b.union([b.literal("marketplace"),b.literal("royalty")]),recipient:b.string().optional()}),Su=b.object({amount:b.number(),feeBreakdown:b.array(ha),netAmount:b.number(),token:Cu,totalFeeBps:b.number()}),wu=b.object({name:b.string(),logo:b.string(),url:b.string().optional()}),ba=b.object({id:b.string(),expiration:b.string().optional(),price:Su,source:wu}),xu=b.object({bids:b.array(ba)}),fa=new Ie("Failed to fetch collectible bids."),Tu="collectible-instant-sell-bids",vu=async t=>{if(!t.address)throw fa;try{let e=await ye.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:o}=xu.parse(e.data);return o}catch(e){if(ut(e)){let o=e.response?.status;pt(e,o,Tu)}throw fa}},xn=({bidAsset:t,isEnabled:e})=>{let o=e&&t.address!==null&&t.chainId!==null;return ne({enabled:o,staleTime:Ke.Short,refetchInterval:Co.Shortest,queryKey:P.collectibleBids(t),async queryFn(){return vu(t)}})},dr=t=>{let e=t?.chainData,o=t?.chain.id??null,r=Be(e),n=le(e),i=r?{tokenId:e.id}:{},l=n?{contractType:e.standard}:{},c=r?e.contract.toLowerCase():n?e.mint:null;return{chainId:o,address:c,resourceType:"address",...i,...l}};s();a();var Eu=v(O());var se=b.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Au=b.enum(["/execute/auth-signature/v1","/order/v3"]),Qe=b.enum(["transaction","signature","post","refetch"]),Iu=b.enum(["eip712","eip191"]),Uu=b.object({domain:b.any(),types:b.any(),value:b.any()}),Ou=b.object({message:b.string()}),ku=b.object({from:b.string(),to:b.string(),data:b.string()}),Pu=b.object({endpoint:Au,body:b.object({id:b.string(),kind:b.string()})}),Bu=b.object({action:se,chainId:zo,type:b.literal(Qe.enum.signature),data:b.object({signatureKind:Iu,signatureData:b.union([Ou,Uu]),postData:Pu})}),Mu=b.object({chainId:zo,action:se,data:ku,type:b.literal(Qe.enum.transaction)}),Du=b.object({chainId:zo,action:se,type:b.literal(Qe.enum.refetch),data:b.object({resource:b.string()})}),Ru=b.union([Bu,Mu,Du]),Nu=b.object({action:se,chainId:Hi,type:b.literal(Qe.enum.transaction),data:b.object({transaction:b.string()})}),Vu=b.union([Ru,Nu]),ju=b.object({steps:b.array(Vu),orderId:b.string().optional()}),_u=new Ie("Failed to fetch collectible sell steps."),Lu="collectible-instant-sell-steps",Fu=async t=>{try{let e=await ye.api().validateStatus(!0).post("/collectibles/v1/sell",t);return ju.parse(e.data)}catch(e){if(ut(e)){let o=e.response?.status;if(pt(e,o,Lu),e.response?.data?.code){let{code:r}=e.response.data;throw{code:r}}if(o)throw e}throw _u}},Tn=({sellAsset:t})=>{let e=t.details.orderId!==void 0;return ne({enabled:e,queryKey:P.collectibleSellSteps(t),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:(o,r)=>r.code?!1:o<3,async queryFn(){return Fu(t)}})};var ya=(t,e,o)=>{let r=o?.chainData,n=Be(r),i=le(r),l=o?.owner,c=n?l?.toLowerCase():l,d=e?.id,p=e?.source?.name,m=i?{minPrice:e?.price?.netAmount,tokenAccount:r.tokenAccount}:{};return{details:{asset:t,owner:c,orderId:d,marketplace:p,...m}}};s();a();po.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var Yt=(t,e)=>new po(t).div(Lo(e)).toNumber();var $u={steps:[],orderId:""},zu=({collectible:t})=>{let{t:e}=Q(),o=(0,Jt.useMemo)(()=>dr(t),[t]),{data:r=[],isPending:n,isError:i}=xn({bidAsset:o,isEnabled:!0}),l=(0,Jt.useMemo)(()=>r.length>0?r[0]:void 0,[r]),c=(0,Jt.useMemo)(()=>ya(o,l,t),[o,l,t]),{data:d=$u,isPending:p,isError:m,refetch:h,error:g}=Tn({sellAsset:c}),y=(0,Jt.useMemo)(()=>l&&t?Ca({t:e,bid:l,collectible:t}):void 0,[e,l,t]),C=(0,Jt.useMemo)(()=>m?Number.isInteger(g.code):!1,[m,g]);return{bid:l,bidSummary:y,isLoadingBids:n,isErrorBids:i,sellSteps:d,isLoadingSellSteps:p,isErrorSellSteps:m,refetchSellSteps:h,sellStepsError:g,isSellErrorCode:C}},Hu=({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,qu=({offerAmount:t,collectionFloor:e})=>t-e,Gu=t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",o=(0,ga.default)(t).format(e);return`${t>0?"+":""}${o}`},Wu=t=>{if(t){let{price:e,token:o}=t,r=o?.decimals;if(r)return Yt(e,r)}},Ku=t=>{if(t){let{price:e,token:o}=t,r=o?.decimals;if(r)return Yt(e,r)}},Qu=t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large};var Ca=({bid:t,collectible:e,t:o})=>{let{lastSalePrice:r,media:n,name:i,collection:l}=e,{name:c,logo:d}=t.source,{amount:p,netAmount:m,feeBreakdown:h,token:g,totalFeeBps:y}=t.price,{symbol:C,caip19:S}=g,T=0,k=m,L=l.id,$=e.id,A=Ku(r),ke=C.slice(0,6),te=e.chain.symbol,qe=Wu(l.floorPrice),oe=qe?qu({offerAmount:p,collectionFloor:qe}):void 0,X=oe?Gu(oe):void 0;return{bidTokenSymbol:ke,caip19:S,collectionId:L,collectibleId:$,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:te,collectionFloor:qe,collectibleImage:Qu(n),collectibleName:i??o("collectiblesUnknownCollectible"),collectionName:l.name??o("collectiblesUnknownCollection"),currencySymbol:t.source.name==="Blur"?te:ke,fees:h,floorDifference:oe,floorDifferencePercent:X,lastSale:A,marketplace:c,marketplaceLogoURL:d,offerAmount:p,offerAmountFormatted:Fo(p),phantomFeePercentage:T,pnl:Hu({lastSale:A,receiveAmount:k}),receiveAmount:k,receiveAmountFormatted:Fo(k),totalFeeBps:y}},Xu=({gasFee:t,totalFeeBps:e,offerAmount:o})=>{let r=ma(e,o)+t.toNumber();return{raw:r,formatted:Fo(r)}};s();a();var Sa=new Map([[se.enum["nft-approval"],8e4],[se.enum["blur-swap"],42e3],[se.enum.sale,39e4],["default",42e4]]),Ju=(t,e,o,r)=>{let n=t==="Blur",i=o.filter(S=>S.type==="transaction").map(({action:S})=>({action:S}));if(i.some(({action:S})=>S===se.enum["nft-approval"])||(i=[...i,{action:se.enum["nft-approval"]}]),n){let S=i.some(({action:k})=>k===se.enum.sale),T=i.some(({action:k})=>k===se.enum["blur-swap"]);S||(i=[...i,{action:se.enum.sale}]),T||(i=[...i,{action:se.enum["blur-swap"]}])}let c=i?.reduce((S,{action:T})=>{let k=Sa.get(T)??Sa.get("default");return S+(k??0)},0),d=new pe(c),{status:p,data:m}=Es({gasLimit:d,networkID:e,transactionSpeed:"standard"}),{data:h}=Is(e,m),g=ss(m),y=Number(g?.replace(/[^\d.]/g,"")??0),C=r?r.isGreaterThan(y):!1;return{gasEvm:y,gasEstimation:m,gasEstimationStatus:p,ethFeeUI:g,gasEstimationPrice:h,hasEnoughGas:C}};s();a();var et=v(O());s();a();var pr=(t,e)=>{t.invalidateQueries({queryKey:hn}),t.invalidateQueries({predicate:({queryKey:o})=>o.includes("collectibleSellSteps")&&o[2].details.orderId===e?.orderId})};var od=()=>{let{data:t}=qo();return(0,et.useMemo)(()=>{let o=t?.type,r=t?.name??"",n=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type==="ledger",accountName:r,accountType:o,chainAddresses:n,accountIdentifier:i}},[t])},rd=({networkID:t,unsignedTransaction:e,pendingActivityRows:o,accountIdentifier:r,accountSigner:n,storage:i,includeCallPayload:l})=>({accountSigner:n,accountIdentifier:r,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"sell",display:{summary:o}},storage:i}),nd=async(t,e,o,r,n,i,l)=>{try{if(!o)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:c,chainId:d,action:p}=e,{collectionName:m,marketplace:h,receiveAmount:g,currencySymbol:y,collectibleChainSymbol:C,bidTokenSymbol:S}=l,T=_o(h),k={};p==="nft-approval"&&(k={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:m})},bottomLeft:{text:T}}),p==="sale"&&(k={topRight:{text:`+${g} ${y}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${m}`},bottomLeft:{text:T}}),p==="blur-swap"&&(k={topRight:{text:`+${g} ${C}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${g} ${S}`},bottomLeft:{text:T}});let L=$t.parse({type:"0x2",to:c.to,from:c.from,data:c.data,chainId:j.getEVMNetworkIDValue(d),gas:`0x${o.gasLimit.toString(16)}`,maxFeePerGas:`0x${o.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${o.maxPriorityFeePerGas.toString(16)}`}),$=rd({storage:r,accountSigner:n,pendingActivityRows:k,includeCallPayload:!1,networkID:d,unsignedTransaction:L,accountIdentifier:i.accountIdentifier}),A=await ds($);return{type:e.type,data:A}}catch(c){return{type:e.type,error:c}}},id=async(t,e,o)=>{try{let{chainId:r,data:n}=t,{signatureData:i,signatureKind:l,postData:c}=n;if(l==="eip191"&&"message"in i){let d=await e.sign(o.accountIdentifier,{signingType:"message",chainType:"eip155",message:i.message});if(d.status==="success")return await ye.api().post("/collectibles/v1/submit-signature",{chainId:r,signature:d.signature,postData:c}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(r){return{type:t.type,error:r}}},sd=async(t,e)=>{try{let{resource:o}=t.data;if(o==="/sell"){let{data:r}=await e();return{type:t.type,data:r?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(o){return{type:t.type,error:o}}},ad=[se.enum.auth,se.enum["nft-approval"],se.enum.sale],ld="Steps are required",cd="These steps are not from the same bid",mr=class extends Error{message=ld},fr=class extends Error{message=cd},ud=(t,e,o,r,n,i,l)=>{let c=ee(),d=ie(),p=re(),m=Ht(),[h,g]=(0,et.useState)("idle"),[y,C]=(0,et.useState)(null),[S,T]=(0,et.useState)(null),{t:k}=Q(),L=od(),{chainAddresses:$,isLedger:A}=L;(0,et.useEffect)(function(){h==="loading"&&pr(p,n)},[h,p,n]),(0,et.useEffect)(function(){h==="success"&&n&&Xt(p,{id:n.collectibleId,amount:1})},[h,p,$,n]);let ke=()=>{g("idle"),C(null),T(null)},te=l&&n?.receiveAmount?n.receiveAmount*l:void 0,qe=async(oe,X=new Map)=>{let Ae=oe??e;try{if(t&&t!==""&&t!==n?.orderId)throw new fr;if(!Array.isArray(Ae)||Ae.length===0)throw new mr;g("loading");for await(let lt of Ae){let{action:ct}=lt,Rc=X.get(ct)==="success",Nc=ct===se.enum.sale,Pi=ct===se.enum.refetch,Vc=ad.some(Ft=>Ft===ct);if(Rc)continue;Pi||X.set(ct,"loading");let jc=async Ft=>{switch(Ft.type){case Qe.enum.transaction:return await nd(k,Ft,o,c,m,L,n);case Qe.enum.signature:return await id(Ft,m,L);case Qe.enum.refetch:return await sd(Ft,r)}},{type:Bi,data:Zr,error:Mi}=await jc(lt);if(Vc&&Mi)throw Mi;if(Zr&&(Pi||X.set(ct,"success"),Bi===Qe.enum.transaction&&Nc&&T(Zr),Bi===Qe.enum.refetch))return await _i(500),await qe(Zr,X)}g("success"),d.capture("collectibleSellSuccess",{data:{bidSummary:n,usdSaleValue:te}})}catch(lt){let ct=lt?.message??"";(!(lt instanceof mr)||!(lt instanceof fr))&&(Y.captureError(lt,"collectibles"),d.capture("collectibleSellFailure",{data:{bidSummary:n,usdSaleValue:te,errorMessage:ct}})),g("error"),C(lt)}};return{executeSellEvmSteps:qe,reset:ke,error:y,result:S,status:h,isLedger:A}};s();a();var Re=v(O());var dd=()=>{let{data:t}=qo();return(0,Re.useMemo)(()=>{let o=t?.identifier??"",r=t?.type==="ledger",n=t?.addresses??[],i=n.find(Gi),l=i?.networkID,c=i?.address??"",d=ls(l),p=as(d);return{accountIdentifier:o,chainAddresses:n,chainId:l,solanaPublicKey:c,isLedger:r,cluster:d,connection:p}},[t])},pd=(t,e)=>{let[o,r]=(0,Re.useState)(void 0);return(0,Re.useEffect)(()=>{(async()=>{if(!t)return;let l=t.find(m=>m.type==="transaction")?.data?.transaction;if(!l)return;let c=en(l,"base64"),d=await bs(e,[c.message]),p=Di(d.value);r(p)})()},[t,e]),o},md=async(t,e,o,r,n,i)=>{if(!i)throw new Error("Bid summary is required");let{collectionName:l,marketplace:c,receiveAmount:d,currencySymbol:p}=i,m={topRight:{text:`+${d} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:_o(c)}},{data:h,chainId:g,type:y}=e,{transaction:C}=h,S=en(C,"base64"),T={ownerAddress:o.solanaPublicKey,networkID:g,data:{signature:""},type:"sell",display:{summary:m}},{accountIdentifier:k,solanaPublicKey:L,connection:$}=o,A=new M.PublicKey(L),ke=await gs({accountIdentifier:k,feePayer:A,transaction:S,pendingTransactionInput:T,connection:$,accountSigner:r,storage:n,opts:{skipPreflight:!0}});return{type:y,data:ke}},fd="Steps are required",hd="These steps are not from the same bid",hr=class extends Error{message=fd},br=class extends Error{message=hd},bd=(t,e,o,r)=>{let n=ee(),i=ie(),l=re(),c=Ht(),[d,p]=(0,Re.useState)("idle"),[m,h]=(0,Re.useState)(null),[g,y]=(0,Re.useState)(null),{t:C}=Q(),S=dd(),{chainId:T,connection:k,chainAddresses:L,isLedger:$}=S,A=T&&j.isSolanaNetworkID(T)?T:zt.Solana.Mainnet,ke=pd(e,A);(0,Re.useEffect)(function(){d==="loading"&&pr(l,o)},[d,l,o]),(0,Re.useEffect)(function(){d==="success"&&o&&Xt(l,{id:o.collectibleId,amount:1})},[d,l,L,o]);let te=()=>{p("idle"),h(null),y(null)},qe=r&&o?.receiveAmount?o.receiveAmount*r:void 0;return{executeSellSolanaSteps:async()=>{try{if(t&&t!==o?.orderId)throw new br;if(!Array.isArray(e)||e.length===0)throw new hr;p("loading");for await(let X of e){let Ae=await md(C,X,S,c,n,o);y(Ae.data),await ys({connection:k,signature:Ae.data})}p("success"),i.capture("collectibleSellSuccess",{data:{bidSummary:o,usdSaleValue:qe}})}catch(X){let Ae=X?.message??"";(!(X instanceof hr)||!(X instanceof br))&&(Y.captureError(X,"collectibles"),i.capture("collectibleSellFailure",{data:{bidSummary:o,usdSaleValue:qe,errorMessage:Ae}})),p("error"),h(X)}},reset:te,gas:ke,error:m,result:g,status:d,isLedger:$}};s();a();var yd=.01,gd=t=>{let{fungible:e}=Rs({key:Vs(t.collectibleChainId,void 0)}),o=e?.data.balance;return{hasEnoughGas:o?o.isGreaterThan(yd):!1}};s();a();var Ta=v(O()),Cd=t=>t.reduce((e,o)=>({...e,[o]:1}),{});function vn({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:o,getIsSpam:r}){let n=[],i=[],l=[],c=[],d=Cd(e),p={};for(let h of t)r(h)&&o(h)?c.push(h):o(h)?i.push(h):d[h.id]?p[h.id]=h:r(h)?l.push(h):n.push(h);let m=[];for(let h of e)p[h]&&m.push(p[h]);return{collections:[...m,...n,...l],hiddenCollections:i,spamCollections:c}}var Sd=({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:o,getIsSpam:r})=>(0,Ta.useMemo)(()=>vn({allCollections:t,pinnedCollectionIds:e,getIsHidden:o,getIsSpam:r}),[t,o,r,e]);s();a();var yr=v(O()),En={location:0,distance:50,threshold:.3},dC={...En,keys:["name"]},pC={...En,keys:["name"]},mC={...En,keys:["name"]},So=(t,e)=>{if(e===void 0)return!1;let o=t.toLowerCase();return e.toLowerCase().split(" ").map(r=>r.startsWith(o)||o.startsWith(r)&&e.toLowerCase().includes(o)).includes(!0)};var va=(t,e)=>(0,yr.useMemo)(()=>({collections:t.filter(r=>So(e,r.name||r.items[0].name))}),[e,t]),wd=(t,e,o,r)=>{let n=(0,yr.useMemo)(()=>t.flatMap(i=>i.items),[t]);return(0,yr.useMemo)(()=>{let i=t.filter(p=>So(r,p.name)),l=n.filter(p=>So(r,p.name)),c=e.filter(p=>So(r,p.name)),d=o.filter(p=>So(r,p.name));return{collections:i,collectibles:l,hiddenCollections:c,spamCollections:d}},[r,n,t,e,o])};s();a();var ft=v(O());var xd=Z({seconds:10}),Td=Z({seconds:5});function vd({account:t}){let e=t?.identifier??"",o=t?.addresses??[],{data:r=[],isLoading:n}=It({addresses:o,queryOptions:{staleTime:Td,refetchInterval:xd}}),[i,l]=(0,ft.useState)(""),c=Fi(i)??"",d=(0,ft.useCallback)($=>l(typeof $=="string"?$:$.currentTarget.value),[l]),{getIsHidden:p,getIsSpam:m,getSpamStatus:h,hideCollection:g,unhideCollection:y,isLoading:C}=ua(e),S=(0,ft.useMemo)(()=>{let{collections:$,hiddenCollections:A,spamCollections:ke}=vn({allCollections:r,getIsHidden:p,getIsSpam:m});return[...$,...A,...ke]},[r]),T=va(S,c),k=(0,ft.useCallback)(({item:$,status:A})=>A==="show"?y($):g($),[y,g]);return{viewState:(0,ft.useMemo)(()=>({accountId:e,listItems:c?T.collections:S,searchQuery:i,debouncedSearchQuery:c,handleSearch:d,getIsHidden:p,getIsSpam:m,getSpamStatus:h,onToggleHidden:k}),[e,T.collections,i,d,S,k,p,m,h,c]),viewStateLoading:C||n}}s();a();var de=v(Lc());var Ed="token-account-min-balances",Ea=de.struct([de.blob(32,"mint"),de.blob(32,"owner"),de.nu64("amount"),de.blob(93)]),UC=de.struct([de.blob(44),de.u8("decimals"),de.blob(37)]),Ad=de.struct([de.blob(679)]),Id=de.struct([de.u8("edition"),de.blob(281)]),Ud=async t=>t.getMinimumBalanceForRentExemption(Ea.span).then(pe),Od=async t=>pe(await t.getMinimumBalanceForRentExemption(Ad.span)+await t.getMinimumBalanceForRentExemption(Id.span)+await t.getMinimumBalanceForRentExemption(Ea.span));function kd({tokenEdition:t,connection:e}){return ne({queryKey:[Ed,{tokenEdition:t}],queryFn:async()=>e?t===null||!ir(t)?Ud(e):Od(e):pe(0)})}s();a();var Aa=v(O()),Pd=(t,e,o=!1,r)=>(0,Aa.useMemo)(()=>{if(t)return gr({collectibleMedia:t,isImageAnimationEnabled:o,previewSize:r??"medium",mediaTypeOverride:e})},[t,e,o,r]),gr=({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:o,mediaTypeOverride:r})=>{let n=r??t.type;if((n==="image"||n==="other")&&t.previews?.[o]){let l=e?"":`${o==="medium"?"=":"-"}k`;return`${t.previews[o]}${l}`}return t[n]?.url};s();a();var Ia=v(O());var Bd=!1,Md="small",Dd="image",Rd=t=>(0,Ia.useMemo)(()=>Ua(t),[t]),Ua=(t,e=Md)=>{if(!t)return;let{media:o,collection:r}=t,n=Bd,i=Dd;return o?gr({collectibleMedia:o,isImageAnimationEnabled:n,previewSize:e,mediaTypeOverride:i}):r.imageUrl};s();a();var Oa=v(O()),ka=t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:o})=>o?.type==="image")},Nd=t=>(0,Oa.useMemo)(()=>{if(t)return ka(t)??t.items[0]},[t]);s();a();var Pa=v(O());var Vd=t=>(0,Pa.useMemo)(()=>{if(!(!t||t.items.length===0))return Ba(t)},[t]),Ba=t=>{let{items:e}=t,{length:o}=e;if(o===1){let[{balance:r="",chainData:n}]=e;if(le(n)&&n.standard==="SemiFungible"){let i=parseInt(r,10);return isNaN(i)?1:i}}return o};s();a();s();a();var Ma={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},Da=t=>({...Ma,resetBurnCollectible:()=>t({...Ma}),setBurnCollectibleTx:e=>t({burnCollectibleTx:e}),setBurnCollectibleTxFee:e=>t({burnCollectibleTxFee:e})});s();a();var Ra={multichainSellCollectible:void 0},Na=t=>({...Ra,resetMultichainSellCollectible:()=>t({...Ra}),setMultichainSellCollectible:e=>t({multichainSellCollectible:e})});s();a();var Va={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},ja=t=>({...Va,reset:()=>t({...Va}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})});s();a();var _a={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},La=t=>({..._a,reset:()=>t({..._a}),setMultichainListCollectible:e=>t({multichainListCollectible:e}),setMultichainListPrice:e=>t({multichainListCollectiblePrice:e}),setEditMultichainListPrice:e=>t({editMultichainListCollectiblePrice:e}),setUnlistMultichainCollectible:e=>t({unlistMultichainCollectible:e}),setMultichainTransactionURL:e=>t({multichainTransactionURL:e})});var jd=Wo((t,e)=>({...ja(t,e),...Da(t,e),...La(t,e),...Na(t,e)}));s();a();s();a();var _d=500,Fa=P.collections([])[1],Ld=[Fa,P.hiddenCollections("")[1],P.unhiddenCollections("")[1],P.pinnedCollections("")[1]],Fd=t=>{let e=String(t.queryKey[1]);return e===Fa?t.state.data?.nrOfItems<=_d:Ld.includes(e)};s();a();var Qa=v(O());s();a();s();a();s();a();var $a="#F7931A",$d=5e4,zd="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",za={sendSuccessCondition:"SUBMISSION",collectibleDetailPrecision:7,collectibleDetailCtaBanner:(t,e)=>{let o=t.chainData;if(Qt(o)&&e){let r=new pe(o.utxoDetails.value??0);if(r.lte($d))return;let n=Object.values(o.utxoDetails.satributes).reduce((d,{count:p})=>d+p,0),i=on(n,j.bitcoin.tokenDecimals),l=on(r,j.bitcoin.tokenDecimals),c=$i(l.minus(i).times(e));return{title:xe.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:xe.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:c}),iconFill:$a,modal:{title:xe.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:xe.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:c}),buttonText:xe.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:zd,iconFill:$a}}}}};s();a();var Zt={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var Ha={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var qa={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var Hd=new Xi({solana:Ha,ethereum:Zt,polygon:Zt,base:Zt,monad:Zt,arbitrum:Zt,bitcoin:za,sui:qa}),kt=Qi(Hd);s();a();var Ka=v(O());s();a();var Ga=v(tn()),Wa=({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Ga.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}};var An=t=>(0,Ka.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ge(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:o,displayName:r,description:n,url:i})=>({type:r.toUpperCase(),value:xe.t(qd(o,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:o})??"",modal:{name:r,description:n,iconUrl:i}})):t.attributes.map(({trait_type:o,value:r,display_type:n})=>({type:o,value:Wa({value:r,type:n})}))},[t]),qd=(t,e,o)=>t===1?e:o;function Gd(t){let{chain:e,owner:o}=t||{},r=e?.id,{data:n}=Go({address:o,networkID:r});ks(n);let i=An(t),l=r?j.getChainID(r):void 0,c=l?Ki(l):void 0,{data:d}=As({query:c?{data:c}:void 0});return{ctaBanner:(0,Qa.useMemo)(()=>{if(!(!t||!d||!l))return kt.get(l).collectibleDetailCtaBanner?.(t,d.price)},[l,t,d]),traits:i}}s();a();s();a();s();a();s();a();var Xa=v($o()),Ya=v($o()),Ja=v(zi()),Za=({value:t,senderAddress:e,recipient:o,utxoState:{safeToSendUtxos:r},feerate:n,utxoHash:i,utxoIndex:l})=>{let c={transactionHash:i,index:l,value:t,isSafeToSend:!1,owner:e},d=[c],p=[{address:o,value:parseFloat(c.value),script:(0,Ja.toOutputScript)(o)}],m=Zo(Ho(zt.Bitcoin.Mainnet,e),r,p,n,d),h=new Ya.Psbt({network:Xa.networks.bitcoin});if(m.type==="success"){let{inputs:g,outputs:y}=m;h.addInputs(g.map(C=>er(C,e,!0))),h.addOutputs(y)}return[h,h.data.inputs.map((g,y)=>({address:e,signingIndexes:[y]})),m.vb]};s();a();var el=v($o()),tl=v($o()),ol=v(zi()),rl=({hash:t,index:e,value:o,senderAddress:r,recipient:n,utxoState:{safeToSendUtxos:i},feerate:l})=>{let c={index:e,transactionHash:t,value:o,isSafeToSend:!1,owner:r},d=[c],p=[{address:n,value:parseFloat(c.value),script:(0,ol.toOutputScript)(n)}],m=Zo(Ho(zt.Bitcoin.Mainnet,r),i,p,l,d),h=new tl.Psbt({network:el.networks.bitcoin});if(m.type==="success"){let{inputs:y,outputs:C}=m;h.addInputs(y.map(S=>er(S,r,!0))),h.addOutputs(C)}let g=h.data.inputs.map((y,C)=>({address:r,signingIndexes:[C]}));return[h,g,m.vb]};function nl({chain:t,owner:e,chainData:o},{recipient:r,transactionSpeed:n="standard"},{utxoState:i,transactionSpeedsToUnitCost:l}){let c,d,p;if(!e)throw new Error("Owner is required");let m=t.id,h=l[n],g=o,y=h,C=Math.round(y?is(y.btcPerKilobyte).toNumber():ns);if(zs(g)){let{outputValue:S,utxoHash:T,utxoIndex:k}=g;[c,d,p]=Za({value:S,senderAddress:e,recipient:r,utxoState:i,feerate:C,utxoHash:T,utxoIndex:k})}else if(Qt(g)){let{utxoDetails:S}=g;[c,d,p]=rl({feerate:C,senderAddress:e,recipient:r,utxoState:i,hash:S.hash,index:S.index,value:S.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:m,psbt:c,vb:p,psbtChain:void 0,inputsToSign:d}}s();a();s();a();var Wd=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],il=new Error("Error populating ERC721 transaction data."),sl=async t=>{let{sender:e,networkID:o,destination:r,contractAddress:n,tokenID:i}=t,l=Qo(o,n,Wd,e),c;try{let p=await l.populateTransaction.safeTransferFrom(e,r,new pe(i).toString(10));if(p.data)c=p.data;else throw il}catch{throw il}return $t.parse({type:"0x2",from:e,to:n,chainId:j.getEVMNetworkIDValue(o),data:c})};s();a();var Kd=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],al=new Error("Error populating ERC1155 transaction data."),ll=async t=>{let{sender:e,networkID:o,destination:r,contractAddress:n,tokenID:i,value:l}=t,c=Qo(o,n,Kd,e),d;try{let m=await c.populateTransaction.safeTransferFrom(e,r,new pe(i).toString(10),l.toString(10),[]);if(m.data)d=m.data;else throw al}catch{throw al}return $t.parse({type:"0x2",from:e,to:n,chainId:j.getEVMNetworkIDValue(o),data:d})};async function cl({chain:t,chainData:e,owner:o},{recipient:r,amountAsset:n}){let i=e,l=t.id,c;if(Qd(i)){let{contract:d,id:p}=i;c=await sl({networkID:l,sender:o??"",destination:r,contractAddress:d,tokenID:p})}else if(Xd(i)){let{contract:d,id:p}=i;c=await ll({networkID:l,sender:o??"",destination:r,contractAddress:d,tokenID:p,value:n??"1"})}else throw new Error(`Unsupported EVM collectible type: ${i.standard}`);return{networkID:l,unsignedTransaction:c}}function Qd(t){return t.standard==="ERC721"}function Xd(t){return t.standard==="ERC1155"}s();a();s();a();s();a();var Sr=class extends Error{constructor(e){super(e),this.name="ProofError"}};async function ul({networkID:t,mintAddress:e}){let o="/collectibles/v1/proof",r;try{r=await ye.api().post(o,{chainId:t,address:e})}catch{let i=new Sr(`Failed to fetch proof for ${e} on network ${t}.`);throw Y.captureError(i,"collectibles"),i}if(r.status!==200){let i=new Sr(`Failed to fetch proof for ${e} on network ${t}.`);throw Y.captureError(i,"collectibles"),i}return await r.data}async function dl({networkID:t,mint:e,recipient:o}){let r=new Ye.Transaction,n=await ul({networkID:t,mintAddress:e});return r.add(await ts({...n,destination:o})),r}s();a();async function pl({networkID:t,destination:e,mint:o,senderAddress:r}){let{createComputeBudgetIx:n,createOCPTransferIX:i,getOCPMintState:l}=await Ko(),c=vt(t),d=new M.PublicKey(o),p=await l(d,c);if(!p)throw new Error("Mint state not found for OCP transfer");jo()&&console.log("This is a Magic Eden Open Creator Protocol Token");let m=new Ye.Transaction;m.add(n());let{destinationAddress:h}=await tr({solanaConnection:c,destination:new M.PublicKey(e),mint:d,programId:ho}),g=new M.PublicKey(r.address),{initAccountIX:y,transferIX:C}=await i({senderAddress:g,destinationAddress:h,mintAddress:d,mintState:p,connection:c});return y&&m.add(y),m.add(C),m}s();a();async function ml({networkID:t,senderAddress:e,senderAccount:o,destination:r,mint:n}){let i=vt(t),l=new M.PublicKey(n),{destinationAddress:c,destinationAccount:d}=await tr({solanaConnection:i,destination:new M.PublicKey(r),mint:l,programId:ho}),{createPNFTTransferIX:p}=await Ko(),m=new Ye.Transaction,h=new M.PublicKey(e.address),g=new M.PublicKey(o),y=d;if(!y){let[C,S]=await ms(h,c,l,ho);m.add(ps({account:c,owner:M.SystemProgram.programId})),m.add(C),y=S}return m.add(await p({senderAddress:h,tokenAccount:g,destinationAddress:c,destinationAccount:y,mintAddress:l,connection:i})),m}async function fl(t,e){let{chain:o,owner:r,decimals:n="0"}=t,i=parseFloat(n),{solana:l}=e,{memo:c,references:d}=l,p=o.id,m=vt(p),h={networkID:t.chain.id,addressType:"solana",address:t.owner??""};if(!le(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let g;if(Yd(t))g=await dl({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(Jd(t))g=await ml({networkID:p,senderAddress:h,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await Zd(t))g=await pl({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h});else if(ep(t)){let y=Ds(t),C=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();g=await hs({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h,senderAccount:t.chainData.tokenAccount,decimals:i,programId:t.chainData.programId,amount:C,references:d?.map(S=>S.toString())??[],memo:c??"",transferHookProgramId:y,connection:m})}else throw new Error("Unsupported transferSPLSolana args");return c&&g.add(fs({memoText:c})),g.feePayer=new M.PublicKey(r??""),g=await cs(g,{connection:m}),g.recentBlockhash=(await m.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[g]}}function Yd(t){return le(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}function Jd(t){return le(t.chainData)?"standard"in t.chainData&&(t.chainData.standard==="ProgrammableNonFungible"||t.chainData.standard==="ProgrammableNonFungibleEdition"):!1}async function Zd(t){let{chainData:e}=t;if(!le(e))return!1;let{mint:o}=e,r=vt(t.chain.id);return await rs(new M.PublicKey(o),r)!==null}function ep(t){return le(t.chainData)}s();a();s();a();s();a();s();a();var hl="1.21.2",bl="1.43.0";s();a();var tp={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},wr=class extends Error{},eo=class extends wr{constructor(e,o){super(e),this.code=o,this.type=tp[o]??"ServerError"}},xr=class extends wr{constructor(e,o,r){super(e),this.status=o,this.statusText=r}};s();a();var yl=t=>{throw TypeError(t)},Un=(t,e,o)=>e.has(t)||yl("Cannot "+o),J=(t,e,o)=>(Un(t,e,"read from private field"),o?o.call(t):e.get(t)),Pt=(t,e,o)=>e.has(t)?yl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),to=(t,e,o,r)=>(Un(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),gl=(t,e,o)=>(Un(t,e,"access private method"),o),op=(t,e,o,r)=>({set _(n){to(t,e,n,o)},get _(){return J(t,e,r)}}),Bt,wo,tt,Mt,xo,oo,Tr,Cl,Sl;function rp(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}var np={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},vr=class{constructor(e,o={}){if(Pt(this,Tr),Pt(this,Bt,0),Pt(this,wo,0),Pt(this,tt,null),Pt(this,Mt,null),Pt(this,xo,new Set),Pt(this,oo,new Map),this.endpoint=e,this.options={...np,...o},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=rp(this.endpoint))}async makeRequest(e,o){let r=await gl(this,Tr,Cl).call(this);return new Promise((n,i)=>{to(this,Bt,J(this,Bt)+1),J(this,oo).set(J(this,Bt),{resolve:n,reject:i,timeout:setTimeout(()=>{J(this,oo).delete(J(this,Bt)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:J(this,Bt),method:e,params:o}))}).then(({error:n,result:i})=>{if(n)throw new eo(n.message,n.code);return i})}async subscribe(e){let o=new In(e);return J(this,xo).add(o),await o.subscribe(this),()=>o.unsubscribe(this)}};Bt=new WeakMap;wo=new WeakMap;tt=new WeakMap;Mt=new WeakMap;xo=new WeakMap;oo=new WeakMap;Tr=new WeakSet;Cl=function(){return J(this,Mt)?J(this,Mt):(to(this,Mt,new Promise(t=>{J(this,tt)?.close(),to(this,tt,new this.options.WebSocketConstructor(this.endpoint)),J(this,tt).addEventListener("open",()=>{to(this,wo,0),t(J(this,tt))}),J(this,tt).addEventListener("close",()=>{op(this,wo)._++,J(this,wo)<=this.options.maxReconnects&&setTimeout(()=>{gl(this,Tr,Sl).call(this)},this.options.reconnectTimeout)}),J(this,tt).addEventListener("message",({data:e})=>{let o;try{o=JSON.parse(e)}catch(r){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:r}));return}if("id"in o&&o.id!=null&&J(this,oo).has(o.id)){let{resolve:r,timeout:n}=J(this,oo).get(o.id);clearTimeout(n),r(o)}else if("params"in o){let{params:r}=o;J(this,xo).forEach(n=>{n.subscriptionId===r.subscription&&r.subscription===n.subscriptionId&&n.onMessage(r.result)})}})})),J(this,Mt))};Sl=async function(){return J(this,tt)?.close(),to(this,Mt,null),Promise.allSettled([...J(this,xo)].map(t=>t.subscribe(this)))};var In=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:o}=this;return this.subscribed=!1,o==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[o]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let o=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=o)}};var wl=t=>{throw TypeError(t)},Pn=(t,e,o)=>e.has(t)||wl("Cannot "+o),Ue=(t,e,o)=>(Pn(t,e,"read from private field"),o?o.call(t):e.get(t)),Er=(t,e,o)=>e.has(t)?wl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),On=(t,e,o,r)=>(Pn(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),ip=(t,e,o)=>(Pn(t,e,"access private method"),o),To,Ne,vo,kn,xl,Ar=class{constructor(e){Er(this,kn),Er(this,To,0),Er(this,Ne),Er(this,vo),On(this,Ne,e)}fetch(e,o){let r=Ue(this,Ne).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,o)}async request(e){On(this,To,Ue(this,To)+1);let o=await this.fetch(Ue(this,Ne).rpc?.url??Ue(this,Ne).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":hl,"Client-Target-Api-Version":bl,"Client-Request-Method":e.method,...Ue(this,Ne).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ue(this,To),method:e.method,params:e.params})});if(!o.ok)throw new xr(`Unexpected status code: ${o.status}`,o.status,o.statusText);let r=await o.json();if("error"in r&&r.error!=null)throw new eo(r.error.message,r.error.code);return r.result}async subscribe(e){let o=await ip(this,kn,xl).call(this).subscribe(e);return async()=>!!await o()}};To=new WeakMap;Ne=new WeakMap;vo=new WeakMap;kn=new WeakSet;xl=function(){if(!Ue(this,vo)){let t=Ue(this,Ne).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");On(this,vo,new vr(Ue(this,Ne).websocket?.url??Ue(this,Ne).url,{WebSocketConstructor:t,...Ue(this,Ne).websocket}))}return Ue(this,vo)};s();a();s();a();s();a();s();a();s();a();function sp(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let m=t.charAt(p),h=m.charCodeAt(0);if(e[h]!==255)throw new TypeError(m+" is ambiguous");e[h]=p}let o=t.length,r=t.charAt(0),n=Math.log(o)/Math.log(256),i=Math.log(256)/Math.log(o);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let m=0,h=0,g=0,y=p.length;for(;g!==y&&p[g]===0;)g++,m++;let C=(y-g)*i+1>>>0,S=new Uint8Array(C);for(;g!==y;){let L=p[g],$=0;for(let A=C-1;(L!==0||$<h)&&A!==-1;A--,$++)L+=256*S[A]>>>0,S[A]=L%o>>>0,L=L/o>>>0;if(L!==0)throw new Error("Non-zero carry");h=$,g++}let T=C-h;for(;T!==C&&S[T]===0;)T++;let k=r.repeat(m);for(;T<C;++T)k+=t.charAt(S[T]);return k}function c(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let m=0,h=0,g=0;for(;p[m]===r;)h++,m++;let y=(p.length-m)*n+1>>>0,C=new Uint8Array(y);for(;p[m];){let L=e[p.charCodeAt(m)];if(L===255)return;let $=0;for(let A=y-1;(L!==0||$<g)&&A!==-1;A--,$++)L+=o*C[A]>>>0,C[A]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");g=$,m++}let S=y-g;for(;S!==y&&C[S]===0;)S++;let T=new Uint8Array(h+(y-S)),k=h;for(;S!==y;)T[k++]=C[S++];return T}function d(p){let m=c(p);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:c,decode:d}}var Tl=sp;var ap="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Bn=Tl(ap);var ot=t=>Bn.encode(t),Ve=t=>Bn.decode(t);s();a();function fe(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}var Mn=8192;function K(t){if(t.length<Mn)return btoa(String.fromCharCode(...t));let e="";for(var o=0;o<t.length;o+=Mn){let r=t.slice(o,o+Mn);e+=String.fromCharCode(...r)}return btoa(e)}s();a();s();a();function ro(t){let e=t.startsWith("0x")?t.slice(2):t,o=e.length%2===0?e:`0${e}`,r=o.match(/[0-9a-fA-F]{2}/g)?.map(n=>parseInt(n,16))??[];if(r.length!==o.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(r)}function Xe(t){return t.reduce((e,o)=>e+o.toString(16).padStart(2,"0"),"")}s();a();s();a();function Dt(t){let e=[],o=0;if(t===0)return[0];for(;t>0;)e[o]=t&127,(t>>=7)&&(e[o]|=128),o+=1;return e}function vl(t){let e=0,o=0,r=0;for(;;){let n=t[r];if(r+=1,e|=(n&127)<<o,!(n&128))break;o+=7}return{value:e,length:r}}var Ir=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){let e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){let e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){let o=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,o,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,o=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=vl(o);return this.shift(n),r}readVec(e){let o=this.readULEB(),r=[];for(let n=0;n<o;n++)r.push(e(this,n,o));return r}};s();a();s();a();function Dn(t,e){switch(e){case"base58":return ot(t);case"base64":return K(t);case"hex":return Xe(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Ur(t,e=["<",">"]){let[o,r]=e,n=[],i="",l=0;for(let c=0;c<t.length;c++){let d=t[c];if(d===o&&l++,d===r&&l--,l===0&&d===","){n.push(i.trim()),i="";continue}i+=d}return n.push(i.trim()),n}var Or=class{constructor({initialSize:e=1024,maxSize:o=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=o,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let o=this.bytePosition+e;if(o>this.size){let r=Math.min(this.maxSize,this.size+this.allocateSize);if(o>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${o}`);this.size=r;let n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Rn(BigInt(e),8).forEach(o=>this.write8(o)),this}write128(e){return Rn(BigInt(e),16).forEach(o=>this.write8(o)),this}write256(e){return Rn(BigInt(e),32).forEach(o=>this.write8(o)),this}writeULEB(e){return Dt(e).forEach(o=>this.write8(o)),this}writeVec(e,o){return this.writeULEB(e.length),Array.from(e).forEach((r,n)=>o(this,r,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Dn(this.toBytes(),e)}};function Rn(t,e){let o=new Uint8Array(e),r=0;for(;t>0;)o[r]=Number(t%BigInt(256)),t=t/BigInt(256),r+=1;return o}var El=t=>{throw TypeError(t)},Al=(t,e,o)=>e.has(t)||El("Cannot "+o),je=(t,e,o)=>(Al(t,e,"read from private field"),o?o.call(t):e.get(t)),Pr=(t,e,o)=>e.has(t)?El("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),Br=(t,e,o,r)=>(Al(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),no,Eo,kr,ht,lp=class Il{constructor(e){Pr(this,no),Pr(this,Eo),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Br(this,no,e.write),Br(this,Eo,e.serialize??((o,r)=>{let n=new Or({initialSize:this.serializedSize(o)??void 0,...r});return je(this,no).call(this,o,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,o){this.validate(e),je(this,no).call(this,e,o)}serialize(e,o){return this.validate(e),new Mr(this,je(this,Eo).call(this,e,o))}parse(e){let o=new Ir(e);return this.read(o)}fromHex(e){return this.parse(ro(e))}fromBase58(e){return this.parse(Ve(e))}fromBase64(e){return this.parse(fe(e))}transform({name:e,input:o,output:r,validate:n}){return new Il({name:e??this.name,read:i=>r?r(this.read(i)):this.read(i),write:(i,l)=>je(this,no).call(this,o?o(i):i,l),serializedSize:i=>this.serializedSize(o?o(i):i),serialize:(i,l)=>je(this,Eo).call(this,o?o(i):i,l),validate:i=>{n?.(i),this.validate(o?o(i):i)}})}};no=new WeakMap;Eo=new WeakMap;var Oe=lp,Ul=Symbol.for("@mysten/serialized-bcs");function io(t){return!!t&&typeof t=="object"&&t[Ul]===!0}var Mr=class{constructor(e,o){Pr(this,kr),Pr(this,ht),Br(this,kr,e),Br(this,ht,o)}get[Ul](){return!0}toBytes(){return je(this,ht)}toHex(){return Xe(je(this,ht))}toBase64(){return K(je(this,ht))}toBase58(){return ot(je(this,ht))}parse(){return je(this,kr).parse(je(this,ht))}};kr=new WeakMap;ht=new WeakMap;function Ao({size:t,...e}){return new Oe({...e,serializedSize:()=>t})}function Dr({readMethod:t,writeMethod:e,...o}){return Ao({...o,read:r=>r[t](),write:(r,n)=>n[e](r),validate:r=>{if(r<0||r>o.maxValue)throw new TypeError(`Invalid ${o.name} value: ${r}. Expected value in range 0-${o.maxValue}`);o.validate?.(r)}})}function Rr({readMethod:t,writeMethod:e,...o}){return Ao({...o,read:r=>r[t](),write:(r,n)=>n[e](BigInt(r)),validate:r=>{let n=BigInt(r);if(n<0||n>o.maxValue)throw new TypeError(`Invalid ${o.name} value: ${n}. Expected value in range 0-${o.maxValue}`);o.validate?.(n)}})}function Ol({serialize:t,...e}){let o=new Oe({...e,serialize:t,write:(r,n)=>{for(let i of o.serialize(r).toBytes())n.write8(i)}});return o}function kl({toBytes:t,fromBytes:e,...o}){return new Oe({...o,read:r=>{let n=r.readULEB(),i=r.readBytes(n);return e(i)},write:(r,n)=>{let i=t(r);n.writeULEB(i.length);for(let l=0;l<i.length;l++)n.write8(i[l])},serialize:r=>{let n=t(r),i=Dt(n.length),l=new Uint8Array(i.length+n.length);return l.set(i,0),l.set(n,i.length),l},validate:r=>{if(typeof r!="string")throw new TypeError(`Invalid ${o.name} value: ${r}. Expected string`);o.validate?.(r)}})}function Pl(t){let e=null;function o(){return e||(e=t()),e}return new Oe({name:"lazy",read:r=>o().read(r),serializedSize:r=>o().serializedSize(r),write:(r,n)=>o().write(r,n),serialize:(r,n)=>o().serialize(r,n).toBytes()})}s();a();var u={u8(t){return Dr({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Dr({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Dr({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Rr({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Rr({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Rr({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Ao({name:"bool",size:1,read:e=>e.read8()===1,write:(e,o)=>o.write8(e?1:0),...t,validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Ol({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Dt(e)),...t})},bytes(t,e){return Ao({name:`bytes[${t}]`,size:t,read:o=>o.readBytes(t),write:(o,r)=>{let n=new Uint8Array(o);for(let i=0;i<t;i++)r.write8(n[i]??0)},...e,validate:o=>{if(e?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t)throw new TypeError(`Expected array of length ${t}, found ${o.length}`)}})},byteVector(t){return new Oe({name:"bytesVector",read:e=>{let o=e.readULEB();return e.readBytes(o)},write:(e,o)=>{let r=new Uint8Array(e);o.writeULEB(r.length);for(let n=0;n<r.length;n++)o.write8(r[n]??0)},...t,serializedSize:e=>{let o="length"in e?e.length:null;return o==null?null:Dt(o).length+o},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return kl({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,o){return new Oe({name:`${e.name}[${t}]`,read:r=>{let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.read(r);return n},write:(r,n)=>{for(let i of r)e.write(i,n)},...o,validate:r=>{if(o?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new Oe({name:`vector<${t.name}>`,read:o=>{let r=o.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=t.read(o);return n},write:(o,r)=>{r.writeULEB(o.length);for(let n of o)t.write(n,r)},...e,validate:o=>{if(e?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`)}})},tuple(t,e){return new Oe({name:`(${t.map(o=>o.name).join(", ")})`,serializedSize:o=>{let r=0;for(let n=0;n<t.length;n++){let i=t[n].serializedSize(o[n]);if(i==null)return null;r+=i}return r},read:o=>{let r=[];for(let n of t)r.push(n.read(o));return r},write:(o,r)=>{for(let n=0;n<t.length;n++)t[n].write(o[n],r)},...e,validate:o=>{if(e?.validate?.(o),!Array.isArray(o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${o.length}`)}})},struct(t,e,o){let r=Object.entries(e);return new Oe({name:t,serializedSize:n=>{let i=0;for(let[l,c]of r){let d=c.serializedSize(n[l]);if(d==null)return null;i+=d}return i},read:n=>{let i={};for(let[l,c]of r)i[l]=c.read(n);return i},write:(n,i)=>{for(let[l,c]of r)c.write(n[l],i)},...o,validate:n=>{if(o?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`)}})},enum(t,e,o){let r=Object.entries(e);return new Oe({name:t,read:n=>{let i=n.readULEB(),l=r[i];if(!l)throw new TypeError(`Unknown value ${i} for enum ${t}`);let[c,d]=l;return{[c]:d?.read(n)??!0,$kind:c}},write:(n,i)=>{let[l,c]=Object.entries(n).filter(([d])=>Object.hasOwn(e,d))[0];for(let d=0;d<r.length;d++){let[p,m]=r[d];if(p===l){i.writeULEB(d),m?.write(c,i);return}}},...o,validate:n=>{if(o?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`);let i=Object.keys(n).filter(c=>n[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);let[l]=i;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o=>[...o.entries()],output:o=>{let r=new Map;for(let[n,i]of o)r.set(n,i);return r}})},lazy(t){return Pl(t)}};s();a();s();a();s();a();s();a();s();a();var cp=32;function Nr(t){try{return Ve(t).length===cp}catch{return!1}}var Io=32;function ve(t){return up(t)&&dp(t)===Io}function so(t){return ve(t)}function B(t,e=!1){let o=t.toLowerCase();return!e&&o.startsWith("0x")&&(o=o.slice(2)),`0x${o.padStart(Io*2,"0")}`}function Se(t,e=!1){return B(t,e)}function up(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function dp(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}s();a();var pp=/^vector<(.+)>$/,mp=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,rt=class t{static parseFromStr(e,o=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let r=e.match(pp);if(r)return{vector:t.parseFromStr(r[1],o)};let n=e.match(mp);if(n)return{struct:{address:o?B(n[1]):n[1],module:n[2],name:n[3],typeParams:n[5]===void 0?[]:t.parseStructTypeArgs(n[5],o)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,o=!1){return Ur(e).map(r=>t.parseFromStr(r,o))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let o=e.struct,r=o.typeParams.map(t.tagToString).join(", ");return`${o.address}::${o.module}::${o.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}};function fp(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function hp(t){return u.enum("Option",{None:null,Some:t})}var H=u.bytes(Io).transform({validate:t=>{let e=typeof t=="string"?t:Xe(t);if(!e||!ve(B(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?ro(B(t)):t,output:t=>B(Xe(t))}),Ee=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>Ve(t),output:t=>ot(new Uint8Array(t)),validate:t=>{if(Ve(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),we=u.struct("SuiObjectRef",{objectId:H,version:u.u64(),digest:Ee}),Nn=u.struct("SharedObjectRef",{objectId:H,initialSharedVersion:u.u64(),mutable:u.bool()}),Vn=u.enum("ObjectArg",{ImmOrOwnedObject:we,SharedObject:Nn,Receiving:we}),jn=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>K(new Uint8Array(t))})}),Object:Vn}),_n=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>_n),struct:u.lazy(()=>qn),u16:null,u32:null,u256:null}),Vr=_n.transform({input:t=>typeof t=="string"?rt.parseFromStr(t,!0):t,output:t=>rt.tagToString(t)}),_e=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),Ln=u.struct("ProgrammableMoveCall",{package:H,module:u.string(),function:u.string(),typeArguments:u.vector(Vr),arguments:u.vector(_e)}),Fn=u.enum("Command",{MoveCall:Ln,TransferObjects:u.struct("TransferObjects",{objects:u.vector(_e),address:_e}),SplitCoins:u.struct("SplitCoins",{coin:_e,amounts:u.vector(_e)}),MergeCoins:u.struct("MergeCoins",{destination:_e,sources:u.vector(_e)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>K(new Uint8Array(t))})),dependencies:u.vector(H)}),MakeMoveVec:u.struct("MakeMoveVec",{type:hp(Vr).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:u.vector(_e)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>K(new Uint8Array(t))})),dependencies:u.vector(H),package:H,ticket:_e})}),$n=u.struct("ProgrammableTransaction",{inputs:u.vector(jn),commands:u.vector(Fn)}),zn=u.enum("TransactionKind",{ProgrammableTransaction:$n,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Hn=u.enum("TransactionExpiration",{None:null,Epoch:fp()}),qn=u.struct("StructTag",{address:H,module:u.string(),name:u.string(),typeParams:u.vector(_n)}),Gn=u.struct("GasData",{payment:u.vector(we),owner:H,price:u.u64(),budget:u.u64()}),Wn=u.struct("TransactionDataV1",{kind:zn,sender:H,gasData:Gn,expiration:Hn}),Kn=u.enum("TransactionData",{V1:Wn}),Qn=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Xn=u.enum("IntentVersion",{V0:null}),Yn=u.enum("AppId",{Sui:null}),Jn=u.struct("Intent",{scope:Qn,version:Xn,appId:Yn});function Zn(t){return u.struct(`IntentMessage<${t.name}>`,{intent:Jn,value:t})}var ei=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),ti=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),oi=u.struct("MultiSigPkMap",{pubKey:ti,weight:u.u8()}),ri=u.struct("MultiSigPublicKey",{pk_map:u.vector(oi),threshold:u.u16()}),Bl=u.struct("MultiSig",{sigs:u.vector(ei),bitmap:u.u16(),multisig_pk:ri}),bp=u.vector(u.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>K(new Uint8Array(t))}),ni=u.struct("SenderSignedTransaction",{intentMessage:Zn(Kn),txSignatures:u.vector(bp)}),Ml=u.vector(ni,{name:"SenderSignedData"}),Dl=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())});s();a();var yp=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:H}),NotAPackage:u.struct("NotAPackage",{objectId:H}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:H,ticketId:H})}),gp=u.struct("ModuleId",{address:H,name:u.string()}),Rl=u.struct("MoveLocation",{module:gp,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),Cp=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Sp=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),wp=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:H}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(Rl),MoveAbort:u.tuple([Rl,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:Cp}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:Sp}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:yp}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(H)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:H,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Nl=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:wp,command:u.option(u.u64())})}),Vl=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),ao=u.enum("Owner",{AddressOwner:H,ObjectOwner:H,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null}),xp=u.struct("TransactionEffectsV1",{status:Nl,executedEpoch:u.u64(),gasUsed:Vl,modifiedAtVersions:u.vector(u.tuple([H,u.u64()])),sharedObjects:u.vector(we),transactionDigest:Ee,created:u.vector(u.tuple([we,ao])),mutated:u.vector(u.tuple([we,ao])),unwrapped:u.vector(u.tuple([we,ao])),deleted:u.vector(we),unwrappedThenDeleted:u.vector(we),wrapped:u.vector(we),gasObject:u.tuple([we,ao]),eventsDigest:u.option(Ee),dependencies:u.vector(Ee)}),ii=u.tuple([u.u64(),Ee]),Tp=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([ii,ao])}),vp=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([Ee,ao]),PackageWrite:ii}),Ep=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),Ap=u.struct("EffectsObjectChange",{inputState:Tp,outputState:vp,idOperation:Ep}),Ip=u.enum("UnchangedSharedKind",{ReadOnlyRoot:ii,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),Up=u.struct("TransactionEffectsV2",{status:Nl,executedEpoch:u.u64(),gasUsed:Vl,transactionDigest:Ee,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(Ee),dependencies:u.vector(Ee),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([H,Ap])),unchangedSharedObjects:u.vector(u.tuple([H,Ip])),auxDataDigest:u.option(Ee)}),jl=u.enum("TransactionEffects",{V1:xp,V2:Up});s();a();function lo(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return H}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[o,r]=e.slice(1);return o==="vector"?u.vector(lo(r)):u.option(lo(r))}throw new Error(`Invalid Pure type name: ${t}`)}var D={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:H,AppId:Yn,Argument:_e,CallArg:jn,CompressedSignature:ei,GasData:Gn,Intent:Jn,IntentMessage:Zn,IntentScope:Qn,IntentVersion:Xn,MultiSig:Bl,MultiSigPkMap:oi,MultiSigPublicKey:ri,ObjectArg:Vn,ObjectDigest:Ee,ProgrammableMoveCall:Ln,ProgrammableTransaction:$n,PublicKey:ti,SenderSignedData:Ml,SenderSignedTransaction:ni,SharedObjectRef:Nn,StructTag:qn,SuiObjectRef:we,Command:Fn,TransactionData:Kn,TransactionDataV1:Wn,TransactionExpiration:Hn,TransactionKind:zn,TypeTag:Vr,TransactionEffects:jl,PasskeyAuthenticator:Dl};s();a();s();a();var Op=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,kp=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function _l(t,e="at"){let o=t.toLowerCase(),r;if(o.includes("@")){if(!Op.test(o))throw new Error(`Invalid SuiNS name ${t}`);let[n,i]=o.split("@");r=[...n?n.split("."):[],i]}else{if(!kp.test(o))throw new Error(`Invalid SuiNS name ${t}`);r=o.split(".").slice(0,-1)}return e==="dot"?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}s();a();var Pp=BigInt(1e9),si="0x1",jr="0x2";var Bp=Se("0x6");var ai=`${jr}::sui::SUI`,Mp=Se("0x5");s();a();s();a();s();a();function _r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Dp(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function li(t,...e){if(!Dp(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ci(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ll(t,e){li(t);let o=e.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}s();a();var co=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));var bt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Fl=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,Le=bt?t=>t:t=>Fl(t);function Rt(t){for(let e=0;e<t.length;e++)t[e]=Fl(t[e])}function Rp(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Nt(t){return typeof t=="string"&&(t=Rp(t)),li(t),t}var Lr=class{clone(){return this._cloneInto()}},Kv={}.toString;function $l(t){let e=(r,n)=>t(n).update(Nt(r)).digest(),o=t({});return e.outputLen=o.outputLen,e.blockLen=o.blockLen,e.create=r=>t(r),e}var zl=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),Fr=class extends Lr{constructor(e,o,r={},n,i,l){if(super(),this.blockLen=e,this.outputLen=o,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,_r(e),_r(o),_r(n),o<0||o>n)throw new Error("outputLen bigger than keyLen");if(r.key!==void 0&&(r.key.length<1||r.key.length>n))throw new Error(`key must be up 1..${n} byte long or undefined`);if(r.salt!==void 0&&r.salt.length!==i)throw new Error(`salt must be ${i} byte long or undefined`);if(r.personalization!==void 0&&r.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=co(this.buffer=new Uint8Array(e))}update(e){ci(this);let{blockLen:o,buffer:r,buffer32:n}=this;e=Nt(e);let i=e.length,l=e.byteOffset,c=e.buffer;for(let d=0;d<i;){this.pos===o&&(bt||Rt(n),this.compress(n,0,!1),bt||Rt(n),this.pos=0);let p=Math.min(o-this.pos,i-d),m=l+d;if(p===o&&!(m%4)&&d+p<i){let h=new Uint32Array(c,m,Math.floor((i-d)/4));bt||Rt(h);for(let g=0;d+o<i;g+=n.length,d+=o)this.length+=o,this.compress(h,g,!1);bt||Rt(h);continue}r.set(e.subarray(d,d+p),this.pos),this.pos+=p,this.length+=p,d+=p}return this}digestInto(e){ci(this),Ll(e,this);let{pos:o,buffer32:r}=this;this.finished=!0,this.buffer.subarray(o).fill(0),bt||Rt(r),this.compress(r,0,!0),bt||Rt(r);let n=co(e);this.get().forEach((i,l)=>n[l]=Le(i))}digest(){let{buffer:e,outputLen:o}=this;this.digestInto(e);let r=e.slice(0,o);return this.destroy(),r}_cloneInto(e){let{buffer:o,length:r,finished:n,destroyed:i,outputLen:l,pos:c}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.length=r,e.finished=n,e.destroyed=i,e.outputLen=l,e.buffer.set(o),e.pos=c,e}};s();a();var $r=BigInt(4294967295),ui=BigInt(32);function Hl(t,e=!1){return e?{h:Number(t&$r),l:Number(t>>ui&$r)}:{h:Number(t>>ui&$r)|0,l:Number(t&$r)|0}}function Np(t,e=!1){let o=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:i,l}=Hl(t[n],e);[o[n],r[n]]=[i,l]}return[o,r]}var Vp=(t,e)=>BigInt(t>>>0)<<ui|BigInt(e>>>0),jp=(t,e,o)=>t>>>o,_p=(t,e,o)=>t<<32-o|e>>>o,Lp=(t,e,o)=>t>>>o|e<<32-o,Fp=(t,e,o)=>t<<32-o|e>>>o,$p=(t,e,o)=>t<<64-o|e>>>o-32,zp=(t,e,o)=>t>>>o-32|e<<64-o,Hp=(t,e)=>e,qp=(t,e)=>t,Gp=(t,e,o)=>t<<o|e>>>32-o,Wp=(t,e,o)=>e<<o|t>>>32-o,Kp=(t,e,o)=>e<<o-32|t>>>64-o,Qp=(t,e,o)=>t<<o-32|e>>>64-o;function Xp(t,e,o,r){let n=(e>>>0)+(r>>>0);return{h:t+o+(n/2**32|0)|0,l:n|0}}var Yp=(t,e,o)=>(t>>>0)+(e>>>0)+(o>>>0),Jp=(t,e,o,r)=>e+o+r+(t/2**32|0)|0,Zp=(t,e,o,r)=>(t>>>0)+(e>>>0)+(o>>>0)+(r>>>0),em=(t,e,o,r,n)=>e+o+r+n+(t/2**32|0)|0,tm=(t,e,o,r,n)=>(t>>>0)+(e>>>0)+(o>>>0)+(r>>>0)+(n>>>0),om=(t,e,o,r,n,i)=>e+o+r+n+i+(t/2**32|0)|0;var rm={fromBig:Hl,split:Np,toBig:Vp,shrSH:jp,shrSL:_p,rotrSH:Lp,rotrSL:Fp,rotrBH:$p,rotrBL:zp,rotr32H:Hp,rotr32L:qp,rotlSH:Gp,rotlSL:Wp,rotlBH:Kp,rotlBL:Qp,add:Xp,add3L:Yp,add3H:Jp,add4L:Zp,add4H:em,add5H:om,add5L:tm},he=rm;var ce=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),x=new Uint32Array(32);function yt(t,e,o,r,n,i){let l=n[i],c=n[i+1],d=x[2*t],p=x[2*t+1],m=x[2*e],h=x[2*e+1],g=x[2*o],y=x[2*o+1],C=x[2*r],S=x[2*r+1],T=he.add3L(d,m,l);p=he.add3H(T,p,h,c),d=T|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:he.rotr32H(S,C),Dl:he.rotr32L(S,C)},{h:y,l:g}=he.add(y,g,S,C),{Bh:h,Bl:m}={Bh:h^y,Bl:m^g},{Bh:h,Bl:m}={Bh:he.rotrSH(h,m,24),Bl:he.rotrSL(h,m,24)},x[2*t]=d,x[2*t+1]=p,x[2*e]=m,x[2*e+1]=h,x[2*o]=g,x[2*o+1]=y,x[2*r]=C,x[2*r+1]=S}function gt(t,e,o,r,n,i){let l=n[i],c=n[i+1],d=x[2*t],p=x[2*t+1],m=x[2*e],h=x[2*e+1],g=x[2*o],y=x[2*o+1],C=x[2*r],S=x[2*r+1],T=he.add3L(d,m,l);p=he.add3H(T,p,h,c),d=T|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:he.rotrSH(S,C,16),Dl:he.rotrSL(S,C,16)},{h:y,l:g}=he.add(y,g,S,C),{Bh:h,Bl:m}={Bh:h^y,Bl:m^g},{Bh:h,Bl:m}={Bh:he.rotrBH(h,m,63),Bl:he.rotrBL(h,m,63)},x[2*t]=d,x[2*t+1]=p,x[2*e]=m,x[2*e+1]=h,x[2*o]=g,x[2*o+1]=y,x[2*r]=C,x[2*r+1]=S}var di=class extends Fr{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=ce[0]|0,this.v0h=ce[1]|0,this.v1l=ce[2]|0,this.v1h=ce[3]|0,this.v2l=ce[4]|0,this.v2h=ce[5]|0,this.v3l=ce[6]|0,this.v3h=ce[7]|0,this.v4l=ce[8]|0,this.v4h=ce[9]|0,this.v5l=ce[10]|0,this.v5h=ce[11]|0,this.v6l=ce[12]|0,this.v6h=ce[13]|0,this.v7l=ce[14]|0,this.v7h=ce[15]|0;let o=e.key?e.key.length:0;if(this.v0l^=this.outputLen|o<<8|65536|1<<24,e.salt){let r=co(Nt(e.salt));this.v4l^=Le(r[0]),this.v4h^=Le(r[1]),this.v5l^=Le(r[2]),this.v5h^=Le(r[3])}if(e.personalization){let r=co(Nt(e.personalization));this.v6l^=Le(r[0]),this.v6h^=Le(r[1]),this.v7l^=Le(r[2]),this.v7h^=Le(r[3])}if(e.key){let r=new Uint8Array(this.blockLen);r.set(Nt(e.key)),this.update(r)}}get(){let{v0l:e,v0h:o,v1l:r,v1h:n,v2l:i,v2h:l,v3l:c,v3h:d,v4l:p,v4h:m,v5l:h,v5h:g,v6l:y,v6h:C,v7l:S,v7h:T}=this;return[e,o,r,n,i,l,c,d,p,m,h,g,y,C,S,T]}set(e,o,r,n,i,l,c,d,p,m,h,g,y,C,S,T){this.v0l=e|0,this.v0h=o|0,this.v1l=r|0,this.v1h=n|0,this.v2l=i|0,this.v2h=l|0,this.v3l=c|0,this.v3h=d|0,this.v4l=p|0,this.v4h=m|0,this.v5l=h|0,this.v5h=g|0,this.v6l=y|0,this.v6h=C|0,this.v7l=S|0,this.v7h=T|0}compress(e,o,r){this.get().forEach((d,p)=>x[p]=d),x.set(ce,16);let{h:n,l:i}=he.fromBig(BigInt(this.length));x[24]=ce[8]^i,x[25]=ce[9]^n,r&&(x[28]=~x[28],x[29]=~x[29]);let l=0,c=zl;for(let d=0;d<12;d++)yt(0,4,8,12,e,o+2*c[l++]),gt(0,4,8,12,e,o+2*c[l++]),yt(1,5,9,13,e,o+2*c[l++]),gt(1,5,9,13,e,o+2*c[l++]),yt(2,6,10,14,e,o+2*c[l++]),gt(2,6,10,14,e,o+2*c[l++]),yt(3,7,11,15,e,o+2*c[l++]),gt(3,7,11,15,e,o+2*c[l++]),yt(0,5,10,15,e,o+2*c[l++]),gt(0,5,10,15,e,o+2*c[l++]),yt(1,6,11,12,e,o+2*c[l++]),gt(1,6,11,12,e,o+2*c[l++]),yt(2,7,8,13,e,o+2*c[l++]),gt(2,7,8,13,e,o+2*c[l++]),yt(3,4,9,14,e,o+2*c[l++]),gt(3,4,9,14,e,o+2*c[l++]);this.v0l^=x[0]^x[16],this.v0h^=x[1]^x[17],this.v1l^=x[2]^x[18],this.v1h^=x[3]^x[19],this.v2l^=x[4]^x[20],this.v2h^=x[5]^x[21],this.v3l^=x[6]^x[22],this.v3h^=x[7]^x[23],this.v4l^=x[8]^x[24],this.v4h^=x[9]^x[25],this.v5l^=x[10]^x[26],this.v5h^=x[11]^x[27],this.v6l^=x[12]^x[28],this.v6h^=x[13]^x[29],this.v7l^=x[14]^x[30],this.v7h^=x[15]^x[31],x.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ql=$l(t=>new di(t));var nm="object",im="ID",sm="ascii",am="String",lm="string",cm="String",um="option",dm="Option";function Gl(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&B(e.package)===B("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function zr(t){if(typeof t=="string")switch(t){case"address":return D.Address;case"bool":return D.Bool;case"u8":return D.U8;case"u16":return D.U16;case"u32":return D.U32;case"u64":return D.U64;case"u128":return D.U128;case"u256":return D.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return D.vector(D.U8).transform({input:o=>typeof o=="string"?new TextEncoder().encode(o):o,output:o=>o});let e=zr(t.vector);return e?D.vector(e):null}if("datatype"in t){let e=B(t.datatype.package);if(e===B(si)){if(t.datatype.module===sm&&t.datatype.type===am)return D.String;if(t.datatype.module===lm&&t.datatype.type===cm)return D.String;if(t.datatype.module===um&&t.datatype.type===dm){let o=zr(t.datatype.typeParameters[0]);return o?D.vector(o):null}}if(e===B(jr)&&t.datatype.module===nm&&t.datatype.type===im)return D.Address}return null}function Wl(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Uo(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Uo(t.MutableReference)}:{ref:null,body:Uo(t)}}function Uo(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Uo(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Uo)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}s();a();function pm(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?K(t):t.toBase64()}}}var Fe={Pure:pm,ObjectRef({objectId:t,digest:e,version:o}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:o,objectId:B(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:o}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:o,objectId:B(t)}}}},ReceivingRef({objectId:t,digest:e,version:o}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:o,objectId:B(t)}}}}};s();a();s();a();function St(t){let e=Object.entries(t).map(([o,r])=>w({[o]:r}));return F(ae(e),Xo(o=>({...o,$kind:Object.keys(o)[0]})))}var Vt=F(U(),Xo(t=>B(t)),qt(ve)),ge=Vt,Ct=U(),be=F(ae([U(),F(G(),W())]),qt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),$e=w({objectId:Vt,version:be,digest:U()}),q=F(ae([w({GasCoin:I(!0)}),w({Input:F(G(),W()),type:ue(I("pure"))}),w({Input:F(G(),W()),type:ue(I("object"))}),w({Result:F(G(),W())}),w({NestedResult:Yo([F(G(),W()),F(G(),W())])})]),Xo(t=>({...t,$kind:Object.keys(t)[0]}))),mm=w({budget:V(be),price:V(be),owner:V(Vt),payment:V(E($e))}),RE=w({address:U(),module:U(),name:U(),typeParams:E(U())}),pi=ae([I("address"),I("bool"),I("u8"),I("u16"),I("u32"),I("u64"),I("u128"),I("u256"),w({vector:Wt(()=>pi)}),w({datatype:w({package:U(),module:U(),type:U(),typeParameters:E(Wt(()=>pi))})}),w({typeParameter:F(G(),W())})]),fm=w({ref:V(ae([I("&"),I("&mut")])),body:pi}),hm=w({package:ge,module:U(),function:U(),typeArguments:E(U()),arguments:E(q),_argumentTypes:ue(V(E(fm)))}),bm=w({name:U(),inputs:Kt(U(),ae([q,E(q)])),data:Kt(U(),Je())}),ym=St({MoveCall:hm,TransferObjects:w({objects:E(q),address:q}),SplitCoins:w({coin:q,amounts:E(q)}),MergeCoins:w({destination:q,sources:E(q)}),Publish:w({modules:E(Ct),dependencies:E(ge)}),MakeMoveVec:w({type:V(U()),elements:E(q)}),Upgrade:w({modules:E(Ct),dependencies:E(ge),package:ge,ticket:q}),$Intent:bm}),Kl=St({ImmOrOwnedObject:$e,SharedObject:w({objectId:ge,initialSharedVersion:be,mutable:Gt()}),Receiving:$e}),gm=St({Object:Kl,Pure:w({bytes:Ct}),UnresolvedPure:w({value:Je()}),UnresolvedObject:w({objectId:ge,version:ue(V(be)),digest:ue(V(U())),initialSharedVersion:ue(V(be))})}),mi=St({Object:Kl,Pure:w({bytes:Ct})}),fi=St({None:I(!0),Epoch:be}),uo=w({version:I(2),sender:dt(Vt),expiration:dt(fi),gasData:mm,inputs:E(gm),commands:E(ym)});var wt={MoveCall(t){let[e,o="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:o,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(o=>z(q,o)),address:z(q,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(q,t),amounts:e.map(o=>z(q,o))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(q,t),sources:e.map(o=>z(q,o))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(o=>typeof o=="string"?o:K(new Uint8Array(o))),dependencies:e.map(o=>Se(o))}}},Upgrade({modules:t,dependencies:e,package:o,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(n=>typeof n=="string"?n:K(new Uint8Array(n))),dependencies:e.map(n=>Se(n)),package:o,ticket:z(q,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(o=>z(q,o))}}},Intent({name:t,inputs:e={},data:o={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,n])=>[r,Array.isArray(n)?n.map(i=>z(q,i)):z(q,n)])),data:o}}}};s();a();s();a();var hi=w({digest:U(),objectId:U(),version:ae([F(G(),W()),U(),rn()])}),Cm=St({ImmOrOwned:hi,Shared:w({objectId:ge,initialSharedVersion:be,mutable:Gt()}),Receiving:hi}),Ql=St({Object:Cm,Pure:E(F(G(),W()))}),Yl=ae([w({kind:I("Input"),index:F(G(),W()),value:Je(),type:ue(I("object"))}),w({kind:I("Input"),index:F(G(),W()),value:Je(),type:I("pure")})]),Sm=ae([w({Epoch:F(G(),W())}),w({None:V(I(!0))})]),Xl=F(ae([G(),U(),rn()]),qt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),bi=ae([w({bool:V(I(!0))}),w({u8:V(I(!0))}),w({u64:V(I(!0))}),w({u128:V(I(!0))}),w({address:V(I(!0))}),w({signer:V(I(!0))}),w({vector:Wt(()=>bi)}),w({struct:Wt(()=>wm)}),w({u16:V(I(!0))}),w({u32:V(I(!0))}),w({u256:V(I(!0))})]),wm=w({address:U(),module:U(),name:U(),typeParams:E(bi)}),xm=w({budget:ue(Xl),price:ue(Xl),payment:ue(E(hi)),owner:ue(U())}),Tm=[Yl,w({kind:I("GasCoin")}),w({kind:I("Result"),index:F(G(),W())}),w({kind:I("NestedResult"),index:F(G(),W()),resultIndex:F(G(),W())})],st=ae([...Tm]),vm=w({kind:I("MoveCall"),target:F(U(),qt(t=>t.split("::").length===3)),typeArguments:E(U()),arguments:E(st)}),Em=w({kind:I("TransferObjects"),objects:E(st),address:st}),Am=w({kind:I("SplitCoins"),coin:st,amounts:E(st)}),Im=w({kind:I("MergeCoins"),destination:st,sources:E(st)}),Um=w({kind:I("MakeMoveVec"),type:ae([w({Some:bi}),w({None:V(I(!0))})]),objects:E(st)}),Om=w({kind:I("Publish"),modules:E(E(F(G(),W()))),dependencies:E(U())}),km=w({kind:I("Upgrade"),modules:E(E(F(G(),W()))),dependencies:E(U()),packageId:U(),ticket:st}),Pm=[vm,Em,Am,Im,Om,km,Um],Bm=ae([...Pm]),XE=w({version:I(1),sender:ue(U()),expiration:dt(Sm),gasConfig:xm,inputs:E(Yl),transactions:E(Bm)});function yi(t){let e=t.inputs.map((o,r)=>{if(o.Object)return{kind:"Input",index:r,value:{Object:o.Object.ImmOrOwnedObject?{ImmOrOwned:o.Object.ImmOrOwnedObject}:o.Object.Receiving?{Receiving:{digest:o.Object.Receiving.digest,version:o.Object.Receiving.version,objectId:o.Object.Receiving.objectId}}:{Shared:{mutable:o.Object.SharedObject.mutable,initialSharedVersion:o.Object.SharedObject.initialSharedVersion,objectId:o.Object.SharedObject.objectId}}},type:"object"};if(o.Pure)return{kind:"Input",index:r,value:{Pure:Array.from(fe(o.Pure.bytes))},type:"pure"};if(o.UnresolvedPure)return{kind:"Input",type:"pure",index:r,value:o.UnresolvedPure.value};if(o.UnresolvedObject)return{kind:"Input",type:"object",index:r,value:o.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(o=>{if(o.MakeMoveVec)return{kind:"MakeMoveVec",type:o.MakeMoveVec.type===null?{None:!0}:{Some:rt.parseFromStr(o.MakeMoveVec.type)},objects:o.MakeMoveVec.elements.map(r=>nt(r,e))};if(o.MergeCoins)return{kind:"MergeCoins",destination:nt(o.MergeCoins.destination,e),sources:o.MergeCoins.sources.map(r=>nt(r,e))};if(o.MoveCall)return{kind:"MoveCall",target:`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`,typeArguments:o.MoveCall.typeArguments,arguments:o.MoveCall.arguments.map(r=>nt(r,e))};if(o.Publish)return{kind:"Publish",modules:o.Publish.modules.map(r=>Array.from(fe(r))),dependencies:o.Publish.dependencies};if(o.SplitCoins)return{kind:"SplitCoins",coin:nt(o.SplitCoins.coin,e),amounts:o.SplitCoins.amounts.map(r=>nt(r,e))};if(o.TransferObjects)return{kind:"TransferObjects",objects:o.TransferObjects.objects.map(r=>nt(r,e)),address:nt(o.TransferObjects.address,e)};if(o.Upgrade)return{kind:"Upgrade",modules:o.Upgrade.modules.map(r=>Array.from(fe(r))),dependencies:o.Upgrade.dependencies,packageId:o.Upgrade.package,ticket:nt(o.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(o)}`)})}}function nt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function Jl(t){return z(uo,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(fo(Ql,e.value)){let o=z(Ql,e.value);if(o.Object){if(o.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:o.Object.ImmOrOwned.objectId,version:String(o.Object.ImmOrOwned.version),digest:o.Object.ImmOrOwned.digest}}};if(o.Object.Shared)return{Object:{SharedObject:{mutable:o.Object.Shared.mutable??null,initialSharedVersion:o.Object.Shared.initialSharedVersion,objectId:o.Object.Shared.objectId}}};if(o.Object.Receiving)return{Object:{Receiving:{digest:o.Object.Receiving.digest,version:String(o.Object.Receiving.version),objectId:o.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:K(new Uint8Array(o.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?rt.tagToString(e.type.Some):null,elements:e.objects.map(o=>it(o))}};case"MergeCoins":return{MergeCoins:{destination:it(e.destination),sources:e.sources.map(o=>it(o))}};case"MoveCall":{let[o,r,n]=e.target.split("::");return{MoveCall:{package:o,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(i=>it(i))}}}case"Publish":return{Publish:{modules:e.modules.map(o=>K(Uint8Array.from(o))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:it(e.coin),amounts:e.amounts.map(o=>it(o))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(o=>it(o)),address:it(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(o=>K(Uint8Array.from(o))),dependencies:e.dependencies,package:e.packageId,ticket:it(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}function it(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}s();a();function Oo(t){return ae(Object.entries(t).map(([e,o])=>w({[e]:o})))}var ze=Oo({GasCoin:I(!0),Input:F(G(),W()),Result:F(G(),W()),NestedResult:Yo([F(G(),W()),F(G(),W())])}),Mm=w({budget:V(be),price:V(be),owner:V(Vt),payment:V(E($e))}),Dm=w({package:ge,module:U(),function:U(),typeArguments:E(U()),arguments:E(ze)}),Rm=w({name:U(),inputs:Kt(U(),ae([ze,E(ze)])),data:Kt(U(),Je())}),Nm=Oo({MoveCall:Dm,TransferObjects:w({objects:E(ze),address:ze}),SplitCoins:w({coin:ze,amounts:E(ze)}),MergeCoins:w({destination:ze,sources:E(ze)}),Publish:w({modules:E(Ct),dependencies:E(ge)}),MakeMoveVec:w({type:V(U()),elements:E(ze)}),Upgrade:w({modules:E(Ct),dependencies:E(ge),package:ge,ticket:ze}),$Intent:Rm}),Vm=Oo({ImmOrOwnedObject:$e,SharedObject:w({objectId:ge,initialSharedVersion:be,mutable:Gt()}),Receiving:$e}),jm=Oo({Object:Vm,Pure:w({bytes:Ct}),UnresolvedPure:w({value:Je()}),UnresolvedObject:w({objectId:ge,version:ue(V(be)),digest:ue(V(U())),initialSharedVersion:ue(V(be))})}),_m=Oo({None:I(!0),Epoch:be}),Zl=w({version:I(2),sender:dt(Vt),expiration:dt(_m),gasData:Mm,inputs:E(jm),commands:E(Nm)});s();a();var Lm=50,Fm=1000n,$m=5e10;async function tc(t,e,o){return await Wm(t,e),await Gm(t,e),e.onlyTransactionKind||(await zm(t,e),await Hm(t,e),await qm(t,e)),await Km(t),await o()}async function zm(t,e){t.gasConfig.price||(t.gasConfig.price=String(await ko(e).getReferenceGasPrice()))}async function Hm(t,e){if(t.gasConfig.budget)return;let o=await ko(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String($m),payment:[]}}})});if(o.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${o.effects.status.error}`,{cause:o});let r=Fm*BigInt(t.gasConfig.price||1n),n=BigInt(o.effects.gasUsed.computationCost)+r,i=n+BigInt(o.effects.gasUsed.storageCost)-BigInt(o.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>n?i:n)}async function qm(t,e){if(!t.gasConfig.payment){let r=(await ko(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:ai})).data.filter(n=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?n.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(n=>({objectId:n.coinObjectId,digest:n.digest,version:n.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(n=>z($e,n))}}async function Gm(t,e){let o=t.inputs.filter(m=>m.UnresolvedObject&&!(m.UnresolvedObject.version||m.UnresolvedObject?.initialSharedVersion)),r=[...new Set(o.map(m=>Se(m.UnresolvedObject.objectId)))],n=r.length?Jm(r,Lm):[],i=(await Promise.all(n.map(m=>ko(e).multiGetObjects({ids:m,options:{showOwner:!0}})))).flat(),l=new Map(r.map((m,h)=>[m,i[h]])),c=Array.from(l).filter(([m,h])=>h.error).map(([m,h])=>JSON.stringify(h.error));if(c.length)throw new Error(`The following input objects are invalid: ${c.join(", ")}`);let d=i.map(m=>{if(m.error||!m.data)throw new Error(`Failed to fetch object: ${m.error}`);let h=m.data.owner,g=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:m.data.objectId,digest:m.data.digest,version:m.data.version,initialSharedVersion:g}}),p=new Map(r.map((m,h)=>[m,d[h]]));for(let[m,h]of t.inputs.entries()){if(!h.UnresolvedObject)continue;let g,y=B(h.UnresolvedObject.objectId),C=p.get(y);h.UnresolvedObject.initialSharedVersion??C?.initialSharedVersion?g=Fe.SharedObjectRef({objectId:y,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||C?.initialSharedVersion,mutable:Qm(t,m)}):Xm(t,m)&&(g=Fe.ReceivingRef({objectId:y,digest:h.UnresolvedObject.digest??C?.digest,version:h.UnresolvedObject.version??C?.version})),t.inputs[t.inputs.indexOf(h)]=g??Fe.ObjectRef({objectId:y,digest:h.UnresolvedObject.digest??C?.digest,version:h.UnresolvedObject.version??C?.version})}}async function Wm(t,e){let{inputs:o,commands:r}=t,n=[],i=new Set;r.forEach(c=>{if(c.MoveCall){if(c.MoveCall._argumentTypes)return;if(c.MoveCall.arguments.map(m=>m.$kind==="Input"?t.inputs[m.Input]:null).some(m=>m?.UnresolvedPure||m?.UnresolvedObject)){let m=`${c.MoveCall.package}::${c.MoveCall.module}::${c.MoveCall.function}`;i.add(m),n.push(c.MoveCall)}}switch(c.$kind){case"SplitCoins":c.SplitCoins.amounts.forEach(d=>{ec(d,D.U64,t)});break;case"TransferObjects":ec(c.TransferObjects.address,D.Address,t);break}});let l=new Map;if(i.size>0){let c=ko(e);await Promise.all([...i].map(async d=>{let[p,m,h]=d.split("::"),g=await c.getNormalizedMoveFunction({package:p,module:m,function:h});l.set(d,g.parameters.map(y=>Wl(y)))}))}n.length&&await Promise.all(n.map(async c=>{let d=l.get(`${c.package}::${c.module}::${c.function}`);if(!d)return;let m=d.length>0&&Gl(d.at(-1))?d.slice(0,d.length-1):d;c._argumentTypes=m})),r.forEach(c=>{if(!c.MoveCall)return;let d=c.MoveCall,p=`${d.package}::${d.module}::${d.function}`,m=d._argumentTypes;if(m){if(m.length!==c.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);m.forEach((h,g)=>{let y=d.arguments[g];if(y.$kind!=="Input")return;let C=o[y.Input];if(!C.UnresolvedPure&&!C.UnresolvedObject)return;let S=C.UnresolvedPure?.value??C.UnresolvedObject?.objectId,T=zr(h.body);if(T){y.type="pure",o[o.indexOf(C)]=Fe.Pure(T.serialize(S));return}if(typeof S!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(S,null,2)}`);y.type="object";let k=C.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:S}}:C;o[y.Input]=k})}})}function Km(t){t.inputs.forEach((e,o)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${o} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function ec(t,e,o){if(t.$kind!=="Input")return;let r=o.inputs[t.Input];r.$kind==="UnresolvedPure"&&(o.inputs[t.Input]=Fe.Pure(e.serialize(r.UnresolvedPure.value)))}function Qm(t,e){let o=!1;return t.getInputUses(e,(r,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(r);o=n.MoveCall._argumentTypes[i].ref!=="&"||o}(n.$kind==="MakeMoveVec"||n.$kind==="MergeCoins"||n.$kind==="SplitCoins")&&(o=!0)}),o}function Xm(t,e){let o=!1;return t.getInputUses(e,(r,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(r);o=Ym(n.MoveCall._argumentTypes[i])||o}}),o}function Ym(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function ko(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Jm(t,e){return Array.from({length:Math.ceil(t.length/e)},(o,r)=>t.slice(r*e,r*e+e))}s();a();function oc(t){function e(o){return t(o)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:o,value:r})=>n=>n.moveCall({typeArguments:[o],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[n.object(r)]}),e}s();a();function rc(t){function e(o,r){if(typeof o=="string")return t(lo(o).serialize(r));if(o instanceof Uint8Array||io(o))return t(o);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=o=>t(D.U8.serialize(o)),e.u16=o=>t(D.U16.serialize(o)),e.u32=o=>t(D.U32.serialize(o)),e.u64=o=>t(D.U64.serialize(o)),e.u128=o=>t(D.U128.serialize(o)),e.u256=o=>t(D.U256.serialize(o)),e.bool=o=>t(D.Bool.serialize(o)),e.string=o=>t(D.String.serialize(o)),e.address=o=>t(D.Address.serialize(o)),e.id=e.address,e.vector=(o,r)=>t(D.vector(lo(o)).serialize(r)),e.option=(o,r)=>t(D.option(lo(o)).serialize(r)),e}s();a();s();a();function nc(t,e){let o=Array.from(`${t}::`).map(n=>n.charCodeAt(0)),r=new Uint8Array(o.length+e.length);return r.set(o),r.set(e,o.length),ql(r,{dkLen:32})}function ic(t){return B(t).replace("0x","")}var xt=class t{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let r=D.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){let r=D.TransactionData.parse(e)?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return e.version===2?new t(z(uo,e)):new t(z(uo,Jl(e)))}static getDigestFromBytes(e){let o=nc("TransactionData",e);return ot(o)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:o,onlyTransactionKind:r}={}){let n=this.inputs,i=this.commands,l={ProgrammableTransaction:{inputs:n,commands:i}};if(r)return D.TransactionKind.serialize(l,{maxSize:e}).toBytes();let c=o?.expiration??this.expiration,d=o?.sender??this.sender,p={...this.gasData,...o?.gasConfig,...o?.gasData};if(!d)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let m={sender:ic(d),expiration:c||{None:!0},gasData:{payment:p.payment,owner:ic(this.gasData.owner??d),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return D.TransactionData.serialize({V1:m},{maxSize:e}).toBytes()}addInput(e,o){let r=this.inputs.length;return this.inputs.push(o),{Input:r,type:e,$kind:"Input"}}getInputUses(e,o){this.mapArguments((r,n)=>(r.$kind==="Input"&&r.Input===e&&o(r,n),r))}mapArguments(e){for(let o of this.commands)switch(o.$kind){case"MoveCall":o.MoveCall.arguments=o.MoveCall.arguments.map(n=>e(n,o));break;case"TransferObjects":o.TransferObjects.objects=o.TransferObjects.objects.map(n=>e(n,o)),o.TransferObjects.address=e(o.TransferObjects.address,o);break;case"SplitCoins":o.SplitCoins.coin=e(o.SplitCoins.coin,o),o.SplitCoins.amounts=o.SplitCoins.amounts.map(n=>e(n,o));break;case"MergeCoins":o.MergeCoins.destination=e(o.MergeCoins.destination,o),o.MergeCoins.sources=o.MergeCoins.sources.map(n=>e(n,o));break;case"MakeMoveVec":o.MakeMoveVec.elements=o.MakeMoveVec.elements.map(n=>e(n,o));break;case"Upgrade":o.Upgrade.ticket=e(o.Upgrade.ticket,o);break;case"$Intent":let r=o.$Intent.inputs;o.$Intent.inputs={};for(let[n,i]of Object.entries(r))o.$Intent.inputs[n]=Array.isArray(i)?i.map(l=>e(l,o)):e(i,o);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${o.$kind}`)}}replaceCommand(e,o){if(!Array.isArray(o)){this.commands[e]=o;return}let r=o.length-1;this.commands.splice(e,1,...o),r!==0&&this.mapArguments(n=>{switch(n.$kind){case"Result":n.Result>e&&(n.Result+=r);break;case"NestedResult":n.NestedResult[0]>e&&(n.NestedResult[0]+=r);break}return n})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(uo,this)}};s();a();function gi(t){if(typeof t=="string")return B(t);if(t.Object)return t.Object.ImmOrOwnedObject?B(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?B(t.Object.Receiving.objectId):B(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return B(t.UnresolvedObject.objectId)}var lc=t=>{throw TypeError(t)},xi=(t,e,o)=>e.has(t)||lc("Cannot "+o),R=(t,e,o)=>(xi(t,e,"read from private field"),o?o.call(t):e.get(t)),Po=(t,e,o)=>e.has(t)?lc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),jt=(t,e,o,r)=>(xi(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),at=(t,e,o)=>(xi(t,e,"access private method"),o),Mo,Do,_t,N,He,Hr,Ti,Si,vi;function sc(t,e=1/0){let o={$kind:"Result",Result:t},r=[],n=i=>r[i]??(r[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(o,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,l){if(l in i)return Reflect.get(i,l);if(l===Symbol.iterator)return function*(){let d=0;for(;d<e;)yield n(d),d++};if(typeof l=="symbol")return;let c=parseInt(l,10);if(!(Number.isNaN(c)||c<0))return n(c)}})}var cc=Symbol.for("@mysten/transaction");function qr(t){return!!t&&typeof t=="object"&&t[cc]===!0}var ac={buildPlugins:new Map,serializationPlugins:new Map},Ci=Symbol.for("@mysten/transaction/registry");function Bo(){try{let t=globalThis;return t[Ci]||(t[Ci]=ac),t[Ci]}catch{return ac}}var Zm=class wi{constructor(){Po(this,He),Po(this,Mo),Po(this,Do),Po(this,_t,new Map),Po(this,N),this.object=oc(o=>{if(typeof o=="function")return this.object(o(this));if(typeof o=="object"&&fo(q,o))return o;let r=gi(o),n=R(this,N).inputs.find(i=>r===gi(i));return n?.Object?.SharedObject&&typeof o=="object"&&o.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||o.Object.SharedObject.mutable),n?{$kind:"Input",Input:R(this,N).inputs.indexOf(n),type:"object"}:R(this,N).addInput("object",typeof o=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:B(o)}}:o)});let e=Bo();jt(this,N,new xt),jt(this,Do,[...e.buildPlugins.values()]),jt(this,Mo,[...e.serializationPlugins.values()])}static fromKind(e){let o=new wi;return jt(o,N,xt.fromKindBytes(typeof e=="string"?fe(e):e)),o}static from(e){let o=new wi;return qr(e)?jt(o,N,new xt(e.getData())):typeof e!="string"||!e.startsWith("{")?jt(o,N,xt.fromBytes(typeof e=="string"?fe(e):e)):jt(o,N,xt.restore(JSON.parse(e))),o}static registerGlobalSerializationPlugin(e,o){Bo().serializationPlugins.set(e,o??e)}static unregisterGlobalSerializationPlugin(e){Bo().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,o){Bo().buildPlugins.set(e,o??e)}static unregisterGlobalBuildPlugin(e){Bo().buildPlugins.delete(e)}addSerializationPlugin(e){R(this,Mo).push(e)}addBuildPlugin(e){R(this,Do).push(e)}addIntentResolver(e,o){if(R(this,_t).has(e)&&R(this,_t).get(e)!==o)throw new Error(`Intent resolver for ${e} already exists`);R(this,_t).set(e,o)}setSender(e){R(this,N).sender=e}setSenderIfNotSet(e){R(this,N).sender||(R(this,N).sender=e)}setExpiration(e){R(this,N).expiration=e?z(fi,e):null}setGasPrice(e){R(this,N).gasConfig.price=String(e)}setGasBudget(e){R(this,N).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){R(this,N).gasData.budget==null&&(R(this,N).gasConfig.budget=String(e))}setGasOwner(e){R(this,N).gasConfig.owner=e}setGasPayment(e){R(this,N).gasConfig.payment=e.map(o=>z($e,o))}get blockData(){return yi(R(this,N).snapshot())}getData(){return R(this,N).snapshot()}get[cc](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:rc(e=>io(e)?R(this,N).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):R(this,N).addInput("pure",fo(mi,e)?z(mi,e):e instanceof Uint8Array?Fe.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Fe.ObjectRef(...e))}receivingRef(...e){return this.object(Fe.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Fe.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let o=R(this,N).commands.push(e);return sc(o-1)}splitCoins(e,o){let r=wt.SplitCoins(typeof e=="string"?this.object(e):at(this,He,Ti).call(this,e),o.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):at(this,He,Hr).call(this,i))),n=R(this,N).commands.push(r);return sc(n-1,o.length)}mergeCoins(e,o){return this.add(wt.MergeCoins(this.object(e),o.map(r=>this.object(r))))}publish({modules:e,dependencies:o}){return this.add(wt.Publish({modules:e,dependencies:o}))}upgrade({modules:e,dependencies:o,package:r,ticket:n}){return this.add(wt.Upgrade({modules:e,dependencies:o,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...o}){return this.add(wt.MoveCall({...o,arguments:e?.map(r=>at(this,He,Hr).call(this,r))}))}transferObjects(e,o){return this.add(wt.TransferObjects(e.map(r=>this.object(r)),typeof o=="string"?this.pure.address(o):at(this,He,Hr).call(this,o)))}makeMoveVec({type:e,elements:o}){return this.add(wt.MakeMoveVec({type:e,elements:o.map(r=>this.object(r))}))}serialize(){return JSON.stringify(yi(R(this,N).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(Zl,R(this,N).snapshot()),(o,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){let{signer:o,...r}=e,n=await this.build(r);return o.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await at(this,He,Si).call(this,e),R(this,N).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await at(this,He,Si).call(this,e),R(this,N).getDigest()}async prepareForSerialization(e){let o=new Set;for(let n of R(this,N).commands)n.$Intent&&o.add(n.$Intent.name);let r=[...R(this,Mo)];for(let n of o)if(!e.supportedIntents?.includes(n)){if(!R(this,_t).has(n))throw new Error(`Missing intent resolver for ${n}`);r.push(R(this,_t).get(n))}await at(this,He,vi).call(this,r,e)}};Mo=new WeakMap;Do=new WeakMap;_t=new WeakMap;N=new WeakMap;He=new WeakSet;Hr=function(t){return io(t)?this.pure(t):at(this,He,Ti).call(this,t)};Ti=function(t){return typeof t=="function"?z(q,t(this)):z(q,t)};Si=async function(t){if(!t.onlyTransactionKind&&!R(this,N).sender)throw new Error("Missing transaction sender");await at(this,He,vi).call(this,[...R(this,Do),tc],t)};vi=async function(t,e){let o=r=>{if(r>=t.length)return()=>{};let n=t[r];return async()=>{let i=o(r+1),l=!1,c=!1;if(await n(R(this,N),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);l=!0,await i(),c=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!c)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await o(0)()};var Ei=Zm;var ef=Symbol.for("@mysten/SuiClient");var Ro=class{get[ef](){return!0}constructor(e){this.transport=e.transport??new Ar({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,o){return await this.transport.request({method:e,params:o})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!so(Se(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(r=>{if(!r||!so(Se(r)))throw new Error(`Invalid Sui Object id ${r}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Nr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(r=>{if(!Nr(r))throw new Error(`Invalid Transaction digest ${r}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:o,options:r,requestType:n}){let i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:K(e),Array.isArray(o)?o:[o],r]});if(n==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:o,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(o.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:l}=await o.signTransaction(n);return this.executeTransactionBlock({transactionBlock:l,signature:i,...r})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!ve(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(o=>{if(!o||!so(Se(o)))throw new Error(`Invalid Sui Stake id ${o}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let o;if(qr(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),o=K(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")o=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)o=K(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,o,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:K(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!so(Se(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),o=Ve(e.digest);return Xe(o.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...o}){let{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[o.address,o.cursor,o.limit]});return{hasNextPage:n,nextCursor:r,data:i.map(l=>_l(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:o=60*1e3,pollInterval:r=2*1e3,...n}){let i=AbortSignal.timeout(o),l=new Promise((c,d)=>{i.addEventListener("abort",()=>d(i.reason))});for(l.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch{await Promise.race([new Promise(d=>setTimeout(d,r)),l])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var uc=async({chain:t,owner:e,chainData:o},{recipient:r})=>{let n=t.id,{objectId:i}=o,l=j.getRpcProxyUrl(n);if(!i)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let c=new Ro({url:l}),d=new Ei;d.setSender(e),d.transferObjects([i],r);let p=await d.build({client:c});return{networkID:n,transaction:p}};async function dc(t,e,o){let{chain:r}=t,n=r.id;return j.isSolanaNetworkID(n)?fl(t,e):j.isEVMNetworkID(n)?cl(t,e):j.isSuiNetworkID(n)?uc(t,e):j.isBitcoinNetworkID(n)?nl(t,e,o):ji(n)}var tf="collectible-transfer-tx",of=Z({seconds:30});function rf(t){return t&&!t.isNaN()}function nf(t){let{collectible:e,sendFormValues:o}=t??{},{chain:r,owner:n}=e??{},{id:i}=r??{},{recipient:l,amountAsset:c}=o??{},d=Ps(l,i)??"",p=c?.isNaN()?void 0:c,m=rf(p),{data:h}=Go({address:n,networkID:i}),{data:g}=Os(h),{data:y}=vs({networkID:i,enableFallback:!0}),C=sf(i,y,g,h),S=C?.sendContextRequired?C.sendContext:void 0;return ne({staleTime:of,enabled:m&&!!e&&!!t&&!!C,queryKey:P.transferTransaction({collectible:e,sendFormValues:o,sendContext:S}),async queryFn(){try{if(!e||!o||!C)throw new Error("Missing required data to construct fungible transfer transaction");return await dc(e,{...o,recipient:d},S)}catch(T){if(ut(T)){let k=T.response?.status;pt(T,k,tf)}throw T}}})}function sf(t,e,o,r){if(t)return j.isBitcoinNetworkID(t)?!e||!o||!r?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:o,chainAddress:r}}:{sendContextRequired:!1}}s();a();var Gr=t=>{let e=ee();return ne({enabled:t.length!==0,queryKey:P.hiddenCollections(t),gcTime:De.Long,staleTime:1/0,async queryFn(){try{let o=await Ze(e,t);return Array.from(o.values()).filter(r=>rr(r,{spamStatus:"NOT_VERIFIED"})).map(({id:r})=>r)}catch(o){return o instanceof Error&&Y.captureError(o,"collectibles"),[]}}})};s();a();s();a();var pc=v(O());var af=t=>{let e=re();return(0,pc.useCallback)(()=>e.invalidateQueries({queryKey:P.collections(t)}),[e,t])};s();a();var lf=2e3,Wr=class extends Ie{constructor(e){super(e),this.name="UsePinCollectionError"}};function Kr(){let t=ee(),e=re();return Pe({async mutationFn({collectionId:o,accountId:r,pinned:n}){let i=await sr(t)??{},l=i[r]??[];if(n){if(Object.values(i).flat().length+1>lf)throw new Wr("Pinned limit reached");let d=[...new Set([...l,o])],p={...i,[r]:d};await Cn(t,p)}else{let c=l.indexOf(o);if(c===-1)throw new Wr("Collection not previously pinned");let d=[...l];d.splice(c,1);let p={...i,[r]:d};await Cn(t,p)}},async onSuccess(o,r){await e.invalidateQueries({queryKey:P.pinnedCollections(r.accountId)})}})}s();a();var mc=v(O());var cf=t=>{let e=re();return(0,mc.useCallback)(()=>e.refetchQueries({queryKey:P.collections(t)}),[e,t])};s();a();s();a();var uf=new Error("Failed to report event for collectible");async function fc(t){try{let e=await ye.api().post("/collectibles/v1/events",{events:t});if(!Ri(e))throw new Error}catch{throw uf}}function hc(){return Pe({async mutationFn({event:t}){try{await fc([t])}catch{}}})}s();a();function df(){let{data:t}=Yi(),e=ee(),o=re(),r=Us(),n=Ht();return Pe({mutationFn:async({multichainTransaction:l,pendingTransactionInput:c,senderAddress:d,optimisticUpdate:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:h}=l,g=await Jo.get(h).onBeforeSend({multichainTransaction:l,gasEstimation:m}),y=await Ss({accountIdentifier:t,accountSigner:n,multichainTransaction:g,networkID:h,pendingTransactionInput:c,senderAddress:d,storage:e,utxoManager:r});return p&&Xt(o,p),Cs(h,y)},onError(l){l instanceof Error&&Y.captureError(l,"collectibles")}})}s();a();var Qr=t=>{let e=ee();return ne({enabled:t.length!==0,queryKey:P.unhiddenCollections(t),gcTime:De.Long,staleTime:1/0,async queryFn(){try{let o=await Ze(e,t);return Array.from(o.values()).filter(r=>Ts(r,{spamStatus:"NOT_VERIFIED"})).map(({id:r})=>r)}catch(o){return o instanceof Error&&Y.captureError(o,"collectibles"),[]}}})};s();a();var pf=2e3,Ai=class extends Error{constructor(e){super(e),this.name="UseUnhideCollectionError"}};function Xr(){let t=ee(),e=re(),o=ie();return Pe({async mutationFn(r){let{collectionId:n,accountId:i}=r,l=await sn(t);if(!(await Ze(t,i)).has(n)&&l>=pf)throw new Ai("Too many ids unhidden");await bo(t,o,{accountId:i,mutations:[{id:n,visibility:"visible"}]})},async onSuccess(r,n){await e.invalidateQueries({queryKey:P.unhiddenCollections(n.accountId)}),await e.invalidateQueries({queryKey:P.hiddenCollections(n.accountId)})}})}s();a();var Lt=v(O());s();a();var Ii=v(O());var bc=({toast:t,accountId:e})=>{let{t:o}=Q(),r=ie(),n=(0,Ii.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&r.capture("collectiblesReportAsNotSpam",{data:mt(l)}),t.success(c==="visible"?o("collectiblesNotSpamSuccess"):o("collectiblesNotSpamAndUnhiddenSuccess"))},[o,t,r]),i=(0,Ii.useCallback)((l,c)=>{t.error(o("collectiblesNotSpamFail"))},[o,t]);return oa({accountId:e,onSuccess:n,onError:i})};s();a();var Ui=v(O());var yc=({toast:t,accountId:e})=>{let{t:o}=Q(),r=ie(),n=(0,Ui.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&r.capture("collectiblesReportAsSpam",{data:mt(l)}),t.success(c==="hidden"?o("collectiblesSpamSuccess"):o("collectiblesSpamAndHiddenSuccess"))},[o,t,r]),i=(0,Ui.useCallback)((l,c)=>{t.error(o("collectiblesSpamFail"))},[o,t]);return ta({accountId:e,onSuccess:n,onError:i})};function mf({accountId:t,collectible:e,toast:o}){let r=yc({collectible:e,accountId:t,toast:o}),n=(0,Lt.useCallback)(()=>{if(e)return r(e)},[r,e]),i=bc({collectible:e,accountId:t,toast:o}),l=(0,Lt.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Ce(t??""),d=(0,Lt.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,Lt.useMemo)(()=>e?xs(d,{spamStatus:e.collection.spamStatus}):"NOT_VERIFIED",[e,d]),m=yo(p);return(0,Lt.useMemo)(()=>({isSpam:m,spamStatus:p,onReportSpam:m?void 0:n,onReportNotSpam:m?l:void 0}),[p,m,n,l])}s();a();var gc=v(tn()),Cc=v(O());s();a();var Yr=(t,e)=>{let o=new po(t);if(o.isZero())return"0";let r=Lo(-e);return o.abs().lt(r)?o.isPositive()?`<${r.toFixed()}`:`-<${r.toFixed()}`:parseFloat(o.toString()).toLocaleString("en-US",{maximumFractionDigits:e})};var ff=(t,e)=>{let{t:o}=Q();return(0,Cc.useMemo)(()=>{let n=[];if(!t)return n;let i=t?.chain.id,l=kt.get(i).collectibleDetailPrecision;t.collection.name&&n.push({label:o("collectibleScreenCollectionLabel"),value:t.collection.name});let c,d;if(t.collection.floorPrice){let{price:h,token:g}=t.collection.floorPrice;if(g&&g.decimals&&g.symbol){let{decimals:y,symbol:C}=g,S=Yt(h,y);n.push({label:o("collectiblesFloorPrice"),value:`${Yr(S,l)} ${C}`}),c=S,d=C}}let p,m;if(t.lastSalePrice){let{price:h,token:g}=t.lastSalePrice;if(g&&g.decimals&&(g.symbol||g.name)){let{decimals:y,symbol:C,name:S}=g,T=Yt(h,y);n.push({label:o("collectiblesLastSalePrice"),value:`${Yr(T,l)} ${C??S}`}),p=T,m=C}}if(c&&p&&d===m){let h=c-p;n.push({label:o("collectiblesTotalReturn"),value:`${Yr(h,l)} ${m}`,color:h>0?e?.positiveColor:h===0?void 0:e?.negativeColor})}return t.collection.ownerCount&&n.push({label:o("collectiblesUniqueHolders"),value:(0,gc.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({label:o("sendFungibleSummaryNetwork"),value:j.getNetworkName(t.chain.id)}),jo()&&n.push({label:"Standard",value:hf(t)}),Ms(t)&&n.push({label:o("collectiblesNonTransferable"),value:o("collectiblesNonTransferableYes")}),n},[t,e?.negativeColor,e?.positiveColor,o])};function hf(t){let e=t.chainData;if(le(e))return e.standard;if(Be(e))return e.standard;if(Ge(e))return"Ordinals"}s();a();var wc=v(O());s();a();var bf=v(O());s();a();var yf=v(O());s();a();var Sc=v(O()),Jr=(t,e,o,r)=>(0,Sc.useMemo)(()=>e.includes(o)?!1:t.includes(o)?!0:!!r,[t,e,o,r]);s();a();var No=v(O());s();a();var xc=v(O()),Oi=({accountId:t,collectionId:e,isPinned:o,pinMessages:r,pinCollection:n,toast:i,sendAnalyticEvent:l,unhideCollection:c,isHidden:d})=>(0,xc.useCallback)(()=>{(async()=>{if(!e||!t){i.error(o?r.unpinFail:r.pinFail);return}try{await n({collectionId:e,accountId:t,pinned:!o}),d&&!o&&await c({collectionId:e,accountId:t}),i.success(o?r.unpinSuccess:r.pinSuccess),l&&l(o?"collectionUnpinned":"collectionPinned")}catch{i.error(o?r.unpinFail:r.pinFail)}})()},[e,t,o,r,n,i,l,c,d]);var wf=({collectionId:t,isSpam:e,accountId:o,networkId:r,toast:n})=>{let{t:i}=Q(),l=ie(),{mutateAsync:c}=Xr(),{data:d=[]}=Gr(o||""),{data:p=[]}=Qr(o||""),m=Jr(d,p,t??"",!!e),{mutateAsync:h}=Kr(),{data:g=[]}=ar(o||""),y=ur(g,t??""),C=(0,No.useMemo)(()=>({pinSuccess:i("collectionPinSuccess"),pinFail:i("collectionPinFail"),unpinSuccess:i("collectionUnpinSuccess"),unpinFail:i("collectionUnpinFail")}),[i]),S=(0,No.useCallback)(k=>{r&&l.capture(k,{data:{networkId:r,chainId:j.getChainID(r)}})},[l,r]),T=Oi({accountId:o,collectionId:t,isPinned:y,pinMessages:C,pinCollection:h,toast:n,sendAnalyticEvent:S,unhideCollection:c,isHidden:m});return(0,No.useMemo)(()=>({isPinned:y,onTogglePin:T}),[y,T])};s();a();var Vo=v(O());var xf=({networkID:t,isTxError:e,isTxConfirmed:o,isTxSubmitted:r})=>{let n=kt.get(t).sendSuccessCondition,i=(0,Vo.useMemo)(()=>e?"ERROR":n==="SUBMISSION"&&r||n==="CONFIRMATION"&&o?"SUCCESS":"LOADING",[o,e,r,n]),l=n==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",c=(0,Vo.useMemo)(()=>{switch(i){case"LOADING":return xe.t("sendStatusLoadingTitle");case"ERROR":return xe.t("sendStatusErrorTitle");case"SUCCESS":return xe.t(l)}},[i,l]),{isError:d,isSuccess:p}=(0,Vo.useMemo)(()=>({isError:i==="ERROR",isSuccess:i==="SUCCESS"}),[i]),{transactionSpeed:m="standard"}=Bs(g=>g.sendFormValues),h=(0,Vo.useMemo)(()=>{let g=Jo.get(t).transactionSpeedDescription(m);return g?xe.t(g):""},[t,m]);return{title:c,isError:d,isSuccess:p,sendSuccessCondition:n,estimatedTime:h}};s();a();var Ac=v(O());s();a();var Tc={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},ki=Wo(t=>({...Tc,reset:()=>t({...Tc}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})}));s();a();var Ic=v(O());s();a();var Uc=v(O());s();a();var Oc=v(O()),vf=t=>(0,Oc.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]);s();a();var kc=v(O());var Ef=(t,e)=>(0,kc.useMemo)(()=>{if(!t||!e)return;let o=t.chain.id,r=e.explorers[o]??Ji.get(o).defaultExplorer,n,i;if(le(t.chainData))i="address",n=t.chainData.mint;else if(Be(t.chainData))if(t.chainData.contract)t.chainData.id?(i="nft",n=[t.chainData.contract,t.chainData.id]):(i="token",n=t.chainData.contract);else return;else if(Ge(t.chainData))if(Qt(t.chainData)){let{hash:c,index:d}=t.chainData.utxoDetails;i="transaction",n=`${c}#flow=&vout=${d}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if($s(t.chainData))i="nft",n=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!n)return;let l=es({networkID:o,endpoint:i,explorerType:r,param:n});if(l)return{name:Zi[r],url:l}},[t,e]);s();a();var Pc=v(O()),Af=t=>(0,Pc.useMemo)(()=>{let e=new Set;return t.filter(o=>{if(!o?.media?.image?.url)return!1;let{url:r}=o.media.image;return e.has(r)?!1:(e.add(r),!0)})},[t]);s();a();var Bc=v(O());var If=t=>{let{t:e}=Q();return(0,Bc.useMemo)(()=>{let r=[];if(!t)return;let n=t.chainData;if(Ge(n)){let{outputValue:i,satNumber:l,satName:c,inscriptionId:d,inscriptionNumber:p,protocolName:m,createdAt:h,utxoDetails:g}=n,y=e(d?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),C;return i?C=parseFloat(i).toLocaleString("en-US"):g&&(C=g.value.toLocaleString("en-US")),r.push(C?{label:e("collectibleDetailSatsInUtxo"),value:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:C})??void 0}:null),r.push(l?{label:e("collectibleDetailSatNumber"),value:l}:null),r.push(c?{label:e("collectibleDetailSatName"),value:c}:null),r.push(d?{label:e("collectibleDetailInscriptionId"),value:Li(d,5,3)}:null),r.push(p?{label:e("collectibleDetailInscriptionNumber"),value:p}:null),r.push(m?{label:e("collectibleDetailStandard"),value:m?.toUpperCase()}:null),r.push(h?{label:e("collectibleDetailCreated"),value:Uf(new Date(h))}:null),{label:y,items:r.filter(Ni)}}},[t,e])};function Uf(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),o=t.toLocaleTimeString();return`${e} ${o}`}s();a();var Dc=v(O()),Tt=()=>{},Mc=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function Of(t){let{amountToBurn:e=0,explorerName:o,isBurnable:r,isHidden:n,isPinned:i,isSpam:l,onBurnToken:c,onReportNotSpam:d,onReportSpam:p,onSaveToLibrary:m,onSend:h,onSetAsAvatar:g,onShare:y,onToggleHide:C,onTogglePin:S,onViewOnExplorer:T,shortcuts:k,shouldDisplaySend:L,shouldDisplayShortcuts:$}=t,{t:A}=Q();return(0,Dc.useMemo)(()=>{let te=[];if(L&&te.push({text:A("commandSend"),type:"send",onClick:h??Tt}),m&&te.push({text:A("assetDetailSaveToPhotos"),singleWordAltText:A("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:m??Tt}),g&&!l&&te.push({text:A("collectibleDetailSetAsAvatar"),singleWordAltText:A("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:g??Tt}),y&&te.push({text:A("collectibleDetailShare"),singleWordAltText:A("commandShare"),type:"share",menuOnly:!0,onClick:y??Tt}),S){let oe=A(i?"assetDetailUnpinCollection":"assetDetailPinCollection"),X=A(i?"commandUnpin":"commandPin"),Ae=i?"unpin":"pin";te.push({text:oe,singleWordAltText:X,type:Ae,menuOnly:!0,onClick:S??Tt})}if(C){let oe=A(n?"assetDetailUnhideCollection":"assetDetailHideCollection"),X=A(n?"commandUnhide":"commandHide"),Ae=n?"unhide":"hide";te.push({text:oe,singleWordAltText:X,type:Ae,menuOnly:!0,onClick:C??Tt})}if(d){let oe=A("collectiblesReportAsNotSpam");te.push({text:oe,type:"reportAsNotSpam",singleWordAltText:A("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:d})}if(p){let oe=A("collectiblesReportAsSpam");te.push({text:oe,type:"reportAsSpam",singleWordAltText:A("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(r){let oe=A(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");te.push({text:oe,singleWordAltText:A("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:c??Tt})}return!!T&&!!o&&te.push({text:A("assetDetailViewOnExplorer",{explorer:o}),singleWordAltText:A("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:T??Tt}),te.sort((oe,X)=>(Mc.get(oe.type)??100)-(Mc.get(X.type)??100)),{actions:Ns(te,4),shortcuts:$?k:[]}},[e,o,r,n,i,l,c,d,p,m,h,g,y,C,S,T,k,L,$,A])}s();a();export{Wc as a,ir as b,Jf as c,Fs as d,Zf as e,uu as f,Fd as g,le as h,Be as i,Ge as j,$s as k,Qt as l,Gd as m,ul as n,nf as o,It as p,fu as q,af as r,ar as s,cf as t,hc as u,df as v,hu as w,bu as x,yu as y,ca as z,mf as A,ff as B,gu as C,ur as D,wy as E,ma as F,zu as G,Xu as H,Ju as I,ud as J,hd as K,bd as L,gd as M,Sd as N,wd as O,vd as P,wf as Q,xf as R,kd as S,Pd as T,Rd as U,Nd as V,Vd as W,vf as X,Ef as Y,Af as Z,If as _,Of as $,jd as aa};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-KDJQAYSI.js.map
