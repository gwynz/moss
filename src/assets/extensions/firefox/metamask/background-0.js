LavaPack.loadBundle([[10,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerControllerInit=void 0;var r=e("@metamask/assets-controllers");n.AccountTrackerControllerInit=({controllerMessenger:e,initMessenger:t,getController:n})=>{const s=()=>n("OnboardingController");return{persistedStateKey:null,memStateKey:null,controller:new r.AccountTrackerController({messenger:e,getStakedBalanceForChain:(e,t)=>n("AssetsContractController").getStakedBalanceForChain(e,t),includeStakedAssets:!1,allowExternalServices:()=>{const{useExternalServices:e}=t.call("PreferencesController:getState");return e},accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},fetchingEnabled:()=>s().state.completedOnboarding,isOnboarded:()=>{const{completedOnboarding:e}=s().state;return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/account-tracker-controller-init.ts"}],[100,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGatorPermissionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"GatorPermissionsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:has"],events:["TransactionController:transactionApproved","TransactionController:transactionRejected","TransactionController:transactionConfirmed","TransactionController:transactionFailed","TransactionController:transactionDropped"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gator-permissions/gator-permissions-controller-messenger.ts"}],[1e3,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.listen=n.LocalTracer=n.trace=n.log=void 0;let r=0;const s=[];n.log=(e,t,n)=>{const s={type:e,id:String(++r),date:new Date};t&&(s.message=t),n&&(s.data=n),i(s)};n.trace=({type:e,message:t,data:n,context:s})=>{const o={type:e,id:String(++r),date:new Date};t&&(o.message=t),n&&(o.data=n),s&&(o.context=s),i(o)};class o{constructor(e,t){this.type=e,this.context=t}trace(e,t){(0,n.trace)({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new o(e,this.context)}withContext(e){return new o(this.type,e)}withUpdatedContext(e){return new o(this.type,Object.assign(Object.assign({},this.context),e))}}n.LocalTracer=o;function i(e){for(let t=0;t<s.length;t++)try{s[t](e)}catch(e){console.error(e)}}n.listen=e=>(s.push(e),()=>{const t=s.indexOf(e);-1!==t&&(s[t]=s[s.length-1],s.pop())}),"undefined"!=typeof window&&(window.__ledgerLogsListen=n.listen)}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/logs",file:"node_modules/@ledgerhq/logs/lib/index.js"}],[101,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAuthenticationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId"]}),t},n.getAuthenticationControllerMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest"],events:["KeyringController:lock","KeyringController:unlock"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/authentication-controller-messenger.ts"}],[102,{"./authentication-controller-messenger":101,"./user-storage-controller-messenger":103},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAuthenticationControllerInitMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerInitMessenger}}),Object.defineProperty(n,"getAuthenticationControllerMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerMessenger}}),Object.defineProperty(n,"getUserStorageControllerMessenger",{enumerable:!0,get:function(){return s.getUserStorageControllerMessenger}});var r=e("./authentication-controller-messenger"),s=e("./user-storage-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/index.ts"}],[103,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserStorageControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getUserStorageControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest","AuthenticationController:getBearerToken","AuthenticationController:getSessionProfile","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","AddressBookController:list","AddressBookController:set","AddressBookController:delete"],events:["KeyringController:lock","KeyringController:unlock","AddressBookController:contactUpdated","AddressBookController:contactDeleted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/user-storage-controller-messenger.ts"}],[104,{"./account-order-controller-messenger":59,"./account-tracker-controller-messenger":60,"./accounts":63,"./accounts-controller-messenger":61,"./accounts/institutional-snap-controller-messenger":64,"./address-book-controller-messenger":67,"./alert-controller-messenger":68,"./announcement-controller-messenger":69,"./app-metadata-controller-messenger":70,"./app-state-controller-messenger":71,"./approval-controller-messenger":72,"./assets":74,"./bridge-controller-messenger":80,"./bridge-status-controller-messenger":81,"./claims/claims-controller-messenger":82,"./claims/claims-service-messenger":83,"./connectivity":85,"./core-backend":88,"./currency-rate-controller-messenger":89,"./decrypt-message-controller-messenger":90,"./decrypt-message-manager-messenger":91,"./defi-positions":93,"./defi-positions/defi-positions-controller-messenger":92,"./delegation/delegation-controller-messenger":94,"./encryption-public-key-controller-messenger":95,"./encryption-public-key-manager-messenger":96,"./ens-controller-messenger":97,"./error-reporting-service-messenger":98,"./gas-fee-controller-messenger":99,"./gator-permissions/gator-permissions-controller-messenger":100,"./identity":102,"./identity/user-storage-controller-messenger":103,"./keyring-controller-messenger":105,"./logging-controller-messenger":106,"./metametrics-controller-messenger":107,"./metametrics-data-deletion-controller-messenger":108,"./multichain":109,"./name-controller-messenger":115,"./network-controller-messenger":116,"./notifications":117,"./onboarding-controller-messenger":120,"./permission-controller-messenger":121,"./permission-log-controller-messenger":122,"./phishing-controller-messenger":123,"./ppom-controller-messenger":124,"./preferences-controller-messenger":125,"./profile-metrics-controller-messenger":126,"./profile-metrics-service-messenger":127,"./rates-controller-messenger":128,"./remote-feature-flag-controller-messenger":129,"./reward-data-service-messenger":130,"./rewards-controller-messenger":131,"./seedless-onboarding":132,"./selected-network-controller-messenger":135,"./shield/shield-controller-messenger":136,"./signature-controller-messenger":137,"./smart-transactions-controller-messenger":138,"./snaps":141,"./storage-service-messenger":150,"./subject-metadata-controller-messenger":151,"./subscription":152,"./subscription/subscription-service-messenger":154,"./swaps-controller-messenger":155,"./token-balances-controller-messenger":156,"./token-detection-controller-messenger":157,"./token-list-controller-messenger":158,"./tokens-controller-messenger":159,"./transaction-controller-messenger":160,"./transaction-pay-controller-messenger":161,"./user-operation-controller-messenger":162,lodash:4940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CONTROLLER_MESSENGERS=void 0,Object.defineProperty(n,"getAccountOrderControllerMessenger",{enumerable:!0,get:function(){return X.getAccountOrderControllerMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerInitMessenger",{enumerable:!0,get:function(){return R.getAccountTrackerControllerInitMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerMessenger",{enumerable:!0,get:function(){return R.getAccountTrackerControllerMessenger}}),Object.defineProperty(n,"getAccountsControllerMessenger",{enumerable:!0,get:function(){return Z.getAccountsControllerMessenger}}),Object.defineProperty(n,"getAddressBookControllerMessenger",{enumerable:!0,get:function(){return ae.getAddressBookControllerMessenger}}),Object.defineProperty(n,"getAlertControllerMessenger",{enumerable:!0,get:function(){return te.getAlertControllerMessenger}}),Object.defineProperty(n,"getAnnouncementControllerMessenger",{enumerable:!0,get:function(){return Q.getAnnouncementControllerMessenger}}),Object.defineProperty(n,"getAppMetadataControllerMessenger",{enumerable:!0,get:function(){return se.getAppMetadataControllerMessenger}}),Object.defineProperty(n,"getAppStateControllerMessenger",{enumerable:!0,get:function(){return W.getAppStateControllerMessenger}}),Object.defineProperty(n,"getApprovalControllerMessenger",{enumerable:!0,get:function(){return ie.getApprovalControllerMessenger}}),Object.defineProperty(n,"getBridgeControllerInitMessenger",{enumerable:!0,get:function(){return $.getBridgeControllerInitMessenger}}),Object.defineProperty(n,"getBridgeControllerMessenger",{enumerable:!0,get:function(){return $.getBridgeControllerMessenger}}),Object.defineProperty(n,"getBridgeStatusControllerMessenger",{enumerable:!0,get:function(){return K.getBridgeStatusControllerMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerInitMessenger",{enumerable:!0,get:function(){return O.getCurrencyRateControllerInitMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerMessenger",{enumerable:!0,get:function(){return O.getCurrencyRateControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerInitMessenger",{enumerable:!0,get:function(){return ce.getDecryptMessageControllerInitMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerMessenger",{enumerable:!0,get:function(){return ce.getDecryptMessageControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageManagerMessenger",{enumerable:!0,get:function(){return le.getDecryptMessageManagerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerInitMessenger",{enumerable:!0,get:function(){return ue.getEncryptionPublicKeyControllerInitMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerMessenger",{enumerable:!0,get:function(){return ue.getEncryptionPublicKeyControllerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyManagerMessenger",{enumerable:!0,get:function(){return de.getEncryptionPublicKeyManagerMessenger}}),Object.defineProperty(n,"getEnsControllerInitMessenger",{enumerable:!0,get:function(){return j.getEnsControllerInitMessenger}}),Object.defineProperty(n,"getEnsControllerMessenger",{enumerable:!0,get:function(){return j.getEnsControllerMessenger}}),Object.defineProperty(n,"getErrorReportingServiceMessenger",{enumerable:!0,get:function(){return oe.getErrorReportingServiceMessenger}}),Object.defineProperty(n,"getGasFeeControllerInitMessenger",{enumerable:!0,get:function(){return N.getGasFeeControllerInitMessenger}}),Object.defineProperty(n,"getGasFeeControllerMessenger",{enumerable:!0,get:function(){return N.getGasFeeControllerMessenger}}),Object.defineProperty(n,"getKeyringControllerInitMessenger",{enumerable:!0,get:function(){return V.getKeyringControllerInitMessenger}}),Object.defineProperty(n,"getKeyringControllerMessenger",{enumerable:!0,get:function(){return V.getKeyringControllerMessenger}}),Object.defineProperty(n,"getLoggingControllerMessenger",{enumerable:!0,get:function(){return re.getLoggingControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsControllerMessenger",{enumerable:!0,get:function(){return S.getMetaMetricsControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsDataDeletionControllerMessenger",{enumerable:!0,get:function(){return ne.getMetaMetricsDataDeletionControllerMessenger}}),Object.defineProperty(n,"getNameControllerInitMessenger",{enumerable:!0,get:function(){return D.getNameControllerInitMessenger}}),Object.defineProperty(n,"getNameControllerMessenger",{enumerable:!0,get:function(){return D.getNameControllerMessenger}}),Object.defineProperty(n,"getNetworkControllerInitMessenger",{enumerable:!0,get:function(){return Y.getNetworkControllerInitMessenger}}),Object.defineProperty(n,"getNetworkControllerMessenger",{enumerable:!0,get:function(){return Y.getNetworkControllerMessenger}}),Object.defineProperty(n,"getOnboardingControllerMessenger",{enumerable:!0,get:function(){return F.getOnboardingControllerMessenger}}),Object.defineProperty(n,"getPermissionControllerInitMessenger",{enumerable:!0,get:function(){return H.getPermissionControllerInitMessenger}}),Object.defineProperty(n,"getPermissionControllerMessenger",{enumerable:!0,get:function(){return H.getPermissionControllerMessenger}}),Object.defineProperty(n,"getPermissionLogControllerMessenger",{enumerable:!0,get:function(){return z.getPermissionLogControllerMessenger}}),Object.defineProperty(n,"getPhishingControllerMessenger",{enumerable:!0,get:function(){return ee.getPhishingControllerMessenger}}),Object.defineProperty(n,"getPreferencesControllerMessenger",{enumerable:!0,get:function(){return G.getPreferencesControllerMessenger}}),Object.defineProperty(n,"getProfileMetricsControllerMessenger",{enumerable:!0,get:function(){return be.getProfileMetricsControllerMessenger}}),Object.defineProperty(n,"getProfileMetricsServiceMessenger",{enumerable:!0,get:function(){return Ce.getProfileMetricsServiceMessenger}}),Object.defineProperty(n,"getRatesControllerMessenger",{enumerable:!0,get:function(){return _.getRatesControllerMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerInitMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerInitMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerMessenger}}),Object.defineProperty(n,"getRewardsControllerMessenger",{enumerable:!0,get:function(){return L.getRewardsControllerMessenger}}),Object.defineProperty(n,"getSelectedNetworkControllerMessenger",{enumerable:!0,get:function(){return B.getSelectedNetworkControllerMessenger}}),Object.defineProperty(n,"getSignatureControllerInitMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerInitMessenger}}),Object.defineProperty(n,"getSignatureControllerMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerMessenger}}),Object.defineProperty(n,"getStorageServiceMessenger",{enumerable:!0,get:function(){return ye.getStorageServiceMessenger}}),Object.defineProperty(n,"getSubjectMetadataControllerMessenger",{enumerable:!0,get:function(){return q.getSubjectMetadataControllerMessenger}}),Object.defineProperty(n,"getSwapsControllerInitMessenger",{enumerable:!0,get:function(){return U.getSwapsControllerInitMessenger}}),Object.defineProperty(n,"getSwapsControllerMessenger",{enumerable:!0,get:function(){return U.getSwapsControllerMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerInitMessenger",{enumerable:!0,get:function(){return E.getTokenBalancesControllerInitMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerMessenger",{enumerable:!0,get:function(){return E.getTokenBalancesControllerMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerInitMessenger",{enumerable:!0,get:function(){return A.getTokenDetectionControllerInitMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerMessenger",{enumerable:!0,get:function(){return A.getTokenDetectionControllerMessenger}}),Object.defineProperty(n,"getTokenListControllerInitMessenger",{enumerable:!0,get:function(){return T.getTokenListControllerInitMessenger}}),Object.defineProperty(n,"getTokenListControllerMessenger",{enumerable:!0,get:function(){return T.getTokenListControllerMessenger}}),Object.defineProperty(n,"getTokensControllerInitMessenger",{enumerable:!0,get:function(){return P.getTokensControllerInitMessenger}}),Object.defineProperty(n,"getTokensControllerMessenger",{enumerable:!0,get:function(){return P.getTokensControllerMessenger}}),Object.defineProperty(n,"getTransactionPayControllerInitMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerInitMessenger}}),Object.defineProperty(n,"getTransactionPayControllerMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerMessenger}}),Object.defineProperty(n,"getUserOperationControllerInitMessenger",{enumerable:!0,get:function(){return pe.getUserOperationControllerInitMessenger}}),Object.defineProperty(n,"getUserOperationControllerMessenger",{enumerable:!0,get:function(){return pe.getUserOperationControllerMessenger}});var r=e("lodash"),s=e("./ppom-controller-messenger"),o=e("./snaps"),i=e("./transaction-controller-messenger"),a=e("./transaction-pay-controller-messenger"),l=e("./core-backend"),c=e("./multichain"),u=e("./accounts/institutional-snap-controller-messenger"),d=e("./identity"),g=e("./assets"),p=e("./notifications"),h=e("./defi-positions"),m=e("./defi-positions/defi-positions-controller-messenger"),f=e("./delegation/delegation-controller-messenger"),b=e("./accounts"),C=e("./seedless-onboarding"),y=e("./smart-transactions-controller-messenger"),w=e("./shield/shield-controller-messenger"),v=e("./subscription"),M=e("./connectivity"),k=e("./gator-permissions/gator-permissions-controller-messenger"),S=e("./metametrics-controller-messenger"),I=e("./identity/user-storage-controller-messenger"),T=e("./token-list-controller-messenger"),A=e("./token-detection-controller-messenger"),P=e("./tokens-controller-messenger"),E=e("./token-balances-controller-messenger"),_=e("./rates-controller-messenger"),O=e("./currency-rate-controller-messenger"),j=e("./ens-controller-messenger"),D=e("./name-controller-messenger"),N=e("./gas-fee-controller-messenger"),B=e("./selected-network-controller-messenger"),R=e("./account-tracker-controller-messenger"),F=e("./onboarding-controller-messenger"),x=e("./remote-feature-flag-controller-messenger"),L=e("./rewards-controller-messenger"),U=e("./swaps-controller-messenger"),$=e("./bridge-controller-messenger"),K=e("./bridge-status-controller-messenger"),G=e("./preferences-controller-messenger"),W=e("./app-state-controller-messenger"),H=e("./permission-controller-messenger"),q=e("./subject-metadata-controller-messenger"),V=e("./keyring-controller-messenger"),z=e("./permission-log-controller-messenger"),Y=e("./network-controller-messenger"),J=e("./subscription/subscription-service-messenger"),Q=e("./announcement-controller-messenger"),X=e("./account-order-controller-messenger"),Z=e("./accounts-controller-messenger"),ee=e("./phishing-controller-messenger"),te=e("./alert-controller-messenger"),ne=e("./metametrics-data-deletion-controller-messenger"),re=e("./logging-controller-messenger"),se=e("./app-metadata-controller-messenger"),oe=e("./error-reporting-service-messenger"),ie=e("./approval-controller-messenger"),ae=e("./address-book-controller-messenger"),le=e("./decrypt-message-manager-messenger"),ce=e("./decrypt-message-controller-messenger"),ue=e("./encryption-public-key-controller-messenger"),de=e("./encryption-public-key-manager-messenger"),ge=e("./signature-controller-messenger"),pe=e("./user-operation-controller-messenger"),he=e("./reward-data-service-messenger"),me=e("./claims/claims-controller-messenger"),fe=e("./claims/claims-service-messenger"),be=e("./profile-metrics-controller-messenger"),Ce=e("./profile-metrics-service-messenger"),ye=e("./storage-service-messenger");n.CONTROLLER_MESSENGERS={AccountOrderController:{getMessenger:X.getAccountOrderControllerMessenger,getInitMessenger:r.noop},AccountTrackerController:{getMessenger:R.getAccountTrackerControllerMessenger,getInitMessenger:R.getAccountTrackerControllerInitMessenger},AccountsController:{getMessenger:Z.getAccountsControllerMessenger,getInitMessenger:r.noop},AddressBookController:{getMessenger:ae.getAddressBookControllerMessenger,getInitMessenger:r.noop},AlertController:{getMessenger:te.getAlertControllerMessenger,getInitMessenger:r.noop},AnnouncementController:{getMessenger:Q.getAnnouncementControllerMessenger,getInitMessenger:r.noop},AppMetadataController:{getMessenger:se.getAppMetadataControllerMessenger,getInitMessenger:r.noop},ApprovalController:{getMessenger:ie.getApprovalControllerMessenger,getInitMessenger:r.noop},AppStateController:{getMessenger:W.getAppStateControllerMessenger,getInitMessenger:r.noop},AuthenticationController:{getMessenger:d.getAuthenticationControllerMessenger,getInitMessenger:d.getAuthenticationControllerInitMessenger},BridgeController:{getMessenger:$.getBridgeControllerMessenger,getInitMessenger:$.getBridgeControllerInitMessenger},BridgeStatusController:{getMessenger:K.getBridgeStatusControllerMessenger,getInitMessenger:r.noop},ConnectivityController:{getMessenger:M.getConnectivityControllerMessenger,getInitMessenger:r.noop},ClaimsController:{getMessenger:me.getClaimsControllerMessenger,getInitMessenger:me.getClaimsControllerInitMessenger},ClaimsService:{getMessenger:fe.getClaimsServiceMessenger,getInitMessenger:r.noop},CronjobController:{getMessenger:o.getCronjobControllerMessenger,getInitMessenger:r.noop},CurrencyRateController:{getMessenger:O.getCurrencyRateControllerMessenger,getInitMessenger:O.getCurrencyRateControllerInitMessenger},DecryptMessageController:{getMessenger:ce.getDecryptMessageControllerMessenger,getInitMessenger:ce.getDecryptMessageControllerInitMessenger},DecryptMessageManager:{getMessenger:le.getDecryptMessageManagerMessenger,getInitMessenger:r.noop},DeFiPositionsController:{getMessenger:h.getDeFiPositionsControllerMessenger,getInitMessenger:m.getDeFiPositionsControllerInitMessenger},DelegationController:{getMessenger:f.getDelegationControllerMessenger,getInitMessenger:f.getDelegationControllerInitMessenger},EncryptionPublicKeyController:{getMessenger:ue.getEncryptionPublicKeyControllerMessenger,getInitMessenger:ue.getEncryptionPublicKeyControllerInitMessenger},EncryptionPublicKeyManager:{getMessenger:de.getEncryptionPublicKeyManagerMessenger,getInitMessenger:r.noop},EnsController:{getMessenger:j.getEnsControllerMessenger,getInitMessenger:j.getEnsControllerInitMessenger},ErrorReportingService:{getMessenger:oe.getErrorReportingServiceMessenger,getInitMessenger:r.noop},StorageService:{getMessenger:ye.getStorageServiceMessenger,getInitMessenger:r.noop},ExecutionService:{getMessenger:o.getExecutionServiceMessenger,getInitMessenger:r.noop},GasFeeController:{getMessenger:N.getGasFeeControllerMessenger,getInitMessenger:N.getGasFeeControllerInitMessenger},GatorPermissionsController:{getMessenger:k.getGatorPermissionsControllerMessenger,getInitMessenger:r.noop},InstitutionalSnapController:{getMessenger:u.getInstitutionalSnapControllerMessenger,getInitMessenger:r.noop},KeyringController:{getMessenger:V.getKeyringControllerMessenger,getInitMessenger:V.getKeyringControllerInitMessenger},LoggingController:{getMessenger:re.getLoggingControllerMessenger,getInitMessenger:r.noop},MetaMetricsController:{getMessenger:S.getMetaMetricsControllerMessenger,getInitMessenger:r.noop},MetaMetricsDataDeletionController:{getMessenger:ne.getMetaMetricsDataDeletionControllerMessenger,getInitMessenger:r.noop},MultichainAssetsController:{getMessenger:c.getMultichainAssetsControllerMessenger,getInitMessenger:r.noop},MultichainAssetsRatesController:{getMessenger:c.getMultichainAssetsRatesControllerMessenger,getInitMessenger:r.noop},MultichainBalancesController:{getMessenger:c.getMultichainBalancesControllerMessenger,getInitMessenger:r.noop},MultichainTransactionsController:{getMessenger:c.getMultichainTransactionsControllerMessenger,getInitMessenger:r.noop},MultichainNetworkController:{getMessenger:c.getMultichainNetworkControllerMessenger,getInitMessenger:r.noop},MultichainRouter:{getMessenger:o.getMultichainRouterMessenger,getInitMessenger:r.noop},NameController:{getMessenger:D.getNameControllerMessenger,getInitMessenger:D.getNameControllerInitMessenger},NetworkController:{getMessenger:Y.getNetworkControllerMessenger,getInitMessenger:Y.getNetworkControllerInitMessenger},NotificationServicesController:{getMessenger:p.getNotificationServicesControllerMessenger,getInitMessenger:r.noop},NotificationServicesPushController:{getMessenger:p.getNotificationServicesPushControllerMessenger,getInitMessenger:p.getNotificationServicesPushControllerInitMessenger},OAuthService:{getMessenger:C.getOAuthServiceMessenger,getInitMessenger:r.noop},OnboardingController:{getMessenger:F.getOnboardingControllerMessenger,getInitMessenger:r.noop},PermissionController:{getMessenger:H.getPermissionControllerMessenger,getInitMessenger:H.getPermissionControllerInitMessenger},PermissionLogController:{getMessenger:z.getPermissionLogControllerMessenger,getInitMessenger:r.noop},PhishingController:{getMessenger:ee.getPhishingControllerMessenger,getInitMessenger:r.noop},RateLimitController:{getMessenger:o.getRateLimitControllerMessenger,getInitMessenger:o.getRateLimitControllerInitMessenger},RatesController:{getMessenger:_.getRatesControllerMessenger,getInitMessenger:r.noop},RemoteFeatureFlagController:{getMessenger:x.getRemoteFeatureFlagControllerMessenger,getInitMessenger:x.getRemoteFeatureFlagControllerInitMessenger},SeedlessOnboardingController:{getMessenger:C.getSeedlessOnboardingControllerMessenger,getInitMessenger:C.getSeedlessOnboardingControllerInitMessenger},SelectedNetworkController:{getMessenger:B.getSelectedNetworkControllerMessenger,getInitMessenger:r.noop},ShieldController:{getMessenger:w.getShieldControllerMessenger,getInitMessenger:w.getShieldControllerInitMessenger},SignatureController:{getMessenger:ge.getSignatureControllerMessenger,getInitMessenger:ge.getSignatureControllerInitMessenger},SnapsNameProvider:{getMessenger:o.getSnapsNameProviderMessenger,getInitMessenger:r.noop},SnapsRegistry:{getMessenger:o.getSnapsRegistryMessenger,getInitMessenger:r.noop},SnapController:{getMessenger:o.getSnapControllerMessenger,getInitMessenger:o.getSnapControllerInitMessenger},SnapInsightsController:{getMessenger:o.getSnapInsightsControllerMessenger,getInitMessenger:r.noop},SnapInterfaceController:{getMessenger:o.getSnapInterfaceControllerMessenger,getInitMessenger:r.noop},SnapKeyringBuilder:{getMessenger:b.getSnapKeyringBuilderMessenger,getInitMessenger:b.getSnapKeyringBuilderInitMessenger},SubjectMetadataController:{getMessenger:q.getSubjectMetadataControllerMessenger,getInitMessenger:r.noop},SubscriptionController:{getMessenger:v.getSubscriptionControllerMessenger,getInitMessenger:v.getSubscriptionControllerInitMessenger},SubscriptionService:{getMessenger:J.getSubscriptionServiceMessenger,getInitMessenger:r.noop},RewardsDataService:{getMessenger:he.getRewardsDataServiceMessenger,getInitMessenger:r.noop},RewardsController:{getMessenger:L.getRewardsControllerMessenger,getInitMessenger:L.getRewardsControllerInitMessenger},SwapsController:{getMessenger:U.getSwapsControllerMessenger,getInitMessenger:U.getSwapsControllerInitMessenger},PPOMController:{getMessenger:s.getPPOMControllerMessenger,getInitMessenger:s.getPPOMControllerInitMessenger},PreferencesController:{getMessenger:G.getPreferencesControllerMessenger,getInitMessenger:r.noop},TokenBalancesController:{getMessenger:E.getTokenBalancesControllerMessenger,getInitMessenger:E.getTokenBalancesControllerInitMessenger},TokenDetectionController:{getMessenger:A.getTokenDetectionControllerMessenger,getInitMessenger:A.getTokenDetectionControllerInitMessenger},TokenListController:{getMessenger:T.getTokenListControllerMessenger,getInitMessenger:T.getTokenListControllerInitMessenger},TokensController:{getMessenger:P.getTokensControllerMessenger,getInitMessenger:P.getTokensControllerInitMessenger},TransactionController:{getMessenger:i.getTransactionControllerMessenger,getInitMessenger:i.getTransactionControllerInitMessenger},TransactionPayController:{getMessenger:a.getTransactionPayControllerMessenger,getInitMessenger:a.getTransactionPayControllerInitMessenger},UserOperationController:{getMessenger:pe.getUserOperationControllerMessenger,getInitMessenger:pe.getUserOperationControllerInitMessenger},UserStorageController:{getMessenger:d.getUserStorageControllerMessenger,getInitMessenger:I.getUserStorageControllerInitMessenger},TokenRatesController:{getMessenger:g.getTokenRatesControllerMessenger,getInitMessenger:g.getTokenRatesControllerInitMessenger},NftController:{getMessenger:g.getNftControllerMessenger,getInitMessenger:g.getNftControllerInitMessenger},NftDetectionController:{getMessenger:g.getNftDetectionControllerMessenger,getInitMessenger:r.noop},AssetsContractController:{getMessenger:g.getAssetsContractControllerMessenger,getInitMessenger:g.getAssetsContractControllerInitMessenger},AccountTreeController:{getMessenger:b.getAccountTreeControllerMessenger,getInitMessenger:b.getAccountTreeControllerInitMessenger},WebSocketService:{getMessenger:o.getWebSocketServiceMessenger,getInitMessenger:r.noop},BackendWebSocketService:{getMessenger:l.getBackendWebSocketServiceMessenger,getInitMessenger:l.getBackendWebSocketServiceInitMessenger},AccountActivityService:{getMessenger:l.getAccountActivityServiceMessenger,getInitMessenger:r.noop},SmartTransactionsController:{getMessenger:y.getSmartTransactionsControllerMessenger,getInitMessenger:y.getSmartTransactionsControllerInitMessenger},MultichainAccountService:{getMessenger:b.getMultichainAccountServiceMessenger,getInitMessenger:b.getMultichainAccountServiceInitMessenger},NetworkOrderController:{getMessenger:g.getNetworkOrderControllerMessenger,getInitMessenger:r.noop},NetworkEnablementController:{getMessenger:g.getNetworkEnablementControllerMessenger,getInitMessenger:g.getNetworkEnablementControllerInitMessenger},ProfileMetricsController:{getMessenger:be.getProfileMetricsControllerMessenger,getInitMessenger:r.noop},ProfileMetricsService:{getMessenger:Ce.getProfileMetricsServiceMessenger,getInitMessenger:r.noop}}}}},{package:"$root$",file:"app/scripts/controller-init/messengers/index.ts"}],[105,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getKeyringControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"KeyringControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:requestQrCodeScan"],events:[]}),t},n.getKeyringControllerMessenger=function(e){return new r.Messenger({namespace:"KeyringController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/keyring-controller-messenger.ts"}],[106,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getLoggingControllerMessenger=function(e){return new r.Messenger({namespace:"LoggingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/logging-controller-messenger.ts"}],[107,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange","NetworkController:networkDidChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-controller-messenger.ts"}],[108,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsDataDeletionControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsDataDeletionController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-data-deletion-controller-messenger.ts"}],[109,{"./multichain-assets-controller-messenger":110,"./multichain-assets-rates-controller-messenger":111,"./multichain-balances-controller-messenger":112,"./multichain-network-controller-messenger":113,"./multichain-transactions-controller-messenger":114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getMultichainAssetsControllerMessenger",{enumerable:!0,get:function(){return r.getMultichainAssetsControllerMessenger}}),Object.defineProperty(n,"getMultichainAssetsRatesControllerMessenger",{enumerable:!0,get:function(){return s.getMultichainAssetsRatesControllerMessenger}}),Object.defineProperty(n,"getMultichainBalancesControllerMessenger",{enumerable:!0,get:function(){return o.getMultichainBalancesControllerMessenger}}),Object.defineProperty(n,"getMultichainNetworkControllerMessenger",{enumerable:!0,get:function(){return a.getMultichainNetworkControllerMessenger}}),Object.defineProperty(n,"getMultichainTransactionsControllerMessenger",{enumerable:!0,get:function(){return i.getMultichainTransactionsControllerMessenger}});var r=e("./multichain-assets-controller-messenger"),s=e("./multichain-assets-rates-controller-messenger"),o=e("./multichain-balances-controller-messenger"),i=e("./multichain-transactions-controller-messenger"),a=e("./multichain-network-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/index.ts"}],[11,{"@metamask/accounts-controller":1274},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsControllerInit=void 0;var r=e("@metamask/accounts-controller");n.AccountsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountsController({messenger:e,state:t.AccountsController})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts-controller-init.ts"}],[110,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountAssetListUpdated"],actions:["PermissionController:getPermissions","SnapController:handleRequest","SnapController:getAll","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-controller-messenger.ts"}],[111,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsRatesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsRatesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","KeyringController:lock","KeyringController:unlock","CurrencyRateController:stateChange","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","CurrencyRateController:getState","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-rates-controller-messenger.ts"}],[112,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainBalancesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountBalancesUpdated","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","MultichainAssetsController:getState","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-balances-controller-messenger.ts"}],[113,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:setActiveNetwork","NetworkController:getState","NetworkController:removeNetwork","NetworkController:findNetworkClientIdByChainId","NetworkController:getSelectedChainId","AccountsController:listMultichainAccounts"],events:["AccountsController:selectedAccountChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-network-controller-messenger.ts"}],[114,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainTransactionsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountTransactionsUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-transactions-controller-messenger.ts"}],[115,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNameControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NameControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t},n.getNameControllerMessenger=function(e){return new r.Messenger({namespace:"NameController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/name-controller-messenger.ts"}],[116,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNetworkControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NetworkControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","MetaMetricsController:trackEvent","RemoteFeatureFlagController:getState"],events:["NetworkController:rpcEndpointUnavailable","NetworkController:rpcEndpointDegraded","RemoteFeatureFlagController:stateChange"]}),t},n.getNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"NetworkController",parent:e});return e.delegate({messenger:t,actions:["ConnectivityController:getState"],events:[]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/network-controller-messenger.ts"}],[117,{"./notification-services-controller-messenger":118,"./notification-services-push-controller-messenger":119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getNotificationServicesControllerMessenger",{enumerable:!0,get:function(){return r.getNotificationServicesControllerMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerInitMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerInitMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerMessenger}});var r=e("./notification-services-controller-messenger"),s=e("./notification-services-push-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/index.ts"}],[118,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","AuthenticationController:getBearerToken","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","NotificationServicesPushController:enablePushNotifications","NotificationServicesPushController:disablePushNotifications","NotificationServicesPushController:subscribeToPushNotifications"],events:["KeyringController:stateChange","KeyringController:lock","KeyringController:unlock","NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-controller-messenger.ts"}],[119,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesPushControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"],events:["NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:pushNotificationClicked"]}),t},n.getNotificationServicesPushControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushController",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-push-controller-messenger.ts"}],[12,{"../../../../shared/constants/metametrics":5892,"../../../../shared/lib/trace":5999,"@metamask/account-tree-controller":1267},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTreeControllerInit=void 0;var r=e("@metamask/account-tree-controller"),s=e("../../../../shared/lib/trace"),o=e("../../../../shared/constants/metametrics");n.AccountTreeControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n})=>({controller:new r.AccountTreeController({messenger:e,state:t.AccountTreeController,config:{trace:s.trace,backupAndSync:{onBackupAndSyncEvent:e=>{n.call("MetaMetricsController:trackEvent",{category:o.MetaMetricsEventCategory.BackupAndSync,event:o.MetaMetricsEventName.ProfileActivityUpdated,properties:{...e}})}},accountOrderCallbacks:{isHiddenAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").hiddenAccountList.includes(t.address)},isPinnedAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").pinnedAccountList.includes(t.address)}}}})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/account-tree-controller-init.ts"}],[120,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"OnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/onboarding-controller-messenger.ts"}],[121,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PermissionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:getUnlockPromise","AccountsController:listAccounts","CurrencyRateController:getState","KeyringController:getKeyringsByType","KeyringController:withKeyring","MultichainRouter:isSupportedScope","MultichainRouter:getSupportedAccounts","NetworkController:findNetworkClientIdByChainId","PhishingController:maybeUpdateState","PhishingController:testOrigin","PreferencesController:getState","RateLimitController:call","SnapController:clearSnapState","SnapController:get","SnapController:getSnapState","SnapController:handleRequest","SnapController:updateSnapState","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t},n.getPermissionControllerMessenger=function(e){const t=new r.Messenger({namespace:"PermissionController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:hasRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-controller-messenger.ts"}],[122,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionLogControllerMessenger=function(e){return new r.Messenger({namespace:"PermissionLogController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-log-controller-messenger.ts"}],[123,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPhishingControllerMessenger=function(e){const t=new r.Messenger({namespace:"PhishingController",parent:e});return e.delegate({messenger:t,events:["TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/phishing-controller-messenger.ts"}],[124,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPPOMControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PPOMControllerInit",parent:e});return e.delegate({messenger:t,events:["PreferencesController:stateChange"],actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getPPOMControllerMessenger=function(e){const t=new r.Messenger({namespace:"PPOMController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","NetworkController:networkDidChange"],actions:["NetworkController:getNetworkClientById"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ppom-controller-messenger.ts"}],[125,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPreferencesControllerMessenger=function(e){const t=new r.Messenger({namespace:"PreferencesController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:setSelectedAccount","AccountsController:getSelectedAccount","AccountsController:getAccountByAddress","AccountsController:setAccountName","NetworkController:getState"],events:["AccountsController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/preferences-controller-messenger.ts"}],[126,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProfileMetricsControllerMessenger=function(e){const t=new r.Messenger({namespace:"ProfileMetricsController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ProfileMetricsService:submitMetrics"],events:["AccountsController:accountAdded","AccountsController:accountRemoved","KeyringController:lock","KeyringController:unlock","TransactionController:transactionSubmitted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-controller-messenger.ts"}],[127,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProfileMetricsServiceMessenger=function(e){const t=new r.Messenger({namespace:"ProfileMetricsService",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-service-messenger.ts"}],[128,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRatesControllerMessenger=function(e){return new r.Messenger({namespace:"RatesController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rates-controller-messenger.ts"}],[1283,{"@metamask/base-controller":1401,"@metamask/controller-utils":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=n.controllerName=n.AddressType=void 0;const i=e("@metamask/base-controller"),a=e("@metamask/controller-utils");var l;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(l||(n.AddressType=l={})),n.controllerName="AddressBookController";const c={addressBook:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};n.getDefaultAddressBookControllerState=()=>({addressBook:{}});class u extends i.BaseController{constructor({messenger:e,state:t}){const i={...(0,n.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:c,name:n.controllerName,state:i}),r.add(this),o(this,r,"m",s).call(this)}list(){const{addressBook:e}=this.state;return Object.keys(e).reduce((t,n)=>{const r=n;return[...t,...Object.values(e[r])]},[])}clear(){this.update(e=>{e.addressBook={}})}delete(e,t){if(t=(0,a.toChecksumHexAddress)(t),!([e,t].every(e=>(0,a.isSafeDynamicKey)(e))&&(0,a.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t]))return!1;const n={...this.state.addressBook[e][t]};return this.update(n=>{const r=n.addressBook[e];r?.[t]&&(delete r[t],0===Object.keys(r).length&&delete n.addressBook[e])}),"*"!==String(e)&&this.messenger.publish("AddressBookController:contactDeleted",n),!0}set(e,t,n=(0,a.toHex)(1),r="",s){if(e=(0,a.toChecksumHexAddress)(e),!(0,a.isValidHexAddress)(e))return!1;const o={address:e,chainId:n,isEns:!1,memo:r,name:t,addressType:s,lastUpdatedAt:Date.now()},i=(0,a.normalizeEnsName)(t);return i&&(o.name=i,o.isEns=!0),this.update(t=>{t.addressBook={...this.state.addressBook,[n]:{...this.state.addressBook[n],[e]:o}}}),"*"!==String(n)&&this.messenger.publish("AddressBookController:contactUpdated",o),!0}}n.AddressBookController=u,r=new WeakSet,s=function(){this.messenger.registerActionHandler(`${n.controllerName}:list`,this.list.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:set`,this.set.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:delete`,this.delete.bind(this))},n.default=u}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1284,{"./AddressBookController.cjs":1283},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=void 0;var r=e("./AddressBookController.cjs");Object.defineProperty(n,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return r.getDefaultAddressBookControllerState}}),Object.defineProperty(n,"AddressBookController",{enumerable:!0,get:function(){return r.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1285,{"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;const i=e("@metamask/base-controller"),a={announcements:{}},l={announcements:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class c extends i.BaseController{constructor({messenger:e,state:t,allAnnouncements:n}){const i={...a,...t};super({messenger:e,metadata:l,name:"AnnouncementController",state:i}),r.add(this),o(this,r,"m",s).call(this,n)}resetViewed(){this.update(({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1})}updateViewed(e){this.update(({announcements:t})=>{for(const n of Object.keys(e).map(Number))t[n].isShown=e[n]})}}n.AnnouncementController=c,r=new WeakSet,s=function(e){this.update(t=>{Object.values(e).forEach(e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}})})}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1286,{"./AnnouncementController.cjs":1285},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;var r=e("./AnnouncementController.cjs");Object.defineProperty(n,"AnnouncementController",{enumerable:!0,get:function(){return r.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[129,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRemoteFeatureFlagControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RemoteFeatureFlagControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","PreferencesController:getState","OnboardingController:getState"],events:["PreferencesController:stateChange","OnboardingController:stateChange"]}),t},n.getRemoteFeatureFlagControllerMessenger=function(e){return new r.Messenger({namespace:"RemoteFeatureFlagController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/remote-feature-flag-controller-messenger.ts"}],[13,{"../../lib/snap-keyring/snap-keyring":333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapKeyringBuilderInit=void 0;var r=e("../../lib/snap-keyring/snap-keyring");n.SnapKeyringBuilderInit=({controllerMessenger:e,initMessenger:t,removeAccount:n})=>({persistedStateKey:null,memStateKey:null,controller:(0,r.snapKeyringBuilder)(e,{persistKeyringHelper:async()=>{await t.call("KeyringController:persistAllKeyrings"),await t.call("AccountsController:updateAccounts")},removeAccountHelper:async e=>{await n(e)},trackEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/snap-keyring-builder-init.ts"}],[130,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsDataServiceMessenger=function(e){const t=new r.Messenger({namespace:"RewardsDataService",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/reward-data-service-messenger.ts"}],[131,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RewardsControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState","PreferencesController:getState"]}),t},n.getRewardsControllerMessenger=function(e){const t=new r.Messenger({namespace:s,parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedMultichainAccount","AccountTreeController:getAccountsFromSelectedAccountGroup","AccountsController:listMultichainAccounts","KeyringController:signPersonalMessage","RewardsDataService:login","RewardsDataService:estimatePoints","RewardsDataService:getSeasonStatus","RewardsDataService:fetchGeoLocation","RewardsDataService:mobileOptin","RewardsDataService:validateReferralCode","RewardsDataService:mobileJoin","RewardsDataService:getOptInStatus","RewardsDataService:getSeasonMetadata","RewardsDataService:getDiscoverSeasons","SnapController:handleRequest"],events:["AccountTreeController:selectedAccountGroupChange","KeyringController:unlock"]}),t};var r=e("@metamask/messenger");const s="RewardsController"}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rewards-controller-messenger.ts"}],[132,{"./oauth-service-messenger":133,"./seedless-onboarding-controller-messenger":134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getOAuthServiceMessenger",{enumerable:!0,get:function(){return r.getOAuthServiceMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerInitMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerInitMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerMessenger}});var r=e("./oauth-service-messenger"),s=e("./seedless-onboarding-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/index.ts"}],[133,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOAuthServiceMessenger=function(e){const t=new r.Messenger({namespace:"OAuthService",parent:e});return e.delegate({messenger:t,actions:["SeedlessOnboardingController:getState","OnboardingController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/oauth-service-messenger.ts"}],[134,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSeedlessOnboardingControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SeedlessOnboardingControllerInit",parent:e});return e.delegate({messenger:t,actions:["OAuthService:getNewRefreshToken","OAuthService:revokeRefreshToken","OAuthService:renewRefreshToken"]}),t},n.getSeedlessOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"SeedlessOnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/seedless-onboarding-controller-messenger.ts"}],[135,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"SelectedNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","NetworkController:getSelectedNetworkClient","PermissionController:hasPermissions","PermissionController:getSubjectNames"],events:["NetworkController:stateChange","PermissionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/selected-network-controller-messenger.ts"}],[136,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getShieldControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"ShieldControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getShieldControllerMessenger=function(e){const t=new r.Messenger({namespace:"ShieldController",parent:e});return e.delegate({messenger:t,events:["SignatureController:stateChange","TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/shield/shield-controller-messenger.ts"}],[137,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSignatureControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SignatureControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getSignatureControllerMessenger=function(e){const t=new r.Messenger({namespace:"SignatureController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ApprovalController:addRequest","KeyringController:signMessage","KeyringController:signPersonalMessage","KeyringController:signTypedMessage","LoggingController:add","NetworkController:getNetworkClientById","GatorPermissionsController:decodePermissionFromPermissionContextForOrigin"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/signature-controller-messenger.ts"}],[138,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSmartTransactionsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getSmartTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsController",parent:e});return e.delegate({messenger:t,actions:["ErrorReportingService:captureException","NetworkController:getNetworkClientById","NetworkController:getState","RemoteFeatureFlagController:getState","TransactionController:getNonceLock","TransactionController:getTransactions","TransactionController:updateTransaction"],events:["NetworkController:stateChange","RemoteFeatureFlagController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/smart-transactions-controller-messenger.ts"}],[139,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCronjobControllerMessenger=function(e){const t=new r.Messenger({namespace:"CronjobController",parent:e});return e.delegate({messenger:t,events:["SnapController:snapInstalled","SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapEnabled","SnapController:snapDisabled"],actions:["PermissionController:getPermissions","SnapController:handleRequest"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/cronjob-controller-messenger.ts"}],[14,{"../controllers/alert-controller":218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AlertControllerInit=void 0;var r=e("../controllers/alert-controller");n.AlertControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AlertController({state:t.AlertController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/alert-controller-init.ts"}],[140,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExecutionServiceMessenger=function(e){return new r.Messenger({namespace:"ExecutionService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/execution-service-messenger.ts"}],[141,{"./cronjob-controller-messenger":139,"./execution-service-messenger":140,"./multichain-router-messenger":142,"./rate-limit-controller-messenger":143,"./snap-controller-messenger":144,"./snap-insights-controller-messenger":145,"./snap-interface-controller-messenger":146,"./snaps-name-provider-messenger":147,"./snaps-registry-messenger":148,"./websocket-service-messenger":149},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getCronjobControllerMessenger",{enumerable:!0,get:function(){return r.getCronjobControllerMessenger}}),Object.defineProperty(n,"getExecutionServiceMessenger",{enumerable:!0,get:function(){return s.getExecutionServiceMessenger}}),Object.defineProperty(n,"getMultichainRouterMessenger",{enumerable:!0,get:function(){return o.getMultichainRouterMessenger}}),Object.defineProperty(n,"getRateLimitControllerInitMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerInitMessenger}}),Object.defineProperty(n,"getRateLimitControllerMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerMessenger}}),Object.defineProperty(n,"getSnapControllerInitMessenger",{enumerable:!0,get:function(){return a.getSnapControllerInitMessenger}}),Object.defineProperty(n,"getSnapControllerMessenger",{enumerable:!0,get:function(){return a.getSnapControllerMessenger}}),Object.defineProperty(n,"getSnapInsightsControllerMessenger",{enumerable:!0,get:function(){return l.getSnapInsightsControllerMessenger}}),Object.defineProperty(n,"getSnapInterfaceControllerMessenger",{enumerable:!0,get:function(){return c.getSnapInterfaceControllerMessenger}}),Object.defineProperty(n,"getSnapsNameProviderMessenger",{enumerable:!0,get:function(){return u.getSnapsNameProviderMessenger}}),Object.defineProperty(n,"getSnapsRegistryMessenger",{enumerable:!0,get:function(){return d.getSnapsRegistryMessenger}}),Object.defineProperty(n,"getWebSocketServiceMessenger",{enumerable:!0,get:function(){return g.getWebSocketServiceMessenger}});var r=e("./cronjob-controller-messenger"),s=e("./execution-service-messenger"),o=e("./multichain-router-messenger"),i=e("./rate-limit-controller-messenger"),a=e("./snap-controller-messenger"),l=e("./snap-insights-controller-messenger"),c=e("./snap-interface-controller-messenger"),u=e("./snaps-name-provider-messenger"),d=e("./snaps-registry-messenger"),g=e("./websocket-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/index.ts"}],[142,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainRouterMessenger=function(e){const t=new r.Messenger({namespace:"MultichainRouter",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:handleRequest","PermissionController:getPermissions","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/multichain-router-messenger.ts"}],[143,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRateLimitControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RateLimitController",parent:e});return e.delegate({messenger:t,actions:["SubjectMetadataController:getState","NotificationServicesController:updateMetamaskNotificationsList"]}),t},n.getRateLimitControllerMessenger=function(e){return new r.Messenger({namespace:"RateLimitController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/rate-limit-controller-messenger.ts"}],[144,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SnapControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getKeyringsByType","PreferencesController:getState","MetaMetricsController:trackEvent","SnapController:setClientActive","OnboardingController:getState"],events:["KeyringController:lock","KeyringController:unlock","OnboardingController:stateChange"]}),t},n.getSnapControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapController",parent:e});return e.delegate({messenger:t,events:["ExecutionService:unhandledError","ExecutionService:outboundRequest","ExecutionService:outboundResponse","KeyringController:lock"],actions:["PermissionController:getEndowments","PermissionController:getPermissions","PermissionController:hasPermission","PermissionController:hasPermissions","PermissionController:requestPermissions","PermissionController:revokeAllPermissions","PermissionController:revokePermissions","PermissionController:revokePermissionForAllSubjects","PermissionController:getSubjectNames","PermissionController:updateCaveat","ApprovalController:addRequest","ApprovalController:updateRequestState","PermissionController:grantPermissions","SubjectMetadataController:getSubjectMetadata","SubjectMetadataController:addSubjectMetadata","ExecutionService:executeSnap","ExecutionService:terminateSnap","ExecutionService:terminateAllSnaps","ExecutionService:handleRpcRequest","NetworkController:getNetworkClientById","SelectedNetworkController:getNetworkClientIdForDomain","SnapsRegistry:get","SnapsRegistry:getMetadata","SnapsRegistry:update","SnapsRegistry:resolveVersion","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-controller-messenger.ts"}],[145,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInsightsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInsightsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:getAll","PermissionController:getPermissions","SnapInterfaceController:deleteInterface"],events:["TransactionController:unapprovedTransactionAdded","TransactionController:transactionStatusUpdated","SignatureController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-insights-controller-messenger.ts"}],[1456,{"@metamask/utils":3207,buffer:4176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.isVaultUpdated=n.updateVaultWithDetail=n.updateVault=n.generateSalt=n.serializeBufferForStorage=n.serializeBufferFromStorage=n.keyFromPassword=n.exportKey=n.importKey=n.decryptWithKey=n.decryptWithDetail=n.decrypt=n.encryptWithKey=n.encryptWithDetail=n.encrypt=void 0;const r=e("@metamask/utils"),s="jwk",o="AES-GCM",i="utf-8",a={algorithm:"PBKDF2",params:{iterations:1e4}},l={algorithm:"PBKDF2",params:{iterations:9e5}};async function c(e,t,n,r=f(),s=l){const o=n||await m(e,r,!1,s),i=await d(o,t);return i.salt=r,JSON.stringify(i)}async function u(e,t,n=f(),r=l){const s=await m(e,n,!0,r),o=await h(s);return{vault:await c(e,t,s,n),exportedKeyString:o}}async function d(e,n){const r=JSON.stringify(n),s=t.from(r,i),a=globalThis.crypto.getRandomValues(new Uint8Array(16)),l=y(e),c=await globalThis.crypto.subtle.encrypt({name:o,iv:a},l,s),u=new Uint8Array(c),d=t.from(a).toString("base64"),g={data:t.from(u).toString("base64"),iv:d};return b(e)&&(g.keyMetadata=e.derivationOptions),g}async function g(e,t,n){const r=JSON.parse(t),{salt:s,keyMetadata:o}=r,i=y(n||await m(e,s,!1,o));return await p(i,r)}async function p(e,n){const r=t.from(n.data,"base64"),s=t.from(n.iv,"base64"),a=y(e);let l;try{const e=await crypto.subtle.decrypt({name:o,iv:s},a,r),n=new Uint8Array(e),c=t.from(n).toString(i);l=JSON.parse(c)}catch(e){throw new Error("Incorrect password")}return l}async function h(e){return b(e)?JSON.stringify({key:await globalThis.crypto.subtle.exportKey(s,e.key),derivationOptions:e.derivationOptions}):JSON.stringify(await globalThis.crypto.subtle.exportKey(s,e))}async function m(e,n,r=!1,s=a){const l=t.from(e,i),c=t.from(n,"base64"),u=await globalThis.crypto.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),d=await globalThis.crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:s.params.iterations,hash:"SHA-256"},u,{name:o,length:256},r,["encrypt","decrypt"]);return s?{key:d,derivationOptions:s}:d}function f(e=32){const t=new Uint8Array(e);globalThis.crypto.getRandomValues(t);return btoa(String.fromCharCode.apply(null,t))}function b(e){return(0,r.isPlainObject)(e)&&(0,r.hasProperty)(e,"key")&&(0,r.hasProperty)(e,"derivationOptions")&&e.key instanceof CryptoKey&&C(e.derivationOptions)}function C(e){return(0,r.isPlainObject)(e)&&(0,r.hasProperty)(e,"algorithm")&&(0,r.hasProperty)(e,"params")}function y(e){return b(e)?e.key:e}function w(e,t=l){const{keyMetadata:n}=JSON.parse(e);return C(n)&&n.algorithm===t.algorithm&&n.params.iterations===t.params.iterations}n.encrypt=c,n.encryptWithDetail=u,n.encryptWithKey=d,n.decrypt=g,n.decryptWithDetail=async function(e,t){const n=JSON.parse(t),{salt:r,keyMetadata:s}=n,o=await m(e,r,!0,s);return{exportedKeyString:await h(o),vault:await g(e,t,o),salt:r}},n.decryptWithKey=p,n.importKey=async function(e){const t=JSON.parse(e);return n=t,(0,r.isPlainObject)(n)&&(0,r.hasProperty)(n,"key")&&(0,r.hasProperty)(n,"derivationOptions")&&C(n.derivationOptions)?{key:await globalThis.crypto.subtle.importKey(s,t.key,o,!0,["encrypt","decrypt"]),derivationOptions:t.derivationOptions}:await globalThis.crypto.subtle.importKey(s,t,o,!0,["encrypt","decrypt"]);var n},n.exportKey=h,n.keyFromPassword=m,n.serializeBufferFromStorage=function(e){const t="0x"===e.slice(0,2)?e.slice(2):e,n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const r=t.substr(e,2);n[e/2]=parseInt(r,16)}return n},n.serializeBufferForStorage=function(e){let t="0x";return e.forEach(e=>{t+=function(e){let t=e.toString(16);for(;t.length<2;)t=`0${t}`;return t}(e)}),t},n.generateSalt=f,n.updateVault=async function(e,t,n=l){return w(e,n)?e:c(t,await g(t,e),undefined,undefined,n)},n.updateVaultWithDetail=async function(e,t,n=l){return w(e.vault,n)?e:u(t,await g(t,e.vault),undefined,n)},n.isVaultUpdated=w}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/browser-passworder",file:"node_modules/@metamask/browser-passworder/dist/index.js"}],[146,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInterfaceControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInterfaceController",parent:e});return e.delegate({messenger:t,actions:["PhishingController:maybeUpdateState","PhishingController:testOrigin","ApprovalController:hasRequest","ApprovalController:acceptRequest","SnapController:get","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount","AccountsController:getAccountByAddress","AccountsController:listMultichainAccounts","PermissionController:hasPermission"],events:["NotificationServicesController:notificationsListUpdated"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-interface-controller-messenger.ts"}],[147,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsNameProviderMessenger=function(e){const t=new r.Messenger({namespace:"SnapsNameProvider",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:get","SnapController:handleRequest","PermissionController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-name-provider-messenger.ts"}],[148,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsRegistryMessenger=function(e){return new r.Messenger({namespace:"SnapsRegistry",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-registry-messenger.ts"}],[149,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getWebSocketServiceMessenger=function(e){const t=new r.Messenger({namespace:"WebSocketService",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest"],events:["SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapInstalled"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/websocket-service-messenger.ts"}],[1493,{"./BackendWebSocketService.cjs":1494,"./logger.cjs":1496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,g,p,h,m,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=void 0;const C=e("./BackendWebSocketService.cjs"),y=e("./logger.cjs"),w="AccountActivityService",v=(0,y.createModuleLogger)(y.projectLogger,w),M=["subscribe","unsubscribe"];n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=["AccountsController:getSelectedAccount","BackendWebSocketService:connect","BackendWebSocketService:forceReconnection","BackendWebSocketService:subscribe","BackendWebSocketService:getConnectionInfo","BackendWebSocketService:channelHasSubscription","BackendWebSocketService:getSubscriptionsByChannel","BackendWebSocketService:findSubscriptionsByChannelPrefix","BackendWebSocketService:addChannelCallback","BackendWebSocketService:removeChannelCallback"],n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=["AccountsController:selectedAccountChange","BackendWebSocketService:connectionStateChanged"];n.AccountActivityService=class{constructor(e){r.add(this),this.name=w,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,new Set),f(this,s,e.messenger,"f"),f(this,o,{subscriptionNamespace:e.subscriptionNamespace??"account-activity.v1"},"f"),f(this,i,e.traceFn??((e,t)=>t?.()),"f"),b(this,s,"f").registerMethodActionHandlers(this,M),b(this,s,"f").subscribe("AccountsController:selectedAccountChange",async e=>await b(this,r,"m",c).call(this,e)),b(this,s,"f").subscribe("BackendWebSocketService:connectionStateChanged",e=>b(this,r,"m",d).call(this,e)),b(this,s,"f").call("BackendWebSocketService:addChannelCallback",{channelName:`system-notifications.v1.${b(this,o,"f").subscriptionNamespace}`,callback:e=>b(this,r,"m",u).call(this,e)})}async subscribe(e){try{await b(this,s,"f").call("BackendWebSocketService:connect");const t=`${b(this,o,"f").subscriptionNamespace}.${e.address}`;if(b(this,s,"f").call("BackendWebSocketService:channelHasSubscription",t))return;await b(this,s,"f").call("BackendWebSocketService:subscribe",{channels:[t],channelType:b(this,o,"f").subscriptionNamespace,callback:e=>{b(this,r,"m",l).call(this,e.data)}})}catch(e){v("Subscription failed, forcing reconnection",{error:e}),await b(this,r,"m",m).call(this)}}async unsubscribe(e){const{address:t}=e;try{const e=`${b(this,o,"f").subscriptionNamespace}.${t}`,n=b(this,s,"f").call("BackendWebSocketService:getSubscriptionsByChannel",e);if(0===n.length)return;for(const e of n)await e.unsubscribe()}catch(e){v("Unsubscription failed, forcing reconnection",{error:e}),await b(this,r,"m",m).call(this)}}destroy(){b(this,s,"f").call("BackendWebSocketService:removeChannelCallback",`system-notifications.v1.${b(this,o,"f").subscriptionNamespace}`)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,l=function(e){const{address:t,tx:n,updates:r}=e,a=1e3*n.timestamp,l=Date.now()-a;v("Handling account activity update",{address:t,updateCount:r.length,elapsedMs:l}),b(this,i,"f").call(this,{name:`${w} Transaction Message`,data:{chain:n.chain,status:n.status,elapsed_ms:l},tags:{service:w,notification_type:b(this,o,"f").subscriptionNamespace}},()=>{b(this,s,"f").publish("AccountActivityService:transactionUpdated",n),b(this,s,"f").publish("AccountActivityService:balanceUpdated",{address:t,chain:n.chain,updates:r})})},c=async function(e){if(e?.address)try{const t=b(this,r,"m",h).call(this,e);await b(this,r,"m",p).call(this),await this.subscribe({address:t})}catch(e){v("Account change failed",{error:e})}},u=function(e){const t=e.data,{timestamp:n}=e;if(!t.chainIds||!Array.isArray(t.chainIds)||!t.status)throw new Error("Invalid system notification data: missing chainIds or status");if("up"===t.status)for(const e of t.chainIds)b(this,a,"f").add(e);else for(const e of t.chainIds)b(this,a,"f").delete(e);b(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:t.chainIds,status:t.status,timestamp:n}),v(`WebSocket status change - Published tracked chains as ${t.status}`,{count:t.chainIds.length,chains:t.chainIds,status:t.status})},d=async function(e){const{state:t}=e;if(t===C.WebSocketState.CONNECTED)await b(this,r,"m",g).call(this);else if(t===C.WebSocketState.DISCONNECTED){const e=Array.from(b(this,a,"f"));e.length>0&&(b(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:e,status:"down",timestamp:Date.now()}),v("WebSocket disconnection - Published tracked chains as down",{count:e.length,chains:e}),b(this,a,"f").clear())}},g=async function(){const e=b(this,s,"f").call("AccountsController:getSelectedAccount");if(!e||!e.address)return;const t=b(this,r,"m",h).call(this,e);await this.subscribe({address:t})},p=async function(){const e=b(this,s,"f").call("BackendWebSocketService:findSubscriptionsByChannelPrefix",b(this,o,"f").subscriptionNamespace);for(const t of e)await t.unsubscribe()},h=function(e){return e.scopes.some(e=>e.startsWith("eip155:"))?`eip155:0:${e.address}`:e.scopes.some(e=>e.startsWith("solana:"))?`solana:0:${e.address}`:e.address},m=async function(){v("Forcing WebSocket reconnection to clean up subscription state"),await b(this,s,"f").call("BackendWebSocketService:forceReconnection")}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/AccountActivityService.cjs"}],[1494,{"./logger.cjs":1496,"@metamask/controller-utils":1488,"@metamask/utils":3207,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,g,p,h,m,f,b,C,y,w,v,M,k,S,I,T,A,P,E,_,O,j,D,N,B,R,F,x=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},L=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BackendWebSocketService=n.WebSocketEventType=n.WebSocketState=n.getCloseReason=void 0;const U=e("@metamask/controller-utils"),$=e("@metamask/utils"),K=e("uuid"),G=e("./logger.cjs"),W="BackendWebSocketService",H=(0,G.createModuleLogger)(G.projectLogger,W),q="Internal: Manual disconnect",V=["connect","disconnect","forceReconnection","sendMessage","sendRequest","subscribe","getConnectionInfo","getSubscriptionsByChannel","channelHasSubscription","findSubscriptionsByChannelPrefix","addChannelCallback","removeChannelCallback","getChannelCallbacks"];function z(e){switch(e){case 1e3:return"Normal Closure";case 1001:return"Going Away";case 1002:return"Protocol Error";case 1003:return"Unsupported Data";case 1004:return"Reserved";case 1005:return"No Status Received";case 1006:return"Abnormal Closure";case 1007:return"Invalid frame payload data";case 1008:return"Policy Violation";case 1009:return"Message Too Big";case 1010:return"Mandatory Extension";case 1011:return"Internal Server Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1014:return"Bad Gateway";case 1015:return"TLS Handshake";default:return e>=3e3&&e<=3999?"Library/Framework Error":e>=4e3&&e<=4999?"Application Error":"Unknown"}}var Y,J;n.getCloseReason=z,function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.ERROR="error"}(Y||(n.WebSocketState=Y={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected"}(J||(n.WebSocketEventType=J={}));n.BackendWebSocketService=class{constructor(e){r.add(this),this.name=W,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,Y.DISCONNECTED),u.set(this,0),d.set(this,null),g.set(this,null),p.set(this,null),h.set(this,null),m.set(this,new Map),f.set(this,0),b.set(this,new Map),C.set(this,new Map),y.set(this,void 0),x(this,s,e.messenger,"f"),x(this,i,e.isEnabled,"f"),x(this,a,e.traceFn??((e,t)=>t?.()),"f"),x(this,o,{url:e.url,timeout:e.timeout??1e4,reconnectDelay:e.reconnectDelay??1e4,maxReconnectDelay:e.maxReconnectDelay??6e4,requestTimeout:e.requestTimeout??3e4},"f"),L(this,r,"m",D).call(this),L(this,r,"m",w).call(this),L(this,s,"f").registerMethodActionHandlers(this,V)}async connect(){if(L(this,i,"f")&&!L(this,i,"f").call(this))return L(this,r,"m",N).call(this),void x(this,u,0,"f");if(L(this,c,"f")!==Y.CONNECTED)if(L(this,h,"f"))await L(this,h,"f");else if(!L(this,d,"f")){x(this,h,(async()=>{let e;try{const t=await L(this,s,"f").call("AuthenticationController:getBearerToken");if(!t)throw new Error("Authentication required: user not signed in");e=t}catch(e){throw H("Failed to check authentication requirements",{error:e}),e}await L(this,r,"m",M).call(this,e)})(),"f");try{await L(this,h,"f")}catch{L(this,r,"m",j).call(this)}finally{x(this,h,null,"f")}}}disconnect(){L(this,c,"f")!==Y.DISCONNECTED&&L(this,l,"f")&&(L(this,l,"f").close(4999,q),H("WebSocket manually disconnected"))}async forceReconnection(){if(L(this,c,"f")===Y.DISCONNECTED||!L(this,l,"f"))return H("WebSocket already disconnected, scheduling reconnect"),void L(this,r,"m",j).call(this);H("Forcing WebSocket reconnection to clean up subscription state"),L(this,l,"f").close(4998,"Internal: Force reconnect")}sendMessage(e){if(L(this,c,"f")!==Y.CONNECTED||!L(this,l,"f"))throw new Error(`Cannot send message: WebSocket is ${L(this,c,"f")}`);try{L(this,l,"f").send(JSON.stringify(e))}catch(e){const t=(0,$.getErrorMessage)(e);throw L(this,r,"m",O).call(this,new Error(t)),new Error(t)}}async sendRequest(e){if(L(this,c,"f")!==Y.CONNECTED)throw new Error(`Cannot send request: WebSocket is ${L(this,c,"f")}`);const t=e.data?.requestId??(0,K.v4)(),n={event:e.event,data:{...e.data,requestId:t}};return new Promise((e,r)=>{const s=setTimeout(()=>{L(this,m,"f").delete(t),H("Request timeout - triggering reconnection",{timeout:L(this,o,"f").requestTimeout}),L(this,c,"f")===Y.CONNECTED&&L(this,l,"f")&&L(this,l,"f").close(3e3,"Request timeout - forcing reconnect"),r(new Error(`Request timeout after ${L(this,o,"f").requestTimeout}ms`))},L(this,o,"f").requestTimeout);L(this,m,"f").set(t,{resolve:e,reject:r,timeout:s});try{this.sendMessage(n)}catch(e){L(this,m,"f").delete(t),clearTimeout(s),r(e instanceof Error?e:new Error(String(e)))}})}getConnectionInfo(){return{state:L(this,c,"f"),url:L(this,o,"f").url,timeout:L(this,o,"f").timeout,reconnectDelay:L(this,o,"f").reconnectDelay,maxReconnectDelay:L(this,o,"f").maxReconnectDelay,requestTimeout:L(this,o,"f").requestTimeout,reconnectAttempts:L(this,u,"f"),connectedAt:L(this,f,"f")}}getSubscriptionsByChannel(e){const t=[];for(const[n,r]of L(this,b,"f"))r.channels.includes(e)&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe});return t}channelHasSubscription(e){for(const t of L(this,b,"f").values())if(t.channels.includes(e))return!0;return!1}findSubscriptionsByChannelPrefix(e){const t=[];for(const[n,r]of L(this,b,"f")){r.channels.some(t=>t.startsWith(e))&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe})}return t}addChannelCallback(e){const t={channelName:e.channelName,callback:e.callback};L(this,C,"f").has(e.channelName)||L(this,C,"f").set(e.channelName,t)}removeChannelCallback(e){return L(this,C,"f").delete(e)}getChannelCallbacks(){return Array.from(L(this,C,"f").values())}destroy(){L(this,r,"m",N).call(this),x(this,u,0,"f"),this.disconnect()}async subscribe(e){const{channels:t,channelType:n,callback:r,requestId:s}=e;if(L(this,c,"f")!==Y.CONNECTED)throw new Error(`Cannot create subscription(s) ${t.join(", ")}: WebSocket is ${L(this,c,"f")}`);const o=await this.sendRequest({event:"subscribe",data:{channels:t,requestId:s}});if(!o?.subscriptionId)throw new Error("Invalid subscription response: missing subscription ID");const{subscriptionId:i}=o,a=async e=>{await this.sendRequest({event:"unsubscribe",data:{subscription:i,channels:t,requestId:e}}),L(this,b,"f").delete(i)},l={subscriptionId:i,channels:[...t],channelType:n,unsubscribe:a};return L(this,b,"f").set(i,{subscriptionId:i,channels:[...t],channelType:n,callback:r,unsubscribe:a}),l}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,g=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,f=new WeakMap,b=new WeakMap,C=new WeakMap,y=new WeakMap,r=new WeakSet,w=function(){L(this,s,"f").subscribe("AuthenticationController:stateChange",e=>{e.isSignedIn?this.connect():this.disconnect()},e=>({isSignedIn:e.isSignedIn})),L(this,s,"f").subscribe("KeyringController:unlock",()=>{this.connect()}),L(this,s,"f").subscribe("KeyringController:lock",()=>{this.disconnect()})},v=function(e){const t=L(this,o,"f").url,n=new URL(t);return n.searchParams.set("token",e),n.toString()},M=async function(e){const t=L(this,r,"m",v).call(this,e);return L(this,r,"m",F).call(this,Y.CONNECTING),L(this,a,"f").call(this,{name:`${W} Connection`,data:{reconnectAttempt:L(this,u,"f")},tags:{service:W}},()=>new Promise((e,n)=>{const s=new WebSocket(t);x(this,g,setTimeout(()=>{H("WebSocket connection timeout - forcing close",{timeout:L(this,o,"f").timeout}),s.close()},L(this,o,"f").timeout),"f"),s.onopen=()=>{L(this,g,"f")&&(clearTimeout(L(this,g,"f")),x(this,g,null,"f")),x(this,l,s,"f"),L(this,r,"m",F).call(this,Y.CONNECTED),x(this,f,Date.now(),"f"),x(this,p,setTimeout(()=>{x(this,p,null,"f"),x(this,u,0,"f"),L(this,r,"m",D).call(this),H("Connection stable - reset reconnect attempts and backoff")},1e4),"f"),e()},s.onclose=t=>{if(H("WebSocket onclose event triggered",{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean}),L(this,c,"f")===Y.DISCONNECTED)return;const s=4999===t.code&&t.reason===q;L(this,c,"f")===Y.CONNECTING&&(s?e():n(new Error(`WebSocket connection closed during connection: ${t.code} ${t.reason}`)));const o=L(this,f,"f")>0?Date.now()-L(this,f,"f"):0;L(this,r,"m",N).call(this),x(this,l,undefined,"f"),x(this,h,null,"f"),x(this,f,0,"f"),L(this,r,"m",B).call(this,new Error(`WebSocket connection closed: ${t.code} ${t.reason||z(t.code)}`)),L(this,r,"m",R).call(this),L(this,r,"m",F).call(this,Y.DISCONNECTED),s?x(this,u,0,"f"):L(this,r,"m",j).call(this),L(this,a,"f").call(this,{name:`${W} Disconnection`,data:{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean,reconnectAttempts:L(this,u,"f"),...o>0&&{connectionDuration_ms:o}},tags:{service:W}})},s.onmessage=e=>{try{const t=L(this,r,"m",_).call(this,e.data);L(this,r,"m",k).call(this,t)}catch{}}}))},k=function(e){if(L(this,r,"m",S).call(this,e))L(this,r,"m",A).call(this,e);else{if(L(this,r,"m",I).call(this,e)){const t=e;if(L(this,r,"m",E).call(this,t))return}if(L(this,r,"m",T).call(this,e)){const t=e;L(this,r,"m",P).call(this,t)}}},S=function(e){return"data"in e&&e.data&&"object"==typeof e.data&&"requestId"in e.data},I=function(e){return"subscriptionId"in e&&!L(this,r,"m",S).call(this,e)},T=function(e){return"channel"in e},A=function(e){const{requestId:t}=e.data,n=L(this,m,"f").get(t);n&&(L(this,m,"f").delete(t),clearTimeout(n.timeout),e.data.failed&&e.data.failed.length>0?n.reject(new Error(`Request failed: ${e.data.failed.join(", ")}`)):n.resolve(e.data))},P=function(e){0!==L(this,C,"f").size&&L(this,C,"f").get(e.channel)?.callback(e)},E=function(e){const{subscriptionId:t,timestamp:n,channel:r}=e;if(null!==t&&t!==undefined){const s=L(this,b,"f").get(t);if(!s)return!1;const o=Date.now()-n;return L(this,a,"f").call(this,{name:`${W} Notification`,data:{channel:r,latency_ms:o,subscriptionId:t},tags:{service:W,notification_type:s.channelType}},()=>{s.callback?.(e)}),!0}return!1},_=function(e){return JSON.parse(e)},O=function(e){},j=function(){if(L(this,d,"f"))return;x(this,u,L(this,u,"f")+1,"f");const e=L(this,y,"f").duration;x(this,y,L(this,y,"f").next({attempt:L(this,u,"f")}),"f"),H("Scheduling reconnect",{attempt:L(this,u,"f"),delay_ms:e}),x(this,d,setTimeout(()=>{if(x(this,d,null,"f"),L(this,i,"f")&&!L(this,i,"f").call(this))return x(this,u,0,"f"),void L(this,r,"m",D).call(this);this.connect()},e),"f")},D=function(){x(this,y,new U.ExponentialBackoff({initialDelay:L(this,o,"f").reconnectDelay,maxDelay:L(this,o,"f").maxReconnectDelay}).next(),"f")},N=function(){L(this,d,"f")&&(clearTimeout(L(this,d,"f")),x(this,d,null,"f")),L(this,g,"f")&&(clearTimeout(L(this,g,"f")),x(this,g,null,"f")),L(this,p,"f")&&(clearTimeout(L(this,p,"f")),x(this,p,null,"f"))},B=function(e){for(const[,t]of L(this,m,"f"))clearTimeout(t.timeout),t.reject(e);L(this,m,"f").clear()},R=function(){L(this,b,"f").clear()},F=function(e){const t=L(this,c,"f");x(this,c,e,"f"),t!==e&&L(this,s,"f").publish("BackendWebSocketService:connectionStateChanged",this.getConnectionInfo())}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/BackendWebSocketService.cjs"}],[1495,{"./AccountActivityService.cjs":1493,"./BackendWebSocketService.cjs":1494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.BackendWebSocketService=void 0;var r=e("./BackendWebSocketService.cjs");Object.defineProperty(n,"BackendWebSocketService",{enumerable:!0,get:function(){return r.BackendWebSocketService}});var s=e("./AccountActivityService.cjs");Object.defineProperty(n,"AccountActivityService",{enumerable:!0,get:function(){return s.AccountActivityService}})}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/index.cjs"}],[1496,{"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("core-backend")}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/logger.cjs"}],[1497,{"./constants.cjs":1498,"./utils.cjs":1500,"@metamask/base-controller":1401,"@metamask/keyring-controller":2310,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=n.controllerName=void 0;const a=e("@metamask/base-controller"),l=e("@metamask/keyring-controller"),c=e("@metamask/utils"),u=e("./constants.cjs"),d=e("./utils.cjs");n.controllerName="DelegationController";const g={delegations:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}};class p extends a.BaseController{constructor({messenger:e,state:t,hashDelegation:i,getDelegationEnvironment:a}){super({messenger:e,metadata:g,name:n.controllerName,state:{delegations:{},...t}}),r.set(this,void 0),s.set(this,void 0),o(this,r,i,"f"),o(this,s,a,"f")}async signDelegation(e){const{delegation:t,chainId:n}=e,{DelegationManager:r}=i(this,s,"f").call(this,n),o=(0,d.createTypedMessageParams)({chainId:(0,c.hexToNumber)(n),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:r});return await this.messenger.call("KeyringController:signTypedMessage",o,l.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,n=i(this,r,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,u.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update(e=>{e.delegations[n]=t})}list(e){const t=this.messenger.call("AccountsController:getSelectedAccount").address;let n=Object.values(this.state.delegations);e?.from&&(n=n.filter(t=>(0,d.isHexEqual)(t.delegation.delegator,e.from))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(n=n.filter(e=>(0,d.isHexEqual)(e.delegation.delegate,t)));const r=e?.chainId;r&&(n=n.filter(e=>(0,d.isHexEqual)(e.chainId,r)));const s=e?.tags;return s&&s.length>0&&(n=n.filter(e=>s.every(t=>e.tags.includes(t)))),n}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],n=this.retrieve(e);if(!n)return null;t.push(n);for(let e=n.delegation.authority;e!==u.ROOT_AUTHORITY;){const n=this.retrieve(e);if(!n)throw new Error("Invalid delegation chain");t.push(n),e=n.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),n=[e],r=[];for(;n.length>0;){const e=n.pop();t.filter(([t,n])=>n.delegation.authority===e).forEach(([e])=>{n.push(e)}),r.push(e)}return this.update(e=>{r.forEach(t=>{delete e.delegations[t]})}),r.length}}n.DelegationController=p,r=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1498,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SIGNABLE_DELEGATION_TYPED_DATA=n.ROOT_AUTHORITY=void 0,n.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";n.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[1499,{"./DelegationController.cjs":1497},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=void 0;var r=e("./DelegationController.cjs");Object.defineProperty(n,"DelegationController",{enumerable:!0,get:function(){return r.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[15,{"../../../shared/notifications":6049,"@metamask/announcement-controller":1286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementControllerInit=void 0;var r=e("@metamask/announcement-controller"),s=e("../../../shared/notifications");n.AnnouncementControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AnnouncementController({messenger:e,allAnnouncements:s.UI_NOTIFICATIONS,state:t.AnnouncementController})})}}},{package:"$root$",file:"app/scripts/controller-init/announcement-controller-init.ts"}],[150,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getStorageServiceMessenger=function(e){return new r.Messenger({namespace:"StorageService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/storage-service-messenger.ts"}],[1500,{"./constants.cjs":1498,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createTypedMessageParams=n.toDelegationStruct=n.isHexEqual=void 0;const r=e("@metamask/utils"),s=e("./constants.cjs");n.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};n.toDelegationStruct=e=>{const t=e.caveats.map(e=>({enforcer:(0,r.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args})),n="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,r.getChecksumAddress)(e.delegate),delegator:(0,r.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:n,signature:e.signature}},n.createTypedMessageParams=function(e){const{chainId:t,from:r,delegation:o,verifyingContract:i}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:i},message:(0,n.toDelegationStruct)(o)},from:r}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[1502,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},s={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},o={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},i={arbitrum:42161,arbitrumNova:42170,base:8453,berachain:80094,bsc:56,gnosis:100,ink:57073,linea:59144,mainnet:1,monad:143,optimism:10,polygon:137,sei:1329,sonic:146,unichain:130,bscTestnet:97,arbitrumSepolia:421614,baseSepolia:84532,berachainBepolia:80069,chiado:10200,citreaTestnet:5115,hoodiTestnet:560048,inkSepolia:763373,lineaSepolia:59141,megaEthTestnet:6342,monadTestnet:10143,optimismSepolia:11155420,polygonAmoy:80002,seiTestnet:1328,sepolia:11155111,sonicTestnet:14601,unichainSepolia:1301,lineaGoerli:59140},a={"1.0.0":{[i.optimism]:o,[i.polygon]:o,[i.base]:o,[i.arbitrum]:o,[i.linea]:o,[i.sepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[i.lineaSepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[i.arbitrum]:s,[i.base]:s,[i.linea]:s,[i.optimism]:s,[i.polygon]:s,[i.sepolia]:s,[i.lineaSepolia]:s,[i.baseSepolia]:{...s,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[i.mainnet]:r,[i.polygon]:r,[i.bsc]:r,[i.optimism]:r,[i.arbitrum]:r,[i.ink]:r,[i.linea]:r,[i.base]:r,[i.gnosis]:r,[i.berachain]:r,[i.unichain]:r,[i.arbitrumNova]:r,[i.sei]:r,[i.sonic]:r,[i.monad]:r,[i.bscTestnet]:r,[i.citreaTestnet]:r,[i.megaEthTestnet]:r,[i.chiado]:r,[i.lineaSepolia]:r,[i.berachainBepolia]:r,[i.baseSepolia]:r,[i.arbitrumSepolia]:r,[i.sepolia]:r,[i.optimismSepolia]:r,[i.unichainSepolia]:r,[i.polygonAmoy]:r,[i.inkSepolia]:r,[i.monadTestnet]:r,[i.seiTestnet]:r,[i.sonicTestnet]:r,[i.hoodiTestnet]:r}};n.CHAIN_ID=i,n.DELEGATOR_CONTRACTS=a}}},{package:"@metamask/delegation-deployments",file:"node_modules/@metamask/delegation-deployments/dist/index.cjs"}],[151,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubjectMetadataControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubjectMetadataController",parent:e});return e.delegate({messenger:t,actions:["PermissionController:hasPermissions"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subject-metadata-controller-messenger.ts"}],[152,{"./subscription-controller-messenger":153,"./subscription-service-messenger":154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getSubscriptionControllerInitMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerInitMessenger}}),Object.defineProperty(n,"getSubscriptionControllerMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerMessenger}}),Object.defineProperty(n,"getSubscriptionServiceMessenger",{enumerable:!0,get:function(){return s.getSubscriptionServiceMessenger}});var r=e("./subscription-controller-messenger"),s=e("./subscription-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/index.ts"}],[153,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getSubscriptionControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionController",parent:e});return e.delegate({messenger:t,events:["AuthenticationController:stateChange"],actions:["AuthenticationController:getBearerToken","AuthenticationController:performSignOut"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-controller-messenger.ts"}],[154,{"../../../services/subscription/types":605,"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionServiceMessenger=function(e){const t=new r.Messenger({namespace:s.SERVICE_NAME,parent:e});return e.delegate({messenger:t,actions:["SubscriptionController:getPricing","SubscriptionController:getSubscriptions","SubscriptionController:startShieldSubscriptionWithCard","SubscriptionController:updatePaymentMethod","SubscriptionController:getCryptoApproveTransactionParams","SubscriptionController:getBillingPortalUrl","SubscriptionController:submitSponsorshipIntents","SubscriptionController:getState","SubscriptionController:submitShieldSubscriptionCryptoApproval","SubscriptionController:linkRewards","AppStateController:getState","AppStateController:setPendingShieldCohort","AuthenticationController:getBearerToken","TransactionController:getTransactions","AccountsController:getState","PreferencesController:getState","SmartTransactionsController:getState","NetworkController:getState","SwapsController:getState","RemoteFeatureFlagController:getState","MetaMetricsController:trackEvent","KeyringController:getState","RewardsController:getSeasonStatus","RewardsController:getSeasonMetadata","RewardsController:getHasAccountOptedIn"]}),t};var r=e("@metamask/messenger"),s=e("../../../services/subscription/types")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-service-messenger.ts"}],[155,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSwapsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SwapsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","NetworkController:getState"]}),t},n.getSwapsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SwapsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","TokenRatesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/swaps-controller-messenger.ts"}],[156,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenBalancesControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState","RemoteFeatureFlagController:getState","OnboardingController:getState"]}),t},n.getTokenBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getState","NetworkController:getNetworkClientById","PreferencesController:getState","TokensController:getState","TokenDetectionController:addDetectedTokensViaPolling","TokenDetectionController:addDetectedTokensViaWs","TokenDetectionController:detectTokens","AccountsController:getSelectedAccount","AccountsController:listAccounts","AccountTrackerController:getState","AccountTrackerController:updateNativeBalances","AccountTrackerController:updateStakedBalances","KeyringController:getState","AuthenticationController:getBearerToken"],events:["NetworkController:stateChange","PreferencesController:stateChange","TokensController:stateChange","KeyringController:accountRemoved","KeyringController:lock","KeyringController:unlock","AccountActivityService:balanceUpdated","AccountActivityService:statusChanged","AccountsController:selectedEvmAccountChange","TransactionController:transactionConfirmed","TransactionController:incomingTransactionsReceived"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-balances-controller-messenger.ts"}],[157,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenDetectionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AssetsContractController:getBalancesInSingleCall","MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getTokenDetectionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","KeyringController:getState","NetworkController:getNetworkClientById","NetworkController:getNetworkConfigurationByNetworkClientId","NetworkController:getState","TokensController:getState","TokensController:addDetectedTokens","TokenListController:getState","PreferencesController:getState","TokensController:addTokens","NetworkController:findNetworkClientIdByChainId","AuthenticationController:getBearerToken"],events:["AccountsController:selectedEvmAccountChange","KeyringController:lock","KeyringController:unlock","NetworkController:networkDidChange","TokenListController:stateChange","PreferencesController:stateChange","TransactionController:transactionConfirmed"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-detection-controller-messenger.ts"}],[158,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenListControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenListControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange"]}),t},n.getTokenListControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenListController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-list-controller-messenger.ts"}],[159,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokensControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokensControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getTokensControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokensController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","AccountsController:listAccounts","ApprovalController:addRequest","NetworkController:getNetworkClientById"],events:["AccountsController:selectedEvmAccountChange","KeyringController:accountRemoved","NetworkController:networkDidChange","NetworkController:stateChange","PreferencesController:stateChange","TokenListController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/tokens-controller-messenger.ts"}],[16,{"../controllers/app-metadata":219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppMetadataControllerInit=void 0;var r,s=(r=e("../controllers/app-metadata"))&&r.__esModule?r:{default:r};n.AppMetadataControllerInit=({controllerMessenger:e,persistedState:t,currentMigrationVersion:n})=>({controller:new s.default({state:t.AppMetadataController,messenger:e,currentAppVersion:"13.16.3",currentMigrationVersion:n})})}}},{package:"$root$",file:"app/scripts/controller-init/app-metadata-controller-init.ts"}],[160,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TransactionControllerInit",parent:e});return e.delegate({messenger:t,events:["BridgeStatusController:stateChange","SmartTransactionsController:smartTransaction","TransactionController:postTransactionBalanceUpdated","TransactionController:stateChange","TransactionController:transactionApproved","TransactionController:transactionConfirmed","TransactionController:transactionDropped","TransactionController:transactionFailed","TransactionController:transactionNewSwapApproval","TransactionController:transactionNewSwap","TransactionController:transactionRejected","TransactionController:transactionSubmitted","TransactionController:unapprovedTransactionAdded"],actions:["AccountTrackerController:getState","ApprovalController:acceptRequest","ApprovalController:addRequest","ApprovalController:endFlow","ApprovalController:startFlow","ApprovalController:updateRequestState","AppStateController:getState","AuthenticationController:getBearerToken","BridgeStatusController:getState","BridgeStatusController:submitTx","CurrencyRateController:getState","DelegationController:signDelegation","InstitutionalSnapController:beforeCheckPendingTransactionHook","InstitutionalSnapController:publishHook","KeyringController:signEip7702Authorization","KeyringController:signTypedMessage","NetworkController:findNetworkClientIdByChainId","NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","SubscriptionController:getSubscriptionByProduct","SubscriptionService:submitSubscriptionSponsorshipIntent","SwapsController:setApproveTxId","SwapsController:setTradeTxId","TransactionController:addTransaction","TransactionController:addTransactionBatch","TransactionController:estimateGas","TransactionController:getState","TransactionController:updateTransaction","TransactionPayController:getState","TransactionPayController:getStrategy"]}),t},n.getTransactionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TransactionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","AccountsController:getState","ApprovalController:addRequest","KeyringController:signEip7702Authorization","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-controller-messenger.ts"}],[161,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionPayControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TransactionPayControllerInit",parent:e});return e.delegate({messenger:t,actions:["DelegationController:signDelegation","KeyringController:signEip7702Authorization"],events:[]}),t},n.getTransactionPayControllerMessenger=function(e){const t=new r.Messenger({namespace:"TransactionPayController",parent:e});return e.delegate({messenger:t,actions:["AccountTrackerController:getState","BridgeController:fetchQuotes","BridgeStatusController:submitTx","CurrencyRateController:getState","GasFeeController:getState","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","TokenBalancesController:getState","TokenListController:getState","TokenRatesController:getState","TokensController:getState","TransactionController:getGasFeeTokens","TransactionController:getState","TransactionController:updateTransaction"],events:["BridgeStatusController:stateChange","TransactionController:stateChange","TransactionController:unapprovedTransactionAdded"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-pay-controller-messenger.ts"}],[162,{"@metamask/messenger":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserOperationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationControllerInit",parent:e});return e.delegate({messenger:t,actions:["TransactionController:emulateNewTransaction","TransactionController:emulateTransactionUpdate"]}),t},n.getUserOperationControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","NetworkController:getNetworkClientById","KeyringController:prepareUserOperation","KeyringController:patchUserOperation","KeyringController:signUserOperation"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/user-operation-controller-messenger.ts"}],[163,{"../../../shared/lib/sentry":5992,"../controllers/metametrics-controller":226,"../lib/segment":326},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsControllerInit=void 0;var r,s=(r=e("../controllers/metametrics-controller"))&&r.__esModule?r:{default:r},o=e("../lib/segment"),i=e("../../../shared/lib/sentry");n.MetaMetricsControllerInit=({controllerMessenger:e,extension:t,persistedState:n})=>({controller:new s.default({state:n.MetaMetricsController,messenger:e,version:"13.16.3",environment:"production",segment:o.segment,extension:t,captureException:i.captureException})})}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-controller-init.ts"}],[164,{"../controllers/metametrics-data-deletion/metametrics-data-deletion":227,"../services/data-deletion-service":594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionControllerInit=void 0;var r=e("../controllers/metametrics-data-deletion/metametrics-data-deletion"),s=e("../services/data-deletion-service");n.MetaMetricsDataDeletionControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=new s.DataDeletionService;return{controller:new r.MetaMetricsDataDeletionController({messenger:e,state:t.MetaMetricsDataDeletionController,dataDeletionService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-data-deletion-controller-init.ts"}],[165,{"./multichain-account-service-init":166,"./multichain-assets-controller-init":167,"./multichain-balances-controller-init":168,"./multichain-network-controller-init":169,"./multichain-rates-assets-controller-init":171,"./multichain-transactions-controller-init":172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountServiceInit",{enumerable:!0,get:function(){return r.MultichainAccountServiceInit}}),Object.defineProperty(n,"MultichainAssetsControllerInit",{enumerable:!0,get:function(){return s.MultichainAssetsControllerInit}}),Object.defineProperty(n,"MultichainAssetsRatesControllerInit",{enumerable:!0,get:function(){return l.MultichainAssetsRatesControllerInit}}),Object.defineProperty(n,"MultichainBalancesControllerInit",{enumerable:!0,get:function(){return o.MultichainBalancesControllerInit}}),Object.defineProperty(n,"MultichainNetworkControllerInit",{enumerable:!0,get:function(){return a.MultichainNetworkControllerInit}}),Object.defineProperty(n,"MultichainTransactionsControllerInit",{enumerable:!0,get:function(){return i.MultichainTransactionsControllerInit}});var r=e("./multichain-account-service-init"),s=e("./multichain-assets-controller-init"),o=e("./multichain-balances-controller-init"),i=e("./multichain-transactions-controller-init"),a=e("./multichain-network-controller-init"),l=e("./multichain-rates-assets-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/multichain/index.ts"}],[166,{"../../../../shared/lib/multichain-accounts/remote-feature-flag":5982,"../../../../shared/lib/multichain-feature-flags":5983,"../../../../shared/lib/trace":5999,"../../lib/util":368,"@metamask/multichain-account-service":2377},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountServiceInit=void 0;var r=e("@metamask/multichain-account-service"),s=e("../../lib/util"),o=e("../../../../shared/lib/multichain-accounts/remote-feature-flag"),i=e("../../../../shared/lib/multichain-feature-flags"),a=e("../../../../shared/lib/trace");n.MultichainAccountServiceInit=({controllerMessenger:e,initMessenger:t})=>{var n,l;const c={maxConcurrency:1,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},u=new r.AccountProviderWrapper(e,new r.BtcAccountProvider(e,c)),d=new r.AccountProviderWrapper(e,new r.TrxAccountProvider(e,c)),g=new r.MultichainAccountService({messenger:e,providers:[u,d],providerConfigs:{[r.SOL_ACCOUNT_PROVIDER_NAME]:c},config:{trace:a.trace}}),p=t.call("PreferencesController:getState");t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,n)=>{const{useExternalServices:r}=e,{useExternalServices:s}=n;if(r!==s){const{remoteFeatureFlags:e}=t.call("RemoteFeatureFlagController:getState"),n=null==e?void 0:e.enableMultichainAccountsState2;(0,o.isMultichainAccountsFeatureEnabled)(n,o.FEATURE_VERSION_2)&&g.setBasicFunctionality(s).catch(e=>{console.error("Failed to set basic functionality on MultichainAccountService:",e)})}return!0},p));const h=t.call("RemoteFeatureFlagController:getState"),m=(0,i.isMultichainFeatureEnabled)(null==h||null===(n=h.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts);u.setEnabled(m);const f=(0,i.isMultichainFeatureEnabled)(null==h||null===(l=h.remoteFeatureFlags)||void 0===l?void 0:l.tronAccounts);return d.setEnabled(f),e.subscribe("RemoteFeatureFlagController:stateChange",(0,s.previousValueComparator)((e,t)=>{var n,r,s,o;const a=(0,i.isMultichainFeatureEnabled)(null==e||null===(n=e.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts),l=(0,i.isMultichainFeatureEnabled)(null==t||null===(r=t.remoteFeatureFlags)||void 0===r?void 0:r.bitcoinAccounts);a!==l&&(u.setEnabled(l),l&&g.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Bitcoin provider:",e)}));const c=(0,i.isMultichainFeatureEnabled)(null==e||null===(s=e.remoteFeatureFlags)||void 0===s?void 0:s.tronAccounts),p=(0,i.isMultichainFeatureEnabled)(null==t||null===(o=t.remoteFeatureFlags)||void 0===o?void 0:o.tronAccounts);return c!==p&&(d.setEnabled(p),p&&g.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Tron provider:",e)})),!0},h)),{memStateKey:null,persistedStateKey:null,controller:g}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-account-service-init.ts"}],[167,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsController({messenger:e,state:t.MultichainAssetsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-assets-controller-init.ts"}],[168,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainBalancesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainBalancesController({messenger:e,state:t.MultichainBalancesController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-balances-controller-init.ts"}],[169,{"./multichain-network-service-init":170,"@metamask/multichain-network-controller":2406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkControllerInit=void 0;var r=e("@metamask/multichain-network-controller"),s=e("./multichain-network-service-init");n.MultichainNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,s.MultichainNetworkServiceInit)();return{controller:new r.MultichainNetworkController({messenger:e,state:t.MultichainNetworkController,networkService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-controller-init.ts"}],[17,{"../controllers/app-state-controller":220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateControllerInit=void 0;var r=e("../controllers/app-state-controller");n.AppStateControllerInit=({controllerMessenger:e,persistedState:t,setLocked:n,extension:s})=>({controller:new r.AppStateController({messenger:e,state:t.AppStateController,onInactiveTimeout:()=>n(),extension:s})})}}},{package:"$root$",file:"app/scripts/controller-init/app-state-controller-init.ts"}],[170,{"@metamask/multichain-network-controller":2406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkServiceInit=void 0;var r=e("@metamask/multichain-network-controller");n.MultichainNetworkServiceInit=()=>new r.MultichainNetworkService({fetch:window.fetch.bind(window)})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-service-init.ts"}],[171,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsRatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsRatesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsRatesController({messenger:e,state:t.MultichainAssetsRatesController,interval:18e4})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-rates-assets-controller-init.ts"}],[172,{"@metamask/multichain-transactions-controller":2411},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTransactionsControllerInit=void 0;var r=e("@metamask/multichain-transactions-controller");n.MultichainTransactionsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainTransactionsController({messenger:e,state:t.MultichainTransactionsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-transactions-controller-init.ts"}],[173,{"../../../shared/constants/network":5896,"../../../shared/constants/time":5913,"../../../shared/lib/network-utils":5988,"../../../shared/lib/sentry":5992,"../lib/network-controller/messenger-action-handlers":292,"@metamask/connectivity-controller":1482,"@metamask/controller-utils":1488,"@metamask/network-controller":2426,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkControllerInit=n.ADDITIONAL_DEFAULT_NETWORKS=void 0;var r=e("@metamask/network-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/connectivity-controller"),i=e("@metamask/utils"),a=e("../../../shared/constants/time"),l=e("../../../shared/lib/network-utils"),c=e("../lib/network-controller/messenger-action-handlers"),u=e("../../../shared/constants/network"),d=e("../../../shared/lib/sentry");const g=n.ADDITIONAL_DEFAULT_NETWORKS=[s.ChainId["monad-testnet"],s.ChainId["megaeth-testnet-v2"]];n.NetworkControllerInit=({controllerMessenger:e,infuraProjectId:t,initMessenger:n,persistedState:p})=>{const h=n.call("RemoteFeatureFlagController:getState"),m=function(e){let t=e;if(!t){var n,o,a,l;t=(0,r.getDefaultNetworkControllerState)(g);const e=t.networkConfigurationsByChainId??{};let c;Object.values(e).forEach(e=>{const t=e.rpcEndpoints[0].networkClientId;(0,i.hasProperty)(s.BlockExplorerUrl,t)&&(e.blockExplorerUrls=[s.BlockExplorerUrl[t]]),e.defaultBlockExplorerUrlIndex=0}),e[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("ethereum-mainnet"),e[u.CHAIN_IDS.LINEA_MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("linea-mainnet"),e[u.CHAIN_IDS.BASE].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("base-mainnet"),null!==(n=e[u.CHAIN_IDS.ARBITRUM])&&void 0!==n&&null!==(n=n.rpcEndpoints)&&void 0!==n&&n[0]&&(e[u.CHAIN_IDS.ARBITRUM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("arbitrum-mainnet")),null!==(o=e[u.CHAIN_IDS.BSC])&&void 0!==o&&null!==(o=o.rpcEndpoints)&&void 0!==o&&o[0]&&(e[u.CHAIN_IDS.BSC].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("bsc-mainnet")),null!==(a=e[u.CHAIN_IDS.OPTIMISM])&&void 0!==a&&null!==(a=a.rpcEndpoints)&&void 0!==a&&a[0]&&(e[u.CHAIN_IDS.OPTIMISM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("optimism-mainnet")),null!==(l=e[u.CHAIN_IDS.POLYGON])&&void 0!==l&&null!==(l=l.rpcEndpoints)&&void 0!==l&&l[0]&&(e[u.CHAIN_IDS.POLYGON].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("polygon-mainnet")),e[u.CHAIN_IDS.MAINNET].name="Ethereum",e[u.CHAIN_IDS.LINEA_MAINNET].name="Linea",e[u.CHAIN_IDS.BASE].name="Base",e[u.CHAIN_IDS.ARBITRUM].name="Arbitrum",e[u.CHAIN_IDS.BSC].name="BNB Chain",e[u.CHAIN_IDS.OPTIMISM].name="OP",e[u.CHAIN_IDS.POLYGON].name="Polygon",delete e[u.CHAIN_IDS.SEI],c=e[u.CHAIN_IDS.MAINNET],t.selectedNetworkClientId=c.rpcEndpoints[c.defaultRpcEndpointIndex].networkClientId}return t.networkConfigurationsByChainId&&!Object.values(t.networkConfigurationsByChainId).flatMap(e=>e.rpcEndpoints.map(e=>e.networkClientId)).includes(t.selectedNetworkClientId)&&((0,d.captureException)(new Error(`NetworkController state is invalid: \`selectedNetworkClientId\` '${t.selectedNetworkClientId}' does not refer to an RPC endpoint within a network configuration`)),t.selectedNetworkClientId=t.networkConfigurationsByChainId[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].networkClientId),t}(p.NetworkController),f=e=>e.remoteFeatureFlags.walletFrameworkRpcFailoverEnabled??!1,b=new r.NetworkController({messenger:e,state:m,infuraProjectId:t,getBlockTrackerOptions:()=>({pollingInterval:20*a.SECOND,retryTimeout:20*a.SECOND}),getRpcServiceOptions:t=>{const n=s.DEFAULT_MAX_RETRIES,r={fetch:globalThis.fetch.bind(globalThis),btoa:globalThis.btoa.bind(globalThis),isOffline:()=>e.call("ConnectivityController:getState").connectivityStatus===o.CONNECTIVITY_STATUSES.Offline},i={circuitBreakDuration:30*a.SECOND,maxRetries:n};return(0,l.getIsQuicknodeEndpointUrl)(t)?{...r,policyOptions:{...i,maxConsecutiveFailures:10*(n+1)}}:{...r,policyOptions:{...i,maxConsecutiveFailures:3*(n+1)}}},additionalDefaultNetworks:g,isRpcFailoverEnabled:f(h)});return n.subscribe("NetworkController:rpcEndpointUnavailable",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointUnavailable)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("NetworkController:rpcEndpointDegraded",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointDegraded)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("RemoteFeatureFlagController:stateChange",e=>{e?(console.log("Enabling RPC failover."),b.enableRpcFailover()):(console.log("Disabling RPC failover."),b.disableRpcFailover())},f),b.initializeProvider({lookupNetwork:!1}),{controller:b}}}}},{package:"$root$",file:"app/scripts/controller-init/network-controller-init.ts"}],[174,{"../../../../package.json":5871,"@metamask/notification-services-controller/notification-services":2447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationServicesControllerInit=void 0;var r,s=e("@metamask/notification-services-controller/notification-services");const o=((r=e("../../../../package.json"))&&r.__esModule?r:{default:r}).default.version;n.NotificationServicesControllerInit=({controllerMessenger:e,persistedState:t,getController:n})=>({controller:new s.Controller({messenger:e,state:t.NotificationServicesController,env:{featureAnnouncements:{platform:"extension",spaceId:"jdkgyfmyd9sw",accessToken:"mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",platformVersion:o},locale:()=>n("PreferencesController").state.currentLocale.replace("_","-")}})})}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-controller-init.ts"}],[175,{"../../../../shared/constants/metametrics":5892,"../../../../shared/modules/mv3.utils":6026,"../../controllers/push-notifications":240,"@metamask/notification-services-controller/push-services":2468,"@metamask/notification-services-controller/push-services/web":2476,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNormalisedLocale=n.NotificationServicesPushControllerInit=void 0;var r=e("@metamask/notification-services-controller/push-services"),s=e("@metamask/notification-services-controller/push-services/web"),o=e("@metamask/utils"),i=e("../../../../shared/modules/mv3.utils"),a=e("../../controllers/push-notifications"),l=e("../../../../shared/constants/metametrics");const c=e=>e.replace("_","-");n.getNormalisedLocale=c;n.NotificationServicesPushControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:u})=>{const d=new r.Controller({messenger:e,state:{...r.defaultState,...n.NotificationServicesPushController},env:{apiKey:"AIzaSyAA6MJdRkQ00zNh_moTLwxCSxcg3vznbBM",authDomain:"notifications-faf39.firebaseapp.com",storageBucket:"notifications-faf39.appspot.com",projectId:"notifications-faf39",messagingSenderId:"824598429541",appId:"1:824598429541:web:3016d3c90f1f19a6beab8c",measurementId:"G-1FGDTTCWX5",vapidKey:"BBbjhCfHvwIqRsUrBvpfx0viLJIzWHp-beyw8-I124jeZlhNGDOegS_0_I029fFb2stzRuaNkCdTAf9F3I2m3wc"},config:{isPushFeatureEnabled:i.isManifestV3&&!0,platform:"extension",pushService:{createRegToken:s.createRegToken,deleteRegToken:s.deleteRegToken,subscribeToPushNotifications:(0,s.createSubscribeToPushNotifications)({messenger:e,onReceivedHandler:a.onPushNotificationReceived,onClickHandler:a.onPushNotificationClicked})},getLocale:()=>c(u("PreferencesController").state.currentLocale)}});return t.subscribe("NotificationServicesPushController:onNewNotifications",e=>{const n=(0,o.hasProperty)(e,"chain_id")?e.chain_id:null;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationReceived,properties:{notification_id:e.id,notification_type:e.type,chain_id:n}})}),t.subscribe("NotificationServicesPushController:pushNotificationClicked",e=>{var n;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."notification_type"in e&&"on-chain"===e.notification_type&&null!==(n=e.payload)&&void 0!==n&&n.chain_id?{chain_id:e.payload.chain_id}:undefined,data:e}})}),{controller:d}}}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-push-controller-init.ts"}],[176,{"../controllers/onboarding":229},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnboardingControllerInit=void 0;var r,s=(r=e("../controllers/onboarding"))&&r.__esModule?r:{default:r};n.OnboardingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new s.default({state:t.OnboardingController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/onboarding-controller-init.ts"}],[177,{"../controllers/permissions":233,"../controllers/permissions/snaps/specifications":235,"@metamask/permission-controller":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionControllerInit=void 0;var r=e("@metamask/permission-controller"),s=e("../controllers/permissions"),o=e("../controllers/permissions/snaps/specifications");n.PermissionControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n,getController:i})=>{const a=i("ApprovalController"),l=i("KeyringController");return{controller:new r.PermissionController({state:t.PermissionController,messenger:e,caveatSpecifications:(0,s.getCaveatSpecifications)({listAccounts:n.call.bind(n,"AccountsController:listAccounts"),findNetworkClientIdByChainId:n.call.bind(n,"NetworkController:findNetworkClientIdByChainId"),isNonEvmScopeSupported:n.call.bind(n,"MultichainRouter:isSupportedScope"),getNonEvmAccountAddresses:n.call.bind(n,"MultichainRouter:getSupportedAccounts")}),permissionSpecifications:{...(0,s.getPermissionSpecifications)(),...(0,o.getSnapPermissionSpecifications)(n,{addAndShowApprovalRequest:a.addAndShowApprovalRequest.bind(a),addNewKeyring:l.addNewKeyring.bind(l)})},unrestrictedMethods:s.unrestrictedMethods})}}}}},{package:"$root$",file:"app/scripts/controller-init/permission-controller-init.ts"}],[178,{"../../../shared/constants/permissions":5900,"@metamask/permission-log-controller":2537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionLogControllerInit=void 0;var r=e("@metamask/permission-log-controller"),s=e("../../../shared/constants/permissions");n.PermissionLogControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PermissionLogController({messenger:e,state:t.PermissionLogController,restrictedMethods:new Set(Object.keys(s.RestrictedMethods))})})}}},{package:"$root$",file:"app/scripts/controller-init/permission-log-controller-init.ts"}],[179,{"@metamask/phishing-controller":2542,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingControllerInit=void 0;var r=e("@metamask/phishing-controller");e("@metamask/utils");n.PhishingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PhishingController({messenger:e,state:t.PhishingController,hotlistRefreshInterval:undefined,stalelistRefreshInterval:undefined})})}}},{package:"$root$",file:"app/scripts/controller-init/phishing-controller-init.ts"}],[18,{"../init-utils":55,"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("../init-utils");n.AssetsContractControllerInit=({controllerMessenger:e,initMessenger:t})=>({controller:new r.AssetsContractController({messenger:e,chainId:(0,s.getGlobalChainId)(t)}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/assets/assets-contract-controller-init.ts"}],[180,{"../controllers/preferences-controller":237},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesControllerInit=void 0;var r=e("../controllers/preferences-controller");n.PreferencesControllerInit=({controllerMessenger:e,persistedState:t,initLangCode:n})=>({controller:new r.PreferencesController({state:{currentLocale:n??"",...t.PreferencesController},messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/preferences-controller-init.ts"}],[181,{"@metamask/profile-metrics-controller":2584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ProfileMetricsControllerInit=void 0;var r=e("@metamask/profile-metrics-controller");const s=Boolean(!1),o=s?1e3:6e5;n.ProfileMetricsControllerInit=({controllerMessenger:e,persistedState:t,getController:n})=>{const i=n("RemoteFeatureFlagController"),a=n("MetaMetricsController"),l=n("AppStateController");return{controller:new r.ProfileMetricsController({messenger:e,state:t.ProfileMetricsController,interval:s?1e3:1e4,initialDelayDuration:o,assertUserOptedIn:()=>!0===i.state.remoteFeatureFlags.extensionUxPna25&&!0===l.state.pna25Acknowledged&&!0===a.state.participateInMetaMetrics,getMetaMetricsId:()=>a.getMetaMetricsId()})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-controller-init.ts"}],[182,{"../../../shared/modules/authentication":6010,"@metamask/profile-metrics-controller":2584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ProfileMetricsServiceInit=void 0;var r=e("@metamask/profile-metrics-controller"),s=e("../../../shared/modules/authentication");n.ProfileMetricsServiceInit=({controllerMessenger:e})=>{const t=(0,s.loadAuthenticationConfig)();return{persistedStateKey:null,memStateKey:null,controller:new r.ProfileMetricsService({messenger:e,fetch:fetch.bind(globalThis),env:t})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-service-init.ts"}],[183,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.RatesControllerInit=({controllerMessenger:e,persistedState:t})=>({memStateKey:"MultichainRatesController",persistedStateKey:"MultichainRatesController",controller:new r.RatesController({state:t.MultichainRatesController,messenger:e,includeUsdRate:!0})})}}},{package:"$root$",file:"app/scripts/controller-init/rates-controller-init.ts"}],[184,{"../../../development/build/constants":608,"../../../shared/lib/feature-flags/version-gating":5971,"../lib/util":368,"@metamask/remote-feature-flag-controller":2684,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteFeatureFlagControllerInit=void 0,n.getConfigForRemoteFeatureFlagRequest=u;var r=e("@metamask/utils"),s=e("@metamask/remote-feature-flag-controller"),o=e("../../../development/build/constants"),i=e("../lib/util"),a=e("../../../shared/lib/feature-flags/version-gating");const l={flask:s.DistributionType.Flask,main:s.DistributionType.Main,beta:s.DistributionType.Beta,experimental:s.DistributionType.Main},c={[o.ENVIRONMENT.DEVELOPMENT]:s.EnvironmentType.Development,[o.ENVIRONMENT.RELEASE_CANDIDATE]:s.EnvironmentType.ReleaseCandidate,[o.ENVIRONMENT.PRODUCTION]:s.EnvironmentType.Production};function u(){(0,r.assert)("main","METAMASK_BUILD_TYPE is not defined"),(0,r.assert)("production","METAMASK_ENVIRONMENT is not defined");const e="main",t=l[e]||s.DistributionType.Main;let n=c.production||s.EnvironmentType.Development;return{distribution:t,environment:n}}n.RemoteFeatureFlagControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const r=t.call("OnboardingController:getState"),o=t.call("PreferencesController:getState"),{distribution:l,environment:c}=u();let d=!0===o.useExternalServices,g=!0===r.completedOnboarding;const p=()=>!g||!d,h=new s.RemoteFeatureFlagController({state:n.RemoteFeatureFlagController,messenger:e,fetchInterval:9e5,disabled:p(),getMetaMetricsId:()=>t.call("MetaMetricsController:getMetaMetricsId"),clientVersion:(0,a.getBaseSemVerVersion)(),clientConfigApiService:new s.ClientConfigApiService({fetch:globalThis.fetch.bind(globalThis),config:{client:s.ClientType.Extension,distribution:l,environment:c}})});function m(){p()?h.disable():(h.enable(),h.updateRemoteFeatureFlags().catch(e=>{console.error("Failed to update remote feature flags:",e)}))}return t.subscribe("PreferencesController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{useExternalServices:n}=e,{useExternalServices:r}=t;return r!==n&&(d=!0===r,m()),!0},o)),t.subscribe("OnboardingController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{completedOnboarding:n}=e,{completedOnboarding:r}=t;return r!==n&&(g=!0===r,m()),!0},r)),{controller:h}}}}},{package:"$root$",file:"app/scripts/controller-init/remote-feature-flag-controller-init.ts"}],[185,{"../../../shared/lib/feature-flags/version-gating":5971,"../../../shared/lib/manifestFlags":5980,"../controllers/rewards/rewards-controller":241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsControllerInit=void 0;var r=e("../controllers/rewards/rewards-controller"),s=e("../../../shared/lib/manifestFlags"),o=e("../../../shared/lib/feature-flags/version-gating");n.RewardsControllerInit=e=>{const{controllerMessenger:t,persistedState:n,initMessenger:i}=e,a=n.RewardsController??r.defaultRewardsControllerState;return{controller:new r.RewardsController({messenger:t,state:a,isDisabled:()=>{var e;const{remoteFeatureFlags:t}=i.call("RemoteFeatureFlagController:getState"),n=null==t?void 0:t.rewardsEnabled,r=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsEnabled,a=e=>"boolean"==typeof e?e:Boolean((0,o.validatedVersionGatedFeatureFlag)(e)),l=r===undefined?a(n):a(r),{useExternalServices:c}=i.call("PreferencesController:getState");return!l||!c}})}}}}},{package:"$root$",file:"app/scripts/controller-init/rewards-controller-init.ts"}],[186,{"../controllers/rewards/rewards-data-service":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsDataServiceInit=void 0;var r=e("../controllers/rewards/rewards-data-service");n.RewardsDataServiceInit=({controllerMessenger:e})=>({controller:new r.RewardsDataService({messenger:e,fetch:fetch.bind(globalThis)}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/rewards-data-service-init.ts"}],[187,{"./oauth-service-init":188,"./seedless-onboarding-controller-init":189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"OAuthServiceInit",{enumerable:!0,get:function(){return r.OAuthServiceInit}}),Object.defineProperty(n,"SeedlessOnboardingControllerInit",{enumerable:!0,get:function(){return s.SeedlessOnboardingControllerInit}});var r=e("./oauth-service-init"),s=e("./seedless-onboarding-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/index.ts"}],[1876,{"@metamask/keyring-controller":2310},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetCallsStatusCode=n.EIP7682ErrorCode=n.EIP5792ErrorCode=n.SupportedCapabilities=n.MessageType=n.KEYRING_TYPES_SUPPORTING_7702=n.VERSION=void 0;const r=e("@metamask/keyring-controller");var s,o,i,a,l;n.VERSION="2.0.0",n.KEYRING_TYPES_SUPPORTING_7702=[r.KeyringTypes.hd,r.KeyringTypes.simple],function(e){e.SendTransaction="eth_sendTransaction"}(s||(n.MessageType=s={})),function(e){e.AuxiliaryFunds="auxiliaryFunds"}(o||(n.SupportedCapabilities=o={})),function(e){e[e.UnsupportedNonOptionalCapability=5700]="UnsupportedNonOptionalCapability",e[e.UnsupportedChainId=5710]="UnsupportedChainId",e[e.UnknownBundleId=5730]="UnknownBundleId",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(i||(n.EIP5792ErrorCode=i={})),function(e){e[e.UnsupportedAsset=5771]="UnsupportedAsset",e[e.UnsupportedChain=5772]="UnsupportedChain",e[e.MalformedRequiredAssets=5773]="MalformedRequiredAssets"}(a||(n.EIP7682ErrorCode=a={})),function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(l||(n.GetCallsStatusCode=l={}))}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/constants.cjs"}],[1877,{"../constants.cjs":1876,"@metamask/rpc-errors":2692,"@metamask/transaction-controller":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("../constants.cjs");n.getCallsStatus=function(e,t){const n=e.call("TransactionController:getState").transactions.filter(e=>e.batchId===t);if(!n?.length)throw new r.JsonRpcError(o.EIP5792ErrorCode.UnknownBundleId,"No matching bundle found");const i=n[0],{chainId:a,txReceipt:l}=i,c=function(e){const{hash:t,status:n}=e;if(n===s.TransactionStatus.confirmed)return o.GetCallsStatusCode.CONFIRMED;if(n===s.TransactionStatus.failed)return t?o.GetCallsStatusCode.REVERTED:o.GetCallsStatusCode.FAILED_OFFCHAIN;if(n===s.TransactionStatus.dropped)return o.GetCallsStatusCode.REVERTED;return o.GetCallsStatusCode.PENDING}(i),u=l,d=u?.logs??[],g=u&&[{blockHash:u.blockHash,blockNumber:u.blockNumber,gasUsed:u.gasUsed,logs:d.map(e=>({address:e.address,data:e.data,topics:e.topics})),status:u.status,transactionHash:u.transactionHash}];return{version:o.VERSION,id:t,chainId:a,atomic:!0,status:c,receipts:g}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCallsStatus.cjs"}],[1878,{"../constants.cjs":1876,"../utils.cjs":1885},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCapabilities=void 0;const r=e("../constants.cjs"),s=e("../utils.cjs");n.getCapabilities=async function(e,t,n,o){const{getDismissSmartAccountSuggestionEnabled:i,getIsSmartTransaction:a,isAtomicBatchSupported:l,isRelaySupported:c,getSendBundleSupportedChains:u,isAuxiliaryFundsSupported:d}=e;let g=o?.map(e=>e.toLowerCase());if(!g?.length){const e=t.call("NetworkController:getState").networkConfigurationsByChainId;g=Object.keys(e)}const p=await l({address:n,chainIds:g}),h=await async function(e,t,n,r,s,o){const i=o.call("PreferencesController:getState").useTransactionSimulations,a=await Promise.all(t.map(({chainId:e})=>e).map(e=>r(e))),l=await s(e),c=t.map((e,t)=>({...e,relaySupportedForChain:a[t]}));return e.reduce((e,t)=>{const r=c.find(({chainId:e})=>e===t)??{},{isSupported:s=!1,relaySupportedForChain:o}=r,a=n(t),u=l[t]??!1;return i&&(a&&u||s&&o)&&(e[t]={alternateGasFees:{supported:!0}}),e},{})}(g,p,a,c,u,t);return g.reduce((e,o)=>{const a=p.find(({chainId:e})=>e===o)??{},{delegationAddress:l,isSupported:c,upgradeContractAddress:u}=a,g=i();let h=!1;try{const e=(0,s.getAccountKeyringType)(n,t);h=r.KEYRING_TYPES_SUPPORTING_7702.includes(e)}catch{}if(!c&&!(!g&&u&&!l&&h))return e;const m=c?"supported":"ready",f=o;return e[f]===undefined&&(e[f]={}),e[f].atomic={status:m},h&&d(o)&&(e[f].auxiliaryFunds={supported:!0}),e},h)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCapabilities.cjs"}],[1879,{"../constants.cjs":1876,"../utils.cjs":1885,"@metamask/rpc-errors":2692,"@metamask/transaction-controller":3085,"@metamask/utils":3207,lodash:4940,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.processSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("@metamask/utils"),i=e("lodash"),a=e("uuid"),l=e("../constants.cjs"),c=e("../utils.cjs");function u(e){const{version:t}=e;if(t!==l.VERSION)throw r.rpcErrors.invalidInput(`Version not supported: Got ${t}, expected ${l.VERSION}`)}function d(e,t){const{chainId:n}=e;if(n&&n.toLowerCase()!==t.toLowerCase())throw r.rpcErrors.invalidParams(`Chain ID must match the dApp selected network: Got ${n}, expected ${t}`)}function g(e,t,n){const{calls:s,capabilities:o,chainId:i}=e,a=[...Object.keys(o??{}).filter(e=>e!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==o?.[e].optional),...s.flatMap(e=>Object.keys(e.capabilities??{}).filter(t=>t!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==e.capabilities?.[t].optional))];if(a?.length)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capabilities: ${a.join(", ")}`);o?.auxiliaryFunds&&function({auxiliaryFunds:e,chainId:t,keyringType:n,isAuxiliaryFundsSupported:s}){if(e.optional)return;const o=l.KEYRING_TYPES_SUPPORTING_7702.includes(n);if(!o)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capability: ${l.SupportedCapabilities.AuxiliaryFunds}`);if(!s(t))throw new r.JsonRpcError(l.EIP7682ErrorCode.UnsupportedChain,`The wallet no longer supports auxiliary funds on the requested chain: ${t}`);if(!e?.requiredAssets)return;for(const t of e.requiredAssets)if("erc20"!==t.standard)throw new r.JsonRpcError(l.EIP7682ErrorCode.UnsupportedAsset,`The requested asset ${t.address} is not available through the wallets auxiliary fund system: unsupported token standard ${t.standard}`)}({auxiliaryFunds:o.auxiliaryFunds,chainId:i,keyringType:t,isAuxiliaryFundsSupported:n})}function p(e){if(e.capabilities?.auxiliaryFunds?.requiredAssets){const{requiredAssets:t}=e.capabilities.auxiliaryFunds,n=(0,i.groupBy)(t,e=>`${e.address.toLowerCase()}-${e.standard}`),r=Object.values(n).map(e=>{if(1===e.length)return e[0];const t=e.reduce((e,t)=>e+BigInt(t.amount),0n);return{...e[0],amount:(0,o.add0x)(t.toString(16))}});e.capabilities.auxiliaryFunds.requiredAssets=r}}n.processSendCalls=async function(e,t,n,i){const{addTransactionBatch:h,addTransaction:m,getDismissSmartAccountSuggestionEnabled:f,isAtomicBatchSupported:b,validateSecurity:C,isAuxiliaryFundsSupported:y}=e,{calls:w,from:v}=n,{networkClientId:M,origin:k}=i,S=w.map(e=>({params:e})),{chainId:I}=t.call("NetworkController:getNetworkClientById",M).configuration,T=v??t.call("AccountsController:getSelectedAccount").address,A=(0,a.v4)(),P=C.bind(null,A),E=i.id?String(i.id):"";let _;return _=1===Object.keys(S).length?await async function({addTransaction:e,chainId:t,from:n,messenger:r,networkClientId:i,origin:h,requestId:m,securityAlertId:f,sendCalls:b,transactions:C,validateSecurity:y,isAuxiliaryFundsSupported:w}){const v=(0,c.getAccountKeyringType)(n,r);!function(e,t,n,r){u(e),g(e,n,r),d(e,t)}(b,t,v,w);const M={from:n,...C[0].params,type:s.TransactionEnvelopeType.feeMarket},k={method:l.MessageType.SendTransaction,params:[M],origin:h};y(k,t),p(b);const S=function(){const e=(0,a.v4)(),t=new Uint8Array((0,a.parse)(e));return(0,o.bytesToHex)(t)}();return await e(M,{requestId:m,networkClientId:i,origin:h,securityAlertResponse:{securityAlertId:f},batchId:S}),S}({addTransaction:m,chainId:I,from:T,messenger:t,networkClientId:M,origin:k,requestId:E,securityAlertId:A,sendCalls:n,transactions:S,validateSecurity:P,isAuxiliaryFundsSupported:y}):await async function({addTransactionBatch:e,isAtomicBatchSupported:t,chainId:n,from:s,getDismissSmartAccountSuggestionEnabled:o,networkClientId:i,messenger:a,origin:h,requestId:m,sendCalls:f,securityAlertId:b,transactions:C,validateSecurity:y,isAuxiliaryFundsSupported:w}){const v=await t({address:s,chainIds:[n]}),M=v?.[0],k=(0,c.getAccountKeyringType)(s,a),S=o();(function(e,t,n,s,o,i){u(e),function(e,t,n){if(d(e,t),!n)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedChainId,`EIP-7702 not supported on chain: ${t}`)}(e,t,s),g(e,o,i),function(e,t,n){if(t?.delegationAddress)return;if(e)throw new r.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade disabled by the user");if(!l.KEYRING_TYPES_SUPPORTING_7702.includes(n))throw new r.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported on account")}(n,s,o)})(f,n,S,M,k,w),p(f);const I=await e({from:s,networkClientId:i,origin:h,requestId:m,securityAlertId:b,transactions:C,validateSecurity:y});return I.batchId}({addTransactionBatch:h,isAtomicBatchSupported:b,chainId:I,from:T,getDismissSmartAccountSuggestionEnabled:f,messenger:t,networkClientId:M,origin:k,requestId:E,sendCalls:n,securityAlertId:A,transactions:S,validateSecurity:P,isAuxiliaryFundsSupported:y}),{id:_}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/processSendCalls.cjs"}],[188,{"../../services/oauth/oauth-service":600,"../../services/oauth/web-authenticator-factory":603},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OAuthServiceInit=void 0;var r,s=(r=e("../../services/oauth/oauth-service"))&&r.__esModule?r:{default:r},o=e("../../services/oauth/web-authenticator-factory");n.OAuthServiceInit=e=>{const{controllerMessenger:t,getController:n}=e,r=n("MetaMetricsController");return{controller:new s.default({messenger:t,env:{googleClientId:"795351133007-6d0s31utj13knv440fgjo2ur93241gb6.apps.googleusercontent.com",appleClientId:"io.metamask.appleloginclient.prod"},webAuthenticator:(0,o.webAuthenticatorFactory)(),bufferedTrace:r.bufferedTrace.bind(r),bufferedEndTrace:r.bufferedEndTrace.bind(r),trackEvent:r.trackEvent.bind(r),addEventBeforeMetricsOptIn:r.addEventBeforeMetricsOptIn.bind(r),getParticipateInMetaMetrics:()=>r.state.participateInMetaMetrics}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/oauth-service-init.ts"}],[1880,{"./hooks/getCallsStatus.cjs":1877,"./hooks/getCapabilities.cjs":1878,"./hooks/processSendCalls.cjs":1879,"./methods/wallet_getCallsStatus.cjs":1881,"./methods/wallet_getCapabilities.cjs":1882,"./methods/wallet_sendCalls.cjs":1883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=n.walletGetCallsStatus=n.walletSendCalls=n.getCapabilities=n.getCallsStatus=n.processSendCalls=void 0;var r=e("./hooks/processSendCalls.cjs");Object.defineProperty(n,"processSendCalls",{enumerable:!0,get:function(){return r.processSendCalls}});var s=e("./hooks/getCallsStatus.cjs");Object.defineProperty(n,"getCallsStatus",{enumerable:!0,get:function(){return s.getCallsStatus}});var o=e("./hooks/getCapabilities.cjs");Object.defineProperty(n,"getCapabilities",{enumerable:!0,get:function(){return o.getCapabilities}});var i=e("./methods/wallet_sendCalls.cjs");Object.defineProperty(n,"walletSendCalls",{enumerable:!0,get:function(){return i.walletSendCalls}});var a=e("./methods/wallet_getCallsStatus.cjs");Object.defineProperty(n,"walletGetCallsStatus",{enumerable:!0,get:function(){return a.walletGetCallsStatus}});var l=e("./methods/wallet_getCapabilities.cjs");Object.defineProperty(n,"walletGetCapabilities",{enumerable:!0,get:function(){return l.walletGetCapabilities}})}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/index.cjs"}],[1881,{"../types.cjs":1884,"../utils.cjs":1885,"@metamask/rpc-errors":2692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCallsStatus=async function(e,t,{getCallsStatus:n}){if(!n)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCallsStatusStruct);const i=e.params[0];t.result=await n(i,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCallsStatus.cjs"}],[1882,{"../types.cjs":1884,"../utils.cjs":1885,"@metamask/rpc-errors":2692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCapabilities=async function(e,t,{getAccounts:n,getCapabilities:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCapabilitiesStruct);const a=e.params[0],l=e.params[1];await(0,o.validateAndNormalizeKeyholder)(a,e,{getAccounts:n});const c=await i(a,l,e);t.result=c}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCapabilities.cjs"}],[1883,{"../types.cjs":1884,"../utils.cjs":1885,"@metamask/rpc-errors":2692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletSendCalls=async function(e,t,{getAccounts:n,processSendCalls:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.SendCallsStruct);const a=e.params[0],l=a.from?await(0,o.validateAndNormalizeKeyholder)(a.from,e,{getAccounts:n}):undefined,c={...a,from:l};t.result=await i(c,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_sendCalls.cjs"}],[1884,{"@metamask/superstruct":3027,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendCallsStruct=n.CapabilitiesStruct=n.GetCapabilitiesStruct=n.GetCallsStatusStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.GetCallsStatusStruct=(0,r.tuple)([s.StrictHexStruct]),n.GetCapabilitiesStruct=(0,r.tuple)([s.HexChecksumAddressStruct,(0,r.optional)((0,r.array)(s.StrictHexStruct))]);const o=(0,r.type)({address:(0,r.nonempty)(s.HexChecksumAddressStruct),amount:(0,r.nonempty)(s.StrictHexStruct),standard:(0,r.nonempty)((0,r.string)())});n.CapabilitiesStruct=(0,r.record)((0,r.string)(),(0,r.type)({optional:(0,r.optional)((0,r.boolean)()),requiredAssets:(0,r.optional)((0,r.array)(o))})),n.SendCallsStruct=(0,r.tuple)([(0,r.object)({version:(0,r.nonempty)((0,r.string)()),id:(0,r.optional)(s.StrictHexStruct),from:(0,r.optional)(s.HexChecksumAddressStruct),chainId:s.StrictHexStruct,atomicRequired:(0,r.boolean)(),calls:(0,r.array)((0,r.object)({to:(0,r.optional)(s.HexChecksumAddressStruct),data:(0,r.optional)(s.StrictHexStruct),value:(0,r.optional)(s.StrictHexStruct),capabilities:(0,r.optional)(n.CapabilitiesStruct)})),capabilities:(0,r.optional)(n.CapabilitiesStruct)})])}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/types.cjs"}],[1885,{"./constants.cjs":1876,"@metamask/rpc-errors":2692,"@metamask/superstruct":3027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resemblesAddress=n.validateParams=n.validateAndNormalizeKeyholder=n.getAccountKeyringType=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("./constants.cjs");function i(e){return 42===e.length}n.getAccountKeyringType=function(e,t){const{accounts:n}=t.call("AccountsController:getState").internalAccounts,s=Object.values(n).find(t=>t.address.toLowerCase()===e.toLowerCase()),i=s?.metadata?.keyring?.type;if(!i)throw new r.JsonRpcError(o.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported as account type is unknown");return i},n.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:n}){if("string"==typeof e&&e.length>0&&i(e)){const s=(await n(t)).map(e=>e.toLowerCase()),o=e.toLowerCase();if(s.includes(o))return o;throw r.providerErrors.unauthorized()}throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid params"))},n.resemblesAddress=i}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/utils.cjs"}],[1886,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DELEGATION_INDICATOR_PREFIX=n.METHOD_NAMES=void 0,n.METHOD_NAMES={UPGRADE_ACCOUNT:"wallet_upgradeAccount",GET_ACCOUNT_UPGRADE_STATUS:"wallet_getAccountUpgradeStatus"},n.DELEGATION_INDICATOR_PREFIX="0xef0100"}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/constants.cjs"}],[1887,{"./constants.cjs":1886,"./utils.cjs":1889,"./wallet_getAccountUpgradeStatus.cjs":1890,"./wallet_upgradeAccount.cjs":1891},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METHOD_NAMES=n.validateAndNormalizeAddress=n.validateParams=n.walletGetAccountUpgradeStatus=n.walletUpgradeAccount=void 0;var r=e("./wallet_upgradeAccount.cjs");Object.defineProperty(n,"walletUpgradeAccount",{enumerable:!0,get:function(){return r.walletUpgradeAccount}});var s=e("./wallet_getAccountUpgradeStatus.cjs");Object.defineProperty(n,"walletGetAccountUpgradeStatus",{enumerable:!0,get:function(){return s.walletGetAccountUpgradeStatus}});var o=e("./utils.cjs");Object.defineProperty(n,"validateParams",{enumerable:!0,get:function(){return o.validateParams}}),Object.defineProperty(n,"validateAndNormalizeAddress",{enumerable:!0,get:function(){return o.validateAndNormalizeAddress}});var i=e("./constants.cjs");Object.defineProperty(n,"METHOD_NAMES",{enumerable:!0,get:function(){return i.METHOD_NAMES}})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/index.cjs"}],[1888,{"@metamask/superstruct":3027,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetAccountUpgradeStatusParamsStruct=n.UpgradeAccountParamsStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.UpgradeAccountParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)}),n.GetAccountUpgradeStatusParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/types.cjs"}],[1889,{"@metamask/rpc-errors":2692,"@metamask/superstruct":3027,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateParams=n.validateAndNormalizeAddress=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("@metamask/utils");n.validateAndNormalizeAddress=async function(e,t,n){if("string"!=typeof e||0===e.length||!(0,o.isHexAddress)(e))throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an EVM address."});if(!(await n(t)).map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw r.providerErrors.unauthorized();return e},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid parameters"))}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/utils.cjs"}],[189,{"../../lib/encryptor-factory":278,"../../services/oauth/config":597,"@metamask/seedless-onboarding-controller":2712},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SeedlessOnboardingControllerInit=void 0;var r=e("@metamask/seedless-onboarding-controller"),s=e("../../lib/encryptor-factory"),o=e("../../services/oauth/config");n.SeedlessOnboardingControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:i}=e,a=(0,s.encryptorFactory)(6e5),l=(0,o.isDevOrTestBuild)()?r.Web3AuthNetwork.Devnet:r.Web3AuthNetwork.Mainnet;return{controller:new r.SeedlessOnboardingController({messenger:n,state:i.SeedlessOnboardingController,network:l,passwordOutdatedCacheTTL:15e3,refreshJWTToken:(...e)=>t.call("OAuthService:getNewRefreshToken",...e),revokeRefreshToken:(...e)=>t.call("OAuthService:revokeRefreshToken",...e),renewRefreshToken:(...e)=>t.call("OAuthService:renewRefreshToken",...e),encryptor:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/seedless-onboarding-controller-init.ts"}],[1890,{"./constants.cjs":1886,"./types.cjs":1888,"./utils.cjs":1889,"@metamask/rpc-errors":2692,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetAccountUpgradeStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),o=e("./constants.cjs"),i=e("./types.cjs"),a=e("./utils.cjs");n.walletGetAccountUpgradeStatus=async function(e,t,n){const{params:l,origin:c}=e;(0,a.validateParams)(l,i.GetAccountUpgradeStatusParamsStruct);const{account:u,chainId:d}=l,g=await(0,a.validateAndNormalizeAddress)(u,c,n.getPermittedAccountsForOrigin);let p;if(d!==undefined)p=d;else{const e=n.getCurrentChainIdForDomain(c);if(!e)throw r.rpcErrors.invalidParams({message:`Could not determine current chain ID for origin: ${c}`});p=e}const{isSupported:h}=await n.isEip7702Supported({address:g,chainId:p});if(h)try{const e=p,s=n.getSelectedNetworkClientIdForChain(e);if(!s)throw r.rpcErrors.invalidParams({message:`Network client ID not found for chain ID ${p}`});const{isUpgraded:i,upgradedAddress:a}=await(async(e,t,n)=>{const r=await n(e,t);if(!r||"0x"===r||r.length<=2)return{isUpgraded:!1,upgradedAddress:null};if(!r.startsWith(o.DELEGATION_INDICATOR_PREFIX))return{isUpgraded:!1,upgradedAddress:null};const s=o.DELEGATION_INDICATOR_PREFIX.length+40;return r.length!==s?{isUpgraded:!1,upgradedAddress:null}:{isUpgraded:!0,upgradedAddress:`0x${r.slice(8,48)}`}})(g,s,n.getCode);t.result={isSupported:h,account:g,isUpgraded:i,upgradedAddress:a,chainId:p}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to get account upgrade status: ${(0,s.getErrorMessage)(e)}`})}else t.result={isSupported:h,account:g,isUpgraded:!1,upgradedAddress:null,chainId:p}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_getAccountUpgradeStatus.cjs"}],[1891,{"./types.cjs":1888,"./utils.cjs":1889,"@metamask/rpc-errors":2692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletUpgradeAccount=void 0;const r=e("@metamask/rpc-errors"),s=e("./types.cjs"),o=e("./utils.cjs");n.walletUpgradeAccount=async function(e,t,n){const{params:i,origin:a}=e;(0,o.validateParams)(i,s.UpgradeAccountParamsStruct);const{account:l,chainId:c}=i,u=await(0,o.validateAndNormalizeAddress)(l,a,n.getPermittedAccountsForOrigin);let d;if(c!==undefined)d=c;else{const e=n.getCurrentChainIdForDomain(a);if(!e)throw r.rpcErrors.invalidParams({message:`No network configuration found for origin: ${a}`});d=e}try{const e=d,{isSupported:s,upgradeContractAddress:o}=await n.isEip7702Supported({address:u,chainId:e});if(!s)throw r.rpcErrors.invalidParams({message:`Account upgrade not supported on chain ID ${d}`});if(!o)throw r.rpcErrors.invalidParams({message:`No upgrade contract address available for chain ID ${d}`});const i=await n.upgradeAccount(u,o,d);t.result={transactionHash:i.transactionHash,upgradedAccount:u,delegatedTo:i.delegatedTo}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to upgrade account: ${e instanceof Error?e.message:String(e)}`})}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_upgradeAccount.cjs"}],[1892,{"@ethersproject/providers":809,"@metamask/base-controller":1401,"@metamask/controller-utils":1488,"@metamask/utils":3207,"punycode/punycode.js":5257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.EnsController=n.DEFAULT_ENS_NETWORK_MAP=void 0;const u=e("@ethersproject/providers"),d=e("@metamask/base-controller"),g=e("@metamask/controller-utils"),p=e("@metamask/utils"),h=e("punycode/punycode.js"),m=(0,p.createProjectLogger)("ens-controller");n.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const f={ensEntries:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ensResolutionsByAddress:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},b={ensEntries:{},ensResolutionsByAddress:{}};class C extends d.BaseController{constructor({registriesByChainId:e=n.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:a={},onNetworkDidChange:c}){super({name:"EnsController",metadata:f,messenger:t,state:{...b,ensEntries:Object.fromEntries(Object.entries(e).map(([e,t])=>[(0,g.toHex)(e),{".":{address:t,chainId:(0,g.toHex)(e),ensName:"."}}])),...a}}),r.add(this),s.set(this,null),l(this,r,"m",o).call(this,e),c&&c(({selectedNetworkClientId:t})=>{this.resetState(),l(this,r,"m",i).call(this,t,e)})}resetState(){this.update(e=>{e.ensResolutionsByAddress={}})}clear(){this.update(e=>{e.ensEntries={}})}delete(e,t){const n=(0,g.normalizeEnsName)(t);return!!((0,g.isSafeDynamicKey)(e)&&n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n])&&(this.update(t=>{delete t.ensEntries[e][n],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]}),!0)}get(e,t){const n=(0,g.normalizeEnsName)(t);return n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n]||null}set(e,t,n){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||n&&!(0,g.isValidHexAddress)(n))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${n}}`);const r=(0,g.normalizeEnsName)(t);if(!r)throw new Error(`Invalid ENS name: ${t}`);const s=n?(0,g.toChecksumHexAddress)(n):null,o=this.state.ensEntries[e];return(!o?.[r]||o[r].address!==s)&&(this.update(t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[r]:{address:s,chainId:e,ensName:r}}}}),!0)}async reverseResolveAddress(e){if(!l(this,s,"f"))return undefined;const t=(0,g.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let n,r;try{n=await l(this,s,"f").lookupAddress(t)}catch(e){return m(e),undefined}if(!n)return undefined;try{r=await l(this,s,"f").resolveName(n)}catch(e){return m(e),undefined}return r?"0x0000000000000000000000000000000000000000"===r||"0x"===r||(0,g.toChecksumHexAddress)(r)!==t?undefined:(this.update(e=>{e.ensResolutionsByAddress[t]=(0,h.toASCII)(n)}),n):undefined}}n.EnsController=C,s=new WeakMap,r=new WeakSet,o=function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState");l(this,r,"m",i).call(this,t,e)},i=function(e,t){const{configuration:{chainId:n},provider:o}=this.messenger.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(n,16)]&&l(this,r,"m",a).call(this,n)?c(this,s,new u.Web3Provider(o,{chainId:(0,g.convertHexToDecimal)(n),name:g.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[n],ensAddress:t[parseInt(n,16)]}),"f"):c(this,s,null,"f")},a=function(e){return Boolean(this.state.ensEntries[e])},n.default=C}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[1893,{"./EnsController.cjs":1892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./EnsController.cjs"),n)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[1894,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;n.ErrorReportingService=class{constructor({messenger:e,captureException:t}){this.name="ErrorReportingService",this.state=null,r.set(this,void 0),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),i(this,s,"f").registerActionHandler("ErrorReportingService:captureException",i(this,r,"f").bind(this))}captureException(e){i(this,r,"f").call(this,e)}},r=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[1895,{"./error-reporting-service.cjs":1894},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;var r=e("./error-reporting-service.cjs");Object.defineProperty(n,"ErrorReportingService",{enumerable:!0,get:function(){return r.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[19,{"./assets-contract-controller-init":18,"./network-order-controller-init":21,"./nft-controller-init":22,"./nft-detection-controller-init":23,"./token-rates-controller-init":24},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AssetsContractControllerInit",{enumerable:!0,get:function(){return i.AssetsContractControllerInit}}),Object.defineProperty(n,"NetworkOrderControllerInit",{enumerable:!0,get:function(){return a.NetworkOrderControllerInit}}),Object.defineProperty(n,"NftControllerInit",{enumerable:!0,get:function(){return s.NftControllerInit}}),Object.defineProperty(n,"NftDetectionControllerInit",{enumerable:!0,get:function(){return o.NftDetectionControllerInit}}),Object.defineProperty(n,"TokenRatesControllerInit",{enumerable:!0,get:function(){return r.TokenRatesControllerInit}});var r=e("./token-rates-controller-init"),s=e("./nft-controller-init"),o=e("./nft-detection-controller-init"),i=e("./assets-contract-controller-init"),a=e("./network-order-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/assets/index.ts"}],[190,{"../lib/WeakRefObjectMap":258,"@metamask/selected-network-controller":2717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SelectedNetworkControllerInit=void 0;var r=e("@metamask/selected-network-controller"),s=e("../lib/WeakRefObjectMap");n.SelectedNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SelectedNetworkController({state:t.SelectedNetworkController,messenger:e,domainProxyMap:new s.WeakRefObjectMap})})}}},{package:"$root$",file:"app/scripts/controller-init/selected-network-controller-init.ts"}],[191,{"../../../../shared/lib/sentry":5992,"../../../../shared/modules/shield":6041,"../../lib/ppom/ppom-util":302,"@metamask/keyring-controller":2310,"@metamask/shield-controller":2721},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ShieldControllerInit=void 0;var r=e("@metamask/shield-controller"),s=e("@metamask/keyring-controller"),o=e("../../lib/ppom/ppom-util"),i=e("../../../../shared/modules/shield"),a=e("../../../../shared/lib/sentry");const l=e=>{const t=(0,r.parseSignatureRequestMethod)(e),n=e.version===s.SignTypedDataVersion.V3||e.version===s.SignTypedDataVersion.V4,i=n?[e.messageParams.from,e.messageParams.data]:[e.messageParams.data,e.messageParams.from],a={id:e.id,jsonrpc:"2.0",method:t,params:i},l=(0,o.normalizeSignatureRequest)(a);if(null!=l&&l.params&&n){const t=l.params;e.messageParams.data=t[1]}return e},c=(0,i.loadShieldConfig)();n.ShieldControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:s}=e,o=c.ruleEngineUrl;return{controller:new r.ShieldController({messenger:t,state:s.ShieldController,normalizeSignatureRequest:l,backend:new r.ShieldRemoteBackend({getAccessToken:()=>n.call("AuthenticationController:getBearerToken"),fetch:(e,t)=>fetch(e,t),baseUrl:o,captureException:a.captureException})})}}}}},{package:"$root$",file:"app/scripts/controller-init/shield/shield-controller-init.ts"}],[192,{"../../../../shared/constants/smartTransactions":5906,"@metamask/smart-transactions-controller":2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SmartTransactionsControllerInit=void 0;var r=e("@metamask/smart-transactions-controller"),s=e("../../../../shared/constants/smartTransactions");n.SmartTransactionsControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:o,getUIState:i,getAccountType:a,getDeviceModel:l,getHardwareTypeForMetric:c,trace:u}=e;return{controller:new r.SmartTransactionsController({supportedChainIds:(0,s.getAllowedSmartTransactionsChainIds)(),clientId:r.ClientId.Extension,trackMetaMetricsEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),state:o.SmartTransactionsController,messenger:t,getMetaMetricsProps:async()=>{var e;const t=i(),{internalAccounts:n}=t,r=null==n?void 0:n.selectedAccount,s=r?null==n||null===(e=n.accounts)||void 0===e?void 0:e[r]:null,o=(null==s?void 0:s.address)??"";if(!o)return{accountHardwareType:undefined,accountType:undefined,deviceModel:undefined};return{accountHardwareType:await c(o),accountType:await a(o),deviceModel:await l(o)}},trace:u})}}}}},{package:"$root$",file:"app/scripts/controller-init/smart-transactions/smart-transactions-controller-init.ts"}],[1923,{"./base-filter":1924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter");t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[1924,{"@metamask/safe-event-emitter":2694},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1925,{"./base-filter":1924,"./getBlocksForRange":1926,"./hexUtils":1927},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=o(e),i=(await s({provider:this.provider,fromBlock:r,toBlock:n})).map(e=>e.hash);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[1926,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:n}){t||(t=n);const o=r(t),i=r(n),a=Array(i-o+1).fill().map((e,t)=>o+t).map(s);let l=await Promise.all(a.map(t=>async function(e,t,n){for(let r=0;r<3;r++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:n})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1])));return l=l.filter(e=>null!==e),l}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[1927,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function o(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return r(e)[0]},maxBlockRef:function(...e){const t=r(e);return t[t.length-1]},sortBlockRefs:r,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return o(s(e)+1)},intToHex:o,unsafeRandomBytes:function(e){let t="0x";for(let n=0;n<e;n++)t+=i(),t+=i();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1928,{"./block-filter.js":1925,"./hexUtils":1927,"./log-filter.js":1929,"./tx-filter.js":1931,"@metamask/json-rpc-engine":2216,"async-mutex":3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./log-filter.js"),a=e("./block-filter.js"),l=e("./tx-filter.js"),{intToHex:c,hexToInt:u}=e("./hexUtils");function d(e){return g(async(...t)=>{const n=await e(...t);return c(n.id)})}function g(e){return s(async(t,n)=>{const r=await e.apply(null,t.params);n.result=r})}function p(e,t){const n=[];for(let t in e)n.push(e[t]);return n}t.exports=function({blockTracker:e,provider:t}){let n=0,s={};const h=new r,m=function({mutex:e}){return t=>async(n,r,s,o)=>{(await e.acquire())(),t(n,r,s,o)}}({mutex:h}),f=o({eth_newFilter:m(d(C)),eth_newBlockFilter:m(d(y)),eth_newPendingTransactionFilter:m(d(w)),eth_uninstallFilter:m(g(k)),eth_getFilterChanges:m(g(v)),eth_getFilterLogs:m(g(M))}),b=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const n=await h.acquire();try{await Promise.all(p(s).map(async n=>{try{await n.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}n()};return f.newLogFilter=C,f.newBlockFilter=y,f.newPendingTransactionFilter=w,f.uninstallFilter=k,f.getFilterChanges=v,f.getFilterLogs=M,f.destroy=()=>{!async function(){const e=p(s).length;s={},I({prevFilterCount:e,newFilterCount:0})}()},f;async function C(e){const n=new i({provider:t,params:e});await S(n);return n}async function y(){const e=new a({provider:t});await S(e);return e}async function w(){const e=new l({provider:t});await S(e);return e}async function v(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);return n.getChangesAndClear()}async function M(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);let r=[];return"log"===n.type&&(r=n.getAllResults()),r}async function k(e){const t=u(e),n=s[t],r=Boolean(n);return r&&await async function(e){const t=p(s).length;delete s[e];const n=p(s).length;I({prevFilterCount:t,newFilterCount:n})}(t),r}async function S(t){const r=p(s).length,o=await e.getLatestBlock();await t.initialize({currentBlock:o}),n++,s[n]=t,t.id=n,t.idHex=c(n);return I({prevFilterCount:r,newFilterCount:p(s).length}),n}function I({prevFilterCount:t,newFilterCount:n}){0===t&&n>0?e.on("sync",b):t>0&&0===n&&e.removeListener("sync",b)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1929,{"./base-filter-history":1923,"./hexUtils":1927,"@metamask/eth-query":2073,pify:5184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/eth-query"),s=e("pify"),o=e("./base-filter-history"),{bnToHex:i,hexToInt:a,incrementHexInt:l,minBlockRef:c,blockRefIsNumber:u}=e("./hexUtils");t.exports=class extends o{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new r(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(e=>e.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const n=c(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(r);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const n=t;let r;r=e?l(e):t;const s=Object.assign({},this.params,{fromBlock:r,toBlock:n}),o=(await this._fetchLogs(s)).filter(e=>this.matchLog(e));this.addResults(o)}async _fetchLogs(e){return await s(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber))return!1;if(u(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every((t,n)=>{let r=e.topics[n];if(!r)return!1;r=r.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map(e=>e.toLowerCase());return s.includes(r)})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[193,{"@metamask/snaps-controllers":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CronjobControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.CronjobControllerInit=({controllerMessenger:e,persistedState:t,getCronjobControllerStorageManager:n})=>({controller:new r.CronjobController({state:t.CronjobController,messenger:e,stateManager:n()}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/cronjob-controller-init.ts"}],[1930,{"./getBlocksForRange.js":1926,"./hexUtils.js":1927,"./index.js":1928,"@metamask/json-rpc-engine":2216,"@metamask/safe-event-emitter":2694},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./index.js"),{unsafeRandomBytes:a,incrementHexInt:l}=e("./hexUtils.js"),c=e("./getBlocksForRange.js");function u(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const n={},d=i({blockTracker:e,provider:t});let g=!1;const p=new r,h=o({eth_subscribe:s(async function(r,s){if(g)throw new Error("SubscriptionManager - attempting to use after destroying");const o=r.params[0],i=a(16);let p;switch(o){case"newHeads":p=h({subId:i});break;case"logs":const e=r.params[1];p=f({subId:i,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${o}"`)}return n[i]=p,void(s.result=i);function h({subId:n}){const r={type:o,destroy:async()=>{e.removeListener("sync",r.update)},update:async({oldBlock:e,newBlock:r})=>{const s=r,o=l(e);(await c({provider:t,fromBlock:o,toBlock:s})).map(u).filter(e=>null!==e).forEach(e=>{m(n,e)})}};return e.on("sync",r.update),r}function f({subId:e,filter:t}){t.on("update",t=>m(e,t));return{type:o,destroy:async()=>await d.uninstallFilter(t.idHex)}}}),eth_unsubscribe:s(async function(e,t){if(g)throw new Error("SubscriptionManager - attempting to use after destroying");const r=e.params[0],s=n[r];if(!s)return void(t.result=!1);delete n[r],await s.destroy(),t.result=!0})});return h.destroy=function(){p.removeAllListeners();for(const e in n)n[e].destroy(),delete n[e];g=!0},{events:p,middleware:h};function m(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1931,{"./base-filter":1924,"./getBlocksForRange":1926,"./hexUtils":1927},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=o(e),r=await s({provider:this.provider,fromBlock:n,toBlock:t}),i=[];for(const e of r)i.push(...e.transactions);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[194,{"../../../../shared/modules/mv3.utils":6026,"@metamask/permission-controller":2528,"@metamask/snaps-controllers":2751,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExecutionServiceInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("@metamask/permission-controller"),i=e("../../../../shared/modules/mv3.utils");n.ExecutionServiceInit=({controllerMessenger:e,offscreenPromise:t,setupUntrustedCommunicationEip1193:n})=>{function a(e,t){n({connectionStream:t,sender:{snapId:e},subjectType:o.SubjectType.Snap})}if(i.isManifestV3&&"undefined"!=typeof chrome&&void 0!==chrome.offscreen)return{memStateKey:null,persistedStateKey:null,controller:new r.OffscreenExecutionService({messenger:e,setupSnapProvider:a,offscreenPromise:t})};const l="https://execution.metamask.io/iframe/10.3.0/index.html";return(0,s.assert)(l,"Missing iframe URL."),{memStateKey:null,persistedStateKey:null,controller:new r.IframeExecutionService({messenger:e,iframeUrl:new URL(l),setupSnapProvider:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/execution-service-init.ts"}],[195,{"./cronjob-controller-init":193,"./execution-service-init":194,"./multichain-router-init":196,"./rate-limit-controller-init":197,"./snap-controller-init":198,"./snap-insights-controller-init":199,"./snap-interface-controller-init":200,"./snaps-name-provider-init":201,"./snaps-registry-init":202,"./websocket-service-init":203},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CronjobControllerInit",{enumerable:!0,get:function(){return r.CronjobControllerInit}}),Object.defineProperty(n,"ExecutionServiceInit",{enumerable:!0,get:function(){return s.ExecutionServiceInit}}),Object.defineProperty(n,"MultichainRouterInit",{enumerable:!0,get:function(){return o.MultichainRouterInit}}),Object.defineProperty(n,"RateLimitControllerInit",{enumerable:!0,get:function(){return i.RateLimitControllerInit}}),Object.defineProperty(n,"SnapControllerInit",{enumerable:!0,get:function(){return a.SnapControllerInit}}),Object.defineProperty(n,"SnapInsightsControllerInit",{enumerable:!0,get:function(){return l.SnapInsightsControllerInit}}),Object.defineProperty(n,"SnapInterfaceControllerInit",{enumerable:!0,get:function(){return c.SnapInterfaceControllerInit}}),Object.defineProperty(n,"SnapsNameProviderInit",{enumerable:!0,get:function(){return u.SnapsNameProviderInit}}),Object.defineProperty(n,"SnapsRegistryInit",{enumerable:!0,get:function(){return d.SnapsRegistryInit}}),Object.defineProperty(n,"WebSocketServiceInit",{enumerable:!0,get:function(){return g.WebSocketServiceInit}});var r=e("./cronjob-controller-init"),s=e("./execution-service-init"),o=e("./multichain-router-init"),i=e("./rate-limit-controller-init"),a=e("./snap-controller-init"),l=e("./snap-insights-controller-init"),c=e("./snap-interface-controller-init"),u=e("./snaps-name-provider-init"),d=e("./snaps-registry-init"),g=e("./websocket-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/snaps/index.ts"}],[196,{"../../../../shared/constants/keyring":5888,"@metamask/snaps-controllers":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainRouterInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("../../../../shared/constants/keyring");n.MultichainRouterInit=({controllerMessenger:e,getController:t})=>{const n=t("KeyringController");return{memStateKey:null,persistedStateKey:null,controller:new r.MultichainRouter({messenger:e,withSnapKeyring:async e=>e({keyring:await(async()=>{let[e]=n.getKeyringsByType(s.KeyringType.snap);return e||(await n.addNewKeyring(s.KeyringType.snap),[e]=n.getKeyringsByType(s.KeyringType.snap)),e})()})})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/multichain-router-init.ts"}],[1966,{"./ledger-hw-app.cjs":1968,"./ledger-iframe-bridge.cjs":1969,"./ledger-keyring.cjs":1970,"./ledger-mobile-bridge.cjs":1971,"./ledger-transport-middleware.cjs":1972},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),n),s(e("./ledger-iframe-bridge.cjs"),n),s(e("./ledger-mobile-bridge.cjs"),n),s(e("./ledger-transport-middleware.cjs"),n),s(e("./ledger-hw-app.cjs"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1967,{"./type.cjs":1973,"@ledgerhq/hw-transport":997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handleLedgerTransportError=function(e,t){if(e instanceof r.TransportStatusError){const t=e;throw new s.LedgerStatusError(t.statusCode,function(e){switch(e.statusCode){case 27013:return"Ledger: User rejected the transaction";case 27264:return"Ledger: Blind signing must be enabled";case 21781:return"Ledger: Device is locked. Unlock it to continue";case 25871:return"Ledger: Ethereum app closed. Open it to unlock";default:return e.message}}(t))}throw e instanceof Error?e:new Error(t)};const r=e("@ledgerhq/hw-transport"),s=e("./type.cjs")}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-error-handler.cjs"}],[1968,{"@ledgerhq/hw-app-eth":982,buffer:4176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMaskLedgerHwAppEth=void 0;const s=r(e("@ledgerhq/hw-app-eth")),o=e("buffer");class i extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,o.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const n=e[t]??0;t+=1;const r=e.slice(t,t+=n).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:r,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}n.MetaMaskLedgerHwAppEth=i}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1969,{"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},p=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerIframeBridge=n.IFrameMessageAction=void 0;const h=e("@metamask/utils");var m;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(m||(n.IFrameMessageAction=m={}));n.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){r.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,o.set(this,new Map),g(this,r,"m",d).call(this,e),p(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await g(this,r,"m",a).call(this,g(this,s,"f").bridgeUrl),this.eventListener=g(this,r,"m",c).bind(this,g(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return g(this,s,"f")}async setOptions(e){g(this,r,"m",d).call(this,e),g(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(g(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await g(this,r,"m",u).call(this,{action:m.LedgerMakeApp},{timeout:8e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await g(this,r,"m",u).call(this,{action:m.LedgerUpdateTransport,params:{transportType:e}},{timeout:8e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return g(this,r,"m",i).call(this,m.LedgerUnlock,e)}async deviceSignTransaction(e){return g(this,r,"m",i).call(this,m.LedgerSignTransaction,e)}async deviceSignMessage(e){return g(this,r,"m",i).call(this,m.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return g(this,r,"m",i).call(this,m.LedgerSignTypedData,e)}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=async function(...[e,t]){const n=await g(this,r,"m",u).call(this,{action:e,params:t});if("payload"in n&&n.payload){if("success"in n&&n.success)return n.payload;if("error"in n.payload)throw n.payload.error}throw new Error("Unknown error occurred")},a=async function(e){return new Promise(t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)})},l=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){const{origin:n,data:s}=t;if(n===g(this,r,"m",l).call(this,e)&&s){const e=g(this,o,"f").get(s.messageId);e?(e.resolve(s),g(this,o,"f").delete(s.messageId)):s.action===m.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},u=async function(e,{timeout:t}={}){this.currentMessageId+=1;const n={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},r=(0,h.createDeferredPromise)();if(g(this,o,"f").set(this.currentMessageId,r),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout(()=>{g(this,o,"f").has(n.messageId)&&(g(this,o,"f").delete(n.messageId),r.reject(new Error("Ledger iframe message timeout")))},t),this.iframe.contentWindow.postMessage(n,"*"),r.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[197,{"@metamask/notification-services-controller/notification-services":2447,"@metamask/rate-limit-controller":2681,loglevel:4948},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitControllerInit=void 0;var r,s=e("@metamask/rate-limit-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/notification-services-controller/notification-services");n.RateLimitControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,showNotification:r})=>({controller:new s.RateLimitController({state:n.RateLimitController,messenger:e,implementations:{showNativeNotification:{method:(e,n)=>{const s=t.call("SubjectMetadataController:getState").subjectMetadata[e];return r((null==s?void 0:s.name)??e,n).catch(e=>{o.default.error("Failed to create notification",e)}),null},rateLimitCount:2,rateLimitTimeout:3e5},showInAppNotification:{method:(e,n)=>{const{message:r,title:s,footerLink:o,interfaceId:a}=n,l={title:s,...o?{footerLink:o}:{},interfaceId:a},c={data:{message:r,origin:e,...a?{detailedView:l}:{}},type:i.TRIGGER_TYPES.SNAP,readDate:null};return t.call("NotificationServicesController:updateMetamaskNotificationsList",c),null},rateLimitCount:5,rateLimitTimeout:6e4}}}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/rate-limit-controller-init.ts"}],[1970,{"./ledger-error-handler.cjs":1967,"@ethereumjs/rlp":668,"@ethereumjs/tx":681,"@ethereumjs/util":702,"@metamask/eth-sig-util":2075,"@metamask/utils":3207,buffer:4176,hdkey:4699},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,g,p,h,m,f,b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},C=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerKeyring=void 0;const y=e("@ethereumjs/rlp"),w=e("@ethereumjs/tx"),v=e("@ethereumjs/util"),M=e("@metamask/eth-sig-util"),k=e("@metamask/utils"),S=e("buffer"),I=C(e("hdkey")),T=e("./ledger-error-handler.cjs"),A="m",P=`${A}/44'/60'/0'`,E="Ledger Hardware";var _;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(_||(_={}));class O{constructor({bridge:e}){if(r.add(this),this.deviceId="",this.type=E,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new I.default,this.hdPath=P,this.paths={},this.network=_.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??P,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||b(this,r,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter(e=>t.has(b(this,r,"m",f).call(this,e))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new I.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return b(this,r,"m",f).call(this,(0,k.bytesToHex)((0,v.publicToAddress)(this.hdk.publicKey,!0)));const n=e?b(this,r,"m",p).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:n})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while unlocking account")}return t&&s.chainCode&&(this.hdk.publicKey=S.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=S.Buffer.from(s.chainCode,"hex")),(0,k.add0x)(s.address)}async addAccounts(e){return new Promise((t,n)=>{this.unlock().then(async n=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=b(this,r,"m",d).call(this,e);let n;n=b(this,r,"m",g).call(this)?await this.unlock(t):b(this,r,"m",c).call(this,A,e),this.accountDetails[b(this,r,"m",f).call(this,n)]={bip44:b(this,r,"m",g).call(this),hdPath:t},this.accounts.includes(n)||(this.accounts=[...this.accounts,n],i.push(n)),this.page=0}t(i)}).catch(n)})}getName(){return E}async getFirstPage(){return this.page=0,b(this,r,"m",i).call(this,1)}async getNextPage(){return b(this,r,"m",i).call(this,1)}async getPreviousPage(){return b(this,r,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase());if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[b(this,r,"m",f).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let n;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),b(this,r,"m",o).call(this,e,n,e=>(t.v=S.Buffer.from(e.v,"hex"),t.r=S.Buffer.from(e.r,"hex"),t.s=S.Buffer.from(e.s,"hex"),t));const s=t.getMessageToSign();return n=Array.isArray(s)?S.Buffer.from(y.RLP.encode(s)).toString("hex"):(0,k.bytesToHex)(s),b(this,r,"m",o).call(this,e,n,e=>{const n=t.toJSON();return n.type=t.type,n.v=(0,k.add0x)(e.v),n.r=(0,k.add0x)(e.r),n.s=(0,k.add0x)(e.s),w.TransactionFactory.fromTxData(n,{common:t.common,freeze:Object.isFrozen(t)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:n,message:(0,k.remove0x)(t)})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let o=parseInt(String(s.v),10).toString(16);o.length<2&&(o=`0${o}`);const i=`0x${s.r}${s.s}${o}`,a=(0,M.recoverPersonalSignature)({data:t,signature:i});if(b(this,r,"m",f).call(this,a)!==b(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=b(this,r,"m",f).call(this,e),n=this.accountDetails[t];if(!n)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=n;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,n){const{version:s}=n??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:o,types:i,primaryType:a,message:l}=M.TypedDataUtils.sanitizeData(t),c=await this.unlockAccountByAddress(e);if(!c)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:c,message:{domain:{name:o.name,chainId:o.chainId,version:o.version,verifyingContract:o.verifyingContract,salt:o.salt instanceof ArrayBuffer?S.Buffer.from(o.salt).toString("hex"):o.salt},types:i,primaryType:a.toString(),message:l}})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const g=`0x${u.r}${u.s}${d}`,p=(0,M.recoverTypedSignature)({data:t,signature:g,version:M.SignTypedDataVersion.V4});if(b(this,r,"m",f).call(this,p)!==b(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return g}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new I.default}}n.LedgerKeyring=O,r=new WeakSet,s=function(e){if(b(this,r,"m",g).call(this)&&e.accountIndexes)for(const[t,n]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:b(this,r,"m",d).call(this,n)};const t=new Set(Object.keys(this.accountDetails));b(this,r,"m",g).call(this)||this.accounts.forEach(e=>{const n=b(this,r,"m",f).call(this,e);t.has(n)||(this.accountDetails[n]={bip44:!1,hdPath:b(this,r,"m",u).call(this,e)})})},o=async function(e,t,n){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,k.remove0x)(t),hdPath:r})}catch(e){(0,T.handleLedgerTransportError)(e,"Ledger: Unknown error while signing transaction")}const o=n(s);if(o.verifySignature())return o;throw new Error("Ledger: The transaction signature is not valid")},i=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage;let s;return await this.unlock(),s=b(this,r,"m",g).call(this)?await b(this,r,"m",a).call(this,t,n):b(this,r,"m",l).call(this,t,n),s},a=async function(e,t){const n=[];for(let s=e;s<t;s++){const e=b(this,r,"m",d).call(this,s),t=await this.unlock(e),o=!this.implementFullBIP44||await b(this,r,"m",h).call(this,t);if(n.push({address:t,balance:null,index:s}),!o)break}return n},l=function(e,t){const n=[];for(let s=e;s<t;s++){const e=b(this,r,"m",c).call(this,A,s);n.push({address:e,balance:null,index:s}),this.paths[b(this,r,"m",f).call(this,e)]=s}return n},c=function(e,t){const n=this.hdk.derive(`${e}/${t}`),s=(0,k.bytesToHex)((0,v.publicToAddress)(n.publicKey,!0));return b(this,r,"m",f).call(this,s)},u=function(e){const t=b(this,r,"m",f).call(this,e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===b(this,r,"m",c).call(this,A,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return b(this,r,"m",d).call(this,n)},d=function(e){return b(this,r,"m",g).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},g=function(){return"m/44'/60'/0'/0/0"===this.hdPath},p=function(e){return e.toString().replace("m/","")},h=async function(e){const t=b(this,r,"m",m).call(this),n=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await n.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},f=function(e){return(0,k.getChecksumAddress)((0,k.add0x)(e))},O.type=E}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1971,{"./ledger-hw-app.cjs":1968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");n.LedgerMobileBridge=class{constructor(e,t={}){r.add(this),s.set(this,void 0),o.set(this,void 0),this.isDeviceConnected=!1,l(this,o,t,"f"),l(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await c(this,r,"m",i).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return c(this,r,"m",a).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return c(this,r,"m",a).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return c(this,r,"m",a).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await c(this,r,"m",a).call(this).getAddress(e,!1,!0)}async getOptions(){return c(this,o,"f")}async setOptions(e){l(this,o,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return c(this,r,"m",i).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await c(this,r,"m",a).call(this).openEthApp()}async closeApps(){await c(this,r,"m",a).call(this).closeApps()}async getAppNameAndVersion(){return c(this,r,"m",a).call(this).getAppNameAndVersion()}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=function(){if(c(this,s,"f"))return c(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},a=function(){return c(this,r,"m",i).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1972,{"./ledger-hw-app.cjs":1968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerTransportMiddleware=void 0;const i=e("./ledger-hw-app.cjs");n.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",r.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,r,e,"f")}getTransport(){if(!o(this,r,"f"))throw new Error("Instance `transport` is not initialized.");return o(this,r,"f")}getEthApp(){return new i.MetaMaskLedgerHwAppEth(this.getTransport())}},r=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[1973,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerStatusError=void 0;class r extends Error{constructor(e,t){super(t),this.statusCode=e}}n.LedgerStatusError=r}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/type.cjs"}],[198,{"../../../../shared/constants/keyring":5888,"../../../../shared/constants/snaps/permissions":5907,"../../lib/encryptor-factory":278,"../../lib/util":368,"@metamask/snaps-controllers":2751,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapControllerInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("../../../../shared/constants/snaps/permissions"),i=e("../../lib/encryptor-factory"),a=e("../../../../shared/constants/keyring"),l=e("../../lib/util");n.SnapControllerInit=({initMessenger:e,controllerMessenger:t,persistedState:n,removeAllConnections:c,preinstalledSnaps:u})=>{const d=(0,l.getBooleanFlag)(!1),g=(0,l.getBooleanFlag)(!0),p=(0,l.getBooleanFlag)(!0),h=(0,l.getBooleanFlag)("true");const m=new r.SnapController({environmentEndowmentPermissions:Object.values(o.EndowmentPermissions),excludedPermissions:{...o.ExcludedSnapPermissions,...o.ExcludedSnapEndowments},closeAllConnections:c,state:n.SnapController,messenger:t,featureFlags:{allowLocalSnaps:d,requireAllowlist:g,rejectInvalidPlatformVersion:p,autoUpdatePreinstalledSnaps:h},encryptor:(0,i.encryptorFactory)(6e5),getMnemonicSeed:async function(){const t=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!(t[0]&&(0,s.hasProperty)(t[0],"seed")&&t[0].seed instanceof Uint8Array))throw new Error("Primary keyring mnemonic unavailable.");return t[0].seed},preinstalledSnaps:u,getFeatureFlags:function(){return{disableSnaps:!1===e.call("PreferencesController:getState").useExternalServices}},ensureOnboardingComplete:async function(){const{completedOnboarding:t}=e.call("OnboardingController:getState");if(t)return;const{promise:n,resolve:r}=(0,s.createDeferredPromise)(),o=t=>{t.completedOnboarding&&(r(),e.unsubscribe("OnboardingController:stateChange",o))};e.subscribe("OnboardingController:stateChange",o),await n},trackEvent:e.call.bind(e,"MetaMetricsController:trackEvent")});return e.subscribe("KeyringController:lock",()=>{e.call("SnapController:setClientActive",!1)}),e.subscribe("KeyringController:unlock",()=>{e.call("SnapController:setClientActive",!0)}),{controller:m}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-controller-init.ts"}],[199,{"@metamask/snaps-controllers":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInsightsControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInsightsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInsightsController({state:t.SnapInsightsController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-insights-controller-init.ts"}],[20,{"../../../../shared/constants/network":5896,"@metamask/keyring-api":2300,"@metamask/network-enablement-controller":2433,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkEnablementControllerInit=void 0;var r=e("@metamask/network-enablement-controller"),s=e("@metamask/keyring-api"),o=e("@metamask/utils"),i=e("../../../../shared/constants/network");const a=(e,t)=>{const n={[o.KnownCaipNamespace.Eip155]:{}};return Object.keys(e).forEach(e=>{n[o.KnownCaipNamespace.Eip155][e]=t.includes(e)}),n},l=(e,t=[])=>{const n={};return Object.keys(e).forEach(e=>{const r=t.includes(e),{namespace:s}=(0,o.parseCaipChainId)(e);(n[s]??(n[s]={}))[e]=r}),n},c=(e,t)=>{const{networkConfigurationsByChainId:n}=e,{multichainNetworkConfigurationsByChainId:r}=t;const o=[s.SolScope.Mainnet];return o.push(s.BtcScope.Mainnet),o.push(s.TrxScope.Mainnet),{enabledNetworkMap:{...a(n,i.FEATURED_NETWORK_CHAIN_IDS),...l(r,o)}}};n.NetworkEnablementControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:i})=>{const a=i("MultichainNetworkController").state,l=i("NetworkController").state,u=new r.NetworkEnablementController({messenger:e,state:{...c(l,a),...n.NetworkEnablementController}});return t.subscribe("AccountsController:selectedAccountChange",e=>{e.type===s.SolAccountType.DataAccount&&u.enableNetworkInNamespace(s.SolScope.Mainnet,o.KnownCaipNamespace.Solana)}),t.subscribe("AccountTreeController:selectedAccountGroupChange",()=>{const e=t.call("AccountTreeController:getAccountsFromSelectedAccountGroup",{scopes:[s.SolScope.Mainnet]}),n=t.call("AccountTreeController:getAccountsFromSelectedAccountGroup",{scopes:[s.BtcScope.Mainnet]}),r=t.call("AccountTreeController:getAccountsFromSelectedAccountGroup",{scopes:[s.TrxScope.Mainnet]}),o={};for(const e of Object.values(u.state.enabledNetworkMap))Object.assign(o,e);if(1===Object.keys(o).length){const t=Object.keys(o)[0];let i=!1;t===s.SolScope.Mainnet&&0===e.length&&(i=!0),t===s.BtcScope.Mainnet&&0===n.length&&(i=!0),t===s.TrxScope.Mainnet&&0===r.length&&(i=!0),i&&u.enableNetwork("0x1")}}),{controller:u}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/network-enablement-controller-init.ts"}],[200,{"@metamask/snaps-controllers":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInterfaceControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInterfaceControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInterfaceController({state:t.SnapInterfaceController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-interface-controller-init.ts"}],[201,{"../../lib/SnapsNameProvider":256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsNameProviderInit=void 0;var r=e("../../lib/SnapsNameProvider");n.SnapsNameProviderInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new r.SnapsNameProvider({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-name-provider-init.ts"}],[202,{"../../lib/util":368,"@metamask/snaps-controllers":2751,semver:5688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsRegistryInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("semver"),o=e("../../lib/util");n.SnapsRegistryInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,o.getBooleanFlag)(!0),i="13.16.3",a=(0,s.parse)(i),l=a?`${a.major}.${a.minor}.${a.patch}`:i;return{controller:new r.JsonSnapsRegistry({state:t.SnapsRegistry,messenger:e,refetchOnAllowlistMiss:n,clientConfig:{type:"extension",version:l}})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-registry-init.ts"}],[203,{"@metamask/snaps-controllers":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WebSocketServiceInit=void 0;var r=e("@metamask/snaps-controllers");n.WebSocketServiceInit=({controllerMessenger:e})=>({memStateKey:null,persistedStateKey:null,controller:new r.WebSocketService({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/websocket-service-init.ts"}],[204,{"../lib/stores/browser-storage-adapter":341,"@metamask/storage-service":3017},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StorageServiceInit=void 0;var r=e("@metamask/storage-service"),s=e("../lib/stores/browser-storage-adapter");n.StorageServiceInit=({controllerMessenger:e})=>({controller:new r.StorageService({messenger:e,storage:new s.BrowserStorageAdapter}),persistedStateKey:null,memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/storage-service-init.ts"}],[205,{"@metamask/permission-controller":2528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubjectMetadataControllerInit=void 0;var r=e("@metamask/permission-controller");n.SubjectMetadataControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SubjectMetadataController({state:t.SubjectMetadataController,messenger:e,subjectCacheLimit:100})})}}},{package:"$root$",file:"app/scripts/controller-init/subject-metadata-controller-init.ts"}],[206,{"./subscription-controller-init":207,"./subscription-service-init":208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SubscriptionControllerInit",{enumerable:!0,get:function(){return r.SubscriptionControllerInit}}),Object.defineProperty(n,"SubscriptionServiceInit",{enumerable:!0,get:function(){return s.SubscriptionServiceInit}});var r=e("./subscription-controller-init"),s=e("./subscription-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/subscription/index.ts"}],[207,{"../../../../shared/modules/shield":6041,"@metamask/subscription-controller":3023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionControllerInit=void 0;var r=e("@metamask/subscription-controller");const s=(0,e("../../../../shared/modules/shield").loadShieldConfig)();n.SubscriptionControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:o}=e,i=new r.SubscriptionService({env:s.subscriptionEnv,auth:{getAccessToken:()=>t.call("AuthenticationController:getBearerToken")}});return{controller:new r.SubscriptionController({messenger:n,state:o.SubscriptionController,subscriptionService:i})}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-controller-init.ts"}],[208,{"../../../../shared/lib/sentry":5992,"../../services/oauth/web-authenticator-factory":603,"../../services/subscription/subscription-service":604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionServiceInit=void 0;var r=e("../../services/subscription/subscription-service"),s=e("../../services/oauth/web-authenticator-factory"),o=e("../../../../shared/lib/sentry");n.SubscriptionServiceInit=e=>{const{controllerMessenger:t,platform:n}=e;return{controller:new r.SubscriptionService({messenger:t,platform:n,webAuthenticator:(0,s.webAuthenticatorFactory)(),captureException:o.captureException}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-service-init.ts"}],[209,{"../controllers/swaps":245},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SwapsControllerInit=void 0;var r,s=(r=e("../controllers/swaps"))&&r.__esModule?r:{default:r};n.SwapsControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:r})=>{const o=r("GasFeeController"),i=r("TransactionController");return{controller:new s.default({messenger:e,getBufferedGasLimit:async(e,n)=>{const r=t.call("NetworkController:getState"),{gas:s,simulationFails:o}=await i.estimateGasBuffered(e.txParams,n,r.selectedNetworkClientId);return{gasLimit:s,simulationFails:o}},getEIP1559GasFeeEstimates:(...e)=>o.fetchGasFeeEstimates(...e),getLayer1GasFee:(...e)=>i.getLayer1GasFee(...e),trackMetaMetricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")},n.SwapsController)}}}}},{package:"$root$",file:"app/scripts/controller-init/swaps-controller-init.ts"}],[21,{"../../controllers/network-order":228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkOrderControllerInit=void 0;var r=e("../../controllers/network-order");n.NetworkOrderControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.NetworkOrderController({messenger:e,state:{orderedNetworkList:[],...t.NetworkOrderController}})})}}},{package:"$root$",file:"app/scripts/controller-init/assets/network-order-controller-init.ts"}],[210,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenBalancesControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{useMultiAccountBalanceChecker:s}=t.call("PreferencesController:getState");return{controller:new r.TokenBalancesController({messenger:e,state:n.TokenBalancesController,queryMultipleAccounts:s,interval:3e4,allowExternalServices:()=>t.call("PreferencesController:getState").useExternalServices,accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},platform:"extension",isOnboarded:()=>{const{completedOnboarding:e}=t.call("OnboardingController:getState");return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/token-balances-controller-init.ts"}],[211,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenDetectionControllerInit=({controllerMessenger:e,initMessenger:t})=>({memStateKey:null,persistedStateKey:null,controller:new r.TokenDetectionController({messenger:e,getBalancesInSingleCall:(...e)=>t.call("AssetsContractController:getBalancesInSingleCall",...e),trackMetaMetricsEvent:(...e)=>t.call("MetaMetricsController:trackEvent",...e),useAccountsAPI:!0,platform:"extension",useTokenDetection:()=>t.call("PreferencesController:getState").useTokenDetection,useExternalServices:()=>t.call("PreferencesController:getState").useExternalServices})})}}},{package:"$root$",file:"app/scripts/controller-init/token-detection-controller-init.ts"}],[212,{"../lib/util":368,"./init-utils":55,"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("../lib/util"),o=e("./init-utils");n.TokenListControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const i=t.call("PreferencesController:getState"),a=e=>{const{useTokenDetection:t,useTransactionSimulations:n,preferences:r}=e??{},{petnamesEnabled:s}=r??{};return t||s||n},l=new r.TokenListController({messenger:e,state:n.TokenListController,preventPollingOnNetworkRestart:!a(i),chainId:(0,o.getGlobalChainId)(t)});return t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,t)=>(((e,t)=>{const n=a(t),r=a(e);n!==r&&l.updatePreventPollingOnNetworkRestart(!r)})(t,e),!0),i)),{controller:l}}}}},{package:"$root$",file:"app/scripts/controller-init/token-list-controller-init.ts"}],[213,{"./init-utils":55,"@metamask/assets-controllers":1324,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokensControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("@metamask/utils"),o=e("./init-utils");n.TokensControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{provider:i}=t.call("NetworkController:getSelectedNetworkClient")??{};(0,s.assert)(i,"Provider is required to initialize TokensController.");return{controller:new r.TokensController({messenger:e,state:n.TokensController,provider:i,chainId:(0,o.getGlobalChainId)(t)})}}}}},{package:"$root$",file:"app/scripts/controller-init/tokens-controller-init.ts"}],[214,{"@metamask/transaction-pay-controller":3118},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionPayControllerInit=void 0;var r=e("@metamask/transaction-pay-controller");function s(e){return r.TransactionPayStrategy.Relay}n.TransactionPayControllerInit=e=>{const{controllerMessenger:t,persistedState:n}=e,o=new r.TransactionPayController({getDelegationTransaction:async()=>{throw new Error("Delegation transaction not supported")},getStrategy:s,messenger:t,state:n.TransactionPayController}),i=function(e){return{setTransactionPayIsMaxAmount:e.setIsMaxAmount.bind(e),updateTransactionPaymentToken:e.updatePaymentToken.bind(e)}}(o);return{controller:o,api:i}}}}},{package:"$root$",file:"app/scripts/controller-init/transaction-pay-controller-init.ts"}],[215,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){}}},{package:"$root$",file:"app/scripts/controller-init/types.ts"}],[216,{"./messengers":104,"./types":215,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.initControllers=function({baseControllerMessenger:e,existingControllers:t=[],initFunctions:n,initRequest:r}){o("Initializing controllers",Object.keys(n).length);const i=t.reduce((e,t)=>(e[t.name]=t,e),{}),a={},l={};let c={};const u=e=>function(e,t){const n=e[t];if(!n)throw new Error(`Controller requested before it was initialized: ${String(t)}`);return n}(i,e);for(const[t,d]of Object.entries(n)){const n=t,g=d,p=s.CONTROLLER_MESSENGERS[n],h=null==p?void 0:p.getMessenger,m=null==p?void 0:p.getInitMessenger,f={...r,controllerMessenger:null==h?void 0:h(e),getController:u,initMessenger:null==m?void 0:m(e)},b=g({...f,controllerMessenger:f.controllerMessenger}),{controller:C,persistedStateKey:y,memStateKey:w}=b,v=b.api??{},M=null===y?undefined:y??n,k=null===w?undefined:w??n;i[n]=C,c={...c,...v},M&&(a[M]=C),k&&(l[k]=C),o("Initialized controller",n,{api:Object.keys(v),persistedStateKey:M,memStateKey:k})}return{controllerApi:c,controllerMemState:l,controllerPersistedState:a,controllersByName:i}};var r=e("@metamask/utils"),s=(e("./types"),e("./messengers"));const o=(0,r.createProjectLogger)("controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/utils.ts"}],[2163,{"./onekey-keyring.cjs":2164,"./trezor-connect-bridge.cjs":2165,"./trezor-keyring.cjs":2166},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./trezor-keyring.cjs"),n),s(e("./onekey-keyring.cjs"),n),s(e("./trezor-connect-bridge.cjs"),n)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.cjs"}],[2164,{"./trezor-keyring.cjs":2166},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OneKeyKeyring=void 0;const r=e("./trezor-keyring.cjs"),s="OneKey Hardware";class o extends r.TrezorKeyring{constructor(){super(...arguments),this.type=s}}n.OneKeyKeyring=o,o.type=s}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/onekey-keyring.cjs"}],[2165,{"@trezor/connect-web":3332},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorConnectBridge=void 0;const i=o(e("@trezor/connect-web"));n.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){i.default.on(i.DEVICE_EVENT,e=>{var t;e.type===i.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)}),this.trezorConnectInitiated||(await i.default.init(e),this.trezorConnectInitiated=!0)}async dispose(){return i.default.dispose(),Promise.resolve()}getPublicKey(e){return i.default.getPublicKey(e)}ethereumSignTransaction(e){return i.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return i.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return i.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.cjs"}],[2166,{"@ethereumjs/tx":681,"@ethereumjs/util":702,"@metamask/eth-sig-util":2075,"@metamask/utils":3207,"@trezor/connect-plugin-ethereum":3323,buffer:4176,hdkey:4699},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,o,i,a,l,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorKeyring=n.TREZOR_CONNECT_MANIFEST=void 0;const d=e("@ethereumjs/tx"),g=e("@ethereumjs/util"),p=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),m=e("@trezor/connect-plugin-ethereum"),f=u(e("hdkey")),b="m/44'/60'/0'/0",C="m/44'/1'/0'/0",y="m/44'/60'/0'",w={[b]:!0,[y]:!0,[C]:!0},v="Trezor Hardware",M=1e3;async function k(e){return new Promise(t=>setTimeout(t,e))}function S(e){return"function"==typeof e.getChainId}n.TREZOR_CONNECT_MANIFEST={appName:"MetaMask",email:"support@metamask.io",appUrl:"https://metamask.io"};class I{constructor({bridge:e}){if(r.add(this),this.type=v,this.accounts=[],this.hdk=new f.default,this.hdPath=b,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}async init(){return this.bridge.init({manifest:n.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts.slice(),page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e){var t,n,r,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:b,this.accounts=null!==(n=e.accounts)&&void 0!==n?n:[],this.page=null!==(r=e.page)&&void 0!==r?r:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise((e,n)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then(r=>{var s;r.success?(this.hdk.publicKey=t.from(r.payload.publicKey,"hex"),this.hdk.chainCode=t.from(r.payload.chainCode,"hex"),e("just unlocked")):n(new Error((null===(s=r.payload)||void 0===s?void 0:s.error)||"Unknown error"))}).catch(e=>{n(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e){return new Promise((t,n)=>{this.unlock().then(n=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=c(this,r,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t],i.push(t)),this.page=0}t(i)}).catch(e=>{n(e)})})}async getFirstPage(){return this.page=0,c(this,r,"m",s).call(this,1)}async getNextPage(){return c(this,r,"m",s).call(this,1)}async getPreviousPage(){return c(this,r,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase())}async signTransaction(e,n){return S(n)?c(this,r,"m",o).call(this,e,n.getChainId(),n,e=>(n.v=t.from(e.v,"hex"),n.r=t.from(e.r,"hex"),n.s=t.from(e.s,"hex"),n)):c(this,r,"m",o).call(this,e,Number(n.common.chainId()),n,e=>{const t=n.toJSON();return t.type=n.type,t.v=(0,h.add0x)(e.v),t.r=(0,h.add0x)(e.r),t.s=(0,h.add0x)(e.s),d.TransactionFactory.fromTxData(t,{common:n.common,freeze:Object.isFrozen(n)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise((n,s)=>{this.unlock().then(o=>{setTimeout(()=>{this.bridge.ethereumSignMessage({path:c(this,r,"m",l).call(this,e),message:(0,h.remove0x)(t),hex:!0}).then(t=>{var r;if(t.success){t.payload.address!==(0,h.getChecksumAddress)(e)&&s(new Error("signature doesnt match the right address"));const r=`0x${t.payload.signature}`;n(r)}else s(new Error((null===(r=t.payload)||void 0===r?void 0:r.error)||"Unknown error"))}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})},"just unlocked"===o?M:0)}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}async signTypedData(e,t,n){var s,o;const{version:i}=null!=n?n:{version:p.SignTypedDataVersion.V4},a=(0,m.transformTypedData)(t,i===p.SignTypedDataVersion.V4),{types:u,message:d={},domain:g={},primaryType:f,domain_separator_hash:b,message_hash:C}=a,y=await this.unlock();await k("just unlocked"===y?M:0);const w=await this.bridge.ethereumSignTypedData({path:c(this,r,"m",l).call(this,e),data:{types:Object.assign(Object.assign({},u),{EIP712Domain:null!==(s=u.EIP712Domain)&&void 0!==s?s:[]}),message:d,domain:g,primaryType:f},metamask_v4_compat:!0,domain_separator_hash:b,message_hash:null!=C?C:""});if(w.success){if((0,h.getChecksumAddress)(e)!==w.payload.address)throw new Error("signature doesnt match the right address");return w.payload.signature}throw new Error((null===(o=w.payload)||void 0===o?void 0:o.error)||"Unknown error")}forgetDevice(){this.accounts=[],this.hdk=new f.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!w[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new f.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}n.TrezorKeyring=I,r=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise((e,t)=>{this.unlock().then(t=>{const n=(this.page-1)*this.perPage,s=n+this.perPage,o=[];for(let e=n;e<s;e++){const t=c(this,r,"m",a).call(this,"m",e);o.push({address:t,balance:null,index:e}),this.paths[(0,h.getChecksumAddress)(t)]=e}e(o)}).catch(e=>{t(e)})})},o=async function(e,n,s,o){var a,u,d,g;let p;p=S(s)?{to:c(this,r,"m",i).call(this,s.to),value:c(this,r,"m",i).call(this,s.value),data:c(this,r,"m",i).call(this,s.data),chainId:n,nonce:c(this,r,"m",i).call(this,s.nonce),gasLimit:c(this,r,"m",i).call(this,s.gasLimit),gasPrice:c(this,r,"m",i).call(this,s.gasPrice)}:Object.assign(Object.assign({},s.toJSON()),{chainId:n,to:c(this,r,"m",i).call(this,t.from(null!==(u=null===(a=s.to)||void 0===a?void 0:a.bytes)&&void 0!==u?u:[]))});try{const t=await this.unlock();await k("just unlocked"===t?M:0);const n=await this.bridge.ethereumSignTransaction({path:c(this,r,"m",l).call(this,e),transaction:p});if(n.success){const t=o(n.payload),r=(0,h.getChecksumAddress)((0,h.add0x)(t.getSenderAddress().toString("hex")));if(r!==(0,h.getChecksumAddress)(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(d=n.payload)||void 0===d?void 0:d.error)||"Unknown error")}catch(e){throw new Error(null!==(g=null==e?void 0:e.toString())&&void 0!==g?g:"Unknown error")}},i=function(e){return(0,h.bytesToHex)(e)},a=function(e,t){const n=this.hdk.derive(`${e}/${t}`),r=(0,h.bytesToHex)((0,g.publicToAddress)(n.publicKey,!0));return(0,g.toChecksumAddress)(r)},l=function(e){const t=(0,h.getChecksumAddress)(e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===c(this,r,"m",a).call(this,"m",e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${n}`},I.type=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.cjs"}],[217,{"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderController=void 0;var r=e("@metamask/base-controller");const s={pinnedAccountList:[],hiddenAccountList:[]},o={pinnedAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hiddenAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class i extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:o,name:"AccountOrderController",state:{...s,...t}})}updateAccountsList(e){this.update(t=>(t.pinnedAccountList=e,t))}updateHiddenAccountsList(e){this.update(t=>(t.hiddenAccountList=e,t))}}n.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[218,{"../../../shared/constants/alerts":5874,"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAlertControllerState=n.AlertController=void 0;var r=e("@metamask/base-controller"),s=e("../../../shared/constants/alerts");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,n){return e.set(a(e,t),n),n}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const l=()=>({alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce((e,t)=>(e[t]=!0,e),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}});n.getDefaultAlertControllerState=l;const c={alertEnabledness:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},unconnectedAccountAlertShownOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},web3ShimUsageOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};var u=new WeakMap,d=new WeakSet;class g extends r.BaseController{constructor(e){var t,n;super({messenger:e.messenger,metadata:c,name:"AlertController",state:{...l(),...e.state}}),o(t=this,n=d),n.add(t),function(e,t,n){o(e,t),t.set(e,n)}(this,u,void 0),i(u,this,this.messenger.call("AccountsController:getSelectedAccount").address),this.messenger.subscribe("AccountsController:selectedAccountChange",e=>{this.state.unconnectedAccountAlertShownOrigins&&function(e,t){return e.get(a(e,t))}(u,this)!==e.address&&(i(u,this,e.address),this.update(e=>{e.unconnectedAccountAlertShownOrigins={}}))})}setAlertEnabledness(e,t){this.update(n=>{n.alertEnabledness[e]=t})}setUnconnectedAccountAlertShown(e){this.update(t=>{t.unconnectedAccountAlertShownOrigins[e]=!0})}getWeb3ShimUsageState(e){var t;return null===(t=this.state.web3ShimUsageOrigins)||void 0===t?void 0:t[e]}setWeb3ShimUsageRecorded(e){a(d,this,p).call(this,e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){a(d,this,p).call(this,e,s.Web3ShimUsageAlertStates.dismissed)}}function p(e,t){this.update(n=>{n.web3ShimUsageOrigins&&(n.web3ShimUsageOrigins[e]=t)})}n.AlertController=g}}},{package:"$root$",file:"app/scripts/controllers/alert-controller.ts"}],[2183,{"./determineGasFeeCalculations.cjs":2184,"./gas-util.cjs":2185,"@metamask/controller-utils":1488,"@metamask/eth-query":2073,"@metamask/polling-controller":2190,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeController=n.GAS_ESTIMATE_TYPES=n.LEGACY_GAS_PRICES_API_URL=void 0;const c=e("@metamask/controller-utils"),u=l(e("@metamask/eth-query")),d=e("@metamask/polling-controller"),g=e("uuid"),p=l(e("./determineGasFeeCalculations.cjs")),h=e("./gas-util.cjs");n.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const m={gasFeeEstimatesByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasFeeEstimates:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},estimatedGasFeeTimeBounds:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasEstimateType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},nonRPCGasFeeApisDisabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},f={gasFeeEstimatesByChainId:{},gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.NONE,nonRPCGasFeeApisDisabled:!1};class b extends((0,d.StaticIntervalPollingController)()){constructor({interval:e=15e3,messenger:t,state:l,getCurrentNetworkEIP1559Compatibility:c,getCurrentAccountEIP1559Compatibility:d,getChainId:g,getCurrentNetworkLegacyGasAPICompatibility:p,getProvider:h,onNetworkDidChange:b,legacyAPIEndpoint:C=n.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:y,clientId:w}){if(super({name:"GasFeeController",metadata:m,messenger:t,state:{...f,...l}}),r.add(this),s.set(this,void 0),this.intervalDelay=e,this.setIntervalLength(e),this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=c,this.getCurrentNetworkLegacyGasAPICompatibility=p,this.getCurrentAccountEIP1559Compatibility=d,i(this,s,h,"f"),this.EIP1559APIEndpoint=y,this.legacyAPIEndpoint=C,this.clientId=w,this.ethQuery=new u.default(a(this,s,"f").call(this)),b&&g)this.currentChainId=g(),b(async e=>{await a(this,r,"m",o).call(this,e)});else{const{selectedNetworkClientId:e}=this.messenger.call("NetworkController:getState");this.currentChainId=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId,this.messenger.subscribe("NetworkController:networkDidChange",async e=>{await a(this,r,"m",o).call(this,e)})}}async resetPolling(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),await this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach(e=>{this.pollTokens.add(e)})}}async fetchGasFeeEstimates(e){return await this._fetchGasFeeEstimateData(e)}async getGasFeeEstimatesAndStartPolling(e){const t=e||(0,g.v1)();return this.pollTokens.add(t),1===this.pollTokens.size&&(await this._fetchGasFeeEstimateData(),this._poll()),t}async _fetchGasFeeEstimateData(e={}){const{shouldUpdateState:t=!0,networkClientId:n}=e;let r,s,o,i;if(n!==undefined){const e=this.messenger.call("NetworkController:getNetworkClientById",n);o="0x38"===e.configuration.chainId,i=(0,c.convertHexToDecimal)(e.configuration.chainId);try{s=await this.messenger.call("NetworkController:getEIP1559Compatibility",n)||!1}catch{s=!1}r=new u.default(e.provider)}r??(r=this.ethQuery),o??(o=this.getCurrentNetworkLegacyGasAPICompatibility()),i??(i=(0,c.convertHexToDecimal)(this.currentChainId));try{s??(s=await this.getEIP1559Compatibility())}catch(e){console.error(e),s??(s=!1)}const a=await(0,p.default)({isEIP1559Compatible:s,isLegacyGasAPICompatible:o,fetchGasEstimates:h.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchLegacyGasPriceEstimates:h.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:h.fetchEthGasPriceEstimate,calculateTimeEstimate:h.calculateTimeEstimate,clientId:this.clientId,ethQuery:r,nonRPCGasFeeApisDisabled:this.state.nonRPCGasFeeApisDisabled});if(t){const e=(0,c.toHex)(i);this.update(t=>{this.currentChainId===e&&(t.gasFeeEstimates=a.gasFeeEstimates,t.estimatedGasFeeTimeBounds=a.estimatedGasFeeTimeBounds,t.gasEstimateType=a.gasEstimateType),t.gasFeeEstimatesByChainId??(t.gasFeeEstimatesByChainId={}),t.gasFeeEstimatesByChainId[e]={gasFeeEstimates:a.gasFeeEstimates,estimatedGasFeeTimeBounds:a.estimatedGasFeeTimeBounds,gasEstimateType:a.gasEstimateType}})}return a}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(async()=>{await(0,c.safelyExecute)(()=>this._fetchGasFeeEstimateData())},this.intervalDelay)}async _executePoll({networkClientId:e}){await this._fetchGasFeeEstimateData({networkClientId:e})}resetState(){this.update(()=>f)}async getEIP1559Compatibility(){const e=await this.getCurrentNetworkEIP1559Compatibility(),t=this.getCurrentAccountEIP1559Compatibility?.()??!0;return e&&t}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===n.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,h.calculateTimeEstimate)(e,t,this.state.gasFeeEstimates):{}}enableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!1})}disableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!0})}}n.GasFeeController=b,s=new WeakMap,r=new WeakSet,o=async function({selectedNetworkClientId:e}){const t=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId;t!==this.currentChainId&&(this.ethQuery=new u.default(a(this,s,"f").call(this)),await this.resetPolling(),this.currentChainId=t)},n.default=b}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/GasFeeController.cjs"}],[2184,{"./GasFeeController.cjs":2183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./GasFeeController.cjs");n.default=async function(e){try{return await async function(e){const{isEIP1559Compatible:t,isLegacyGasAPICompatible:n,nonRPCGasFeeApisDisabled:s}=e;try{if(t&&!s)return await async function(e){const{fetchGasEstimates:t,fetchGasEstimatesUrl:n,clientId:s,calculateTimeEstimate:o}=e,i=await t(n,s),{suggestedMaxPriorityFeePerGas:a,suggestedMaxFeePerGas:l}=i.medium,c=o(a,l,i);return{gasFeeEstimates:i,estimatedGasFeeTimeBounds:c,gasEstimateType:r.GAS_ESTIMATE_TYPES.FEE_MARKET}}(e);if(n&&!s)return await async function(e){const{fetchLegacyGasPriceEstimates:t,fetchLegacyGasPriceEstimatesUrl:n,clientId:s}=e;return{gasFeeEstimates:await t(n,s),estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.LEGACY}}(e);throw new Error("Main gas fee/price estimation failed. Use fallback")}catch{return await async function(e){const{ethQuery:t,fetchEthGasPriceEstimate:n}=e;return{gasFeeEstimates:await n(t),estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}(e)}}(e)}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/determineGasFeeCalculations.cjs"}],[2185,{"@metamask/controller-utils":1488,"bn.js":4115},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.calculateTimeEstimate=n.fetchEthGasPriceEstimate=n.fetchLegacyGasPriceEstimates=n.fetchGasEstimates=n.normalizeGWEIDecimalNumbers=void 0;const s=e("@metamask/controller-utils"),o=r(e("bn.js")),i=e=>({"X-Client-Id":e});function a(e){const t=(0,s.gweiDecToWEIBN)(e).toString(16);return(0,s.weiHexToGweiDec)(t)}n.normalizeGWEIDecimalNumbers=a,n.fetchGasEstimates=async function(e,t){const n=await(0,s.handleFetch)(e,t?{headers:i(t)}:undefined);return{low:{...n.low,suggestedMaxPriorityFeePerGas:a(n.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.low.suggestedMaxFeePerGas)},medium:{...n.medium,suggestedMaxPriorityFeePerGas:a(n.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.medium.suggestedMaxFeePerGas)},high:{...n.high,suggestedMaxPriorityFeePerGas:a(n.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.high.suggestedMaxFeePerGas)},estimatedBaseFee:a(n.estimatedBaseFee),historicalBaseFeeRange:n.historicalBaseFeeRange,baseFeeTrend:n.baseFeeTrend,latestPriorityFeeRange:n.latestPriorityFeeRange,historicalPriorityFeeRange:n.historicalPriorityFeeRange,priorityFeeTrend:n.priorityFeeTrend,networkCongestion:n.networkCongestion}},n.fetchLegacyGasPriceEstimates=async function(e,t){const n=await(0,s.handleFetch)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:{"Content-Type":"application/json",...t&&i(t)}});return{low:n.SafeGasPrice,medium:n.ProposeGasPrice,high:n.FastGasPrice}},n.fetchEthGasPriceEstimate=async function(e){const t=await(0,s.query)(e,"gasPrice");return{gasPrice:(0,s.weiHexToGweiDec)(t).toString()}},n.calculateTimeEstimate=function(e,t,n){const{low:r,medium:i,high:a,estimatedBaseFee:l}=n,c=(0,s.gweiDecToWEIBN)(e),u=(0,s.gweiDecToWEIBN)(t),d=(0,s.gweiDecToWEIBN)(l),g=o.default.min(c,u.sub(d)),p=(0,s.gweiDecToWEIBN)(r.suggestedMaxPriorityFeePerGas),h=(0,s.gweiDecToWEIBN)(i.suggestedMaxPriorityFeePerGas),m=(0,s.gweiDecToWEIBN)(a.suggestedMaxPriorityFeePerGas);let f,b;return g.lt(p)?(f=null,b="unknown"):g.gte(p)&&g.lt(h)?(f=r.minWaitTimeEstimate,b=r.maxWaitTimeEstimate):g.gte(h)&&g.lt(m)?(f=i.minWaitTimeEstimate,b=i.maxWaitTimeEstimate):g.eq(m)?(f=a.minWaitTimeEstimate,b=a.maxWaitTimeEstimate):(f=0,b=a.maxWaitTimeEstimate),{lowerTimeBound:f,upperTimeBound:b}}}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/gas-util.cjs"}],[2186,{"./GasFeeController.cjs":2183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./GasFeeController.cjs"),n)}}},{package:"@metamask/gas-fee-controller",file:"node_modules/@metamask/gas-fee-controller/dist/index.cjs"}],[2187,{"fast-json-stable-stringify":4491,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractPollingControllerBaseMixin=n.getKey=void 0;const o=s(e("fast-json-stable-stringify")),i=e("uuid");n.getKey=e=>(0,o.default)(e),n.AbstractPollingControllerBaseMixin=function(e){var t,s;return t=new WeakMap,s=new WeakMap,class extends e{constructor(){super(...arguments),t.set(this,new Map),s.set(this,new Map)}startPolling(e){const s=(0,i.v4)(),o=(0,n.getKey)(e),a=r(this,t,"f").get(o)??new Set;return a.add(s),r(this,t,"f").set(o,a),1===a.size&&this._startPolling(e),s}stopAllPolling(){r(this,t,"f").forEach((e,t)=>{e.forEach(e=>{this.stopPollingByPollingToken(e)})})}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let n=null;for(const[s,o]of r(this,t,"f"))if(o.delete(e)){0===o.size&&(n=s);break}if(n){this._stopPollingByPollingTokenSetId(n),r(this,t,"f").delete(n);const e=r(this,s,"f").get(n);if(e){for(const t of e)t(JSON.parse(n));e.clear()}}}onPollingComplete(e,t){const o=(0,n.getKey)(e),i=r(this,s,"f").get(o)??new Set;i.add(t),r(this,s,"f").set(o,i)}}}}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/AbstractPollingController.cjs"}],[2188,{"./AbstractPollingController.cjs":2187,"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BlockTrackerPollingController=n.BlockTrackerPollingControllerOnly=void 0;const s=e("@metamask/base-controller"),o=e("./AbstractPollingController.cjs");function i(e){var t;class n extends((0,o.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{})}_startPolling(e){const n=(0,o.getKey)(e);if(r(this,t,"f")[n])return;const s=this._getNetworkClientById(e.networkClientId);if(!s)throw new Error(`Unable to retrieve blockTracker for networkClientId ${e.networkClientId}`);{const o=this._executePoll.bind(this,e);s.blockTracker.addListener("latest",o),r(this,t,"f")[n]=o}}_stopPollingByPollingTokenSetId(e){const{networkClientId:n}=JSON.parse(e),s=this._getNetworkClientById(n);if(s&&r(this,t,"f")[e]){const n=r(this,t,"f")[e];n&&(s.blockTracker.removeListener("latest",n),delete r(this,t,"f")[e])}}}return t=new WeakMap,n}class a{}n.BlockTrackerPollingControllerOnly=()=>i(a);n.BlockTrackerPollingController=()=>i(s.BaseController)}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/BlockTrackerPollingController.cjs"}],[2189,{"./AbstractPollingController.cjs":2187,"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.StaticIntervalPollingController=n.StaticIntervalPollingControllerOnly=void 0;const o=e("@metamask/base-controller"),i=e("./AbstractPollingController.cjs");function a(e){var t,n;class o extends((0,i.AbstractPollingControllerBaseMixin)(e)){constructor(){super(...arguments),t.set(this,{}),n.set(this,1e3)}setIntervalLength(e){r(this,n,e,"f")}getIntervalLength(){return s(this,n,"f")}_startPolling(e){if(!s(this,n,"f"))throw new Error("intervalLength must be defined and greater than 0");const r=(0,i.getKey)(e),o=s(this,t,"f")[r];this._stopPollingByPollingTokenSetId(r);const a=s(this,t,"f")[r]=setTimeout(async()=>{try{await this._executePoll(e)}catch(e){console.error(e)}a===s(this,t,"f")[r]&&this._startPolling(e)},o?s(this,n,"f"):0)}_stopPollingByPollingTokenSetId(e){const n=s(this,t,"f")[e];n&&(clearTimeout(n),delete s(this,t,"f")[e])}}return t=new WeakMap,n=new WeakMap,o}class l{}n.StaticIntervalPollingControllerOnly=()=>a(l);n.StaticIntervalPollingController=()=>a(o.BaseController)}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/StaticIntervalPollingController.cjs"}],[219,{"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAppMetadataControllerState=n.default=void 0;var r=e("@metamask/base-controller");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const i=()=>({currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0});n.getDefaultAppMetadataControllerState=i;const a={currentAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},currentMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1}};var l=new WeakSet;class c extends r.BaseController{constructor({state:e={},messenger:t,currentAppVersion:n="",currentMigrationVersion:r=0}){super({name:"AppMetadataController",metadata:a,state:{currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0,...e},messenger:t}),s(this,l),o(l,this,u).call(this,n),o(l,this,d).call(this,r)}}function u(e){const t=this.state.currentAppVersion;e!==t&&this.update(n=>{n.currentAppVersion=e,n.previousAppVersion=t})}function d(e){const t=this.state.currentMigrationVersion;e!==t&&this.update(n=>{n.previousMigrationVersion=t,n.currentMigrationVersion=e})}n.default=c}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[2190,{"./BlockTrackerPollingController.cjs":2188,"./StaticIntervalPollingController.cjs":2189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StaticIntervalPollingController=n.StaticIntervalPollingControllerOnly=n.BlockTrackerPollingController=n.BlockTrackerPollingControllerOnly=void 0;var r=e("./BlockTrackerPollingController.cjs");Object.defineProperty(n,"BlockTrackerPollingControllerOnly",{enumerable:!0,get:function(){return r.BlockTrackerPollingControllerOnly}}),Object.defineProperty(n,"BlockTrackerPollingController",{enumerable:!0,get:function(){return r.BlockTrackerPollingController}});var s=e("./StaticIntervalPollingController.cjs");Object.defineProperty(n,"StaticIntervalPollingControllerOnly",{enumerable:!0,get:function(){return s.StaticIntervalPollingControllerOnly}}),Object.defineProperty(n,"StaticIntervalPollingController",{enumerable:!0,get:function(){return s.StaticIntervalPollingController}})}}},{package:"@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/index.cjs"}],[22,{"../../../../shared/constants/metametrics":5892,"@metamask/assets-controllers":1324,"@metamask/bridge-controller":1408},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NftControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("@metamask/bridge-controller"),o=e("../../../../shared/constants/metametrics");n.NftControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>({controller:new r.NftController({state:n.NftController,messenger:e,onNftAdded:({address:e,symbol:n,tokenId:r,standard:i,source:a})=>t.call("MetaMetricsController:trackEvent",{event:o.MetaMetricsEventName.NftAdded,category:o.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e,token_symbol:n??null,token_id:r,token_standard:i,asset_type:s.AssetType.NFT,source:a}})})})}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-controller-init.ts"}],[220,{"../../../shared/constants/alarms":5873,"../../../shared/constants/app":5876,"../../../shared/constants/preferences":5901,"../../../shared/constants/time":5913,"../../../shared/modules/mv3.utils":6026,"../../../ui/helpers/utils/build-types":7173,"@metamask/base-controller":1401,"@metamask/controller-utils":1488,"@metamask/utils":3207,loglevel:4948,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateController=void 0;var r,s=e("uuid"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/controller-utils"),a=e("@metamask/base-controller"),l=e("@metamask/utils"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),g=e("../../../ui/helpers/utils/build-types"),p=e("../../../shared/constants/app"),h=e("../../../shared/constants/preferences");function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){b(e,t),t.set(e,n)}function b(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(e,t){return e.get(w(e,t))}function y(e,t,n){return e.set(w(e,t),n),n}function w(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const v={activeQrCodeScanRequest:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},addressSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},appActiveTab:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},browserEnvironment:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},connectedStatusPopoverHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},currentExtensionPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},currentPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},defaultHomeActiveTabName:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulations:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulationsForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippage:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippageForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},fullScreenGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},hadAdvancedGasFeesSetPriorToMigration92_3:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},canTrackWalletFundsObtained:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},isRampCardClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isUpdateAvailable:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},lastInteractedConfirmationInfo:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedFromVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastViewedUserSurvey:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networkConnectionBanner:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},newPrivacyPolicyToastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},newPrivacyPolicyToastShownDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pna25Acknowledged:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},nftsDetectionNoticeDismissed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},nftsDropdownState:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},notificationGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},onboardingDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},outdatedBrowserWarningLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},popupGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},sidePanelGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},productTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showAccountBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showBetaHeader:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showDownloadMobileAppSlide:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showNetworkBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showPermissionsTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showTestnetMessageInDropdown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},signatureSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},slides:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},snapsInstallPrivacyWarningShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},surveyLinkLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldEndingToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldPausedToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},termsOfUseLastAgreed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},throttledOrigins:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},timeoutMinutes:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},trezorModel:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},updateModalLastDismissedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hasShownMultichainAccountsIntroModal:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},showShieldEntryModalOnce:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohort:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohortTxType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isWalletResetInProgress:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},defaultSubscriptionPaymentOptions:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},shieldSubscriptionMetricsProps:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dappSwapComparisonData:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},showStorageErrorToast:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0}};var M=new WeakMap,k=new WeakMap,S=new WeakMap,I=new WeakMap,T=new WeakMap,A=new WeakSet;class P extends a.BaseController{constructor({state:e={},messenger:t,onInactiveTimeout:n,extension:r}){super({name:"AppStateController",metadata:v,state:{activeQrCodeScanRequest:null,appActiveTab:undefined,browserEnvironment:{},connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,enableEnforcedSimulations:!0,enableEnforcedSimulationsForTransactions:{},enforcedSimulationsSlippage:10,enforcedSimulationsSlippageForTransactions:{},fullScreenGasPollTokens:[],hadAdvancedGasFeesSetPriorToMigration92_3:!1,canTrackWalletFundsObtained:!0,isRampCardClosed:!1,isUpdateAvailable:!1,lastUpdatedAt:null,lastUpdatedFromVersion:null,lastViewedUserSurvey:null,newPrivacyPolicyToastClickedOrClosed:null,newPrivacyPolicyToastShownDate:null,pna25Acknowledged:!1,nftsDetectionNoticeDismissed:!1,notificationGasPollTokens:[],onboardingDate:null,outdatedBrowserWarningLastShown:null,popupGasPollTokens:[],sidePanelGasPollTokens:[],productTour:"accountIcon",recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),showAccountBanner:!0,showBetaHeader:(0,g.isBeta)(),showDownloadMobileAppSlide:!0,showNetworkBanner:!0,showPermissionsTour:!0,showTestnetMessageInDropdown:!0,slides:[],surveyLinkLastClickedOrClosed:null,shieldEndingToastLastClickedOrClosed:null,shieldPausedToastLastClickedOrClosed:null,throttledOrigins:{},timeoutMinutes:h.DEFAULT_AUTO_LOCK_TIME_LIMIT,trezorModel:null,updateModalLastDismissedAt:null,hasShownMultichainAccountsIntroModal:!1,showShieldEntryModalOnce:null,pendingShieldCohort:null,pendingShieldCohortTxType:null,isWalletResetInProgress:!1,dappSwapComparisonData:{},showStorageErrorToast:!1,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"},...e,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"}},messenger:t}),function(e,t){b(e,t),t.add(e)}(this,A),f(this,M,void 0),f(this,k,void 0),f(this,S,void 0),m(this,"waitingForUnlock",void 0),f(this,I,void 0),f(this,T,null),m(this,"getAddressSecurityAlertResponse",e=>{const t=this.state.addressSecurityAlertResponses[e];if(!t)return undefined;const n=Date.now(),r=15*c.MINUTE;if(n-t.timestamp>r)return this.update(t=>{delete t.addressSecurityAlertResponses[e]}),undefined;const{timestamp:s,...o}=t;return o}),m(this,"addAddressSecurityAlertResponse",(e,t)=>{this.update(n=>{n.addressSecurityAlertResponses[e]={...t,timestamp:Date.now()}})}),y(M,this,r),y(k,this,n||(()=>undefined)),y(S,this,null),this.waitingForUnlock=[],t.subscribe("KeyringController:unlock",w(A,this,_).bind(this)),t.subscribe("PreferencesController:stateChange",({preferences:e})=>{const t=this.state;"number"==typeof(null==e?void 0:e.autoLockTimeLimit)&&t.timeoutMinutes!==e.autoLockTimeLimit&&w(A,this,O).call(this,e.autoLockTimeLimit)});const{preferences:s}=t.call("PreferencesController:getState");"number"==typeof s.autoLockTimeLimit&&w(A,this,O).call(this,s.autoLockTimeLimit),this.messenger.registerActionHandler("AppStateController:getUnlockPromise",this.getUnlockPromise.bind(this)),this.messenger.registerActionHandler("AppStateController:requestQrCodeScan",w(A,this,F).bind(this)),this.messenger.registerActionHandler("AppStateController:setCanTrackWalletFundsObtained",this.setCanTrackWalletFundsObtained.bind(this)),this.messenger.registerActionHandler("AppStateController:setPendingShieldCohort",this.setPendingShieldCohort.bind(this)),y(I,this,null)}getUnlockPromise(e){return new Promise(t=>{const{isUnlocked:n}=this.messenger.call("KeyringController:getState");n?t():w(A,this,E).call(this,t,e)})}setDefaultHomeActiveTabName(e){this.update(t=>{t.defaultHomeActiveTabName=e})}setConnectedStatusPopoverHasBeenShown(){this.update(e=>{e.connectedStatusPopoverHasBeenShown=!0})}setRecoveryPhraseReminderHasBeenShown(){this.update(e=>{e.recoveryPhraseReminderHasBeenShown=!0})}setSurveyLinkLastClickedOrClosed(e){this.update(t=>{t.surveyLinkLastClickedOrClosed=e})}setOnboardingDate(){this.update(e=>{e.onboardingDate=Date.now()})}setLastViewedUserSurvey(e){this.update(t=>{t.lastViewedUserSurvey=e})}setRampCardClosed(){this.update(e=>{e.isRampCardClosed=!0})}setNewPrivacyPolicyToastClickedOrClosed(){this.update(e=>{e.newPrivacyPolicyToastClickedOrClosed=!0})}setNewPrivacyPolicyToastShownDate(e){this.update(t=>{t.newPrivacyPolicyToastShownDate=e})}setPna25Acknowledged(e,t=!1){this.update(t=>{t.pna25Acknowledged=e}),t&&e&&this.messenger.call("ProfileMetricsController:skipInitialDelay")}setShieldPausedToastLastClickedOrClosed(e){this.update(t=>{t.shieldPausedToastLastClickedOrClosed=e})}setShieldEndingToastLastClickedOrClosed(e){this.update(t=>{t.shieldEndingToastLastClickedOrClosed=e})}setShowStorageErrorToast(e){this.update(t=>{t.showStorageErrorToast=e})}updateSlides(e){this.update(t=>{const n=t.slides||[],r=e.map(e=>{const t=n.find(t=>t.id===e.id);return t?{...t,...e}:e});t.slides=[...r]})}removeSlide(e){this.update(t=>{const n=t.slides||[];t.slides=n.map(t=>t.id===e?{...t,dismissed:!0}:t),e===p.DOWNLOAD_MOBILE_APP_SLIDE_ID&&(t.showDownloadMobileAppSlide=!1)})}setRecoveryPhraseReminderLastShown(e){this.update(t=>{t.recoveryPhraseReminderLastShown=e})}setTermsOfUseLastAgreed(e){this.update(t=>{t.termsOfUseLastAgreed=e})}setSnapsInstallPrivacyWarningShownStatus(e){this.update(t=>{t.snapsInstallPrivacyWarningShown=e})}setOutdatedBrowserWarningLastShown(e){this.update(t=>{t.outdatedBrowserWarningLastShown=e})}setLastActiveTime(){w(A,this,j).call(this)}setIsUpdateAvailable(e){this.update(t=>{t.isUpdateAvailable=e})}setUpdateModalLastDismissedAt(e){this.update(t=>{t.updateModalLastDismissedAt=e})}setLastUpdatedAt(e){this.update(t=>{t.lastUpdatedAt=e})}setLastUpdatedFromVersion(e){this.update(t=>{t.lastUpdatedFromVersion=e})}setBrowserEnvironment(e,t){this.update(n=>{n.browserEnvironment={os:e,browser:t}})}addPollingToken(e,t){t.toString()!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]&&w(A,this,N).call(this,t)&&w(A,this,D).call(this,e,t)}removePollingToken(e,t){if(t.toString()!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const n=this.state[t];w(A,this,N).call(this,t)&&this.update(r=>{r[t]=n.filter(t=>t!==e)})}}clearPollingTokens(){this.update(e=>{e.popupGasPollTokens=[],e.notificationGasPollTokens=[],e.fullScreenGasPollTokens=[],e.sidePanelGasPollTokens=[]})}setShowTestnetMessageInDropdown(e){this.update(t=>{t.showTestnetMessageInDropdown=e})}setShowBetaHeader(e){this.update(t=>{t.showBetaHeader=e})}setShowPermissionsTour(e){this.update(t=>{t.showPermissionsTour=e})}setHasShownMultichainAccountsIntroModal(e){this.update(t=>{t.hasShownMultichainAccountsIntroModal=e})}setProductTour(e){this.update(t=>{t.productTour=e})}setShowNetworkBanner(e){this.update(t=>{t.showNetworkBanner=e})}updateNetworkConnectionBanner(e){this.update(t=>{t.networkConnectionBanner=e})}setShowAccountBanner(e){this.update(t=>{t.showAccountBanner=e})}setCurrentExtensionPopupId(e){this.update(t=>{t.currentExtensionPopupId=e})}setTrezorModel(e){this.update(t=>{t.trezorModel=e})}updateNftDropDownState(e){this.update(t=>{t.nftsDropdownState=e})}getSignatureSecurityAlertResponse(e){return this.state.signatureSecurityAlertResponses[e]}addSignatureSecurityAlertResponse(e){e.securityAlertId&&this.update(t=>{t.signatureSecurityAlertResponses[String(e.securityAlertId)]=e})}setCurrentPopupId(e){this.update(t=>{t.currentPopupId=e})}getLastInteractedConfirmationInfo(){return this.state.lastInteractedConfirmationInfo}setLastInteractedConfirmationInfo(e){this.update(t=>{t.lastInteractedConfirmationInfo=e})}getCurrentPopupId(){return this.state.currentPopupId}getThrottledOriginState(e){return this.state.throttledOrigins[e]}updateThrottledOriginState(e,t){this.update(n=>{n.throttledOrigins[e]=t})}completeQrCodeScan(e){if(!C(T,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),C(T,this).resolve(e),y(T,this,null)}cancelQrCodeScan(e){if(!C(T,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),C(T,this).reject(e||new Error("Scan cancelled")),y(T,this,null)}setEnableEnforcedSimulations(e){this.update(t=>{t.enableEnforcedSimulations=e})}setEnableEnforcedSimulationsForTransaction(e,t){this.update(n=>{n.enableEnforcedSimulationsForTransactions[e]=t})}setEnforcedSimulationsSlippage(e){this.update(t=>{t.enforcedSimulationsSlippage=e})}setEnforcedSimulationsSlippageForTransaction(e,t){this.update(n=>{n.enforcedSimulationsSlippageForTransactions[e]=t})}setAppActiveTab(e){this.update(t=>{t.appActiveTab=e})}clearAppActiveTab(){this.update(e=>{e.appActiveTab=undefined})}setShowShieldEntryModalOnce(e){this.update(t=>{t.showShieldEntryModalOnce=e})}setPendingShieldCohort(e,t){this.update(n=>{n.pendingShieldCohort=e,t!==undefined&&(n.pendingShieldCohortTxType=t)})}setCanTrackWalletFundsObtained(e){this.update(t=>{t.canTrackWalletFundsObtained=e})}setIsWalletResetInProgress(e){this.update(t=>{t.isWalletResetInProgress=e})}getIsWalletResetInProgress(){return this.state.isWalletResetInProgress}setDefaultSubscriptionPaymentOptions(e){this.update(t=>{t.defaultSubscriptionPaymentOptions=e})}setShieldSubscriptionMetricsProps(e){this.update(t=>{t.shieldSubscriptionMetricsProps=e})}deleteDappSwapComparisonData(e){this.update(t=>{var n;null===(n=t.dappSwapComparisonData)||void 0===n||delete n[e],t.dappSwapComparisonData={...t.dappSwapComparisonData}})}setDappSwapComparisonData(e,t){this.update(n=>{var r;n.dappSwapComparisonData={...n.dappSwapComparisonData,[e]:{...(null===(r=n.dappSwapComparisonData)||void 0===r?void 0:r[e])??{},...t}}})}getDappSwapComparisonData(e){var t;return(null===(t=this.state.dappSwapComparisonData)||void 0===t?void 0:t[e])??undefined}}function E(e,t){this.waitingForUnlock.push({resolve:e}),this.messenger.publish("AppStateController:unlockChange"),t&&w(A,this,B).call(this)}function _(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;){var e;null===(e=this.waitingForUnlock.shift())||void 0===e||e.resolve()}this.messenger.publish("AppStateController:unlockChange")}w(A,this,R).call(this)}function O(e){this.update(t=>{t.timeoutMinutes=e}),w(A,this,j).call(this)}function j(){const{timeoutMinutes:e}=this.state;if(C(S,this)?clearTimeout(C(S,this)):d.isManifestV3&&C(M,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),!e)return;const t=Number(e);d.isManifestV3?(C(M,this).alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:t,periodInMinutes:t}),C(M,this).alarms.onAlarm.addListener(e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(C(k,this).call(this),C(M,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))})):y(S,this,setTimeout(()=>C(k,this).call(this),t*c.MINUTE))}function D(e,t){this.update(n=>{n[t].push(e)})}function N(e){return["popupGasPollTokens","notificationGasPollTokens","fullScreenGasPollTokens","sidePanelGasPollTokens"].includes(e)}function B(){C(I,this)||(y(I,this,(0,s.v4)()),this.messenger.call("ApprovalController:addRequest",{id:C(I,this),origin:p.ORIGIN_METAMASK,type:i.ApprovalType.Unlock},!0).catch(()=>{y(I,this,null)}))}function R(){if(C(I,this)){try{this.messenger.call("ApprovalController:acceptRequest",C(I,this))}catch(e){o.default.error("Failed to unlock approval request",e)}y(I,this,null)}}function F(e){if(C(T,this))return C(T,this).promise;const t=(0,l.createDeferredPromise)();return y(T,this,t),this.update(t=>{t.activeQrCodeScanRequest=e}),t.promise}n.AppStateController=P}}},{package:"$root$",file:"app/scripts/controllers/app-state-controller.ts"}],[221,{"@metamask/connectivity-controller":1482},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExtensionConnectivityAdapter=void 0;var r=e("@metamask/connectivity-controller");function s(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function o(e,t,n){return e.set(a(e,t),n),n}function i(e,t){return e.get(a(e,t))}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,c=new WeakMap;n.ExtensionConnectivityAdapter=class{constructor(){s(this,l,r.CONNECTIVITY_STATUSES.Online),s(this,c,[])}getStatus(){return i(l,this)}onConnectivityChange(e){i(c,this).push(e)}setStatus(e){o(l,this,e);for(const t of i(c,this))t(e)}destroy(){o(c,this,[])}}}}},{package:"$root$",file:"app/scripts/controllers/connectivity/extension-connectivity-adapter.ts"}],[222,{"./extension-connectivity-adapter":221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ExtensionConnectivityAdapter",{enumerable:!0,get:function(){return r.ExtensionConnectivityAdapter}});var r=e("./extension-connectivity-adapter")}}},{package:"$root$",file:"app/scripts/controllers/connectivity/index.ts"}],[223,{"../../../shared/constants/metametrics":5892,"../../../shared/modules/hexstring-utils":6023,"@metamask/base-controller":1401,"@metamask/controller-utils":1488,"@metamask/utils":3207,buffer:4176,loglevel:4948},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.isEIP1024EncryptedMessage=n.getDefaultState=n.default=void 0;var r,s=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("@metamask/base-controller"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),l=e("../../../shared/constants/metametrics"),c=e("../../../shared/modules/hexstring-utils");function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={unapprovedDecryptMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedDecryptMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}},g=e=>!!((0,a.isObject)(e.data)&&(0,a.hasProperty)(e.data,"version")&&(0,a.hasProperty)(e.data,"nonce")&&(0,a.hasProperty)(e.data,"ephemPublicKey")&&(0,a.hasProperty)(e.data,"ciphertext"));n.isEIP1024EncryptedMessage=g;const p=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});n.getDefaultState=p;class h extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:n,manager:r}){super({metadata:d,messenger:n,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),u(this,"_getState",void 0),u(this,"_metricsEvent",void 0),u(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this._decryptMessageManager=r,n.subscribe("DecryptMessageManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(n,(e,t,n)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=n})}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}))}clearUnapproved(){this._decryptMessageManager.clearUnapprovedMessages()}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const n=await this._decryptMessageManager.approveMessage(e);if(n.data=this._parseMessageData(n.data),!g(n))throw new Error("Invalid encrypted data.");const r=await this.messenger.call("KeyringController:decryptMessage",n);this._decryptMessageManager.setMessageStatusAndResult(t,r,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!g(e))throw new Error("Invalid encrypted data.");const n=await this.messenger.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,n),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,n){return n&&this._metricsEvent({event:n,category:l.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("DecryptMessageManager:stateChange",e=>{const n=this._migrateMessages(e.unapprovedMessages);this.update(r=>{t(r,n,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const n of Object.keys(e)){const r=e[n],s=this._migrateMessage(r);t[n]=s}return t}_migrateMessage(e){const{messageParams:t,...n}=e;return{...n,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,n=e.origin||i.ORIGIN_METAMASK;try{this.messenger.call("ApprovalController:addRequest",{id:t,origin:n,type:i.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const n=(0,c.stripHexPrefix)(e),r=t.from(n,"hex");return JSON.parse(r.toString("utf8"))}_rejectApproval(e){try{this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}n.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[224,{"../../../shared/constants/app":5876,"../../../shared/constants/keyring":5888,"../../../shared/constants/metametrics":5892,"@metamask/base-controller":1401,loglevel:4948},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("@metamask/base-controller"),i=e("../../../shared/constants/metametrics"),a=e("../../../shared/constants/keyring"),l=e("../../../shared/constants/app");function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={unapprovedEncryptionPublicKeyMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedEncryptionPublicKeyMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class d extends o.BaseController{constructor({messenger:e,manager:t,getEncryptionPublicKey:n,getAccountKeyringType:r,getState:s,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:u,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),c(this,"_getEncryptionPublicKey",void 0),c(this,"_getAccountKeyringType",void 0),c(this,"_getState",void 0),c(this,"_encryptionPublicKeyManager",void 0),c(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=n,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=o,this._encryptionPublicKeyManager=t,this.messenger.subscribe("EncryptionPublicKeyManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(e,(e,t,n)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=n})}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case a.KeyringType.ledger:return new Promise((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))});case a.KeyringType.trezor:return new Promise((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))});case a.KeyringType.lattice:return new Promise((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))});case a.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const n=await this._encryptionPublicKeyManager.approveMessage(e),r=await this._getEncryptionPublicKey(n.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,r,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)})}clearUnapproved(){this._encryptionPublicKeyManager.clearUnapprovedMessages()}_cancelAbstractMessage(e,t,n){return n&&this._metricsEvent({event:n,category:i.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("EncryptionPublicKeyManager:stateChange",e=>{const n=this._migrateMessages(e.unapprovedMessages);this.update(r=>{t(r,n,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const n of Object.keys(e)){const r=e[n],s=this._migrateMessage(r);t[n]=s}return t}_migrateMessage(e){const{messageParams:t,...n}=e;return{...n,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,n=e.origin||l.ORIGIN_METAMASK;this.messenger.call("ApprovalController:addRequest",{id:t,origin:n,type:"eth_getEncryptionPublicKey"},!0).catch(()=>{})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}}n.default=d}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[225,{"../../../../shared/lib/accounts/institutional-wallet-snap":5921,"@metamask/base-controller":1401,"@metamask/controller-utils":1488,"@metamask/snaps-utils":2994,"@metamask/transaction-controller":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InstitutionalSnapController=void 0;var r=e("@metamask/transaction-controller"),s=e("@metamask/snaps-utils"),o=e("@metamask/base-controller"),i=e("@metamask/controller-utils");function a(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const c=e("../../../../shared/lib/accounts/institutional-wallet-snap").INSTITUTIONAL_WALLET_SNAP_ID,u="InstitutionalSnapController",d={};var g=new WeakSet;class p extends o.BaseController{constructor({messenger:e}){super({messenger:e,name:u,state:{},metadata:d}),a(this,g),l(g,this,h).call(this)}async deferPublicationHook(e){if(await l(g,this,C).call(this,e)){const t=await l(g,this,f).call(this,e);return await l(g,this,b).call(this,e.id,t),!1}return!0}async beforeCheckPendingTransactionHook(e){return!await l(g,this,C).call(this,e)}}function h(){this.messenger.registerActionHandler(`${u}:publishHook`,this.deferPublicationHook.bind(this)),this.messenger.registerActionHandler(`${u}:beforeCheckPendingTransactionHook`,this.beforeCheckPendingTransactionHook.bind(this))}async function m(e){return await this.messenger.call("SnapController:handleRequest",e)}async function f(e){const t={from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,data:e.txParams.data,chainId:e.chainId},n={snapId:c,origin:i.ORIGIN_METAMASK,handler:s.HandlerType.OnRpcRequest,request:{method:"transactions.getMutableTransactionParameters",params:t}},o=await l(g,this,m).call(this,n);return{hash:o.transaction.transactionHash,nonce:o.transaction.nonce,gasLimit:o.transaction.gasLimit,maxFeePerGas:o.transaction.maxFeePerGas,maxPriorityFeePerGas:o.transaction.maxPriorityFeePerGas,type:o.transaction.type,status:r.TransactionStatus.submitted}}async function b(e,{status:t,hash:n,nonce:r,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a}){return await this.messenger.call("TransactionController:updateCustodialTransaction",{transactionId:e,status:t,hash:n,nonce:r,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a})}async function C(e){var t;const n=await this.messenger.call("AccountsController:getAccountByAddress",e.txParams.from);return null==n||null===(t=n.options.custodian)||void 0===t?void 0:t.deferPublication}n.InstitutionalSnapController=p}}},{package:"$root$",file:"app/scripts/controllers/institutional-snap/InstitutionalSnapController.ts"}],[226,{"../../../development/build/constants":608,"../../../shared/constants/alarms":5873,"../../../shared/constants/app":5876,"../../../shared/constants/keyring":5888,"../../../shared/constants/metametrics":5892,"../../../shared/constants/time":5913,"../../../shared/constants/transaction":5915,"../../../shared/lib/trace":5999,"../../../shared/modules/mv3.utils":6026,"../lib/util":368,"@metamask/base-controller":1401,"@metamask/name-controller":2414,"@metamask/utils":3207,buffer:4176,"ethereum-cryptography/keccak":4420,lodash:4940,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.overrideAnonymousEventNames=n.getDefaultMetaMetricsControllerState=n.default=void 0;var r=e("lodash"),s=e("ethereum-cryptography/keccak"),o=e("uuid"),i=e("@metamask/name-controller"),a=e("@metamask/utils"),l=e("@metamask/base-controller"),c=e("../../../shared/constants/app"),u=e("../../../shared/constants/metametrics"),d=e("../../../shared/constants/time"),g=e("../../../shared/modules/mv3.utils"),p=e("../../../shared/constants/alarms"),h=e("../lib/util"),m=e("../../../shared/constants/transaction"),f=e("../../../shared/lib/trace"),b=e("../../../development/build/constants"),C=e("../../../shared/constants/keyring");function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n){v(e,t),t.set(e,n)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(e,t){return e.get(S(e,t))}function k(e,t,n){return e.set(S(e,t),n),n}function S(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const I=n.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted,[u.MetaMetricsEventName.SignatureRequested]:u.MetaMetricsEventName.SignatureRequestedAnon,[u.MetaMetricsEventName.SignatureApproved]:u.MetaMetricsEventName.SignatureApprovedAnon,[u.MetaMetricsEventName.SignatureRejected]:u.MetaMetricsEventName.SignatureRejectedAnon},T=e=>{setTimeout(()=>{throw e})},A=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,h.generateRandomId)()},P={'You must pass either an "anonymousId" or a "userId".':!0},E={metaMetricsId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},participateInMetaMetrics:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},latestNonAnonymousEventTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},fragments:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},eventsBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},tracesBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},traits:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dataCollectionForMarketing:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},marketingCampaignCookieId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},segmentApiCalls:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},_=()=>({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{}});n.getDefaultMetaMetricsControllerState=_;var O=new WeakMap,j=new WeakMap,D=new WeakMap,N=new WeakMap,B=new WeakSet,R=new WeakMap;class F extends l.BaseController{constructor({state:e={},messenger:t,segment:n,version:s,environment:o,extension:i,captureException:l=T}){var c,u;super({name:"MetaMetricsController",metadata:E,state:{participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{},...e},messenger:t}),v(c=this,u=B),u.add(c),w(this,O,void 0),y(this,"chainId",void 0),y(this,"locale",void 0),y(this,"previousUserTraits",void 0),y(this,"version",void 0),w(this,j,void 0),w(this,D,void 0),w(this,N,void 0),w(this,R,(0,r.memoize)((e={})=>Object.values(e).reduce((e,t)=>e.concat(...Object.values(t)),[]))),k(O,this,e=>{const t=(0,a.getErrorMessage)(e);P[t]||l(e)}),this.chainId=S(B,this,x).call(this);const m=this.messenger.call("PreferencesController:getState");this.locale=m.currentLocale.replace("_","-"),this.version="production"===o?s:`${s}-${o}`,k(j,this,i),k(D,this,o),this.messenger.registerActionHandler("MetaMetricsController:trackEvent",this.trackEvent.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getMetaMetricsId",this.getMetaMetricsId.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:createEventFragment",this.createEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getEventFragmentById",this.getEventFragmentById.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:updateEventFragment",this.updateEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:deleteEventFragment",this.deleteEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:finalizeEventFragment",this.finalizeEventFragment.bind(this));const f=(0,r.omitBy)(e.fragments,"persist");this.messenger.subscribe("PreferencesController:stateChange",({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")}),this.messenger.subscribe("NetworkController:networkDidChange",({selectedNetworkClientId:e})=>{this.chainId=S(B,this,x).call(this,e)}),k(N,this,n),Object.values(f).forEach(e=>{this.processAbandonedFragment(e)}),g.isManifestV3&&Object.values(e.segmentApiCalls||{}).forEach(({eventType:e,payload:t})=>{try{S(B,this,X).call(this,e,t)}catch(e){M(O,this).call(this,e)}}),g.isManifestV3?(M(j,this).alarms.getAll().then(e=>{(0,h.checkAlarmExists)(e,p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||M(j,this).alarms.create(p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})}),M(j,this).alarms.onAlarm.addListener(e=>{e.name===p.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()})):setInterval(()=>{this.finalizeAbandonedFragments()},30*d.SECOND)}finalizeAbandonedFragments(){Object.values(this.state.fragments).forEach(e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)})}generateMetaMetricsId(){return(0,a.bytesToHex)((0,s.keccak256)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent)throw new Error(`Must specify success event. Success event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.state,n=e.uniqueIdentifier??(0,o.v4)(),s={id:n,...e,lastUpdated:Date.now()},i=e.initialEvent===m.TransactionMetaMetricsEvent.submitted&&t[n]?{...t[n],canDeleteIfAbandoned:!1}:{};return this.update(e=>{e.fragments[n]=(0,r.merge)({},i,s)}),s.initialEvent&&this.trackEvent({event:s.initialEvent,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:s.page,referrer:s.referrer,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),s}getEventFragmentById(e){return this.state.fragments[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:n}=this.state,s=n[e];if(!s&&e.includes("transaction-submitted-"))this.update(n=>{n.fragments[e]={canDeleteIfAbandoned:!0,category:u.MetaMetricsEventCategory.Transactions,successEvent:m.TransactionMetaMetricsEvent.finalized,id:e,...t,lastUpdated:Date.now()}});else{if(!s)throw new Error(`Event fragment with id ${e} does not exist.`);this.update(n=>{n.fragments[e]=(0,r.merge)(n.fragments[e],{...t,lastUpdated:Date.now()})})}}deleteEventFragment(e){this.state.fragments[e]&&this.update(t=>{delete t.fragments[e]})}finalizeEventFragment(e,{abandoned:t=!1,page:n,referrer:r}={}){const s=this.state.fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const o=t?s.failureEvent:s.successEvent;this.trackEvent({event:o??"",category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:n??s.page,referrer:s.referrer??r,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined}),this.update(t=>{delete t.fragments[e]})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:n}=this.state;if(!n||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const r=S(B,this,G).call(this,e);S(B,this,V).call(this,r)}updateExtensionUninstallUrl(e,n){const r={av:this.version};e&&(r.mmi=t.from(n).toString("base64"),r.env=M(D,this));const s=new URLSearchParams(r);M(j,this)&&M(j,this).runtime&&M(j,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,n=e&&!t?this.generateMetaMetricsId():t;return this.update(t=>{t.participateInMetaMetrics=e,t.metaMetricsId=n}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn(),this.trackTracesAfterMetricsOptIn(),this.clearTracesAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),M(D,this)!==b.ENVIRONMENT.DEVELOPMENT&&null!==n&&null!==e&&this.updateExtensionUninstallUrl(e,n),n}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.update(t=>{t.dataCollectionForMarketing=e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.update(t=>{t.marketingCampaignCookieId=e})}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:n,params:r,environmentType:s,page:o,referrer:i,actionId:a}=e,{metaMetricsId:l}=this.state,c=l?"userId":"anonymousId",d=l??u.METAMETRICS_ANONYMOUS_ID;S(B,this,X).call(this,"page",{messageId:A({actionId:a}),[c]:d,name:n,properties:{params:r,locale:this.locale,chain_id:this.chainId,environment_type:s},context:S(B,this,$).call(this,i,o)})}catch(e){M(O,this).call(this,e)}}trackEvent(e,t){S(B,this,U).call(this,e),S(B,this,L).call(this,e,t).catch(e=>{M(O,this).call(this,e)})}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{this.trackEvent(e)})}clearEventsAfterMetricsOptIn(){this.update(e=>{e.eventsBeforeMetricsOptIn=[]})}addEventBeforeMetricsOptIn(e){this.update(t=>{t.eventsBeforeMetricsOptIn.push(e)})}trackTracesAfterMetricsOptIn(){const{tracesBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{"start"===e.type?(0,f.trace)(e.request):"end"===e.type&&(0,f.endTrace)(e.request)})}clearTracesAfterMetricsOptIn(){this.update(e=>{e.tracesBeforeMetricsOptIn=[]})}addTraceBeforeMetricsOptIn(e){this.update(t=>{t.tracesBeforeMetricsOptIn.push(e)})}bufferedTrace(e,t){if(this.state.participateInMetaMetrics)return t?(0,f.trace)(e,t):(0,f.trace)(e);let n;if(e.parentContext&&"object"==typeof e.parentContext){const t=e.parentContext;n=null==t?void 0:t._name}return this.addTraceBeforeMetricsOptIn({type:"start",request:{...e,parentContext:undefined,startTime:e.startTime??Date.now()},parentTraceName:n}),undefined}bufferedEndTrace(e){this.state.participateInMetaMetrics?(0,f.endTrace)(e):this.addTraceBeforeMetricsOptIn({type:"end",request:{...e,timestamp:e.timestamp??Date.now()}})}updateTraits(e){this.update(t=>{t.traits={...t.traits,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.update(t=>{t.metaMetricsId=e})),e}_buildUserTraitsObject(e){var t,n,s;const{traits:o}=this.state,i=o[u.MetaMetricsUserTrait.StorageKind],a={[u.MetaMetricsUserTrait.AddressBookEntries]:(0,r.sum)(Object.values(e.addressBook).map(r.size)),[u.MetaMetricsUserTrait.InstallDateExt]:o[u.MetaMetricsUserTrait.InstallDateExt]||"",...i?{[u.MetaMetricsUserTrait.StorageKind]:i}:{},[u.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[u.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map(e=>e.chainId),[u.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter(({nativeCurrency:e})=>!e).map(({chainId:e})=>e),[u.MetaMetricsUserTrait.ChainIdList]:[...Object.keys(e.networkConfigurationsByChainId).map(e=>`eip155:${parseInt(e,16)}`),...Object.keys((null==e?void 0:e.multichainNetworkConfigurationsByChainId)||{})],[u.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[u.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[u.MetaMetricsUserTrait.NumberOfNftCollections]:S(B,this,W).call(this,e.allNfts),[u.MetaMetricsUserTrait.NumberOfNfts]:M(R,this).call(this,e.allNfts).length,[u.MetaMetricsUserTrait.NumberOfTokens]:S(B,this,H).call(this,e.allTokens),[u.MetaMetricsUserTrait.NumberOfHDEntropies]:S(B,this,q).call(this,e)??(null===(t=this.previousUserTraits)||void 0===t?void 0:t.number_of_hd_entropies),[u.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[u.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[u.MetaMetricsUserTrait.Theme]:e.theme||"default",[u.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[u.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.preferences.showNativeTokenAsMainBalance,[u.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[u.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[u.MetaMetricsUserTrait.PetnameAddressCount]:S(B,this,Z).call(this,e),[u.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[u.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[u.MetaMetricsUserTrait.TokenSortPreference]:(null===(n=e.preferences.tokenSortConfig)||void 0===n?void 0:n.key)||"",[u.MetaMetricsUserTrait.PrivacyModeEnabled]:e.preferences.privacyMode,[u.MetaMetricsUserTrait.NetworkFilterPreference]:Object.keys(e.preferences.tokenNetworkFilter||{}),[u.MetaMetricsUserTrait.ProfileId]:null===(s=Object.entries(e.srpSessionData||{}))||void 0===s||null===(s=s[0])||void 0===s||null===(s=s[1])||void 0===s||null===(s=s.profile)||void 0===s?void 0:s.profileId};if(!this.previousUserTraits&&e.participateInMetaMetrics)return this.previousUserTraits=a,a;if(this.previousUserTraits&&!(0,r.isEqual)(this.previousUserTraits,a)){const t=(0,r.pickBy)(a,(e,t)=>{const n=this.previousUserTraits[t];return!(0,r.isEqual)(n,e)});return e.participateInMetaMetrics&&(this.previousUserTraits=a),t}return null}}function x(e){const t=e||this.messenger.call("NetworkController:getState").selectedNetworkClientId,{configuration:{chainId:n}}=this.messenger.call("NetworkController:getNetworkClientById",t);return n}async function L(e,t){if(!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const n=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=I[`${e.event}`],o={...e,event:s??e.event},i=(0,r.merge)({...o.sensitiveProperties},{...o.properties});n.push(S(B,this,Q).call(this,S(B,this,K).call(this,{...o,properties:i,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}n.push(S(B,this,Q).call(this,S(B,this,K).call(this,e),t)),await Promise.all(n)}function U(e){if(!e.event)throw new Error(`Must specify event. Event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}function $(e,t=u.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function K(e){const{event:t,properties:n,revenue:s,value:o,currency:i,category:a,page:l,referrer:u,environmentType:d=c.ENVIRONMENT_TYPE_BACKGROUND,timestamp:g}=e;let p;return p=n&&"chain_id_caip"in n&&"string"==typeof n.chain_id_caip?null:n&&"chain_id"in n&&"string"==typeof n.chain_id?n.chain_id:this.chainId,{event:t,messageId:A(e),properties:{...(0,r.omit)(n,["revenue","locale","currency","value"]),revenue:s,value:o,currency:i,category:a,locale:this.locale,chain_id:p,environment_type:d},context:S(B,this,$).call(this,u,l),timestamp:g}}function G(e){const t={};for(const[n,r]of Object.entries(e))S(B,this,J).call(this,r)?t[n]=r.toISOString():S(B,this,z).call(this,r)?t[n]=r:console.warn(`MetaMetricsController: "${n}" value is not a valid trait type`);return t}function W(e={}){const t=M(R,this).call(this,e).map(e=>e.address);return new Set(t).size}function H(e){return Object.values(e).reduce((e,t)=>e+(0,r.sum)(Object.values(t).map(r.size)),0)}function q(e){var t;return(null===(t=e.keyrings)||void 0===t?void 0:t.filter(e=>e.type===C.KeyringType.hdKeyTree).length)??0}function V(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{S(B,this,X).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){M(O,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function z(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||S(B,this,Y).call(this,e)||S(B,this,J).call(this,e)}function Y(e){return Array.isArray(e)&&(e.every(e=>"string"==typeof e)||e.every(e=>"boolean"==typeof e)||e.every(e=>"number"==typeof e))}function J(e){return"[object Date]"===Object.prototype.toString.call(e)}function Q(e,t){const{isOptIn:n,metaMetricsId:r,matomoEvent:s,flushImmediately:o}=t||{};let i="userId",l=this.state.metaMetricsId,c=(null==t?void 0:t.excludeMetaMetricsId)??!1;const d=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&d&&(c=!0),c||n&&!r?(i="anonymousId",l=u.METAMETRICS_ANONYMOUS_ID):n&&r&&(l=r),e[i]=l??undefined,!0===s&&(e.properties.legacy_event=!0),new Promise((t,n)=>{S(B,this,X).call(this,"track",e,e=>{if(e){const t=(0,a.isErrorWithMessage)(e)?e.message:"",r=(0,a.isErrorWithStack)(e)?e.stack:undefined,s=new Error(t);return r&&(s.stack=r),n(s)}return t()}),o&&M(N,this).flush()})}function X(e,t,n){const{metaMetricsId:r,latestNonAnonymousEventTimestamp:s,participateInMetaMetrics:o}=this.state;if(!o||!r)return;const i=t.messageId||(0,h.generateRandomId)();let a=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,h.isValidDate)(e)&&(a=e)}const l={...t,messageId:i,timestamp:a};this.update(t=>{t.latestNonAnonymousEventTimestamp=l.anonymousId===u.METAMETRICS_ANONYMOUS_ID?s:a.valueOf(),t.segmentApiCalls[i]={eventType:e,payload:{...l,timestamp:l.timestamp.toString()}}});M(N,this)[e](l,e=>(this.update(e=>{delete e.segmentApiCalls[i]}),null==n?void 0:n(e)))}function Z(e){var t;const n=(null===(t=e.names)||void 0===t?void 0:t[i.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(n).reduce((e,t)=>{const r=n[t];return e+Object.keys(r).reduce((e,t)=>{var n;return e+(Boolean(null===(n=r[t].name)||void 0===n?void 0:n.length)?1:0)},0)},0)}n.default=F}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics-controller.ts"}],[227,{"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionController=void 0;var r=e("@metamask/base-controller");function s(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(i(e,t))}function i(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const a="MetaMetricsDataDeletionController",l={metaMetricsDataDeletionId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionStatus:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};var c=new WeakMap,u=new WeakSet;class d extends r.BaseController{constructor({dataDeletionService:e,messenger:t,state:n}){var r,o;super({messenger:t,metadata:l,name:a,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...n}}),s(r=this,o=u),o.add(r),function(e,t,n){s(e,t),t.set(e,n)}(this,c,void 0),function(e,t,n){e.set(i(e,t),n)}(c,this,e),i(u,this,g).call(this)}async createMetaMetricsDataDeletionTask(){const{metaMetricsId:e}=this.messenger.call("MetaMetricsController:getState");if(!e)throw new Error("MetaMetrics ID not found");const t=await o(c,this).createDataDeletionRegulationTask(e);this.update(e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()}),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await o(c,this).fetchDeletionRegulationStatus(e);this.update(e=>{e.metaMetricsDataDeletionStatus=t??undefined})}}function g(){this.messenger.registerActionHandler(`${a}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messenger.registerActionHandler(`${a}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}n.MetaMetricsDataDeletionController=d}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[228,{"../../../shared/constants/network":5896,"@metamask/base-controller":1401,"@metamask/keyring-api":2300,"@metamask/multichain-network-controller":2406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkOrderController=void 0;var r=e("@metamask/keyring-api"),s=e("@metamask/base-controller"),o=e("@metamask/multichain-network-controller"),i=e("../../../shared/constants/network");const a={orderedNetworkList:[]},l={orderedNetworkList:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class c extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:l,name:"NetworkOrderController",state:{...a,...t}}),this.messenger.subscribe("NetworkController:stateChange",e=>{this.onNetworkControllerStateChange(e)})}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update(t=>{const n=Object.keys(e).filter(e=>!i.TEST_CHAINS.includes(e)).map(o.toEvmCaipChainId),s=[r.BtcScope.Mainnet,r.SolScope.Mainnet,r.TrxScope.Mainnet],a=n.filter(e=>!t.orderedNetworkList.some(({networkId:t})=>t===e)).map(e=>({networkId:e}));t.orderedNetworkList=t.orderedNetworkList.filter(({networkId:e})=>n.includes(e)||s.includes(e)).concat(a)})}updateNetworksList(e){this.update(t=>{t.orderedNetworkList=e.map(e=>({networkId:e}))})}}n.NetworkOrderController=c}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[229,{"../../../shared/constants/onboarding":5899,"../../../shared/modules/environment":6019,"@metamask/base-controller":1401,loglevel:4948},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultOnboardingControllerState=n.default=void 0;var r,s=e("@metamask/base-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/onboarding"),a=e("../../../shared/modules/environment");function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=()=>({seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1});n.getDefaultOnboardingControllerState=c;const u={onboardingTabs:{}},d={seedPhraseBackedUp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},firstTimeFlowType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},completedOnboarding:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},onboardingTabs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class g extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:d,name:"OnboardingController",state:{seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1,...t,...u}}),l(this,"registerOnboarding",async(e,t)=>{if(this.state.completedOnboarding)return void o.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:n}={...this.state};n&&(n[e]&&n[e]===t||(o.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),this.update(r=>{r.onboardingTabs={...n,[e]:t}})))})}setSeedPhraseBackedUp(e){this.update(t=>{t.seedPhraseBackedUp=e})}completeOnboarding(){return this.update(e=>{e.completedOnboarding=!0}),!0}setFirstTimeFlowType(e){this.update(t=>{t.firstTimeFlowType=e})}getIsSocialLoginFlow(){if(!(0,a.getIsSeedlessOnboardingFeatureEnabled)())return!1;const{firstTimeFlowType:e}=this.state;return e===i.FirstTimeFlowType.socialCreate||e===i.FirstTimeFlowType.socialImport}resetOnboarding(){this.update(e=>{e.completedOnboarding=!1,e.firstTimeFlowType=null,e.seedPhraseBackedUp=null,e.onboardingTabs={}})}}n.default=g}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[23,{"@metamask/assets-controllers":1324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NftDetectionControllerInit=void 0;var r=e("@metamask/assets-controllers");n.NftDetectionControllerInit=e=>{const{controllerMessenger:t,getController:n}=e,s=()=>n("NftController");return{controller:new r.NftDetectionController({messenger:t,addNfts:(...e)=>s().addNfts(...e),getNftState:()=>s().state,disabled:!n("PreferencesController").state.useNftDetection}),persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-detection-controller-init.ts"}],[235,{"../../../../../shared/constants/keyring":5888,"../../../../../shared/constants/snaps/permissions":5907,"@metamask/keyring-controller":2310,"@metamask/snaps-rpc-methods":2821,"@metamask/utils":3207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapPermissionSpecifications=function(e,t){return{...(0,r.buildSnapEndowmentSpecifications)(Object.keys(i.ExcludedSnapEndowments)),...(0,r.buildSnapRestrictedMethodSpecifications)(Object.keys(i.ExcludedSnapPermissions),{getPreferences:()=>{const t=e.call("CurrencyRateController:getState").currentCurrency,{currentLocale:n,openSeaEnabled:r,preferences:{privacyMode:s,showTestNetworks:o},securityAlertsEnabled:i,useCurrencyRateCheck:a,useTransactionSimulations:l,useTokenDetection:c,useMultiAccountBalanceChecker:u,useNftDetection:d}=e.call("PreferencesController:getState");return{locale:n,currency:t,hideBalances:s,useSecurityAlerts:i,useExternalPricingData:a,simulateOnChainActions:l,useTokenDetection:c,batchCheckBalances:u,displayNftMedia:r,useNftDetection:d,showTestnets:o}},clearSnapState:e.call.bind(e,"SnapController:clearSnapState"),getMnemonic:async t=>{if(!t){const[t]=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!t.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return t.mnemonic}try{const{type:n,mnemonic:r}=await e.call("KeyringController:withKeyring",{id:t},async({keyring:e})=>({type:e.type,mnemonic:(0,o.hasProperty)(e,"mnemonic")?e.mnemonic:undefined}));if(n!==s.KeyringTypes.hd||!r)throw new Error(`Entropy source with ID "${t}" not found.`);return r}catch{throw new Error(`Entropy source with ID "${t}" not found.`)}},getMnemonicSeed:async t=>{if(!t){const[t]=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!t.seed)throw new Error("Primary keyring mnemonic unavailable.");return t.seed}try{const{type:n,seed:r}=await e.call("KeyringController:withKeyring",{id:t},async({keyring:e})=>({type:e.type,seed:(0,o.hasProperty)(e,"seed")?e.seed:undefined}));if(n!==s.KeyringTypes.hd||!r)throw new Error(`Entropy source with ID "${t}" not found.`);return r}catch{throw new Error(`Entropy source with ID "${t}" not found.`)}},getUnlockPromise:e.call.bind(e,"AppStateController:getUnlockPromise"),getSnap:e.call.bind(e,"SnapController:get"),handleSnapRpcRequest:e.call.bind(e,"SnapController:handleRequest"),getSnapState:e.call.bind(e,"SnapController:getSnapState"),requestUserApproval:t.addAndShowApprovalRequest,showNativeNotification:(t,n)=>e.call("RateLimitController:call",t,"showNativeNotification",t,n.message),showInAppNotification:(t,n)=>{const{content:r,message:s,title:o,footerLink:i}=n,a={interfaceId:r,message:s,title:o,footerLink:i};return e.call("RateLimitController:call",t,"showInAppNotification",t,a)},updateSnapState:e.call.bind(e,"SnapController:updateSnapState"),maybeUpdatePhishingList:()=>{const{usePhishDetect:t}=e.call("PreferencesController:getState");t&&e.call("PhishingController:maybeUpdateState")},isOnPhishingList:t=>{const{usePhishDetect:n}=e.call("PreferencesController:getState");return!!n&&e.call("PhishingController:testOrigin",t).result},createInterface:e.call.bind(e,"SnapInterfaceController:createInterface"),getInterface:e.call.bind(e,"SnapInterfaceController:getInterface"),getClientCryptography:()=>({}),getSnapKeyring:async()=>{const[n]=e.call("KeyringController:getKeyringsByType",a.KeyringType.snap);return n||(await t.addNewKeyring(a.KeyringType.snap),e.call("KeyringController:getKeyringsByType",a.KeyringType.snap)[0])}})}};var r=e("@metamask/snaps-rpc-methods"),s=e("@metamask/keyring-controller"),o=e("@metamask/utils"),i=e("../../../../../shared/constants/snaps/permissions"),a=e("../../../../../shared/constants/keyring")}}},{package:"$root$",file:"app/scripts/controllers/permissions/snaps/specifications.ts"}],[2359,{"@metamask/base-controller":1401,events:4472,uuid:5835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMessageManager=void 0;const r=e("@metamask/base-controller"),s=e("events"),o=e("uuid"),i={unapprovedMessages:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedMessagesCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class a extends r.BaseController{constructor({additionalFinishStatuses:e,messenger:t,name:n,securityProviderRequest:r,state:o={}}){super({messenger:t,metadata:i,name:n,state:{unapprovedMessages:{},unapprovedMessagesCount:0,...o}}),this.internalEvents=new s.EventEmitter,this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=e??[]}addRequestToMessageParams(e,t){const n={...e};return t&&(n.requestId=t.id,n.origin=t.origin),n}createUnapprovedMessage(e,t,n){return{id:(0,o.v1)(),messageParams:e,securityAlertResponse:n?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){this.update(e=>{e.unapprovedMessages=this.getUnapprovedMessages(),e.unapprovedMessagesCount=this.getUnapprovedMessagesCount()}),e&&this.messenger.publish(`${this.name}:updateBadge`)}setMessageStatus(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);const r={...n,status:t};this.updateMessage(r),this.internalEvents.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.internalEvents.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const n=this.messages.findIndex(t=>e.id===t.id);-1!==n&&(this.messages[n]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}clearUnapprovedMessages(){this.update(e=>{e.unapprovedMessages={},e.unapprovedMessagesCount=0})}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter(e=>"unapproved"===e.status).reduce((e,t)=>(e[t.id]=t,e),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find(t=>t.id===e)}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,n){this.setResult(e,t),this.setMessageStatus(e,n)}setResult(e,t){const n=this.getMessage(e);n&&this.updateMessage({...n,rawSig:t},!1)}setMetadata(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);this.updateMessage({...n,metadata:t},!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:n,...r}=e;return new Promise((e,s)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"signed":return e(n.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${n.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(r)}`))}})})}}n.AbstractMessageManager=a,n.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.cjs"}],[2360,{"./AbstractMessageManager.cjs":2359,"./utils.cjs":2363,"@metamask/controller-utils":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DecryptMessageManager=void 0;const r=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),o=e("./utils.cjs"),i="DecryptMessageManager";class a extends s.AbstractMessageManager{constructor({additionalFinishStatuses:e,messenger:t,securityProviderRequest:n,state:r}){super({additionalFinishStatuses:e,messenger:t,name:i,securityProviderRequest:n,state:r})}async addUnapprovedMessageAsync(e,t){(0,o.validateDecryptedMessageData)(e);const n=await this.addUnapprovedMessage(e,t);return new Promise((t,r)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"decrypted":return t(n.rawSig);case"rejected":return r(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return r(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return r(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}})})}async addUnapprovedMessage(e,t){const n=this.addRequestToMessageParams(e,t);e.data=(0,o.normalizeMessageData)(e.data);const s=this.createUnapprovedMessage(n,r.ApprovalType.EthDecrypt,t),a=s.id;return await this.addMessage(s),this.messenger.publish(`${i}:unapprovedMessage`,{...n,metamaskId:a}),a}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.cjs"}],[2361,{"./AbstractMessageManager.cjs":2359,"./utils.cjs":2363,"@metamask/controller-utils":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EncryptionPublicKeyManager=void 0;const r=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),o=e("./utils.cjs");class i extends s.AbstractMessageManager{constructor({additionalFinishStatuses:e,messenger:t,securityProviderRequest:n,state:r}){super({additionalFinishStatuses:e,messenger:t,name:"EncryptionPublicKeyManager",securityProviderRequest:n,state:r})}async addUnapprovedMessageAsync(e,t){(0,o.validateEncryptionPublicKeyMessageData)(e);const n=await this.addUnapprovedMessage(e,t);return new Promise((t,r)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"received":return t(n.rawSig);case"rejected":return r(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return r(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}})})}async addUnapprovedMessage(e,t){const n=this.addRequestToMessageParams(e,t),s=this.createUnapprovedMessage(n,r.ApprovalType.EthGetEncryptionPublicKey,t),o=s.id;return await this.addMessage(s),this.messenger.publish(`${this.name}:unapprovedMessage`,{...n,metamaskId:o}),o}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}n.EncryptionPublicKeyManager=i,n.default=i}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.cjs"}],[2362,{"./AbstractMessageManager.cjs":2359,"./DecryptMessageManager.cjs":2360,"./EncryptionPublicKeyManager.cjs":2361},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./AbstractMessageManager.cjs"),n),s(e("./EncryptionPublicKeyManager.cjs"),n),s(e("./DecryptMessageManager.cjs"),n)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.cjs"}],[2363,{"@metamask/controller-utils":1488,"@metamask/utils":3207,buffer:4176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.validateDecryptedMessageData=n.validateEncryptionPublicKeyMessageData=n.normalizeMessageData=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),o=/^[0-9A-Fa-f]+$/gu;function i(e,t){if(!e||"string"!=typeof e||!(0,r.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}n.normalizeMessageData=function(e){try{const t=(0,s.remove0x)(e);if(t.match(o))return(0,s.add0x)(t)}catch(e){}return(0,s.bytesToHex)(t.from(e,"utf8"))},n.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;i(t,"from")},n.validateDecryptedMessageData=function(e){const{from:t}=e;i(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.cjs"}],[237,{"../../../shared/constants/defi-referrals":5881,"../../../shared/constants/hardware-wallets":5886,"../../../shared/constants/network":5896,"../../../shared/constants/preferences":5901,"@metamask/base-controller":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultPreferencesControllerState=n.ReferralStatus=n.PreferencesController=void 0;var r=e("@metamask/base-controller"),s=e("../../../shared/constants/network"),o=e("../../../shared/constants/hardware-wallets"),i=e("../../../shared/constants/preferences"),a=e("../../../shared/constants/defi-referrals");function l(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}let c=n.ReferralStatus=function(e){return e.Approved="approved",e.Passed="passed",e.Declined="declined",e}({});const u=()=>({addSnapAccountEnabled:!1,advancedGasFee:{},currentLocale:"",dismissSeedBackUpReminder:!1,enableMV3TimestampSave:!0,featureFlags:{},forgottenPassword:!1,identities:{},ipfsGateway:s.IPFS_DEFAULT_GATEWAY_URL,isIpfsGatewayEnabled:!0,knownMethodData:{},ledgerTransportType:window.navigator.hid?o.LedgerTransportTypes.webhid:o.LedgerTransportTypes.u2f,lostIdentities:{},manageInstitutionalWallets:!1,openSeaEnabled:!0,overrideContentSecurityPolicyHeader:!0,preferences:{autoLockTimeLimit:undefined,avatarType:"maskicon",dismissSmartAccountSuggestionEnabled:!1,featureNotificationsEnabled:!1,hideZeroBalanceTokens:!1,petnamesEnabled:!0,privacyMode:!1,showConfirmationAdvancedDetails:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showMultiRpcModal:!1,showNativeTokenAsMainBalance:!1,showTestNetworks:!1,skipDeepLinkInterstitial:!1,smartAccountOptIn:!0,smartTransactionsOptInStatus:!0,smartTransactionsMigrationApplied:!1,tokenNetworkFilter:{},tokenSortConfig:{key:"tokenFiatAmount",order:"dsc",sortCallback:"stringNumeric"},useNativeCurrencyAsPrimaryCurrency:!0,useSidePanelAsDefault:!1},securityAlertsEnabled:!0,selectedAddress:"",snapRegistryList:{},snapsAddSnapAccountModalDismissed:!1,theme:i.ThemeType.os,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!1,useCurrencyRateCheck:!0,useExternalNameSources:!0,useExternalServices:!0,isMultiAccountBalancesEnabled:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,usePhishDetect:!0,useSafeChainsListValidation:!0,useTokenDetection:!0,useTransactionSimulations:!0,watchEthereumAccountEnabled:!1,referrals:{[a.DefiReferralPartner.Hyperliquid]:{}}});n.getDefaultPreferencesControllerState=u;const d={addSnapAccountEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},advancedGasFee:{persist:!0,includeInStateLogs:!0,includeInDebugSnapshot:!0,usedInUi:!0},currentLocale:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},dismissSeedBackUpReminder:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableMV3TimestampSave:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},featureFlags:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},forgottenPassword:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},identities:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ipfsGateway:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},isIpfsGatewayEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},knownMethodData:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ledgerTransportType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lostIdentities:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},manageInstitutionalWallets:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},openSeaEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},overrideContentSecurityPolicyHeader:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},preferences:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},securityAlertsEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},selectedAddress:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},snapRegistryList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},snapsAddSnapAccountModalDismissed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},textDirection:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},theme:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},use4ByteResolution:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useAddressBarEnsResolution:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useBlockie:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useCurrencyRateCheck:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useExternalNameSources:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},useExternalServices:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},isMultiAccountBalancesEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useMultiAccountBalanceChecker:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useNftDetection:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},usePhishDetect:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useSafeChainsListValidation:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},useTokenDetection:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},useTransactionSimulations:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},watchEthereumAccountEnabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},referrals:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};var g=new WeakSet;class p extends r.BaseController{constructor({messenger:e,state:t}){const n=u(),r={...n,...t,preferences:{...n.preferences,...null==t?void 0:t.preferences},referrals:{...n.referrals,...null==t?void 0:t.referrals},isMultiAccountBalancesEnabled:(null==t?void 0:t.useMultiAccountBalanceChecker)??n.isMultiAccountBalancesEnabled};super({messenger:e,metadata:d,name:"PreferencesController",state:r}),l(this,g),this.messenger.subscribe("AccountsController:stateChange",function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(g,this,h).bind(this)),globalThis.setPreference=(e,t)=>this.setFeatureFlag(e,t)}setPasswordForgotten(e){this.update(t=>{t.forgottenPassword=e})}setUseBlockie(e){this.update(t=>{t.useBlockie=e})}setUsePhishDetect(e){this.update(t=>{t.usePhishDetect=e})}setUseMultiAccountBalanceChecker(e){this.update(t=>{t.useMultiAccountBalanceChecker=e,t.isMultiAccountBalancesEnabled=e})}setUseSafeChainsListValidation(e){this.update(t=>{t.useSafeChainsListValidation=e})}toggleExternalServices(e){this.update(t=>{t.useExternalServices=e}),this.setUseTokenDetection(e),this.setUseCurrencyRateCheck(e),this.setUsePhishDetect(e),this.setUseAddressBarEnsResolution(e),this.setOpenSeaEnabled(e),this.setUseNftDetection(e),this.setUseSafeChainsListValidation(e)}setUseTokenDetection(e){this.update(t=>{t.useTokenDetection=e})}setUseNftDetection(e){this.update(t=>{t.useNftDetection=e})}setUse4ByteResolution(e){this.update(t=>{t.use4ByteResolution=e})}setUseCurrencyRateCheck(e){this.update(t=>{t.useCurrencyRateCheck=e})}setOpenSeaEnabled(e){this.update(t=>{t.openSeaEnabled=e})}setSecurityAlertsEnabled(e){this.update(t=>{t.securityAlertsEnabled=e})}setAddSnapAccountEnabled(e){this.update(t=>{t.addSnapAccountEnabled=e})}setUseExternalNameSources(e){this.update(t=>{t.useExternalNameSources=e})}setUseTransactionSimulations(e){this.update(t=>{t.useTransactionSimulations=e})}setAdvancedGasFee({chainId:e,gasFeePreferences:t}){const{advancedGasFee:n}=this.state;this.update(r=>{r.advancedGasFee={...n,[e]:t}})}setTheme(e){this.update(t=>{t.theme=e})}addKnownMethodData(e,t){const{knownMethodData:n}=this.state,r={...n};r[e]=t,this.update(e=>{e.knownMethodData=r})}setCurrentLocale(e){const t=["ar","dv","fa","he","ku"].includes(e)?"rtl":"auto";return this.update(n=>{n.currentLocale=e,n.textDirection=t}),t}setSelectedAddress(e){const t=this.messenger.call("AccountsController:getAccountByAddress",e);if(!t)throw new Error(`Identity for '${e} not found`);this.messenger.call("AccountsController:setSelectedAccount",t.id)}getSelectedAddress(){return this.messenger.call("AccountsController:getSelectedAccount").address}setAccountLabel(e,t){if(!e)throw new Error(`setAccountLabel requires a valid address, got ${String(e)}`);const n=this.messenger.call("AccountsController:getAccountByAddress",e);return n?(this.messenger.call("AccountsController:setAccountName",n.id,t),t):undefined}setFeatureFlag(e,t){const n={...this.state.featureFlags,[e]:t};return this.update(e=>{e.featureFlags=n}),n}setPreference(e,t){const n={...this.getPreferences(),[e]:t};return this.update(e=>{e.preferences=n}),n}getPreferences(){return this.state.preferences}getIpfsGateway(){return this.state.ipfsGateway}setIpfsGateway(e){return this.update(t=>{t.ipfsGateway=e}),e}setIsIpfsGatewayEnabled(e){this.update(t=>{t.isIpfsGatewayEnabled=e})}setUseAddressBarEnsResolution(e){this.update(t=>{t.useAddressBarEnsResolution=e})}setLedgerTransportPreference(e){return this.update(t=>{t.ledgerTransportType=e}),e}setDismissSeedBackUpReminder(e){this.update(t=>{t.dismissSeedBackUpReminder=e})}setOverrideContentSecurityPolicyHeader(e){this.update(t=>{t.overrideContentSecurityPolicyHeader=e})}setManageInstitutionalWallets(e){this.update(t=>{t.manageInstitutionalWallets=e})}setServiceWorkerKeepAlivePreference(e){this.update(t=>{t.enableMV3TimestampSave=e})}setUseSidePanelAsDefault(e){this.update(t=>{t.preferences.useSidePanelAsDefault=e})}setSnapsAddSnapAccountModalDismissed(e){this.update(t=>{t.snapsAddSnapAccountModalDismissed=e})}addReferralApprovedAccount(e,t){this.update(n=>{n.referrals[e][t]=c.Approved})}addReferralPassedAccount(e,t){this.update(n=>{n.referrals[e][t]=c.Passed})}addReferralDeclinedAccount(e,t){this.update(n=>{n.referrals[e][t]=c.Declined})}removeReferralDeclinedAccount(e,t){this.update(n=>{delete n.referrals[e][t]})}setAccountsReferralApproved(e,t){this.update(n=>{t.forEach(t=>{n.referrals[e][t]=c.Approved})})}}function h(e){const{accounts:t,selectedAccount:n}=e.internalAccounts,r=t[n],{identities:s,lostIdentities:o}=this.state,i=Object.values(t).map(e=>e.address.toLowerCase()),a=Object.keys(s).reduce((e,t)=>(i.includes(t.toLowerCase())&&(e[t]=s[t]),e),{...o}),l=Object.values(t).reduce((e,t)=>(e[t.address]={address:t.address,name:t.metadata.name,lastSelected:t.metadata.lastSelected},e),{});this.update(e=>{e.identities=l,e.lostIdentities=a,e.selectedAddress=(null==r?void 0:r.address)||""})}n.PreferencesController=p}}},{package:"$root$",file:"app/scripts/controllers/preferences-controller.ts"}],[2371,{"./logger.cjs":2378,"./utils.cjs":2389,"@metamask/account-api":1243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,g=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountGroup=void 0;const h=e("@metamask/account-api"),m=e("@metamask/account-api"),f=e("./logger.cjs"),b=e("./utils.cjs");n.MultichainAccountGroup=class{constructor({groupIndex:e,wallet:t,providers:n,messenger:h}){r.set(this,void 0),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,!1),g(this,r,(0,m.toMultichainAccountGroupId)(t.id,e),"f"),g(this,o,e,"f"),g(this,s,t,"f"),g(this,i,n,"f"),g(this,c,h,"f"),g(this,a,new Map,"f"),g(this,l,new Map,"f"),g(this,u,(0,f.createModuleLogger)(f.projectLogger,`[${p(this,r,"f")}]`),"f"),this.sync(),g(this,d,!0,"f")}sync(){p(this,u,"f").call(this,"Synchronizing with account providers..."),p(this,l,"f").clear();for(const e of p(this,i,"f")){const t=[];for(const n of e.getAccounts())n.options.entropy.id===this.wallet.entropySource&&n.options.entropy.groupIndex===this.groupIndex&&t.push(n.id);p(this,a,"f").set(e,t);for(const n of t)p(this,l,"f").set(n,e)}p(this,d,"f")&&p(this,c,"f").publish("MultichainAccountService:multichainAccountGroupUpdated",this),p(this,u,"f").call(this,"Synchronized")}get id(){return p(this,r,"f")}get type(){return h.AccountGroupType.MultichainAccount}get wallet(){return p(this,s,"f")}get groupIndex(){return p(this,o,"f")}hasAccounts(){return p(this,l,"f").size>0}getAccounts(){const e=[];for(const[t,n]of p(this,a,"f").entries())for(const r of n){const n=t.getAccount(r);n&&e.push(n)}return e}getAccount(e){const t=p(this,l,"f").get(e);return t?t.getAccount(e):undefined}get(e){return(0,h.selectOne)(this.getAccounts(),e)}select(e){return(0,h.select)(this.getAccounts(),e)}async alignAccounts(){p(this,u,"f").call(this,"Aligning accounts...");if((await Promise.allSettled(p(this,i,"f").map(async e=>{try{const t=p(this,a,"f").get(e);if(!t||0===t.length){p(this,u,"f").call(this,`Found missing accounts for account provider "${e.getName()}", creating them now...`);const t=await e.createAccounts({entropySource:this.wallet.entropySource,groupIndex:this.groupIndex});return p(this,u,"f").call(this,`Created ${t.length} accounts`),t}return Promise.resolve()}catch(t){p(this,u,"f").call(this,`${f.WARNING_PREFIX} ${t instanceof Error?t.message:String(t)}`);const n=(0,b.createSentryError)(`Unable to align accounts with provider "${e.getName()}"`,t,{groupIndex:this.groupIndex,provider:e.getName()});throw p(this,c,"f").captureException?.(n),t}}))).some(e=>"rejected"===e.status)){const e=`Failed to fully align multichain account group for entropy ID: ${this.wallet.entropySource} and group index: ${this.groupIndex}, some accounts might be missing`;p(this,u,"f").call(this,`${f.WARNING_PREFIX} ${e}`),console.warn(e)}p(this,u,"f").call(this,"Aligned")}},r=new WeakMap,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/MultichainAccountGroup.cjs"}]],[],{});