LavaPack.loadBundle([[7217,{"../../../shared/constants/bridge":5878,"../../../shared/constants/metametrics":5892,"../../../shared/constants/network":5896,"../../../shared/lib/asset-utils":5925,"../../../shared/lib/deep-links/routes/swap":5946,"../../../shared/lib/trace":5999,"../../contexts/metametrics":7110,"../../ducks/bridge/actions":7125,"../../ducks/bridge/selectors":7127,"../../helpers/constants/routes":7154,"../../selectors":8207,"@metamask/bridge-controller":1408,react:5358,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("react-redux"),o=e("react-router-dom"),a=e("@metamask/bridge-controller"),i=e("../../ducks/bridge/actions"),c=e("../../selectors"),u=e("../../contexts/metametrics"),l=e("../../../shared/constants/metametrics"),d=e("../../helpers/constants/routes"),m=e("../../../shared/lib/deep-links/routes/swap"),p=e("../../../shared/lib/trace"),h=e("../../../shared/lib/asset-utils"),f=e("../../../shared/constants/bridge"),g=e("../../ducks/bridge/selectors"),y=e("../../../shared/constants/network");n.default=()=>{const e=(0,o.useNavigate)(),t=(0,r.useDispatch)(),n=(0,s.useContext)(u.MetaMetricsContext),S=(0,r.useSelector)(c.getMetaMetricsId),k=(0,r.useSelector)(c.getParticipateInMetaMetrics),v=(0,r.useSelector)(c.getDataCollectionForMarketing),b=(0,r.useSelector)(g.getLastSelectedChainId),T=(0,r.useSelector)(g.getFromChain),w=(0,r.useSelector)(g.getFromChains),C=(0,s.useCallback)(e=>f.ALL_ALLOWED_BRIDGE_CHAIN_IDS.includes(e)&&w.some(t=>(0,a.formatChainIdToCaip)(t.chainId)===(0,a.formatChainIdToCaip)(e)),[w]);return{openBridgeExperience:(0,s.useCallback)((s,r)=>{let o=null!=r&&r.chainId&&C(r.chainId)?(0,h.toAssetId)(r.address,(0,a.formatChainIdToCaip)(r.chainId)):undefined;const c=b&&C(b)?b:y.CHAIN_IDS.MAINNET;var u;o||c===(null==T?void 0:T.chainId)||(o=null===(u=(0,a.getNativeAssetForChainId)(c))||void 0===u?void 0:u.assetId);(0,p.trace)({name:p.TraceName.SwapViewLoaded,startTime:Date.now()}),n({event:l.MetaMetricsEventName.SwapLinkClicked,category:l.MetaMetricsEventCategory.Navigation,properties:{token_symbol:(null==r?void 0:r.symbol)??"",location:s,text:"Swap",chain_id:(null==r?void 0:r.chainId)??b}}),t((0,i.trackUnifiedSwapBridgeEvent)(a.UnifiedSwapBridgeEventName.ButtonClicked,{location:s,token_symbol_source:(null==r?void 0:r.symbol)??"ETH",token_symbol_destination:""})),t((0,i.resetInputFields)());let f=`${d.CROSS_CHAIN_SWAP_ROUTE}${d.PREPARE_SWAP_ROUTE}`;f+="?",o&&(f+=`${m.BridgeQueryParams.FROM}=${o}`),s===l.MetaMetricsSwapsEventSource.TransactionShield&&(f+=(o?"&":"")+"isFromTransactionShield=true"),e(f)},[e,S,n,k,v,b,null==T?void 0:T.chainId,C])}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridging.ts"}],[7218,{"../../ducks/bridge/selectors":7127,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCountdownTimer=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../ducks/bridge/selectors");const i=1e3;n.useCountdownTimer=()=>{const e=(0,s.c)(9),{quotesLastFetchedMs:t}=(0,o.useSelector)(a.getBridgeQuotes),n=(0,o.useSelector)(a.getQuoteRefreshRate),[c,u]=(0,r.useState)(n+i),l=(0,r.useRef)(n);let d,m,p,h,f,g;return e[0]!==c?(d=()=>{l.current=c},m=[c],e[0]=c,e[1]=d,e[2]=m):(d=e[1],m=e[2]),(0,r.useEffect)(d,m),e[3]!==t||e[4]!==n?(p=()=>{t&&u(n-(Date.now()-t)+i)},h=[t,n],e[3]=t,e[4]=n,e[5]=p,e[6]=h):(p=e[5],h=e[6]),(0,r.useEffect)(p,h),e[7]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const e=setInterval(()=>{u(Math.max(0,l.current-i))},i);return()=>clearInterval(e)},g=[],e[7]=f,e[8]=g):(f=e[7],g=e[8]),(0,r.useEffect)(f,g),Math.floor(c/1e3)}}}},{package:"$root$",file:"ui/hooks/bridge/useCountdownTimer.ts"}],[7219,{"../../ducks/bridge/selectors":7127,"../../selectors/multichain":8216,"../useMultichainSelector":7311,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsTxSubmittable=void 0;var s=e("react-redux"),r=e("../../ducks/bridge/selectors"),o=e("../../selectors/multichain"),a=e("../useMultichainSelector");n.useIsTxSubmittable=()=>{const e=(0,s.useSelector)(r.getFromToken),t=(0,s.useSelector)(r.getToToken),n=(0,a.useMultichainSelector)(o.getMultichainCurrentChainId),i=(0,s.useSelector)(r.getFromAmount),{activeQuote:c}=(0,s.useSelector)(r.getBridgeQuotes),{isInsufficientBalance:u,isInsufficientGasBalance:l,isInsufficientGasForQuote:d,isTxAlertPresent:m,isTxAlertLoading:p}=(0,s.useSelector)(r.getValidationErrors);return Boolean(e&&t&&n&&i&&c&&!u&&!l&&!d&&!(p||m))}}}},{package:"$root$",file:"ui/hooks/bridge/useIsTxSubmittable.ts"}],[7220,{"../../ducks/bridge/actions":7125,"../../ducks/bridge/selectors":7127,"./useIsTxSubmittable":7219,"@metamask/bridge-controller":1408,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useQuoteFetchEvents=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../ducks/bridge/selectors"),c=e("../../ducks/bridge/actions"),u=e("./useIsTxSubmittable");n.useQuoteFetchEvents=()=>{const e=(0,s.c)(11),t=(0,o.useDispatch)(),{isLoading:n,quotesRefreshCount:l,quoteFetchError:d,activeQuote:m,recommendedQuote:p}=(0,o.useSelector)(i.getBridgeQuotes),h=(0,u.useIsTxSubmittable)(),f=(0,o.useSelector)(i.getWarningLabels);let g,y;e[0]!==m||e[1]!==t||e[2]!==n||e[3]!==h||e[4]!==d||e[5]!==l||e[6]!==p||e[7]!==f?(g=()=>{!n&&l>0&&!d&&t((0,c.trackUnifiedSwapBridgeEvent)(a.UnifiedSwapBridgeEventName.QuotesReceived,(0,a.getQuotesReceivedProperties)(m,f,h,p)))},e[0]=m,e[1]=t,e[2]=n,e[3]=h,e[4]=d,e[5]=l,e[6]=p,e[7]=f,e[8]=g):g=e[8],e[9]!==l?(y=[l],e[9]=l,e[10]=y):y=e[10],(0,r.useEffect)(g,y)}}}},{package:"$root$",file:"ui/hooks/bridge/useQuoteFetchEvents.ts"}],[7221,{"../../../shared/modules/hexstring-utils":6023,"../../ducks/bridge/selectors":7127,"../../ducks/rewards/selectors":7142,"../../selectors/multichain":8216,"../../selectors/multichain-accounts/account-tree":8211,"../../store/actions":8241,"../useMultichainSelector":7311,"../usePrevious":7322,"@metamask/bridge-controller":1408,"@metamask/utils":3207,"bignumber.js":4064,lodash:4940,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRewardsWithQuote=n.useRewards=n.getUsdPricePerToken=void 0;var s,r=e("react"),o=e("react-redux"),a=e("bignumber.js"),i=e("@metamask/bridge-controller"),c=e("@metamask/utils"),u=(s=e("loglevel"))&&s.__esModule?s:{default:s},l=e("lodash"),d=e("../../ducks/bridge/selectors"),m=e("../../selectors/multichain"),p=e("../usePrevious"),h=e("../useMultichainSelector"),f=e("../../store/actions"),g=e("../../../shared/modules/hexstring-utils"),y=e("../../selectors/multichain-accounts/account-tree"),S=e("../../ducks/rewards/selectors");const k=(e,t,n)=>{try{const s=new a.BigNumber(e),r=new a.BigNumber(t).div(new a.BigNumber(10).pow(n));return s.isZero()||r.isZero()?undefined:s.dividedBy(r).toString()}catch(e){return console.error(e,"useRewards: Error calculating USD price per token"),undefined}};n.getUsdPricePerToken=k;const v=({quote:e,fromAddress:t,fromAddressAccount:n,chainId:s})=>{const a=(0,o.useDispatch)(),[d,m]=(0,r.useState)(!1),[h,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[T,w]=(0,r.useState)(!1),C=(0,p.usePrevious)(null==e?void 0:e.requestId),[A,I]=(0,r.useState)(null),E=(0,o.useSelector)(S.selectRewardsEnabled),M=(0,o.useSelector)(S.selectRewardsAccountLinkedTimestamp),_=(0,r.useRef)(new Map),[P,N]=(0,r.useState)(null),R=(0,r.useCallback)((0,l.debounce)(async(e,t)=>{if(!e||!t)return y(null),b(!1),m(!1),void w(!1);try{var n;const s=e.srcTokenAmount,r=e.destTokenAmount,o={id:e.srcAsset.assetId,amount:s},i={id:e.destAsset.assetId,amount:r},c={id:e.feeData.metabridge.asset.assetId,amount:e.feeData.metabridge.amount||"0"},u=k((null===(n=e.priceData)||void 0===n?void 0:n.totalFeeAmountUsd)||"0",c.amount,e.feeData.metabridge.asset.decimals),l={activityType:"SWAP",account:t,activityContext:{swapContext:{srcAsset:o,destAsset:i,feeAsset:{...c,...u?{usdPrice:u}:{}}}}},d=await a((0,f.estimateRewardsPoints)(l));y(d.pointsEstimate)}catch(e){u.default.error("[useRewardsWithQuote] Error estimating points:",e),y(null),w(!0)}finally{m(!1)}},750),[a]),x=(0,r.useCallback)(async e=>{if(!(e&&t&&s&&E))return y(null),b(!1),I(null),m(!1),void w(!1);m(!0),w(!1);let r=null;try{if(!await a((0,f.getRewardsCandidateSubscriptionId)()))return y(null),b(!1),I(null),w(!1),void m(!1);if(r=((e,t)=>{try{const n=(0,i.formatChainIdToCaip)(t),{namespace:s,reference:r}=(0,c.parseCaipChainId)(n),o=(0,c.isValidHexAddress)(e)?(0,g.toChecksumHexAddress)(e):e;return(0,c.toCaipAccountId)(s,r,o)}catch(e){return u.default.error("[useRewards] Error formatting account to CAIP-10:",e),null}})(t,s),!r)return y(null),w(!1),b(!1),I(null),void m(!1);const o=await a((0,f.getRewardsHasAccountOptedIn)(r));I(o);let l=o;if(!o&&n){l=await a((0,f.rewardsIsOptInSupported)({account:n}))}if(b(l),y(null),w(!1),!l||!o)return void m(!1);await R(e,r)}catch{m(!1),b(!1),y(null),I(null),w(!1)}},[t,s,E,a,n,R]);return(0,r.useEffect)(()=>{C!==(null==e?void 0:e.requestId)&&x(e)},[x,null==e?void 0:e.requestId,e,C]),(0,r.useEffect)(()=>{if(t&&null!==M)_.current.set(t,M),N(M);else if(t){const e=_.current.get(t);N(e??null)}else N(null)},[M,t]),(0,r.useEffect)(()=>{null!==P&&!1===A&&x(e)},[P,A,x,e]),{shouldShowRewardsRow:v,isLoading:d,estimatedPoints:h,hasError:T,accountOptedIn:A,rewardsAccountScope:e&&v?n:null}};n.useRewardsWithQuote=v;n.useRewards=({activeQuote:e})=>{const t=(0,o.useSelector)(d.getFromToken),n=(0,o.useSelector)(d.getToToken),s=(0,o.useSelector)(d.getQuoteRequest),r=(0,h.useMultichainSelector)(m.getMultichainCurrentChainId),a=r?(0,i.formatChainIdToCaip)(r.toString()):null,c=(0,o.useSelector)(e=>a?(0,y.getInternalAccountBySelectedAccountGroupAndCaip)(e,a):null),u=t&&n&&(null==s?void 0:s.srcTokenAmount)&&(null==c?void 0:c.address);return v({quote:u?e:null,fromAddress:null==c?void 0:c.address,fromAddressAccount:c,chainId:null==r?void 0:r.toString()})}}}},{package:"$root$",file:"ui/hooks/bridge/useRewards.ts"}],[7222,{"../../ducks/bridge/actions":7125,"../../pages/bridge/utils/slippage-service":7415,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSmartSlippage=function(e){const t=(0,s.c)(17),{fromChain:n,toChain:c,fromToken:u,toToken:l,isSwap:d}=e,m=(0,o.useDispatch)();let p;t[0]!==n||t[1]!==u||t[2]!==d||t[3]!==c||t[4]!==l?(p=()=>{const e={fromChain:n,toChain:c,fromToken:u,toToken:l,isSwap:d},t=(0,a.calculateSlippage)(e);return t},t[0]=n,t[1]=u,t[2]=d,t[3]=c,t[4]=l,t[5]=p):p=t[5];const h=p;let f,g;t[6]!==h||t[7]!==m?(f=()=>{const e=h();m((0,i.setSlippage)(e))},t[6]=h,t[7]=m,t[8]=f):f=t[8];t[9]!==h||t[10]!==m||t[11]!==n||t[12]!==u||t[13]!==d||t[14]!==c||t[15]!==l?(g=[n,c,u,l,d,h,m],t[9]=h,t[10]=m,t[11]=n,t[12]=u,t[13]=d,t[14]=c,t[15]=l,t[16]=g):g=t[16];(0,r.useEffect)(f,g)};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../pages/bridge/utils/slippage-service"),i=e("../../ducks/bridge/actions")}}},{package:"$root$",file:"ui/hooks/bridge/useSmartSlippage.ts"}],[7223,{"../../../shared/modules/bridge-utils/security-alerts-api.util":6011,"../../ducks/bridge/selectors":7127,"../useAsync":7281,"@metamask/bridge-controller":1408,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenAlerts=n.default=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/bridge-controller"),a=e("../../ducks/bridge/selectors"),i=e("../../../shared/modules/bridge-utils/security-alerts-api.util"),c=e("../useAsync");const u=()=>{const e=(0,s.c)(10),t=(0,r.useSelector)(a.getFromToken),n=(0,r.useSelector)(a.getFromChain),u=(0,r.useSelector)(a.getToToken),l=(0,r.useSelector)(a.getToChain);let d;e[0]!==n||e[1]!==t||e[2]!==l||e[3]!==u?(d=async()=>{if(t&&n&&u&&l&&!(0,o.isNativeAddress)(u.address)){const e=(0,i.convertChainIdToBlockAidChainName)(null==l?void 0:l.chainId);if(e)return await(0,i.fetchTokenAlert)(e,(0,o.formatAddressToCaipReference)(u.address))}return null},e[0]=n,e[1]=t,e[2]=l,e[3]=u,e[4]=d):d=e[4];const m=null==u?void 0:u.address,p=null==l?void 0:l.chainId;let h;e[5]!==m||e[6]!==p?(h=[m,p],e[5]=m,e[6]=p,e[7]=h):h=e[7];const{value:f}=(0,c.useAsyncResult)(d,h);let g;return e[8]!==f?(g={tokenAlert:f},e[8]=f,e[9]=g):g=e[9],g};n.useTokenAlerts=u;n.default=u}}},{package:"$root$",file:"ui/hooks/bridge/useTokenAlerts.ts"}],[7224,{"../../../shared/constants/bridge":5878,"../../../shared/constants/multichain/networks":5895,"../../../shared/constants/network":5896,"../../../shared/constants/time":5913,"../../../shared/constants/transaction":5915,"../../../shared/lib/asset-utils":5925,"../../../shared/lib/fetch-with-cache":5972,"../../ducks/bridge/selectors":7127,"../../ducks/bridge/utils":7128,"../../pages/swaps/swaps.util":8184,"../useAsync":7281,"../useMultichainBalances":7310,"@metamask/bridge-controller":1408,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokensWithFiltering=void 0;var s,r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../../shared/constants/transaction"),c=e("../../../shared/constants/network"),u=e("../useMultichainBalances"),l=e("../useAsync"),d=e("../../pages/swaps/swaps.util"),m=e("../../../shared/constants/time"),p=e("../../ducks/bridge/selectors"),h=(s=e("../../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},f=e("../../../shared/constants/bridge"),g=e("../../../shared/lib/asset-utils"),y=e("../../../shared/constants/multichain/networks"),S=e("../../ducks/bridge/utils");const k=(e,t)=>{if(!e||!t)return undefined;const n={...t,chainId:(0,a.isNonEvmChainId)(e)?(0,a.formatChainIdToCaip)(e):(0,a.formatChainIdToHex)(e),assetId:"assetId"in t?t.assetId:(0,g.toAssetId)(t.address,e)};if((0,a.isNativeAddress)(t.address)){const s=(0,a.isNonEvmChainId)(e)?y.MULTICHAIN_TOKEN_IMAGE_MAP[n.chainId]:c.CHAIN_ID_TOKEN_IMAGE_MAP[n.chainId];return{...n,type:i.AssetType.native,address:"",image:s??(t.iconUrl||("icon"in t?t.icon:"")||""),balance:"0",string:"0"}}return{...n,type:i.AssetType.token,image:t.iconUrl??("icon"in t?t.icon:"")??"",balance:"",string:undefined}};n.useTokensWithFiltering=(e,t,n)=>{const s=(0,o.useSelector)(t=>(0,p.getTopAssetsFromFeatureFlags)(t,e)),{assetsWithBalance:v}=(0,u.useMultichainBalances)(n),b=(0,o.useSelector)(e=>e.metamask.tokensChainsCache),T=(0,r.useMemo)(()=>{var t;if(!e)return undefined;if((0,a.isBitcoinChainId)(e)){const t=(0,a.getNativeAssetForChainId)(e);if(t){const e=t.address??"";return{[e]:t}}return undefined}if((0,a.isSolanaChainId)(e))return undefined;const n=(0,a.formatChainIdToHex)(e);return n?null===(t=b[n])||void 0===t?void 0:t.data:undefined},[e,b]),w=Boolean(T),{value:C,pending:A}=(0,l.useAsyncResult)(async()=>w||!e?{}:await(0,a.fetchBridgeTokens)(e,a.BridgeClientId.EXTENSION,async(e,t)=>{const{headers:n,...s}=t??{};return await(0,h.default)({url:e,...s,fetchOptions:{method:"GET",headers:n},cacheOptions:{cacheRefreshTime:10*m.MINUTE},functionName:"fetchBridgeTokens"})},f.BRIDGE_API_BASE_URL,"13.16.3"),[e,w]),I=(0,r.useMemo)(()=>T??C,[T,C]),{value:E,pending:M}=(0,l.useAsyncResult)(async()=>e?s?s.map(e=>({address:e})):await(0,d.fetchTopAssetsList)(e):[],[e,s]);return{filteredTokenListGenerator:(0,r.useCallback)(n=>function*(){const s=(e,s,r)=>{var o;const i=e=>e&&(0,a.isNativeAddress)(e)?"":e;return n(e,s,r)&&(!t||!r||!(t.symbol===e&&((0,a.isSolanaChainId)(r)?i(t.address)===i(s):(null===(o=t.address)||void 0===o?void 0:o.toLowerCase())===(null==s?void 0:s.toLowerCase()))&&t.chainId===(0,a.formatChainIdToCaip)(r)))};if(e&&E&&I&&0!==Object.keys(I).length){for(const e of v){var r,o,u;if(!(0,S.isTronEnergyOrBandwidthResource)(e.chainId,e.symbol))if(s(e.symbol,e.address,e.chainId))if((0,a.isNativeAddress)(e.address)||e.isNative)yield{symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:"",type:i.AssetType.native,balance:e.balance??"0",string:e.string??undefined,image:c.CHAIN_ID_TOKEN_IMAGE_MAP[e.chainId]??y.MULTICHAIN_TOKEN_IMAGE_MAP[e.chainId]??((null===(r=(0,a.getNativeAssetForChainId)(e.chainId))||void 0===r?void 0:r.icon)||(null===(o=(0,a.getNativeAssetForChainId)(e.chainId))||void 0===o?void 0:o.iconUrl)||(0,g.getAssetImageUrl)(e.address,(0,a.formatChainIdToCaip)(e.chainId))),accountType:e.accountType};else yield{...e,symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:e.address,type:i.AssetType.token,balance:e.balance??"0",string:e.string??undefined,image:(e.image||e.address&&(null==I||null===(u=I[e.address.toLowerCase()])||void 0===u?void 0:u.iconUrl))??(0,g.getAssetImageUrl)(e.address,(0,a.formatChainIdToCaip)(e.chainId))??""}}for(const t of E){const n=(null==I?void 0:I[t.address])??(null==I?void 0:I[t.address.toLowerCase()]),r=k(e,n);r&&!(0,S.isTronEnergyOrBandwidthResource)(e,r.symbol)&&s(r.symbol,r.address??undefined,e)&&(yield r)}for(const t of Object.values(I)){const n=k(e,t);n&&-1===n.symbol.indexOf("$")&&!(0,S.isTronEnergyOrBandwidthResource)(e,n.symbol)&&s(n.symbol,n.address??undefined,e)&&(yield n)}}}(),[v,E,e,I,t]),isLoading:A||M}}}}},{package:"$root$",file:"ui/hooks/bridge/useTokensWithFiltering.ts"}],[7225,{"../../../shared/constants/multichain/networks":5895,"../../ducks/bridge/actions":7125,"../../ducks/bridge/selectors":7127,"@metamask/bridge-controller":1408,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTxAlerts=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../../shared/constants/multichain/networks"),c=e("../../ducks/bridge/selectors"),u=e("../../ducks/bridge/actions");n.useTxAlerts=()=>{const e=(0,s.c)(14),t=(0,o.useDispatch)(),n=(0,o.useSelector)(c.getFromChain),{activeQuote:l}=(0,o.useSelector)(c.getBridgeQuotes);let d;e[0]!==l?(d=l??{},e[0]=l,e[1]=d):d=e[1];const{trade:m}=d,p=(0,o.useSelector)(c.getFromAccount);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=new AbortController,e[2]=h):h=e[2];const f=(0,r.useRef)(h);let g,y,S;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{var e;null===(e=f.current)||void 0===e||e.abort(),f.current=null},y=[],e[3]=g,e[4]=y):(g=e[3],y=e[4]),(0,r.useEffect)(g,y),e[5]!==p||e[6]!==t||e[7]!==n||e[8]!==m?(S=()=>{var e;null===(e=f.current)||void 0===e||e.abort(),m&&"string"==typeof m&&null!=n&&n.chainId&&(0,a.isSolanaChainId)(n.chainId)&&null!=p&&p.address?(f.current=new AbortController,t((0,u.setTxAlerts)({signal:f.current.signal,chainId:i.MultichainNetworks.SOLANA,trade:m,accountAddress:p.address}))):t((0,u.setTxAlerts)(null))},e[5]=p,e[6]=t,e[7]=n,e[8]=m,e[9]=S):S=e[9];const k=null==n?void 0:n.chainId,v=null==p?void 0:p.address;let b;e[10]!==k||e[11]!==v||e[12]!==m?(b=[m,k,v],e[10]=k,e[11]=v,e[12]=m,e[13]=b):b=e[13],(0,r.useEffect)(S,b)}}}},{package:"$root$",file:"ui/hooks/bridge/useTxAlerts.ts"}],[7226,{"../../store/actions":8241,"../../store/background-connection":8242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.deFiStartPolling=async function(){const e=await(0,r.submitRequestToBackground)("deFiStartPolling",[null]);return await(0,s.addPollingTokenToAppState)(e),e},n.deFiStopPolling=async function(e){await(0,r.submitRequestToBackground)("deFiStopPolling",[e]),await(0,s.removePollingTokenFromAppState)(e)};var s=e("../../store/actions"),r=e("../../store/background-connection")}}},{package:"$root$",file:"ui/hooks/defi/defiPollingActions.ts"}],[7227,{"../../ducks/metamask/metamask":7137,"../useMultiPolling":7307,"./defiPollingActions":7226,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../../ducks/metamask/metamask"),i=(s=e("../useMultiPolling"))&&s.__esModule?s:{default:s},c=e("./defiPollingActions");n.default=()=>{const e=(0,r.c)(3),t=(0,o.useSelector)(a.getCompletedOnboarding),n=(0,o.useSelector)(a.getIsUnlocked),s=t&&n;let u,l;return e[0]!==s?(u={startPolling:c.deFiStartPolling,stopPollingByPollingToken:c.deFiStopPolling,input:s?[null]:[]},e[0]=s,e[1]=u):u=e[1],(0,i.default)(u),e[2]===Symbol.for("react.memo_cache_sentinel")?(l={},e[2]=l):l=e[2],l}}}},{package:"$root$",file:"ui/hooks/defi/useDeFiPolling.ts"}],[7228,{"../../pages/confirmations/hooks/useConfirmationNavigation":7831,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionRedirect=function(e){const t=(0,s.c)(16);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{onRedirect:a}=n,[i,c]=(0,r.useState)(),{confirmations:u,navigateToId:l}=(0,o.useConfirmationNavigation)();let d;if(t[2]!==u||t[3]!==i){let e;t[5]!==i?(e=e=>e.id===i,t[5]=i,t[6]=e):e=t[6],d=u.some(e),t[2]=u,t[3]=i,t[4]=d}else d=t[4];const m=d;let p,h,f;t[7]!==m||t[8]!==l||t[9]!==a||t[10]!==i?(p=()=>{m&&(l(i),null==a||a())},h=[m,l,i,a],t[7]=m,t[8]=l,t[9]=a,t[10]=i,t[11]=p,t[12]=h):(p=t[11],h=t[12]);(0,r.useEffect)(p,h),t[13]!==m||t[14]!==i?(f={transactionId:i,setTransactionId:c,isRedirectPending:m},t[13]=m,t[14]=i,t[15]=f):f=t[15];return f};var s=e("react-compiler-runtime"),r=e("react"),o=e("../../pages/confirmations/hooks/useConfirmationNavigation")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionRedirect.ts"}],[7229,{"../../../shared/lib/gator-permissions/gator-permissions-utils":5974,"../../../shared/modules/selectors/networks":6034,"../../selectors/selectors":8227,"../../store/actions":8241,"../useAsync":7281,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionTokenInfo=function(e,t,n){const l=(0,s.c)(30),d=(0,r.useSelector)(o.selectERC20TokensByChain),m=(0,r.useSelector)(o.getAllTokens),p=(0,r.useSelector)(o.getUseExternalServices),h=(0,r.useSelector)(a.getAllNetworkConfigurationsByCaipChainId);let f;l[0]!==n?(f=(null==n?void 0:n.includes("native-token"))??!1,l[0]=n,l[1]=f):f=l[1];const g=f;let y;e:{if(!g||!t){y=null;break e}let e;l[2]!==t||l[3]!==h?(e=(0,c.resolveNativeTokenInfo)(t,h),l[2]=t,l[3]=h,l[4]=e):e=l[4],y=e}const S=y;let k;e:{if(g||!e||!t){k=null;break e}let n;l[5]!==m||l[6]!==t||l[7]!==d||l[8]!==e?(n=(0,c.lookupCachedOrImportedTokenInfo)(e,t,d,m),l[5]=m,l[6]=t,l[7]=d,l[8]=e,l[9]=n):n=l[9],k=n}const v=k,b=Boolean(!g&&!v&&e&&t);let T,w;l[10]!==p||l[11]!==t||l[12]!==b||l[13]!==e?(T=async()=>b&&e&&t?await(0,c.getGatorErc20TokenInfo)(e,t,Boolean(p),i.getTokenStandardAndDetailsByChain):null,w=[b,e,t,p],l[10]=p,l[11]=t,l[12]=b,l[13]=e,l[14]=T,l[15]=w):(T=l[14],w=l[15]);const C=(0,u.useAsyncResult)(T,w),A="success"===C.status?C.value:null,I="error"===C.status?C.error:null,E=b&&C.pending;let M;e:{if(S){let e;l[16]!==S?(e={tokenInfo:S,loading:!1},l[16]=S,l[17]=e):e=l[17],M=e;break e}if(v){let e;l[18]!==v?(e={tokenInfo:v,loading:!1},l[18]=v,l[19]=e):e=l[19],M=e;break e}if(A){let e;l[20]!==A?(e={tokenInfo:A,loading:!1},l[20]=A,l[21]=e):e=l[21],M=e;break e}const e=t||"0x0";let n,s;l[22]!==e?(n={symbol:"Unknown Token",decimals:18,chainId:e},l[22]=e,l[23]=n):n=l[23],l[24]!==E||l[25]!==n?(s={tokenInfo:n,loading:E},l[24]=E,l[25]=n,l[26]=s):s=l[26],M=s}const _=M;let P;l[27]!==I||l[28]!==_?(P={..._,error:I},l[27]=I,l[28]=_,l[29]=P):P=l[29];return P};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/selectors"),a=e("../../../shared/modules/selectors/networks"),i=e("../../store/actions"),c=e("../../../shared/lib/gator-permissions/gator-permissions-utils"),u=e("../useAsync")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionTokenInfo.ts"}],[7230,{"../../selectors/gator-permissions/gator-permissions":8204,"../../store/controller-actions/gator-permissions-controller":8243,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissions=function(e={}){const{refreshInBackground:t=!0}=e,n=(0,r.useDispatch)(),i=(0,r.useSelector)(e=>{try{return(0,a.getGatorPermissionsMap)(e)}catch(e){return undefined}}),[c,u]=(0,s.useState)(!i),[l,d]=(0,s.useState)(!1),[m,p]=(0,s.useState)(undefined),h=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=!1;return i&&!t?u(!1):h.current||(async()=>{try{p(undefined),i?d(!0):u(!0),await(0,o.fetchAndUpdateGatorPermissions)({isRevoked:!1})}catch(t){e||p(t)}finally{e||(u(!1),d(!1))}})().then(()=>{h.current=!0}).catch(()=>{}),()=>{e=!0}},[n,t]),{data:i,error:m,loading:c,isRefreshing:l}};var s=e("react"),r=e("react-redux"),o=e("../../store/controller-actions/gator-permissions-controller"),a=e("../../selectors/gator-permissions/gator-permissions")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissions.ts"}],[7231,{"../../../shared/lib/delegation/delegation":5963,"../../selectors":8207,"../../store/actions":8241,"../../store/controller-actions/gator-permissions-controller":8243,"./useGatorPermissionRedirect":7228,"./utils":7233,"@metamask/transaction-controller":3085,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissions=function({chainId:e,onRedirect:t}){const{setTransactionId:n}=(0,l.useGatorPermissionRedirect)({onRedirect:t}),m=(0,r.useStore)(),p=(0,s.useCallback)(e=>{if(Array.isArray(e)){if(0===e.length)throw new Error("No gator permissions provided");for(const t of e)p(t)}else if(!e)throw new Error("No gator permission provided")},[]),h=(0,s.useCallback)(t=>{if(t.permissionResponse.chainId!==e)throw new Error("Chain ID does not match")},[e]),f=(0,s.useCallback)(e=>{const{permissionResponse:t}=e,n=(0,a.getInternalAccountByAddress)(m.getState(),t.from);if(!n)throw new Error("Internal account not found for delegator of permission");return{permissionContext:t.context,delegationManagerAddress:t.delegationManager,accountAddress:n.address}},[m]),g=(0,s.useCallback)(async e=>{const t=e.permissionResponse.chainId;let n;try{n=await(0,i.findNetworkClientIdByChainId)(t)}catch(e){throw new Error(`Failed to find network client for chain ${t}`,{cause:e})}const{permissionContext:s,delegationManagerAddress:r,accountAddress:a}=f(e),l=(0,d.extractDelegationFromGatorPermissionContext)(s),m=(0,c.getDelegationHashOffchain)(l);if(await(0,u.checkDelegationDisabled)(r,m,n))return await(0,u.submitDirectRevocation)({permissionContext:s}),null;const p=(0,c.encodeDisableDelegation)({delegation:l}),h=await(0,i.addTransaction)({from:a,to:r,data:p,value:"0x0"},{networkClientId:n,type:o.TransactionType.contractInteraction});if(!h)throw new Error("No transaction meta found");if(!h.id)throw new Error("No transaction id found");return await(0,u.addPendingRevocation)({txId:h.id,permissionContext:s}),h},[f]),y=(0,s.useCallback)(async e=>{p(e),h(e);const t=await g(e);return n(null==t?void 0:t.id),t},[g,h,p,n]),S=(0,s.useCallback)(async e=>{var t;p(e);for(const t of e)h(t);const s=[];for(const t of e){const e=await g(t);s.push(e)}const r=s.filter(e=>null!==e);return n(null===(t=r[0])||void 0===t?void 0:t.id),r},[g,h,p,n]);return{revokeGatorPermission:y,revokeGatorPermissionBatch:S}};var s=e("react"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../selectors"),i=e("../../store/actions"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./useGatorPermissionRedirect"),d=e("./utils")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissions.ts"}],[7232,{"../../../shared/lib/delegation/delegation":5963,"../../selectors":8207,"../../store/actions":8241,"../../store/controller-actions/gator-permissions-controller":8243,"./useGatorPermissionRedirect":7228,"./utils":7233,"@metamask/transaction-controller":3085,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissionsMultiChain=function({onRedirect:e}={}){const{setTransactionId:t}=(0,d.useGatorPermissionRedirect)({onRedirect:e}),n=(0,r.useStore)();return{revokeGatorPermissionsBatchMultiChain:(0,s.useCallback)(async e=>{const s={},r=[];for(const[t,d]of Object.entries(e)){if(s[t]={revoked:[],skipped:[],errors:[]},0===d.length)continue;let e;try{e=await(0,a.findNetworkClientIdByChainId)(t)}catch(e){const n=e instanceof Error?e.message:String(e);s[t].errors.push(new Error(`No network client ID found for chain ${t}: ${n}`));continue}for(const m of d)try{const{permissionResponse:d}=m,p=(0,i.getInternalAccountByAddress)(n.getState(),d.from);if(!p){s[t].skipped.push(m);continue}const h=(0,l.extractDelegationFromGatorPermissionContext)(d.context),f=(0,c.getDelegationHashOffchain)(h);if(await(0,u.checkDelegationDisabled)(d.delegationManager,f,e)){await(0,u.submitDirectRevocation)({permissionContext:d.context}),s[t].skipped.push(m);continue}const g=(0,c.encodeDisableDelegation)({delegation:h}),y=await(0,a.addTransaction)({from:p.address,to:d.delegationManager,data:g,value:"0x0"},{networkClientId:e,type:o.TransactionType.contractInteraction});if(!y)throw new Error("No transaction meta found");if(!y.id)throw new Error("No transaction id found");s[t].revoked.push(y),r.push(y.id),await(0,u.addPendingRevocation)({txId:y.id,permissionContext:d.context})}catch(e){s[t].errors.push(e)}}return r.length>0&&t(r[0]),s},[n,t])}};var s=e("react"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../store/actions"),i=e("../../selectors"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./utils"),d=e("./useGatorPermissionRedirect")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissionsMultiChain.ts"}],[7233,{"@metamask/delegation-core":1501},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractDelegationFromGatorPermissionContext=function(e){const t=(0,s.decodeDelegations)(e),n=t[0];if(!n)throw new Error("No delegation found");if(1!==t.length)throw new Error("Multiple delegations found");return{...n,salt:`0x${n.salt.toString(16)}`}};var s=e("@metamask/delegation-core")}}},{package:"$root$",file:"ui/hooks/gator-permissions/utils.ts"}],[7234,{"./useAccountSyncing":7235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAccountSyncing",{enumerable:!0,get:function(){return s.useAccountSyncing}}),Object.defineProperty(n,"useDeleteAccountSyncingDataFromUserStorage",{enumerable:!0,get:function(){return s.useDeleteAccountSyncingDataFromUserStorage}}),Object.defineProperty(n,"useShouldDispatchAccountSyncing",{enumerable:!0,get:function(){return s.useShouldDispatchAccountSyncing}});var s=e("./useAccountSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/index.ts"}],[7235,{"../../../ducks/metamask/metamask":7137,"../../../selectors":8207,"../../../selectors/identity/authentication":8205,"../../../selectors/identity/backup-and-sync":8206,"../../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchAccountSyncing=n.useDeleteAccountSyncingDataFromUserStorage=n.useAccountSyncing=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=(e("react"),e("react-redux")),i=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const m=()=>{const e=(0,a.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,a.useSelector)(c.selectIsAccountSyncingEnabled),n=(0,a.useSelector)(u.getUseExternalServices),s=(0,a.useSelector)(l.getIsUnlocked),r=(0,a.useSelector)(d.selectIsSignedIn),o=(0,a.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&s&&r&&o)};n.useShouldDispatchAccountSyncing=m;n.useAccountSyncing=()=>{const e=(0,r.c)(6),t=(0,a.useDispatch)(),n=m();let s;e[0]!==t||e[1]!==n?(s=()=>{try{if(!n)return;t((0,i.syncAccountTreeWithUserStorage)())}catch(e){const t=e;o.default.error(t)}},e[0]=t,e[1]=n,e[2]=s):s=e[2];const c=s;let u;return e[3]!==c||e[4]!==n?(u={dispatchAccountSyncing:c,shouldDispatchAccountSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u};n.useDeleteAccountSyncingDataFromUserStorage=()=>{const e=(0,r.c)(4),t=(0,a.useDispatch)();let n;e[0]!==t?(n=async()=>{try{await t((0,i.deleteAccountSyncingDataFromUserStorage)())}catch{}},e[0]=t,e[1]=n):n=e[1];const s=n;let o;return e[2]!==s?(o={dispatchDeleteAccountSyncingData:s},e[2]=s,e[3]=o):o=e[3],o}}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/useAccountSyncing.ts"}],[7236,{"./useAutoSignIn":7237,"./useAutoSignOut":7238,"./useSignIn":7239,"./useSignOut":7240},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAutoSignIn",{enumerable:!0,get:function(){return o.useAutoSignIn}}),Object.defineProperty(n,"useAutoSignOut",{enumerable:!0,get:function(){return a.useAutoSignOut}}),Object.defineProperty(n,"useSignIn",{enumerable:!0,get:function(){return s.useSignIn}}),Object.defineProperty(n,"useSignOut",{enumerable:!0,get:function(){return r.useSignOut}});var s=e("./useSignIn"),r=e("./useSignOut"),o=e("./useAutoSignIn"),a=e("./useAutoSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/index.ts"}],[7237,{"../../../ducks/metamask/metamask":7137,"../../../selectors":8207,"../../../selectors/identity/authentication":8205,"./useSignIn":7239,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignIn=function(){const e=(0,s.c)(10),[t,n]=(0,r.useState)(!1),{signIn:l}=(0,u.useSignIn)(),d=Boolean((0,o.useSelector)(a.getIsUnlocked)),m=Boolean((0,o.useSelector)(i.getUseExternalServices)),p=Boolean((0,o.useSelector)(a.getCompletedOnboarding)),h=(0,o.useSelector)(c.selectIsSignedIn),f=(0,o.useSelector)(i.getMetaMaskKeyrings),g=(0,r.useRef)(f.length);let y,S;e[0]!==f.length?(y=()=>{f.length!==g.current&&(g.current=f.length,n(!0))},S=[f.length],e[0]=f.length,e[1]=y,e[2]=S):(y=e[1],S=e[2]);(0,r.useEffect)(y,S);const k=(!h||t)&&d&&m&&p;let v;e[3]!==t||e[4]!==k||e[5]!==l?(v=async()=>{k&&(t&&(await l(!0),n(!1)),await l())},e[3]=t,e[4]=k,e[5]=l,e[6]=v):v=e[6];const b=v;let T;e[7]!==b||e[8]!==k?(T={autoSignIn:b,shouldAutoSignIn:k},e[7]=b,e[8]=k,e[9]=T):T=e[9];return T};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../../ducks/metamask/metamask"),i=e("../../../selectors"),c=e("../../../selectors/identity/authentication"),u=e("./useSignIn")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignIn.ts"}],[7238,{"../../../ducks/metamask/metamask":7137,"../../../selectors":8207,"../../../selectors/identity/authentication":8205,"./useSignOut":7240,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignOut=function(){const e=(0,s.c)(6),{signOut:t}=(0,c.useSignOut)(),n=Boolean((0,r.useSelector)(o.getIsUnlocked)),u=Boolean((0,r.useSelector)(a.getUseExternalServices)),l=(0,r.useSelector)(i.selectIsSignedIn),d=l&&n&&!u;let m;e[0]!==d||e[1]!==t?(m=async()=>{d&&await t()},e[0]=d,e[1]=t,e[2]=m):m=e[2];const p=m;let h;e[3]!==p||e[4]!==d?(h={autoSignOut:p,shouldAutoSignOut:d},e[3]=p,e[4]=d,e[5]=h):h=e[5];return h};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../../ducks/metamask/metamask"),a=e("../../../selectors"),i=e("../../../selectors/identity/authentication"),c=e("./useSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignOut.ts"}],[7239,{"../../../selectors/identity/authentication":8205,"../../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignIn=function(){const e=(0,r.c)(5),t=(0,o.useDispatch)(),n=!(0,o.useSelector)(i.selectIsSignedIn);let s;e[0]!==n||e[1]!==t?(s=async e=>{if(e??n)try{await t((0,c.performSignIn)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");a.default.error(n)}},e[0]=n,e[1]=t,e[2]=s):s=e[2];const u=s;let l;e[3]!==u?(l={signIn:u},e[3]=u,e[4]=l):l=e[4];return l};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignIn.ts"}],[7240,{"../../../selectors/identity/authentication":8205,"../../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignOut=function(){const e=(0,r.c)(5),t=(0,o.useDispatch)(),n=(0,o.useSelector)(i.selectIsSignedIn),s=Boolean(n);let u;e[0]!==t||e[1]!==s?(u=async()=>{if(s)try{await t((0,c.performSignOut)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");a.default.error(n)}},e[0]=t,e[1]=s,e[2]=u):u=e[2];const l=u;let d;e[3]!==l?(d={signOut:l},e[3]=l,e[4]=d):d=e[4];return d};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignOut.ts"}],[7241,{"./useBackupAndSync":7242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useBackupAndSync",{enumerable:!0,get:function(){return s.useBackupAndSync}});var s=e("./useBackupAndSync")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/index.ts"}],[7242,{"../../../store/actions":8241,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBackupAndSync=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(null),s=(0,r.useCallback)(async(t,s)=>{n(null);try{await e((0,i.setIsBackupAndSyncFeatureEnabled)(t,s))}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");a.default.error(t),n(t)}finally{e((0,i.hideLoadingIndication)())}},[e]);return{error:t,setIsBackupAndSyncFeatureEnabled:s}};var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/useBackupAndSync.ts"}],[7243,{"./useContactSyncing":7244},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useContactSyncing",{enumerable:!0,get:function(){return s.useContactSyncing}}),Object.defineProperty(n,"useShouldDispatchContactSyncing",{enumerable:!0,get:function(){return s.useShouldDispatchContactSyncing}});var s=e("./useContactSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/index.ts"}],[7244,{"../../../ducks/metamask/metamask":7137,"../../../selectors":8207,"../../../selectors/identity/authentication":8205,"../../../selectors/identity/backup-and-sync":8206,"../../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchContactSyncing=n.useContactSyncing=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=(e("react"),e("react-redux")),i=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const m=()=>{const e=(0,a.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,a.useSelector)(c.selectIsContactSyncingEnabled),n=(0,a.useSelector)(u.getUseExternalServices),s=(0,a.useSelector)(l.getIsUnlocked),r=(0,a.useSelector)(d.selectIsSignedIn),o=(0,a.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&s&&r&&o)};n.useShouldDispatchContactSyncing=m;n.useContactSyncing=()=>{const e=(0,r.c)(6),t=(0,a.useDispatch)(),n=m();let s;e[0]!==t||e[1]!==n?(s=()=>{try{if(!n)return;t((0,i.syncContactsWithUserStorage)())}catch(e){const t=e;o.default.error(t)}},e[0]=t,e[1]=n,e[2]=s):s=e[2];const c=s;let u;return e[3]!==c||e[4]!==n?(u={dispatchContactSyncing:c,shouldDispatchContactSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u}}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/useContactSyncing.ts"}],[7245,{"../../selectors/metamask-notifications/metamask-notifications":8208,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useReadNotificationsCounter=function(){const e=(0,s.c)(2),{readSnapNotificationsCount:t}=a(),{featureAnnouncementsReadCount:n}=i(),{onChainMetamaskNotificationsReadCount:r}=c(),o=t+n+r;let u;e[0]!==o?(u={notificationsReadCount:o},e[0]=o,e[1]=u):u=e[1];return u},n.useUnreadNotificationsCounter=function(){const e=(0,s.c)(2),{unreadSnapNotificationsCount:t}=a(),{featureAnnouncementsUnreadCount:n}=i(),{onChainMetamaskNotificationsUnreadCount:r}=c(),o=t+n+r;let u;e[0]!==o?(u={notificationsUnreadCount:o},e[0]=o,e[1]=u):u=e[1];return u};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../../selectors/metamask-notifications/metamask-notifications");const a=()=>{const e=(0,s.c)(3),t=(0,r.useSelector)(o.getSnapNotificationsUnreadCount),n=(0,r.useSelector)(o.getSnapNotificationsReadCount);let a;return e[0]!==n||e[1]!==t?(a={unreadSnapNotificationsCount:t,readSnapNotificationsCount:n},e[0]=n,e[1]=t,e[2]=a):a=e[2],a},i=()=>{const e=(0,s.c)(4),t=(0,r.useSelector)(o.selectIsFeatureAnnouncementsEnabled),n=(0,r.useSelector)(o.getFeatureAnnouncementsUnreadCount),a=(0,r.useSelector)(o.getFeatureAnnouncementsReadCount);let i;return e[0]!==a||e[1]!==n||e[2]!==t?(i=t?{featureAnnouncementsUnreadCount:n,featureAnnouncementsReadCount:a}:{featureAnnouncementsUnreadCount:0,featureAnnouncementsReadCount:0},e[0]=a,e[1]=n,e[2]=t,e[3]=i):i=e[3],i},c=()=>{const e=(0,s.c)(4),t=(0,r.useSelector)(o.selectIsMetamaskNotificationsEnabled),n=(0,r.useSelector)(o.getOnChainMetamaskNotificationsUnreadCount),a=(0,r.useSelector)(o.getOnChainMetamaskNotificationsReadCount);let i;return e[0]!==t||e[1]!==a||e[2]!==n?(i=t?{onChainMetamaskNotificationsUnreadCount:n,onChainMetamaskNotificationsReadCount:a}:{onChainMetamaskNotificationsUnreadCount:0,onChainMetamaskNotificationsReadCount:0},e[0]=t,e[1]=a,e[2]=n,e[3]=i):i=e[3],i}}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useCounter.tsx"}],[7246,{"../../contexts/metamask-notifications/notification-storage-keys":7109,"../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCreateNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.createOnChainTriggers)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={createNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useDisableNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.disableMetamaskNotifications)()),await(0,u.setUserHasTurnedOffNotificationsOnce)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={disableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useEnableNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.enableMetamaskNotifications)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={enableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useListNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,o.useState)(!1),[s,r]=(0,o.useState)(null),[u,l]=(0,o.useState)(undefined);return{listNotifications:(0,o.useCallback)(async()=>{n(!0),r(null);const t=new URLSearchParams(window.location.search).get("previewToken");try{const n=await e((0,c.fetchAndUpdateMetamaskNotifications)(t??undefined));return l(n),n}catch(e){throw i.default.error(e),r(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1)}},[e]),notificationsData:u,isLoading:t,error:s}},n.useMarkNotificationAsRead=function(){const e=(0,r.c)(4),t=(0,a.useDispatch)();let n;e[0]!==t?(n=async e=>{try{t((0,c.markMetamaskNotificationsAsRead)(e))}catch(e){const t=e;throw i.default.error(t),t}},e[0]=t,e[1]=n):n=e[1];const s=n;let o;e[2]!==s?(o={markNotificationAsRead:s},e[2]=s,e[3]=o):o=e[3];return o};var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("../../store/actions"),u=e("../../contexts/metamask-notifications/notification-storage-keys")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useNotifications.ts"}],[7247,{"../../selectors/metamask-notifications/metamask-notifications":8208,"../../store/actions":8241,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountSettingsProps=function(e){const t=(0,a.useSelector)(u.getIsUpdatingMetamaskNotificationsAccount),n=(0,a.useSelector)(u.selectIsMetamaskNotificationsEnabled),s=function(){const e=(0,a.useDispatch)(),t=(0,o.useCallback)(async t=>{try{return await e((0,c.checkAccountsPresence)(t))}catch{return{}}},[]);return t}(),[r,i]=(0,o.useState)({}),[l,d]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null),h=(0,o.useMemo)(()=>JSON.stringify(e),[e]),f=(0,o.useCallback)(async e=>{try{d(!0),p(null);const t=await s(e);i(t)}catch{p("Failed to get account settings")}finally{d(!1)}},[]);return(0,o.useEffect)(()=>{if(!n)return;const e=JSON.parse(h);f(e)},[h,s,n]),{data:r,initialLoading:l,error:m,accountsBeingUpdated:t,update:f}},n.useSwitchAccountNotificationsChange=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let u;e[0]!==t?(u=async(e,n)=>{s(null);try{n?await t((0,c.enableAccounts)(e)):await t((0,c.disableAccounts)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");i.default.error(n),s(n)}t((0,c.hideLoadingIndication)())},e[0]=t,e[1]=u):u=e[1];const l=u;let d;e[2]!==n||e[3]!==l?(d={onChange:l,error:n},e[2]=n,e[3]=l,e[4]=d):d=e[4];return d},n.useSwitchFeatureAnnouncementsChange=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let i;e[0]!==t?(i=async e=>{s(null);try{await t((0,c.setFeatureAnnouncementsEnabled)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");s(n)}},e[0]=t,e[1]=i):i=e[1];const u=i;let l;e[2]!==n||e[3]!==u?(l={onChange:u,error:n},e[2]=n,e[3]=u,e[4]=l):l=e[4];return l};var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("../../store/actions"),u=e("../../selectors/metamask-notifications/metamask-notifications")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useSwitchNotifications.ts"}],[7248,{"../../../shared/lib/snaps/snaps":5994,"../../selectors":8207,"../../selectors/accounts":8196,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHdKeyringsWithSnapAccounts=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/accounts"),a=e("../../selectors"),i=e("../../../shared/lib/snaps/snaps");function c(e){return e.address}n.useHdKeyringsWithSnapAccounts=()=>{const e=(0,s.c)(5),t=(0,r.useSelector)(a.getMetaMaskHdKeyrings),n=(0,r.useSelector)(o.getInternalAccounts);let u;if(e[0]!==t||e[1]!==n){let s;e[3]!==n?(s=e=>{const t=n.filter(t=>{var n;return t.metadata.snap&&(0,i.isSnapPreinstalled)(t.metadata.snap.id)&&(null===(n=t.options)||void 0===n?void 0:n.entropySource)===e.metadata.id}).map(c);return{...e,accounts:[...e.accounts,...t]}},e[3]=n,e[4]=s):s=e[4],u=t.map(s),e[0]=t,e[1]=n,e[2]=u}else u=e[2];return u}}}},{package:"$root$",file:"ui/hooks/multi-srp/useHdKeyringsWithSnapAccounts.ts"}],[7249,{"../../components/app/assets/util/formatWithThreshold":6135,"../../ducks/locale/locale":7136,"../../ducks/metamask/metamask":7137,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayBalanceCalc=function(){const e=(0,s.c)(3),t=(0,r.useSelector)(a.getCurrentCurrency),n=(0,r.useSelector)(i.getIntlLocale);let c;e[0]!==t||e[1]!==n?(c=(e,s)=>{const r=e===undefined?0:e,a=s===undefined?t:s;return(0,o.formatWithThreshold)(r,.01,n,{style:"currency",currency:a})},e[0]=t,e[1]=n,e[2]=c):c=e[2];return c};var s=e("react-compiler-runtime"),r=e("react-redux"),o=(e("react"),e("../../components/app/assets/util/formatWithThreshold")),a=e("../../ducks/metamask/metamask"),i=e("../../ducks/locale/locale")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useAccountBalance.ts"}],[7250,{"../../selectors/assets":8199,"./useAccountBalance":7249,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSingleWalletAccountsBalanceCallback=function(e){const t=(0,s.c)(5);let n;t[0]!==e?(n=(0,o.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const i=n,c=(0,r.useSelector)(i),u=(0,a.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.groups?(l=e=>{var t;const n=null===(t=c.groups)||void 0===t?void 0:t[e];if(!n)return;return u(null==n?void 0:n.totalBalanceInUserCurrency,null==n?void 0:n.userCurrency)},t[2]=u,t[3]=c.groups,t[4]=l):l=t[4];return l},n.useSingleWalletDisplayBalance=function(e){const t=(0,s.c)(6);let n;t[0]!==e?(n=(0,o.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const i=n,c=(0,r.useSelector)(i),u=(0,a.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.totalBalanceInUserCurrency||t[4]!==c.userCurrency?(l=u(c.totalBalanceInUserCurrency,c.userCurrency),t[2]=u,t[3]=c.totalBalanceInUserCurrency,t[4]=c.userCurrency,t[5]=l):l=t[5];return l};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/assets"),a=e("./useAccountBalance")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletBalance.ts"}],[7251,{"../../ducks/metamask/metamask":7137,"../../selectors/multichain-accounts/account-tree":8211,"../multi-srp/useHdKeyringsWithSnapAccounts":7248,"./utils":7252,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWalletInfo=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../multi-srp/useHdKeyringsWithSnapAccounts"),a=e("../../selectors/multichain-accounts/account-tree"),i=e("../../ducks/metamask/metamask"),c=e("./utils");n.useWalletInfo=e=>{const t=(0,s.c)(12),n=(0,o.useHdKeyringsWithSnapAccounts)(),u=(0,r.useSelector)(i.getIsPrimarySeedPhraseBackedUp);let l;t[0]!==e?(l=t=>(0,a.getMultichainAccountsByWalletId)(t,e),t[0]=e,t[1]=l):l=t[1];const d=(0,r.useSelector)(l);let m;t[2]!==d?(m=Object.values(d??{}),t[2]=d,t[3]=m):m=t[3];const p=m;let h;e:{if(0===Object.entries(p||{}).length){let e;t[4]!==p?(e={multichainAccounts:p,keyringId:undefined},t[4]=p,t[5]=e):e=t[5],h=e;break e}const s=n.findIndex(t=>t.metadata.id===(0,c.stripWalletTypePrefixFromWalletId)(e));if(-1===s){let e;t[6]!==p?(e={multichainAccounts:p,keyringId:undefined},t[6]=p,t[7]=e):e=t[7],h=e;break e}const r=n[s],o=(null==r?void 0:r.metadata.id)??undefined,a=1===s+1?u:undefined;let i;t[8]!==a||t[9]!==o||t[10]!==p?(i={multichainAccounts:p,keyringId:o,isSRPBackedUp:a},t[8]=a,t[9]=o,t[10]=p,t[11]=i):i=t[11],h=i}return h}}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletInfo.ts"}],[7253,{"../../../../shared/lib/asset-utils":5925,"../../../../shared/modules/selectors/networks":6034,"../../../selectors":8207,"@metamask/utils":3207,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.RampsMetaMaskEntry=void 0;var s=e("react"),r=e("react-redux"),o=e("@metamask/utils"),a=e("../../../../shared/modules/selectors/networks"),i=e("../../../selectors"),c=e("../../../../shared/lib/asset-utils");const u="https://app.metamask.io";let l=n.RampsMetaMaskEntry=function(e){return e.BuySellButton="ext_buy_sell_button",e.NftBanner="ext_buy_banner_nfts",e.TokensBanner="ext_buy_banner_tokens",e.ActivityBanner="ext_buy_banner_activity",e.BtcBanner="ext_buy_banner_btc",e}({});n.default=(e=l.BuySellButton)=>{const t=(0,r.useSelector)(a.getCurrentChainId),n=(0,r.useSelector)(i.getMetaMetricsId),d=(0,r.useSelector)(i.getParticipateInMetaMetrics),m=(0,r.useSelector)(i.getDataCollectionForMarketing),p=(0,s.useCallback)(t=>{try{const s=new URLSearchParams;s.set("metamaskEntry",e);let r="";r=(0,c.isEvmChainId)(t)?(0,o.hexToNumber)(t).toString():t,s.set("chainId",r),n&&s.set("metametricsId",n),s.set("metricsEnabled",String(d)),m&&s.set("marketingEnabled",String(m));const a=new URL("https://app.metamask.io");return a.pathname="buy",a.search=s.toString(),a.toString()}catch{return`${u}/buy`}},[m,d,n,e]);return{openBuyCryptoInPdapp:(0,s.useCallback)(e=>{const n=p(e||t);global.platform.openTab({url:n})},[t,p]),getBuyURI:p}}}}},{package:"$root$",file:"ui/hooks/ramps/useRamps/useRamps.ts"}],[7254,{"../../ducks/metamask/metamask":7137,"../../ducks/rewards":7141,"../../ducks/rewards/selectors":7142,"../../store/actions":8241,"../../store/store":8247,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCandidateSubscriptionId=void 0;var s,r=e("react"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=e("react-redux"),i=e("../../store/actions"),c=e("../../ducks/metamask/metamask"),u=e("../../ducks/rewards/selectors"),l=e("../../ducks/rewards"),d=e("../../store/store");n.useCandidateSubscriptionId=()=>{const e=(0,a.useDispatch)(),t=(0,a.useSelector)(c.getIsUnlocked),n=(0,a.useSelector)(u.selectRewardsEnabled),s=(0,a.useSelector)(u.selectCandidateSubscriptionId),m=(0,d.useAppSelector)(e=>{var t;return null===(t=e.metamask.rewardsActiveAccount)||void 0===t?void 0:t.subscriptionId}),p=(0,r.useRef)(!1),h=(0,r.useCallback)(async()=>{try{if(!n)return void e((0,l.setCandidateSubscriptionId)(null));if(m)return p.current=!1,void e((0,l.setCandidateSubscriptionId)(m));if(p.current)return;p.current=!0;const t=await e((0,i.getRewardsCandidateSubscriptionId)());e((0,l.setCandidateSubscriptionId)(t))}catch(t){o.default.error("[useCandidateSubscriptionId] Error fetching candidate subscription ID:",t),e((0,l.setCandidateSubscriptionId)("error"))}finally{p.current=!1}},[n,e,m]);return(0,r.useEffect)(()=>{"retry"===s&&h()},[s,h]),(0,r.useEffect)(()=>{t&&h()},[h,t]),{fetchCandidateSubscriptionId:h}}}}},{package:"$root$",file:"ui/hooks/rewards/useCandidateSubscriptionId.ts"}],[7255,{"../../ducks/rewards":7141,"../../store/actions":8241,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGeoRewardsMetadata=void 0;var s=e("react"),r=e("react-redux"),o=e("../../ducks/rewards"),a=e("../../store/actions");n.useGeoRewardsMetadata=({enabled:e=!0})=>{const t=(0,r.useDispatch)(),n=(0,s.useRef)(!1),i=(0,s.useCallback)(async()=>{if(!n.current&&e){n.current=!0,t((0,o.setRewardsGeoMetadataLoading)(!0)),t((0,o.setRewardsGeoMetadataError)(!1));try{const e=await t((0,a.getRewardsGeoMetadata)());t((0,o.setRewardsGeoMetadata)(e))}catch(e){t((0,o.setRewardsGeoMetadataError)(!0))}finally{n.current=!1,t((0,o.setRewardsGeoMetadataLoading)(!1))}}else e||(t((0,o.setRewardsGeoMetadataError)(!1)),t((0,o.setRewardsGeoMetadataLoading)(!1)),t((0,o.setRewardsGeoMetadata)(null)))},[t,e]);return(0,s.useEffect)(()=>{i()},[i]),{fetchGeoRewardsMetadata:i}}}}},{package:"$root$",file:"ui/hooks/rewards/useGeoRewardsMetadata.ts"}],[7256,{"../../../shared/constants/metametrics":5892,"../../contexts/metametrics":7110,"../../ducks/rewards":7141,"../../pages/multichain-accounts/account-details/account-type-utils":7925,"../../store/actions":8241,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useLinkAccountAddress=void 0;var s=e("react"),r=e("react-redux"),o=e("../../store/actions"),a=e("../../contexts/metametrics"),i=e("../../../shared/constants/metametrics"),c=e("../../pages/multichain-accounts/account-details/account-type-utils"),u=e("../../ducks/rewards");n.useLinkAccountAddress=()=>{const e=(0,r.useDispatch)(),[t,n]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),m=(0,s.useContext)(a.MetaMetricsContext),p=(0,s.useRef)(!0);(0,s.useEffect)(()=>(p.current=!0,()=>{p.current=!1}),[]);const h=(0,s.useCallback)((e,t)=>{const n={account_type:(0,c.getAccountTypeCategory)(t)};m({category:i.MetaMetricsEventCategory.Rewards,event:e,properties:n})},[m]);return{linkAccountAddress:(0,s.useCallback)(async t=>{if(!p.current)return!1;n(!0),d(!1);try{const n=await e((0,o.rewardsIsOptInSupported)({account:t}));if(!p.current)return!1;if(!n)return d(!0),!1;const s=await e((0,o.rewardsGetOptInStatus)({addresses:[t.address]}));if(!p.current)return!1;if(s.ois[0])return!0;h(i.MetaMetricsEventName.RewardsAccountLinkingStarted,t);try{const n=await e((0,o.rewardsLinkAccountsToSubscriptionCandidate)([t]));if(!p.current)return!1;const s=n[0];return null!=s&&s.success?(h(i.MetaMetricsEventName.RewardsAccountLinkingCompleted,t),e((0,u.setRewardsAccountLinkedTimestamp)(Date.now())),!0):(h(i.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}catch(e){return!!p.current&&(h(i.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}}catch(e){return!!p.current&&(d(!0),!1)}finally{p.current&&n(!1)}},[h,e]),isLoading:t,isError:l}}}}},{package:"$root$",file:"ui/hooks/rewards/useLinkAccountAddress.ts"}],[7257,{"../../../shared/constants/metametrics":5892,"../../components/app/rewards/utils/handleRewardsErrorMessage":6370,"../../contexts/metametrics":7110,"../../ducks/rewards":7141,"../../selectors":8207,"../../selectors/multichain-accounts/account-tree":8211,"../../store/actions":8241,"../useI18nContext":7301,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOptIn=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../selectors/multichain-accounts/account-tree"),c=e("../../ducks/rewards"),u=e("../../selectors"),l=e("../../contexts/metametrics"),d=e("../../../shared/constants/metametrics"),m=e("../../store/actions"),p=e("../../components/app/rewards/utils/handleRewardsErrorMessage"),h=e("../useI18nContext");n.useOptIn=e=>{const[t,n]=(0,r.useState)(null),s=(0,o.useDispatch)(),[f,g]=(0,r.useState)(!1),y=(0,r.useContext)(l.MetaMetricsContext),S=(0,h.useI18nContext)(),k=(0,o.useSelector)(i.getSelectedAccountGroup),v=(0,o.useSelector)(u.getSelectedAccount),{id:b}=(0,o.useSelector)(e=>(0,i.getWalletIdAndNameByAccountAddress)(e,v.address))||{walletId:undefined},T=(0,o.useSelector)(e=>b?(0,i.getMultichainAccountsByWalletId)(e,b):{}),w=(0,r.useMemo)(()=>T?Object.keys(T)[0]:undefined,[T]),C=(0,o.useSelector)(e=>w?(0,i.getInternalAccountsFromGroupById)(e,w):[]),A=(0,o.useSelector)(e=>k?(0,i.getInternalAccountsFromGroupById)(e,k):[]);return{optin:(0,r.useCallback)(async t=>{const r={referred:Boolean(t),referral_code_used:t};y({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInStarted,properties:r});let o=null;try{g(!0),n(null);const i=w&&C.length>0?C:A,c=w&&C.length>0?A:C;if(o=await s((0,m.rewardsOptIn)({accounts:i,referralCode:t})),o){if(c.length>0)try{await s((0,m.rewardsLinkAccountsToSubscriptionCandidate)(c))}catch{}y({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInCompleted,properties:r});try{await s((0,m.updateMetaMetricsTraits)({[d.MetaMetricsUserTrait.HasRewardsOptedIn]:"on",...t&&{[d.MetaMetricsUserTrait.RewardsReferred]:!0,[d.MetaMetricsUserTrait.RewardsReferralCodeUsed]:t}}))}catch{}if(null!=e&&e.rewardPoints&&null!=e&&e.shieldSubscriptionId)try{await s((0,m.linkRewardToShieldSubscription)(e.shieldSubscriptionId,e.rewardPoints))}catch(e){a.default.warn("Failed to link reward to shield subscription",e)}}}catch(e){y({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInFailed,properties:r});const t=(0,p.handleRewardsErrorMessage)(e,S);n(t)}o&&s((0,c.setCandidateSubscriptionId)(o)),g(!1)},[y,w,C,A,s,S,null==e?void 0:e.rewardPoints,null==e?void 0:e.shieldSubscriptionId]),optinLoading:f,optinError:t,clearOptinError:(0,r.useCallback)(()=>n(null),[])}}}}},{package:"$root$",file:"ui/hooks/rewards/useOptIn.ts"}],[7258,{"../../../shared/constants/rewards":5903,"../../ducks/metamask/metamask":7137,"../../ducks/rewards":7141,"../../ducks/rewards/selectors":7142,"../../store/actions":8241,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSeasonStatus=void 0;var s=e("react"),r=e("react-redux"),o=e("../../store/actions"),a=e("../../ducks/metamask/metamask"),i=e("../../ducks/rewards/selectors"),c=e("../../ducks/rewards"),u=e("../../../shared/constants/rewards");n.useSeasonStatus=({subscriptionId:e,onAuthorizationError:t})=>{const n=(0,r.useDispatch)(),l=(0,r.useSelector)(a.getIsUnlocked),d=(0,r.useSelector)(i.selectRewardsEnabled),m=(0,s.useRef)(null),p=(0,s.useCallback)(async()=>{if(!e||"pending"===e||"retry"===e||"error"===e||!d)return n((0,c.setSeasonStatus)(null)),n((0,c.setSeasonStatusError)(null)),void n((0,c.setSeasonStatusLoading)(!1));if(!Boolean(m.current)||m.current!==e){m.current=e,n((0,c.setSeasonStatusLoading)(!0));try{const t=await n((0,o.getRewardsSeasonMetadata)("current"));if(!t)throw new Error("No season metadata found");const s=await n((0,o.getRewardsSeasonStatus)(e,t.id));n((0,c.setSeasonStatus)(s)),n((0,c.setSeasonStatusError)(null))}catch(e){const s=e instanceof Error?e.message:"Unknown error";n((0,c.setSeasonStatusError)(s)),(s.includes(u.REWARDS_ERROR_MESSAGES.AUTHORIZATION_FAILED)||s.includes(u.REWARDS_ERROR_MESSAGES.SEASON_NOT_FOUND))&&t&&(await t(),n((0,c.setSeasonStatus)(null)))}finally{m.current=null,n((0,c.setSeasonStatusLoading)(!1))}}},[e,t,d,n]);return(0,s.useEffect)(()=>{l&&e&&p()},[l,p,e]),{fetchSeasonStatus:p}}}}},{package:"$root$",file:"ui/hooks/rewards/useSeasonStatus.ts"}],[7259,{"../../store/actions":8241,lodash:4940,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useValidateReferralCode=void 0;var s=e("react"),r=e("lodash"),o=e("react-redux"),a=e("../../store/actions");n.useValidateReferralCode=(e="",t=1e3)=>{const[n,i]=(0,s.useState)(e),[c,u]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),h=(0,s.useRef)(!1),f=(0,o.useDispatch)(),g=(0,s.useCallback)(async e=>{try{return await f((0,a.validateRewardsReferralCode)(e))?"":"Invalid code"}catch(e){return p(!0),"Unknown error"}},[f]),y=(0,s.useCallback)((0,r.debounce)(async e=>{p(!1);const t=await g(e);u(t),d(!1)},t),[t,g]),S=(0,s.useCallback)(e=>{const t=e.trim().toUpperCase();if(i(t),t.length<6)return y.cancel(),d(!1),void u("minLength 6 characters");t&&d(!0),y(t)},[y]);(0,s.useEffect)(()=>{h.current?e!==n&&S(e):(S(e),h.current=!0)},[e]),(0,s.useEffect)(()=>()=>y.cancel(),[y]);const k=Boolean(n)&&!c&&!l;return{referralCode:n,setReferralCode:S,validateCode:g,isValidating:l,isValid:k,isUnknownError:m}}}}},{package:"$root$",file:"ui/hooks/rewards/useValidateReferralCode.ts"}],[7260,{"../../../../shared/constants/metametrics":5892,"../../../../shared/constants/subscriptions":5910,"../../../../shared/modules/shield":6041,"../../../contexts/metametrics":7110,"../../../selectors":8207,"../../../selectors/multichain-accounts/account-tree":8211,"../../../store/actions":8241,"../../useAccountTotalFiatBalance":7278,"./utils":7261,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionMetrics=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../../contexts/metametrics"),i=e("../../../../shared/constants/metametrics"),c=e("../../../selectors"),u=e("../../useAccountTotalFiatBalance"),l=e("../../../../shared/modules/shield"),d=e("../../../store/actions"),m=e("../../../../shared/constants/subscriptions"),p=e("../../../selectors/multichain-accounts/account-tree"),h=e("./utils");function f(e){return(0,p.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}n.useSubscriptionMetrics=()=>{const e=(0,s.c)(72),t=(0,o.useDispatch)(),n=(0,r.useContext)(a.MetaMetricsContext),p=(0,o.useSelector)(f),g=(0,o.useSelector)(c.getMetaMaskHdKeyrings),{totalFiatBalance:y}=(0,u.useAccountTotalFiatBalance)(p,!0,!0),S=(0,o.useSelector)(c.getPendingShieldCohortTxType);let k;e[0]!==t||e[1]!==y?(k=async e=>{await t((0,d.setShieldSubscriptionMetricsProps)({marketingUtmParams:e.marketingUtmParams,source:e.source,userBalanceInUSD:Number(y),rewardPoints:e.rewardPoints}))},e[0]=t,e[1]=y,e[2]=k):k=e[2];const v=k;let b;e[3]!==g||e[4]!==p||e[5]!==y||e[6]!==n?(b=async(e,t)=>{const s=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),r=(0,h.formatCaptureShieldEligibilityCohortEventsProps)(e,Number(y));n({event:t,category:i.MetaMetricsEventCategory.Shield,properties:{...s,...r}})},e[3]=g,e[4]=p,e[5]=y,e[6]=n,e[7]=b):b=e[7];const T=b;let w;e[8]!==g||e[9]!==S||e[10]!==p||e[11]!==y||e[12]!==n?(w=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=e.source===m.ShieldMetricsSourceEnum.PostTransaction?S:undefined;n({event:i.MetaMetricsEventName.ShieldEntryModal,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...(0,l.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,modal_type:e.type,modal_cta_action_clicked:e.modalCtaActionClicked,post_transaction_type:s}})},e[8]=g,e[9]=S,e[10]=p,e[11]=y,e[12]=n,e[13]=w):w=e[13];const C=w;let A;e[14]!==g||e[15]!==p||e[16]!==y||e[17]!==n?(A=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,h.formatDefaultShieldSubscriptionRequestEventProps)(e);n({event:i.MetaMetricsEventName.ShieldSubscriptionRequest,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s}})},e[14]=g,e[15]=p,e[16]=y,e[17]=n,e[18]=A):A=e[18];const I=A;let E;e[19]!==g||e[20]!==p||e[21]!==y||e[22]!==n?(E=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipRestartRequest,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.requestStatus,error:e.errorMessage}})},e[19]=g,e[20]=p,e[21]=y,e[22]=n,e[23]=E):E=e[23];const M=E;let _;e[24]!==g||e[25]!==p||e[26]!==y||e[27]!==n?(_=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipCancelled,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.cancellationStatus,error:e.errorMessage,latest_subscription_duration:e.latestSubscriptionDuration}})},e[24]=g,e[25]=p,e[26]=y,e[27]=n,e[28]=_):_=e[28];const P=_;let N;e[29]!==g||e[30]!==p||e[31]!==y||e[32]!==n?(N=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,h.formatCaptureShieldPaymentMethodChangeEventProps)(e);n({event:i.MetaMetricsEventName.ShieldPaymentMethodChange,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.changeStatus,error:e.errorMessage}})},e[29]=g,e[30]=p,e[31]=y,e[32]=n,e[33]=N):N=e[33];const R=N;let x;e[34]!==g||e[35]!==p||e[36]!==y||e[37]!==n?(x=(e,t)=>{const s=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),r=(0,l.formatExistingSubscriptionEventProps)(e);n({event:t,category:i.MetaMetricsEventCategory.Shield,properties:{...s,...r}})},e[34]=g,e[35]=p,e[36]=y,e[37]=n,e[38]=x):x=e[38];const O=x;let D;e[39]!==g||e[40]!==p||e[41]!==y||e[42]!==n?(D=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,h.formatCaptureShieldCtaClickedEventProps)(e);n({event:i.MetaMetricsEventName.ShieldCtaClicked,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s}})},e[39]=g,e[40]=p,e[41]=y,e[42]=n,e[43]=D):D=e[43];const B=D;let $;e[44]!==g||e[45]!==p||e[46]!==y||e[47]!==n?($=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y));n({event:i.MetaMetricsEventName.ShieldClaimSubmission,category:i.MetaMetricsEventCategory.Shield,properties:{...t,subscription_status:e.subscriptionStatus,attachments_count:e.attachmentsCount,submission_status:e.submissionStatus,error:e.errorMessage}})},e[44]=g,e[45]=p,e[46]=y,e[47]=n,e[48]=$):$=e[48];const F=$;let U;e[49]!==g||e[50]!==p||e[51]!==y||e[52]!==n?(U=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipErrorStateClicked,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,type:e.errorCause,action:e.actionClicked,location:e.location,view:e.view}})},e[49]=g,e[50]=p,e[51]=y,e[52]=n,e[53]=U):U=e[53];const L=U;let j;e[54]!==g||e[55]!==p||e[56]!==y||e[57]!==n?(j=e=>{const t=(0,l.getShieldCommonTrackingProps)(p,g,Number(y));n({event:i.MetaMetricsEventName.ShieldSubscriptionUnexpectedErrorEvent,category:i.MetaMetricsEventCategory.Shield,properties:{...t,error_message:e.errorMessage,location:e.location}})},e[54]=g,e[55]=p,e[56]=y,e[57]=n,e[58]=j):j=e[58];const H=j;let G;return e[59]!==O||e[60]!==F||e[61]!==B||e[62]!==T||e[63]!==C||e[64]!==L||e[65]!==P||e[66]!==R||e[67]!==I||e[68]!==M||e[69]!==H||e[70]!==v?(G={setShieldSubscriptionMetricsPropsToBackground:v,captureShieldEntryModalEvent:C,captureShieldSubscriptionRequestEvent:I,captureShieldMembershipCancelledEvent:P,captureShieldPaymentMethodChangeEvent:R,captureShieldCtaClickedEvent:B,captureShieldClaimSubmissionEvent:F,captureShieldEligibilityCohortEvent:T,captureCommonExistingShieldSubscriptionEvents:O,captureShieldErrorStateClickedEvent:L,captureShieldSubscriptionRestartRequestEvent:M,captureShieldUnexpectedErrorEvent:H},e[59]=O,e[60]=F,e[61]=B,e[62]=T,e[63]=C,e[64]=L,e[65]=P,e[66]=R,e[67]=I,e[68]=M,e[69]=H,e[70]=v,e[71]=G):G=e[71],G}}}},{package:"$root$",file:"ui/hooks/shield/metrics/useSubscriptionMetrics.ts"}],[7261,{"../../../../shared/modules/shield":6041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatCaptureShieldCtaClickedEventProps=function(e){return{...(0,s.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,page:e.redirectToPage,url:e.redirectToUrl,cta_action_clicked:e.ctaActionClicked}},n.formatCaptureShieldEligibilityCohortEventsProps=function(e,t){const n={multi_chain_balance_category:(0,s.getUserBalanceCategory)(Number(t)),number_of_eligible_cohorts:e.numberOfEligibleCohorts,assigned_cohort:e.cohort};"modalType"in e&&(n.modal_type=e.modalType);return n},n.formatCaptureShieldPaymentMethodChangeEventProps=function(e){const t=(0,s.formatExistingSubscriptionEventProps)(e),n=(0,s.getBillingIntervalForMetrics)(e.newBillingInterval);return{...t,new_payment_type:e.newPaymentType,new_billing_interval:n,new_crypto_payment_chain:e.newCryptoPaymentChain,new_payment_currency:e.newPaymentCurrency}},n.formatDefaultShieldSubscriptionRequestEventProps=function(e){const t=(0,s.getBillingIntervalForMetrics)(e.defaultBillingInterval),n=(0,s.getBillingIntervalForMetrics)(e.billingInterval),r=(0,s.getBillingCyclesForMetrics)(e.billingInterval);return{...(0,s.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,post_transaction_type:e.postTransactionType,subscription_state:e.subscriptionState,default_payment_type:e.defaultPaymentType,default_payment_currency:e.defaultPaymentCurrency,default_billing_interval:t,default_payment_chain:e.defaultPaymentChain,payment_type:e.paymentType,payment_currency:e.paymentCurrency,is_trial:e.isTrialSubscription,billing_interval:n,billing_cycles:r,payment_chain:e.paymentChain,has_sufficient_crypto_balance:e.hasSufficientCryptoBalance,gas_sponsored:e.gasSponsored,error:e.errorMessage,status:e.requestStatus}};var s=e("../../../../shared/modules/shield")}}},{package:"$root$",file:"ui/hooks/shield/metrics/utils.ts"}],[7262,{"../../pages/settings/transaction-shield-tab/claims-form/constants":8112,"../../selectors/shield/claims":8229,"../../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimDraft=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../store/actions"),a=e("../../selectors/shield/claims"),i=e("../../pages/settings/transaction-shield-tab/claims-form/constants");async function c(e){return await(0,o.saveClaimDraft)(e)}async function u(e){await(0,o.deleteClaimDraft)(e)}n.useClaimDraft=()=>{const e=(0,s.c)(6),t=(0,r.useSelector)(a.getClaimDrafts),n=c;let o;e[0]!==t?(o=e=>t.find(t=>t.draftId===e),e[0]=t,e[1]=o):o=e[1];const l=o,d=u,m=t.length>=i.MAX_DRAFT_CLAIMS;let p;return e[2]!==t||e[3]!==l||e[4]!==m?(p={drafts:t,hasMaxDrafts:m,saveDraft:n,getDraft:l,deleteDraft:d},e[2]=t,e[3]=l,e[4]=m,e[5]=p):p=e[5],p}}}},{package:"$root$",file:"ui/hooks/shield/useClaimDraft.ts"}],[7263,{"../../contexts/claims/claims":7103,"../../pages/settings/transaction-shield-tab/types":8133,"../../store/actions":8241,"./useClaimDraft":7262,react:5358,"react-compiler-runtime":5272,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimState=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-router-dom"),a=e("../../contexts/claims/claims"),i=e("../../store/actions"),c=e("../../pages/settings/transaction-shield-tab/types"),u=e("./useClaimDraft");n.useClaimState=e=>{const t=(0,s.c)(30),n=e===undefined?c.CLAIMS_FORM_MODES.NEW:e,{pathname:l}=(0,o.useLocation)(),{claims:d}=(0,a.useClaims)(),{getDraft:m}=(0,u.useClaimDraft)(),[p,h]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[y,S]=(0,r.useState)(""),[k,v]=(0,r.useState)(""),[b,T]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[A,I]=(0,r.useState)();let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E=[],t[0]=E):E=t[0];const[M,_]=(0,r.useState)(E),[P,N]=(0,r.useState)(""),[R,x]=(0,r.useState)(),O=n===c.CLAIMS_FORM_MODES.VIEW,D=n===c.CLAIMS_FORM_MODES.EDIT_DRAFT;let B;t[1]!==l?(B=l.split("/").pop(),t[1]=l,t[2]=B):B=t[2];const $=B,F=(0,r.useRef)(null);let U,L,j,H,G,W,q,Y;return t[3]!==p||t[4]!==y||t[5]!==O?(U=()=>{!O&&p&&y&&(async()=>{const e=await(0,i.generateClaimSignature)(p,y);N(e)})()},L=[O,p,y],t[3]=p,t[4]=y,t[5]=O,t[6]=U,t[7]=L):(U=t[6],L=t[7]),(0,r.useEffect)(U,L),t[8]!==$||t[9]!==d||t[10]!==O?(j=()=>{if(O&&$){const e=d.find(e=>e.id===$);e&&(g(e.email),h(e.chainId),S(e.impactedWalletAddress),v(e.impactedTxHash),T(e.reimbursementWalletAddress),C(e.description),_(e.attachments||[]))}},H=[O,$,d],t[8]=$,t[9]=d,t[10]=O,t[11]=j,t[12]=H):(j=t[11],H=t[12]),(0,r.useEffect)(j,H),t[13]!==$||t[14]!==m||t[15]!==D?(G=()=>{if(F.current!==$&&D&&$){const e=m($);e&&(F.current=$,x(e.draftId),g(e.email||""),h(e.chainId||""),S(e.impactedWalletAddress||""),v(e.impactedTxHash||""),T(e.reimbursementWalletAddress||""),C(e.description||""))}},W=[D,$,m],t[13]=$,t[14]=m,t[15]=D,t[16]=G,t[17]=W):(G=t[16],W=t[17]),(0,r.useEffect)(G,W),t[18]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{h(""),g(""),S(""),v(""),T(""),C(""),I(undefined),x(undefined)},t[18]=q):q=t[18],t[19]!==w||t[20]!==p||t[21]!==P||t[22]!==R||t[23]!==f||t[24]!==A||t[25]!==k||t[26]!==y||t[27]!==b||t[28]!==M?(Y={chainId:p,setChainId:h,email:f,setEmail:g,impactedWalletAddress:y,setImpactedWalletAddress:S,impactedTransactionHash:k,setImpactedTransactionHash:v,reimbursementWalletAddress:b,setReimbursementWalletAddress:T,caseDescription:w,setCaseDescription:C,files:A,setFiles:I,uploadedFiles:M,claimSignature:P,currentDraftId:R,clear:q},t[19]=w,t[20]=p,t[21]=P,t[22]=R,t[23]=f,t[24]=A,t[25]=k,t[26]=y,t[27]=b,t[28]=M,t[29]=Y):Y=t[29],Y}}}},{package:"$root$",file:"ui/hooks/shield/useClaimState.ts"}],[7264,{"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/hexstring-utils":6023,"../../selectors":8207,"../../selectors/multichain-accounts/account-tree":8211,"../../selectors/snaps":8235,"@metamask/utils":3207,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=void 0;var s=e("react-compiler-runtime"),r=e("@metamask/utils"),o=e("react-redux"),a=e("../../selectors/snaps"),i=e("../../../shared/modules/hexstring-utils"),c=e("../../../shared/modules/conversion.utils"),u=e("../../selectors/multichain-accounts/account-tree"),l=e("../../selectors");n.useDisplayName=e=>{var t;const n=(0,s.c)(11),{address:d,chain:m}=e,{namespace:p,reference:h}=m,f=p===r.KnownCaipNamespace.Eip155;let g;n[0]!==d||n[1]!==f?(g=f?(0,i.toChecksumHexAddress)(d):d,n[0]=d,n[1]=f,n[2]=g):g=n[2];const y=g,S=(0,o.useSelector)(l.getIsMultichainAccountsState2Enabled);let k;n[3]!==y?(k=e=>(0,u.getAccountGroupsByAddress)(e,[y]),n[3]=y,n[4]=k):k=n[4];const v=null===(t=(0,o.useSelector)(k)[0])||void 0===t?void 0:t.metadata.name;let b;n[5]!==y?(b=e=>(0,a.getAccountNameFromState)(e,y),n[5]=y,n[6]=b):b=n[6];const T=(0,o.useSelector)(b);let w;n[7]!==f||n[8]!==y||n[9]!==h?(w=e=>(0,a.getAddressBookEntryByNetwork)(e,y,`0x${(0,c.decimalToHex)(f?h:"0")}`),n[7]=f,n[8]=y,n[9]=h,n[10]=w):w=n[10];const C=(0,o.useSelector)(w);return S&&v||T||f&&(null==C?void 0:C.name)||undefined}}}},{package:"$root$",file:"ui/hooks/snaps/useDisplayName.ts"}],[7265,{"../../selectors":8207,"@metamask/snaps-sdk":2877,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useInsightSnaps=function(e){const t=(0,s.c)(9);let n;t[0]!==e?(n=t=>(0,a.getSnapInsights)(t,e),t[0]=e,t[1]=n):n=t[1];const o=(0,r.useSelector)(n);let c;t[2]!==o?(c=o?Object.values(o):[],t[2]=o,t[3]=c):c=t[3];const u=c;let l;t[4]!==u?(l=u.filter(i),t[4]=u,t[5]=l):l=t[5];const d=l;let m;t[6]!==u||t[7]!==d?(m={data:u,warnings:d},t[6]=u,t[7]=d,t[8]=m):m=t[8];return m};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/snaps-sdk"),a=e("../../selectors");function i(e){return e.severity===o.SeverityLevel.Critical}}}},{package:"$root$",file:"ui/hooks/snaps/useInsightSnaps.js"}],[7266,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react");n.default=()=>{const e=(0,s.c)(4),t=(0,r.useRef)(null),[n,o]=(0,r.useState)(!1);let a,i,c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{o(t.current&&t.current.offsetHeight<t.current.scrollHeight)},i=[t],e[0]=a,e[1]=i):(a=e[0],i=e[1]),(0,r.useEffect)(a,i),e[2]!==n?(c={contentRef:t,isOverflowing:n},e[2]=n,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useIsOverflowing.js"}],[7267,{"../../store/actions":8241,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSafeWebsite=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("../../store/actions");n.useSafeWebsite=e=>{const t=(0,s.c)(3),[n,a]=(0,r.useState)();let i,c;return t[0]!==e?(i=()=>{e&&(async()=>{(await(0,o.getPhishingResult)(e)).result||a(new URL(e))})()},c=[e],t[0]=e,t[1]=i,t[2]=c):(i=t[1],c=t[2]),(0,r.useEffect)(i,c),n}}}},{package:"$root$",file:"ui/hooks/snaps/useSafeWebsite.ts"}],[7268,{"../../selectors":8207,"../../store/actions":8241,"@metamask/snaps-rpc-methods":2821,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNameResolution=function(){const e=(0,s.c)(6),t=(0,r.useSelector)(a.getNameLookupSnaps);let n;e[0]!==t?(n=(e,n)=>t.filter(t=>{const{permission:s}=t,r=(0,o.getChainIdsCaveat)(s);if(r&&!r.includes(e))return!1;const a=(0,o.getLookupMatchersCaveat)(s);if(a){const{tlds:e,schemes:t}=a;return(null==e?void 0:e.some(e=>n.endsWith(`.${e}`)))||(null==t?void 0:t.some(e=>n.startsWith(`${e}:`)))}return!0}).map(l),e[0]=t,e[1]=n):n=e[1];const d=n;let m;e[2]!==d?(m=async(e,t)=>{const n=d(e,t);if(0===n.length)return[];return(await Promise.allSettled(n.map(n=>(0,i.handleSnapRequest)({snapId:n,origin:"metamask",handler:"onNameLookup",request:{jsonrpc:"2.0",method:" ",params:{chainId:e,domain:t}}})))).filter(u).flatMap(c)},e[2]=d,e[3]=m):m=e[3];const p=m;let h;e[4]!==p?(h={fetchResolutions:p},e[4]=p,e[5]=h):h=e[5];return h};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("@metamask/snaps-rpc-methods"),a=e("../../selectors"),i=e("../../store/actions");function c(e){return e.value.resolvedAddresses}function u(e){return"fulfilled"===e.status&&e.value}function l(e){const{id:t}=e;return t}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNameResolution.ts"}],[7269,{"../../helpers/utils/util":7207,"@metamask/snaps-utils":2994,react:5358,"react-compiler-runtime":5272,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-router-dom")),o=e("@metamask/snaps-utils"),a=e("../../helpers/utils/util");n.default=()=>{const e=(0,s.c)(4),t=(0,r.useNavigate)();let n;e[0]!==t?(n=e=>{let n;const s=(0,o.parseMetaMaskUrl)(e);n=s.snapId?(0,a.getSnapRoute)(s.snapId):s.path,t(n)},e[0]=t,e[1]=n):n=e[1];const i=n;let c;return e[2]!==i?(c={handleSnapNavigate:i},e[2]=i,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNavigation.ts"}],[7270,{"../../store/actions":8241,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapSettings=function({snapId:e}){const t=(0,r.useDispatch)(),[n,a]=(0,s.useState)(!0),[i,c]=(0,s.useState)(undefined),[u,l]=(0,s.useState)(undefined);return(0,s.useEffect)(()=>{let n=!1;return e&&async function(e){try{l(undefined),a(!0);const s=await(0,o.handleSnapRequest)({snapId:e,origin:"metamask",handler:"onSettingsPage",request:{jsonrpc:"2.0",method:" "}});n||(c(s),(0,o.forceUpdateMetamaskState)(t))}catch(e){n||l(e)}finally{n||a(!1)}}(e),()=>{n=!0}},[e]),{data:i,error:u,loading:n}};var s=e("react"),r=e("react-redux"),o=e("../../store/actions")}}},{package:"$root$",file:"ui/hooks/snaps/useSnapSettings.ts"}],[7271,{"../../selectors":8207,"../../store/actions":8241,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSyncSRPs=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../store/actions"),c=e("../../selectors");n.useSyncSRPs=()=>{const e=(0,o.useDispatch)(),t=(0,o.useSelector)(c.getIsSocialLoginFlow),[n,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{if(t)try{s(!0),await e((0,i.syncSeedPhrases)())}catch(e){a.default.error("[useSyncSRPs] error",e)}finally{s(!1)}})()},[e,t]),{loading:n}}}}},{package:"$root$",file:"ui/hooks/social-sync/useSyncSRPs.ts"}],[7272,{"../../../shared/constants/time":5913,"../../../shared/lib/shield":5993,"../../store/actions":8241,"../useAsync":7281,"../useThrottle":7332,"./useSubscription":7274,"./useSubscriptionPricing":7275,"@metamask/subscription-controller":3023,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldSubscriptionCryptoSufficientBalanceCheck=n.useShieldAddFundTrigger=n.useHandleShieldAddFundTrigger=void 0;var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=e("@metamask/subscription-controller"),c=(s=e("loglevel"))&&s.__esModule?s:{default:s},u=e("../../store/actions"),l=e("../../../shared/lib/shield"),d=e("../useAsync"),m=e("../../../shared/constants/time"),p=e("../useThrottle"),h=e("./useSubscriptionPricing"),f=e("./useSubscription");const g=()=>{const e=(0,r.c)(19),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,t),{subscriptionPricing:s}=(0,h.useSubscriptionPricing)(),o=(0,h.useSubscriptionPaymentMethods)(i.PAYMENT_TYPES.byCrypto,s),a=null==n?void 0:n.paymentMethod;let c;var u;e[0]!==a||e[1]!==(null==o?void 0:o.chains)?(c=a?null==o||null===(u=o.chains)||void 0===u||null===(u=u.find(e=>{var t;return e.chainId.toLowerCase()===(null==a||null===(t=a.crypto)||void 0===t||null===(t=t.chainId)||void 0===t?void 0:t.toLowerCase())}))||void 0===u?void 0:u.tokens.find(e=>{var t;return e.symbol.toLowerCase()===(null==a||null===(t=a.crypto)||void 0===t||null===(t=t.tokenSymbol)||void 0===t?void 0:t.toLowerCase())}):undefined,e[0]=a,e[1]=null==o?void 0:o.chains,e[2]=c):c=e[2];const l=c,d=(0,h.useSubscriptionProductPlans)(i.PRODUCT_TYPES.SHIELD,s);let m;e[3]!==d||e[4]!==(null==n?void 0:n.interval)?(m=null==d?void 0:d.find(e=>e.interval===(null==n?void 0:n.interval)),e[3]=d,e[4]=null==n?void 0:n.interval,e[5]=m):m=e[5];const p=m,g=null==o?void 0:o.chains;let y;e[6]!==p||e[7]!==g?(y={paymentChains:g,price:p,productType:i.PRODUCT_TYPES.SHIELD},e[6]=p,e[7]=g,e[8]=y):y=e[8];const{availableTokenBalances:S}=(0,h.useAvailableTokenBalances)(y);let k;e:{if(!a||!l){k=undefined;break e}let t;if(e[9]!==S||e[10]!==a||e[11]!==l){let n;e[13]!==a||e[14]!==l?(n=e=>{var t,n;return(null===(t=a.crypto)||void 0===t?void 0:t.chainId)===e.chainId&&l.address.toLowerCase()===(null===(n=e.address)||void 0===n?void 0:n.toLowerCase())},e[13]=a,e[14]=l,e[15]=n):n=e[15],t=S.find(n),e[9]=S,e[10]=a,e[11]=l,e[12]=t}else t=e[12];const n=t;n&&n.balance?k=n:k=undefined}const v=k,b=Boolean(v);let T;return e[16]!==b||e[17]!==v?(T={hasAvailableSelectedToken:b,validTokenBalance:v},e[16]=b,e[17]=v,e[18]=T):T=e[18],T};n.useShieldSubscriptionCryptoSufficientBalanceCheck=g;const y=()=>{const e=(0,a.useDispatch)(),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,t),s=n&&(0,l.getIsShieldSubscriptionPaused)(n),{subscriptionPricing:r}=(0,h.useSubscriptionPricing)(),m=(0,h.useSubscriptionProductPlans)(i.PRODUCT_TYPES.SHIELD,r),p=(0,o.useMemo)(()=>null==m?void 0:m.find(e=>e.interval===(null==n?void 0:n.interval)),[m,n]),g=null==n?void 0:n.paymentMethod,[y,S]=(0,d.useAsyncCallback)(async()=>{if(!(n&&p&&g&&s))throw new Error("Invalid parameters to handle shield add fund trigger");try{await e((0,u.updateSubscriptionCryptoPaymentMethod)({subscriptionId:n.id,paymentType:i.PAYMENT_TYPES.byCrypto,recurringInterval:n.interval,chainId:g.crypto.chainId,payerAddress:g.crypto.payerAddress,tokenSymbol:g.crypto.tokenSymbol,billingCycles:n.billingCycles??(null==p?void 0:p.minBillingCycles),rawTransaction:undefined})),await e((0,u.getSubscriptions)())}catch(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}},[e,n,p,g,s]);return{handleTriggerSubscriptionCheck:y,result:S}};n.useHandleShieldAddFundTrigger=y;const S=5*m.MINUTE;function k(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}n.useShieldAddFundTrigger=()=>{var e;const t=(0,r.c)(8),{subscriptions:n}=(0,f.useUserSubscriptions)(),s=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,n);let a;t[0]!==s?(a=s&&(0,l.getIsShieldSubscriptionPaused)(s),t[0]=s,t[1]=a):a=t[1];const c=a,u=null==s?void 0:s.paymentMethod,d=(null==u||null===(e=u.crypto)||void 0===e?void 0:e.error)===i.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,{hasAvailableSelectedToken:m}=g(),h=(0,p.useThrottle)(m,S),{handleTriggerSubscriptionCheck:v}=y();let b,T;t[2]!==v||t[3]!==d||t[4]!==c||t[5]!==h?(b=()=>{c&&d&&h&&v().catch(k)},T=[c,d,h,v],t[2]=v,t[3]=d,t[4]=c,t[5]=h,t[6]=b,t[7]=T):(b=t[6],T=t[7]),(0,o.useEffect)(b,T)}}}},{package:"$root$",file:"ui/hooks/subscription/useAddFundTrigger.ts"}],[7273,{"../../../shared/constants/subscriptions":5910,"../../../shared/lib/shield":5993,"../../helpers/constants/routes":7154,"../../pages/settings/transaction-shield-tab/types":8133,"../../store/actions":8241,"../shield/metrics/useSubscriptionMetrics":7260,"../useAsync":7281,"./useAddFundTrigger":7272,"./useSubscription":7274,"./useSubscriptionPricing":7275,"@metamask/subscription-controller":3023,react:5358,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHandlePayment=void 0;var s=e("react"),r=e("react-router-dom"),o=e("@metamask/subscription-controller"),a=e("../../../shared/lib/shield"),i=e("../shield/metrics/useSubscriptionMetrics"),c=e("../../../shared/constants/subscriptions"),u=e("../../helpers/constants/routes"),l=e("../../pages/settings/transaction-shield-tab/types"),d=e("../useAsync"),m=e("../../store/actions"),p=e("./useSubscriptionPricing"),h=e("./useAddFundTrigger"),f=e("./useSubscription");n.useHandlePayment=({currentShieldSubscription:e,displayedShieldSubscription:t,isCancelled:n,onOpenAddFundsModal:g,subscriptions:y,subscriptionPricing:S})=>{const k=(0,r.useNavigate)(),{captureShieldErrorStateClickedEvent:v}=(0,i.useSubscriptionMetrics)(),b=(0,p.useSubscriptionPaymentMethods)(o.PAYMENT_TYPES.byCrypto,S),T=(0,s.useMemo)(()=>{var e;if(!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;const n=null==b||null===(e=b.chains)||void 0===e?void 0:e.find(e=>e.chainId===t.paymentMethod.crypto.chainId);return null==n?void 0:n.tokens.find(e=>e.symbol===t.paymentMethod.crypto.tokenSymbol)},[b,t]),{hasAvailableSelectedToken:w}=(0,h.useShieldSubscriptionCryptoSufficientBalanceCheck)(),{handleTriggerSubscriptionCheck:C,result:A}=(0,h.useHandleShieldAddFundTrigger)(),[I,E]=(0,f.useUpdateSubscriptionCardPaymentMethod)({subscription:e,newRecurringInterval:null==e?void 0:e.interval}),{handleClickContactSupport:M}=(0,f.useHandleSubscriptionSupportAction)(),_=(0,s.useMemo)(()=>null==t?void 0:t.products.find(e=>e.name===o.PRODUCT_TYPES.SHIELD),[t]),{value:P}=(0,d.useAsyncResult)(async()=>{if(!T||!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;return await(0,m.getSubscriptionCryptoApprovalAmount)({chainId:t.paymentMethod.crypto.chainId,paymentTokenAddress:T.address,productType:o.PRODUCT_TYPES.SHIELD,interval:t.interval})},[T,t]),N=(0,s.useMemo)(()=>t&&T&&(0,l.isCryptoPaymentMethod)(t.paymentMethod)&&t.endDate&&_&&P?{chainId:t.paymentMethod.crypto.chainId,address:T.address,symbol:T.symbol,approvalAmount:{approveAmount:P.approveAmount,chainId:t.paymentMethod.crypto.chainId,paymentAddress:t.paymentMethod.crypto.payerAddress,paymentTokenAddress:T.address}}:undefined,[_,T,t,P]),{execute:R}=(0,f.useSubscriptionCryptoApprovalTransaction)(N),{execute:x,result:O}=(0,f.useUpdateSubscriptionCryptoPaymentMethod)({subscription:e}),D=(0,s.useMemo)(()=>(0,a.getIsShieldSubscriptionPaused)(y??[]),[y]),B=(0,s.useMemo)(()=>!!e&&(D&&(0,l.isCryptoPaymentMethod)(e.paymentMethod)&&!e.paymentMethod.crypto.error),[e,D]),$=(0,s.useMemo)(()=>!(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))&&e.paymentMethod.crypto.error===o.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,[e]),F=(0,s.useMemo)(()=>{if(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))return!1;const{error:t}=e.paymentMethod.crypto;return t===o.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_ALLOWANCE||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_TOO_OLD||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_REVERTED||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_MAX_VERIFICATION_ATTEMPTS_REACHED},[e]);return{handlePaymentError:(0,s.useCallback)(async()=>{if(e&&v({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,errorCause:"payment_error",actionClicked:c.ShieldErrorStateActionClickedEnum.Cta,location:c.ShieldErrorStateLocationEnum.Settings,view:c.ShieldErrorStateViewEnum.Banner}),n)k({pathname:u.SHIELD_PLAN_ROUTE,search:`?source=${c.ShieldMetricsSourceEnum.ShieldSettings}`});else if(B)M();else if(e&&(0,l.isCryptoPaymentMethod)(e.paymentMethod))if($)g();else{if(!F)throw new Error("Unknown crypto error action");await R()}else await I()},[e,n,B,$,F,g,R,I,M,k,v]),handlePaymentErrorInsufficientFunds:(0,s.useCallback)(async()=>{$&&w&&await C()},[$,w,C]),handlePaymentMethodChange:(0,s.useCallback)(async(e,t)=>{try{if(e===o.PAYMENT_TYPES.byCard)await I();else if(e===o.PAYMENT_TYPES.byCrypto){if(!t)throw new Error("No token selected");x(t)}}catch(e){console.error("Error changing payment method",e)}},[I,x]),isUnexpectedErrorCryptoPayment:B,isInsufficientFundsCrypto:$,isAllowanceNeededCrypto:F,hasAvailableSelectedTokenToTriggerCheckInsufficientFunds:w,resultTriggerSubscriptionCheckInsufficientFunds:A,updateSubscriptionCardPaymentMethodResult:E,updateSubscriptionCryptoPaymentMethodResult:O,currentToken:T}}}}},{package:"$root$",file:"ui/hooks/subscription/useHandlePayment.ts"}],[7274,{"../../../shared/constants/metametrics":5892,"../../../shared/constants/subscriptions":5910,"../../../shared/lib/shield":5993,"../../../shared/lib/ui-utils":6006,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/selectors/networks":6034,"../../../shared/modules/shield":6041,"../../../shared/modules/string-utils":6045,"../../ducks/metamask/metamask":7137,"../../helpers/constants/routes":7154,"../../helpers/utils/window":7209,"../../pages/confirmations/send-utils/send.utils":7875,"../../pages/settings/transaction-shield-tab/types":8133,"../../selectors":8207,"../../selectors/identity/authentication":8205,"../../selectors/multichain-accounts/account-tree":8211,"../../selectors/subscription":8236,"../../store/actions":8241,"../shield/metrics/useSubscriptionMetrics":7260,"../useAccountTotalFiatBalance":7278,"../useAsync":7281,"./useSubscriptionPricing":7275,"@metamask/subscription-controller":3023,"@metamask/transaction-controller":3085,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserSubscriptions=n.useUserSubscriptionByProduct=n.useUserLastSubscriptionByProduct=n.useUpdateSubscriptionCryptoPaymentMethod=n.useUpdateSubscriptionCardPaymentMethod=n.useUnCancelSubscription=n.useSubscriptionEligibility=n.useSubscriptionCryptoApprovalTransaction=n.useShieldRewards=n.useOpenGetSubscriptionBillingPortal=n.useHandleSubscriptionSupportAction=n.useHandleSubscription=n.useCancelSubscription=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("react"),i=e("@metamask/subscription-controller"),c=(s=e("loglevel"))&&s.__esModule?s:{default:s},u=e("react-router-dom"),l=e("@metamask/transaction-controller"),d=e("../../selectors/subscription"),m=e("../../store/actions"),p=e("../useAsync"),h=e("../../selectors/identity/authentication"),f=e("../../ducks/metamask/metamask"),g=e("../../../shared/lib/shield"),y=e("../../pages/confirmations/send-utils/send.utils"),S=e("../../../shared/modules/conversion.utils"),k=e("../../helpers/constants/routes"),v=e("../../selectors/multichain-accounts/account-tree"),b=e("../../selectors"),T=e("../shield/metrics/useSubscriptionMetrics"),w=e("../../../shared/constants/subscriptions"),C=e("../../../shared/modules/shield"),A=e("../../helpers/utils/window"),I=e("../../../shared/lib/ui-utils"),E=e("../../../shared/constants/metametrics"),M=e("../useAccountTotalFiatBalance"),_=e("../../../shared/modules/selectors/networks"),P=e("../../pages/settings/transaction-shield-tab/types"),N=e("../../../shared/modules/string-utils"),R=e("./useSubscriptionPricing");const x=e=>{const t=(0,r.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:s}=n,a=(0,o.useDispatch)(),i=(0,o.useSelector)(d.getUserSubscriptions);let c,u;t[2]!==a||t[3]!==s?(c=async()=>{if(s)return await a((0,m.getSubscriptions)())},u=[s,a],t[2]=a,t[3]=s,t[4]=c,t[5]=u):(c=t[4],u=t[5]);const l=(0,p.useAsyncResult)(c,u);let h;return t[6]!==l.error||t[7]!==l.pending||t[8]!==i?(h={...i,loading:l.pending,error:l.error},t[6]=l.error,t[7]=l.pending,t[8]=i,t[9]=h):h=t[9],h};n.useUserSubscriptions=x;n.useUserSubscriptionByProduct=(e,t)=>{const n=(0,r.c)(3);let s;return n[0]!==e||n[1]!==t?(s=null==t?void 0:t.find(t=>t.products.some(t=>t.name===e)),n[0]=e,n[1]=t,n[2]=s):s=n[2],s};n.useUserLastSubscriptionByProduct=(e,t)=>null!=t&&t.products.some(t=>t.name===e)?t:undefined;n.useCancelSubscription=e=>{const t=(0,r.c)(14),n=(0,o.useDispatch)(),{captureShieldMembershipCancelledEvent:s}=(0,T.useSubscriptionMetrics)();let a;t[0]!==e?(a=e?(0,g.getSubscriptionDurationInDays)(e):0,t[0]=e,t[1]=a):a=t[1];const i=a;let c;t[2]!==s||t[3]!==i||t[4]!==e?(c=(t,n)=>{if(!e)return;const{cryptoPaymentChain:r,cryptoPaymentCurrency:o}=(0,g.getSubscriptionPaymentData)(e);s({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:r,cryptoPaymentCurrency:o,cancellationStatus:t,errorMessage:n,latestSubscriptionDuration:i})},t[2]=s,t[3]=i,t[4]=e,t[5]=c):c=t[5];const u=c;let l,d;return t[6]!==n||t[7]!==e||t[8]!==u?(l=async()=>{try{if(!e)return;const t=e.id;await n((0,m.cancelSubscription)({subscriptionId:t})),u("succeeded")}catch(e){const t=e,n=t instanceof Error?t.message:"Unknown error";throw u("failed",n),t}},t[6]=n,t[7]=e,t[8]=u,t[9]=l):l=t[9],t[10]!==s||t[11]!==n||t[12]!==e?(d=[n,e,s],t[10]=s,t[11]=n,t[12]=e,t[13]=d):d=t[13],(0,p.useAsyncCallback)(l,d)};n.useUnCancelSubscription=e=>{const t=(0,o.useDispatch)(),{captureShieldSubscriptionRestartRequestEvent:n}=(0,T.useSubscriptionMetrics)(),s=(0,a.useCallback)((t,s)=>{if(!e)return;const{cryptoPaymentChain:r,cryptoPaymentCurrency:o}=(0,g.getSubscriptionPaymentData)(e);n({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:r,cryptoPaymentCurrency:o,requestStatus:t,errorMessage:s})},[n,e]);return(0,p.useAsyncCallback)(async()=>{try{const n=null==e?void 0:e.id;if(!n)return;await t((0,m.unCancelSubscription)({subscriptionId:n})),s("completed")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw s("failed",t),e}},[t,e,s])};n.useOpenGetSubscriptionBillingPortal=e=>{const t=(0,r.c)(7),n=(0,o.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:s}=(0,T.useSubscriptionMetrics)();let a;t[0]!==s||t[1]!==e?(a=()=>{if(!e)return;const{cryptoPaymentChain:t,cryptoPaymentCurrency:n}=(0,g.getSubscriptionPaymentData)(e);s({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:t,cryptoPaymentCurrency:n},E.MetaMetricsEventName.ShieldBillingHistoryOpened)},t[0]=s,t[1]=e,t[2]=a):a=t[2];const i=a;let c,u;return t[3]!==n||t[4]!==i?(c=async()=>{const{url:e}=await n((0,m.getSubscriptionBillingPortalUrl)());return i(),await platform.openTab({url:e})},u=[n,i],t[3]=n,t[4]=i,t[5]=c,t[6]=u):(c=t[5],u=t[6]),(0,p.useAsyncCallback)(c,u)};n.useUpdateSubscriptionCardPaymentMethod=e=>{const t=(0,r.c)(6),{subscription:n,newRecurringInterval:s}=e,a=(0,o.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:c}=(0,T.useSubscriptionMetrics)();let u,l;return t[0]!==c||t[1]!==a||t[2]!==s||t[3]!==n?(u=async()=>{if(!n||!s)throw new Error("Subscription ID and recurring interval are required");const e=n.id;await a((0,m.updateSubscriptionCardPaymentMethod)({subscriptionId:e,paymentType:i.PAYMENT_TYPES.byCard,recurringInterval:s})),c({subscriptionStatus:n.status,paymentType:n.paymentMethod.type,billingInterval:s},E.MetaMetricsEventName.ShieldPaymentMethodUpdated)},l=[a,n,s,c],t[0]=c,t[1]=a,t[2]=s,t[3]=n,t[4]=u,t[5]=l):(u=t[4],l=t[5]),(0,p.useAsyncCallback)(u,l)};const O=e=>{const t=(0,r.c)(12),n=(0,u.useNavigate)(),{subscriptionPricing:s}=(0,R.useSubscriptionPricing)(),i=(0,o.useSelector)(D),c=(0,o.useSelector)(_.getNetworkConfigurationsByChainId),d=(0,o.useSelector)(b.getUnapprovedConfirmations).length>0,[p,h]=(0,a.useState)(!1);let f,g,v;t[0]!==d||t[1]!==n||t[2]!==p?(f=()=>{d&&p&&n(k.CONFIRM_TRANSACTION_ROUTE)},g=[d,p,n],t[0]=d,t[1]=n,t[2]=p,t[3]=f,t[4]=g):(f=t[3],g=t[4]),(0,a.useEffect)(f,g),t[5]!==(null==i?void 0:i.address)||t[6]!==c||t[7]!==e||t[8]!==s?(v=async()=>{var t,n;if(!s)throw new Error("Subscription pricing not found");if(!e)throw new Error("No token selected");const r=c[e.chainId],o=null==r||null===(t=r.rpcEndpoints[r.defaultRpcEndpointIndex??0])||void 0===t?void 0:t.networkClientId,a=null==s||null===(n=s.paymentMethods)||void 0===n||null===(n=n.find(B))||void 0===n||null===(n=n.chains)||void 0===n||null===(n=n.find(t=>t.chainId===(null==e?void 0:e.chainId)))||void 0===n?void 0:n.paymentAddress,u=(0,y.generateERC20ApprovalData)({spenderAddress:a,amount:(0,S.decimalToHex)(e.approvalAmount.approveAmount)}),d={from:null==i?void 0:i.address,to:e.address,value:"0x0",data:u};d.gas=await(0,m.estimateGas)(d);const p={type:l.TransactionType.shieldSubscriptionApprove,networkClientId:o};await(0,m.addTransaction)(d,p),h(!0)},t[5]=null==i?void 0:i.address,t[6]=c,t[7]=e,t[8]=s,t[9]=v):v=t[9];const T=v;let w;return t[10]!==T?(w={execute:T},t[10]=T,t[11]=w):w=t[11],w};n.useSubscriptionCryptoApprovalTransaction=O;n.useSubscriptionEligibility=e=>{const t=(0,o.useDispatch)(),n=(0,o.useSelector)(h.selectIsSignedIn),s=(0,o.useSelector)(f.getIsUnlocked),r=(0,o.useSelector)(e=>(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")),{totalFiatBalance:i}=(0,M.useAccountTotalFiatBalance)(r,!1,!0);return{getSubscriptionEligibility:(0,a.useCallback)(async()=>{try{if(!n||!s)return undefined;const r=(0,C.getUserBalanceCategory)(Number(i)),o=await t((0,m.getSubscriptions)());if(!(0,g.getIsShieldSubscriptionActive)(o)){return(await t((0,m.getSubscriptionsEligibilities)({balanceCategory:r}))).find(t=>t.product===e)}return undefined}catch(e){return c.default.warn("[useSubscriptionEligibility] error",e),undefined}},[n,s,t,e,i])}};n.useHandleSubscription=e=>{const t=(0,r.c)(39),{selectedPaymentMethod:n,selectedToken:s,selectedPlan:a,defaultOptions:c,isTrialed:l,useTestClock:d,rewardPoints:h}=e,f=d!==undefined&&d,g=(0,o.useDispatch)(),{search:y}=(0,u.useLocation)(),{execute:S}=O(s),{lastSubscription:k}=x(),{captureShieldSubscriptionRequestEvent:v,setShieldSubscriptionMetricsPropsToBackground:A}=(0,T.useSubscriptionMetrics)(),I=(0,o.useSelector)(b.getModalTypeForShieldEntryModal),E=k?w.ShieldSubscriptionRequestSubscriptionStateEnum.Renew:w.ShieldSubscriptionRequestSubscriptionStateEnum.New;let M;t[0]!==y?(M=()=>{const e=(0,C.getShieldMarketingUtmParamsForMetrics)(y),t=(0,C.determineSubscriptionMetricsSourceFromMarketingUtmParams)(e);if(t)return t;switch(new URLSearchParams(y).get("source")){case"homepage":return w.ShieldMetricsSourceEnum.Homepage;case"post_transaction":return w.ShieldMetricsSourceEnum.PostTransaction;case"notification":return w.ShieldMetricsSourceEnum.Notification;case"carousel":return w.ShieldMetricsSourceEnum.Carousel;case"marketing":return w.ShieldMetricsSourceEnum.Marketing;default:return w.ShieldMetricsSourceEnum.Settings}},t[0]=y,t[1]=M):M=t[1];const _=M;let P;t[2]!==v||t[3]!==c||t[4]!==_||t[5]!==g||t[6]!==S||t[7]!==l||t[8]!==E||t[9]!==I||t[10]!==h||t[11]!==y||t[12]!==n||t[13]!==a||t[14]!==(null==s?void 0:s.address)||t[15]!==(null==s?void 0:s.symbol)||t[16]!==A||t[17]!==f?(P=async()=>{await g((0,m.setLastUsedSubscriptionPaymentDetails)(i.PRODUCT_TYPES.SHIELD,{type:n,paymentTokenAddress:null==s?void 0:s.address,paymentTokenSymbol:null==s?void 0:s.symbol,plan:a,useTestClock:f}));const e=(0,C.getShieldMarketingUtmParamsForMetrics)(y);await g((0,m.setDefaultSubscriptionPaymentOptions)(c)),await A({source:_(),marketingUtmParams:e,rewardPoints:h});const t=_(),r={subscriptionState:E,defaultPaymentType:c.defaultPaymentType,defaultPaymentCurrency:c.defaultPaymentCurrency,defaultBillingInterval:c.defaultBillingInterval,defaultPaymentChain:c.defaultPaymentChain,paymentType:n,paymentCurrency:"USD",isTrialSubscription:!l,billingInterval:a,source:t,type:I,marketingUtmParams:e};if(n===i.PAYMENT_TYPES.byCard){v({...r,paymentCurrency:"USD",requestStatus:"started"});try{await g((0,m.startSubscriptionWithCard)({products:[i.PRODUCT_TYPES.SHIELD],isTrialRequested:!l,recurringInterval:a,useTestClock:f}))}catch(e){const t=e;if(!(t instanceof Error&&t.message.toLowerCase().includes(C.SHIELD_ERROR.tabActionFailed.toLowerCase())))throw t;console.error("[useHandleSubscription error]:",t)}}else n===i.PAYMENT_TYPES.byCrypto&&await S()},t[2]=v,t[3]=c,t[4]=_,t[5]=g,t[6]=S,t[7]=l,t[8]=E,t[9]=I,t[10]=h,t[11]=y,t[12]=n,t[13]=a,t[14]=null==s?void 0:s.address,t[15]=null==s?void 0:s.symbol,t[16]=A,t[17]=f,t[18]=P):P=t[18];const N=null==s?void 0:s.address,R=null==s?void 0:s.symbol;let D;t[19]!==v||t[20]!==c||t[21]!==_||t[22]!==g||t[23]!==S||t[24]!==l||t[25]!==E||t[26]!==I||t[27]!==h||t[28]!==y||t[29]!==n||t[30]!==a||t[31]!==A||t[32]!==N||t[33]!==R||t[34]!==f?(D=[g,n,N,R,a,f,y,c,A,_,h,E,l,I,v,S],t[19]=v,t[20]=c,t[21]=_,t[22]=g,t[23]=S,t[24]=l,t[25]=E,t[26]=I,t[27]=h,t[28]=y,t[29]=n,t[30]=a,t[31]=A,t[32]=N,t[33]=R,t[34]=f,t[35]=D):D=t[35];const[B,$]=(0,p.useAsyncCallback)(P,D);let F;return t[36]!==B||t[37]!==$?(F={handleSubscription:B,subscriptionResult:$},t[36]=B,t[37]=$,t[38]=F):F=t[38],F};n.useHandleSubscriptionSupportAction=()=>{var e;const t=(0,r.c)(6),n=(0,o.useSelector)(h.selectSessionData),s=null==n||null===(e=n.profile)||void 0===e?void 0:e.profileId,a=(0,o.useSelector)(b.getMetaMetricsId),{customerId:i}=x();let c;t[0]!==a||t[1]!==s||t[2]!==i?(c=()=>{let e=I.SUPPORT_LINK;const t=new URLSearchParams;t.append("metamask_version","13.16.3"),s&&t.append("metamask_profile_id",s),a&&t.append("metamask_metametrics_id",a),i&&t.append("shield_id",i);const n=t.toString();n&&(e+=`?${n}`),(0,A.openWindow)(e)},t[0]=a,t[1]=s,t[2]=i,t[3]=c):c=t[3];const u=c;let l;return t[4]!==u?(l={handleClickContactSupport:u},t[4]=u,t[5]=l):l=t[5],l};n.useUpdateSubscriptionCryptoPaymentMethod=e=>{const t=(0,r.c)(13),{subscription:n}=e,s=(0,o.useDispatch)(),[c,u]=(0,a.useState)(),{execute:l}=O(c);let d,h;t[0]!==s||t[1]!==l||t[2]!==c||t[3]!==n?(d=async()=>{if(!n)throw new Error("No subscription exist");if(!(0,P.isCryptoPaymentMethod)(n.paymentMethod))throw new Error("Subscription is not a crypto payment method");if(!c)throw new Error("No token selected");await s((0,m.setLastUsedSubscriptionPaymentDetails)(i.PRODUCT_TYPES.SHIELD,{type:i.PAYMENT_TYPES.byCrypto,paymentTokenAddress:c.address,paymentTokenSymbol:c.symbol,plan:n.interval})),await l()},h=[n,l,s,c],t[0]=s,t[1]=l,t[2]=c,t[3]=n,t[4]=d,t[5]=h):(d=t[4],h=t[5]);const[f,g]=(0,p.useAsyncCallback)(d,h),y=null==c?void 0:c.address;let S,k,v;t[6]!==f||t[7]!==y?(S=()=>{y&&f().then(()=>{u(undefined)})},k=[y,f],t[6]=f,t[7]=y,t[8]=S,t[9]=k):(S=t[8],k=t[9]),(0,a.useEffect)(S,k),t[10]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{if(!e)throw new Error("No token selected");u(e)},t[10]=v):v=t[10];const b=v;let T;return t[11]!==g?(T={execute:b,result:g},t[11]=g,t[12]=T):T=t[12],T};function D(e){return(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}function B(e){return e.type===i.PAYMENT_TYPES.byCrypto}n.useShieldRewards=()=>{const e=(0,r.c)(24),t=(0,o.useDispatch)(),[n]=(0,o.useSelector)(b.getMetaMaskHdKeyrings),s=(0,o.useSelector)(b.getUpdatedAndSortedAccountsWithCaipAccountId);let a;e:{if(!n){a=null;break e}let t;if(e[0]!==s||e[1]!==n){let r;e[3]!==n?(r=e=>{var t;const s=null===(t=e.options)||void 0===t?void 0:t.entropySource;return"string"==typeof s&&(0,N.isEqualCaseInsensitive)(s,n.metadata.id)},e[3]=n,e[4]=r):r=e[4],t=s.find(r),e[0]=s,e[1]=n,e[2]=t}else t=e[2];t?a=t.caipAccountId:a=null}const i=a;let c,u;e[5]!==i||e[6]!==t?(c=async()=>{if(!i)return!1;return await t((0,m.getRewardsHasAccountOptedIn)(i))},e[5]=i,e[6]=t,e[7]=c):c=e[7],e[8]!==i?(u=[i],e[8]=i,e[9]=u):u=e[9];const{value:l,pending:d,error:h}=(0,p.useAsyncResult)(c,u);let f,g;e[10]!==i||e[11]!==t?(f=async()=>{if(!i)return{monthly:null,yearly:null};const[e,n]=await Promise.all([t((0,m.estimateRewardsPoints)({activityType:"SHIELD",account:i,activityContext:{shieldContext:{recurringInterval:"month"}}})),t((0,m.estimateRewardsPoints)({activityType:"SHIELD",account:i,activityContext:{shieldContext:{recurringInterval:"year"}}}))]);return{monthly:(null==e?void 0:e.pointsEstimate)??null,yearly:(null==n?void 0:n.pointsEstimate)??null}},g=[t,i],e[10]=i,e[11]=t,e[12]=f,e[13]=g):(f=e[12],g=e[13]);const{value:y,pending:S,error:k}=(0,p.useAsyncResult)(f,g);let v,T;e[14]!==t?(v=async()=>{const e=await t((0,m.getRewardsSeasonMetadata)("current"));if(!e)return!1;const n=Date.now();return n>=e.startDate&&n<=e.endDate},T=[t],e[14]=t,e[15]=v,e[16]=T):(v=e[15],T=e[16]);const{value:w,pending:C,error:A}=(0,p.useAsyncResult)(v,T);if(k||A||h){let t;return k&&console.error("[useShieldRewards error]:",k),A&&console.error("[useShieldRewards error]:",A),h&&console.error("[useShieldRewards error]:",h),e[17]===Symbol.for("react.memo_cache_sentinel")?(t={pending:!1,pointsMonthly:null,pointsYearly:null,isRewardsSeason:!1,hasAccountOptedIn:!1},e[17]=t):t=e[17],t}const I=S||C||d,E=(null==y?void 0:y.monthly)??null,M=(null==y?void 0:y.yearly)??null,_=w??!1,P=l??!1;let R;return e[18]!==_||e[19]!==P||e[20]!==I||e[21]!==E||e[22]!==M?(R={pending:I,pointsMonthly:E,pointsYearly:M,isRewardsSeason:_,hasAccountOptedIn:P},e[18]=_,e[19]=P,e[20]=I,e[21]=E,e[22]=M,e[23]=R):R=e[23],R}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscription.ts"}],[7275,{"../../../shared/constants/transaction":5915,"../../selectors/assets":8199,"../../selectors/multichain-accounts/account-tree":8211,"../../selectors/subscription":8236,"../../store/actions":8241,"../useAsync":7281,"../useTokenBalances":7334,"bignumber.js":4064,loglevel:4948,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionProductPlans=n.useSubscriptionPricing=n.useSubscriptionPaymentMethods=n.useAvailableTokenBalances=void 0;var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("bignumber.js"),c=e("../../selectors/subscription"),u=e("../../store/actions"),l=e("../../selectors/assets"),d=e("../useTokenBalances"),m=e("../../../shared/constants/transaction"),p=e("../useAsync"),h=e("../../selectors/multichain-accounts/account-tree");n.useAvailableTokenBalances=e=>{const t=(0,r.c)(27),{paymentChains:n,price:s,productType:c}=e;let S;t[0]!==n?(S=null==n?void 0:n.map(f),t[0]=n,t[1]=S):S=t[1];const k=S;let v;t[2]!==n?(v=null==n?void 0:n.reduce(g,{}),t[2]=n,t[3]=v):v=t[3];const b=v,T=(0,o.useSelector)(h.getSelectedAccountGroup),[w]=(0,o.useSelector)(y),C=(null==w?void 0:w.id)??T;let A;t[4]!==C?(A=e=>(0,h.getInternalAccountByGroupAndCaip)(e,C,"eip155:1"),t[4]=C,t[5]=A):A=t[5];const I=(0,o.useSelector)(A);let E;t[6]!==(null==I?void 0:I.address)?(E=e=>(0,l.getTokenBalancesEvm)(e,null==I?void 0:I.address),t[6]=null==I?void 0:I.address,t[7]=E):E=t[7];const M=(0,o.useSelector)(E);let _,P;if(t[8]!==k?(_={chainIds:k},t[8]=k,t[9]=_):_=t[9],(0,d.useTokenBalances)(_),t[10]!==M||t[11]!==b){let e;t[13]!==b?(e=e=>{const t=null==b?void 0:b[e.chainId];if(!Boolean(t))return!1;if(!(null==t?void 0:t.some(t=>t.address.toLowerCase()===e.address.toLowerCase())))return!1;return!!(e.balance&&parseFloat(e.balance)>0)},t[13]=b,t[14]=e):e=t[14],P=M.filter(e),t[10]=M,t[11]=b,t[12]=P}else P=t[12];const N=P;let R,x;t[15]!==b||t[16]!==s||t[17]!==c||t[18]!==N?(R=async()=>{if(!s||!b)return[];const e=[];return(await Promise.all(N.map(e=>{var t;return(null==b||null===(t=b[e.chainId])||void 0===t?void 0:t.find(t=>t.address.toLowerCase()===e.address.toLowerCase()))?(0,u.getSubscriptionCryptoApprovalAmount)({chainId:e.chainId,paymentTokenAddress:e.address,productType:c,interval:s.interval}):(a.default.error("[useAvailableTokenBalances] tokenPaymentInfo not found",e),null)}))).forEach((t,n)=>{const r=N[n];if(!r.balance)return;const o=new i.BigNumber(r.balance),a=s.minBillingCyclesForBalance??1,c=new i.BigNumber(s.unitAmount).div(new i.BigNumber(10).pow(s.unitDecimals)).mul(a);t&&o.gte(c)&&e.push({...r,approvalAmount:{approveAmount:t.approveAmount,chainId:r.chainId,paymentAddress:t.paymentAddress,paymentTokenAddress:t.paymentTokenAddress},type:r.isNative?m.AssetType.native:m.AssetType.token})}),e},x=[s,c,b,N],t[15]=b,t[16]=s,t[17]=c,t[18]=N,t[19]=R,t[20]=x):(R=t[19],x=t[20]);const{value:O,pending:D,error:B}=(0,p.useAsyncResult)(R,x);let $,F;return t[21]!==O?($=O??[],t[21]=O,t[22]=$):$=t[22],t[23]!==B||t[24]!==D||t[25]!==$?(F={availableTokenBalances:$,pending:D,error:B},t[23]=B,t[24]=D,t[25]=$,t[26]=F):F=t[26],F};n.useSubscriptionPricing=e=>{const t=(0,r.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:s}=n,a=(0,o.useDispatch)(),i=(0,o.useSelector)(c.getSubscriptionPricing);let l,d;t[2]!==a||t[3]!==s?(l=async()=>{if(s)return await a((0,u.getSubscriptionPricing)())},d=[a,s],t[2]=a,t[3]=s,t[4]=l,t[5]=d):(l=t[4],d=t[5]);const{pending:m,error:h}=(0,p.useAsyncResult)(l,d);let f;return t[6]!==h||t[7]!==m||t[8]!==i?(f={subscriptionPricing:i,loading:m,error:h},t[6]=h,t[7]=m,t[8]=i,t[9]=f):f=t[9],f};n.useSubscriptionProductPlans=(e,t)=>{const n=(0,r.c)(3);let s;var o;n[0]!==(null==t?void 0:t.products)||n[1]!==e?(s=null==t||null===(o=t.products.find(t=>t.name===e))||void 0===o?void 0:o.prices,n[0]=null==t?void 0:t.products,n[1]=e,n[2]=s):s=n[2];return s};function f(e){return e.chainId}function g(e,t){return e[t.chainId]=t.tokens,e}function y(e){return(0,h.getAccountGroupsByAddress)(e,[""])}n.useSubscriptionPaymentMethods=(e,t)=>{const n=(0,r.c)(3);let s;return n[0]!==e||n[1]!==(null==t?void 0:t.paymentMethods)?(s=null==t?void 0:t.paymentMethods.find(t=>t.type===e),n[0]=e,n[1]=null==t?void 0:t.paymentMethods,n[2]=s):s=n[2],s}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscriptionPricing.ts"}],[7276,{"../../shared/lib/multichain/scope-utils":5987,"../selectors/multichain-accounts/account-tree":8211,"@metamask/chain-agnostic-permission":1459,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountGroupsForPermissions=n.supportsNamespaces=n.supportsChainIds=n.hasRequestedAccountIds=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/chain-agnostic-permission"),a=(e("react"),e("../selectors/multichain-accounts/account-tree")),i=e("../../shared/lib/multichain/scope-utils");const c=(e,t)=>e.accounts.some(e=>(0,i.hasChainIdSupport)(e.scopes,t));n.supportsChainIds=c;const u=(e,t)=>e.accounts.some(e=>(0,i.hasNamespaceSupport)(e.scopes,t));n.supportsNamespaces=u;const l=(e,t)=>e.accounts.some(e=>{try{return(0,o.isInternalAccountInPermittedAccountIds)(e,t)}catch{return!1}});n.hasRequestedAccountIds=l;n.useAccountGroupsForPermissions=(e,t,n,d)=>{const m=(0,s.c)(19),p=(0,r.useSelector)(a.getSelectedAccountGroup),h=(0,r.useSelector)(a.getAccountGroupWithInternalAccounts);let f;if(m[0]!==h||m[1]!==e||m[2]!==t||m[3]!==n||m[4]!==d||m[5]!==p){let s;m[7]!==p?(s=e=>e.id===p,m[7]=p,m[8]=s):s=m[8];const r=h.find(s),a=(0,o.getCaipAccountIdsFromCaip25CaveatValue)(e),g=new Set(d);let y=h;r&&(y=Array.from(new Set([r,...h])));const S=e=>{return t=a,e.accounts.some(e=>{try{return(0,o.isInternalAccountInPermittedAccountIds)(e,t)}catch{return!1}});var t},k=e=>n.length>0?c(e,n):u(e,g);let v;m[9]!==t?(v=e=>l(e,t),m[9]=t,m[10]=v):v=m[10];const b=v,T=y.filter(S),w=y.filter(e=>k(e)&&!b(e)),C=y.filter(e=>S(e)&&b(e)),A=y.filter(e=>k(e)&&b(e)),I=y.filter(e=>S(e)||b(e)),E=Array.from(new Set([...(0,i.getCaip25AccountIdsFromAccountGroupAndScope)(I,n)])),M=A.length>0,_=w.length>0;let P;m[11]===Symbol.for("react.memo_cache_sentinel")?(P=[],m[11]=P):P=m[11];let N=P;if(!M&&_){const e=r&&(n.length>0?c(r,n):u(r,g))?r:w[0];e&&(N=[e])}const R=new Set([...A,...N]);f={selectedAndRequestedAccountGroups:Array.from(R),supportedAccountGroups:Array.from(new Set([...A,...w])),connectedAccountGroups:Array.from(new Set([...C,...T])),connectedCaipAccountIds:a,connectedAccountGroupWithRequested:Array.from(new Set(I)),caipAccountIdsOfConnectedAndRequestedAccountGroups:E},m[0]=h,m[1]=e,m[2]=t,m[3]=n,m[4]=d,m[5]=p,m[6]=f}else f=m[6];const g=f;let y;return m[12]!==g.caipAccountIdsOfConnectedAndRequestedAccountGroups||m[13]!==g.connectedAccountGroupWithRequested||m[14]!==g.connectedAccountGroups||m[15]!==g.connectedCaipAccountIds||m[16]!==g.selectedAndRequestedAccountGroups||m[17]!==g.supportedAccountGroups?(y={connectedAccountGroups:g.connectedAccountGroups,supportedAccountGroups:g.supportedAccountGroups,existingConnectedCaipAccountIds:g.connectedCaipAccountIds,connectedAccountGroupWithRequested:g.connectedAccountGroupWithRequested,caipAccountIdsOfConnectedAndRequestedAccountGroups:g.caipAccountIdsOfConnectedAndRequestedAccountGroups,selectedAndRequestedAccountGroups:g.selectedAndRequestedAccountGroups},m[12]=g.caipAccountIdsOfConnectedAndRequestedAccountGroups,m[13]=g.connectedAccountGroupWithRequested,m[14]=g.connectedAccountGroups,m[15]=g.connectedCaipAccountIds,m[16]=g.selectedAndRequestedAccountGroups,m[17]=g.supportedAccountGroups,m[18]=y):y=m[18],y}}}},{package:"$root$",file:"ui/hooks/useAccountGroupsForPermissions.ts"}],[7277,{"../../shared/constants/network":5896,"../../shared/modules/conversion.utils":6015,"../../shared/modules/selectors/networks":6034,"../ducks/metamask/metamask":7137,"../helpers/utils/token-util":7203,"../selectors":8207,"ethereumjs-util":4430,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalCrossChainFiatBalance=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("ethereumjs-util"),a=(e("react"),e("../ducks/metamask/metamask")),i=e("../selectors"),c=e("../../shared/modules/conversion.utils"),u=e("../helpers/utils/token-util"),l=e("../../shared/modules/selectors/networks"),d=e("../../shared/constants/network");function m(e){return null!==e}function p(e){return e!==undefined}function h(e,t){const n=t.tokenFiatBalances.filter(p),s=(0,c.sumDecimals)(t.nativeFiatValue,...n);return e+(s.toNumber?s.toNumber():Number(s))}n.useAccountTotalCrossChainFiatBalance=(e,t)=>{const n=(0,s.c)(26),p=(0,r.useSelector)(l.getNetworkConfigurationsByChainId),f=(0,r.useSelector)(i.getEnabledNetworks);let g;n[0]!==f?(g=Object.assign({},...Object.values(f??{})),n[0]=f,n[1]=g):g=n[1];const y=g,S=(0,r.useSelector)(a.getCurrencyRates),k=(0,r.useSelector)(a.getCurrentCurrency),v=(0,r.useSelector)(i.getCrossChainTokenExchangeRates,r.shallowEqual),b=(0,r.useSelector)(i.getCrossChainMetaMaskCachedBalances);let T;n[2]!==v?(T={...v},n[2]=v,n[3]=T):T=n[3];const w=T;let C;if(n[4]!==y||n[5]!==t){let e;n[7]!==y?(e=e=>Object.keys(y).includes(e.chainId.toString())?e:null,n[7]=y,n[8]=e):e=n[8],C=t.map(e).filter(m),n[4]=y,n[5]=t,n[6]=C}else C=n[6];const A=C;let I,E;n[9]!==(null==e?void 0:e.address)||n[10]!==p||n[11]!==b||n[12]!==S||n[13]!==k||n[14]!==A||n[15]!==w?(I=()=>A.map(t=>{var n,s;const{tokensWithBalances:r}=t,a=d.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[t.chainId]??p[t.chainId].nativeCurrency,i=null==S||null===(n=S[a])||void 0===n?void 0:n.conversionRate,l=r.map(e=>{var n;const s=null==w||null===(n=w[t.chainId])||void 0===n?void 0:n[(0,o.toChecksumAddress)(e.address)];return(0,u.getTokenFiatAmount)(s,i,k,e.string,e.symbol,!1,!1)}),m=(null==b||null===(s=b[t.chainId])||void 0===s?void 0:s[null==e?void 0:e.address])??0,h=(0,c.getValueFromWeiHex)({value:m,toCurrency:k,conversionRate:i,numberOfDecimals:2});return{...t,tokenFiatBalances:l,nativeFiatValue:h}}),n[9]=null==e?void 0:e.address,n[10]=p,n[11]=b,n[12]=S,n[13]=k,n[14]=A,n[15]=w,n[16]=I):I=n[16],null==e||e.address,n[17]!==I?(E=I(),n[17]=I,n[18]=E):E=n[18];const M=E;let _;n[19]!==M?(_=M.reduce(h,0),n[19]=M,n[20]=_):_=n[20];const P=_;let N,R;return n[21]!==P?(N=P.toString(10),n[21]=P,n[22]=N):N=n[22],n[23]!==N||n[24]!==M?(R={totalFiatBalance:N,tokenFiatBalancesCrossChains:M},n[23]=N,n[24]=M,n[25]=R):R=n[25],R}}}},{package:"$root$",file:"ui/hooks/useAccountTotalCrossChainFiatBalance.ts"}],[7278,{"../../shared/modules/conversion.utils":6015,"../../shared/modules/selectors/networks":6034,"../ducks/metamask/metamask":7137,"../helpers/utils/confirm-tx.util":7175,"../helpers/utils/token-util":7203,"../helpers/utils/util":7207,"../selectors":8207,"./useTokenBalances":7334,"ethereumjs-util":4430,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalFiatBalance=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("ethereumjs-util"),a=(e("react"),e("../../shared/modules/selectors/networks")),i=e("../selectors"),c=e("../../shared/modules/conversion.utils"),u=e("../ducks/metamask/metamask"),l=e("../helpers/utils/confirm-tx.util"),d=e("../helpers/utils/token-util"),m=e("../helpers/utils/util"),p=e("./useTokenBalances");function h(e,t){const n=[];return t.forEach(t=>{const s=null==e?void 0:e[t.address.toLowerCase()];s&&n.push({...s,balance:t.balance,string:t.string,balanceError:t.balanceError})}),n}function f(e,t){return parseFloat(t.fiatBalance)-parseFloat(e.fiatBalance)}n.useAccountTotalFiatBalance=(e,t,n)=>{const g=(0,s.c)(53),y=n!==undefined&&n,S=(0,r.useSelector)(a.getCurrentChainId);let k=(0,r.useSelector)(u.getConversionRate);const v=(0,r.useSelector)(i.getUSDConversionRate);let b=(0,r.useSelector)(u.getCurrentCurrency);y&&(k=v,b="usd");const T=(0,r.useSelector)(i.getTokenExchangeRates,r.shallowEqual),w=(0,r.useSelector)(i.getConfirmationExchangeRates),C=(0,r.useSelector)(i.getMetaMaskCachedBalances),A=(null==C?void 0:C[null==e?void 0:e.address])??0,I=(0,c.getValueFromWeiHex)({value:A,toCurrency:b,conversionRate:k,numberOfDecimals:2}),E=(0,r.useSelector)(i.getAllTokens);let M;var _;(null==e||e.address,g[0]!==(null==e?void 0:e.address)||g[1]!==S||g[2]!==E)?(M=(null==E||null===(_=E[S])||void 0===_?void 0:_[null==e?void 0:e.address])??[],g[0]=null==e?void 0:e.address,g[1]=S,g[2]=E,g[3]=M):M=g[3];const P=M,N=(0,r.useSelector)(i.getTokenList),R=(0,r.useSelector)(i.getNativeCurrencyImage),x=(0,r.useSelector)(u.getNativeCurrency),O=null==e?void 0:e.address;let D;g[4]!==S||g[5]!==t||g[6]!==O||g[7]!==P?(D={chainId:S,tokens:P,address:O,hideZeroBalanceTokens:t},g[4]=S,g[5]=t,g[6]=O,g[7]=P,g[8]=D):D=g[8];const{tokensWithBalances:B}=(0,p.useTokenTracker)(D);let $;g[9]!==w||g[10]!==T?($={...T,...w},g[9]=w,g[10]=T,g[11]=$):$=g[11];const F=$;let U;if(g[12]!==k||g[13]!==b||g[14]!==F||g[15]!==B){let e;g[17]!==k||g[18]!==b||g[19]!==F?(e=e=>{const t=F[(0,o.toChecksumAddress)(e.address)];return(0,d.getTokenFiatAmount)(t,k,b,e.string,e.symbol,!1,!1)},g[17]=k,g[18]=b,g[19]=F,g[20]=e):e=g[20],U=B.map(e),g[12]=k,g[13]=b,g[14]=F,g[15]=B,g[16]=U}else U=g[16];const L=U,j=h;let H;g[21]!==N||g[22]!==B?(H=j(N,B),g[21]=N,g[22]=B,g[23]=H):H=g[23];const G=H;let W;g[24]!==x||g[25]!==I||g[26]!==R?(W={iconUrl:R,symbol:x,fiatBalance:I},g[24]=x,g[25]=I,g[26]=R,g[27]=W):W=g[27];const q=W;let Y,V;g[28]!==G||g[29]!==L?(Y=G.map((e,t)=>({...e,fiatBalance:L[t]})),g[28]=G,g[29]=L,g[30]=Y):Y=g[30],g[31]!==q||g[32]!==Y?(V=[q,...Y],g[31]=q,g[32]=Y,g[33]=V):V=g[33];const K=V;let Q;g[34]!==K?(Q=K.sort(f),g[34]=K,g[35]=Q):Q=g[35];const J=Q;let z,Z,X,ee;g[36]!==k||g[37]!==b||g[38]!==F||g[39]!==I||g[40]!==L||g[41]!==B?(ee=(0,c.sumDecimals)(I,...L).toString(10),B.forEach(e=>{e.string=(0,m.roundToDecimalPlacesRemovingExtraZeroes)(e.string,5);const t=F[(0,o.toChecksumAddress)(e.address)];e.tokenFiatAmount=(0,d.getTokenFiatAmount)(t,k,b,e.string,e.symbol,!1,!1)||"0"}),Z=B,z=(0,l.formatCurrency)(ee,b),X=(0,c.getWeiHexFromDecimalValue)({value:ee,fromCurrency:b,conversionRate:k,invertConversionRate:!0}),g[36]=k,g[37]=b,g[38]=F,g[39]=I,g[40]=L,g[41]=B,g[42]=z,g[43]=Z,g[44]=X,g[45]=ee):(z=g[42],Z=g[43],X=g[44],ee=g[45]);let te,ne=X;return"NaN"===ne&&(ne="0x0"),g[46]!==z||g[47]!==Z||g[48]!==F||g[49]!==J||g[50]!==ee||g[51]!==ne?(te={formattedFiat:z,totalWeiBalance:ne,totalFiatBalance:ee,tokensWithBalances:Z,loading:!1,orderedTokenList:J,mergedRates:F},g[46]=z,g[47]=Z,g[48]=F,g[49]=J,g[50]=ee,g[51]=ne,g[52]=te):te=g[52],te}}}},{package:"$root$",file:"ui/hooks/useAccountTotalFiatBalance.js"}],[7279,{"../ducks/confirm-alerts/confirm-alerts":7129,"../helpers/constants/design-system":7149,"../selectors/alerts":8197,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),r=e("react"),o=e("../selectors/alerts"),a=e("../ducks/confirm-alerts/confirm-alerts"),i=e("../helpers/constants/design-system");function c(e){const t={[i.Severity.Danger]:3,[i.Severity.Warning]:2,[i.Severity.Info]:1,[i.Severity.Success]:0,[i.Severity.Disabled]:0};return[...e].sort((e,n)=>t[n.severity]-t[e.severity])}n.default=e=>{const t=(0,s.useDispatch)(),n=c((0,s.useSelector)(t=>(0,o.selectAlerts)(t,e))),u=(0,s.useSelector)(t=>(0,o.selectConfirmedAlertKeys)(t,e)),l=c((0,s.useSelector)(t=>(0,o.selectGeneralAlerts)(t,e))),d=c((0,s.useSelector)(t=>(0,o.selectFieldAlerts)(t,e))),m=n.filter(e=>!e.hideFromAlertNavigation),p=l.filter(e=>!e.hideFromAlertNavigation),h=d.filter(e=>!e.hideFromAlertNavigation),f=(0,r.useCallback)(e=>e?n.filter(t=>t.field===e):[],[n]),g=(0,r.useCallback)(e=>e?n.filter(t=>t.field===e&&!t.hideFromAlertNavigation):[],[n]),y=(0,r.useCallback)((n,s)=>{t((0,a.setAlertConfirmed)(e,n,s))},[t,e]),S=(0,r.useCallback)(e=>u.includes(e),[u]),k=n.filter(e=>!S(e.key)&&e.severity===i.Severity.Danger&&!e.acknowledgeBypass),v=n.length>0,b=n.filter(e=>e.severity===i.Severity.Danger),T=k.length>0,w=d.filter(e=>!S(e.key)&&e.severity===i.Severity.Danger&&!e.acknowledgeBypass);return{alerts:n,fieldAlerts:d,generalAlerts:l,getFieldAlerts:f,getNavigableFieldAlerts:g,hasAlerts:v,dangerAlerts:b,hasDangerAlerts:(null==b?void 0:b.length)>0,hasUnconfirmedDangerAlerts:T,isAlertConfirmed:S,navigableAlerts:m,navigableFieldAlerts:h,navigableGeneralAlerts:p,setAlertConfirmed:y,unconfirmedDangerAlerts:k,unconfirmedFieldDangerAlerts:w,hasUnconfirmedFieldDangerAlerts:w.length>0}}}}},{package:"$root$",file:"ui/hooks/useAlerts.ts"}],[7280,{"../selectors":8207,"../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAssetsUpdateAllAccountBalances=n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../store/actions");const c=()=>{const e=(0,s.c)(11),t=(0,o.useSelector)(a.getEnabledChainIds),n=(0,o.useDispatch)();let c;e[0]!==n||e[1]!==t?(c=async()=>{try{t.length>0&&await n((0,i.updateBalancesFoAccounts)(t,!1))}catch(e){const t=e;console.warn("Error updating balances state for all accounts",t)}},e[0]=n,e[1]=t,e[2]=c):c=e[2];const u=c;let l,d,m;return e[3]!==t.length||e[4]!==u?(l=()=>{0!==t.length&&u()},e[3]=t.length,e[4]=u,e[5]=l):l=e[5],e[6]!==t||e[7]!==u?(d=[t,u],e[6]=t,e[7]=u,e[8]=d):d=e[8],(0,r.useEffect)(l,d),e[9]!==u?(m={updateBalances:u},e[9]=u,e[10]=m):m=e[10],m};n.useAssetsUpdateAllAccountBalances=c;n.default=c}}},{package:"$root$",file:"ui/hooks/useAssetsUpdateAllAccountBalances.ts"}],[7281,{react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RESULT_PENDING=n.RESULT_IDLE=n.RESULT_BASE=void 0,n.createErrorResult=c,n.createSuccessResult=i,n.useAsyncCallback=u,n.useAsyncResult=l,n.useAsyncResultOrThrow=function(e,t=[]){const n=l(e,t);if("error"===n.status)throw n.error;return n};var s=e("react");const r=n.RESULT_BASE={idle:!1,pending:!1,value:undefined,error:undefined},o=n.RESULT_IDLE={...r,status:"idle",idle:!0},a=n.RESULT_PENDING={...r,status:"pending",pending:!0};function i(e){return{...r,status:"success",value:e}}function c(e){return{...r,status:"error",error:e}}function u(e,t=[]){const[n,r]=(0,s.useState)(o),u=(0,s.useRef)(!0);(0,s.useEffect)(()=>()=>{u.current=!1},[]);return[(0,s.useCallback)(async()=>{if(u.current){r(a);try{const t=await e();u.current&&r(i(t))}catch(e){u.current&&r(c(e))}}},t),n]}function l(e,t=[]){const[n,r]=u(e,t);return(0,s.useEffect)(()=>{n()},[n]),"idle"===r.status?a:r}}}},{package:"$root$",file:"ui/hooks/useAsync.ts"}],[7282,{react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBrowserSupportsSidePanel=void 0;var s=e("react");n.useBrowserSupportsSidePanel=()=>{const[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{var e;if(null===(e=chrome)||void 0===e||null===(e=e.runtime)||void 0===e||!e.getContexts)return void t(!1);await chrome.runtime.getContexts({contextTypes:["SIDE_PANEL"]}),t(!0)}catch(e){console.log("Browser does not support sidepanel:",e),t(!1)}})()},[]),e}}}},{package:"$root$",file:"ui/hooks/useBrowserSupportsSidePanel.ts"}],[7283,{"../../../package.json":5871,"../../../shared/modules/environment":6019,semver:5688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchCarouselSlidesFromContentful=async function(){var e;const{accessToken:t,domain:n,environment:s,spaceId:r}=c();if(!r||!t)return{prioritySlides:[],regularSlides:[]};const o=new URL(`https://${n}/spaces/${r}/environments/${s}/entries`);o.searchParams.set("access_token",t),o.searchParams.set("content_type",i),o.searchParams.set("fields.showInExtension","true");const a=await fetch(o).then(e=>e.json()),l=(null===(e=a.includes)||void 0===e?void 0:e.Asset)||[],d=e=>{var t;const n=l.find(t=>{var n;return t.sys.id===(null==e||null===(n=e.sys)||void 0===n?void 0:n.id)}),s=(null==n||null===(t=n.fields)||void 0===t||null===(t=t.file)||void 0===t?void 0:t.url)||"";return s.startsWith("//")?`https:${s}`:s},m=[],p=[];for(const e of a.items){const{headline:t,teaser:n,image:s,linkUrl:r,undismissable:o,startDate:a,endDate:i,priorityPlacement:c,variableName:l,cardPlacement:h,extensionMinimumVersionNumber:f}=e.fields,g={id:`contentful-${e.sys.id}`,title:t,description:n,image:d(s),href:r,undismissable:o,dismissed:!1,startDate:a,endDate:i,priorityPlacement:c,variableName:l,cardPlacement:h};u(f)&&(c?m.push(g):p.push(g))}return{prioritySlides:m,regularSlides:p}},n.getContentfulEnvironmentDetails=void 0;var s=o(e("semver")),r=e("../../../shared/modules/environment");function o(e){return e&&e.__esModule?e:{default:e}}const a=o(e("../../../package.json")).default.version,i="promotionalBanner",c=()=>{const e="jdkgyfmyd9sw",t="mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",n=new URLSearchParams(window.location.search).get("previewToken");if(n)return{environment:"master",domain:"preview.contentful.com",accessToken:n,spaceId:e};return(0,r.isProduction)()?{environment:"master",domain:"cdn.contentful.com",accessToken:t,spaceId:e}:{environment:"dev",domain:"preview.contentful.com",accessToken:t,spaceId:e}};function u(e){if(!e)return!0;try{return s.default.gte(a,e)}catch{return!1}}n.getContentfulEnvironmentDetails=c}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/fetchCarouselSlidesFromContentful.ts"}],[7284,{"./useCarouselManagement":7285},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./useCarouselManagement");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))})}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/index.ts"}],[7285,{"../../selectors":8207,"../../store/actions":8241,"./fetchCarouselSlidesFromContentful":7283,"@metamask/profile-sync-controller/sdk":2610,"bignumber.js":4064,lodash:4940,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isActive=p,n.useCarouselManagement=void 0;var s,r=e("lodash"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("bignumber.js"),u=e("@metamask/profile-sync-controller/sdk"),l=e("../../store/actions"),d=e("../../selectors"),m=e("./fetchCarouselSlidesFromContentful");function p(e,t=new Date){const n=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null;return!(n&&t<n)&&!(s&&t>s)}n.useCarouselManagement=({testDate:e,enabled:t=!0}={})=>{const n=Boolean(!1),s=(0,a.useDispatch)(),h=(0,a.useSelector)(d.getSlides),f=(0,a.useSelector)(d.getRemoteFeatureFlags),g=(0,a.useSelector)(d.getSelectedAccountCachedBalance),y=(0,a.useSelector)(d.getSelectedInternalAccount),S=(0,a.useSelector)(d.getUseExternalServices),k=(0,a.useSelector)(d.getShowDownloadMobileAppSlide),v=(0,o.useRef)(),b=new c.BigNumber(g??"0x0").eq("0x0"),T=(null==f?void 0:f.contentfulCarouselEnabled)??!1,[w,C]=(0,o.useState)(!1),[A,I]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!(T&&S&&k))return C(!1),I(!0),()=>undefined;I(!1);let e=!1;return(async()=>{try{const n=await(0,l.getUserProfileLineage)();if(!e){var t;const e=Boolean(null==n||null===(t=n.lineage)||void 0===t?void 0:t.some(e=>e.agent===u.Platform.MOBILE));C(!e),I(!0)}}catch(t){e||(i.default.warn("Failed to fetch user profile lineage:",t),C(!1),I(!0))}})(),()=>{e=!0}},[y.address,S,k,T]),(0,o.useEffect)(()=>{if(!A)return;if(!t){const e=[];return void((0,r.isEqual)(v.current,e)||(s((0,l.updateSlides)(e)),v.current=e))}const n=async()=>{if(!T){const e=[];return void((0,r.isEqual)(v.current,e)||(s((0,l.updateSlides)(e)),v.current=e))}if(T)try{const{prioritySlides:t,regularSlides:n}=await(0,m.fetchCarouselSlidesFromContentful)(),o=[...t],a=[...n],i=t=>p(t,e?new Date(e):new Date),c=e=>e.map(e=>((e,t)=>{if(!e)return undefined;const n=t.find(t=>t.id===e.id);return{...e,dismissed:(null==n?void 0:n.dismissed)??!1,undismissable:e.undismissable||(null==n?void 0:n.undismissable)||!1}})(e,h)).filter(e=>Boolean(e)).filter(i),u=e=>"fund"===e.variableName?{...e,undismissable:b||e.undismissable}:e,d=e=>"downloadMobileApp"!==e.variableName||w,f=c(o).map(u).filter(d),g=function(e){const t=[],n=[];for(const s of e){const e=s.cardPlacement,r="string"==typeof e?Number(e):e;if("number"==typeof r&&Number.isFinite(r)){const e=Math.max(0,Math.floor(r)-1);e>=t.length&&(t.length=e+1),t[e]=s}else n.push(s)}let s=0;for(let e=0;e<t.length&&s<n.length;e++)t[e]||(t[e]=n[s],s+=1);for(;s<n.length;)t.push(n[s]),s+=1;return t.filter(Boolean)}(c(a).map(u).filter(d)),y=[...f,...g];(0,r.isEqual)(v.current,y)||(s((0,l.updateSlides)(y)),v.current=y)}catch(e){i.default.warn("Failed to fetch Contentful slides:",e),(0,r.isEqual)(v.current,[])||(s((0,l.updateSlides)([])),v.current=[])}};(async()=>{try{await n()}catch(e){i.default.warn("Failed to load carousel slides:",e)}})()},[t,s,b,T,e,n,h,A]),{slides:h}}}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/useCarouselManagement.ts"}],[7286,{"../../shared/constants/copy":5880,"../../shared/constants/time":5913,"./useTimeout":7333,"copy-to-clipboard":4244,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCopyToClipboard=function(e,t){const n=(0,r.c)(11),s=e===undefined?l:e;let i;n[0]!==t?(i=t===undefined?{expireClipboard:!0}:t,n[0]=t,n[1]=i):i=n[1];const d=i,[m,p]=(0,o.useState)(!1);let h;n[2]!==m||n[3]!==d?(h=()=>{!0===m&&(d.expireClipboard&&(0,a.default)(" ",c.COPY_OPTIONS),p(!1))},n[2]=m,n[3]=d,n[4]=h):h=n[4];const f=(0,u.useTimeout)(h,s,!1);let g;n[5]!==f?(g=e=>{p(!0),f(),(0,a.default)(e,c.COPY_OPTIONS)},n[5]=f,n[6]=g):g=n[6];const y=g;let S;n[7]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{p(!1)},n[7]=S):S=n[7];const k=S;let v;n[8]!==m||n[9]!==y?(v=[m,y,k],n[8]=m,n[9]=y,n[10]=v):v=n[10];return v};var s,r=e("react-compiler-runtime"),o=e("react"),a=(s=e("copy-to-clipboard"))&&s.__esModule?s:{default:s},i=e("../../shared/constants/time"),c=e("../../shared/constants/copy"),u=e("./useTimeout");const l=i.MINUTE}}},{package:"$root$",file:"ui/hooks/useCopyToClipboard.js"}],[7287,{"../../shared/constants/common":5879,"../../shared/constants/network":5896,"../../shared/lib/asset-utils":5925,"../../shared/modules/Numeric":6008,"../../shared/modules/conversion.utils":6015,"../ducks/metamask/metamask":7137,"../helpers/utils/confirm-tx.util":7175,"../helpers/utils/token-util":7203,"../selectors/multichain":8216,"./useFormatters":7297,"./useMultichainSelector":7311,"@metamask/multichain-network-controller":2406,"bignumber.js":4064,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,t,n){var s;const o=(0,r.c)(45);let S,b,T,w,C,A,I,E;o[0]!==t?(({account:S,displayValue:w,prefix:E,numberOfDecimals:A,denomination:T,currency:b,isAggregatedFiatOverviewBalance:C,...I}=t),o[0]=t,o[1]=S,o[2]=b,o[3]=T,o[4]=w,o[5]=C,o[6]=A,o[7]=I,o[8]=E):(S=o[1],b=o[2],T=o[3],w=o[4],C=o[5],A=o[6],I=o[7],E=o[8]);const M=n===undefined?null:n,{formatCurrency:_}=(0,g.useFormatters)(),P=(0,y.useMultichainSelector)(c.getMultichainIsEvm,S),N=(0,y.useMultichainSelector)(c.getMultichainCurrentCurrency,S),R=(0,y.useMultichainSelector)(c.getMultichainNativeCurrency,S),x=(0,y.useMultichainSelector)(c.getMultichainConversionRate,S),O=(0,y.useMultichainSelector)(f.getCurrencyRates,S),D=b===N,B=b===R||b===l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[M],$=M?(0,p.isEvmChainId)(M):P,F=M&&l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[M]||R,U=(null==O||null===(s=O[F])||void 0===s?void 0:s.conversionRate)??x;let L;e:{if(w){L=w;break e}if(!$&&!C){let t;o[9]!==U||o[10]!==F||o[11]!==b||o[12]!==N||o[13]!==e||o[14]!==B||o[15]!==D?(t=function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:s,currentCurrency:r,nativeCurrency:o,inputValue:a,conversionRate:c}){if(t||!n&&!o)return new d.Numeric(a,10).toString();if(n&&c){const t=(0,h.getTokenFiatAmount)(1,Number(c),r,a,e,!1,!1)??"0";return(0,i.formatCurrency)(t,s)}return null}({tokenSymbol:F,isNativeCurrency:B,isUserPreferredCurrency:D,currency:b,currentCurrency:N,nativeCurrency:F,inputValue:e,conversionRate:U}),o[9]=U,o[10]=F,o[11]=b,o[12]=N,o[13]=e,o[14]=B,o[15]=D,o[16]=t):t=o[16],L=t;break e}if(C){let t;o[17]!==b||o[18]!==_||o[19]!==e?(t=_(e,b),o[17]=b,o[18]=_,o[19]=e,o[20]=t):t=o[20],L=t;break e}if(!B&&D&&U){let t;if(o[21]!==U||o[22]!==F||o[23]!==b||o[24]!==T||o[25]!==_||o[26]!==e||o[27]!==A){t=_((0,u.getValueFromWeiHex)({value:e,fromCurrency:F,toCurrency:b,conversionRate:U,numberOfDecimals:A||2,toDenomination:T}),b),o[21]=U,o[22]=F,o[23]=b,o[24]=T,o[25]=_,o[26]=e,o[27]=A,o[28]=t}else t=o[28];L=t;break e}let t;o[29]!==F||o[30]!==T||o[31]!==e||o[32]!==B||o[33]!==D||o[34]!==A?(t=function({isNativeCurrency:e,isUserPreferredCurrency:t,nativeCurrency:n,inputValue:s,denomination:r,numberOfDecimals:o}){if(e||!t&&!n){const e=new d.Numeric(s,16,m.EtherDenomination.WEI).toDenomination(r||m.EtherDenomination.ETH).round(o||v).toBase(10).toString();return"0"===e&&s&&0!==Number(s)?k:e}return null}({isNativeCurrency:B,isUserPreferredCurrency:D,nativeCurrency:F,inputValue:e,denomination:T,numberOfDecimals:A}),o[29]=F,o[30]=T,o[31]=e,o[32]=B,o[33]=D,o[34]=A,o[35]=t):t=o[35],L=t}const j=L;let H;const G=C||!B;if(!I.hideLabel&&!G){let e;var W;if(o[36]!==b)e=[...Object.values(l.TEST_NETWORK_TICKER_MAP),...Object.values(a.MULTICHAIN_NETWORK_TICKER)].includes(b)?b:null===(W=b)||void 0===W?void 0:W.toUpperCase(),o[36]=b,o[37]=e;else e=o[37];const t=e;H=I.suffix||t}const q=`${E||""}${j}${H?` ${H}`:""}`;let Y,V;o[38]!==E||o[39]!==H||o[40]!==j?(Y={prefix:E,value:j,suffix:H},o[38]=E,o[39]=H,o[40]=j,o[41]=Y):Y=o[41];o[42]!==q||o[43]!==Y?(V=[q,Y],o[42]=q,o[43]=Y,o[44]=V):V=o[44];return V};var s,r=e("react-compiler-runtime"),o=(e("react"),(s=e("bignumber.js"))&&s.__esModule?s:{default:s}),a=e("@metamask/multichain-network-controller"),i=e("../helpers/utils/confirm-tx.util"),c=e("../selectors/multichain"),u=e("../../shared/modules/conversion.utils"),l=e("../../shared/constants/network"),d=e("../../shared/modules/Numeric"),m=e("../../shared/constants/common"),p=e("../../shared/lib/asset-utils"),h=e("../helpers/utils/token-util"),f=e("../ducks/metamask/metamask"),g=e("./useFormatters"),y=e("./useMultichainSelector");const S=n.MIN_AMOUNT=1e-6,k=`<${S}`,v=n.DEFAULT_PRECISION=new o.default(S).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[7288,{"../../shared/modules/selectors/networks":6034,"../ducks/metamask/metamask":7137,"../helpers/utils/isOriginalNativeTokenSymbol":7185,"../selectors":8207,"../selectors/multichain/networks":8218,"../store/actions":8241,"./usePolling":7321,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=e("../selectors"),c=e("../selectors/multichain/networks"),u=e("../store/actions"),l=e("../ducks/metamask/metamask"),d=e("../../shared/modules/selectors/networks"),m=e("../helpers/utils/isOriginalNativeTokenSymbol"),p=(s=e("./usePolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(()=>{const e=(0,a.useSelector)(l.getCompletedOnboarding),t=(0,a.useSelector)(l.getIsUnlocked),n=(0,a.useSelector)(i.getUseCurrencyRateCheck);return e&&t&&n})(),n=(e=>{const t=(0,r.c)(7),n=(0,a.useSelector)(d.getNetworkConfigurationsByChainId),s=(0,a.useSelector)(i.getUseSafeChainsListValidation);let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[0]=u):u=t[0];const[l,p]=(0,o.useState)(u),f=(0,a.useSelector)(c.getEnabledChainIds);let g,y;return t[1]!==f||t[2]!==e||t[3]!==n||t[4]!==s?(g=()=>{(async()=>{const t=(await Promise.all(Object.values(n).map(async t=>{const n=await(0,m.getOriginalNativeTokenSymbol)({chainId:t.chainId,useAPICall:s&&e});return f.includes(t.chainId)?n??t.nativeCurrency:null}))).filter(h),r=[...new Set(t)];p(r)})()},y=[e,n,f,s],t[1]=f,t[2]=e,t[3]=n,t[4]=s,t[5]=g,t[6]=y):(g=t[5],y=t[6]),(0,o.useEffect)(g,y),l})(t),s=t&&n.length>0;let f;e[0]!==s||e[1]!==n?(f={startPolling:u.currencyRateStartPolling,stopPollingByPollingToken:u.currencyRateStopPollingByPollingToken,input:n,enabled:s},e[0]=s,e[1]=n,e[2]=f):f=e[2],(0,p.default)(f)};function h(e){return null!==e}}}},{package:"$root$",file:"ui/hooks/useCurrencyRatePolling.ts"}],[7289,{"../../shared/constants/swaps":5911,"../../shared/modules/selectors/networks":6034,"../../shared/modules/string-utils":6045,"../ducks/metamask/metamask":7137,"../helpers/constants/routes":7154,"react-compiler-runtime":5272,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentAsset=function(){var e;const t=(0,s.c)(4);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n={path:`${c.ASSET_ROUTE}/:asset`,end:!0},t[0]=n):n=t[0];const d=(0,o.useMatch)(n),m=null==d||null===(e=d.params)||void 0===e?void 0:e.asset,p=(0,r.useSelector)(a.getTokens);let h;t[1]!==p||t[2]!==m?(h=m&&p.find(e=>{const{address:t}=e;return(0,l.isEqualCaseInsensitive)(t,m)}),t[1]=p,t[2]=m,t[3]=h):h=t[3];const f=h,g=(0,r.useSelector)(i.getCurrentChainId);return f??(u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[g]||u.ETH_SWAPS_TOKEN_OBJECT)};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("react-router-dom"),a=e("../ducks/metamask/metamask"),i=e("../../shared/modules/selectors/networks"),c=e("../helpers/constants/routes"),u=e("../../shared/constants/swaps"),l=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useCurrentAsset.js"}],[7290,{"../../shared/modules/transaction.utils":6047,"../store/actions":8241,"./useAsync":7281,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDecodedTransactionData=i,n.useDecodedTransactionDataValue=function(e){var t,n,r;const o=(0,s.c)(9),a=null==e||null===(t=e.txParams)||void 0===t?void 0:t.data,c=null==e||null===(n=e.txParams)||void 0===n?void 0:n.to,l=null==e?void 0:e.chainId;let d;o[0]!==a||o[1]!==c||o[2]!==l?(d={data:a,to:c,chainId:l},o[0]=a,o[1]=c,o[2]=l,o[3]=d):d=o[3];const m=i(d);let p;if(o[4]!==(null==m||null===(r=m.value)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)){var h,f;p=null==m||null===(h=m.value)||void 0===h||null===(h=h.data)||void 0===h||null===(h=h[0])||void 0===h||null===(h=h.params)||void 0===h||null===(h=h.find(u))||void 0===h?void 0:h.value,o[4]=null==m||null===(f=m.value)||void 0===f||null===(f=f.data)||void 0===f||null===(f=f[0])||void 0===f?void 0:f.params,o[5]=p}else p=o[5];const g=p;let y;o[6]!==m||o[7]!==g?(y={decodeResponse:m,value:g},o[6]=m,o[7]=g,o[8]=y):y=o[8];return y};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/transaction.utils")),o=e("../store/actions"),a=e("./useAsync");function i(e){const t=(0,s.c)(7);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{data:i,to:c,chainId:u}=n;let l,d;return t[2]!==u||t[3]!==i||t[4]!==c?(l=async()=>{if(i&&(0,r.hasTransactionData)(i)&&c&&u)return await(0,o.decodeTransactionData)({transactionData:i,chainId:u,contractAddress:c})},d=[i,c,u],t[2]=u,t[3]=i,t[4]=c,t[5]=l,t[6]=d):(l=t[5],d=t[6]),(0,a.useAsyncResult)(l,d)}const c=["value","_value","value_","amount","_amount","amount_"];function u(e){return c.includes(e.name??"")}}}},{package:"$root$",file:"ui/hooks/useDecodedTransactionData.ts"}],[7291,{"../../shared/constants/first-party-contracts":5884,"../../shared/modules/hexstring-utils":6023,"../ducks/domains":7131,"../helpers/utils/trust-signals":7205,"../pages/confirmations/selectors/accounts":7867,"../selectors":8207,"../selectors/multichain-accounts/account-tree":8211,"../selectors/nft":8220,"./useName":7313,"./useNftCollectionsMetadata":7315,"./useTrustSignals":7346,"@metamask/name-controller":2414,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=function(e){const t=(0,s.c)(2);let n;t[0]!==e?(n=[e],t[0]=e,t[1]=n):n=t[1];return y(n)[0]},n.useDisplayNames=y;var s=e("react-compiler-runtime"),r=e("@metamask/name-controller"),o=e("react-redux"),a=(e("react"),e("../../shared/constants/first-party-contracts")),i=e("../../shared/modules/hexstring-utils"),c=e("../ducks/domains"),u=e("../selectors"),l=e("../selectors/nft"),d=e("../helpers/utils/trust-signals"),m=e("../pages/confirmations/selectors/accounts"),p=e("../selectors/multichain-accounts/account-tree"),h=e("./useName"),f=e("./useNftCollectionsMetadata"),g=e("./useTrustSignals");function y(e){const t=(0,s.c)(21),n=(0,h.useNames)(e),y=e.map(({type:e,value:t,variation:n})=>{if(e!==r.NameType.ETHEREUM_ADDRESS)return undefined;const s=t.toLowerCase();return Object.keys(a.FIRST_PARTY_CONTRACT_NAMES).find(e=>{var t;const r=null===(t=a.FIRST_PARTY_CONTRACT_NAMES[e])||void 0===t?void 0:t[n];return(null==r?void 0:r.toLowerCase())===s})});let w;t[0]!==e?(w=e.map(S),t[0]=e,t[1]=w):w=t[1];const C=(0,g.useTrustSignals)(w),A=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(u.selectERC20TokensByChain);let a;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{var t;const{preferContractSymbol:s,type:o,value:a,variation:i}=e;if(o!==r.NameType.ETHEREUM_ADDRESS)return;const c=a.toLowerCase(),{iconUrl:u,name:l,symbol:d}=(null==n||null===(t=n[i])||void 0===t||null===(t=t.data)||void 0===t?void 0:t[c])??{};return{name:s&&d?d:l,image:u}},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=n,t[1]=e,t[2]=a}else a=t[2];return a}(e),I=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(l.getNftContractsByAddressByChain);let a;if(t[0]!==e||t[1]!==n){let s;t[3]!==n?(s=e=>{var t;const{type:s,value:o,variation:a}=e;if(s!==r.NameType.ETHEREUM_ADDRESS)return;const i=o.toLowerCase(),c=n[a];return null==c||null===(t=c[i])||void 0===t?void 0:t.name},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=e,t[1]=n,t[2]=a}else a=t[2];return a}(e),E=function(e){const t=(0,s.c)(7);let n;t[0]!==e?(n=e.filter(v).map(k),t[0]=e,t[1]=n):n=t[1];const o=n,a=(0,f.useNftCollectionsMetadata)(o);let i;if(t[2]!==e||t[3]!==a){let n;t[5]!==a?(n=e=>{var t;const{type:n,value:s,variation:o}=e;if(n!==r.NameType.ETHEREUM_ADDRESS)return;const i=null===(t=a[o])||void 0===t?void 0:t[s.toLowerCase()],c=!1!==(null==i?void 0:i.isSpam);if(!i||c)return;const{name:u,image:l}=i;return{name:u,image:l}},t[5]=a,t[6]=n):n=t[6],i=e.map(n),t[2]=e,t[3]=a,t[4]=i}else i=t[4];return i}(e),M=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(c.getDomainResolutions);let a;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{const{type:t,value:s}=e;if(t!==r.NameType.ETHEREUM_ADDRESS)return;const o=null==n?void 0:n.find(e=>(0,i.toChecksumHexAddress)(e.resolvedAddress)===(0,i.toChecksumHexAddress)(s));return null==o?void 0:o.domainName},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=n,t[1]=e,t[2]=a}else a=t[2];return a}(e),_=function(e,t){const n=(0,s.c)(19),a=(0,o.useSelector)(u.getIsMultichainAccountsState2Enabled),i=(0,o.useSelector)(p.getAccountTree);let c;n[0]!==i?(c=i??{},n[0]=i,n[1]=c):c=n[1];const{wallets:l}=c;let d;n[2]!==l?(d=Object.keys(l),n[2]=l,n[3]=d):d=n[3];const h=d.length>1;let f;n[4]!==e?(f=e.map(T).filter(b),n[4]=e,n[5]=f):f=n[5];const g=f;let y;n[6]!==g?(y=e=>{const t={};return g.forEach(n=>{const{address:s}=n;if(s){const n=(0,m.selectAccountGroupNameByInternalAccount)(e,s),r=(0,p.getWalletIdAndNameByAccountAddress)(e,s),o=(null==r?void 0:r.name)||null;t[s]={accountGroupName:n,walletName:o}}}),t},n[6]=g,n[7]=y):y=n[7];const S=(0,o.useSelector)(y);let k;if(n[8]!==h||n[9]!==a||n[10]!==t||n[11]!==S||n[12]!==e){let s;n[14]!==h||n[15]!==a||n[16]!==t||n[17]!==S?(s=(e,n)=>{const{type:s,value:o}=e,i=t[n],c=(null==S?void 0:S[o])||{accountGroupName:null,walletName:null};return s===r.NameType.ETHEREUM_ADDRESS&&a&&(null==i?void 0:i.origin)!==r.NameOrigin.API?{accountGroupName:c.accountGroupName,walletName:h?c.walletName:null}:{accountGroupName:null,walletName:null}},n[14]=h,n[15]=a,n[16]=t,n[17]=S,n[18]=s):s=n[18],k=e.map(s),n[8]=h,n[9]=a,n[10]=t,n[11]=S,n[12]=e,n[13]=k}else k=n[13];return k}(e,n);let P;if(t[2]!==_||t[3]!==M||t[4]!==A||t[5]!==y||t[6]!==n||t[7]!==E||t[8]!==e||t[9]!==C||t[10]!==I){let s;t[12]!==_||t[13]!==M||t[14]!==A||t[15]!==y||t[16]!==n||t[17]!==E||t[18]!==C||t[19]!==I?(s=(e,t)=>{const s=n[t],r=y[t],o=C[t],a=A[t],i=I[t],c=E[t],u=M[t],{accountGroupName:l,walletName:m}=_[t],p=m;let h=l||(null==s?void 0:s.name)||r||(null==c?void 0:c.name)||(null==a?void 0:a.name)||i||u||null;const f=Boolean(null==s?void 0:s.name),S=function(e,t,n){if(e===g.TrustSignalDisplayState.Malicious)return g.TrustSignalDisplayState.Malicious;if(t)return g.TrustSignalDisplayState.Petname;if(e===g.TrustSignalDisplayState.Warning)return g.TrustSignalDisplayState.Warning;if(n)return g.TrustSignalDisplayState.Recognized;if(e===g.TrustSignalDisplayState.Verified)return g.TrustSignalDisplayState.Verified;if(e===g.TrustSignalDisplayState.Unknown)return g.TrustSignalDisplayState.Unknown;return g.TrustSignalDisplayState.Unknown}(null==o?void 0:o.state,f,h),k=(null==c?void 0:c.image)||(null==a?void 0:a.image),v=(0,d.getTrustSignalIcon)(S),b=null==o?void 0:o.label;return null===h&&b&&(h=b),{contractDisplayName:null==a?void 0:a.name,displayState:S,hasPetname:f,icon:v,image:k,isAccount:null!==l,name:h,subtitle:p}},t[12]=_,t[13]=M,t[14]=A,t[15]=y,t[16]=n,t[17]=E,t[18]=C,t[19]=I,t[20]=s):s=t[20],P=e.map(s),t[2]=_,t[3]=M,t[4]=A,t[5]=y,t[6]=n,t[7]=E,t[8]=e,t[9]=C,t[10]=I,t[11]=P}else P=t[11];return P}function S(e){return{...e,chainId:e.variation}}function k(e){const{value:t,variation:n}=e;return{chainId:n,contractAddress:t}}function v(e){const{type:t}=e;return t===r.NameType.ETHEREUM_ADDRESS}function b(e){return null!==e.address}function T(e,t){const{type:n,value:s}=e;return{address:n===r.NameType.ETHEREUM_ADDRESS?s:null,originalIndex:t}}}}},{package:"$root$",file:"ui/hooks/useDisplayName.ts"}],[7292,{"../../shared/modules/conversion.utils":6015,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isTransactionEarliestNonce=function(e,t,n){if(!e||!t)return!1;return Number((0,r.hexToDecimal)(e))===n[t]},n.useEarliestNonceByChain=function(e){const t=(0,s.c)(2);let n;t[0]!==e?(n={},e.forEach(e=>{var t;const{nonce:s}=e,o=null===(t=e.initialTransaction)||void 0===t?void 0:t.chainId;if(s&&o){const e=Number((0,r.hexToDecimal)(s));(!(o in n)||e<n[o])&&(n[o]=e)}}),t[0]=e,t[1]=n):n=t[1];return n};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/conversion.utils"))}}},{package:"$root$",file:"ui/hooks/useEarliestNonceByChain.ts"}],[7293,{lodash:4940,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEqualityCheck=function(e,t){const n=(0,s.c)(5),a=t===undefined?o.isEqual:t,[i,c]=(0,r.useState)(e);let u,l;n[0]!==i||n[1]!==a||n[2]!==e?(u=()=>{a(e,i)||c(e)},l=[e,a,i],n[0]=i,n[1]=a,n[2]=e,n[3]=u,n[4]=l):(u=n[3],l=n[4]);return(0,r.useLayoutEffect)(u,l),i};var s=e("react-compiler-runtime"),r=e("react"),o=e("lodash")}}},{package:"$root$",file:"ui/hooks/useEqualityCheck.js"}],[7294,{"../../shared/modules/conversion.utils":6015,"../ducks/metamask/metamask":7137,"../helpers/utils/confirm-tx.util":7175,"../selectors":8207,"bignumber.js":4064,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEthFiatAmount=function(e,t,n){const s=(0,r.c)(11),d=t===undefined?{}:t,m=(0,o.useSelector)(u.getConversionRate),p=(0,o.useSelector)(u.getCurrentCurrency),h=(0,o.useSelector)(i.getShouldShowFiat),f=d.showFiat??h;let g;s[0]!==m||s[1]!==p||s[2]!==e?(g=(0,l.decEthToConvertedCurrency)(e,p,m),s[0]=m,s[1]=p,s[2]=e,s[3]=g):g=s[3];const y=g;if(!f||"ETH"===p.toUpperCase()||m<=0||e===undefined)return;const S=new a.default(e.toString()).times(m);if(e&&S.lt(new a.default(.01))&&S.greaterThan(new a.default(0))){let e;return s[4]!==p||s[5]!==n?(e=n?`< ${(0,c.formatCurrency)(.01,p)}`:`< ${(0,c.formatCurrency)(.01,p)} ${p.toUpperCase()}`,s[4]=p,s[5]=n,s[6]=e):e=s[6],e}let k;s[7]!==p||s[8]!==y||s[9]!==n?(k=n?(0,c.formatCurrency)(y,p):`${(0,c.formatCurrency)(y,p)} ${p.toUpperCase()}`,s[7]=p,s[8]=y,s[9]=n,s[10]=k):k=s[10];return k};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("../selectors"),c=e("../helpers/utils/confirm-tx.util"),u=e("../ducks/metamask/metamask"),l=e("../../shared/modules/conversion.utils")}}},{package:"$root$",file:"ui/hooks/useEthFiatAmount.js"}],[7295,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react");n.default=e=>{const t=(0,s.c)(6),[n,o]=(0,r.useState)(""),[a,i]=(0,r.useState)("");let c,u,l;return t[0]!==e?(c=()=>{(async()=>{if(e)try{const t=await fetch(e);if(!t.ok)return;let n=await t.text();n=n.replace(/,\s*}/g,"}").replace(/,\s*\]/g,"]");const s=JSON.parse(n);o(s.image),i(s.name)}catch{}})()},u=[e],t[0]=e,t[1]=c,t[2]=u):(c=t[1],u=t[2]),(0,r.useEffect)(c,u),t[3]!==n||t[4]!==a?(l={image:n,name:a},t[3]=n,t[4]=a,t[5]=l):l=t[5],l}}}},{package:"$root$",file:"ui/hooks/useFetchNftDetailsFromTokenURI.ts"}],[7296,{"../ducks/locale/locale":7136,"../ducks/metamask/metamask":7137,"../helpers/utils/util":7207,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFiatFormatter=void 0;var s=e("react-redux"),r=e("../ducks/locale/locale"),o=e("../ducks/metamask/metamask"),a=e("../helpers/utils/util");n.useFiatFormatter=()=>{const e=(0,s.useSelector)(r.getIntlLocale),t=(0,s.useSelector)(o.getCurrentCurrency);return(n,s={})=>{const{shorten:r,truncatedCharLimit:o,truncatedStartChars:i}=s;try{const s=new Intl.NumberFormat(e,{style:"currency",currency:t});if(!r)return s.format(n);const c=s.formatToParts(n);let u="",l="";c.forEach(e=>{"currency"===e.type?u+=e.value:l+=e.value});const d=(0,a.shortenString)(l,{truncatedCharLimit:o??15,truncatedStartChars:i??12,truncatedEndChars:0,skipCharacterInEnd:!0});return c.findIndex(e=>"currency"===e.type)<c.findIndex(e=>"integer"===e.type)?`${u}${d}`:`${d}${u}`}catch(s){const o=new Intl.NumberFormat(e).format(n),i=(0,a.shortenString)(o,{truncatedCharLimit:15,truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});return r?`${i} ${t}`:`${o} ${t}`}}}}}},{package:"$root$",file:"ui/hooks/useFiatFormatter.ts"}],[7297,{"../ducks/locale/locale":7136,"@metamask/assets-controllers":1324,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFormatters=function(){const e=(0,s.c)(8),t=(0,r.useSelector)(a.getIntlLocale);let n,u,l,d;if(e[0]!==t){const s=(0,o.createFormatters)({locale:t});n=s,u=i.bind(null,s.formatNumber),l=c.bind(null,s.formatNumber),e[0]=t,e[1]=n,e[2]=u,e[3]=l}else n=e[1],u=e[2],l=e[3];e[4]!==n||e[5]!==u||e[6]!==l?(d={...n,formatPercentWithMinThreshold:u,formatCompact:l},e[4]=n,e[5]=u,e[6]=l,e[7]=d):d=e[7];return d};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("@metamask/assets-controllers"),a=e("../ducks/locale/locale");function i(e,t,n={}){const s=Number(t);if(!Number.isFinite(s))return"";return e(0===s?0:Math.sign(s)*Math.max(Math.abs(s),1e-4),{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2,...n})}function c(e,t){return e(t,{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}}}},{package:"$root$",file:"ui/hooks/useFormatters.ts"}],[7298,{"../../shared/modules/selectors/networks":6034,"../ducks/metamask/metamask":7137,"../store/actions":8241,"./usePolling":7321,"lodash/isEqual":4927,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeEstimates=function(e,t){const n=(0,s.c)(23),d=t===undefined||t,h=(0,o.useSelector)(u.getSelectedNetworkClientId),f=e??h,[g,y]=(0,a.useState)("");let S;n[0]!==g?(S=e=>(0,i.getGasEstimateTypeByChainId)(e,g),n[0]=g,n[1]=S):S=n[1];const k=(0,o.useSelector)(S);let v;n[2]!==g?(v=e=>(0,i.getGasFeeEstimatesByChainId)(e,g),n[2]=g,n[3]=v):v=n[3];const b=(0,o.useSelector)(v,r.default);let T;n[4]!==g||n[5]!==f?(T=e=>(0,i.getIsGasEstimatesLoadingByChainId)(e,{chainId:g,networkClientId:f}),n[4]=g,n[5]=f,n[6]=T):T=n[6];const w=(0,o.useSelector)(T);let C;n[7]!==g?(C=e=>(0,i.getIsNetworkBusyByChainId)(e,g),n[7]=g,n[8]=C):C=n[8];const A=(0,o.useSelector)(C);let I,E,M,_,P;n[9]!==d||n[10]!==f?(I=()=>{if(!d)return p;let e=!0;return(0,c.getNetworkConfigurationByNetworkClientId)(f).then(t=>{t&&e&&y(t.chainId)}),()=>{e=!1}},E=[f,d],n[9]=d,n[10]=f,n[11]=I,n[12]=E):(I=n[11],E=n[12]);(0,a.useEffect)(I,E),n[13]!==f?(M={networkClientId:f},n[13]=f,n[14]=M):M=n[14];n[15]!==d||n[16]!==M?(_={startPolling:m,stopPollingByPollingToken:c.gasFeeStopPollingByPollingToken,input:M,enabled:d},n[15]=d,n[16]=M,n[17]=_):_=n[17];(0,l.default)(_),n[18]!==k||n[19]!==b||n[20]!==w||n[21]!==A?(P={gasFeeEstimates:b,gasEstimateType:k,isGasEstimatesLoading:w,isNetworkBusy:A},n[18]=k,n[19]=b,n[20]=w,n[21]=A,n[22]=P):P=n[22];return P};var s=e("react-compiler-runtime"),r=d(e("lodash/isEqual")),o=e("react-redux"),a=e("react"),i=e("../ducks/metamask/metamask"),c=e("../store/actions"),u=e("../../shared/modules/selectors/networks"),l=d(e("./usePolling"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){return(0,c.gasFeeStartPollingByNetworkClientId)(e.networkClientId)}function p(){}}}},{package:"$root$",file:"ui/hooks/useGasFeeEstimates.js"}],[7299,{"../helpers/utils/util":7207,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("../helpers/utils/util");n.default=(e,t)=>{const n=(0,s.c)(4),[a,i]=(0,r.useState)("");let c,u;return n[0]!==e||n[1]!==t?(c=()=>{(async()=>{const n=await(0,o.getAssetImageURL)(e,t);i(n)})()},u=[e,t],n[0]=e,n[1]=t,n[2]=c,n[3]=u):(c=n[2],u=n[3]),(0,r.useEffect)(c,u),a}}}},{package:"$root$",file:"ui/hooks/useGetAssetImageUrl.ts"}],[7300,{"../../shared/modules/conversion.utils":6015,"../../shared/modules/selectors/networks":6034,"../selectors":8207,"./useTokenBalances":7334,"bn.js":4115,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGetFormattedTokensPerChain=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("bn.js"),a=e("../selectors"),i=e("../../shared/modules/selectors/networks"),c=e("../../shared/modules/conversion.utils"),u=e("./useTokenBalances");n.useGetFormattedTokensPerChain=(e,t,n,l)=>{const d=(0,s.c)(19),m=(0,r.useSelector)(i.getCurrentChainId),p=(0,r.useSelector)(a.getAllTokens),h=l;let f;d[0]!==h?(f={chainIds:h},d[0]=h,d[1]=f):f=d[1];const g=(0,u.useTokenBalances)(f);let y;d[2]!==l||d[3]!==m||d[4]!==n?(y=n?[m]:l,d[2]=l,d[3]=m,d[4]=n,d[5]=y):y=d[5];const S=y;let k;if(d[6]!==e||d[7]!==g||d[8]!==p||d[9]!==S||d[10]!==t){let n;d[12]!==e||d[13]!==g||d[14]!==p||d[15]!==t?(n=n=>{var s;const r=((null==p||null===(s=p[n])||void 0===s?void 0:s[null==e?void 0:e.address])??[]).reduce((s,r)=>{var a;const i=(null===(a=g.tokenBalances[e.address])||void 0===a||null===(a=a[n])||void 0===a?void 0:a[r.address])??"0x0";if("0x0"!==i||!t){const e=(0,c.hexToDecimal)(i);s.push({address:r.address,symbol:r.symbol,decimals:r.decimals,balance:e,string:(0,u.stringifyBalance)(new o.BN(e),new o.BN(r.decimals))})}return s},[]);return{chainId:n,tokensWithBalances:r}},d[12]=e,d[13]=g,d[14]=p,d[15]=t,d[16]=n):n=d[16],k=S.map(n),d[6]=e,d[7]=g,d[8]=p,d[9]=S,d[10]=t,d[11]=k}else k=d[11];const v=k;let b;return d[17]!==v?(b={formattedTokensWithBalancesPerChain:v},d[17]=v,d[18]=b):b=d[18],b}}}},{package:"$root$",file:"ui/hooks/useGetFormattedTokensPerChain.ts"}],[7302,{"../../app/scripts/lib/util":368,"../../shared/lib/asset-utils":5925,"../helpers/utils/isOriginalNativeTokenSymbol":7185,"../selectors":8207,"../selectors/multichain":8216,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalNativeTokenSymbol=function(e,t,n,u){const m=(0,s.c)(18),p=u===undefined?"":u,[h,f]=(0,r.useState)(!1),g=(0,o.useSelector)(a.getUseSafeChainsListValidation);let y;m[0]!==e?(y=(0,c.isEvmChainId)(e),m[0]=e,m[1]=y):y=m[1];const S=y,k=(0,o.useSelector)(i.getMultichainCurrentNetwork);let v;m[2]!==e||m[3]!==S||m[4]!==(null==k?void 0:k.ticker)||m[5]!==p||m[6]!==t||m[7]!==g?(v=()=>{let n=!0;const s=d;return async function(e){if(S)try{if(s(p))return void f(!0);const r=await(0,l.isOriginalNativeTokenSymbol)({ticker:t,chainId:e,useAPICall:g});n&&f(r)}catch(e){n&&f(!1)}else f(t===(null==k?void 0:k.ticker))}(e),()=>{n=!1}},m[2]=e,m[3]=S,m[4]=null==k?void 0:k.ticker,m[5]=p,m[6]=t,m[7]=g,m[8]=v):v=m[8];const b=null==k?void 0:k.ticker;let T;m[9]!==e||m[10]!==S||m[11]!==h||m[12]!==p||m[13]!==b||m[14]!==t||m[15]!==n||m[16]!==g?(T=[h,e,t,n,p,g,S,b],m[9]=e,m[10]=S,m[11]=h,m[12]=p,m[13]=b,m[14]=t,m[15]=n,m[16]=g,m[17]=T):T=m[17];return(0,r.useEffect)(v,T),h};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain"),c=e("../../shared/lib/asset-utils"),u=e("../../app/scripts/lib/util"),l=e("../helpers/utils/isOriginalNativeTokenSymbol");function d(e){const t=(0,u.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname)}}}},{package:"$root$",file:"ui/hooks/useIsOriginalNativeTokenSymbol.ts"}],[7303,{"../selectors":8207,"../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalTokenSymbol=function(e,t){const n=(0,s.c)(7),[c,u]=(0,r.useState)(null),l=(0,o.useSelector)(i.getTokenList);let d,m;n[0]!==e||n[1]!==t||n[2]!==l?(d=()=>{!async function(e){var n,s;let r=null===(n=l[null==e?void 0:e.toLowerCase()])||void 0===n?void 0:n.symbol;r||(r=await(0,a.getTokenSymbol)(e)),u((null===(s=r)||void 0===s?void 0:s.toLowerCase())===(null==t?void 0:t.toLowerCase()))}(e)},n[0]=e,n[1]=t,n[2]=l,n[3]=d):d=n[3];n[4]!==e||n[5]!==t?(m=[e,t],n[4]=e,n[5]=t,n[6]=m):m=n[6];return(0,r.useEffect)(d,m),c};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../store/actions"),i=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useIsOriginalTokenSymbol.js"}],[7304,{"../selectors/metametrics":8209,"../selectors/remote-feature-flags":8224,"../store/actions":8241,loglevel:4948,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null);return{disableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),a(null);try{await e((0,i.setParticipateInMetaMetrics)(!1))}catch(e){throw a(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e]),loading:t,error:s}},n.useEnableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),d=(0,o.useSelector)(c.getPna25Acknowledged),m=(0,o.useSelector)(u.getRemoteFeatureFlags);return{enableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),l(null);try{await e((0,i.setParticipateInMetaMetrics)(!0));(null==m?void 0:m.extensionUxPna25)&&!1===d&&await e((0,i.setPna25Acknowledged)(!0))}catch(e){throw l(e instanceof Error?e.message:"An unexpected error occurred"),a.default.error(e),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e,d,m]),loading:t,error:s}};var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../store/actions"),c=e("../selectors/metametrics"),u=e("../selectors/remote-feature-flags")}}},{package:"$root$",file:"ui/hooks/useMetametrics.ts"}],[7305,{"../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalProps=function(){const e=(0,s.c)(5),t=(0,r.useSelector)(a),n=(0,r.useDispatch)();let i;e[0]!==n?(i=()=>n((0,o.hideModal)()),e[0]=n,e[1]=i):i=e[1];const c=i;let u;e[2]!==t||e[3]!==c?(u={props:t,hideModal:c},e[2]=t,e[3]=c,e[4]=u):u=e[4];return u};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions");function a(e){var t;return null===(t=e.appState.modal.modalState)||void 0===t?void 0:t.props}}}},{package:"$root$",file:"ui/hooks/useModalProps.ts"}],[7306,{"../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalState=function(){const e=(0,s.c)(4),t=(0,r.useDispatch)();let n;e[0]!==t?(n=()=>t((0,o.closeNetworkMenu)()),e[0]=t,e[1]=n):n=e[1];const a=n;let i;e[2]!==a?(i={closeModals:a},e[2]=a,e[3]=i):i=e[3];return i};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useModalState.ts"}],[7307,{"../../shared/lib/sentry":5992,"../ducks/metamask/metamask":7137,"./useSyncEqualityCheck":7329,"fast-json-stable-stringify":4491,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("fast-json-stable-stringify"))&&s.__esModule?s:{default:s},i=e("../../shared/lib/sentry"),c=e("../ducks/metamask/metamask"),u=e("./useSyncEqualityCheck");n.default=e=>{const t=(0,o.useSelector)(c.getCompletedOnboarding),n=(0,r.useRef)(new Map),s=(0,r.useRef)(new Set),l=(0,u.useSyncEqualityCheck)(e.input),d=(0,r.useMemo)(()=>{const e=new Map;for(const t of l)e.set((0,a.default)(t),t);return e},[l]),m=(0,r.useRef)(e.stopPollingByPollingToken);m.current=e.stopPollingByPollingToken;const p=(0,r.useRef)(!0);(0,r.useEffect)(()=>{p.current=!0;const e=n.current,t=s.current;return()=>{p.current=!1;for(const t of e.values())m.current(t);e.clear(),t.clear()}},[]);const h=(0,r.useRef)(d);h.current=d,(0,r.useEffect)(()=>{if(t){for(const[t,r]of d)n.current.has(t)||s.current.has(t)||(s.current.add(t),e.startPolling(r).then(e=>{if(h.current.has(t))if(p.current){const s=n.current.get(t);s&&s!==e&&m.current(s),n.current.set(t,e)}else m.current(e);else m.current(e)}).catch(e=>{(0,i.captureException)(e)}).finally(()=>{s.current.delete(t)}));for(const[t,s]of n.current.entries())d.has(t)||(e.stopPollingByPollingToken(s),n.current.delete(t))}},[d,e.startPolling,e.stopPollingByPollingToken,t])}}}},{package:"$root$",file:"ui/hooks/useMultiPolling.ts"}],[7308,{"../helpers/constants/routes":7154,"../selectors/multichain-accounts/feature-flags":8212,"../store/store":8247,react:5358,"react-compiler-runtime":5272,semver:5688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BIP44_ACCOUNTS_INTRODUCTION_VERSION=void 0,n.useMultichainAccountsIntroModal=function(e,t){const n=(0,s.c)(10),[p,h]=(0,r.useState)(!1),f=(0,a.useAppSelector)(i.getIsMultichainAccountsState2Enabled),g=(0,a.useAppSelector)(m),y=(0,a.useAppSelector)(d),S=(0,a.useAppSelector)(l);let k,v,b;n[0]!==g||n[1]!==f||n[2]!==e||n[3]!==y||n[4]!==S||n[5]!==t.pathname?(k=()=>{const n=t.pathname===c.DEFAULT_ROUTE,s=(0,o.parse)(S),r=s?`${s.major}.${s.minor}.${s.patch}`:null,a=Boolean(r&&(0,o.lt)(r,u));h(e&&f&&!g&&null!==y&&a&&n)},v=[e,f,g,y,S,t.pathname],n[0]=g,n[1]=f,n[2]=e,n[3]=y,n[4]=S,n[5]=t.pathname,n[6]=k,n[7]=v):(k=n[6],v=n[7]);(0,r.useEffect)(k,v),n[8]!==p?(b={showMultichainIntroModal:p,setShowMultichainIntroModal:h},n[8]=p,n[9]=b):b=n[9];return b};var s=e("react-compiler-runtime"),r=e("react"),o=e("semver"),a=e("../store/store"),i=e("../selectors/multichain-accounts/feature-flags"),c=e("../helpers/constants/routes");const u=n.BIP44_ACCOUNTS_INTRODUCTION_VERSION="13.5.0";function l(e){return e.metamask.previousAppVersion}function d(e){return e.metamask.lastUpdatedAt}function m(e){return e.metamask.hasShownMultichainAccountsIntroModal}}}},{package:"$root$",file:"ui/hooks/useMultichainAccountsIntroModal.ts"}],[7309,{"../ducks/metamask/metamask":7137,"../selectors":8207,"../store/controller-actions/multichain-asset-rates-controller":8244,"./usePolling":7321,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../ducks/metamask/metamask"),i=e("../selectors"),c=e("../store/controller-actions/multichain-asset-rates-controller"),u=(s=e("./usePolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(()=>{const e=(0,o.useSelector)(a.getCompletedOnboarding),t=(0,o.useSelector)(a.getIsUnlocked),n=(0,o.useSelector)(i.getUseCurrencyRateCheck);return e&&t&&n})(),n=(()=>{const e=(0,o.useSelector)(i.getSelectedInternalAccount);return(null==e?void 0:e.id)??""})();let s;e[0]!==n||e[1]!==t?(s={startPolling:c.multichainAssetsRatesStartPolling,stopPollingByPollingToken:c.multichainAssetsRatesStopPollingByPollingToken,input:n,enabled:t},e[0]=n,e[1]=t,e[2]=s):s=e[2],(0,u.default)(s)}}}},{package:"$root$",file:"ui/hooks/useMultichainAssetsRatesPolling.ts"}],[7310,{"../../shared/constants/multichain/assets":5894,"../../shared/constants/transaction":5915,"../selectors/assets":8199,"../selectors/multichain":8216,"../selectors/multichain-accounts/account-tree":8211,"./useMultichainSelector":7311,"@metamask/keyring-api":2300,"@metamask/utils":3207,"bignumber.js":4064,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainBalances=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("@metamask/utils"),a=e("@metamask/keyring-api"),i=e("bignumber.js"),c=e("../../shared/constants/transaction"),u=e("../../shared/constants/multichain/assets"),l=e("../selectors/assets"),d=e("../selectors/multichain"),m=e("../selectors/multichain-accounts/account-tree"),p=e("./useMultichainSelector");const h=(e,t)=>{const n=(0,s.c)(15),a=(0,r.useSelector)(l.getAccountAssets),m=(0,r.useSelector)(l.getAssetsMetadata),h=(0,p.useMultichainSelector)(d.getMultichainBalances),f=(0,r.useSelector)(l.getAssetsRates);let g;e:{if(!e){let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0],g=e;break e}const s=null==a?void 0:a[e],r=null==h?void 0:h[e];if(!r||!s){let e;n[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[1]=e):e=n[1],g=e;break e}let l;if(n[2]!==t||n[3]!==s||n[4]!==m||n[5]!==f||n[6]!==r){let e,a;n[8]!==m?(e=e=>m[e],n[8]=m,n[9]=e):e=n[9],n[10]!==t||n[11]!==m||n[12]!==f||n[13]!==r?(a=e=>{var n,s,a,l,d,p,h;const{chainId:g,assetReference:y,assetNamespace:S}=(0,o.parseCaipAssetType)(e);return{chainId:g,symbol:(null===(n=m[e])||void 0===n?void 0:n.symbol)??"",assetId:e,address:y,isNative:S===u.SLIP44_ASSET_NAMESPACE,string:(null===(s=r[e])||void 0===s?void 0:s.amount)??"0",balance:(null===(a=r[e])||void 0===a?void 0:a.amount)??"0",decimals:null===(l=m[e])||void 0===l||null===(l=l.units[0])||void 0===l?void 0:l.decimals,image:(null===(d=m[e])||void 0===d?void 0:d.iconUrl)??"",type:"token"===S?c.AssetType.token:c.AssetType.native,accountType:t,tokenFiatAmount:new i.BigNumber((null===(p=r[e])||void 0===p?void 0:p.amount)??"1").times((null==f||null===(h=f[e])||void 0===h?void 0:h.rate)??"1").toNumber()}},n[10]=t,n[11]=m,n[12]=f,n[13]=r,n[14]=a):a=n[14],l=s.filter(e).map(a).filter(Boolean),n[2]=t,n[3]=s,n[4]=m,n[5]=f,n[6]=r,n[7]=l}else l=n[7];g=l}return g};function f(e){return!u.TRON_RESOURCE_SYMBOLS_SET.has(e.symbol.toLowerCase())}function g(e){return{...e,type:e.isNative?c.AssetType.native:c.AssetType.token}}function y(e,t){return(t.tokenFiatAmount??0)-(e.tokenFiatAmount??0)}function S(e){return!u.TRON_RESOURCE_SYMBOLS_SET.has(e.symbol.toLowerCase())}function k(e,t){return e[t.chainId]||(e[t.chainId]=0),e[t.chainId]=e[t.chainId]+(t.tokenFiatAmount??0),e}n.useMultichainBalances=e=>{const t=(0,s.c)(25),n=(0,r.useSelector)(m.getSelectedAccountGroup);let o;t[0]!==e?(o=t=>(0,m.getAccountGroupsByAddress)(t,[e??""]),t[0]=e,t[1]=o):o=t[1];const[i]=(0,r.useSelector)(o),c=(null==i?void 0:i.id)??n;let u;t[2]!==c?(u=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,"eip155:1"),t[2]=c,t[3]=u):u=t[3];const d=(0,r.useSelector)(u);let p;t[4]!==c?(p=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.SolScope.Mainnet),t[4]=c,t[5]=p):p=t[5];const v=(0,r.useSelector)(p);let b;t[6]!==c?(b=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.BtcScope.Mainnet),t[6]=c,t[7]=b):b=t[7];const T=(0,r.useSelector)(b);let w;t[8]!==c?(w=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.TrxScope.Mainnet),t[8]=c,t[9]=w):w=t[9];const C=(0,r.useSelector)(w);let A;t[10]!==(null==d?void 0:d.address)?(A=e=>(0,l.getTokenBalancesEvm)(e,null==d?void 0:d.address),t[10]=null==d?void 0:d.address,t[11]=A):A=t[11];const I=(0,r.useSelector)(A),E=h(null==v?void 0:v.id),M=h(null==T?void 0:T.id,null==T?void 0:T.type),_=h(null==C?void 0:C.id,null==C?void 0:C.type);let P;if(t[12]!==M||t[13]!==I||t[14]!==E||t[15]!==_){const e=_.filter(f);P=[...I,...E,...M,...e].map(g).sort(y),t[12]=M,t[13]=I,t[14]=E,t[15]=_,t[16]=P}else P=t[16];const N=P;let R;if(t[17]!==M||t[18]!==I||t[19]!==E||t[20]!==_){const e=_.filter(S);R=[...I,...E,...M,...e].reduce(k,{}),t[17]=M,t[18]=I,t[19]=E,t[20]=_,t[21]=R}else R=t[21];const x=R;let O;return t[22]!==N||t[23]!==x?(O={assetsWithBalance:N,balanceByChainId:x},t[22]=N,t[23]=x,t[24]=O):O=t[24],O}}}},{package:"$root$",file:"ui/hooks/useMultichainBalances.ts"}],[7311,{"../selectors":8207,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){const n=(0,s.c)(3);let a;n[0]!==t||n[1]!==e?(a=n=>e(n,t||(0,o.getSelectedInternalAccount)(n)),n[0]=t,n[1]=e,n[2]=a):a=n[2];return(0,r.useSelector)(a)};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[7312,{"../../shared/constants/transaction":5915,"../components/app/assets/util/formatWithThreshold":6135,"../ducks/locale/locale":7136,"./useI18nContext":7301,"@metamask/keyring-api":2300,"@metamask/multichain-network-controller":2406,"@metamask/transaction-controller":3085,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KEYRING_TRANSACTION_STATUS_KEY=void 0,n.useMultichainTransactionDisplay=function(e,t){const n=(0,s.c)(44),o=(0,i.useSelector)(u.getIntlLocale),{chainId:c}=t,l=a.MULTICHAIN_NETWORK_DECIMAL_PLACES[c],f=(0,d.useI18nContext)(),g=e.from;let y;n[0]!==l||n[1]!==o||n[2]!==g?(y=h(g,!0,o,l),n[0]=l,n[1]=o,n[2]=g,n[3]=y):y=n[3];const S=y,k=e.to,v=e.type===r.TransactionType.Send;let b;n[4]!==l||n[5]!==o||n[6]!==k||n[7]!==v?(b=h(k,v,o,l),n[4]=l,n[5]=o,n[6]=k,n[7]=v,n[8]=b):b=n[8];const T=b;let w;n[9]!==o||n[10]!==e.fees?(w=h((e.fees||[]).filter(p),!0,o),n[9]=o,n[10]=e.fees,n[11]=w):w=n[11];const C=w;let A;n[12]!==o||n[13]!==e.fees?(A=h((e.fees||[]).filter(m),!0,o),n[12]=o,n[13]=e.fees,n[14]=A):A=n[14];const I=A;let E,M,_,P;n[15]!==f?(E=f("sent"),n[15]=f,n[16]=E):E=n[16];n[17]!==f?(M=f("received"),n[17]=f,n[18]=M):M=n[18];n[19]!==f?(_=f("swap"),n[19]=f,n[20]=_):_=n[20];n[21]!==f?(P=f("to").toLowerCase(),n[21]=f,n[22]=P):P=n[22];const N=`${_} ${null==S?void 0:S.unit} ${P} ${null==T?void 0:T.unit}`;let R,x,O,D;n[23]!==f?(R=f("stakingDeposit"),n[23]=f,n[24]=R):R=n[24];n[25]!==f?(x=f("stakingWithdrawal"),n[25]=f,n[26]=x):x=n[26];n[27]!==f?(O=f("interaction"),n[27]=f,n[28]=O):O=n[28];n[29]!==N||n[30]!==R||n[31]!==x||n[32]!==O||n[33]!==E||n[34]!==M?(D={[r.TransactionType.Send]:E,[r.TransactionType.Receive]:M,[r.TransactionType.Swap]:N,[r.TransactionType.StakeDeposit]:R,[r.TransactionType.StakeWithdraw]:x,[r.TransactionType.Unknown]:O},n[29]=N,n[30]=R,n[31]=x,n[32]=O,n[33]=E,n[34]=M,n[35]=D):D=n[35];const B=D[e.type],$=0===e.to.length&&e.type===r.TransactionType.Send;let F;n[36]!==C||n[37]!==S||n[38]!==I||n[39]!==B||n[40]!==$||n[41]!==T||n[42]!==e?(F={...e,title:B,from:S,to:T,baseFee:C,priorityFee:I,isRedeposit:$},n[36]=C,n[37]=S,n[38]=I,n[39]=B,n[40]=$,n[41]=T,n[42]=e,n[43]=F):F=n[43];return F};var s=e("react-compiler-runtime"),r=e("@metamask/keyring-api"),o=e("@metamask/transaction-controller"),a=e("@metamask/multichain-network-controller"),i=e("react-redux"),c=e("../components/app/assets/util/formatWithThreshold"),u=e("../ducks/locale/locale"),l=e("../../shared/constants/transaction"),d=e("./useI18nContext");n.KEYRING_TRANSACTION_STATUS_KEY={[r.TransactionStatus.Failed]:o.TransactionStatus.failed,[r.TransactionStatus.Confirmed]:o.TransactionStatus.confirmed,[r.TransactionStatus.Unconfirmed]:l.TransactionGroupStatus.pending,[r.TransactionStatus.Submitted]:o.TransactionStatus.submitted};function m(e){return"priority"===e.type}function p(e){return"base"===e.type}function h(e,t,n,s){const r={};for(const t of e){if(null==t||!t.asset.fungible)continue;const e=t.asset.type;r[e]?r[e].amount+=parseFloat(t.asset.amount):r[e]={amount:parseFloat(t.asset.amount),address:t.address,unit:t.asset.unit}}return Object.entries(r).map(([e,r])=>function(e,t,n,s){const r=1/10**(s||8),o=(0,c.formatWithThreshold)(e.amount,r,t,{minimumFractionDigits:0,maximumFractionDigits:s||8});let a=o;n&&(a=`-${o}`);return{...e,amount:a}}(r,n,t,s))[0]}}}},{package:"$root$",file:"ui/hooks/useMultichainTransactionDisplay.ts"}],[7313,{"../selectors":8207,"@metamask/name-controller":2414,lodash:4940,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useName=function(e,t,n){const r=(0,s.c)(4);let o;r[0]!==t||r[1]!==e||r[2]!==n?(o=[{value:e,type:t,variation:n}],r[0]=t,r[1]=e,r[2]=n,r[3]=o):o=r[3];return c(o)[0]},n.useNames=c;var s=e("react-compiler-runtime"),r=e("@metamask/name-controller"),o=e("react-redux"),a=e("lodash"),i=e("../selectors");function c(e){const t=(0,s.c)(5),n=(0,o.useSelector)(i.getNames,a.isEqual);let c;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{var t;const{value:s,type:o,variation:a}=e,i=function(e,t){if(t===r.NameType.ETHEREUM_ADDRESS)return e.toLowerCase();return e}(s,o),c=(null===(t=n[o])||void 0===t?void 0:t[i])??{},u=c[a],l=c[r.FALLBACK_VARIATION],d=null!=u&&u.name||!l?u??{}:l,{name:m,sourceId:p,origin:h,proposedNames:f}=d,g=m===undefined?null:m,y=p===undefined?null:p,S=h===undefined?null:h;return{name:g,sourceId:y,proposedNames:f===undefined?{}:f,origin:S}},t[3]=n,t[4]=s):s=t[4],c=e.map(s),t[0]=n,t[1]=e,t[2]=c}else c=t[2];return c}}}},{package:"$root$",file:"ui/hooks/useName.ts"}],[7314,{"../../shared/constants/metametrics":5892,"../../shared/constants/network":5896,"../../shared/lib/network-utils":5988,"../../shared/lib/only-keep-host":5989,"../../shared/modules/selectors/networks":6034,"../components/app/toast-master/utils":6523,"../contexts/metametrics":7110,"../selectors/multichain/networks":8218,"../selectors/selectors":8227,"../store/actions":8241,"@metamask/utils":3207,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNetworkConnectionBanner=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("@metamask/utils"),i=e("../selectors/multichain/networks"),c=e("../selectors/selectors"),u=e("../store/actions"),l=e("../contexts/metametrics"),d=e("../../shared/constants/metametrics"),m=e("../../shared/constants/network"),p=e("../../shared/modules/selectors/networks"),h=e("../../shared/lib/only-keep-host"),f=e("../../shared/lib/network-utils"),g=e("../components/app/toast-master/utils");n.useNetworkConnectionBanner=()=>{const e=(0,s.c)(41),t=(0,o.useDispatch)(),n=(0,r.useContext)(l.MetaMetricsContext),y=(0,o.useSelector)(c.getIsDeviceOffline),S=(0,o.useSelector)(i.selectFirstUnavailableEvmNetwork),k=(0,o.useSelector)(c.getNetworkConnectionBanner),v=(0,o.useSelector)(p.getNetworkConfigurationsByChainId);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={},e[0]=b):b=e[0];const T=(0,r.useRef)(b);let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{T.current.degradedTimer&&(clearTimeout(T.current.degradedTimer),T.current.degradedTimer=undefined)},e[1]=w):w=e[1];const C=w;let A;e[2]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{T.current.unavailableTimer&&(clearTimeout(T.current.unavailableTimer),T.current.unavailableTimer=undefined)},e[2]=A):A=e[2];const I=A;let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{C(),I()},e[3]=E):E=e[3];const M=E;let _;e[4]!==v||e[5]!==n?(_=e=>{const{bannerType:t,eventName:s,networkClientId:r}=e;if(!m.infuraProjectId)return void console.warn("Infura project ID not found, cannot track network banner event");let o;for(const e of Object.values(v)){const t=e.rpcEndpoints.find(e=>e.networkClientId===r);if(t){o={chainId:e.chainId,url:t.url};break}}if(!o)return void console.warn(`RPC endpoint not found for network client ID: ${r}`);const i=o.url,c=(0,a.hexToNumber)(o.chainId),u=(0,f.isPublicEndpointUrl)(i,m.infuraProjectId)?(0,h.onlyKeepHost)(i):"custom";n({category:d.MetaMetricsEventCategory.Network,event:s,properties:{banner_type:t,chain_id_caip:`eip155:${c}`,rpc_domain:u,rpc_endpoint_url:u}})},e[4]=v,e[5]=n,e[6]=_):_=e[6];const P=_;let N;e[7]!==t||e[8]!==S||e[9]!==P?(N=()=>{I(),T.current.unavailableTimer=setTimeout(()=>{S&&(P({bannerType:"unavailable",eventName:d.MetaMetricsEventName.NetworkConnectionBannerShown,networkClientId:S.networkClientId}),t((0,u.updateNetworkConnectionBanner)({status:"unavailable",networkName:S.networkName,networkClientId:S.networkClientId,chainId:S.chainId,isInfuraEndpoint:S.isInfuraEndpoint,infuraEndpointIndex:S.infuraEndpointIndex})))},25e3)},e[7]=t,e[8]=S,e[9]=P,e[10]=N):N=e[10];const R=N;let x;e[11]!==t||e[12]!==S||e[13]!==R||e[14]!==P?(x=()=>{C(),T.current.degradedTimer=setTimeout(()=>{S&&(P({bannerType:"degraded",eventName:d.MetaMetricsEventName.NetworkConnectionBannerShown,networkClientId:S.networkClientId}),t((0,u.updateNetworkConnectionBanner)({status:"degraded",networkName:S.networkName,networkClientId:S.networkClientId,chainId:S.chainId,isInfuraEndpoint:S.isInfuraEndpoint,infuraEndpointIndex:S.infuraEndpointIndex})),R())},5e3)},e[11]=t,e[12]=S,e[13]=R,e[14]=P,e[15]=x):x=e[15];const O=x;let D,B,$;e[16]!==t||e[17]!==S||e[18]!==y||e[19]!==k.status||e[20]!==O||e[21]!==R?(D=()=>y?(M(),void("available"!==k.status&&t((0,u.updateNetworkConnectionBanner)({status:"available"})))):(S?"degraded"===k.status?R():"unknown"!==k.status&&"available"!==k.status||O():"available"!==k.status&&t((0,u.updateNetworkConnectionBanner)({status:"available"})),()=>{M()}),B=[y,S,M,t,k.status,O,R],e[16]=t,e[17]=S,e[18]=y,e[19]=k.status,e[20]=O,e[21]=R,e[22]=D,e[23]=B):(D=e[22],B=e[23]),(0,r.useEffect)(D,B),e[24]!==t||e[25]!==v||e[26]!==k?($=async()=>{if("degraded"!==k.status&&"unavailable"!==k.status)return;const{chainId:e,infuraEndpointIndex:n}=k;if(n===undefined)return;const s=v[e];if(s)try{await t((0,u.updateNetwork)({chainId:e,name:s.name,nativeCurrency:s.nativeCurrency,rpcEndpoints:s.rpcEndpoints,blockExplorerUrls:s.blockExplorerUrls,defaultBlockExplorerUrlIndex:s.defaultBlockExplorerUrlIndex,defaultRpcEndpointIndex:n},{replacementSelectedRpcEndpointIndex:n})),t((0,g.setShowInfuraSwitchToast)(!0))}catch{}},e[24]=t,e[25]=v,e[26]=k,e[27]=$):$=e[27];const F=$;if(("degraded"===k.status||"unavailable"===k.status)&&S){let t;return e[28]!==S.chainId||e[29]!==S.infuraEndpointIndex||e[30]!==S.isInfuraEndpoint||e[31]!==S.networkClientId||e[32]!==S.networkName||e[33]!==k||e[34]!==F||e[35]!==P?(t={...k,networkClientId:S.networkClientId,networkName:S.networkName,chainId:S.chainId,isInfuraEndpoint:S.isInfuraEndpoint,infuraEndpointIndex:S.infuraEndpointIndex,trackNetworkBannerEvent:P,switchToInfura:F},e[28]=S.chainId,e[29]=S.infuraEndpointIndex,e[30]=S.isInfuraEndpoint,e[31]=S.networkClientId,e[32]=S.networkName,e[33]=k,e[34]=F,e[35]=P,e[36]=t):t=e[36],t}let U;return e[37]!==k||e[38]!==F||e[39]!==P?(U={...k,trackNetworkBannerEvent:P,switchToInfura:F},e[37]=k,e[38]=F,e[39]=P,e[40]=U):U=e[40],U}}}},{package:"$root$",file:"ui/hooks/useNetworkConnectionBanner.ts"}],[7315,{"../../shared/constants/transaction":5915,"../store/actions":8241,"./useAsync":7281,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftCollectionsMetadata=function(e){const t=(0,s.c)(7);let n,r,c;t[0]!==e?(n=()=>async function(e){const t=e.reduce((e,{chainId:t,contractAddress:n})=>(e[t]=[...e[t]??[],n.toLowerCase()],e),{}),n=Object.keys(t),s=await Promise.all(n.map(e=>async function(e,t){const n=await Promise.all(e.map(e=>(0,o.getTokenStandardAndDetails)(e,t))),s=e.filter((e,t)=>i.includes(n[t].standard));if(0===s.length)return{};const r=await(0,o.getNFTContractInfo)(s,t);return r.collections.reduce((e,t,n)=>(e[s[n]]={name:null==t?void 0:t.name,image:null==t?void 0:t.image,isSpam:null==t?void 0:t.isSpam},e),{})}(t[e],e)));return n.reduce((e,t,n)=>(e[t]=s[n],e),{})}(e),r=JSON.stringify(e),t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]);t[3]!==r?(c=[r],t[3]=r,t[4]=c):c=t[4];const{value:u}=(0,a.useAsyncResult)(n,c);let l;t[5]!==u?(l=u??{},t[5]=u,t[6]=l):l=t[6];return l};var s=e("react-compiler-runtime"),r=e("../../shared/constants/transaction"),o=e("../store/actions"),a=e("./useAsync");const i=[r.TokenStandard.ERC721]}}},{package:"$root$",file:"ui/hooks/useNftCollectionsMetadata.ts"}],[7316,{"../../shared/modules/selectors/networks":6034,"../ducks/metamask/metamask":7137,"../selectors":8207,"../selectors/multichain/networks":8218,"./useI18nContext":7301,"./usePrevious":7322,lodash:4940,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNfts=function(e){const t=(0,s.c)(39);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{overridePopularNetworkFilter:p}=n,h=p!==undefined&&p,f=(0,m.useI18nContext)(),g=(0,o.useSelector)(i.getAllNfts),{address:y}=(0,o.useSelector)(c.getSelectedInternalAccount),S=(0,o.useSelector)(l.getCurrentChainId),k=(0,o.useSelector)(c.getAllChainsToPoll),v=(0,o.useSelector)(u.getEnabledNetworksByNamespace);let b;if(t[2]!==g||t[3]!==S||t[4]!==v||t[5]!==h){e:{const e={};if(h){let e;t[7]!==g||t[8]!==S?(e=(null==g?void 0:g[S])??[],t[7]=g,t[8]=S,t[9]=e):e=t[9],b=e;break e}Object.entries(g??{}).forEach(t=>{const[n,s]=t;null!=v&&v[n]&&Array.isArray(s)&&(e[n]=s)}),b=e}t[2]=g,t[3]=S,t[4]=v,t[5]=h,t[6]=b}else b=t[6];const T=b,w=(0,o.useSelector)(i.getNftContracts);let C;t[10]!==f?(C=f("nftsPreviouslyOwned"),t[10]=f,t[11]=C):C=t[11];const A=C;let I;t[12]!==f?(I=f("unknownCollection"),t[12]=f,t[13]=I):I=t[13];const E=I;let M;t[14]===Symbol.for("react.memo_cache_sentinel")?(M=[],t[14]=M):M=t[14];const[_,P]=(0,r.useState)(M);let N;t[15]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[15]=N):N=t[15];const[R,x]=(0,r.useState)(N),[O,D]=(0,r.useState)(!0),B=(0,d.usePrevious)(T),$=(0,d.usePrevious)(k),F=(0,d.usePrevious)(y);let U,L,j;t[16]!==k||t[17]!==S||t[18]!==T||t[19]!==$||t[20]!==B||t[21]!==F||t[22]!==y?(U=()=>{(0,a.isEqual)(B,T)&&(0,a.isEqual)(F,y)&&(0,a.isEqual)($,S)||(()=>{if(D(!0),y===undefined||k===undefined)return;const e=[],t=[];Object.values(T).flat().forEach(n=>{!1===(null==n?void 0:n.isCurrentlyOwned)?e.push(n):t.push(n)}),x(e),P(t),D(!1)})()},t[16]=k,t[17]=S,t[18]=T,t[19]=$,t[20]=B,t[21]=F,t[22]=y,t[23]=U):U=t[23];t[24]!==k||t[25]!==S||t[26]!==w||t[27]!==T||t[28]!==$||t[29]!==B||t[30]!==F||t[31]!==A||t[32]!==y||t[33]!==E?(L=[T,B,w,D,S,$,y,F,A,E,k],t[24]=k,t[25]=S,t[26]=w,t[27]=T,t[28]=$,t[29]=B,t[30]=F,t[31]=A,t[32]=y,t[33]=E,t[34]=L):L=t[34];(0,r.useEffect)(U,L),t[35]!==_||t[36]!==O||t[37]!==R?(j={loading:O,currentlyOwnedNfts:_,previouslyOwnedNfts:R},t[35]=_,t[36]=O,t[37]=R,t[38]=j):j=t[38];return j};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("lodash"),i=e("../ducks/metamask/metamask"),c=e("../selectors"),u=e("../selectors/multichain/networks"),l=e("../../shared/modules/selectors/networks"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNfts.ts"}],[7317,{"../ducks/metamask/metamask":7137,"../helpers/utils/nfts":7191,"../selectors":8207,"../selectors/multichain/networks":8218,"./useI18nContext":7301,"./usePrevious":7322,lodash:4940,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftsCollections=function(){const e=(0,s.c)(28),t=(0,m.useI18nContext)();let n;e[0]!==t?(n=t("nftsPreviouslyOwned"),e[0]=t,e[1]=n):n=e[1];const p=n;let h;e[2]!==t?(h=t("unknownCollection"),e[2]=t,e[3]=h):h=e[3];const f=h;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g={},e[4]=g):g=e[4];const[y,S]=(0,r.useState)(g);let k,v;e[5]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[5]=k):k=e[5];e[6]!==p?(v={collectionName:p,nfts:k},e[6]=p,e[7]=v):v=e[7];const[b,T]=(0,r.useState)(v),w=(0,o.useSelector)(i.getAllNfts),C=(0,o.useSelector)(u.getEnabledNetworksByNamespace);let A;e[8]!==C?(A=Object.keys(C),e[8]=C,e[9]=A):A=e[9];const I=A,{address:E}=(0,o.useSelector)(c.getSelectedInternalAccount);let M;e[10]!==w||e[11]!==C?(M={},Object.entries(w??{}).forEach(e=>{const[t,n]=e;null!=C&&C[t]&&Array.isArray(n)&&(M[t]=n)}),e[10]=w,e[11]=C,e[12]=M):M=e[12];const _=M,[P,N]=(0,r.useState)(!0),R=(0,o.useSelector)(i.getNftContracts),x=(0,d.usePrevious)(_),O=(0,d.usePrevious)(I),D=(0,d.usePrevious)(E);let B,$,F;e[13]!==I||e[14]!==R||e[15]!==_||e[16]!==O||e[17]!==x||e[18]!==D||e[19]!==p||e[20]!==E||e[21]!==f?(B=()=>{(0,a.isEqual)(x,_)&&(0,a.isEqual)(D,E)&&(0,a.isEqual)(O,I)||(()=>{if(N(!0),E===undefined||0===I.length)return void N(!1);const e={},t={collectionName:p,nfts:[]};Object.values(_).flat().forEach(n=>{if(!1===(null==n?void 0:n.isCurrentlyOwned))t.nfts.push(n);else if(e[n.address])e[n.address].nfts.push(n);else{const t=R.find(e=>{const{address:t}=e;return t===n.address});e[n.address]={collectionName:(null==t?void 0:t.name)||f,collectionImage:(null==t?void 0:t.logo)||(0,l.getNftImage)(n.image),nfts:[n]}}}),S(e),T(t),N(!1)})()},$=[_,x,R,N,I,O,E,D,p,f],e[13]=I,e[14]=R,e[15]=_,e[16]=O,e[17]=x,e[18]=D,e[19]=p,e[20]=E,e[21]=f,e[22]=B,e[23]=$):(B=e[22],$=e[23]);(0,r.useEffect)(B,$),e[24]!==y||e[25]!==P||e[26]!==b?(F={nftsLoading:P,collections:y,previouslyOwnedCollection:b},e[24]=y,e[25]=P,e[26]=b,e[27]=F):F=e[27];return F};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("lodash"),i=e("../ducks/metamask/metamask"),c=e("../selectors"),u=e("../selectors/multichain/networks"),l=e("../helpers/utils/nfts"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNftsCollections.js"}],[7318,{"../helpers/constants/notifications":7152,"../store/actions":8241,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNotificationTimeouts=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions"),a=e("../helpers/constants/notifications");n.useSnapNotificationTimeouts=()=>{const e=(0,s.c)(4),t=(0,r.useDispatch)();let n;e[0]!==t?(n=e=>{setTimeout(()=>{t((0,o.deleteNotificationsById)([e]))},a.NOTIFICATIONS_EXPIRATION_DELAY)},e[0]=t,e[1]=n):n=e[1];const i=n;let c;return e[2]!==i?(c={setNotificationTimeout:i},e[2]=i,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/useNotificationTimeouts.ts"}],[7319,{"../selectors":8207,"@metamask/permission-controller":2528,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginMetadata=function(e){const t=(0,s.c)(11);let n;t[0]!==e?(n=t=>(0,a.getTargetSubjectMetadata)(t,e),t[0]=e,t[1]=n):n=t[1];const i=(0,o.useSelector)(n);if(!e)return null;let c=null;try{let n;t[2]!==e?(n=new URL(e),t[2]=e,t[3]=n):n=t[3];const s=n;let o;t[4]!==e||t[5]!==s.host||t[6]!==s.hostname?(o={host:s.host,hostname:s.hostname,origin:e,subjectType:r.SubjectType.Unknown},t[4]=e,t[5]=s.host,t[6]=s.hostname,t[7]=o):o=t[7],c=o}catch(e){}if(i&&c){let e;return t[8]!==c||t[9]!==i?(e={...c,...i},t[8]=c,t[9]=i,t[10]=e):e=t[10],e}if(i)return i;return c};var s=e("react-compiler-runtime"),r=e("@metamask/permission-controller"),o=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useOriginMetadata.js"}],[7320,{"../selectors/selectors":8227,"./useTrustSignals":7346,"@metamask/phishing-controller":2542,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginTrustSignals=function(e){const t=(0,s.c)(8);let n,c;if(t[0]!==e){if(e)try{const t=new URL(e);n=t.hostname}catch(c){n=undefined}t[0]=e,t[1]=n}else n=t[1];t[2]!==n?(c=e=>(0,a.getUrlScanCacheResult)(e,n),t[2]=n,t[3]=c):c=t[3];const u=(0,o.useSelector)(c);let l;t[4]!==u?(l=function(e){var t;const n=null==e||null===(t=e.data)||void 0===t?void 0:t.recommendedAction;if(!n)return i.TrustSignalDisplayState.Unknown;switch(n){case r.RecommendedAction.Block:return i.TrustSignalDisplayState.Malicious;case r.RecommendedAction.Warn:return i.TrustSignalDisplayState.Warning;case r.RecommendedAction.Verified:return i.TrustSignalDisplayState.Verified;case r.RecommendedAction.None:default:return i.TrustSignalDisplayState.Unknown}}(u),t[4]=u,t[5]=l):l=t[5];const d=l;let m;t[6]!==d?(m={state:d,label:null},t[6]=d,t[7]=m):m=t[7];return m};var s=e("react-compiler-runtime"),r=e("@metamask/phishing-controller"),o=e("react-redux"),a=e("../selectors/selectors"),i=e("./useTrustSignals")}}},{package:"$root$",file:"ui/hooks/useOriginTrustSignals.ts"}],[7321,{"./useSyncEqualityCheck":7329,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("./useSyncEqualityCheck");n.default=e=>{const t=(0,s.c)(10),n=(0,r.useRef)(null),i=(0,o.useSyncEqualityCheck)(e.input),c=(0,r.useRef)(0),u=(0,r.useRef)(!0);let l,d,m,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>(u.current=!0,()=>{u.current=!1}),d=[],t[0]=l,t[1]=d):(l=t[0],d=t[1]),(0,r.useEffect)(l,d),t[2]!==i||t[3]!==e?(m=()=>{c.current=c.current+1;const t=c.current,s=()=>{n.current&&(e.stopPollingByPollingToken(n.current),n.current=null)};return!1===e.enabled?(s(),a):(e.startPolling(i).then(r=>{t===c.current?(n.current=r,u.current||s()):e.stopPollingByPollingToken(r)}),s)},t[2]=i,t[3]=e,t[4]=m):m=t[4],t[5]!==i||t[6]!==e.enabled||t[7]!==e.startPolling||t[8]!==e.stopPollingByPollingToken?(p=[i,e.enabled,e.startPolling,e.stopPollingByPollingToken],t[5]=i,t[6]=e.enabled,t[7]=e.startPolling,t[8]=e.stopPollingByPollingToken,t[9]=p):p=t[9],(0,r.useEffect)(m,p)};function a(){}}}},{package:"$root$",file:"ui/hooks/usePolling.ts"}],[7322,{react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePrevious=function(e){const t=(0,s.useRef)();return(0,s.useEffect)(()=>{t.current=e},[e]),t.current};var s=e("react")}}},{package:"$root$",file:"ui/hooks/usePrevious.ts"}],[7323,{"./usePrevious":7322,lodash:4940,react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useScrollRequired=void 0;var s=e("react"),r=e("lodash"),o=e("./usePrevious");n.useScrollRequired=(e=[],{offsetPxFromBottom:t=16}={})=>{var n,a;const i=(0,s.useRef)(null),c=(0,o.usePrevious)(null===(n=i.current)||void 0===n?void 0:n.offsetHeight),[u,l]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),f=(0,s.useCallback)(()=>{if(!i.current)return;const e=i.current&&i.current.scrollHeight>i.current.clientHeight,n=e&&Math.round(i.current.scrollTop)+i.current.offsetHeight+t>=i.current.scrollHeight;e!==d&&(l(!1),m(e)),h(!e||n),e&&!n||l(!0)},[d,t]);(0,s.useEffect)(f,[i,...e]),(0,s.useEffect)(()=>{var e;c!==(null===(e=i.current)||void 0===e?void 0:e.offsetHeight)&&f()},[f,null===(a=i.current)||void 0===a?void 0:a.offsetHeight,c]);return{isScrollable:d,isScrolledToBottom:p,hasScrolledToBottom:u,scrollToBottom:()=>{h(!0),l(!0),i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},setHasScrolledToBottom:l,ref:i,onScroll:(0,r.debounce)(f,25)}}}}},{package:"$root$",file:"ui/hooks/useScrollRequired.js"}],[7324,{"../helpers/constants/routes":7154,"../selectors":8207,"react-compiler-runtime":5272,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSegmentContext=function(){const e=(0,s.c)(5),t=(0,o.useLocation)();let n;(0,a.getPaths)().find(e=>(n=(0,o.matchPath)({path:e,end:!0,caseSensitive:!1},t.pathname),n));const c=((0,r.useSelector)(i.txDataSelector)||{}).origin;let u;e[0]!==c?(u=c?{url:c}:undefined,e[0]=c,e[1]=u):u=e[1];const l=u,d=n?{path:n.pattern.path,title:a.PATH_NAME_MAP.get(n.pattern.path),url:n.pattern.path}:undefined;let m;e[2]!==d||e[3]!==l?(m={page:d,referrer:l},e[2]=d,e[3]=l,e[4]=m):m=e[4];return m};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("react-router-dom"),a=e("../helpers/constants/routes"),i=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useSegmentContext.js"}],[7325,{"../ducks/app/app":7122,"./useGasFeeEstimates":7298,lodash:4940,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldAnimateGasEstimations=function(){const{isGasEstimatesLoading:e,gasFeeEstimates:t}=(0,i.useGasFeeEstimates)(),n=(0,r.useDispatch)(),c=(0,r.useSelector)(a.getGasLoadingAnimationIsShowing),u=(0,s.useRef)(t),l=!(0,o.isEqual)(u.current,t),d=(0,o.isEqual)(u.current,{});l&&(u.current=t);const m=e||l&&!d;(0,s.useEffect)(()=>{!1===c&&!0===m&&n((0,a.toggleGasLoadingAnimation)(!0))},[n,c,m]),(0,s.useEffect)(()=>{let e;return c&&!m&&(e=setTimeout(()=>{n((0,a.toggleGasLoadingAnimation)(!1))},2e3)),()=>{e&&clearTimeout(e)}},[n,c,m])};var s=e("react"),r=e("react-redux"),o=e("lodash"),a=e("../ducks/app/app"),i=e("./useGasFeeEstimates")}}},{package:"$root$",file:"ui/hooks/useShouldAnimateGasEstimations.js"}],[7326,{"../../shared/constants/time":5913,"../../shared/modules/selectors/networks":6034,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldShowSpeedUp=function(e,t){const n=(0,s.c)(14),{transactions:c,hasRetried:u}=e,l=(0,o.useSelector)(i.getCurrentChainId),[d]=c;let m;n[0]!==d?(m=d===undefined?{}:d,n[0]=d,n[1]=m):m=n[1];const p=m,h=p.chainId===l,{submittedTime:f}=p;let g;n[2]!==u||n[3]!==t||n[4]!==h||n[5]!==f?(g=()=>Date.now()-f>5e3&&t&&!u&&h,n[2]=u,n[3]=t,n[4]=h,n[5]=f,n[6]=g):g=n[6];const[y,S]=(0,r.useState)(g);let k,v;n[7]!==u||n[8]!==t||n[9]!==h||n[10]!==y||n[11]!==f?(k=()=>{let e;return!u&&t&&h||!y?!u&&t&&h&&!y&&(Date.now()-f>5*a.SECOND?S(!0):e=setTimeout(()=>{S(!0),clearTimeout(e)},5001-(Date.now()-f))):S(!1),()=>{e&&clearTimeout(e)}},v=[f,y,u,t,h],n[7]=u,n[8]=t,n[9]=h,n[10]=y,n[11]=f,n[12]=k,n[13]=v):(k=n[12],v=n[13]);return(0,r.useEffect)(k,v),y};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../shared/constants/time"),i=e("../../shared/modules/selectors/networks")}}},{package:"$root$",file:"ui/hooks/useShouldShowSpeedUp.js"}],[7327,{"../../shared/modules/environment":6019},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSidePanelEnabled=void 0;var s=e("../../shared/modules/environment");n.useSidePanelEnabled=()=>(0,s.getIsSidePanelFeatureEnabled)()}}},{package:"$root$",file:"ui/hooks/useSidePanelEnabled.ts"}],[7328,{"../../shared/lib/transactions-controller-utils":6001,"../../shared/modules/selectors/networks":6034,"../../shared/modules/swaps.utils":6046,"./useTokenFiatAmount":7338,"@metamask/transaction-controller":3085,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSwappedTokenValue=function(e,t){const n=(0,s.c)(25),{symbol:l,decimals:d,address:m}=t,{primaryTransaction:p,initialTransaction:h}=e,{type:f}=h;let g;n[0]!==h.txParams?(g=h.txParams||{},n[0]=h.txParams,n[1]=g):g=n[1];const{from:y}=g,S=(0,r.useSelector)(c.getCurrentChainId);let k;n[2]!==S||n[3]!==t.address||n[4]!==t.symbol||n[5]!==p.destinationTokenSymbol||n[6]!==f?(k=f===o.TransactionType.swap&&((null==t?void 0:t.symbol)===p.destinationTokenSymbol||(0,i.isSwapsDefaultTokenAddress)(t.address,S)&&(0,i.isSwapsDefaultTokenSymbol)(p.destinationTokenSymbol,S)),n[2]=S,n[3]=t.address,n[4]=t.symbol,n[5]=p.destinationTokenSymbol,n[6]=f,n[7]=k):k=n[7];const v=k;let b;n[8]!==m||n[9]!==S||n[10]!==d||n[11]!==h||n[12]!==v||n[13]!==p.destinationTokenSymbol||n[14]!==p.swapTokenValue||n[15]!==y||n[16]!==f?(b=[o.TransactionType.swap].includes(f)&&v?(0,a.getSwapsTokensReceivedFromTxMeta)(p.destinationTokenSymbol,h,m,y,d,null,S):[o.TransactionType.swap,o.TransactionType.swapAndSend].includes(f)&&p.swapTokenValue,n[8]=m,n[9]=S,n[10]=d,n[11]=h,n[12]=v,n[13]=p.destinationTokenSymbol,n[14]=p.swapTokenValue,n[15]=y,n[16]=f,n[17]=b):b=n[17];const T=b;let w;n[18]!==T?(w="string"==typeof T&&-1===Math.sign(T),n[18]=T,n[19]=w):w=n[19];const C=w,A=(0,u.useTokenFiatAmount)(m,T||"",l),I=(0,u.useTokenFiatAmount)(p.sourceTokenAddress,T,p.sourceTokenSymbol);let E,M;T&&(v?E=A:f===o.TransactionType.swapAndSend&&(E=I));n[20]!==C||n[21]!==v||n[22]!==E||n[23]!==T?(M={swapTokenValue:T,swapTokenFiatAmount:E,isViewingReceivedTokenFromSwap:v,isNegative:C},n[20]=C,n[21]=v,n[22]=E,n[23]=T,n[24]=M):M=n[24];return M};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../shared/lib/transactions-controller-utils"),i=e("../../shared/modules/swaps.utils"),c=e("../../shared/modules/selectors/networks"),u=e("./useTokenFiatAmount")}}},{package:"$root$",file:"ui/hooks/useSwappedTokenValue.js"}],[7329,{"fast-json-stable-stringify":4491,react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.useSyncEqualityCheck=a;var s,r=e("react"),o=(s=e("fast-json-stable-stringify"))&&s.__esModule?s:{default:s};function a(e){const t=(0,o.default)(e),n=(0,r.useRef)(t),s=(0,r.useRef)(e);return t!==n.current&&(s.current=Object.is(e,s.current)?JSON.parse(t):e,n.current=t),s.current}n.default=a}}},{package:"$root$",file:"ui/hooks/useSyncEqualityCheck.ts"}],[7330,{react:5358,"react-compiler-runtime":5272,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTabState=function(){const e=(0,s.c)(7),[t,n]=(0,r.useSearchParams)();let o;e[0]!==t?(o=t.get("tab"),e[0]=t,e[1]=o):o=e[1];const a=o;let i;e[2]!==n?(i=e=>n(t=>(t.set("tab",e),t)),e[2]=n,e[3]=i):i=e[3];const c=i;let u;e[4]!==c||e[5]!==a?(u=[a,c],e[4]=c,e[5]=a,e[6]=u):u=e[6];return u};var s=e("react-compiler-runtime"),r=(e("react"),e("react-router-dom"))}}},{package:"$root$",file:"ui/hooks/useTabState.ts"}],[7331,{"../../shared/constants/preferences":5901,"../selectors":8207,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTheme=function(){const e=(0,s.c)(10),t=(0,o.useSelector)(a.getTheme),[n,c]=(0,r.useState)(u);let d;e[0]!==t||e[1]!==n?(d=()=>l(t,n),e[0]=t,e[1]=n,e[2]=d):d=e[2];const[m,p]=(0,r.useState)(d);let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{const t=e.matches?i.ThemeType.dark:i.ThemeType.light;c(t)},e[3]=h):h=e[3];const f=h;let g,y,S,k;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",f),()=>{e.removeEventListener("change",f)}},y=[f],e[4]=g,e[5]=y):(g=e[4],y=e[5]);(0,r.useEffect)(g,y),e[6]!==t||e[7]!==n?(S=()=>{const e=l(t,n);p(e)},k=[t,n],e[6]=t,e[7]=n,e[8]=S,e[9]=k):(S=e[8],k=e[9]);return(0,r.useEffect)(S,k),m};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../../shared/constants/preferences");const c=Object.values(i.ThemeType).filter(e=>e!==i.ThemeType.os);function u(){return window.matchMedia("(prefers-color-scheme: dark)").matches?i.ThemeType.dark:i.ThemeType.light}function l(e,t){const n=document.documentElement.getAttribute("data-theme");let s;s=e===i.ThemeType.os?t:e||(n||t);return c.includes(s)?s:(console.warn(`useTheme: Invalid theme resolved to "${s}". Defaulting to "${i.ThemeType.light}".`),i.ThemeType.light)}}}},{package:"$root$",file:"ui/hooks/useTheme.ts"}],[7332,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useThrottle=function(e,t){const n=(0,s.c)(4),o=t===undefined?500:t,[a,i]=(0,r.useState)(e),c=(0,r.useRef)(null);let u,l;n[0]!==o||n[1]!==e?(u=()=>{const t=Date.now();if(c.current&&t>=c.current+o)return c.current=t,void i(e);const n=window.setTimeout(()=>{c.current=Date.now(),i(e)},o);return()=>window.clearTimeout(n)},l=[e,o],n[0]=o,n[1]=e,n[2]=u,n[3]=l):(u=n[2],l=n[3]);return(0,r.useEffect)(u,l),a};var s=e("react-compiler-runtime"),r=e("react")}}},{package:"$root$",file:"ui/hooks/useThrottle.ts"}],[7333,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTimeout=function(e,t,n){const o=(0,s.c)(9),a=n===undefined||n,i=(0,r.useRef)(),[c,u]=(0,r.useState)(null);let l,d,m,p,h;o[0]!==e?(l=()=>{i.current=e},d=[e],o[0]=e,o[1]=l,o[2]=d):(l=o[1],d=o[2]);(0,r.useEffect)(l,d),o[3]!==t||o[4]!==c?(m=()=>{if("start"!==c)return;const e=setTimeout(()=>{i.current()},t);return u(e),()=>{clearTimeout(c)}},p=[t,c],o[3]=t,o[4]=c,o[5]=m,o[6]=p):(m=o[5],p=o[6]);(0,r.useEffect)(m,p),o[7]!==c?(h=()=>{clearTimeout(c),u("start")},o[7]=c,o[8]=h):h=o[8];const f=h;a&&f();return f};var s=e("react-compiler-runtime"),r=e("react")}}},{package:"$root$",file:"ui/hooks/useTimeout.js"}],[7334,{"../../shared/modules/conversion.utils":6015,"../ducks/metamask/metamask":7137,"../selectors/multichain/networks":8218,"../store/actions":8241,"./useMultiPolling":7307,"bn.js":4115,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyBalance=p,n.useTokenTracker=n.useTokenBalances=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=d(e("bn.js")),a=e("../store/actions"),i=e("../ducks/metamask/metamask"),c=e("../../shared/modules/conversion.utils"),u=e("../selectors/multichain/networks"),l=d(e("./useMultiPolling"));function d(e){return e&&e.__esModule?e:{default:e}}const m=e=>{const t=(0,s.c)(6);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{chainIds:o}=n,c=(0,r.useSelector)(i.getTokenBalances),d=(0,r.useSelector)(u.getEnabledChainIds),m=o&&o.length>0?o:d;let p,h;return t[2]!==m?(p={startPolling:a.tokenBalancesStartPolling,stopPollingByPollingToken:a.tokenBalancesStopPollingByPollingToken,input:[m]},t[2]=m,t[3]=p):p=t[3],(0,l.default)(p),t[4]!==c?(h={tokenBalances:c},t[4]=c,t[5]=h):h=t[5],h};n.useTokenBalances=m;function p(e,t,n=5){if(e.eq(new o.default(0)))return"0";const s=parseInt(t.toString(),10);if(0===s)return e.toString();let r=e.toString(),a=r.length,i=a-s,c="";if(i<=0){for(;c.length<=-1*i;)c+="0",a+=1;r=c+r,i=1}const u=r.substr(0,a-s);if(0===n)return u;const l=r.substr(i,n);if(/0+$/u.test(l)){let e=r.substr(i).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${u}${e}`}return`${u}.${l}`}n.useTokenTracker=e=>{const t=(0,s.c)(15),{chainId:n,tokens:r,address:a,hideZeroBalanceTokens:i}=e;let u;t[0]!==n?(u={chainIds:[n]},t[0]=n,t[1]=u):u=t[1];const{tokenBalances:l}=m(u);let d;if(t[2]!==a||t[3]!==n||t[4]!==i||t[5]!==l||t[6]!==r){let e;t[8]!==a||t[9]!==n||t[10]!==i||t[11]!==l?(e=(e,t)=>{var s;const r=(null===(s=l[a])||void 0===s||null===(s=s[n])||void 0===s?void 0:s[t.address])??"0x0";if("0x0"!==r||!i){const n=(0,c.hexToDecimal)(r);e.push({address:t.address,symbol:t.symbol,decimals:t.decimals,balance:n,balanceError:null,string:p(new o.default(n),new o.default(t.decimals))})}return e},t[8]=a,t[9]=n,t[10]=i,t[11]=l,t[12]=e):e=t[12],d=r.reduce(e,[]),t[2]=a,t[3]=n,t[4]=i,t[5]=l,t[6]=r,t[7]=d}else d=t[7];const h=d;let f;return t[13]!==h?(f={tokensWithBalances:h},t[13]=h,t[14]=f):f=t[14],f}}}},{package:"$root$",file:"ui/hooks/useTokenBalances.ts"}],[7335,{"../../shared/modules/transaction.utils":6047,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenData=function(e,t){const n=(0,s.c)(2);let o;e:{if(t!==undefined&&!t||!e){o=null;break e}let s;n[0]!==e?(s=(0,r.parseStandardTokenTransactionData)(e),n[0]=e,n[1]=s):s=n[1],o=s}return o};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/transaction.utils"))}}},{package:"$root$",file:"ui/hooks/useTokenData.js"}],[7336,{"../ducks/metamask/metamask":7137,"../selectors":8207,"../selectors/multichain/networks":8218,"../store/actions":8241,"./useMultiPolling":7307,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(4),t=(0,o.useSelector)(a.getUseTokenDetection),n=(0,o.useSelector)(u.getCompletedOnboarding),s=(0,o.useSelector)(u.getIsUnlocked),d=(0,o.useSelector)(i.getEnabledChainIds),m=n&&s&&t;let p,h;return e[0]!==m||e[1]!==d?(p={startPolling:c.tokenDetectionStartPolling,stopPollingByPollingToken:c.tokenDetectionStopPollingByPollingToken,input:m?[d]:[]},e[0]=m,e[1]=d,e[2]=p):p=e[2],(0,l.default)(p),e[3]===Symbol.for("react.memo_cache_sentinel")?(h={},e[3]=h):h=e[3],h}}}},{package:"$root$",file:"ui/hooks/useTokenDetectionPolling.ts"}],[7337,{"../../shared/lib/metamask-controller-utils":5981,"../../shared/lib/transactions-controller-utils":6001,"./useTokenData":7335,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenDisplayValue=function(e,t,n){const i=(0,s.c)(5),c=n===undefined||n,u=(0,a.useTokenData)(e,c);let l;i[0]!==u?(l=(0,r.getTokenValueParam)(u),i[0]=u,i[1]=l):l=i[1];const d=l;let m;e:{if(!Boolean(c&&e&&t&&null!==t.decimals&&t.decimals!==undefined&&d)){m=null;break e}let n;i[2]!==t.decimals||i[3]!==d?(n=(0,o.calcTokenAmount)(d,t.decimals).toString(10),i[2]=t.decimals,i[3]=d,i[4]=n):n=i[4],m=n}return m};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/lib/metamask-controller-utils")),o=e("../../shared/lib/transactions-controller-utils"),a=e("./useTokenData")}}},{package:"$root$",file:"ui/hooks/useTokenDisplayValue.js"}],[7338,{"../../shared/modules/selectors/networks":6034,"../../shared/modules/string-utils":6045,"../ducks/metamask/metamask":7137,"../helpers/utils/token-util":7203,"../selectors":8207,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenFiatAmount=function(e,t,n,l={},d,m=null,p=!0){var h,f;const g=(0,r.useSelector)(o.getMarketData),y=(0,r.useSelector)(o.getTokenExchangeRates,r.shallowEqual),S=m&&g[m]?Object.entries(g[m]).reduce((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e),{}):null,k=m?S:y,v=(0,r.useSelector)(o.getConfirmationExchangeRates),b={...k,...v},T=(0,r.useSelector)(o.getCurrencyRates),w=(0,r.useSelector)(c.getConversionRate),C=(0,r.useSelector)(a.getNetworkConfigurationsByChainId),A=m?null==T||null===(h=T[null===(f=C[m])||void 0===f?void 0:f.nativeCurrency])||void 0===h?void 0:h.conversionRate:w,I=(0,r.useSelector)(c.getCurrentCurrency),E=(0,r.useSelector)(o.getShouldShowFiat),M=l.showFiat??E,_=Object.keys(b).find(t=>(0,u.isEqualCaseInsensitive)(t,e)),P=l.exchangeRate??(_&&b[_]),N=(0,s.useMemo)(()=>(0,i.getTokenFiatAmount)(P,A,I,t,n,p,d),[A,P,I,t,n,d]);if(!M||I.toUpperCase()===n)return undefined;return N};var s=e("react"),r=e("react-redux"),o=e("../selectors"),a=e("../../shared/modules/selectors/networks"),i=e("../helpers/utils/token-util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useTokenFiatAmount.js"}],[7339,{"../../shared/lib/asset-utils":5925,"../ducks/metamask/metamask":7137,"../helpers/utils/token-insights":7202,"../selectors":8207,"../selectors/selectors":8227,"./useFormatters":7297,"@metamask/bridge-controller":1408,"@metamask/controller-utils":1488,"@metamask/utils":3207,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenInsightsData=void 0;var s=e("react"),r=e("react-redux"),o=e("@metamask/bridge-controller"),a=e("@metamask/utils"),i=e("@metamask/controller-utils"),c=e("../../shared/lib/asset-utils"),u=e("../selectors"),l=e("../ducks/metamask/metamask"),d=e("../selectors/selectors"),m=e("../helpers/utils/token-insights"),p=e("./useFormatters");n.useTokenInsightsData=e=>{var t;const n=(0,r.useSelector)(l.getCurrentCurrency),h=(0,r.useSelector)(d.getCurrencyRates),f=!!e&&(0,c.isEvmChainId)(e.chainId),{formatCurrencyWithMinThreshold:g}=(0,p.useFormatters)(),y=(0,r.useSelector)(u.getMarketData),S=(0,s.useMemo)(()=>{if(!(e&&f&&y&&e.address))return null;const t=y[e.chainId];return(null==t?void 0:t[e.address.toLowerCase()])||null},[e,f,y]),[k,v]=(0,s.useState)(null),[b,T]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),A=(0,s.useMemo)(()=>!(null==e||!e.address)&&(0,o.isNativeAddress)(e.address),[null==e?void 0:e.address]),I=(0,s.useMemo)(()=>f&&S?A?null==e?void 0:e.symbol:S.currency:undefined,[f,A,e,S]),E=I?null==h||null===(t=h[I])||void 0===t?void 0:t.conversionRate:undefined;(0,s.useEffect)(()=>{if(!e||S)return;(async()=>{T(!0),C(null);try{const s=(0,a.isCaipChainId)(e.chainId)?e.chainId:(0,o.formatChainIdToCaip)(e.chainId),r=(0,c.toAssetId)(e.address||"",s);if(!r)return void C("Invalid asset ID");const u=`https://price.api.cx.metamask.io/v3/spot-prices?assetIds=${r}&includeMarketData=true&vsCurrency=${n.toLowerCase()}`,l=await(0,i.handleFetch)(u,{method:"GET",headers:{"X-Client-Id":o.BridgeClientId.EXTENSION}}),d=r?null==l?void 0:l[r]:null;if(d){var t;const e={price:d.price||d.usd,pricePercentChange1d:d.pricePercentChange1d||(null===(t=d.pricePercentChange)||void 0===t?void 0:t.P1D)||0,totalVolume:d.totalVolume,marketCap:d.marketCap,dilutedMarketCap:d.dilutedMarketCap};v(e)}}catch(e){C(e.message)}finally{T(!1)}})()},[e,S,n]);const M=(0,s.useMemo)(()=>S?{price:S.price,pricePercentChange1d:S.pricePercentChange1d,totalVolume:S.totalVolume,marketCap:S.marketCap,dilutedMarketCap:S.dilutedMarketCap??S.marketCap}:k,[S,k]),_=(0,s.useMemo)(()=>{const t=e=>e?g(e,n):"";if(!f||!S||!E){const e=null==M?void 0:M.price,s=null==M?void 0:M.totalVolume,r=(null==M?void 0:M.dilutedMarketCap)??(null==M?void 0:M.marketCap);return{price:e,volume:s,marketCap:r,formattedPrice:t(e),formattedVolume:(0,m.formatCompactCurrency)(s,n),formattedMarketCap:(0,m.formatCompactCurrency)(r,n)}}let s;var r;A&&null!=e&&e.symbol?s=null==h||null===(r=h[e.symbol])||void 0===r?void 0:r.conversionRate:s=S.price!==undefined&&null!==S.price?E*Number(S.price):undefined;const o=S.totalVolume!==undefined&&null!==S.totalVolume?E*Number(S.totalVolume):undefined,a=S.dilutedMarketCap??S.marketCap,i=a!==undefined&&null!==a?E*Number(a):undefined;return{price:s,volume:o,marketCap:i,formattedPrice:t(s),formattedVolume:(0,m.formatCompactCurrency)(o,n),formattedMarketCap:(0,m.formatCompactCurrency)(i,n)}},[M,f,S,E,A,e,h,n,g]);return{marketData:M,marketDataFiat:_,isLoading:b,error:w,isNativeToken:A}}}}},{package:"$root$",file:"ui/hooks/useTokenInsightsData.ts"}],[7340,{"../ducks/metamask/metamask":7137,"../selectors":8207,"../selectors/multichain/networks":8218,"../store/actions":8241,"./useMultiPolling":7307,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(6),t=(0,o.useSelector)(a.getUseTokenDetection),n=(0,o.useSelector)(a.getUseTransactionSimulations),s=(0,o.useSelector)(u.getCompletedOnboarding),d=(0,o.useSelector)(u.getIsUnlocked),m=(0,o.useSelector)(a.getUseExternalServices),p=(0,o.useSelector)(i.getEnabledChainIds),h=s&&d&&m&&(t||n);let f,g,y;return e[0]!==h||e[1]!==p?(f=h?p:[],e[0]=h,e[1]=p,e[2]=f):f=e[2],e[3]!==f?(g={startPolling:c.tokenListStartPolling,stopPollingByPollingToken:c.tokenListStopPollingByPollingToken,input:f},e[3]=f,e[4]=g):g=e[4],(0,l.default)(g),e[5]===Symbol.for("react.memo_cache_sentinel")?(y={},e[5]=y):y=e[5],y}}}},{package:"$root$",file:"ui/hooks/useTokenListPolling.ts"}],[7341,{"../ducks/metamask/metamask":7137,"../selectors":8207,"../selectors/multichain/networks":8218,"../store/actions":8241,"./useMultiPolling":7307,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(0,o.useSelector)(u.getCompletedOnboarding),n=(0,o.useSelector)(u.getIsUnlocked),s=(0,o.useSelector)(a.getUseCurrencyRateCheck),d=(0,o.useSelector)(i.getEnabledChainIds),m=t&&n&&s;let p;e[0]!==m||e[1]!==d?(p={startPolling:c.tokenRatesStartPolling,stopPollingByPollingToken:c.tokenRatesStopPollingByPollingToken,input:m?[d]:[]},e[0]=m,e[1]=d,e[2]=p):p=e[2],(0,l.default)(p)}}}},{package:"$root$",file:"ui/hooks/useTokenRatesPolling.ts"}],[7342,{"../../shared/constants/time":5913,"../../shared/modules/selectors/networks":6034,"../../shared/modules/string-utils":6045,"../selectors":8207,"./useEqualityCheck":7293,"@metamask/eth-token-tracker":2155,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTracker=function(e){const t=(0,r.c)(30),{tokens:n,address:s,includeFailedTokens:h,hideZeroBalanceTokens:f}=e,g=h!==undefined&&h,y=f!==undefined&&f,{chainId:S,rpcUrl:k}=(0,i.useSelector)(u.getProviderConfig),{address:v}=(0,i.useSelector)(c.getSelectedInternalAccount,i.shallowEqual),b=s??v;let T;t[0]!==(null==n?void 0:n.length)?(T=()=>(null==n?void 0:n.length)>=0,t[0]=null==n?void 0:n.length,t[1]=T):T=t[1];const[w,C]=(0,o.useState)(T);let A;t[2]===Symbol.for("react.memo_cache_sentinel")?(A=[],t[2]=A):A=t[2];const[I,E]=(0,o.useState)(A),[M,_]=(0,o.useState)(null),P=(0,o.useRef)(null),N=(0,m.useEqualityCheck)(n);let R;t[3]!==y||t[4]!==N?(R=e=>{const t=(y?e.filter(p):e).map(e=>{const t=N.find(t=>(0,d.isEqualCaseInsensitive)(t.address,e.address));return{...e,isERC721:null==t?void 0:t.isERC721,image:null==t?void 0:t.image}});E(t),C(!1),_(null)},t[3]=y,t[4]=N,t[5]=R):R=t[5];const x=R;let O;t[6]===Symbol.for("react.memo_cache_sentinel")?(O=e=>{_(e),C(!1)},t[6]=O):O=t[6];const D=O;let B;t[7]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{P.current&&(P.current.stop(),P.current.removeAllListeners("update"),P.current.removeAllListeners("error"),P.current=null)},t[7]=B):B=t[7];const $=B;let F;t[8]!==g||t[9]!==x?(F=(e,t)=>{$(),P.current=new a.default({userAddress:e,provider:global.ethereumProvider,tokens:t,includeFailedTokens:g,pollingInterval:8*l.SECOND,balanceDecimals:5}),P.current.on("update",x),P.current.on("error",D),P.current.updateBalances()},t[8]=g,t[9]=x,t[10]=F):F=t[10];const U=F;let L,j,H,G,W;t[11]===Symbol.for("react.memo_cache_sentinel")?(j=()=>$,L=[$],t[11]=L,t[12]=j):(L=t[11],j=t[12]);(0,o.useEffect)(j,L),t[13]!==U||t[14]!==S||t[15]!==N||t[16]!==x||t[17]!==b?(H=()=>{C(!0),b&&S!==undefined&&global.ethereumProvider?(0===N.length&&x([]),U(b,N)):$()},t[13]=U,t[14]=S,t[15]=N,t[16]=x,t[17]=b,t[18]=H):H=t[18];t[19]!==U||t[20]!==S||t[21]!==N||t[22]!==k||t[23]!==x||t[24]!==b?(G=[b,$,S,k,N,x,U],t[19]=U,t[20]=S,t[21]=N,t[22]=k,t[23]=x,t[24]=b,t[25]=G):G=t[25];(0,o.useEffect)(H,G),t[26]!==M||t[27]!==w||t[28]!==I?(W={loading:w,tokensWithBalances:I,error:M},t[26]=M,t[27]=w,t[28]=I,t[29]=W):W=t[29];return W};var s,r=e("react-compiler-runtime"),o=e("react"),a=(s=e("@metamask/eth-token-tracker"))&&s.__esModule?s:{default:s},i=e("react-redux"),c=e("../selectors"),u=e("../../shared/modules/selectors/networks"),l=e("../../shared/constants/time"),d=e("../../shared/modules/string-utils"),m=e("./useEqualityCheck");function p(e){return Number(e.balance)>0}}}},{package:"$root$",file:"ui/hooks/useTokenTracker.js"}],[7343,{"../../shared/lib/trust-signals":6005,"../helpers/utils/token-cache-utils":7201,"../selectors/selectors":8227,"./useTrustSignals":7346,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTrustSignalsForAddresses=function(e,t){const n=(0,s.c)(11);let o;n[0]!==e||n[1]!==t?(o=n=>(0,a.getTokenScanResultsForAddresses)(n,e,t),n[0]=e,n[1]=t,n[2]=o):o=n[2];const l=(0,r.useSelector)(o);let d;e:{if(!e||!t||!Array.isArray(t)){let e;n[3]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[3]=e):e=n[3],d=e;break e}let s;if(n[4]!==e||n[5]!==t||n[6]!==l){let r;n[8]!==e||n[9]!==l?(r=t=>{if(!t)return{state:c.TrustSignalDisplayState.Unknown,label:null};const n=(0,i.generateTokenCacheKey)(e,t);return{state:u(l[n]),label:null}},n[8]=e,n[9]=l,n[10]=r):r=n[10],s=t.map(r),n[4]=e,n[5]=t,n[6]=l,n[7]=s}else s=n[7];d=s}return d};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../shared/lib/trust-signals"),a=e("../selectors/selectors"),i=e("../helpers/utils/token-cache-utils"),c=e("./useTrustSignals");function u(e){var t;const n=null==e||null===(t=e.data)||void 0===t?void 0:t.result_type;if(!n)return c.TrustSignalDisplayState.Unknown;switch(n){case o.ResultType.Malicious:return c.TrustSignalDisplayState.Malicious;case o.ResultType.Warning:return c.TrustSignalDisplayState.Warning;case o.ResultType.Benign:default:return c.TrustSignalDisplayState.Unknown}}}}},{package:"$root$",file:"ui/hooks/useTokenTrustSignals.ts"}],[7344,{"../../shared/constants/network":5896,"../../shared/constants/swaps":5911,"../../shared/modules/hexstring-utils":6023,"../../shared/modules/selectors/networks":6034,"../../shared/modules/swaps.utils":6046,"../ducks/metamask/metamask":7137,"../ducks/swaps/swaps":7145,"../helpers/utils/token-util":7203,"../selectors":8207,"./useEqualityCheck":7293,"@metamask/assets-controllers":1324,"bignumber.js":4064,lodash:4940,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRenderableTokenData=k,n.useTokensToSearch=function({usersTokens:e=[],topTokens:t={},shuffledTokensList:n,tokenBucketPriority:s=g.TokenBucketPriority.owned}){const c=(0,o.useSelector)(d.getCurrentChainId),u=(0,o.useSelector)(l.getTokenExchangeRates,i.isEqual),f=(0,o.useSelector)(m.getConversionRate),y=(0,o.useSelector)(m.getCurrentCurrency),v=(0,o.useSelector)(l.getSwapsDefaultToken,o.shallowEqual),b=(0,o.useSelector)(l.getTokenList,i.isEqual),T=(0,S.useEqualityCheck)(t),w=(0,S.useEqualityCheck)(e),C=k(v,u,f,y,c,b),A=(0,S.useEqualityCheck)(C),I=(0,o.useSelector)(p.getSwapsTokens,i.isEqual)||[],E=I.length?I:[A,...n.filter(e=>e.symbol!==A.symbol)],M=(0,S.useEqualityCheck)(E);return(0,r.useMemo)(()=>{const e=w.reduce((e,t)=>({...e,[t.address.toLowerCase()]:t}),{}),t={owned:[],top:[],others:[]};return(0,i.uniqBy)([A,...M,...w],e=>e.address.toLowerCase()).forEach(n=>{const r=k({...e[n.address.toLowerCase()],...n},u,f,y,c,b);s===g.TokenBucketPriority.owned?(0,h.isSwapsDefaultTokenSymbol)(r.symbol,c)||e[n.address.toLowerCase()]?t.owned.push(r):T[n.address.toLowerCase()]?t.top[T[n.address.toLowerCase()].index]=r:t.others.push(r):T[n.address.toLowerCase()]?t.top[T[n.address.toLowerCase()].index]=r:(0,h.isSwapsDefaultTokenSymbol)(r.symbol,c)||e[n.address.toLowerCase()]?t.owned.push(r):t.others.push(r)}),t.owned=t.owned.sort(({rawFiat:e},{rawFiat:t})=>new a.default(e||0).gt(t||0)?-1:1),t.top=t.top.filter(Boolean),s===g.TokenBucketPriority.owned?[...t.owned,...t.top,...t.others]:[...t.top,...t.owned,...t.others]},[M,w,T,u,f,y,A,c,b,s])};var s,r=e("react"),o=e("react-redux"),a=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("lodash"),c=e("@metamask/assets-controllers"),u=e("../helpers/utils/token-util"),l=e("../selectors"),d=e("../../shared/modules/selectors/networks"),m=e("../ducks/metamask/metamask"),p=e("../ducks/swaps/swaps"),h=e("../../shared/modules/swaps.utils"),f=e("../../shared/modules/hexstring-utils"),g=e("../../shared/constants/swaps"),y=e("../../shared/constants/network"),S=e("./useEqualityCheck");function k(e,t,n,s,r,o){var i,l;const{symbol:d,name:m,address:p,iconUrl:g,string:S,balance:k,decimals:v}=e;let b;(0,h.isSwapsDefaultTokenSymbol)(d,r)?b=1:S&&n>0&&(b=t[(0,f.toChecksumHexAddress)(p)]);const T=(0,u.getTokenFiatAmount)(b,n,s,S,d,!0)||"",w=T?(0,u.getTokenFiatAmount)(b,n,s,S,d,!1):"",C=r===y.CHAIN_IDS.SEPOLIA?y.CHAIN_IDS.MAINNET:r,A=(d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.SEPOLIA||d===y.CURRENCY_SYMBOLS.BNB&&r===y.CHAIN_IDS.BSC||d===y.CURRENCY_SYMBOLS.MATIC&&r===y.CHAIN_IDS.POLYGON||d===y.CURRENCY_SYMBOLS.AVALANCHE&&r===y.CHAIN_IDS.AVALANCHE||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.OPTIMISM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ARBITRUM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.LINEA_MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ZKSYNC_ERA||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.BASE?g:(0,c.formatIconUrlWithProxy)({chainId:C,tokenAddress:p||""}))||(null==e?void 0:e.image);return{...e,primaryLabel:d,secondaryLabel:m||(null===(i=o[null==p?void 0:p.toLowerCase()])||void 0===i?void 0:i.name),rightPrimaryLabel:S&&`${new a.default(S).round(6).toString()} ${d}`,rightSecondaryLabel:T,iconUrl:A,identiconAddress:A?null:p,balance:k,decimals:v,name:m||(null===(l=o[null==p?void 0:p.toLowerCase()])||void 0===l?void 0:l.name),rawFiat:w,image:e.image||e.iconUrl}}}}},{package:"$root$",file:"ui/hooks/useTokensToSearch.js"}],[7345,{"../../shared/constants/bridge":5878,"../../shared/lib/metamask-controller-utils":5981,"../../shared/lib/transactions-controller-utils":6001,"../../shared/modules/string-utils":6045,"../ducks/bridge-status/selectors":7124,"../ducks/locale/locale":7136,"../ducks/metamask/metamask":7137,"../helpers/constants/common":7147,"../helpers/constants/transactions":7160,"../helpers/utils/common.util":7174,"../helpers/utils/token-util":7203,"../helpers/utils/transactions.util":7204,"../pages/bridge/hooks/useBridgeTokenDisplayData":7376,"../pages/confirmations/components/simulation-details/formatAmount":7678,"../selectors":8207,"../store/actions":8241,"./bridge/useBridgeChainInfo":7213,"./useCurrencyDisplay":7287,"./useCurrentAsset":7289,"./useI18nContext":7301,"./useSwappedTokenValue":7328,"./useTokenData":7335,"./useTokenDisplayValue":7337,"./useTokenFiatAmount":7338,"./useUserPreferencedCurrency":7347,"@metamask/transaction-controller":3085,"bignumber.js":4064,react:5358,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionDisplayData=function(e){var t,n,R,O,D,B,$,F;const U=(0,s.useDispatch)(),L=(0,s.useSelector)(k.getIntlLocale),j=(0,P.useCurrentAsset)(),H=(0,s.useSelector)(i.getAllTokens),G=(0,s.useSelector)(i.getSelectedAddress),W=(0,s.useSelector)(p.getNfts),q=(0,s.useSelector)(i.getAllDetectedTokens),Y=(0,s.useSelector)(i.selectERC20TokensByChain),V=(0,w.useI18nContext)(),K=e.initialTransaction.id,Q=(0,s.useSelector)(e=>(0,T.selectBridgeHistoryItemForTxMetaId)(e,K)),{destNetwork:J}=(0,N.default)({bridgeHistoryItem:Q,srcTxMeta:e.initialTransaction}),z=v.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==J?void 0:J.chainId],{initialTransaction:Z,primaryTransaction:X}=e,{transferInformation:ee,type:te}=Z,{from:ne,to:se}=Z.txParams||{},re=[o.TransactionType.swap,o.TransactionType.bridge].includes(te)&&Boolean(Q),oe=(0,s.useSelector)(e=>{var t;return(0,i.getKnownMethodData)(e,null==Z||null===(t=Z.txParams)||void 0===t?void 0:t.data)})||{},ae=(0,c.getStatusKey)(X)in m.PENDING_STATUS_HASH,ie=(0,r.useRef)(!0),ce=null===(t=X.txParams)||void 0===t?void 0:t.value;let ue="-",le=se;const de=null==Z||null===(n=Z.txParams)||void 0===n?void 0:n.data,me=m.TOKEN_CATEGORY_HASH[te];let pe=null;const[he,fe]=(0,r.useState)(null);var ge,ye,Se,ke,ve,be;me&&(pe=(null==H||null===(ge=H[null==e||null===(ye=e.initialTransaction)||void 0===ye?void 0:ye.chainId])||void 0===ge||null===(ge=ge[G])||void 0===ge?void 0:ge.find(({address:e})=>(0,f.isEqualCaseInsensitive)(e,le)))||(null==q||null===(Se=q[null==e||null===(ke=e.initialTransaction)||void 0===ke?void 0:ke.chainId])||void 0===Se||null===(Se=Se[G])||void 0===Se?void 0:Se.find(({address:e})=>(0,f.isEqualCaseInsensitive)(e,le)))||(null==Y||null===(ve=Y[null==e||null===(be=e.initialTransaction)||void 0===be?void 0:be.chainId])||void 0===ve||null===(ve=ve.data)||void 0===ve?void 0:ve[le.toLowerCase()]));(0,r.useEffect)(()=>()=>{ie.current=!1},[]),(0,r.useEffect)(()=>{!async function(){if(me&&!pe)try{const e=await(0,d.getAssetDetails)(le,ne,de,W);!0===ie.current&&fe(e)}catch(e){console.warn("Unable to set asset details",{error:e,transactionData:de})}}()},[me,pe,le,ne,W,ie,de]),he&&(pe={address:he.toAddress,symbol:he.symbol,decimals:he.decimals});const Te=(0,M.useTokenData)(de,me),we=(0,d.getTokenIdParam)(Te)??(0,g.getTokenValueParam)(Te),Ce=me&&W.find(({address:e,tokenId:t})=>(0,f.isEqualCaseInsensitive)(e,le)&&t===we);let Ae=(0,E.useTokenDisplayValue)(de,pe,me);null!=ee&&ee.decimals&&(Ae=(0,b.calcTokenAmount)(ee.amount,ee.decimals).toString(10));const Ie=(0,C.useTokenFiatAmount)(null===(R=pe)||void 0===R?void 0:R.address,Ae,null===(O=pe)||void 0===O?void 0:O.symbol,undefined,!0,null==Z?void 0:Z.chainId);let Ee,Me=me?null===(D=pe)||void 0===D?void 0:D.symbol:undefined,_e=me?Ae:undefined,Pe=me?Ie:undefined;const{swapTokenValue:Ne,isNegative:Re,swapTokenFiatAmount:xe,isViewingReceivedTokenFromSwap:Oe}=(0,_.useSwappedTokenValue)(e,j),De=(0,y.useBridgeTokenDisplayData)(e);if(x.includes(te))Ee=V("signatureRequest");else if(te===o.TransactionType.swap){Ee=V("swapTokenToToken",[De.sourceTokenSymbol??Z.sourceTokenSymbol,De.destinationTokenSymbol??Z.destinationTokenSymbol]);const e=De.sourceTokenSymbol??Z.sourceTokenSymbol;Me=Oe?j.symbol:e;const t=De.sourceTokenAmountSent??Ne;_e=t?(0,S.formatAmount)(L,new a.default(t)):undefined,Pe=De.displayCurrencyAmount??xe,ue=Re?"":Oe?"+":"-"}else if(te===o.TransactionType.swapAndSend){const e=Z.swapAndSendRecipient===ne;le=Z.swapAndSendRecipient,Ee=V("sentTokenAsToken",[Z.sourceTokenSymbol,Z.destinationTokenSymbol]),Me=Oe&&e?j.symbol:Z.sourceTokenSymbol,_e=Ne,Pe=xe,ue=Re?"":Oe&&e?"+":"-"}else if(te===o.TransactionType.swapApproval)Ee=V("swapApproval",[De.sourceTokenSymbol??X.sourceTokenSymbol]),Me=De.sourceTokenSymbol??X.sourceTokenSymbol;else if(te===o.TransactionType.tokenMethodApprove){var Be;ue="",Ee=V("approveSpendingCap",[(null===(Be=pe)||void 0===Be?void 0:Be.symbol)||V("token").toLowerCase()])}else if(te===o.TransactionType.tokenMethodSetApprovalForAll){var $e,Fe,Ue;ue="",Ee=!(null!=Te&&null!==($e=Te.args)&&void 0!==$e&&$e[1])?V("revokePermissionTitle",[(null===(Fe=pe)||void 0===Fe?void 0:Fe.symbol)||(null==Ce?void 0:Ce.name)||V("token")]):V("setApprovalForAllTitle",[(null===(Ue=pe)||void 0===Ue?void 0:Ue.symbol)||V("token")])}else if(te===o.TransactionType.tokenMethodIncreaseAllowance){var Le;ue="",Ee=V("approveIncreaseAllowance",[(null===(Le=pe)||void 0===Le?void 0:Le.symbol)||V("token")])}else if(te===o.TransactionType.contractInteraction||te===o.TransactionType.batch||te===o.TransactionType.revokeDelegation){const e=(0,c.getTransactionTypeTitle)(V,te);Ee=(null==oe?void 0:oe.name)&&(0,u.camelCaseToCapitalize)(oe.name)||e}else if(te===o.TransactionType.deployContract)Ee=(0,c.getTransactionTypeTitle)(V,te);else if(te===o.TransactionType.incoming)Ee=V("received"),ue="";else if(te===o.TransactionType.tokenMethodTransferFrom||te===o.TransactionType.tokenMethodTransfer){var je;Ee=V("sentSpecifiedTokens",[(null===(je=pe)||void 0===je?void 0:je.symbol)||(null==Ce?void 0:Ce.name)||V("token")]),le=(0,d.getTokenAddressParam)(Te)}else te===o.TransactionType.tokenMethodSafeTransferFrom?(Ee=V("safeTransferFrom"),le=(0,d.getTokenAddressParam)(Te)):te===o.TransactionType.simpleSend?Ee=V("sent"):te===o.TransactionType.bridgeApproval?(Ee=V("bridgeApproval",[De.sourceTokenSymbol]),Me=De.sourceTokenSymbol):te===o.TransactionType.bridge?(Ee=z?V("bridgedToChain",[z]):V("bridged"),Me=De.sourceTokenSymbol,_e=(0,S.formatAmount)(L,new a.default(De.sourceTokenAmountSent??0)),Pe=De.displayCurrencyAmount):U((0,h.captureSingleException)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${te}`));const He=(0,A.useUserPreferencedCurrency)(l.PRIMARY,{},null==e||null===(B=e.initialTransaction)||void 0===B?void 0:B.chainId),Ge=(0,A.useUserPreferencedCurrency)(l.SECONDARY),[We]=(0,I.useCurrencyDisplay)(ce,{prefix:ue,displayValue:_e,suffix:Me,...He},null==e||null===($=e.initialTransaction)||void 0===$?void 0:$.chainId),[qe]=(0,I.useCurrencyDisplay)(ce,{prefix:ue,displayValue:re?De.displayCurrencyAmount:Pe,hideLabel:me||Boolean(Ne),...Ge},null==e||null===(F=e.initialTransaction)||void 0===F?void 0:F.chainId);!le&&ee&&(le=se);return{title:Ee,primaryCurrency:te===o.TransactionType.swap&&ae?"":We,recipientAddress:le,secondaryCurrency:me&&!Ie||!re&&[o.TransactionType.swap,o.TransactionType.swapAndSend].includes(te)&&!xe||re&&!qe?undefined:qe,isPending:ae}};var s=e("react-redux"),r=e("react"),o=e("@metamask/transaction-controller"),a=R(e("bignumber.js")),i=e("../selectors"),c=e("../helpers/utils/transactions.util"),u=e("../helpers/utils/common.util"),l=e("../helpers/constants/common"),d=e("../helpers/utils/token-util"),m=e("../helpers/constants/transactions"),p=e("../ducks/metamask/metamask"),h=e("../store/actions"),f=e("../../shared/modules/string-utils"),g=e("../../shared/lib/metamask-controller-utils"),y=e("../pages/bridge/hooks/useBridgeTokenDisplayData"),S=e("../pages/confirmations/components/simulation-details/formatAmount"),k=e("../ducks/locale/locale"),v=e("../../shared/constants/bridge"),b=e("../../shared/lib/transactions-controller-utils"),T=e("../ducks/bridge-status/selectors"),w=e("./useI18nContext"),C=e("./useTokenFiatAmount"),A=e("./useUserPreferencedCurrency"),I=e("./useCurrencyDisplay"),E=e("./useTokenDisplayValue"),M=e("./useTokenData"),_=e("./useSwappedTokenValue"),P=e("./useCurrentAsset"),N=R(e("./bridge/useBridgeChainInfo"));function R(e){return e&&e.__esModule?e:{default:e}}const x=[null,undefined,o.TransactionType.sign,o.TransactionType.personalSign,o.TransactionType.signTypedData,o.TransactionType.ethDecrypt,o.TransactionType.ethGetEncryptionPublicKey]}}},{package:"$root$",file:"ui/hooks/useTransactionDisplayData.js"}],[7346,{"../../shared/lib/trust-signals":6005,"../selectors":8207,"./useI18nContext":7301,"@metamask/name-controller":2414,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrustSignalDisplayState=void 0,n.useTrustSignal=function(e,t,n){return u([{value:e,type:t,chainId:n}])[0]},n.useTrustSignals=u;var s=e("react-redux"),r=e("@metamask/name-controller"),o=e("../selectors"),a=e("../../shared/lib/trust-signals"),i=e("./useI18nContext");let c=n.TrustSignalDisplayState=function(e){return e.Loading="Loading",e.Malicious="malicious",e.Petname="petname",e.Verified="verified",e.Warning="warning",e.Recognized="recognized",e.Unknown="unknown",e}({});function u(e){const t=(0,i.useI18nContext)();return(0,s.useSelector)(n=>e.map(({value:e,type:s,chainId:i})=>{if(s!==r.NameType.ETHEREUM_ADDRESS)return{state:c.Unknown,label:null};if(!i)return{state:c.Unknown,label:null};const u=(0,a.mapChainIdToSupportedEVMChain)(i);if(!u)return{state:c.Unknown,label:null};const l=(0,a.createCacheKey)(u,e),d=(0,o.getAddressSecurityAlertResponse)(n,l);if(!d)return{state:c.Unknown,label:null};const m=function(e){if(!e.result_type)return c.Unknown;switch(e.result_type){case a.ResultType.Loading:return c.Loading;case a.ResultType.Malicious:return c.Malicious;case a.ResultType.Warning:return c.Warning;case a.ResultType.Trusted:return c.Verified;case a.ResultType.Benign:case a.ResultType.ErrorResult:default:return c.Unknown}}(d);return{state:m,label:m===c.Malicious?t("nameModalTitleMalicious"):d.label||null}}))}}}},{package:"$root$",file:"ui/hooks/useTrustSignals.ts"}],[7347,{"../../shared/constants/common":5879,"../../shared/constants/network":5896,"../constants":7101,"../helpers/constants/common":7147,"../selectors":8207,"../selectors/multichain":8216,"./useMultichainSelector":7311,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserPreferencedCurrency=function(e,t,n){const m=(0,s.c)(8);let p;m[0]!==t?(p=t===undefined?{}:t,m[0]=t,m[1]=p):p=m[1];const h=p,f=n===undefined?null:n,g=(0,r.useSelector)(o.getSelectedInternalAccount),y=h.account??g,S=(0,d.useMultichainSelector)(a.getMultichainNativeCurrency,y),{showNativeTokenAsMainBalance:k}=(0,r.useSelector)(o.getPreferences,r.shallowEqual),v=(0,d.useMultichainSelector)(a.getMultichainShouldShowFiat,y),b=(0,d.useMultichainSelector)(a.getMultichainCurrentCurrency,y),T=h.numberOfDecimals||2;let w;m[2]!==b||m[3]!==T?(w={currency:b,numberOfDecimals:T},m[2]=b,m[3]=T,m[4]=w):w=m[4];const C=w,A=f?l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[f]||S||c.EtherDenomination.ETH:S||c.EtherDenomination.ETH,I=h.numberOfDecimals||h.ethNumberOfDecimals||u.ETH_DEFAULT_DECIMALS;let E;m[5]!==A||m[6]!==I?(E={currency:A,numberOfDecimals:I},m[5]=A,m[6]=I,m[7]=E):E=m[7];const M=E;if(h.showNativeOverride)return M;if(h.showFiatOverride)return C;if(!v)return M;if(h.shouldCheckShowNativeToken&&k||!h.shouldCheckShowNativeToken)return e===i.PRIMARY?M:C;return e===i.PRIMARY?C:M};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../selectors"),a=e("../selectors/multichain"),i=e("../helpers/constants/common"),c=e("../../shared/constants/common"),u=e("../constants"),l=e("../../shared/constants/network"),d=e("./useMultichainSelector")}}},{package:"$root$",file:"ui/hooks/useUserPreferencedCurrency.js"}],[7348,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWindowFocus=void 0;var s=e("react-compiler-runtime"),r=e("react");n.useWindowFocus=()=>{const e=(0,s.c)(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=document.hasFocus(),e[0]=t):t=e[0];const[n,o]=(0,r.useState)(t);let a,i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{const e=()=>o(!0),t=()=>o(!1);return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}},i=[],e[1]=a,e[2]=i):(a=e[1],i=e[2]),(0,r.useEffect)(a,i),n}}}},{package:"$root$",file:"ui/hooks/useWindowFocus.ts"}],[7349,{"../app/scripts/constants/sentry-state":6,"../app/scripts/lib/util":368,"../shared/constants/alerts":5874,"../shared/constants/app":5876,"../shared/constants/copy":5880,"../shared/lib/error-utils":5970,"../shared/lib/promise-with-resolvers":5991,"../shared/lib/sentry":5992,"../shared/lib/switch-direction":5997,"../shared/lib/trace":5999,"../shared/modules/browser-runtime.utils":6012,"../shared/modules/object.utils":6028,"../shared/modules/selectors/networks":6034,"./constants":7101,"./ducks/alerts":7119,"./ducks/metamask/metamask":7137,"./helpers/utils/critical-startup-error-handler":7176,"./helpers/utils/display-critical-error":7177,"./helpers/utils/tags":7200,"./helpers/utils/tx-helper":7206,"./pages":7917,"./selectors":8207,"./store/actions":8241,"./store/background-connection":8242,"./store/store":8247,"@metamask/chain-agnostic-permission":1459,"copy-to-clipboard":4244,loglevel:4948,react:5358,"react-dom":5275,"webextension-polyfill":5864},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CriticalErrorTranslationKey",{enumerable:!0,get:function(){return R.CriticalErrorTranslationKey}}),Object.defineProperty(n,"CriticalStartupErrorHandler",{enumerable:!0,get:function(){return N.CriticalStartupErrorHandler}}),n.connectToBackground=void 0,n.default=async function(e){const{backgroundConnection:t,traceContext:n}=e,s=await(0,k.trace)({name:k.TraceName.GetState,parentContext:n},t.getState.bind(t)),c=await async function(e,t){const{traceContext:n}=t,s=(0,_.getStartupTraceTags)({metamask:e}),i=await(0,k.trace)({name:k.TraceName.SetupStore,parentContext:n,tags:s},()=>B(e,t.activeTab));return global.metamask={updateCurrentLocale:e=>{i.dispatch(b.updateCurrentLocale(e))},setFeatureFlag:(e,t)=>{i.dispatch(b.setFeatureFlag(e,t))}},await(0,k.trace)({name:k.TraceName.InitialActions,parentContext:n},()=>async function(e){const t=e.getState();try{const n=(0,f.getBrowserName)().toLowerCase(),{os:s}=t.metamask.browserEnvironment||{};s&&n&&e.dispatch(b.setBrowserEnvironment(s,n)).catch(e=>{r.default.error("Failed to update browser environment:",e)})}catch(e){r.default.error("Failed to get browser name:",e)}const n=(0,w.getNetworkToAutomaticallySwitchTo)(t);n&&await e.dispatch(b.automaticallySwitchNetwork(n));if((0,l.getEnvironmentType)()===h.ENVIRONMENT_TYPE_POPUP){const t=Date.now();global.metamask.id=t,await e.dispatch(b.setCurrentExtensionPopupId(t))}try{const n=async t=>{(0,A.getIsUnlocked)(t)&&await e.dispatch(b.checkIsSeedlessPasswordOutdated())};await n(t);const s=setInterval(()=>{const t=e.getState(),r=(0,w.getFirstTimeFlowType)(t),o=(0,w.getIsSocialLoginFlow)(t);null===r||o?n(t):clearInterval(s)},P.SEEDLESS_PASSWORD_OUTDATED_CHECK_INTERVAL_MS)}catch(e){r.default.error("[Metamask] checkIsSeedlessPasswordOutdated error",e)}}(i)),(0,k.trace)({name:k.TraceName.FirstRender,parentContext:n},()=>(0,a.render)(o.default.createElement(I.default,{store:i}),t.container)),i}(s,e);return await t.startPatches(),function(e){0;window.stateHooks.reloadExtension=()=>{i.default.runtime.reload()},window.stateHooks.getCleanAppState=async function(){return $(e)},window.stateHooks.getSentryAppState=function(){const t=e.getState();return(0,m.maskObject)(t,p.SENTRY_UI_STATE)},window.stateHooks.getLogs=function(){const t=e.getState(),{logs:n}=t.metamask;return Object.values(n).sort((e,t)=>e.timestamp-t.timestamp)}}(c),c},Object.defineProperty(n,"displayCriticalError",{enumerable:!0,get:function(){return R.displayCriticalError}}),n.getCleanAppState=$,n.setupInitialStore=B;var s=O(e("copy-to-clipboard")),r=O(e("loglevel")),o=O(e("react")),a=e("react-dom"),i=O(e("webextension-polyfill")),c=e("@metamask/chain-agnostic-permission"),u=(e("../shared/lib/sentry"),e("../shared/lib/promise-with-resolvers")),l=e("../app/scripts/lib/util"),d=e("../shared/constants/alerts"),m=e("../shared/modules/object.utils"),p=e("../app/scripts/constants/sentry-state"),h=e("../shared/constants/app"),f=e("../shared/modules/browser-runtime.utils"),g=e("../shared/constants/copy"),y=e("../shared/lib/switch-direction"),S=e("../shared/lib/error-utils"),k=e("../shared/lib/trace"),v=e("../shared/modules/selectors/networks"),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(e("./store/actions")),T=O(e("./store/store")),w=e("./selectors"),C=e("./ducks/alerts"),A=e("./ducks/metamask/metamask"),I=O(e("./pages")),E=O(e("./helpers/utils/tx-helper")),M=e("./store/background-connection"),_=e("./helpers/utils/tags"),P=e("./constants"),N=e("./helpers/utils/critical-startup-error-handler"),R=e("./helpers/utils/display-critical-error");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}r.default.setLevel(global.METAMASK_DEBUG?"debug":"warn",!1);const D=(0,u.withResolvers)();async function B(e,t){e.featureFlags||(e.featureFlags={});const{currentLocaleMessages:n,enLocaleMessages:s}=await(0,S.setupLocale)(e.currentLocale);"rtl"===e.textDirection&&(0,y.switchDirection)("rtl");const r={activeTab:t,metamask:e,appState:{},localeMessages:{currentLocale:e.currentLocale,current:n,en:s}};if((0,l.getEnvironmentType)()===h.ENVIRONMENT_TYPE_POPUP||(0,l.getEnvironmentType)()===h.ENVIRONMENT_TYPE_SIDEPANEL){const{origin:e}=r.activeTab,t=(0,w.getAllPermittedAccountsForCurrentTab)(r),n=(0,w.getSelectedInternalAccount)(r),s=n&&(0,c.isInternalAccountInPermittedAccountIds)(n,t),o=(0,A.getUnconnectedAccountAlertShown)(r),a=(0,A.getUnconnectedAccountAlertEnabledness)(r);e&&a&&!o[e]&&t.length>0&&!s&&(r[d.AlertTypes.unconnectedAccount]={state:C.ALERT_STATE.OPEN},b.setUnconnectedAccountAlertShown(e))}const o=(0,T.default)(r);D.resolve(o);const a=(0,w.getUnapprovedTransactions)(e),i=(0,E.default)(a,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.networkId,(0,v.getCurrentChainId)({metamask:e}));return i.length>0&&o.dispatch(b.showConfTxPage({id:i[0].id})),o}async function $(e){const t={...e.getState()};return t.version=global.platform.getVersion(),t.browser=window.navigator.userAgent,t.metamask={...t.metamask,socialLoginEmail:undefined},t}n.connectToBackground=(e,t)=>{(0,M.setBackgroundConnection)(e),e.onNotification(async e=>{const{method:n}=e;if("sendUpdate"===n){(await D.promise).dispatch(b.updateMetamaskState(e.params[0]))}else{if("startUISync"!==n)throw new Error(`Internal JSON-RPC Notification Not Handled:\n\n ${JSON.stringify(e)}`);await t()}})},window.logStateString=async function(e){const t=await window.stateHooks.getCleanAppState(),n=window.stateHooks.getLogs();i.default.runtime.getPlatformInfo().then(s=>{t.platform=s,t.logs=n;const r=JSON.stringify(t,null,2);e(null,r)}).catch(t=>{e(t)})},window.logState=function(e){return window.logStateString((t,n)=>{t?console.error(t.message):e?((0,s.default)(n,g.COPY_OPTIONS),console.log("State log copied")):console.log(n)})}}}},{package:"$root$",file:"ui/index.js"}],[7350,{react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyLayout=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("react"))&&s.__esModule?s:{default:s};n.LegacyLayout=e=>{const t=(0,r.c)(2),{children:n}=e;let s;return t[0]!==n?(s=o.default.createElement("div",{className:"mm-box main-container-wrapper"},n),t[0]=n,t[1]=s):s=t[1],s}}}},{package:"$root$",file:"ui/layouts/legacy-layout.tsx"}],[7351,{classnames:4209,react:5358,"react-compiler-runtime":5272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RootLayout=void 0;var s=e("react-compiler-runtime"),r=a(e("react")),o=a(e("classnames"));function a(e){return e&&e.__esModule?e:{default:e}}n.RootLayout=e=>{const t=(0,s.c)(3),{children:n}=e;let a,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.default)("w-full h-full flex flex-col","max-w-[clamp(var(--width-sm),85vw,var(--width-max))]","group-[.app--sidepanel]:max-w-[var(--width-max-sidepanel)]"),t[0]=a):a=t[0],t[1]!==n?(i=r.default.createElement("div",{className:a},n),t[1]=n,t[2]=i):i=t[2],i}}}},{package:"$root$",file:"ui/layouts/root-layout.tsx"}],[7352,{"../helpers/higher-order-components/authenticated/authenticated.container":7163,"../helpers/higher-order-components/initialized":7165,react:5358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createRouteWithLayout=void 0;var s=a(e("react")),r=a(e("../helpers/higher-order-components/authenticated/authenticated.container")),o=a(e("../helpers/higher-order-components/initialized"));function a(e){return e&&e.__esModule?e:{default:e}}n.createRouteWithLayout=e=>{const{path:t,layout:n,element:a,component:i,authenticated:c,initialized:u,children:l}=e;let d=l||a||(i?s.default.createElement(i,null):null);u&&d&&(d=s.default.createElement(o.default,null,d)),c&&d&&(d=s.default.createElement(r.default,null,d));return{path:t,element:s.default.createElement(n,null,d)}}}}},{package:"$root$",file:"ui/layouts/route-with-layout.tsx"}],[7353,{"../../../shared/modules/string-utils":6045,"../../components/app/assets/nfts/nft-details/nft-details":6110,"../../ducks/metamask/metamask":7137,"../../helpers/constants/routes":7154,"../../selectors/assets":8199,"./components/native-asset":7363,"./components/token-asset":7364,react:5358,"react-compiler-runtime":5272,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("react-redux"),a=e("react-router-dom"),i=e("../../../shared/modules/string-utils"),c=h(e("../../components/app/assets/nfts/nft-details/nft-details")),u=e("../../ducks/metamask/metamask"),l=e("../../helpers/constants/routes"),d=e("../../selectors/assets"),m=h(e("./components/native-asset")),p=h(e("./components/token-asset"));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,s.c)(25),t=(0,a.useParams)(),{chainId:n,asset:h,id:f}=t,y=h?decodeURIComponent(h):undefined;let S;e[0]!==n?(S=e=>(0,u.getNFTsByChainId)(e,n),e[0]=n,e[1]=S):S=e[1];const k=(0,o.useSelector)(S);let v;e[2]!==n||e[3]!==y?(v=e=>(0,d.getTokenByAccountAndAddressAndChainId)(e,undefined,y,n),e[2]=n,e[3]=y,e[4]=v):v=e[4];const b=(0,o.useSelector)(v);let T;if(e[5]!==y||e[6]!==f||e[7]!==k){let t;e[9]!==y||e[10]!==f?(t=e=>{const{address:t,tokenId:n}=e;return(0,i.isEqualCaseInsensitive)(t,y)&&f===n.toString()},e[9]=y,e[10]=f,e[11]=t):t=e[11],T=k.find(t),e[5]=y,e[6]=f,e[7]=k,e[8]=T}else T=e[8];const w=T;let C,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[12]=C):C=e[12],(0,r.useEffect)(g,C);e:{if(w){let t;e[13]!==n||e[14]!==w?(t=r.default.createElement(c.default,{nft:w,nftChainId:n}),e[13]=n,e[14]=w,e[15]=t):t=e[15],A=t;break e}if(!b||!n){let t;e[16]===Symbol.for("react.memo_cache_sentinel")?(t=r.default.createElement(a.Navigate,{to:l.DEFAULT_ROUTE}),e[16]=t):t=e[16],A=t;break e}if(!b.isNative&&b.address){let t;e[17]!==n||e[18]!==b?(t=r.default.createElement(p.default,{chainId:n,token:b}),e[17]=n,e[18]=b,e[19]=t):t=e[19],A=t;break e}let t;e[20]!==n||e[21]!==b?(t=r.default.createElement(m.default,{chainId:n,token:b}),e[20]=n,e[21]=b,e[22]=t):t=e[22],A=t}const I=A;let E;return e[23]!==I?(E=r.default.createElement("div",{className:"main-container asset__container"},I),e[23]=I,e[24]=E):E=e[24],E};function g(){const e=document.querySelector(".app");null==e||e.scroll(0,0)}}}},{package:"$root$",file:"ui/pages/asset/asset.tsx"}],[7354,{"../../../../app/scripts/lib/util":368,"../../../../shared/constants/transaction":5915,"../../../../shared/lib/asset-utils":5925,"../../../components/component-library":6633,"../../../ducks/metamask/metamask":7137,"../../../helpers/constants/design-system":7149,"../../../helpers/utils/confirm-tx.util":7175,"../../../hooks/useFormatters":7297,"../../../hooks/useI18nContext":7301,"../../../hooks/useMultichainSelector":7311,"../../../selectors/assets":8199,"../../../selectors/multichain":8216,"../../../selectors/selectors":8227,"../util":7373,"bignumber.js":4064,react:5358,"react-compiler-runtime":5272,"react-redux":5323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetMarketDetails=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("react-redux"),i=e("bignumber.js"),c=e("../../../helpers/utils/confirm-tx.util"),u=e("../util"),l=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),m=e("../../../hooks/useI18nContext"),p=e("../../../ducks/metamask/metamask"),h=e("../../../hooks/useMultichainSelector"),f=e("../../../selectors/multichain"),g=e("../../../selectors/assets"),y=e("../../../selectors/selectors"),S=e("../../../../shared/constants/transaction"),k=e("../../../../app/scripts/lib/util"),v=e("../../../../shared/lib/asset-utils"),b=e("../../../hooks/useFormatters");function T(e,t){return o.default.createElement(l.Box,{display:d.Display.Flex,justifyContent:d.JustifyContent.spaceBetween},o.default.createElement(l.Text,{color:d.TextColor.textAlternative,variant:d.TextVariant.bodyMdMedium},e),t)}function w(e){return e?new i.BigNumber("string"==typeof e?e:e.toString()).toNumber():0}n.AssetMarketDetails=e=>{var t,n,s;const i=(0,r.c)(49),{asset:C,address:A}=e,I=(0,m.useI18nContext)(),E=(0,a.useSelector)(p.getCurrentCurrency),M=(0,h.useMultichainSelector)(f.getMultichainConversionRate),_=(0,a.useSelector)(y.getMarketData),P=(0,a.useSelector)(y.getCurrencyRates),N=(0,a.useSelector)(g.getAssetsRates),{formatCurrencyCompact:R,formatCompact:x}=(0,b.useFormatters)();let O;i[0]!==C.chainId?(O=(0,v.isEvmChainId)(C.chainId),i[0]=C.chainId,i[1]=O):O=i[1];const D=O,B=(0,h.useMultichainSelector)(f.getMultichainNativeCurrency),{type:$,symbol:F,chainId:U}=C,L=$===S.AssetType.native?null===(t=P[F])||void 0===t?void 0:t.conversionRate:(null===(n=P[B])||void 0===n?void 0:n.conversionRate)||0,j=(null==N||null===(s=N[A])||void 0===s?void 0:s.rate)||0,H=D?L:j;let G,W,q,Y,V,K,Q,J,z,Z,X,ee,te,ne,se,re;if(i[2]!==A||i[3]!==U||i[4]!==M||i[5]!==E||i[6]!==_||i[7]!==x||i[8]!==R||i[9]!==D||i[10]!==N||i[11]!==I||i[12]!==H||i[13]!==$){K=Symbol.for("react.early_return_sentinel");e:{var oe,ae;const e=(0,k.getConversionRatesForNativeAsset)({conversionRates:N,chainId:U}),t=$===S.AssetType.native?null==e?void 0:e.marketData:null==N||null===(oe=N[A])||void 0===oe?void 0:oe.marketData,n=D?null===(ae=_[U])||void 0===ae?void 0:ae[A]:t;if(!(M>0&&n&&(n.marketCap>0||n.totalVolume>0||n.circulatingSupply>0||n.allTimeHigh>0||n.allTimeLow>0))){K=null;break e}const s=w;let r=s(n.marketCap),a=s(n.totalVolume);const m=s(n.circulatingSupply);let p,h=s(n.allTimeHigh),f=s(n.allTimeLow);D&&(r*=H,a*=H,h*=H,f*=H),W=l.Box,i[28]===Symbol.for("react.memo_cache_sentinel")?(Y=o.default.createElement(l.Box,{marginBottom:2,borderColor:d.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i[28]=Y):Y=i[28],i[29]!==I?(p=I("marketDetails"),i[29]=I,i[30]=p):p=i[30],i[31]!==p?(V=o.default.createElement(l.Text,{variant:d.TextVariant.headingSm,paddingInline:4,paddingTop:2,paddingBottom:2},p),i[31]=p,i[32]=V):V=i[32],G=l.Box,Q=4,J=d.Display.Flex,z=d.FlexDirection.Column,Z=2,X=r>0&&T(I("marketCap"),o.default.createElement(l.Text,{variant:d.TextVariant.bodyMdMedium,"data-testid":"asset-market-cap"},R(r,E))),ee=a>0&&T(I("totalVolume"),o.default.createElement(l.Text,{variant:d.TextVariant.bodyMdMedium},R(a,E))),te=m>0&&T(I("circulatingSupply"),o.default.createElement(l.Text,{variant:d.TextVariant.bodyMdMedium},x(m))),ne=h>0&&T(I("allTimeHigh"),o.default.createElement(l.Text,{variant:d.TextVariant.bodyMdMedium},(0,c.formatCurrency)(`${h}`,E,(0,u.getPricePrecision)(h)))),q=f>0&&T(I("allTimeLow"),o.default.createElement(l.Text,{variant:d.TextVariant.bodyMdMedium},(0,c.formatCurrency)(`${f}`,E,(0,u.getPricePrecision)(f))))}i[2]=A,i[3]=U,i[4]=M,i[5]=E,i[6]=_,i[7]=x,i[8]=R,i[9]=D,i[10]=N,i[11]=I,i[12]=H,i[13]=$,i[14]=G,i[15]=W,i[16]=q,i[17]=Y,i[18]=V,i[19]=K,i[20]=Q,i[21]=J,i[22]=z,i[23]=Z,i[24]=X,i[25]=ee,i[26]=te,i[27]=ne}else G=i[14],W=i[15],q=i[16],Y=i[17],V=i[18],K=i[19],Q=i[20],J=i[21],z=i[22],Z=i[23],X=i[24],ee=i[25],te=i[26],ne=i[27];return K!==Symbol.for("react.early_return_sentinel")?K:(i[33]!==G||i[34]!==q||i[35]!==Q||i[36]!==J||i[37]!==z||i[38]!==Z||i[39]!==X||i[40]!==ee||i[41]!==te||i[42]!==ne?(se=o.default.createElement(G,{paddingInline:Q,display:J,flexDirection:z,gap:Z},X,ee,te,ne,q),i[33]=G,i[34]=q,i[35]=Q,i[36]=J,i[37]=z,i[38]=Z,i[39]=X,i[40]=ee,i[41]=te,i[42]=ne,i[43]=se):se=i[43],i[44]!==W||i[45]!==Y||i[46]!==V||i[47]!==se?(re=o.default.createElement(W,null,Y,V,se),i[44]=W,i[45]=Y,i[46]=V,i[47]=se,i[48]=re):re=i[48],re)}}}},{package:"$root$",file:"ui/pages/asset/components/asset-market-details.tsx"}],[7355,{"../../../../shared/constants/metametrics":5892,"../../../../shared/constants/transaction":5915,"../../../components/component-library":6633,"../../../components/ui/menu":7045,"../../../contexts/i18n":7105,"../../../contexts/metametrics":7110,"../../../helpers/constants/design-system":7149,"../../../helpers/constants/routes":7154,"../../../selectors":8207,"prop-types":5196,react:5358,"react-redux":5323,"react-router-dom":5333},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=(s=e("prop-types"))&&s.__esModule?s:{default:s},a=e("react-router-dom"),i=e("react-redux"),c=e("../../../contexts/i18n"),u=e("../../../contexts/metametrics"),l=e("../../../components/ui/menu"),d=e("../../../selectors"),m=e("../../../helpers/constants/routes"),p=e("../../../components/component-library"),h=e("../../../helpers/constants/design-system"),f=e("../../../../shared/constants/metametrics"),g=e("../../../../shared/constants/transaction");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}const S=({onRemove:e,onClickBlockExplorer:t,onViewTokenDetails:n,token:s,isNativeAsset:o})=>{const y=(0,r.useContext)(c.I18nContext),S=(0,r.useContext)(u.MetaMetricsContext),[k,v]=(0,r.useState)(!1),b=(0,a.useNavigate)(),T=(0,i.useSelector)(d.getBlockExplorerLinkText),w=(0,r.useRef)(!1);return r.default.createElement("div",{ref:w},r.default.createElement(p.ButtonIcon,{className:"asset-options__button","data-testid":"asset-options__button",onClick:()=>v(!0),ariaLabel:y("assetOptions"),iconName:p.IconName.MoreVertical,color:h.Color.textDefault,size:p.ButtonIconSize.Sm}),k?r.default.createElement(l.Menu,{anchorElement:w.current,onHide:()=>v(!1)},r.default.createElement(l.MenuItem,{iconName:p.IconName.Export,"data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===T.firstPart?()=>{b(`${m.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{v(!1),t()}},y(T.firstPart,""===T.secondPart?null:[y("blockExplorerAssetAction")])),!o&&r.default.createElement(l.MenuItem,{iconName:p.IconName.Trash,"data-testid":"asset-options__hide",onClick:()=>{S({event:f.MetaMetricsEventName.TokenHidden,category:f.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_symbol:null==s?void 0:s.symbol,token_contract_address:null==s?void 0:s.address,token_decimal_precision:null==s?void 0:s.decimals,location:f.MetaMetricsEventLocation.TokenDetails,token_standard:g.TokenStandard.ERC20,asset_type:g.AssetType.token,chain_id:null==s?void 0:s.chainId}}),v(!1),e()}},y("hideTokenSymbol",[null==s?void 0:s.symbol])),o||!n?null:r.default.createElement(l.MenuItem,{iconName:p.IconName.Info,"data-testid":"asset-options__token-details",onClick:()=>{v(!1),n()}},y("tokenDetails"))):null)};S.propTypes={isNativeAsset:o.default.bool,onClickBlockExplorer:o.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&"function"!=typeof e.onRemove)throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:o.default.func,token:e=>{if(!1===e.isNativeAsset&&"object"!=typeof e.token)throw new Error("When isNativeAsset is false, token is a required prop")}};n.default=S}}},{package:"$root$",file:"ui/pages/asset/components/asset-options.js"}]],[],{});