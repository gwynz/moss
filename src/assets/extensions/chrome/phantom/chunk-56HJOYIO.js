import{h as zo}from"./chunk-4P4TQ4ZP.js";import{H as Ho,P as Oo,Q as Vo}from"./chunk-YTLZ2SGV.js";import{T as _o,V as jo,W as vo,X as Mo,c as So,e as ue,l as et}from"./chunk-OHN4H3IY.js";import{a as b,b as v,c as gt,d as ot}from"./chunk-FY37LKD2.js";import{a as Do,b as tt,d as No}from"./chunk-3ZRYSYYB.js";import{C as wo,D as To,K as Ao,L as Eo,M as ko}from"./chunk-KWNEQJE2.js";import{Fb as Io,ob as Fo,pb as Je,rb as ft,sb as Bo,u as Lo,xb as Ro}from"./chunk-PQUTVVRL.js";import{$a as Po,Aa as _e,Da as po,Ea as Ze,Ga as fo,Ia as go,Ka as ho,Ma as Co,Pa as bo,Q as co,Qa as xo,Ta as yo,Wa as Ke,Ya as be,_a as Ye,g as U,j as k,k as me,l as Qe,n as lo,o as pt,ra as mo,sa as uo}from"./chunk-IOXJCRJI.js";import{ba as so,ca as ao}from"./chunk-FLYQWZR6.js";import{B as Ot,Mb as $t,ib as Xt,j as Mt,k as Ht,qb as qt,wc as Gt,yc as Qt}from"./chunk-F236ETGH.js";import{Nc as qe,Zd as $e,_d as Ge}from"./chunk-QF7OLC35.js";import{A as Rt,Ad as jt,Ee as Wt,Kb as W,Mb as It,Mf as ne,Wa as le,Ze as Ut,dc as St,dd as _t,je as vt,qe as Vt,re as zt,ud as Dt,zd as Nt}from"./chunk-LPV5DSV2.js";import{a as J}from"./chunk-BYU664DD.js";import{$a as Yt,B as Ft,Ba as F,Bb as ro,C as Bt,Da as Zt,Ea as G,Hb as no,Ib as io,L as T,La as d,Lb as Ue,M as x,Ma as Oe,Na as Ve,Pa as Kt,Sa as C,Ua as ze,Ub as Xe,Wb as Se,Y as y,ab as Jt,fc as ce,hb as We,lb as eo,rb as to,ub as oo,za as He}from"./chunk-JYKVQ4NC.js";import{a as s,g as p,i as a,n as l}from"./chunk-TSHWMJEM.js";a();l();var O=p(x());var ae=p(T());a();l();var Wo=p(T());var vr=5e3,Mr=1e4,X={HiddenTitle:"hidden-title",HiddenButton:"hidden-button",Collection:"collection",Empty:"empty",CollectiblesTrimmed:"collectibles-trimmed",AddCollection:"add-collection"};function de(){let e=k(Ze),t=k(v),o=e?.addresses??[],n=e?.identifier??"",{data:i=[],isLoading:r,isRefetching:u,isError:m,isRefetchError:c,refetch:f}=wo({addresses:o,queryOptions:{staleTime:vr,refetchInterval:Mr,enabled:t==="collectibles"}}),h=To({addresses:o}),{getIsHidden:E,getIsSpam:S,isLoading:q}=Ao(e?.identifier??""),{data:Y=[],isPending:V}=ko(n),{collections:H,hiddenCollections:B,spamCollections:he}=Eo({allCollections:i,pinnedCollectionIds:Y,getIsHidden:E,getIsSpam:S});return{gridItems:(0,Wo.useMemo)(()=>{let N=H.map(_=>({type:X.Collection,data:{..._,determinedHidden:E(_),determinedSpam:S(_)}}));return h&&N.push({type:X.CollectiblesTrimmed,data:null}),N},[H,h,E,S]),isLoadingCollections:r,isRefetchingCollections:u,isErrorCollections:m,isRefetchErrorCollections:c,refetchCollections:f,isLoadingCollectionVisibility:q,isLoadingPinnedCollections:V,collections:H,pinnedCollectionIds:Y,hiddenCollections:B,spamCollections:he}}s(de,"useCollectibles");a();l();var ht=p(x());var pe=p(T());a();l();var Hr=s(e=>self.open(e,"_blank"),"openUrl"),Uo=Hr;var Or="https://help.phantom.com/hc/en-us/articles/39776532231571-Why-does-my-Phantom-wallet-show-a-malicious-account-warning";function Vr(e){if(e.data.length===0)return!1;try{return!!le.NonceAccount.fromAccountData(e.data)}catch{return!1}}s(Vr,"isNonceAccount");function zr(){let{t:e}=y(),t=ne(),o=k(Ze),{connection:n}=co(),{data:i}=Gt(Rt.Solana),r=o&&o.isReadOnly,{data:u,status:m}=jt({staleTime:_t({minutes:10}),enabled:!!i?.address,queryKey:["accountOwner",i?.address],queryFn:s(()=>{if(!i?.address)throw new Error("No selected solana address");return n.getAccountInfo(new le.PublicKey(i.address))},"queryFn")}),c=(0,pe.useMemo)(()=>u?!r&&m==="success"&&Vr(u):!1,[r,m,u]),f=(0,pe.useMemo)(()=>!r&&m==="success"&&u?.owner&&u.owner.toBase58()!==le.SystemProgram.programId.toBase58(),[r,m,u]);return(0,pe.useEffect)(()=>{(f||c)&&t.capture("portfolioHomeMaliciousAccountWarning",{data:{reason:f?"owner":"nonceAccount",networkId:i?.networkID}})},[f,c,t,i?.networkID]),f||c?(0,ht.jsx)(d,{marginX:"screen",marginTop:16,children:(0,ht.jsx)(Ue,{level:"2-alert",actions:[{children:e("commandLearnMore2"),onPress:s(()=>{Uo(Or)},"onPress")}],children:e("portfolioHomeAccountOwnerWarning")})}):null}s(zr,"AccountOwnerWarning");var Xo=(0,pe.memo)(zr);a();l();var xe=p(x());var ee=p(T());a();l();var qo=p(T()),Q=p(x());var fe=p(T());function Wr({tabs:e}){return(0,Q.jsx)(Gr,{values:e.map(t=>({key:t.key,onClick:t.onPress,node:(0,Q.jsx)(C,{font:"title1Semibold",color:t.isActive?"textBase":"textDiminished",whiteSpace:"nowrap",children:t.title})}))})}s(Wr,"TabItems");var $o=Wr,Ur=He({display:"flex",flex:1,overflowX:"hidden",position:"relative",left:"-16",paddingLeft:16,marginRight:"-16"}),Xr=He({display:"flex",flexDirection:"row",gap:12,paddingRight:12}),qr={background:`linear-gradient(to left, ${F.colors.legacy.areaBase}, ${J(F.colors.legacy.areaBase,.85)}, ${J(F.colors.legacy.areaBase,0)})`};function $r(e){if(!e)return 0;let{width:t}=e.getBoundingClientRect(),o=e.scrollWidth;return t-o}s($r,"getEndFromNode");function Gr({values:e}){let t=(0,fe.useRef)(null),[o,n]=(0,fe.useState)(null),[i,r]=(0,fe.useState)(0),u=Jt(0);return(0,fe.useLayoutEffect)(()=>{let m=s(()=>{r($r(t.current))},"updateXEnd");m();let c=new ResizeObserver(m);return t.current&&c.observe(t.current),()=>c.disconnect()},[]),(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("div",{ref:t,className:Ur,children:(0,Q.jsx)(Yt.div,{className:Xr,drag:"x",style:{x:u},dragConstraints:{left:i,right:0},onDragStart:s(()=>{n(u.get())},"onDragStart"),onDragEnd:s(()=>{n(null)},"onDragEnd"),onWheel:s(m=>{if(m.deltaX===0)return;let c=u.get()-m.deltaX;return c>0?u.set(0):c<i?u.set(i):u.set(c)},"onWheel"),children:e.map(({key:m,onClick:c,node:f})=>(0,qo.createElement)("div",{...c&&{role:"button",className:He({cursor:"pointer"})},key:m,onClick:s(h=>{if(o!==null){h.stopPropagation(),h.preventDefault();return}c?.()},"onClick")},f))})}),(0,Q.jsx)(d,{position:"absolute",right:24,top:0,width:24,height:"100%",style:qr})]})}s(Gr,"DraggableContainer");var Qr=s(({selectedDataTab:e,onTappingManageTokens:t,onTappingManageCollections:o,onTappingSettings:n,isBalanceHidden:i,toggleBalanceVisibility:r,onRefresh:u,showPerpsTab:m=!1})=>{let{t:c}=y(),f=ne(),h=me(v),E=ee.default.useRef(null),S=vt.isFeatureEnabled("kill-collectibles"),q=(0,ee.useCallback)(()=>{f.capture("portfolioHomeContextMenuOpened"),E.current?.open()},[f]),Y=(0,ee.useMemo)(()=>{let B=[];return e===b.Tokens&&B.push({text:c("portfolioHomeManageTokens"),onPress:t,icon:"ToggleLeft"}),e===b.Collectibles&&B.push({text:c("portfolioHomeManageCollectibles"),onPress:o,icon:"ToggleLeft"}),B.push({text:c(i?"portfolioHomeShowBalances":"portfolioHomeHideBalances"),onPress:r,icon:i?"EyeFill":"EyeFillOff"}),B.push({text:c("portfolioHomeWalletSettings"),onPress:n,icon:"Settings"}),Ft&&B.push({text:c("portfolioHomeRefresh"),onPress:u,icon:"RefreshCw"}),B},[i,o,t,n,e,r,u,c]),V=(0,ee.useCallback)(B=>{h(B),f.capture("portfolioHomeTabSelected",{data:{tab:B}})},[h,f]),H=(0,ee.useMemo)(()=>[{key:b.Tokens,title:c("portfolioHomeTokens"),isActive:e===b.Tokens,onPress:e!==b.Tokens?()=>V(b.Tokens):void 0},m&&{key:b.Perps,title:c("portfolioHomePerps"),isActive:e===b.Perps,onPress:e!==b.Perps?()=>V(b.Perps):void 0},!S&&{key:b.Collectibles,title:c("portfolioHomeCollectibles"),isActive:e===b.Collectibles,onPress:e!==b.Collectibles?()=>V(b.Collectibles):void 0}].filter(zt),[e,V,c,S,m]);return(0,xe.jsxs)(d,{direction:"row",justifyContent:"space-between",alignItems:"center",marginX:"screen",gap:8,position:"relative",children:[(0,xe.jsx)($o,{tabs:H}),(0,xe.jsx)(to,{ref:E,items:Y,children:(0,xe.jsx)(oo,{color:["textDiminished","textBase"],icon:"MoreHorizontal",label:"More",size:24,bounded:!1,onPress:q})})]})},"ListDataTabBar"),Go=ee.default.memo(Qr);a();l();var nr=p(x());var ir=p(T());a();l();a();l();var ye=p(x());var Ct="\u2022\u2022\u2022\u2022\u2022\u2022",rt=s(({children:e,isBalanceHidden:t,showHiddenText:o,font:n="caption",textColor:i="textDiminished",paddingTop:r=0})=>{let{t:u}=y();return t?o?(0,ye.jsxs)(d,{gap:4,alignItems:"center",direction:"row",paddingTop:r,children:[(0,ye.jsx)(G.Eye,{size:16,color:"textDiminished"}),(0,ye.jsx)(C,{font:n,color:i,children:u("commandShowBalance")})]}):(0,ye.jsx)(C,{font:n,color:i,children:Ct}):e},"PrivacyWrapper");var nt=p(T());var Qo=s(()=>{let{status:e,data:t}=k(No),{currentValue:o,priceDifference:n,totalPercentChange24h:i}=t,r=Lo(),u=vo(),m=(0,nt.useMemo)(()=>{if(o!==void 0)return o+(r?u:0)},[o,u,r]),c=(0,nt.useMemo)(()=>{if(n===void 0||m===void 0)return n;let h=m-n;return h?n/h*100:0},[n,m]);return{isLoading:(0,nt.useMemo)(()=>e==="pending"&&o===void 0,[e,o]),combinedPortfolioValue:m,combinedTotalPercentChange24h:c,fungiblesPortfolioValue:o,priceDifference:n,totalPercentChange24h:i}},"usePortfolioValue");a();l();var Zo=s(e=>{let t=k(be),o=k(go),n=Wt(e,1e3),{data:i}=qt(o),{mutate:r}=$t();return Qt({accountBalance:i?.value,accountId:o??"",enabled:t,value:n,setAccountBalance:r}),n},"useSyncGlobalAccountBalance");a();l();var I=p(x());a();l();var Ko=p(T());var Yo=s(e=>(0,Ko.useMemo)(()=>e?e>0?"spotPositive":"spotNegative":"textDiminished",[e]),"useBalancePercentageColor");a();l();function bt(e){return e===void 0?"-":`${e>=0?"+":"-"}${Math.abs(e).toFixed(2)}%`}s(bt,"formatPercentChange");a();l();var xt=p(x());var Pe=p(T());function yt({children:e,maxFontSize:t}){let o=(0,Pe.useRef)(null),[n,i]=(0,Pe.useState)(t);return(0,Pe.useEffect)(()=>{let r=o.current;if(!r)return;let u=new ResizeObserver(()=>{let m=n;r.querySelectorAll("*").forEach(f=>{for(;f.scrollWidth>r.clientWidth&&m>10;)m-=1,f.style.fontSize=`${m}px`}),i(m)});return u.observe(r),()=>{u.disconnect()}},[n]),(0,xt.jsx)(d,{ref:o,overflow:"hidden",width:"100%",display:"flex",direction:"column",alignItems:"center",children:(0,xt.jsx)("div",{style:{fontSize:`${n}px`,whiteSpace:"nowrap"},children:e})})}s(yt,"AutoResizeText");a();l();var we=p(x());var Zr="\u2022\u2022\u2022\u2022\u2022\u2022",Pt=s(({children:e,isBalanceHidden:t,showHiddenText:o,font:n="caption",textColor:i="textDiminished",paddingTop:r=0})=>{let{t:u}=y();return t?o?(0,we.jsxs)(d,{gap:4,alignItems:"center",direction:"row",paddingTop:r,children:[(0,we.jsx)(G.Eye,{size:16,color:"textDiminished"}),(0,we.jsx)(C,{font:n,color:i,children:u("commandShowBalance")})]}):(0,we.jsx)(C,{font:n,color:i,paddingTop:r,children:Zr}):e},"PrivacyWrapper");a();l();var Tt=p(x());var Z=p(T());a();l();a();l();a();l();a();l();function wt(e){return t=>{let o=!1,n={...t};for(let i of e.queried){let r=e.prices[i],u=r?.price;if(!r)continue;let m=t[i]?.lastUpdatedAt,c=!m||r.lastUpdatedAt&&new Date(r.lastUpdatedAt)>m;u&&t[i]?.price!==u&&c&&(o=!0,n[i]={price:u,priceChange24h:r.priceChange24h??r.usd_24h_change,lastUpdatedAt:r.lastUpdatedAt?new Date(r.lastUpdatedAt):new Date})}return o?n:t}}s(wt,"processBulkPriceData");a();l();var Kr=U(!1),it=Kr;var Jo=lo(e=>{let t=e(ot),o=e(it),n=e(be);return{enabled:t.length>0&&!o&&n,refetchInterval:5e3,queryKey:["visible-prices",{tokens:t.map(i=>i.encodedCaip19).sort(),type:"visible-chunk",isMainnet:n}],queryFn:s(async()=>{let i=await bo({tokens:t.map(r=>r.decodedCaip19)});return{prices:Object.fromEntries(Object.entries(i).map(([r,u])=>[r,{...u,lastUpdatedAt:u.lastUpdatedAt??new Date().toISOString()}])),queried:t.map(r=>r.encodedCaip19)}},"queryFn")}}),Yr=_e((e,t)=>{let{data:o}=e(Jo);o&&t(ho,wt(o))}),Jr=U(e=>{e(Yr);let t=e(Jo);return{status:t.status,isFetching:t.isFetching}}),er=Jr;var st=U(0),en=3,tn=5,on=pt(gt,({priceErrorCount:e})=>e),rn=_e((e,t)=>{e(on)>0?t(st,n=>n+1):t(st,0)});function nn(e,t){let o=pt(e,({status:n,isFetching:i})=>({status:n,isFetching:i}),(n,i)=>JSON.stringify(n)===JSON.stringify(i));return _e((n,i)=>{let r=n(o);r.isFetching||(r.status==="error"&&i(t,u=>u+1),r.status==="success"&&i(t,0))})}s(nn,"createStatusChangeEffectAtom");var sn=nn(er,st),an=U(e=>{e(sn),e(rn);let{balanceErrorCount:t,partialErrors:o}=e(gt);return{isBalanceError:t>=en,isPriceError:e(st)>=tn,partialErrors:o||[]}}),tr=an;a();l();var ln=U(e=>{let t=e(Co),o=e(v),{isBalanceError:n,isPriceError:i,partialErrors:r}=e(tr),{isPerpsBalanceError:u,isPerpsPositionsError:m}=e(ft),c=e(be),f=t.length>0,h=r&&r.length>0;return o==="fungibles"&&n&&i&&f&&c?{reason:"both"}:o==="fungibles"&&n&&f?{reason:"balances"}:o==="fungibles"&&i&&c?{reason:"prices"}:u&&m?{reason:"perpsBoth"}:u?{reason:"perpsBalance"}:m?{reason:"perpsPositions"}:o==="fungibles"&&h&&!n&&!i?{reason:"networkSpecific",partialErrors:r}:null}),or=ln;function cn(e){let t=e.map(m=>m.details.chainId),o=e.map(m=>m.code),n=[...new Set(t)],i=[...new Set(o)],r=n.reduce((m,c)=>(m[c]=t.filter(f=>f===c).length,m),{}),u=i.reduce((m,c)=>(m[c]=o.filter(f=>f===c).length,m),{});return{uniqueChains:n,uniqueErrorCodes:i,errorsPerChain:r,errorTypeCount:u,mostAffectedChain:Object.entries(r).reduce((m,c)=>r[m[0]]>r[c[0]]?m:c)[0],mostCommonError:Object.entries(u).reduce((m,c)=>u[m[0]]>u[c[0]]?m:c)[0]}}s(cn,"analyzeErrorPatterns");function mn({style:e}){let t=(0,Z.useRef)(void 0),o=(0,Z.useRef)(!1),n=ne(),{t:i}=y(),[r]=Qe(or);(0,Z.useEffect)(()=>{if(r?.reason!==t.current){t.current=r?.reason;let m={reason:t.current??"none"};if(r?.reason==="networkSpecific"&&r.partialErrors){let c=cn(r.partialErrors),f=c.uniqueChains.map(h=>W.getChainName(h));n.capture("portfolioHomeErrorBanner",{data:{...m,networkCount:c.uniqueChains.length,chainIds:c.uniqueChains,chainNames:f,errorCodes:c.uniqueErrorCodes,totalErrors:r.partialErrors.length,mostAffectedChain:c.mostAffectedChain,mostCommonError:c.mostCommonError}}),n.capture("portfolioHomeNetworkSpecificError",{data:{networkCount:c.uniqueChains.length,chainIds:c.uniqueChains,chainNames:f,errorCodes:c.uniqueErrorCodes,totalErrors:r.partialErrors.length,isSingleNetwork:c.uniqueChains.length===1,errorsPerChain:c.errorsPerChain,errorTypeCount:c.errorTypeCount,mostAffectedChain:c.mostAffectedChain,mostCommonError:c.mostCommonError}})}else n.capture("portfolioHomeErrorBanner",{data:m})}},[r?.reason,r?.partialErrors,n]);let u=(0,Z.useMemo)(()=>{if(r==null)return null;if(r.reason==="balances")return i("partialErrorTokenDetail");if(r.reason==="prices")return i("partialErrorTokenPrices");if(r.reason==="perpsBalance")return i("partialErrorPerpsBalance");if(r.reason==="perpsPositions")return i("partialErrorPerpsPositions");if(r.reason==="perpsBoth")return i("partialErrorPerpsBoth");if(r.reason==="networkSpecific"&&r.partialErrors){let m=[...new Set(r.partialErrors.map(h=>h.details.chainId))];if(m.length===1){let h=W.getChainName(m[0]);return i("partialErrorBalanceChainName",{chainName:h})}let c=m.map(h=>W.getChainName(h)),f;if(c.length===2)f=`${c[0]} and ${c[1]}`;else{let h=c.pop();f=`${c.join(", ")}, and ${h}`}return i("partialErrorBalanceMultipleChains",{chainNames:f})}return i("partialErrorGeneric")},[r,i]);return(0,Z.useEffect)(()=>{let m=u!==null;m&&!o.current?(o.current=!0,n.capture("portfolioHomeErrorBannerDisplayed",{data:{reason:r?.reason??"unknown",timestamp:Date.now()}})):!m&&o.current&&(o.current=!1,n.capture("portfolioHomeErrorBannerHidden",{data:{reason:t.current??"unknown",timestamp:Date.now()}}))},[u,r?.reason,n]),u?(0,Tt.jsx)(d,{paddingX:"screen",width:"100%",paddingBottom:"screen",style:e,children:(0,Tt.jsx)(Ue,{level:"5-information",children:u})}):null}s(mn,"PortfolioHomeErrorBanner");var rr=(0,Z.memo)(mn);var un={minimumFractionDigits:2,maximumFractionDigits:2};function At({isLoading:e,totalValueUsdCurrent:t,totalValueUsd24h:o,totalPercentChange24h:n,isBalanceHidden:i,toggleBalanceVisibility:r}){let u=Yo(n);return(0,I.jsxs)(d,{gap:8,alignItems:"center",justifyContent:"center",marginTop:32,children:[(0,I.jsx)(rr,{}),e?(0,I.jsxs)(d,{alignItems:"center",children:[(0,I.jsx)(Ve,{width:192,font:"heading1Semibold"}),(0,I.jsxs)(d,{direction:"row",gap:8,children:[(0,I.jsx)(Ve,{width:50,font:"title2Semibold"}),(0,I.jsx)(Ve,{width:50,font:"title3Semibold"})]})]}):(0,I.jsxs)(d,{gap:i?8:0,onPress:i?r:void 0,children:[(0,I.jsx)(Pt,{isBalanceHidden:i,font:"heading1Semibold",textColor:"textBase",children:(0,I.jsx)(yt,{maxFontSize:38,children:(0,I.jsx)(ue,{font:"heading1Semibold",value:t,intlNumberFormatOptions:un})})}),(0,I.jsx)(Pt,{showHiddenText:!0,isBalanceHidden:i,children:(0,I.jsxs)(d,{direction:"row",alignItems:"center",gap:6,justifyContent:"center",children:[(0,I.jsx)(ue,{signConfig:"always",marginRight:6,font:"title1",color:"sentiment",value:o}),(0,I.jsx)(C,{color:u,borderRadius:6,paddingX:4,paddingY:2,style:{backgroundColor:J(F.colors.legacy[u],.1)},children:bt(n)})]})})]})]})}s(At,"PortfolioBalanceDisplay");function dn({isBalanceHidden:e,toggleBalanceVisibility:t,zeroBalanceNux:o}){let{combinedPortfolioValue:n,combinedTotalPercentChange24h:i,isLoading:r,priceDifference:u}=Qo();return Zo(n),zo(n,0)?o:(0,nr.jsx)(At,{isLoading:r,toggleBalanceVisibility:t,isBalanceHidden:e,totalPercentChange24h:i,totalValueUsd24h:u,totalValueUsdCurrent:n})}s(dn,"PortfolioBalance");var sr=(0,ir.memo)(dn);a();l();var P=p(x());a();l();var ar=p(T()),Te=p(x()),lr=ar.default.memo(({onPress:e})=>{let{t}=y();return(0,Te.jsx)(d,{gap:8,marginX:"screen",children:(0,Te.jsxs)(d,{direction:"row",alignItems:"center",gap:4,onPress:e,children:[(0,Te.jsx)(Zt,{size:14,color:"textIncidental"}),(0,Te.jsx)(C,{font:"micro1",color:"textIncidental",children:t("exploreDisclosuresLink")})]})})});a();l();var Ae=p(x()),cr=s(({size:e=40})=>(0,Ae.jsxs)("svg",{width:e,height:e,viewBox:"0 0 48 48",fill:"none",children:[(0,Ae.jsx)("path",{d:"M15.4284 24C10.6912 24 6.85693 27.84 6.85693 32.5714C6.85693 37.3029 10.6969 41.1429 15.4284 41.1429C20.1598 41.1429 23.9998 37.3029 23.9998 32.5714V24H15.4284Z",stroke:"#AB9FF2",strokeWidth:3,strokeMiterlimit:10,strokeLinejoin:"round"}),(0,Ae.jsx)("path",{d:"M42.2376 19.8043C41.761 18.7319 40.239 18.7319 39.7624 19.8043L39.0638 21.3762C38.9276 21.6826 38.6826 21.9276 38.3762 22.0638L36.8043 22.7624C35.7319 23.239 35.7319 24.761 36.8043 25.2376L38.3762 25.9362C38.6826 26.0724 38.9276 26.3174 39.0638 26.6238L39.7624 28.1957C40.239 29.2681 41.761 29.2681 42.2376 28.1957L42.9362 26.6238C43.0724 26.3174 43.3174 26.0724 43.6238 25.9362L45.1957 25.2376C46.2681 24.761 46.2681 23.239 45.1957 22.7624L43.6238 22.0638C43.3174 21.9276 43.0724 21.6826 42.9362 21.3762L42.2376 19.8043Z",fill:"#FFFFC4"}),(0,Ae.jsx)("path",{d:"M30.8571 23.9941H24V15.4255C24 10.6957 27.8343 6.85693 32.5714 6.85693C36.7197 6.85693 40.1756 9.80499 40.9707 13.7141",stroke:"#E2DFFE",strokeWidth:3,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})]}),"PerpsIllustration");a();l();var ke=p(T());a();l();var Ee=p(x());var mr=s(({size:e=40})=>(0,Ee.jsxs)("svg",{width:e,height:e,viewBox:"0 0 48 48",fill:"none",children:[(0,Ee.jsx)("path",{d:"M15.4284 24C10.6912 24 6.85693 27.84 6.85693 32.5714C6.85693 37.3029 10.6969 41.1429 15.4284 41.1429C20.1598 41.1429 23.9998 37.3029 23.9998 32.5714V24H15.4284Z",stroke:"#AB9FF2",strokeWidth:3,strokeMiterlimit:10,strokeLinejoin:"round"}),(0,Ee.jsx)("path",{d:"M42.2376 19.8043C41.761 18.7319 40.239 18.7319 39.7624 19.8043L39.0638 21.3762C38.9276 21.6826 38.6826 21.9276 38.3762 22.0638L36.8043 22.7624C35.7319 23.239 35.7319 24.761 36.8043 25.2376L38.3762 25.9362C38.6826 26.0724 38.9276 26.3174 39.0638 26.6238L39.7624 28.1957C40.239 29.2681 41.761 29.2681 42.2376 28.1957L42.9362 26.6238C43.0724 26.3174 43.3174 26.0724 43.6238 25.9362L45.1957 25.2376C46.2681 24.761 46.2681 23.239 45.1957 22.7624L43.6238 22.0638C43.3174 21.9276 43.0724 21.6826 42.9362 21.3762L42.2376 19.8043Z",fill:"#FFFFC4"}),(0,Ee.jsx)("path",{d:"M30.8571 23.9941H24V15.4255C24 10.6957 27.8343 6.85693 32.5714 6.85693C36.7197 6.85693 40.1756 9.80499 40.9707 13.7141",stroke:"#E2DFFE",strokeWidth:3,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})]}),"PerpsIllustration");a();l();var ie=p(x());var ur={xsmall:24,small:32,searchResult:40,medium:48},pn={xsmall:24,small:32,searchResult:40,medium:48},fn={xsmall:12,small:16,searchResult:18,medium:20},dr=s(({imageSrc:e,fallbackText:t,allowNetworkBadge:o=!0,size:n="medium"})=>(0,ie.jsxs)(d,{size:pn[n],position:"relative",children:[(0,ie.jsx)(Kt,{width:ur[n],height:ur[n],src:e,borderRadius:"circle",fallback:(0,ie.jsx)(d,{size:"100%",backgroundColor:"areaBase",paddingX:6,justifyContent:"center",alignItems:"center",children:(0,ie.jsx)(C,{width:"100%",align:"center",font:"micro1Semibold",justifyContent:"center",alignItems:"center",direction:"row",children:t.substring(0,4)})})}),o&&(0,ie.jsx)(d,{right:"-2",bottom:"-2",position:"absolute",children:(0,ie.jsx)(eo,{icon:"NetworkPerps",shape:"square",size:fn[n],backgroundColor:"white",borderColor:"elementBase"})})]}),"PositionImage");a();l();var gn=.01,pr=s(e=>e.availableToTrade.gt(gn)?Ut(e.availableToTrade):null,"useAvailableBalance");var te=p(x());function fr(e){let{t}=y(),{positions:o,balance:n}=jo(),i=pr(n),r=(0,ke.useCallback)(()=>{self.open(Ge("extension_perps_portfolio"),"_blank")},[]),u=(0,ke.useCallback)(f=>{let h=f.split("-")[0];self.open($e(h,"extension_perps_portfolio"),"_blank")},[]),m=(0,ke.useMemo)(()=>i?{start:(0,te.jsx)(mr,{size:48}),onPress:r,topLeft:t("nounBalance"),topRight:e?Ct:i}:null,[i,e,r,t]),c=(0,ke.useMemo)(()=>[...o.positions].sort((f,h)=>Number(h.position.margin)-Number(f.position.margin)).map(f=>hn(f,e,u)),[o.positions,e,u]);return{balanceRow:m,positionRows:c}}s(fr,"useExtensionPerpsPortfolioRows");function hn(e,t,o){return{onPress:s(()=>o(e.position.market.token.address),"onPress"),start:(0,te.jsx)(dr,{imageSrc:e.image,fallbackText:e.title}),topLeft:_o(e.title),bottomLeft:(0,te.jsx)(rt,{isBalanceHidden:t,children:(0,te.jsx)(C,{font:"inherit",color:"textDiminished",children:e.subtitle})}),topRight:(0,te.jsx)(rt,{isBalanceHidden:t,font:"inherit",children:(0,te.jsx)(C,{font:"inherit",children:e.price})}),bottomRight:(0,te.jsx)(rt,{isBalanceHidden:t,font:"inherit",children:(0,te.jsx)(C,{font:"inherit",color:e.priceChange.color,children:e.priceChange.text})})}}s(hn,"specToRow");var L=p(T());a();l();var Cn={status:"idle",hasNextPage:!1,data:[]},at={status:"idle",data:[]},gr=U(e=>{if(e(v)==="collectibles")return{fungibles:Cn,collectibles:at};let o=e(xo),{hasNextPage:n,status:i}=e(fo),r=e(yo);return o?{collectibles:at,fungibles:{status:"loading",hasNextPage:!1,data:[]}}:r.length===0&&i==="error"?{collectibles:at,fungibles:{status:"error",hasNextPage:!1,data:[]}}:{collectibles:at,fungibles:{status:"success",hasNextPage:n,data:r}}});a();l();var bn={type:X.Collection,data:{type:X.Empty,data:null}};function hr(e,t){return e.length===t?e:[...e,...Array(t-e.length).fill(bn)]}s(hr,"fillItems");function xn(e,t=2){let o=[],n=e.filter(r=>r.type!==X.CollectiblesTrimmed),i=Vt(n,t);for(let r of i){let u=r.map(m=>({type:X.Collection,data:m}));o.push({type:X.Collection,data:{pair:hr(u,t)}})}if(n.length!==e.length){let r=[{type:X.Collection,data:{type:X.CollectiblesTrimmed,data:null}}];o.push({type:X.Collection,data:{pair:hr(r,t)}})}return o}s(xn,"groupCollectiblesInRows");var Cr=xn;a();l();var M=p(x());a();l();var se=p(x());var lt=p(T());function yn(){let{t:e}=y(),t=k(v),{refetch:o}=k(Ye),{refetchCollections:n}=de(),i=(0,lt.useCallback)(()=>{t==="fungibles"?o():t==="collectibles"&&n()},[t,o,n]);return(0,se.jsxs)(d,{marginY:4,alignItems:"center",paddingX:"screen",children:[(0,se.jsx)(d,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:{backgroundColor:J(F.colors.legacy.spotWarning,.2)},children:(0,se.jsx)(G.AlertCircle,{size:24,color:"spotWarning"})}),(0,se.jsx)(C,{font:"bodySemibold",marginBottom:14,children:e("homeErrorTitle")}),(0,se.jsx)(C,{align:"center",marginBottom:32,children:e("homeErrorDescription")}),(0,se.jsx)(We,{onPress:i,children:e("homeErrorButtonText")})]})}s(yn,"ErrorRow");var ct=(0,lt.memo)(yn);a();l();var A=p(x());function Et(){return(0,A.jsxs)("svg",{width:"91",height:"91",viewBox:"0 0 91 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsxs)("g",{children:[(0,A.jsx)("rect",{width:"90",height:"90",transform:"translate(0.5 0.5)",fill:F.colors.legacy.areaBase}),(0,A.jsx)("rect",{x:"5.36923",y:"48.816",width:"33.707",height:"39.1595",rx:"2.86",transform:"rotate(-19.3489 5.36923 48.816)",fill:F.colors.legacy.spotBase}),(0,A.jsx)("rect",{x:"8.87532",y:"50.4995",width:"28.2068",height:"28.2096",rx:"1.5",transform:"rotate(-19.3489 8.87532 50.4995)",fill:F.colors.legacy.areaBase}),(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M67.8312 10.2413C67.9853 10.6569 67.9487 11.1193 67.7312 11.5056L57.3701 29.9014C56.7813 30.9468 55.8012 31.7156 54.6456 32.0385C53.49 32.3614 52.2534 32.2119 51.2079 31.6231L48.58 30.143C47.5345 29.5541 46.7658 28.5741 46.4429 27.4184C46.12 26.2628 46.2694 25.0262 46.8582 23.9808C47.4471 22.9353 48.4271 22.1666 49.5827 21.8437C50.7384 21.5208 51.9749 21.6702 53.0204 22.259L56.9624 24.4793L64.2296 11.5765L49.8563 6.36576L40.1221 23.6484C39.5333 24.6939 38.5533 25.4626 37.3976 25.7855C36.242 26.1084 35.0054 25.959 33.96 25.3702L31.332 23.89C30.2865 23.3012 29.5178 22.3211 29.1949 21.1655C28.872 20.0099 29.0214 18.7733 29.6103 17.7278C30.1991 16.6824 31.1791 15.9136 32.3348 15.5907C33.4904 15.2679 34.727 15.4173 35.7724 16.0061L39.7144 18.2263L47.8552 3.77249C48.217 3.13017 48.9901 2.84354 49.6832 3.09479L66.9312 9.34773C67.3479 9.49882 67.6771 9.82562 67.8312 10.2413ZM38.2343 20.8543L34.2923 18.6341C33.9438 18.4378 33.5316 18.388 33.1464 18.4956C32.7612 18.6032 32.4345 18.8595 32.2382 19.208C32.042 19.5565 31.9921 19.9687 32.0998 20.3539C32.2074 20.7391 32.4637 21.0658 32.8121 21.262L35.4401 22.7422C35.7886 22.9385 36.2008 22.9883 36.586 22.8807C36.9712 22.773 37.2979 22.5168 37.4942 22.1683L38.2343 20.8543ZM55.4822 27.1072L51.5403 24.887C51.1918 24.6907 50.7796 24.6409 50.3944 24.7486C50.0092 24.8562 49.6825 25.1124 49.4862 25.4609C49.2899 25.8094 49.2401 26.2216 49.3478 26.6068C49.4554 26.992 49.7116 27.3187 50.0601 27.515L52.6881 28.9951C53.0366 29.1914 53.4488 29.2412 53.834 29.1336C54.2192 29.026 54.5459 28.7697 54.7422 28.4212L55.4822 27.1072Z",fill:"#FFFFC4",stroke:"#FFFFC4"})}),(0,A.jsx)("rect",{x:"32.9779",y:"17.8943",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 32.9779 17.8943)",fill:"#FFFFC4"}),(0,A.jsx)("rect",{x:"50.2259",y:"24.1468",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 50.2259 24.1468)",fill:"#FFFFC4"}),(0,A.jsx)("path",{d:"M87.0587 48.1502C88.4311 48.2419 89.1322 49.8405 88.27 50.9123L74.0483 68.5907C73.2484 69.5851 71.6791 69.3765 71.1665 68.2079L62.7499 49.0157C62.2374 47.847 63.1471 46.5513 64.4204 46.6365L87.0587 48.1502Z",fill:"#FF7243"}),(0,A.jsx)("path",{d:"M13.4383 28.3196L15.0033 29.5762C15.821 30.233 16.9286 30.4029 17.9055 30.0214L19.7752 29.2917C20.1233 29.1543 20.4298 29.572 20.1944 29.8629L18.9379 31.4279C18.281 32.2455 18.1111 33.3531 18.4927 34.3301L19.2223 36.1998C19.3597 36.5479 18.9421 36.8544 18.6511 36.619L17.0862 35.3624C16.2685 34.7056 15.1609 34.5357 14.184 34.9172L12.3143 35.6469C11.9662 35.7843 11.6596 35.3666 11.895 35.0757L13.1516 33.5107C13.8085 32.6931 13.9784 31.5855 13.5968 30.6086L12.8671 28.7389C12.7298 28.3908 13.1474 28.0842 13.4383 28.3196Z",fill:F.colors.legacy.elementAccent}),(0,A.jsx)("path",{d:"M60.2233 55.5181L59.226 57.1925C58.7046 58.0674 58.6906 59.1554 59.1893 60.0434L60.1431 61.743C60.3222 62.0592 59.9619 62.4104 59.6504 62.2232L57.9759 61.2259C57.1011 60.7045 56.013 60.6905 55.125 61.1892L53.4254 62.143C53.1092 62.3221 52.758 61.9618 52.9452 61.6503L53.9425 59.9758C54.4639 59.101 54.4779 58.0129 53.9792 57.1249L53.0254 55.4253C52.8464 55.1091 53.2066 54.758 53.5182 54.9451L55.1926 55.9424C56.0675 56.4638 57.1555 56.4778 58.0435 55.9792L59.7431 55.0253C60.0593 54.8463 60.4105 55.2065 60.2233 55.5181Z",fill:F.colors.legacy.elementAccent}),(0,A.jsx)("path",{d:"M78.1739 3.16606L77.825 5.25271C77.6423 6.34306 78.0569 7.44911 78.9112 8.15079L80.5458 9.49398C80.8515 9.74327 80.6254 10.2404 80.2366 10.1739L78.15 9.82495C77.0596 9.64234 75.9536 10.0569 75.2519 10.9112L73.9087 12.5458C73.6594 12.8515 73.1623 12.6254 73.2288 12.2366L73.5777 10.1499C73.7603 9.0596 73.3457 7.95354 72.4914 7.25187L70.8569 5.90868C70.5512 5.65938 70.7773 5.16225 71.1661 5.22878L73.2527 5.5777C74.3431 5.76032 75.4491 5.34574 76.1508 4.49142L77.494 2.85689C77.7433 2.55119 78.2404 2.77725 78.1739 3.16606Z",fill:F.colors.legacy.elementAccent}),(0,A.jsx)("circle",{cx:"51.0134",cy:"39.0883",r:"1.48466",transform:"rotate(26.2783 51.0134 39.0883)",fill:F.colors.legacy.elementAccent}),(0,A.jsx)("path",{d:"M79.2259 31.2607C80.251 32.4976 80.0792 34.3314 78.8423 35.3565C72.3787 40.7131 64.7682 41.4047 58.5851 40.516C57.4577 40.3539 56.3327 40.1324 55.248 39.8792C53.8509 39.5529 54.2211 37.9337 55.6541 38.0001C56.0293 38.0175 56.3861 38.0285 56.7169 38.0316C59.4348 38.0573 61.9912 37.6669 62.8283 37.4807C67.254 36.4959 71.3085 34.0442 75.1301 30.8771C76.367 29.852 78.2008 30.0238 79.2259 31.2607Z",fill:F.colors.legacy.elementAccent})]}),(0,A.jsxs)("defs",{children:[(0,A.jsx)("clipPath",{id:"clip0_9952_91189",children:(0,A.jsx)("rect",{width:"90",height:"90",fill:"white",transform:"translate(0.5 0.5)"})}),(0,A.jsx)("clipPath",{id:"clip1_9952_91189",children:(0,A.jsx)("rect",{width:"36.1936",height:"36.1936",fill:"white",transform:"translate(41.0437 -8.71805) rotate(29.3895)"})})]})]})}s(Et,"NoCollectibles");var br=ce.recycle(()=>{let{t:e}=y();return(0,M.jsx)(d,{paddingY:24,alignItems:"center",justifyContent:"center",children:(0,M.jsxs)(d,{gap:8,maxWidth:240,textAlign:"center",alignItems:"center",justifyContent:"center",children:[(0,M.jsx)(Et,{}),(0,M.jsx)(C,{color:"textBase",font:"bodySemibold",children:e("collectiblesNoCollectiblesFound")}),(0,M.jsx)(C,{color:"textDiminished",font:"caption",align:"center",children:e("collectiblesNoCollectiblesFoundSecondary")})]})})}),xr=ce.recycle(()=>Array.from({length:2}).map((e,t)=>(0,M.jsxs)(d,{marginY:8,paddingX:"screen",direction:"row",gap:16,children:[(0,M.jsx)(d,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1",children:(0,M.jsx)(Oe,{height:"100%",borderRadius:8})}),(0,M.jsxs)(d,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1",children:[(0,M.jsx)(Oe,{height:"100%",borderRadius:8}),(0,M.jsx)(Oe,{})]})]},`loading-collectible-${t}`))),yr=ce.recycle(()=>(0,M.jsx)(ct,{}));a();l();var D=p(x());var ge=p(T());a();l();var K=p(x());var Lr=p(T());a();l();var Pr=p(x());var wr=p(T());var Tr=(0,wr.memo)(({imageSrc:e,fallbackText:t,chainId:o,type:n})=>{let i=W.getChainID(o),r=Vo(n,o);return(0,Pr.jsx)(et,{image:{type:"fungible",src:e,fallback:t.substring(0,4)},tokenType:r,chainMeta:Oo(i)})});a();l();var kt=p(x());var mt=p(T()),Ar=mt.default.memo(({token:e,price:t,font:o})=>{let n=(0,mt.useMemo)(()=>t?tt(e,t):"-",[e,t]);return n==="-"?(0,kt.jsx)(C,{children:"-"}):(0,kt.jsx)(ue,{value:n,font:o,minimumResolutionValue:.01,intlNumberFormatOptions:qe})});a();l();var Er=p(x());var De=p(T()),kr=De.default.memo(({token:e,price:t,priceChange:o,font:n})=>{let i=(0,De.useMemo)(()=>tt(e,t),[e,t]),r=(0,De.useMemo)(()=>Do(i,o),[o,i]);return(0,Er.jsx)(ue,{signConfig:"exceptZero",font:n,value:r,color:"sentiment",minimumResolutionValue:.01,intlNumberFormatOptions:qe})});var Pn=s(({networkID:e,walletAddress:t})=>{let o=Xt();return t?Ht.get(e).badge?.(e,o,t)??null:null},"useNetworkBadge");function wn({token:e,price:t,priceChange:o,renderImageSource:n,renderImageFallbackText:i,renderImageChainId:r,renderImageType:u,isBalanceHidden:m,onPress:c,testID:f}){let{t:h}=y(),E=e.totalQuantity/10**e.decimals,S=Pn({networkID:e.decodedCaip19.chainId,walletAddress:e.walletAddress})||"";return(0,K.jsx)(d,{marginX:"screen",children:(0,K.jsx)(ze,{testID:f,truncate:"left",onPress:c,topLeft:{text:e.name||h("tokenRowUnknownToken"),after:(0,K.jsx)(So,{spamStatus:e.spamStatus,badgeText:S})},verticalAlign:"baseline",bottomLeft:(0,K.jsx)(Xe,{isBalanceHidden:m,children:`${Ho(E)} ${e.symbol||"null"}`}),topRight:(0,K.jsx)(Xe,{isBalanceHidden:m,font:"inherit",children:t?(0,K.jsx)(Ar,{token:e,price:t,font:"inherit"}):"-"}),bottomRight:(0,K.jsx)(Xe,{isBalanceHidden:m,children:o&&t?(0,K.jsx)(kr,{token:e,price:t,priceChange:o,font:"caption"}):"-"}),start:(0,K.jsx)(Tr,{imageSrc:n,fallbackText:i,chainId:r,type:u})})})}s(wn,"FungibleRow");var Fr=(0,Lr.memo)(wn);var Br=(0,ge.memo)(({onFungibleDetailNav:e,isBalanceHidden:t,...o})=>{let n=o.legacyKey,i=`${o.symbol??(n&&Ot(n))}`,r=`fungible-token-row-${W.getChainName(o.decodedCaip19.chainId).toLowerCase()}-${i}`;o.walletAddress&&Mt(o.decodedCaip19.chainId,o.walletAddress)&&(r+=`-${St(o.decodedCaip19.chainId,o.walletAddress)}`);let u=o.symbol||(o.legacyKey??"").substring(0,4),m=(0,ge.useCallback)(()=>{e(o)},[e,o]);return(0,D.jsx)(Fr,{onPress:m,isBalanceHidden:t,price:o.livePrice?.price,priceChange:o.livePrice?.priceChange24h,renderImageChainId:o.decodedCaip19.chainId,renderImageFallbackText:u,renderImageSource:o.logoUri||"",renderImageType:o.type,testID:r,token:o})});function Lt(){let e=k(Ke);return(0,ge.useEffect)(()=>{e()},[e]),(0,D.jsx)(d,{marginY:4,paddingX:"screen",children:(0,D.jsx)(Se,{})})}s(Lt,"LoadingFungibleNextPage");var Tn=ce.recycle(()=>(0,D.jsx)(d,{marginY:Bt?4:0,paddingX:"screen",children:(0,D.jsx)(Se,{})})),Rr=ce.recycle(()=>Array.from({length:4}).map((e,t)=>(0,D.jsx)(Tn,{},`loading-fungible-${t}`))),An={backgroundColor:J(F.colors.legacy.spotWarning,.2)},Ir=(0,ge.memo)(()=>{let{t:e}=y(),{refetch:t}=k(Ye);return(0,D.jsxs)(d,{marginY:4,alignItems:"center",paddingX:"screen",children:[(0,D.jsx)(d,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:An,children:(0,D.jsx)(G.AlertCircle,{size:24,color:"spotWarning"})}),(0,D.jsx)(C,{font:"bodySemibold",marginBottom:14,children:e("portfolioHomeNoFungibleTokens")}),(0,D.jsx)(C,{align:"center",marginBottom:32,children:e("portfolioHomeNoFungibleTokensDescription")}),(0,D.jsx)(We,{onPress:t,children:e("homeErrorButtonText")})]})}),Sr=s(()=>(0,D.jsx)(ct,{}),"ErrorFungibles");var En={perps:84,collectibles:177,fungibles:84};function kn({data:e,status:t,collectibleRowRenderer:o}){if(!(t!=="success"||e.length===0))return{rowRenderer:o,rowCount:e.length}}s(kn,"getCollectiblesVirtualizedListProps");function Ln({data:e,status:t,hasNextPage:o,tokenRowRenderer:n,onRowsRendered:i}){if(!(t!=="success"||e.length===0))return{onRowsRendered:i,rowRenderer:n,rowCount:o?e.length+1:e.length}}s(Ln,"getTokensVirtualizedListProps");function Fn({item:e}){return(0,P.jsx)(et,{image:{type:"fungible",src:e.logoUri,fallback:e.symbol},badge:{type:"network",preset:"hypercore"},size:48})}s(Fn,"PerpsMarketRowImage");function Bn({onFungibleDetailNav:e,listHeaderChildren:t,isBalanceHidden:o,renderCollectiblesComponent:n,collectiblesPerRow:i,tabBar:r,onLayout:u,onShowPerpsDisclosure:m}){let c=(0,L.useRef)(null),f=me(ot),{t:h}=y(),E=Je(),{balanceRow:S,positionRows:q}=fr(o),{refetch:Y,isIndeterminate:V}=Fo({isSupported:E});(0,L.useEffect)(()=>{E&&V&&Y()},[E,V,Y]),Bo({enabled:E&&(q.length>0||S!==null),isSupported:E});let H=Ro("perps"),{data:B}=Io({sortBy:H?.sortByDefault??"trending",sortDirection:H?.sortDirectionDefault??"desc",timeFrame:H?.timeFrameDefault??"24h",limit:8}),he=(0,L.useMemo)(()=>B?.trendingMarkets??[],[B?.trendingMarkets]),Le=(0,L.useCallback)(({stopIndex:w,startIndex:z})=>{f({start:z,end:w})},[f]),N=k(gr).fungibles,_=k(v),R=de(),j=(0,L.useMemo)(()=>Cr(R.gridItems,i),[R.gridItems,i]),$=(0,L.useMemo)(()=>R.isLoadingCollectionVisibility||R.isLoadingCollections?"loading":R.isErrorCollections&&j.length===0?"error":"success",[R.isLoadingCollectionVisibility,R.isLoadingCollections,R.isErrorCollections,j.length]),Fe=(0,L.useMemo)(()=>({item:w})=>{if(!n)throw new Error("renderCollectiblesComponent is not defined");return n({item:w,extraData:{collections:R.collections,pinnedCollectionIds:R.pinnedCollectionIds}})},[R.collections,R.pinnedCollectionIds,n]),Be=(0,L.useCallback)(w=>{if(w.index===N.data.length)return(0,P.jsx)(d,{style:w.style,children:(0,P.jsx)(Lt,{})},"fungible-loading-row");let z=N.data[w.index];return(0,P.jsx)(d,{style:w.style,children:(0,P.jsx)(Br,{onFungibleDetailNav:e,isBalanceHidden:o,...z})},w.key)},[N.data,o,e]),Ce=(0,L.useCallback)(w=>{let z=j[w.index];return(0,P.jsx)(d,{style:w.style,children:(0,P.jsx)(Fe,{item:z})},w.key)},[j,Fe]),oe=(0,L.useMemo)(()=>kn({data:j,status:$,collectibleRowRenderer:Ce}),[j,$,Ce]),Re=(0,L.useMemo)(()=>Ln({...N,tokenRowRenderer:Be,onRowsRendered:Le}),[N,Be,Le]),re=(0,L.useMemo)(()=>{if(!E)return[];let w=!!S;if(q.length>0)return[...w?[S]:[],...q];if(w)return[S];let ut={start:(0,P.jsx)(cr,{size:48}),onPress:s(()=>self.open(Ge("extension_perps_portfolio"),"_blank"),"onPress"),topLeft:h("cashZeroBalanceNuxPerpsTitle"),bottomLeft:h("cashZeroBalanceNuxPerpsDescription")},dt=he.map(Ie=>({...Mo({item:Ie,image:(0,P.jsx)(Fn,{item:Ie}),sortBy:H?.sortByDefault??"trending"}),onPress:s(()=>self.open($e(Ie.symbol,"extension_perps_market_list"),"_blank"),"onPress")}));return[ut,...dt]},[E,S,q,he,H,h]),je=(0,L.useCallback)(w=>{let z=re[w.index];return z?(0,P.jsx)(d,{style:w.style,children:(0,P.jsx)(d,{marginX:"screen",marginBottom:6,children:(0,P.jsx)(ze,{...z,background:!0,style:{paddingTop:14,paddingBottom:14,paddingLeft:14}})})},w.key):null},[re]),ve=(0,L.useMemo)(()=>{if(!(!E||re.length===0))return{rowRenderer:je,rowCount:re.length}},[E,re.length,je]),Me=(0,L.useMemo)(()=>{switch(_){case b.Perps:return ve;case b.Tokens:return Re;case b.Collectibles:return oe;default:throw new Error("Invalid data tab")}},[_,ve,Re,oe]);return(0,P.jsxs)(d,{gap:8,paddingBottom:8,overflowY:"auto",ref:c,overflowX:"hidden",children:[t,r,_===b.Collectibles&&$==="loading"&&(0,P.jsx)(xr,{}),_===b.Collectibles&&$==="error"&&(0,P.jsx)(yr,{}),_===b.Collectibles&&$==="success"&&j.length===0&&(0,P.jsx)(br,{}),_===b.Tokens&&N.status==="loading"&&(0,P.jsx)(Rr,{}),_===b.Tokens&&N.status==="error"&&(0,P.jsx)(Sr,{}),_===b.Tokens&&N.status==="success"&&N.data.length===0&&(0,P.jsx)(Ir,{}),Me&&(0,P.jsx)(io,{scrollElement:c.current??void 0,children:s(({height:w=0,isScrolling:z,registerChild:ut,scrollTop:dt})=>(0,P.jsx)("div",{style:{width:"100%"},ref:ut,children:(0,P.jsx)(ro,{disableHeight:!0,children:s(({width:Ie})=>(0,P.jsx)(no,{rowHeight:En[_],autoHeight:!0,width:Ie,height:w,scrollTop:dt,isScrolling:z,...Me}),"children")})}),"children")}),E&&(0,P.jsx)(lr,{onPress:m})]})}s(Bn,"PortfolioHomeFullscreen");var _r=(0,L.memo)(Bn);function Rn(e,t,o){t({caip19:e.encodedCaip19,key:e.legacyKey??"",tokenAccount:void 0,...e.name&&{name:e.name},isSplCompressed:e.extraMetadata?.compression?.compressed??!1});let n=W.getChainName(e.decodedCaip19.chainId),i=W.getChainID(e.decodedCaip19.chainId);o.capture("assetDetailClick",{data:{address:e.decodedCaip19.resourceType===It.address?e.decodedCaip19.address:void 0,chain:n,chainId:i,isNativeOfType:i,networkId:e.decodedCaip19.chainId,type:"fungible",spamStatus:e.spamStatus,name:e.name??void 0}})}s(Rn,"trackAndNavigateToFungibleDetail");function In({onFungibleDetailNav:e,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:n,onTappingActivity:i,onTappingSettings:r=s(()=>{},"onTappingSettings"),onTappingManageTokens:u=s(()=>{},"onTappingManageTokens"),onTappingManageCollections:m=s(()=>{},"onTappingManageCollections"),listFooterChildren:c,pageFooterComponent:f,listHeaderChildren:h,pageHeaderComponent:E,fixedHeaderChildren:S,zeroBalanceNux:q,renderCollectiblesComponent:Y,accountAvatar:V,collectiblesPerRow:H=2,defaultTab:B,showPerpsPage:he,showPerpsPositionDetails:Le,onLayout:N,onShowPerpsDisclosure:_}){let R=ne(),[j,$]=Qe(v),{refetch:Fe}=Po(),{refetchCollections:Be}=de(),Ce=Je(),oe=so(),Re=ao(),re=(0,ae.useCallback)(()=>{Re(!oe)},[oe,Re]),je=(0,ae.useCallback)(()=>{j===b.Tokens&&Fe(),j===b.Collectibles&&Be()},[j,Fe,Be]),ve=(0,ae.useCallback)(Me=>Rn(Me,e,R),[e,R]);return(0,ae.useEffect)(()=>{!Ce&&j===b.Perps&&$(b.Tokens)},[Ce,j,$]),(0,ae.useEffect)(()=>{R.capture("portfolioHomeViewed")},[R]),(0,ae.useEffect)(()=>{typeof B<"u"&&$(B)},[B,$]),(0,O.jsxs)(O.Fragment,{children:[E,(0,O.jsx)(_r,{isBalanceHidden:oe,collectiblesPerRow:H,renderCollectiblesComponent:Y,fixedHeaderChildren:S,listFooterChildren:c,listHeaderChildren:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(d,{marginBottom:24,children:[(0,O.jsx)(sr,{toggleBalanceVisibility:re,isBalanceHidden:oe,zeroBalanceNux:q}),(0,O.jsx)(Xo,{})]}),h]}),tabBar:(0,O.jsx)(Go,{isBalanceHidden:oe,toggleBalanceVisibility:re,onRefresh:je,selectedDataTab:j,onTappingManageTokens:u,onTappingManageCollections:m,onTappingSettings:r,showPerpsTab:Ce}),accountAvatar:V,onFungibleDetailNav:ve,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:n,onTappingActivity:i,showPerpsPage:he,showPerpsPositionDetails:Le,onLayout:N,onShowPerpsDisclosure:_}),f]})}s(In,"PortfolioHome");a();l();var Ne=p(x());function Sn({marginBottom:e}){let{t}=y();return(0,Ne.jsxs)(d,{direction:"row",gap:6,paddingY:16,paddingX:18,borderRadius:"base",justifyContent:"center",backgroundColor:"areaAccent",marginBottom:e,children:[(0,Ne.jsx)(G.Eye,{size:20,color:"textDiminished"}),(0,Ne.jsx)(C,{font:"captionSemibold",color:"textDiminished",children:t("readOnlyAccountBannerWarning")})]})}s(Sn,"ReadOnlyAccountBanner");var _n=Sn;a();l();a();l();var Dr=p(T());function Dn({isInertOverride:e}={}){let t=me(it),o=me(po),n=Dt(),i=Nt(),r=typeof e=="boolean"?e:i;(0,Dr.useEffect)(()=>{t(r),o(r),r&&Promise.all([n.invalidateQueries({queryKey:mo}),n.invalidateQueries({queryKey:uo})]).catch(()=>{})},[r,t,o,n])}s(Dn,"usePerformantQueries");a();l();var Nr=p(x());var jr=p(T());function Nn(){let e=k(Ke);return(0,jr.useEffect)(()=>{e()},[e]),(0,Nr.jsx)(Se,{})}s(Nn,"LoadingRow");var jn=Nn;export{In as a,Dn as b,jn as c,_n as d};
//# sourceMappingURL=chunk-56HJOYIO.js.map
