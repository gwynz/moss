import{b as Md,d as yn,f as Hd}from"../chunk-ANDWMAWZ.js";import{a as rs,b as ns,c as Ue,d as os,e as xn,f as ge,g as zr,h as Dd,i as fr,j as gr,k as Nd,l as Od,m as ss,n as j,o as zd,p as c,q as Vd,r as Kd,s as is,t as oo,u as Gd}from"../chunk-BDNKAVSO.js";import"../chunk-5ZVHSBHF.js";import{d as qd}from"../chunk-AB2ZEUFU.js";import{a as no}from"../chunk-53GGNXTW.js";import"../chunk-DQLUBVF4.js";import{b as $d,c as jd}from"../chunk-4Q7PWTAO.js";import"../chunk-3VSBLIGZ.js";import"../chunk-TWE3NBCC.js";import{b as qc}from"../chunk-GA7OWDUC.js";import{a as ro,b as Td,c as ts,d as vd,e as Id,g as kd,k as Rd}from"../chunk-EOII3ZM4.js";import"../chunk-4AQPJCXC.js";import{b as Cd}from"../chunk-HI2OEMF6.js";import{a as Ed,c as Bd,d as Ld,g as Ud}from"../chunk-4GL3WODX.js";import{a as nt}from"../chunk-QQJPKFTO.js";import{a as Fd}from"../chunk-5NEPC5CX.js";import{a as lr,b as hn,d as fc}from"../chunk-JQE54VLJ.js";import{Na as Gt}from"../chunk-KWNEQJE2.js";import"../chunk-HGG2EQ5O.js";import{Q as Pd,g as nd}from"../chunk-PQUTVVRL.js";import"../chunk-IOXJCRJI.js";import"../chunk-XGLSOW44.js";import{b as wn,c as as}from"../chunk-56GZZQJU.js";import"../chunk-QLEUWUCH.js";import{a as Le}from"../chunk-ZGQB4B3Z.js";import{a as Pe}from"../chunk-OJPBMZQC.js";import{E as Kt,F as Nr,H as Qo,J as Qc,Q as ed,R as hr,U as td,V as rd,e as Vt,m as jc,n as Wc,sa as Yn,ta as Zn,va as Or,w as Yc,wa as Hr,y as Zc,z as Xc}from"../chunk-FLYQWZR6.js";import{a as Jc}from"../chunk-UPPQC44E.js";import{a as $r}from"../chunk-CYENH7PC.js";import{D as Rc,Fc as Gc,Ia as Hc,M as Cc,Na as Fc,P as Bc,R as Lc,Ra as $c,T as Uc,Ta as lt,Va as zc,Wa as Tt,Za as Vc,_a as Kc,q as vc,s as qn,sb as Jo,u as Ic,v as kc,w as Gn,x as Ce}from"../chunk-F236ETGH.js";import{Fb as yd,Jb as xd,Kb as wd,Nb as bd,Pa as eo,Qb as to,Ua as qt,ca as dt,d as Fr,da as mt,ea as ad,eb as hd,fa as je,fb as fd,ga as Xn,ha as Jn,hb as gd,i as od,ia as cd,ic as Sd,ja as Bt,ka as es,kc as Ad,la as ht,lc as _d,ma as Qn,na as dd,oa as pd,ob as ft,pa as ud,qa as ld,ra as md,sa as Lt,ta as gn,w as sd,y as id}from"../chunk-QF7OLC35.js";import{A as ye,Af as ut,Bd as zn,Bf as Oc,Cd as fn,Fb as hc,Ga as Cr,Gc as fe,H as rc,Hc as Q,Ic as mr,Kb as Qe,Kc as X,M as pn,Mb as Yo,Md as _c,Nf as le,O as Ko,Qb as Fn,Qe as jn,Ra as oc,Rb as Zo,S as Dn,Sa as sc,V as nc,Wa as ve,We as Pc,Zb as Ur,_c as bc,ac as rt,bc as gc,ce as Vn,dc as yc,dd as Sc,de as Ec,df as Xo,eb as ic,fb as ac,fc as Mr,gc as xc,hc as $n,id as Ac,je as Kn,le as Tc,o as tc,ob as tt,qb as Br,sc as wc,uc as Pr,yc as Dr,ye as Mc,yf as Nc,zf as Wn}from"../chunk-LPV5DSV2.js";import{A as qo,B as Re,C as pc,D as uc,J as Go,K as jo,L as On,M as we,N as un,O as ke,P as ln,Q as Ct,R as lc,S as mc,T as Lr,U as Wo,V as mn,W as Ae,X as Hn,Y as ur,Z as Dc,m as pr,t as Nn,u as cc,v as dc}from"../chunk-NEE4FZIK.js";import"../chunk-BYU664DD.js";import{J as Rr,Rb as _h,T as ot,a as Vo,c as Ya,e as Pn,f as Za,h as Xa,j as Ja,k as Qa,w as dr,y as ec,ya as Ah}from"../chunk-JYKVQ4NC.js";import"../chunk-U7OZEJ4F.js";import"../chunk-ZRGHR2IN.js";import{a as o,b as dn,d as Wa,e as Fe,g as Ge,i as d,m as Buffer,n as p}from"../chunk-TSHWMJEM.js";var rl=Wa((e5,tl)=>{"use strict";d();p();function Tg(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var a=e.length,l=e.charAt(0),m=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var y=0,S=0,x=0,E=_.length;x!==E&&_[x]===0;)x++,y++;for(var C=(E-x)*f+1>>>0,I=new Uint8Array(C);x!==E;){for(var B=_[x],D=0,M=C-1;(B!==0||D<S)&&M!==-1;M--,D++)B+=256*I[M]>>>0,I[M]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");S=D,x++}for(var ee=C-S;ee!==C&&I[ee]===0;)ee++;for(var W=l.repeat(y);ee<C;++ee)W+=e.charAt(I[ee]);return W}o(b,"encode");function g(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;for(var y=0,S=0,x=0;_[y]===l;)S++,y++;for(var E=(_.length-y)*m+1>>>0,C=new Uint8Array(E);_[y];){var I=t[_.charCodeAt(y)];if(I===255)return;for(var B=0,D=E-1;(I!==0||B<x)&&D!==-1;D--,B++)I+=a*C[D]>>>0,C[D]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");x=B,y++}for(var M=E-x;M!==E&&C[M]===0;)M++;for(var ee=new Uint8Array(S+(E-M)),W=S;M!==E;)ee[W++]=C[M++];return ee}o(g,"decodeUnsafe");function w(_){var y=g(_);if(y)return y;throw new Error("Non-base"+a+" character")}return o(w,"decode"),{encode:b,decodeUnsafe:g,decode:w}}o(Tg,"base");tl.exports=Tg});var tn=Wa((o5,nl)=>{d();p();var vg=rl(),Ig="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";nl.exports=vg(Ig)});d();p();d();p();d();p();var Eh=Ge(pr(),1);d();p();function cs(e,t){if(!e)return{hideProvidersArray:!1,dontOverrideWindowEthereum:!1};let r=t.find(n=>n.hostname.toLowerCase().trim()===e.toLowerCase().trim());return r?{hideProvidersArray:r.hideProvidersArray,dontOverrideWindowEthereum:r.dontOverrideWindowEthereum}:{hideProvidersArray:!1,dontOverrideWindowEthereum:!1}}o(cs,"getRemoteProviderConfigurationSettings");d();p();d();p();d();p();function Wd(e){return new Promise(t=>setTimeout(t,e))}o(Wd,"delayAsync");function Th(e,t){let r=typeof t.interval=="function"?t.interval:()=>t.interval;if(typeof e!="function")throw new Error("Invalid arguments for retryInternal");let n=1;async function s(){try{return await e()}catch(i){if(n++<t.times&&t.errorFilter(i))return await Wd(r(n-1)),s();throw i}}return o(s,"retryAttempt"),s()}o(Th,"retryInternal");async function Yd(e,t,r=3,n=2e3,s){return Th(e,{times:r,interval:s?()=>n:i=>n*Math.pow(2,i-1),errorFilter:t})}o(Yd,"withRetry");var vh="https://sanity-proxy-v2.phantom.app",Ih="production",kh=dr.object({hostname:dr.string(),hideProvidersArray:dr.boolean(),dontOverrideWindowEthereum:dr.boolean()}),Rh=dr.object({dApps:dr.array(kh).optional()}).optional(),Ch=`
*[_type == 'dAppsList' && _id == 'dAppsList-singleton']{
 dApps
}[0]`,ds=o(()=>Yd(async()=>{let e=await bc.noBearer().get(`${vh}/v1/data/query/${Ih}?query=${encodeURIComponent(Ch)}`);if(e.status>=300)throw new Error(`status code: ${e.status}, body: ${e.data}`);let t=e.data;return Rh.parse(t.result)?.dApps??[]},()=>!0,3,50),"fetchDappsList");function ps(e){try{let t=new URL(e).hostname;if(!t||t==="localhost")return null;let r="www.";return t.startsWith(r)?t.slice(r.length):t}catch{return null}}o(ps,"getHostname");var hh=Ge(_h(),1),Ze=Ge($r(),1);d();p();var nu=Ge(Ah(),1),ou=Ge($r(),1);d();p();var so=[],us=o(e=>{so.push(e)},"addDappNotificationStream"),ls=o(e=>{so.splice(so.findIndex(t=>{let{origin:r,tabId:n,port:s}=t;return e.origin===r&&e.tabId===n&&s===e.port}),1)},"removeDappNotificationStream"),Vr=o(()=>so.map(({origin:e,tabId:t,port:r})=>({origin:e,tabId:t,send:o(n=>r.postMessage(JSON.stringify(n)),"send")})),"getDappTabs");d();p();d();p();var Bh=new Error("There is no currently selected account"),he=o(async()=>{let e=await Gc();if(!e)throw Bh;return e},"getSelectedAccount");var io=o(async()=>{let e=await he();return ms(e)},"getSelectedAccount"),ms=o(e=>{let t=e.addresses.filter(s=>s.networkID===pn.Mainnet||s.networkID===pn.Testnet);if(t.length===0)throw Ic;if(t.length===1){let[s]=t;if(!s?.publicKey)throw new Error("[btc provider] selected account account does not have a public key");return[{address:s.address,publicKey:Buffer.from(s.publicKey).toString("hex"),addressType:s.addressType,purpose:"payment"},{address:s.address,publicKey:Buffer.from(s.publicKey).toString("hex"),addressType:s.addressType,purpose:"ordinals"}]}let r=t.find(s=>s.addressType===ye.BitcoinTaproot);if(!r?.publicKey)throw new Error("[btc provider] ordinalAddress does not have a public key");let n=t.find(s=>s.addressType===ye.BitcoinNativeSegwit);if(!n?.publicKey)throw new Error("[btc provider] paymentAddress does not have a public key");return[{address:n.address,publicKey:Buffer.from(n.publicKey).toString("hex"),addressType:n.addressType,purpose:"payment"},{address:r.address,publicKey:Buffer.from(r.publicKey).toString("hex"),addressType:r.addressType,purpose:"ordinals"}]},"getBitcoinAddressWithPurpose");var fs={};Fe(fs,{addChain:()=>Zd,autoConfirmValidateMessage:()=>Qd,autoConfirmValidateTransaction:()=>ep,doesSupportEth:()=>tp,getAccountNonce:()=>rp,getAccounts:()=>np,getEnabledChains:()=>op,getNetworkId:()=>Kr,getRpcURL:()=>sp,getSelectedAccount:()=>ip,getSupportedNetworks:()=>ap,sendTransaction:()=>cp,signAndSendTransaction:()=>dp,signMessage:()=>pp,signTypedData:()=>up,switchChain:()=>lp});d();p();d();p();var Zd=o(async e=>{let t=parseInt(e.chainId.substring(2),16);return!!Mr(t)},"addChain");d();p();d();p();var Xd=Ge($r(),1);var Lh=new Pe,hs=class extends Md{static{o(this,"AutoConfirmService")}constructor(){super(Lh)}async isTabFocused(t){this.executedChecksAudit.push(Hn.IsTabFocused);let n=(await Xd.default.tabs.query({active:!0,lastFocusedWindow:!0}))[0]?.url;return n?new URL(n).hostname===new URL(t).hostname:!1}async isFeatureEnabled(){return this.executedChecksAudit.push(Hn.IsFeatureFlagEnabled),await Kn.isFeatureEnabledAsync("kill-automatic-approval")!==!0}async isWalletUnlocked(){return this.executedChecksAudit.push(Hn.IsWalletUnlocked),!!Ue()}},We=new hs;d();p();d();p();var ao={};d();p();function Jd(){return Tt(lt.DeveloperMode)?.isDeveloperMode===!0}o(Jd,"getIsDeveloperMode");var Kr=o(async e=>{if(Jd()){let i=(Tt(lt.NetworkSetting)?.setting??Fc().setting).eip155;if(!i)throw new Error("No evm developer mode chainId set");let a=i.replace("eip155:","");return jo(a)}let r=ao[e]??rc.Mainnet,n=Qe.getEVMNetworkIDValue(r);return jo(n.toString())},"getNetworkId");var Qd=o(async(e,t)=>{let r=await Kr(e.origin);if(!r)return{status:Ae.UnsupportedNetworkId};let n=Ur(r);if(!Qe.isEVMNetworkID(n))return{status:Ae.UnsupportedNetworkId};let s=await he(),i=await Ce(s,ye.EVM),a=Vt(ot.language)??"en",l=await Le.getDeviceId();return await We.isEthMessageAutoConfirmable({url:e,networkID:n,data:t,account:s,userAccountAddress:i,accountIdentifier:s.identifier},{locale:a,deviceId:l})},"autoConfirmValidateMessage");d();p();var ep=o(async(e,t)=>{let r=t[0]?.chainId;if(!r)return{status:Ae.UnsupportedNetworkId};let n=Ur(r);if(!Qe.isEVMNetworkID(n))return{status:Ae.UnsupportedNetworkId};let s=await he(),i=await Ce(s,ye.EVM),a=Vt(ot.language)??"en",l=await Le.getDeviceId();return We.isEthTransactionAutoConfirmable({url:e,networkID:n,data:t,account:s,userAccountAddress:i,accountIdentifier:s.identifier},{locale:a,deviceId:l})},"autoConfirmValidateTransaction");d();p();var tp=o(async()=>(await he()).addresses.some(t=>t.addressType===ye.EVM),"doesSupportEth");d();p();var Uh=new Pe,rp=o(async(e,t)=>{let r=parseInt(e.replace("0x",""),16),n=Mr(r);if(!n)throw new Error(`Unsupported EVM Network ID: ${r}`);return yd(n,t,Uh)},"getAccountNonce");d();p();var np=o(async()=>{let e=await he();return[Ce(e,ye.EVM).toLowerCase()]},"getAccounts");d();p();var op=o(async(e=!1)=>{let t=Tc(),r=Tt(lt.DeveloperMode);return e?t.enabledNetworkIDs.map($n):r?.isDeveloperMode===!0?t.enabledTestnetOnlyNetworkIDs.map($n):t.enabledMainnetOnlyNetworkIDs.map($n)},"getEnabledChains");d();p();var sp=o(async e=>{let t=Dn.parse(`eip155:${parseInt(e,16)}`);if(!Qe.isEVMNetworkID(t))throw new Error(`Invalid EVM NetworkID for chainID: ${e}`);let r=Qe.getRpcProxyUrl(t);if(!r)throw new Error(`No RPC URL found for chainID ${e}`);return r},"getRpcURL");d();p();var ip=o(async()=>{let e=await he();return Ce(e,ye.EVM).toLowerCase()},"getSelectedAccount");d();p();var ap=o(()=>xc(),"getSupportedNetworks");d();p();d();p();var Mh=new Pe,co=o(async(e,t)=>{let r=await he();Ce(r,ye.EVM);let n=ot.t("transactionsAppInteraction"),s=Dn.parse(`eip155:${e.chainId?parseInt(e.chainId,16):void 0}`),i=Rc(e.to??"",void 0,void 0,5),a=Pc(e.value??"",Qe.getTokenDecimals(s)),l=Qe.getTokenSymbol(s);if(e.nonce===void 0)throw new Error("nonce missing on unsigned transaction");if(e.maxFeePerGas==null||e.maxPriorityFeePerGas==null){let b=(await sd(s,!0))?.standard;if(b)e.maxFeePerGas==null&&(e.maxFeePerGas=`0x${b.maxFeePerGas.integerValue(Rr.ROUND_CEIL).toString(16)}`),e.maxPriorityFeePerGas==null&&(e.maxPriorityFeePerGas=`0x${b.maxPriorityFeePerGas.integerValue(Rr.ROUND_CEIL).toString(16)}`);else throw new Error("Standard transaction speed price information is missing.")}let m={accountSigner:ge,accountIdentifier:r.identifier,networkID:s,unsignedTransaction:e,callPayload:void 0,pendingTransactionInput:{ownerAddress:e.from,networkID:s,data:{nonce:e.nonce,hash:"",unsignedTransaction:cc.parse({from:e.from})},type:Fr.DappInteraction,display:{summary:{topLeft:{text:n},topRight:{text:a?`- ${a} ${l}`:""}},detail:{uiRecipient:i}}},storage:Mh};return t?await xd({...m,signature:t}):await wd(m)},"sendEthTransaction");var cp=co;d();p();var dp=co;d();p();var pp=o(async e=>{let t=Hd(e),r=await he();Ce(r,ye.EVM);let n=await ge.sign(r.identifier,{chainType:ye.EVM,signingType:"message",message:t});if(n.status==="error")throw new Error(`[${n.type}] ${n.message}`);return n.signature},"signMessage");d();p();var up=o(async e=>{let t=await he();Ce(t,ye.EVM);let r=await ge.sign(t.identifier,{chainType:ye.EVM,signingType:"typedData",...e});if(r.status==="error")throw new Error(`[${r.type}] ${r.message}`);return r.signature},"signTypedData");d();p();var lp=o(async(e,t)=>{let r=parseInt(e.substring(2),16),n=Mr(r);return n?(ao[t]=n,!0):!1},"switchChain");d();p();d();p();d();p();d();p();d();p();d();p();function mp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}o(mp,"number");function Ph(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Ph,"isBytes");function qr(e,...t){if(!Ph(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}o(qr,"bytes");function hp(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mp(e.outputLen),mp(e.blockLen)}o(hp,"hash");function Gr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(Gr,"exists");function fp(e,t){qr(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}o(fp,"output");d();p();d();p();var yr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var po=o(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),gt=o((e,t)=>e<<32-t|e>>>t,"rotr");var Jx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function gp(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(gp,"utf8ToBytes");function bn(e){return typeof e=="string"&&(e=gp(e)),qr(e),e}o(bn,"toBytes");function gs(...e){let t=0;for(let n=0;n<e.length;n++){let s=e[n];qr(s),t+=s.length}let r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){let i=e[n];r.set(i,s),s+=i.length}return r}o(gs,"concatBytes");var jr=class{static{o(this,"Hash")}clone(){return this._cloneInto()}},Qx={}.toString;function uo(e){let t=o(n=>e().update(bn(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}o(uo,"wrapConstructor");function lo(e=32){if(yr&&typeof yr.getRandomValues=="function")return yr.getRandomValues(new Uint8Array(e));if(yr&&typeof yr.randomBytes=="function")return yr.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}o(lo,"randomBytes");function Dh(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),l=Number(r&i),m=n?4:0,f=n?0:4;e.setUint32(t+m,a,n),e.setUint32(t+f,l,n)}o(Dh,"setBigUint64");var yp=o((e,t,r)=>e&t^~e&r,"Chi"),xp=o((e,t,r)=>e&t^e&r^t&r,"Maj"),Wr=class extends jr{static{o(this,"HashMD")}constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=po(this.buffer)}update(t){Gr(this);let{view:r,buffer:n,blockLen:s}=this;t=bn(t);let i=t.length;for(let a=0;a<i;){let l=Math.min(s-this.pos,i-a);if(l===s){let m=po(t);for(;s<=i-a;a+=s)this.process(m,a);continue}n.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gr(this),fp(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let g=a;g<s;g++)r[g]=0;Dh(n,s-8,BigInt(this.length*8),i),this.process(n,0);let l=po(t),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=m/4,b=this.get();if(f>b.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)l.setUint32(4*g,b[g],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:l}=this;return t.length=s,t.pos=l,t.finished=i,t.destroyed=a,s%r&&t.buffer.set(n),t}};d();p();var mo=BigInt(4294967295),ys=BigInt(32);function wp(e,t=!1){return t?{h:Number(e&mo),l:Number(e>>ys&mo)}:{h:Number(e>>ys&mo)|0,l:Number(e&mo)|0}}o(wp,"fromBig");function Nh(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:i,l:a}=wp(e[s],t);[r[s],n[s]]=[i,a]}return[r,n]}o(Nh,"split");var Oh=o((e,t)=>BigInt(e>>>0)<<ys|BigInt(t>>>0),"toBig"),Hh=o((e,t,r)=>e>>>r,"shrSH"),Fh=o((e,t,r)=>e<<32-r|t>>>r,"shrSL"),$h=o((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),zh=o((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),Vh=o((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),Kh=o((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),qh=o((e,t)=>t,"rotr32H"),Gh=o((e,t)=>e,"rotr32L"),jh=o((e,t,r)=>e<<r|t>>>32-r,"rotlSH"),Wh=o((e,t,r)=>t<<r|e>>>32-r,"rotlSL"),Yh=o((e,t,r)=>t<<r-32|e>>>64-r,"rotlBH"),Zh=o((e,t,r)=>e<<r-32|t>>>64-r,"rotlBL");function Xh(e,t,r,n){let s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}o(Xh,"add");var Jh=o((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),Qh=o((e,t,r,n)=>t+r+n+(e/2**32|0)|0,"add3H"),ef=o((e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),"add4L"),tf=o((e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,"add4H"),rf=o((e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0),"add5L"),nf=o((e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,"add5H");var of={fromBig:wp,split:Nh,toBig:Oh,shrSH:Hh,shrSL:Fh,rotrSH:$h,rotrSL:zh,rotrBH:Vh,rotrBL:Kh,rotr32H:qh,rotr32L:Gh,rotlSH:jh,rotlSL:Wh,rotlBH:Yh,rotlBL:Zh,add:Xh,add3L:Jh,add3H:Qh,add4L:ef,add4H:tf,add5H:nf,add5L:rf},Ee=of;var[sf,af]=Ee.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),jt=new Uint32Array(80),Wt=new Uint32Array(80),xs=class extends Wr{static{o(this,"SHA512")}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:l,Dl:m,Eh:f,El:b,Fh:g,Fl:w,Gh:_,Gl:y,Hh:S,Hl:x}=this;return[t,r,n,s,i,a,l,m,f,b,g,w,_,y,S,x]}set(t,r,n,s,i,a,l,m,f,b,g,w,_,y,S,x){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=l|0,this.Dl=m|0,this.Eh=f|0,this.El=b|0,this.Fh=g|0,this.Fl=w|0,this.Gh=_|0,this.Gl=y|0,this.Hh=S|0,this.Hl=x|0}process(t,r){for(let I=0;I<16;I++,r+=4)jt[I]=t.getUint32(r),Wt[I]=t.getUint32(r+=4);for(let I=16;I<80;I++){let B=jt[I-15]|0,D=Wt[I-15]|0,M=Ee.rotrSH(B,D,1)^Ee.rotrSH(B,D,8)^Ee.shrSH(B,D,7),ee=Ee.rotrSL(B,D,1)^Ee.rotrSL(B,D,8)^Ee.shrSL(B,D,7),W=jt[I-2]|0,J=Wt[I-2]|0,Se=Ee.rotrSH(W,J,19)^Ee.rotrBH(W,J,61)^Ee.shrSH(W,J,6),oe=Ee.rotrSL(W,J,19)^Ee.rotrBL(W,J,61)^Ee.shrSL(W,J,6),se=Ee.add4L(ee,oe,Wt[I-7],Wt[I-16]),V=Ee.add4H(se,M,Se,jt[I-7],jt[I-16]);jt[I]=V|0,Wt[I]=se|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:l,Cl:m,Dh:f,Dl:b,Eh:g,El:w,Fh:_,Fl:y,Gh:S,Gl:x,Hh:E,Hl:C}=this;for(let I=0;I<80;I++){let B=Ee.rotrSH(g,w,14)^Ee.rotrSH(g,w,18)^Ee.rotrBH(g,w,41),D=Ee.rotrSL(g,w,14)^Ee.rotrSL(g,w,18)^Ee.rotrBL(g,w,41),M=g&_^~g&S,ee=w&y^~w&x,W=Ee.add5L(C,D,ee,af[I],Wt[I]),J=Ee.add5H(W,E,B,M,sf[I],jt[I]),Se=W|0,oe=Ee.rotrSH(n,s,28)^Ee.rotrBH(n,s,34)^Ee.rotrBH(n,s,39),se=Ee.rotrSL(n,s,28)^Ee.rotrBL(n,s,34)^Ee.rotrBL(n,s,39),V=n&i^n&l^i&l,H=s&a^s&m^a&m;E=S|0,C=x|0,S=_|0,x=y|0,_=g|0,y=w|0,{h:g,l:w}=Ee.add(f|0,b|0,J|0,Se|0),f=l|0,b=m|0,l=i|0,m=a|0,i=n|0,a=s|0;let O=Ee.add3L(Se,se,H);n=Ee.add3H(O,J,oe,V),s=O|0}({h:n,l:s}=Ee.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=Ee.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:l,l:m}=Ee.add(this.Ch|0,this.Cl|0,l|0,m|0),{h:f,l:b}=Ee.add(this.Dh|0,this.Dl|0,f|0,b|0),{h:g,l:w}=Ee.add(this.Eh|0,this.El|0,g|0,w|0),{h:_,l:y}=Ee.add(this.Fh|0,this.Fl|0,_|0,y|0),{h:S,l:x}=Ee.add(this.Gh|0,this.Gl|0,S|0,x|0),{h:E,l:C}=Ee.add(this.Hh|0,this.Hl|0,E|0,C|0),this.set(n,s,i,a,l,m,f,b,g,w,_,y,S,x,E,C)}roundClean(){jt.fill(0),Wt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var bp=uo(()=>new xs);d();p();d();p();d();p();var fo={};Fe(fo,{aInRange:()=>st,abool:()=>yt,abytes:()=>Yr,bitGet:()=>mf,bitLen:()=>_s,bitMask:()=>An,bitSet:()=>hf,bytesToHex:()=>Mt,bytesToNumberBE:()=>Pt,bytesToNumberLE:()=>Zt,concatBytes:()=>Dt,createHmacDrbg:()=>Es,ensureBytes:()=>Ke,equalBytes:()=>uf,hexToBytes:()=>wr,hexToNumber:()=>As,inRange:()=>Sn,isBytes:()=>Yt,memoized:()=>Sr,notImplemented:()=>gf,numberToBytesBE:()=>Xt,numberToBytesLE:()=>br,numberToHexUnpadded:()=>xr,numberToVarBytesBE:()=>pf,utf8ToBytes:()=>lf,validateObject:()=>vt});d();p();var Ss=BigInt(0),ho=BigInt(1),cf=BigInt(2);function Yt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Yt,"isBytes");function Yr(e){if(!Yt(e))throw new Error("Uint8Array expected")}o(Yr,"abytes");function yt(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}o(yt,"abool");var df=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mt(e){Yr(e);let t="";for(let r=0;r<e.length;r++)t+=df[e[r]];return t}o(Mt,"bytesToHex");function xr(e){let t=e.toString(16);return t.length&1?`0${t}`:t}o(xr,"numberToHexUnpadded");function As(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}o(As,"hexToNumber");var Ut={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Sp(e){if(e>=Ut._0&&e<=Ut._9)return e-Ut._0;if(e>=Ut._A&&e<=Ut._F)return e-(Ut._A-10);if(e>=Ut._a&&e<=Ut._f)return e-(Ut._a-10)}o(Sp,"asciiToBase16");function wr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let a=Sp(e.charCodeAt(i)),l=Sp(e.charCodeAt(i+1));if(a===void 0||l===void 0){let m=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+i)}n[s]=a*16+l}return n}o(wr,"hexToBytes");function Pt(e){return As(Mt(e))}o(Pt,"bytesToNumberBE");function Zt(e){return Yr(e),As(Mt(Uint8Array.from(e).reverse()))}o(Zt,"bytesToNumberLE");function Xt(e,t){return wr(e.toString(16).padStart(t*2,"0"))}o(Xt,"numberToBytesBE");function br(e,t){return Xt(e,t).reverse()}o(br,"numberToBytesLE");function pf(e){return wr(xr(e))}o(pf,"numberToVarBytesBE");function Ke(e,t,r){let n;if(typeof t=="string")try{n=wr(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Yt(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${e} expected ${r} bytes, got ${s}`);return n}o(Ke,"ensureBytes");function Dt(...e){let t=0;for(let n=0;n<e.length;n++){let s=e[n];Yr(s),t+=s.length}let r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){let i=e[n];r.set(i,s),s+=i.length}return r}o(Dt,"concatBytes");function uf(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}o(uf,"equalBytes");function lf(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(lf,"utf8ToBytes");var ws=o(e=>typeof e=="bigint"&&Ss<=e,"isPosBig");function Sn(e,t,r){return ws(e)&&ws(t)&&ws(r)&&t<=e&&e<r}o(Sn,"inRange");function st(e,t,r,n){if(!Sn(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}o(st,"aInRange");function _s(e){let t;for(t=0;e>Ss;e>>=ho,t+=1);return t}o(_s,"bitLen");function mf(e,t){return e>>BigInt(t)&ho}o(mf,"bitGet");function hf(e,t,r){return e|(r?ho:Ss)<<BigInt(t)}o(hf,"bitSet");var An=o(e=>(cf<<BigInt(e-1))-ho,"bitMask"),bs=o(e=>new Uint8Array(e),"u8n"),Ap=o(e=>Uint8Array.from(e),"u8fr");function Es(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=bs(e),s=bs(e),i=0,a=o(()=>{n.fill(1),s.fill(0),i=0},"reset"),l=o((...g)=>r(s,n,...g),"h"),m=o((g=bs())=>{s=l(Ap([0]),g),n=l(),g.length!==0&&(s=l(Ap([1]),g),n=l())},"reseed"),f=o(()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0,w=[];for(;g<t;){n=l();let _=n.slice();w.push(_),g+=n.length}return Dt(...w)},"gen");return o((g,w)=>{a(),m(g);let _;for(;!(_=w(f()));)m();return a(),_},"genUntil")}o(Es,"createHmacDrbg");var ff={bigint:o(e=>typeof e=="bigint","bigint"),function:o(e=>typeof e=="function","function"),boolean:o(e=>typeof e=="boolean","boolean"),string:o(e=>typeof e=="string","string"),stringOrUint8Array:o(e=>typeof e=="string"||Yt(e),"stringOrUint8Array"),isSafeInteger:o(e=>Number.isSafeInteger(e),"isSafeInteger"),array:o(e=>Array.isArray(e),"array"),field:o((e,t)=>t.Fp.isValid(e),"field"),hash:o(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function vt(e,t,r={}){let n=o((s,i,a)=>{let l=ff[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);let m=e[s];if(!(a&&m===void 0)&&!l(m,e))throw new Error(`Invalid param ${String(s)}=${m} (${typeof m}), expected ${i}`)},"checkField");for(let[s,i]of Object.entries(t))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return e}o(vt,"validateObject");var gf=o(()=>{throw new Error("not implemented")},"notImplemented");function Sr(e){let t=new WeakMap;return(r,...n)=>{let s=t.get(r);if(s!==void 0)return s;let i=e(r,...n);return t.set(r,i),i}}o(Sr,"memoized");var Ye=BigInt(0),$e=BigInt(1),Ar=BigInt(2),yf=BigInt(3),Ts=BigInt(4),_p=BigInt(5),Ep=BigInt(8),xf=BigInt(9),wf=BigInt(16);function Ne(e,t){let r=e%t;return r>=Ye?r:t+r}o(Ne,"mod");function bf(e,t,r){if(r<=Ye||t<Ye)throw new Error("Expected power/modulo > 0");if(r===$e)return Ye;let n=$e;for(;t>Ye;)t&$e&&(n=n*e%r),e=e*e%r,t>>=$e;return n}o(bf,"pow");function xt(e,t,r){let n=e;for(;t-- >Ye;)n*=n,n%=r;return n}o(xt,"pow2");function go(e,t){if(e===Ye||t<=Ye)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ne(e,t),n=t,s=Ye,i=$e,a=$e,l=Ye;for(;r!==Ye;){let f=n/r,b=n%r,g=s-a*f,w=i-l*f;n=r,r=b,s=a,i=l,a=g,l=w}if(n!==$e)throw new Error("invert: does not exist");return Ne(s,t)}o(go,"invert");function Sf(e){let t=(e-$e)/Ar,r,n,s;for(r=e-$e,n=0;r%Ar===Ye;r/=Ar,n++);for(s=Ar;s<e&&bf(s,t,e)!==e-$e;s++);if(n===1){let a=(e+$e)/Ts;return o(function(m,f){let b=m.pow(f,a);if(!m.eql(m.sqr(b),f))throw new Error("Cannot find square root");return b},"tonelliFast")}let i=(r+$e)/Ar;return o(function(l,m){if(l.pow(m,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let f=n,b=l.pow(l.mul(l.ONE,s),r),g=l.pow(m,i),w=l.pow(m,r);for(;!l.eql(w,l.ONE);){if(l.eql(w,l.ZERO))return l.ZERO;let _=1;for(let S=l.sqr(w);_<f&&!l.eql(S,l.ONE);_++)S=l.sqr(S);let y=l.pow(b,$e<<BigInt(f-_-1));b=l.sqr(y),g=l.mul(g,y),w=l.mul(w,b),f=_}return g},"tonelliSlow")}o(Sf,"tonelliShanks");function Af(e){if(e%Ts===yf){let t=(e+$e)/Ts;return o(function(n,s){let i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i},"sqrt3mod4")}if(e%Ep===_p){let t=(e-_p)/Ep;return o(function(n,s){let i=n.mul(s,Ar),a=n.pow(i,t),l=n.mul(s,a),m=n.mul(n.mul(l,Ar),a),f=n.mul(l,n.sub(m,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f},"sqrt5mod8")}return e%wf,Sf(e)}o(Af,"FpSqrt");var Tp=o((e,t)=>(Ne(e,t)&$e)===$e,"isNegativeLE"),_f=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vs(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=_f.reduce((n,s)=>(n[s]="function",n),t);return vt(e,r)}o(vs,"validateField");function Ef(e,t,r){if(r<Ye)throw new Error("Expected power > 0");if(r===Ye)return e.ONE;if(r===$e)return t;let n=e.ONE,s=t;for(;r>Ye;)r&$e&&(n=e.mul(n,s)),s=e.sqr(s),r>>=$e;return n}o(Ef,"FpPow");function Tf(e,t){let r=new Array(t.length),n=t.reduce((i,a,l)=>e.is0(a)?i:(r[l]=i,e.mul(i,a)),e.ONE),s=e.inv(n);return t.reduceRight((i,a,l)=>e.is0(a)?i:(r[l]=e.mul(i,r[l]),e.mul(i,a)),s),r}o(Tf,"FpInvertBatch");function Is(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}o(Is,"nLength");function Jt(e,t,r=!1,n={}){if(e<=Ye)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:s,nByteLength:i}=Is(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=Af(e),l=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:An(s),ZERO:Ye,ONE:$e,create:o(m=>Ne(m,e),"create"),isValid:o(m=>{if(typeof m!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof m}`);return Ye<=m&&m<e},"isValid"),is0:o(m=>m===Ye,"is0"),isOdd:o(m=>(m&$e)===$e,"isOdd"),neg:o(m=>Ne(-m,e),"neg"),eql:o((m,f)=>m===f,"eql"),sqr:o(m=>Ne(m*m,e),"sqr"),add:o((m,f)=>Ne(m+f,e),"add"),sub:o((m,f)=>Ne(m-f,e),"sub"),mul:o((m,f)=>Ne(m*f,e),"mul"),pow:o((m,f)=>Ef(l,m,f),"pow"),div:o((m,f)=>Ne(m*go(f,e),e),"div"),sqrN:o(m=>m*m,"sqrN"),addN:o((m,f)=>m+f,"addN"),subN:o((m,f)=>m-f,"subN"),mulN:o((m,f)=>m*f,"mulN"),inv:o(m=>go(m,e),"inv"),sqrt:n.sqrt||(m=>a(l,m)),invertBatch:o(m=>Tf(l,m),"invertBatch"),cmov:o((m,f,b)=>b?f:m,"cmov"),toBytes:o(m=>r?br(m,i):Xt(m,i),"toBytes"),fromBytes:o(m=>{if(m.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${m.length}`);return r?Zt(m):Pt(m)},"fromBytes")});return Object.freeze(l)}o(Jt,"Field");function vp(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}o(vp,"getFieldBytesLength");function ks(e){let t=vp(e);return t+Math.ceil(t/2)}o(ks,"getMinHashLength");function Ip(e,t,r=!1){let n=e.length,s=vp(t),i=ks(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let a=r?Pt(e):Zt(e),l=Ne(a,t-$e)+$e;return r?br(l,s):Xt(l,s)}o(Ip,"mapHashToField");var If=BigInt(0),Rs=BigInt(1),Cs=new WeakMap,kp=new WeakMap;function yo(e,t){let r=o((i,a)=>{let l=a.negate();return i?l:a},"constTimeNegate"),n=o(i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},"validateW"),s=o(i=>{n(i);let a=Math.ceil(t/i)+1,l=2**(i-1);return{windows:a,windowSize:l}},"opts");return{constTimeNegate:r,unsafeLadder(i,a){let l=e.ZERO,m=i;for(;a>If;)a&Rs&&(l=l.add(m)),m=m.double(),a>>=Rs;return l},precomputeWindow(i,a){let{windows:l,windowSize:m}=s(a),f=[],b=i,g=b;for(let w=0;w<l;w++){g=b,f.push(g);for(let _=1;_<m;_++)g=g.add(b),f.push(g);b=g.double()}return f},wNAF(i,a,l){let{windows:m,windowSize:f}=s(i),b=e.ZERO,g=e.BASE,w=BigInt(2**i-1),_=2**i,y=BigInt(i);for(let S=0;S<m;S++){let x=S*f,E=Number(l&w);l>>=y,E>f&&(E-=_,l+=Rs);let C=x,I=x+Math.abs(E)-1,B=S%2!==0,D=E<0;E===0?g=g.add(r(B,a[C])):b=b.add(r(D,a[I]))}return{p:b,f:g}},wNAFCached(i,a,l){let m=kp.get(i)||1,f=Cs.get(i);return f||(f=this.precomputeWindow(i,m),m!==1&&Cs.set(i,l(f))),this.wNAF(m,f,a)},setWindowSize(i,a){n(a),kp.set(i,a),Cs.delete(i)}}}o(yo,"wNAF");function xo(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((b,g)=>{if(!t.isValid(b))throw new Error(`wrong scalar at index ${g}`)}),r.forEach((b,g)=>{if(!(b instanceof e))throw new Error(`wrong point at index ${g}`)});let s=_s(BigInt(r.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,l=new Array(a+1).fill(e.ZERO),m=Math.floor((t.BITS-1)/i)*i,f=e.ZERO;for(let b=m;b>=0;b-=i){l.fill(e.ZERO);for(let w=0;w<n.length;w++){let _=n[w],y=Number(_>>BigInt(b)&BigInt(a));l[y]=l[y].add(r[w])}let g=e.ZERO;for(let w=l.length-1,_=e.ZERO;w>0;w--)_=_.add(l[w]),g=g.add(_);if(f=f.add(g),b!==0)for(let w=0;w<i;w++)f=f.double()}return f}o(xo,"pippenger");function _n(e){return vs(e.Fp),vt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Is(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}o(_n,"validateBasic");var wt=BigInt(0),it=BigInt(1),wo=BigInt(2),kf=BigInt(8),Rf={zip215:!0};function Cf(e){let t=_n(e);return vt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}o(Cf,"validateOpts");function Rp(e){let t=Cf(e),{Fp:r,n,prehash:s,hash:i,randomBytes:a,nByteLength:l,h:m}=t,f=wo<<BigInt(l*8)-it,b=r.create,g=Jt(t.n,t.nBitLength),w=t.uvRatio||((P,U)=>{try{return{isValid:!0,value:r.sqrt(P*r.inv(U))}}catch{return{isValid:!1,value:wt}}}),_=t.adjustScalarBytes||(P=>P),y=t.domain||((P,U,N)=>{if(yt("phflag",N),U.length||N)throw new Error("Contexts/pre-hash are not supported");return P});function S(P,U){st("coordinate "+P,U,wt,f)}o(S,"aCoordinate");function x(P){if(!(P instanceof I))throw new Error("ExtendedPoint expected")}o(x,"assertPoint");let E=Sr((P,U)=>{let{ex:N,ey:Z,ez:K}=P,pe=P.is0();U==null&&(U=pe?kf:r.inv(K));let te=b(N*U),ae=b(Z*U),re=b(K*U);if(pe)return{x:wt,y:it};if(re!==it)throw new Error("invZ was invalid");return{x:te,y:ae}}),C=Sr(P=>{let{a:U,d:N}=t;if(P.is0())throw new Error("bad point: ZERO");let{ex:Z,ey:K,ez:pe,et:te}=P,ae=b(Z*Z),re=b(K*K),ie=b(pe*pe),ce=b(ie*ie),$=b(ae*U),u=b(ie*b($+re)),h=b(ce+b(N*b(ae*re)));if(u!==h)throw new Error("bad point: equation left != right (1)");let A=b(Z*K),k=b(pe*te);if(A!==k)throw new Error("bad point: equation left != right (2)");return!0});class I{static{o(this,"Point")}constructor(U,N,Z,K){this.ex=U,this.ey=N,this.ez=Z,this.et=K,S("x",U),S("y",N),S("z",Z),S("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(U){if(U instanceof I)throw new Error("extended point not allowed");let{x:N,y:Z}=U||{};return S("x",N),S("y",Z),new I(N,Z,it,b(N*Z))}static normalizeZ(U){let N=r.invertBatch(U.map(Z=>Z.ez));return U.map((Z,K)=>Z.toAffine(N[K])).map(I.fromAffine)}static msm(U,N){return xo(I,g,U,N)}_setWindowSize(U){M.setWindowSize(this,U)}assertValidity(){C(this)}equals(U){x(U);let{ex:N,ey:Z,ez:K}=this,{ex:pe,ey:te,ez:ae}=U,re=b(N*ae),ie=b(pe*K),ce=b(Z*ae),$=b(te*K);return re===ie&&ce===$}is0(){return this.equals(I.ZERO)}negate(){return new I(b(-this.ex),this.ey,this.ez,b(-this.et))}double(){let{a:U}=t,{ex:N,ey:Z,ez:K}=this,pe=b(N*N),te=b(Z*Z),ae=b(wo*b(K*K)),re=b(U*pe),ie=N+Z,ce=b(b(ie*ie)-pe-te),$=re+te,u=$-ae,h=re-te,A=b(ce*u),k=b($*h),L=b(ce*h),R=b(u*$);return new I(A,k,R,L)}add(U){x(U);let{a:N,d:Z}=t,{ex:K,ey:pe,ez:te,et:ae}=this,{ex:re,ey:ie,ez:ce,et:$}=U;if(N===BigInt(-1)){let Te=b((pe-K)*(ie+re)),Be=b((pe+K)*(ie-re)),Me=b(Be-Te);if(Me===wt)return this.double();let He=b(te*wo*$),kr=b(ae*wo*ce),qa=kr+He,Ga=Be+Te,ja=kr-He,xh=b(qa*Me),wh=b(Ga*ja),bh=b(qa*ja),Sh=b(Me*Ga);return new I(xh,wh,Sh,bh)}let u=b(K*re),h=b(pe*ie),A=b(ae*Z*$),k=b(te*ce),L=b((K+pe)*(re+ie)-u-h),R=k-A,v=k+A,F=b(h-N*u),Y=b(L*R),q=b(v*F),ne=b(L*F),_e=b(R*v);return new I(Y,q,_e,ne)}subtract(U){return this.add(U.negate())}wNAF(U){return M.wNAFCached(this,U,I.normalizeZ)}multiply(U){let N=U;st("scalar",N,it,n);let{p:Z,f:K}=this.wNAF(N);return I.normalizeZ([Z,K])[0]}multiplyUnsafe(U){let N=U;return st("scalar",N,wt,n),N===wt?D:this.equals(D)||N===it?this:this.equals(B)?this.wNAF(N).p:M.unsafeLadder(this,N)}isSmallOrder(){return this.multiplyUnsafe(m).is0()}isTorsionFree(){return M.unsafeLadder(this,n).is0()}toAffine(U){return E(this,U)}clearCofactor(){let{h:U}=t;return U===it?this:this.multiplyUnsafe(U)}static fromHex(U,N=!1){let{d:Z,a:K}=t,pe=r.BYTES;U=Ke("pointHex",U,pe),yt("zip215",N);let te=U.slice(),ae=U[pe-1];te[pe-1]=ae&-129;let re=Zt(te),ie=N?f:r.ORDER;st("pointHex.y",re,wt,ie);let ce=b(re*re),$=b(ce-it),u=b(Z*ce-K),{isValid:h,value:A}=w($,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let k=(A&it)===it,L=(ae&128)!==0;if(!N&&A===wt&&L)throw new Error("Point.fromHex: x=0 and x_0=1");return L!==k&&(A=b(-A)),I.fromAffine({x:A,y:re})}static fromPrivateKey(U){return J(U).point}toRawBytes(){let{x:U,y:N}=this.toAffine(),Z=br(N,r.BYTES);return Z[Z.length-1]|=U&it?128:0,Z}toHex(){return Mt(this.toRawBytes())}}I.BASE=new I(t.Gx,t.Gy,it,b(t.Gx*t.Gy)),I.ZERO=new I(wt,it,it,wt);let{BASE:B,ZERO:D}=I,M=yo(I,l*8);function ee(P){return Ne(P,n)}o(ee,"modN");function W(P){return ee(Zt(P))}o(W,"modN_LE");function J(P){let U=l;P=Ke("private key",P,U);let N=Ke("hashed private key",i(P),2*U),Z=_(N.slice(0,U)),K=N.slice(U,2*U),pe=W(Z),te=B.multiply(pe),ae=te.toRawBytes();return{head:Z,prefix:K,scalar:pe,point:te,pointBytes:ae}}o(J,"getExtendedPublicKey");function Se(P){return J(P).pointBytes}o(Se,"getPublicKey");function oe(P=new Uint8Array,...U){let N=Dt(...U);return W(i(y(N,Ke("context",P),!!s)))}o(oe,"hashDomainToScalar");function se(P,U,N={}){P=Ke("message",P),s&&(P=s(P));let{prefix:Z,scalar:K,pointBytes:pe}=J(U),te=oe(N.context,Z,P),ae=B.multiply(te).toRawBytes(),re=oe(N.context,ae,pe,P),ie=ee(te+re*K);st("signature.s",ie,wt,n);let ce=Dt(ae,br(ie,r.BYTES));return Ke("result",ce,l*2)}o(se,"sign");let V=Rf;function H(P,U,N,Z=V){let{context:K,zip215:pe}=Z,te=r.BYTES;P=Ke("signature",P,2*te),U=Ke("message",U),pe!==void 0&&yt("zip215",pe),s&&(U=s(U));let ae=Zt(P.slice(te,2*te)),re,ie,ce;try{re=I.fromHex(N,pe),ie=I.fromHex(P.slice(0,te),pe),ce=B.multiplyUnsafe(ae)}catch{return!1}if(!pe&&re.isSmallOrder())return!1;let $=oe(K,ie.toRawBytes(),re.toRawBytes(),U);return ie.add(re.multiplyUnsafe($)).subtract(ce).clearCofactor().equals(I.ZERO)}return o(H,"verify"),B._setWindowSize(8),{CURVE:t,getPublicKey:Se,sign:se,verify:H,ExtendedPoint:I,utils:{getExtendedPublicKey:J,randomPrivateKey:o(()=>a(r.BYTES),"randomPrivateKey"),precompute(P=8,U=I.BASE){return U._setWindowSize(P),U.multiply(BigInt(3)),U}}}}o(Rp,"twistedEdwards");var Bs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Cp=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),G4=BigInt(0),Bf=BigInt(1),Bp=BigInt(2),j4=BigInt(3),Lf=BigInt(5),Uf=BigInt(8);function Mf(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Bs,l=e*e%i*e%i,m=xt(l,Bp,i)*l%i,f=xt(m,Bf,i)*e%i,b=xt(f,Lf,i)*f%i,g=xt(b,t,i)*b%i,w=xt(g,r,i)*g%i,_=xt(w,n,i)*w%i,y=xt(_,s,i)*_%i,S=xt(y,s,i)*_%i,x=xt(S,t,i)*b%i;return{pow_p_5_8:xt(x,Bp,i)*e%i,b2:l}}o(Mf,"ed25519_pow_2_252_3");function Pf(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}o(Pf,"adjustScalarBytes");function Df(e,t){let r=Bs,n=Ne(t*t*t,r),s=Ne(n*n*t,r),i=Mf(e*s).pow_p_5_8,a=Ne(e*n*i,r),l=Ne(t*a*a,r),m=a,f=Ne(a*Cp,r),b=l===e,g=l===Ne(-e,r),w=l===Ne(-e*Cp,r);return b&&(a=m),(g||w)&&(a=f),Tp(a,r)&&(a=Ne(-a,r)),{isValid:b||g,value:a}}o(Df,"uvRatio");var Nf=Jt(Bs,void 0,!0),Of={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Nf,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Uf,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bp,randomBytes:lo,adjustScalarBytes:Pf,uvRatio:Df},Lp=Rp(Of);d();p();function Up(e,t){return Bt.IntentMessage(Bt.fixedArray(t.length,Bt.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}o(Up,"messageWithIntent");d();p();var Nt={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},Mp={ED25519:32,Secp256k1:33,Secp256r1:33},Pp={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};d();p();d();p();d();p();d();p();var Hf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),er=new Uint32Array(64),Ls=class extends Wr{static{o(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=Qt[0]|0,this.B=Qt[1]|0,this.C=Qt[2]|0,this.D=Qt[3]|0,this.E=Qt[4]|0,this.F=Qt[5]|0,this.G=Qt[6]|0,this.H=Qt[7]|0}get(){let{A:t,B:r,C:n,D:s,E:i,F:a,G:l,H:m}=this;return[t,r,n,s,i,a,l,m]}set(t,r,n,s,i,a,l,m){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=m|0}process(t,r){for(let g=0;g<16;g++,r+=4)er[g]=t.getUint32(r,!1);for(let g=16;g<64;g++){let w=er[g-15],_=er[g-2],y=gt(w,7)^gt(w,18)^w>>>3,S=gt(_,17)^gt(_,19)^_>>>10;er[g]=S+er[g-7]+y+er[g-16]|0}let{A:n,B:s,C:i,D:a,E:l,F:m,G:f,H:b}=this;for(let g=0;g<64;g++){let w=gt(l,6)^gt(l,11)^gt(l,25),_=b+w+yp(l,m,f)+Hf[g]+er[g]|0,S=(gt(n,2)^gt(n,13)^gt(n,22))+xp(n,s,i)|0;b=f,f=m,m=l,l=a+_|0,a=i,i=s,s=n,n=_+S|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,m=m+this.F|0,f=f+this.G|0,b=b+this.H|0,this.set(n,s,i,a,l,m,f,b)}roundClean(){er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Dp=uo(()=>new Ls);d();p();d();p();var bo=class extends jr{static{o(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,hp(t);let n=bn(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gr(this),this.iHash.update(t),this}digestInto(t){Gr(this),qr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:l}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=l,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Us=o((e,t,r)=>new bo(e,t).update(r).digest(),"hmac");Us.create=(e,t)=>new bo(e,t);d();p();function Np(e){e.lowS!==void 0&&yt("lowS",e.lowS),e.prehash!==void 0&&yt("prehash",e.prehash)}o(Np,"validateSigVerOpts");function Ff(e){let t=_n(e);vt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}o(Ff,"validatePointOpts");var{bytesToNumberBE:$f,hexToBytes:zf}=fo,Ot={Err:class extends Error{static{o(this,"DERErr")}constructor(t=""){super(t)}},_tlv:{encode:o((e,t)=>{let{Err:r}=Ot;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,s=xr(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?xr(s.length/2|128):"";return`${xr(e)}${i}${s}${t}`},"encode"),decode(e,t){let{Err:r}=Ot,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let s=t[n++],i=!!(s&128),a=0;if(!i)a=s;else{let m=s&127;if(!m)throw new r("tlv.decode(long): indefinite length not supported");if(m>4)throw new r("tlv.decode(long): byte length is too big");let f=t.subarray(n,n+m);if(f.length!==m)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let b of f)a=a<<8|b;if(n+=m,a<128)throw new r("tlv.decode(long): not minimal encoding")}let l=t.subarray(n,n+a);if(l.length!==a)throw new r("tlv.decode: wrong value length");return{v:l,l:t.subarray(n+a)}}},_int:{encode(e){let{Err:t}=Ot;if(e<Ht)throw new t("integer: negative integers are not allowed");let r=xr(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected assertion");return r},decode(e){let{Err:t}=Ot;if(e[0]&128)throw new t("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return $f(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=Ot,s=typeof e=="string"?zf(e):e;Yr(s);let{v:i,l:a}=n.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");let{v:l,l:m}=n.decode(2,i),{v:f,l:b}=n.decode(2,m);if(b.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(f)}},hexFromSig(e){let{_tlv:t,_int:r}=Ot,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},Ht=BigInt(0),Xe=BigInt(1),Sw=BigInt(2),Op=BigInt(3),Aw=BigInt(4);function Vf(e){let t=Ff(e),{Fp:r}=t,n=Jt(t.n,t.nBitLength),s=t.toBytes||((S,x,E)=>{let C=x.toAffine();return Dt(Uint8Array.from([4]),r.toBytes(C.x),r.toBytes(C.y))}),i=t.fromBytes||(S=>{let x=S.subarray(1),E=r.fromBytes(x.subarray(0,r.BYTES)),C=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:E,y:C}});function a(S){let{a:x,b:E}=t,C=r.sqr(S),I=r.mul(C,S);return r.add(r.add(I,r.mul(S,x)),E)}if(o(a,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(S){return Sn(S,Xe,t.n)}o(l,"isWithinCurveOrder");function m(S){let{allowedPrivateKeyLengths:x,nByteLength:E,wrapPrivateKey:C,n:I}=t;if(x&&typeof S!="bigint"){if(Yt(S)&&(S=Mt(S)),typeof S!="string"||!x.includes(S.length))throw new Error("Invalid key");S=S.padStart(E*2,"0")}let B;try{B=typeof S=="bigint"?S:Pt(Ke("private key",S,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof S}`)}return C&&(B=Ne(B,I)),st("private key",B,Xe,I),B}o(m,"normPrivateKeyToScalar");function f(S){if(!(S instanceof w))throw new Error("ProjectivePoint expected")}o(f,"assertPrjPoint");let b=Sr((S,x)=>{let{px:E,py:C,pz:I}=S;if(r.eql(I,r.ONE))return{x:E,y:C};let B=S.is0();x==null&&(x=B?r.ONE:r.inv(I));let D=r.mul(E,x),M=r.mul(C,x),ee=r.mul(I,x);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ee,r.ONE))throw new Error("invZ was invalid");return{x:D,y:M}}),g=Sr(S=>{if(S.is0()){if(t.allowInfinityPoint&&!r.is0(S.py))return;throw new Error("bad point: ZERO")}let{x,y:E}=S.toAffine();if(!r.isValid(x)||!r.isValid(E))throw new Error("bad point: x or y not FE");let C=r.sqr(E),I=a(x);if(!r.eql(C,I))throw new Error("bad point: equation left != right");if(!S.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{static{o(this,"Point")}constructor(x,E,C){if(this.px=x,this.py=E,this.pz=C,x==null||!r.isValid(x))throw new Error("x required");if(E==null||!r.isValid(E))throw new Error("y required");if(C==null||!r.isValid(C))throw new Error("z required");Object.freeze(this)}static fromAffine(x){let{x:E,y:C}=x||{};if(!x||!r.isValid(E)||!r.isValid(C))throw new Error("invalid affine point");if(x instanceof w)throw new Error("projective point not allowed");let I=o(B=>r.eql(B,r.ZERO),"is0");return I(E)&&I(C)?w.ZERO:new w(E,C,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){let E=r.invertBatch(x.map(C=>C.pz));return x.map((C,I)=>C.toAffine(E[I])).map(w.fromAffine)}static fromHex(x){let E=w.fromAffine(i(Ke("pointHex",x)));return E.assertValidity(),E}static fromPrivateKey(x){return w.BASE.multiply(m(x))}static msm(x,E){return xo(w,n,x,E)}_setWindowSize(x){y.setWindowSize(this,x)}assertValidity(){g(this)}hasEvenY(){let{y:x}=this.toAffine();if(r.isOdd)return!r.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){f(x);let{px:E,py:C,pz:I}=this,{px:B,py:D,pz:M}=x,ee=r.eql(r.mul(E,M),r.mul(B,I)),W=r.eql(r.mul(C,M),r.mul(D,I));return ee&&W}negate(){return new w(this.px,r.neg(this.py),this.pz)}double(){let{a:x,b:E}=t,C=r.mul(E,Op),{px:I,py:B,pz:D}=this,M=r.ZERO,ee=r.ZERO,W=r.ZERO,J=r.mul(I,I),Se=r.mul(B,B),oe=r.mul(D,D),se=r.mul(I,B);return se=r.add(se,se),W=r.mul(I,D),W=r.add(W,W),M=r.mul(x,W),ee=r.mul(C,oe),ee=r.add(M,ee),M=r.sub(Se,ee),ee=r.add(Se,ee),ee=r.mul(M,ee),M=r.mul(se,M),W=r.mul(C,W),oe=r.mul(x,oe),se=r.sub(J,oe),se=r.mul(x,se),se=r.add(se,W),W=r.add(J,J),J=r.add(W,J),J=r.add(J,oe),J=r.mul(J,se),ee=r.add(ee,J),oe=r.mul(B,D),oe=r.add(oe,oe),J=r.mul(oe,se),M=r.sub(M,J),W=r.mul(oe,Se),W=r.add(W,W),W=r.add(W,W),new w(M,ee,W)}add(x){f(x);let{px:E,py:C,pz:I}=this,{px:B,py:D,pz:M}=x,ee=r.ZERO,W=r.ZERO,J=r.ZERO,Se=t.a,oe=r.mul(t.b,Op),se=r.mul(E,B),V=r.mul(C,D),H=r.mul(I,M),O=r.add(E,C),P=r.add(B,D);O=r.mul(O,P),P=r.add(se,V),O=r.sub(O,P),P=r.add(E,I);let U=r.add(B,M);return P=r.mul(P,U),U=r.add(se,H),P=r.sub(P,U),U=r.add(C,I),ee=r.add(D,M),U=r.mul(U,ee),ee=r.add(V,H),U=r.sub(U,ee),J=r.mul(Se,P),ee=r.mul(oe,H),J=r.add(ee,J),ee=r.sub(V,J),J=r.add(V,J),W=r.mul(ee,J),V=r.add(se,se),V=r.add(V,se),H=r.mul(Se,H),P=r.mul(oe,P),V=r.add(V,H),H=r.sub(se,H),H=r.mul(Se,H),P=r.add(P,H),se=r.mul(V,P),W=r.add(W,se),se=r.mul(U,P),ee=r.mul(O,ee),ee=r.sub(ee,se),se=r.mul(O,V),J=r.mul(U,J),J=r.add(J,se),new w(ee,W,J)}subtract(x){return this.add(x.negate())}is0(){return this.equals(w.ZERO)}wNAF(x){return y.wNAFCached(this,x,w.normalizeZ)}multiplyUnsafe(x){st("scalar",x,Ht,t.n);let E=w.ZERO;if(x===Ht)return E;if(x===Xe)return this;let{endo:C}=t;if(!C)return y.unsafeLadder(this,x);let{k1neg:I,k1:B,k2neg:D,k2:M}=C.splitScalar(x),ee=E,W=E,J=this;for(;B>Ht||M>Ht;)B&Xe&&(ee=ee.add(J)),M&Xe&&(W=W.add(J)),J=J.double(),B>>=Xe,M>>=Xe;return I&&(ee=ee.negate()),D&&(W=W.negate()),W=new w(r.mul(W.px,C.beta),W.py,W.pz),ee.add(W)}multiply(x){let{endo:E,n:C}=t;st("scalar",x,Xe,C);let I,B;if(E){let{k1neg:D,k1:M,k2neg:ee,k2:W}=E.splitScalar(x),{p:J,f:Se}=this.wNAF(M),{p:oe,f:se}=this.wNAF(W);J=y.constTimeNegate(D,J),oe=y.constTimeNegate(ee,oe),oe=new w(r.mul(oe.px,E.beta),oe.py,oe.pz),I=J.add(oe),B=Se.add(se)}else{let{p:D,f:M}=this.wNAF(x);I=D,B=M}return w.normalizeZ([I,B])[0]}multiplyAndAddUnsafe(x,E,C){let I=w.BASE,B=o((M,ee)=>ee===Ht||ee===Xe||!M.equals(I)?M.multiplyUnsafe(ee):M.multiply(ee),"mul"),D=B(this,E).add(B(x,C));return D.is0()?void 0:D}toAffine(x){return b(this,x)}isTorsionFree(){let{h:x,isTorsionFree:E}=t;if(x===Xe)return!0;if(E)return E(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:x,clearCofactor:E}=t;return x===Xe?this:E?E(w,this):this.multiplyUnsafe(t.h)}toRawBytes(x=!0){return yt("isCompressed",x),this.assertValidity(),s(w,this,x)}toHex(x=!0){return yt("isCompressed",x),Mt(this.toRawBytes(x))}}w.BASE=new w(t.Gx,t.Gy,r.ONE),w.ZERO=new w(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,y=yo(w,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:m,weierstrassEquation:a,isWithinCurveOrder:l}}o(Vf,"weierstrassPoints");function Kf(e){let t=_n(e);return vt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}o(Kf,"validateOpts");function Hp(e){let t=Kf(e),{Fp:r,n}=t,s=r.BYTES+1,i=2*r.BYTES+1;function a(H){return Ne(H,n)}o(a,"modN");function l(H){return go(H,n)}o(l,"invN");let{ProjectivePoint:m,normPrivateKeyToScalar:f,weierstrassEquation:b,isWithinCurveOrder:g}=Vf({...t,toBytes(H,O,P){let U=O.toAffine(),N=r.toBytes(U.x),Z=Dt;return yt("isCompressed",P),P?Z(Uint8Array.from([O.hasEvenY()?2:3]),N):Z(Uint8Array.from([4]),N,r.toBytes(U.y))},fromBytes(H){let O=H.length,P=H[0],U=H.subarray(1);if(O===s&&(P===2||P===3)){let N=Pt(U);if(!Sn(N,Xe,r.ORDER))throw new Error("Point is not on curve");let Z=b(N),K;try{K=r.sqrt(Z)}catch(ae){let re=ae instanceof Error?": "+ae.message:"";throw new Error("Point is not on curve"+re)}let pe=(K&Xe)===Xe;return(P&1)===1!==pe&&(K=r.neg(K)),{x:N,y:K}}else if(O===i&&P===4){let N=r.fromBytes(U.subarray(0,r.BYTES)),Z=r.fromBytes(U.subarray(r.BYTES,2*r.BYTES));return{x:N,y:Z}}else throw new Error(`Point of length ${O} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),w=o(H=>Mt(Xt(H,t.nByteLength)),"numToNByteStr");function _(H){let O=n>>Xe;return H>O}o(_,"isBiggerThanHalfOrder");function y(H){return _(H)?a(-H):H}o(y,"normalizeS");let S=o((H,O,P)=>Pt(H.slice(O,P)),"slcNum");class x{static{o(this,"Signature")}constructor(O,P,U){this.r=O,this.s=P,this.recovery=U,this.assertValidity()}static fromCompact(O){let P=t.nByteLength;return O=Ke("compactSignature",O,P*2),new x(S(O,0,P),S(O,P,2*P))}static fromDER(O){let{r:P,s:U}=Ot.toSig(Ke("DER",O));return new x(P,U)}assertValidity(){st("r",this.r,Xe,n),st("s",this.s,Xe,n)}addRecoveryBit(O){return new x(this.r,this.s,O)}recoverPublicKey(O){let{r:P,s:U,recovery:N}=this,Z=M(Ke("msgHash",O));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let K=N===2||N===3?P+t.n:P;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let pe=N&1?"03":"02",te=m.fromHex(pe+w(K)),ae=l(K),re=a(-Z*ae),ie=a(U*ae),ce=m.BASE.multiplyAndAddUnsafe(te,re,ie);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return wr(this.toDERHex())}toDERHex(){return Ot.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wr(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}let E={isValidPrivateKey(H){try{return f(H),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:o(()=>{let H=ks(t.n);return Ip(t.randomBytes(H),t.n)},"randomPrivateKey"),precompute(H=8,O=m.BASE){return O._setWindowSize(H),O.multiply(BigInt(3)),O}};function C(H,O=!0){return m.fromPrivateKey(H).toRawBytes(O)}o(C,"getPublicKey");function I(H){let O=Yt(H),P=typeof H=="string",U=(O||P)&&H.length;return O?U===s||U===i:P?U===2*s||U===2*i:H instanceof m}o(I,"isProbPub");function B(H,O,P=!0){if(I(H))throw new Error("first arg must be private key");if(!I(O))throw new Error("second arg must be public key");return m.fromHex(O).multiply(f(H)).toRawBytes(P)}o(B,"getSharedSecret");let D=t.bits2int||function(H){let O=Pt(H),P=H.length*8-t.nBitLength;return P>0?O>>BigInt(P):O},M=t.bits2int_modN||function(H){return a(D(H))},ee=An(t.nBitLength);function W(H){return st(`num < 2^${t.nBitLength}`,H,Ht,ee),Xt(H,t.nByteLength)}o(W,"int2octets");function J(H,O,P=Se){if(["recovered","canonical"].some(u=>u in P))throw new Error("sign() legacy options not supported");let{hash:U,randomBytes:N}=t,{lowS:Z,prehash:K,extraEntropy:pe}=P;Z==null&&(Z=!0),H=Ke("msgHash",H),Np(P),K&&(H=Ke("prehashed msgHash",U(H)));let te=M(H),ae=f(O),re=[W(ae),W(te)];if(pe!=null&&pe!==!1){let u=pe===!0?N(r.BYTES):pe;re.push(Ke("extraEntropy",u))}let ie=Dt(...re),ce=te;function $(u){let h=D(u);if(!g(h))return;let A=l(h),k=m.BASE.multiply(h).toAffine(),L=a(k.x);if(L===Ht)return;let R=a(A*a(ce+L*ae));if(R===Ht)return;let v=(k.x===L?0:2)|Number(k.y&Xe),F=R;return Z&&_(R)&&(F=y(R),v^=1),new x(L,F,v)}return o($,"k2sig"),{seed:ie,k2sig:$}}o(J,"prepSig");let Se={lowS:t.lowS,prehash:!1},oe={lowS:t.lowS,prehash:!1};function se(H,O,P=Se){let{seed:U,k2sig:N}=J(H,O,P),Z=t;return Es(Z.hash.outputLen,Z.nByteLength,Z.hmac)(U,N)}o(se,"sign"),m.BASE._setWindowSize(8);function V(H,O,P,U=oe){let N=H;if(O=Ke("msgHash",O),P=Ke("publicKey",P),"strict"in U)throw new Error("options.strict was renamed to lowS");Np(U);let{lowS:Z,prehash:K}=U,pe,te;try{if(typeof N=="string"||Yt(N))try{pe=x.fromDER(N)}catch(k){if(!(k instanceof Ot.Err))throw k;pe=x.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){let{r:k,s:L}=N;pe=new x(k,L)}else throw new Error("PARSE");te=m.fromHex(P)}catch(k){if(k.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Z&&pe.hasHighS())return!1;K&&(O=t.hash(O));let{r:ae,s:re}=pe,ie=M(O),ce=l(re),$=a(ie*ce),u=a(ae*ce),h=m.BASE.multiplyAndAddUnsafe(te,$,u)?.toAffine();return h?a(h.x)===ae:!1}return o(V,"verify"),{CURVE:t,getPublicKey:C,getSharedSecret:B,sign:se,verify:V,ProjectivePoint:m,Signature:x,utils:E}}o(Hp,"weierstrass");function qf(e){return{hash:e,hmac:o((t,...r)=>Us(e,t,gs(...r)),"hmac"),randomBytes:lo}}o(qf,"getHash");function Fp(e,t){let r=o(n=>Hp({...e,...qf(n)}),"create");return Object.freeze({...r(t),create:r})}o(Fp,"createCurve");var $p=Jt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Gf=$p.create(BigInt("-3")),jf=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Wf=Fp({a:Gf,b:jf,Fp:$p,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Dp),zp=Wf;d();p();d();p();var Yf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tr=new Uint32Array(64),So=class extends md{static{o(this,"SHA256")}constructor(t=32){super(64,t,8,!1),this.A=Lt[0]|0,this.B=Lt[1]|0,this.C=Lt[2]|0,this.D=Lt[3]|0,this.E=Lt[4]|0,this.F=Lt[5]|0,this.G=Lt[6]|0,this.H=Lt[7]|0}get(){let{A:t,B:r,C:n,D:s,E:i,F:a,G:l,H:m}=this;return[t,r,n,s,i,a,l,m]}set(t,r,n,s,i,a,l,m){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=m|0}process(t,r){for(let g=0;g<16;g++,r+=4)tr[g]=t.getUint32(r,!1);for(let g=16;g<64;g++){let w=tr[g-15],_=tr[g-2],y=ht(w,7)^ht(w,18)^w>>>3,S=ht(_,17)^ht(_,19)^_>>>10;tr[g]=S+tr[g-7]+y+tr[g-16]|0}let{A:n,B:s,C:i,D:a,E:l,F:m,G:f,H:b}=this;for(let g=0;g<64;g++){let w=ht(l,6)^ht(l,11)^ht(l,25),_=b+w+ud(l,m,f)+Yf[g]+tr[g]|0,S=(ht(n,2)^ht(n,13)^ht(n,22))+ld(n,s,i)|0;b=f,f=m,m=l,l=a+_|0,a=i,i=s,s=n,n=_+S|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,m=m+this.F|0,f=f+this.G|0,b=b+this.H|0,this.set(n,s,i,a,l,m,f,b)}roundClean(){es(tr)}destroy(){this.set(0,0,0,0,0,0,0,0),es(this.buffer)}};var Vp=pd(()=>new So);var Ms=Vp;d();p();function Zr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}o(Zr,"bytesEqual");var rr=class{static{o(this,"PublicKey")}equals(t){return Zr(this.toRawBytes(),t.toRawBytes())}toBase64(){return mt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return mt(t)}verifyWithIntent(t,r,n){let s=Up(n,t),i=gn(s,{dkLen:32});return this.verify(i,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Bt.vector(Bt.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}verifyAddress(t){return this.toSuiAddress()===t}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Jn(Qn(gn(this.toSuiBytes(),{dkLen:32})).slice(0,Xn*2))}};var Ps=33;var Ds=64,yb=new Uint8Array([48,89,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,3,66,0]),Ns=class extends rr{static{o(this,"PasskeyPublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=dt(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Ps)throw new Error(`Invalid public key input. Expected ${Ps} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Nt.Passkey}async verify(t,r){let n=Os(r),s=JSON.parse(n.clientDataJson);if(s.type!=="webauthn.get")return!1;let i=dt(s.challenge.replace(/-/g,"+").replace(/_/g,"/"));if(!Zr(t,i))return!1;let a=n.userSignature.slice(1+Ds);if(!Zr(this.toRawBytes(),a))return!1;let l=new Uint8Array([...n.authenticatorData,...Ms(n.clientDataJson)]),m=n.userSignature.slice(1,Ds+1);return zp.verify(m,Ms(l),a)}};Ns.SIZE=Ps;function Os(e){let t=typeof e=="string"?dt(e):e;if(t[0]!==Nt.Passkey)throw new Error("Invalid signature scheme");let r=cd.parse(t.slice(1));return{signatureScheme:"Passkey",serializedSignature:mt(t),signature:t,authenticatorData:r.authenticatorData,clientDataJson:r.clientDataJson,userSignature:new Uint8Array(r.userSignature),publicKey:new Uint8Array(r.userSignature.slice(1+Ds))}}o(Os,"parseSerializedPasskeySignature");d();p();d();p();var Kp=o(e=>{throw TypeError(e)},"__typeError"),qp=o((e,t,r)=>t.has(e)||Kp("Cannot "+r),"__accessCheck"),Ao=o((e,t,r)=>(qp(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),_o=o((e,t,r)=>t.has(e)?Kp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Eo=o((e,t,r,n)=>(qp(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),To,vo,Io,ko,Hs=class extends Error{static{o(this,"SuiGraphQLRequestError")}},Ro=class{static{o(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:n={},queries:s={}}){_o(this,To),_o(this,vo),_o(this,Io),_o(this,ko),Eo(this,To,t),Eo(this,vo,s),Eo(this,Io,n),Eo(this,ko,(...i)=>r(...i))}async query(t){let r=await Ao(this,ko).call(this,Ao(this,To),{method:"POST",headers:{"Content-Type":"application/json",...Ao(this,Io)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):ic(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new Hs(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Ao(this,vo)[t]})}};To=new WeakMap;vo=new WeakMap;Io=new WeakMap;ko=new WeakMap;d();p();var Gp=ac();d();p();function Zf(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}o(Zf,"base64UrlCharTo6Bits");function Xf(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),s=Zf(n);t=t.concat(s)}return t}o(Xf,"base64UrlStringToBitVector");function Jf(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=Xf(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let s=(t+e.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let i=new Uint8Array(Math.floor(r.length/8)),a=0;for(let l=0;l<r.length;l+=8){let m=r.slice(l,l+8),f=parseInt(m.join(""),2);i[a++]=f}return new TextDecoder().decode(i)}o(Jf,"decodeBase64URL");function Qf(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}o(Qf,"verifyExtendedClaim");function jp(e,t){let r=Jf(e.value,e.indexMod4),[n,s]=Qf(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return s}o(jp,"extractClaimValue");d();p();d();p();var Wp=je.struct("ZkLoginSignature",{inputs:je.struct("ZkLoginSignatureInputs",{proofPoints:je.struct("ZkLoginSignatureInputsProofPoints",{a:je.vector(je.string()),b:je.vector(je.vector(je.string())),c:je.vector(je.string())}),issBase64Details:je.struct("ZkLoginSignatureInputsClaim",{value:je.string(),indexMod4:je.u8()}),headerBase64:je.string(),addressSeed:je.string()}),maxEpoch:je.u64(),userSignature:je.vector(je.u8())});function Yp(e){return Wp.parse(typeof e=="string"?dt(e):e)}o(Yp,"parseZkLoginSignature");d();p();function eg(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}o(eg,"findFirstNonZeroIndex");function Co(e,t){let r=e.toString(16);return dd(r.padStart(t*2,"0").slice(-t*2))}o(Co,"toPaddedBigEndianBytes");function Fs(e,t){let r=Co(e,t),n=eg(r);return n===-1?new Uint8Array([0]):r.slice(n)}o(Fs,"toBigEndianBytes");var Jp=o(e=>{throw TypeError(e)},"__typeError"),Vs=o((e,t,r)=>t.has(e)||Jp("Cannot "+r),"__accessCheck"),Ft=o((e,t,r)=>(Vs(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Bo=o((e,t,r)=>t.has(e)?Jp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Xr=o((e,t,r,n)=>(Vs(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),Zp=o((e,t,r)=>(Vs(e,t,"access private method"),r),"__privateMethod"),bt,En,Tn,Lo,$s,tg=class zs extends rr{static{o(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),Bo(this,Lo),Bo(this,bt),Bo(this,En),Bo(this,Tn),Xr(this,En,r),typeof t=="string"?Xr(this,bt,dt(t)):t instanceof Uint8Array?Xr(this,bt,t):Xr(this,bt,Uint8Array.from(t)),Xr(this,Tn,Ft(this,bt).length!==Ft(this,bt)[0]+1+32),Ft(this,Tn)&&Xr(this,bt,Qp(Ft(this,bt)))}equals(t){return super.equals(t)}toSuiAddress(){return Ft(this,Tn)?Zp(this,Lo,$s).call(this):super.toSuiAddress()}toRawBytes(){return Ft(this,bt)}flag(){return Nt.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Uo(r),s=new zs(n.publicKey).toSuiAddress();return Xp({address:s,bytes:mt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Ft(this,En)})}verifyTransaction(t,r){let n=Uo(r),s=new zs(n.publicKey).toSuiAddress();return Xp({address:s,bytes:mt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Ft(this,En)})}verifyAddress(t){return t===super.toSuiAddress()||t===Zp(this,Lo,$s).call(this)}};bt=new WeakMap;En=new WeakMap;Tn=new WeakMap;Lo=new WeakSet;$s=o(function(){let e=Qp(Ft(this,bt),!0),t=new Uint8Array(e.length+1);return t[0]=this.flag(),t.set(e,1),Jn(Qn(gn(t,{dkLen:32})).slice(0,Xn*2))},"toLegacyAddress_fn");var rg=tg;function ng(e,t,r){let n=r?.legacyAddress?Fs(e,32):Co(e,32),s=new TextEncoder().encode(t),i=new Uint8Array(1+s.length+n.length);return i.set([s.length],0),i.set(s,1),i.set(n,1+s.length),new rg(i,r)}o(ng,"toZkLoginPublicIdentifier");var og=Gp(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function Qp(e,t=!1){let r=e[0]+1,n=BigInt(`0x${ad(e.slice(r))}`),s=t?Fs(n,32):Co(n,32),i=new Uint8Array(r+s.length);return i.set(e.slice(0,r),0),i.set(s,r),i}o(Qp,"normalizeZkLoginPublicKeyBytes");async function Xp({address:e,bytes:t,signature:r,intentScope:n,client:s=new Ro({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let i=await s.query({query:og,variables:{bytes:t,signature:r,intentScope:n,author:e}});return i.data?.verifyZkloginSignature.success===!0&&i.data?.verifyZkloginSignature.errors.length===0}o(Xp,"graphqlVerifyZkLoginSignature");function Uo(e){let t=typeof e=="string"?dt(e):e;if(t[0]!==Nt.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:s,userSignature:i}=Yp(r),{issBase64Details:a,addressSeed:l}=n,m=jp(a,"iss"),f=ng(BigInt(l),m);return{serializedSignature:mt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:s,userSignature:i,iss:m,addressSeed:BigInt(l)},signature:t,publicKey:f.toRawBytes()}}o(Uo,"parseSerializedZkLoginSignature");function eu(e){let t=dt(e),r=Pp[t[0]];switch(r){case"Passkey":return Os(e);case"MultiSig":let n=Bt.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Uo(e);case"ED25519":case"Secp256k1":case"Secp256r1":let s=Mp[r],i=t.slice(1,t.length-s),a=t.slice(1+i.length);return{serializedSignature:e,signatureScheme:r,signature:i,publicKey:a,bytes:t};default:throw new Error("Unsupported signature scheme")}}o(eu,"parseSerializedSignature");d();p();var Ks=32,Jr=class extends rr{static{o(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=dt(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Ks)throw new Error(`Invalid public key input. Expected ${Ks} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Nt.ED25519}async verify(t,r){let n;if(typeof r=="string"){let s=eu(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Zr(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return Lp.verify(n,t,this.toRawBytes())}};Jr.SIZE=Ks;var Mo=o(async()=>{let e=await he();return vn(e)},"getSelectedAccount"),vn=o(e=>{let t=e.addresses.filter(r=>r.networkID===Ko.Mainnet||r.networkID===Ko.Testnet);if(t.length===0)throw kc;if(t.length===1){let[r]=t;if(!r?.publicKey)throw new Error("[sui provider] selected account account does not have a public key");let{publicKey:n,address:s}=r;return{address:s,publicKey:new Jr(n).toSuiBytes().toString()}}throw new Error("[sui provider] multiple accounts provided")},"getSuiAddressWithPubkey");d();p();var It=class{static{o(this,"TrustedAppsStore")}storage;target;numListeners;unsubscribeFromStorageChanges;constructor(t){this.storage=t,this.target=new EventTarget,this.numListeners={revoked:0},this.unsubscribeFromStorageChanges=null}async get(t){return(await Nr(this.storage)).apps[t]??{}}async add(t,r,n){let s=await Nr(this.storage),i=s?.apps?.[t]?.[r]??{},a={...s?.apps[t]??{},[r]:{...i,...n}},l={...s.apps,[t]:a},m={...s,apps:l};return await Qo(this.storage,m)}async delete(t,r){let n=await Nr(this.storage),s={...n?.apps[t]??{}};delete s[r];let i={...n.apps,[t]:s},a={...n,apps:i};return await Qo(this.storage,a)}dispatchEvent({type:t,data:r}){let n=new Event(t);n.data=r,this.target.dispatchEvent(n)}removeEventListener(t,r){this.target.removeEventListener(t,r),this.numListeners[t]--,Object.values(this.numListeners).reduce((s,i)=>s+i,0)===0&&(this.unsubscribeFromStorageChanges?.(),this.unsubscribeFromStorageChanges=null)}addEventListener(t,r){this.target.addEventListener(t,r),this.numListeners[t]++,Object.values(this.numListeners).reduce((s,i)=>s+i,0)===1&&(this.unsubscribeFromStorageChanges=this.subscribeToStorageChanges())}subscribeToStorageChanges(){let t=null,r=Nr(this.storage);return this.storage.subscribe(async n=>{if(n!==Qc)return;let s=await Nr(this.storage);if(t??await r){let i=this.getRevokedApps(t??await r,s);for(let a of i)try{this.dispatchEvent({type:"revoked",data:a})}catch(l){X.captureError(l,Q.TrustedApps)}}t=s})}getRevokedApps(t,r){let n=[],s=Object.entries(t.apps);for(let[i,a]of s){let l=Object.entries(a);for(let[m,f]of l)r.apps[i]?.[m]||n.push({origin:m,accountId:i})}return n}};d();p();var In=o(async({enabledChains:e,metamaskOverrideSetting:t})=>{let r=[];if(e.includes(ye.EVM))switch(t){case"ALWAYS_ASK":{r.push("evmAsk.js");break}case"USE_PHANTOM":{r.push("evmPhantom.js");break}case"USE_METAMASK":{r.push("evmMetamask.js");break}default:tc(t)}if(e.some(n=>n===ye.BitcoinTaproot||n===ye.BitcoinNativeSegwit)&&r.push("btc.js"),e.some(n=>n===ye.Sui)&&r.push("sui.js"),r.length!==0)try{await chrome.scripting.registerContentScripts([{id:"conditionalInpageScripts",matches:["file://*/*","http://*/*","https://*/*"],js:r,runAt:"document_start",allFrames:!0,world:"MAIN"}])}catch{}},"registerContentScripts");async function kn(){try{let t=(await chrome.scripting.getRegisteredContentScripts()).map(r=>r.id);return chrome.scripting.unregisterContentScripts({ids:t})}catch(e){throw console.error("ERROR UNREGISTERING",e),new Error("An unexpected error occurred while unregistering dynamic content scripts: "+e.message,{cause:e})}}o(kn,"unregisterAllDynamicContentScripts");var Qr=new Pe,qs=new It(Qr);async function sg(){let{isOnboarded:e}=await ge.checkVaultIntegrity();e&&su()}o(sg,"identifyOnboardedSelectedAccount");var ig=(0,nu.default)(su,500);async function su(){let e=await he(),t=await zr(),r=await Jo();await $d.identifyAccount(r,e,t)}o(su,"identifySelectedAccount");var ag=Pr(()=>Tt(lt.SelectedAccount)),cg=Pr(()=>Tt(lt.DeveloperMode)),dg=Pr(()=>Tt(lt.NetworkSetting)),pg=Pr(()=>Uc(Lc)),ug=Pr(()=>zc(lt.AccountsMetadata)),lg=Dr(()=>ag()),mg=Dr(()=>cg()),hg=Dr(()=>dg()),fg=Dr(()=>pg()),gg=Dr(()=>ug());async function iu(){sg(),lg.addListener(()=>{yg()}),mg.addListener(()=>{ru()}),hg.addListener(()=>{ru()}),fg.addListener(()=>{tu()}),gg.addListener(()=>{tu()}),Qr.subscribe(e=>{switch(e){case"metaMaskOverride":{wg();return}case _c:{bg();return}}}),qs.addEventListener("revoked",e=>{xg(e.data)})}o(iu,"registerStorageListeners");async function tu(){X.addBreadcrumb(Q.Account,"Vault accounts changed, notifying UI processes",fe.Info);let e="INVALIDATE_ACCOUNTS_MESSAGE",t=await Qr.get(e);await Qr.set(e,!t)}o(tu,"onVaultAccountsChanged");async function ru(){try{let e=await he(),t=await qs.get(e.identifier);for(let r of Vr()){let n=r.origin.toLowerCase();if(n in t){let a={jsonrpc:"2.0",method:"phantom_chainChanged",params:{evm:await Kr(n)}};r.send(a)}}}catch(e){if(qn(e))return;X.captureError(e,Q.Provider)}}o(ru,"onNetworkSettingChange");async function yg(){try{await ig()}catch(i){qn(i)||X.captureError(i,Q.Provider)}let e;try{e=await he()}catch(i){if(qn(i))return;throw i}let t;try{t=Ce(e,ye.EVM)}catch{}let r;try{r=Ce(e,ye.Solana)}catch{}let n;try{n=await io()}catch{}let s;try{s=await Mo()}catch{}if(t||r||n||s){let i=await qs.get(e.identifier);for(let a of Vr()){let l={btc:[]};t&&(l.evm=t),r&&(l.sol=r),n&&(l.btc=n),s&&(l.sui=s),a.send({jsonrpc:"2.0",method:"phantom_accountChanged",params:a.origin in i?l:null})}}else for(let i of Vr())i.send({jsonrpc:"2.0",method:"phantom_accountChanged",params:null})}o(yg,"onAccountChange");async function xg(e){let r=(await Jo()).find(m=>m.identifier===e.accountId),n=r?.addresses?.find(m=>m.addressType===ye.EVM)?.address,s=r?.addresses?.find(m=>m.addressType===ye.Solana)?.address,i;try{i=r?ms(r):void 0}catch{}let a;try{a=r?vn(r):void 0}catch{}if(!n&&!s&&!i&&!a)return;let l={};n&&(l.evm=n),s&&(l.sol=s),i&&(l.btc=i),a&&(l.sui=a);for(let m of Vr())m.origin.toLowerCase()===e.origin.toLowerCase()&&m.send({jsonrpc:"2.0",method:"phantom_trustRevoked",params:l})}o(xg,"onTrustRevoked");function wg(){for(let e of Vr())(async()=>{try{await ou.default.tabs.sendMessage(e.tabId,{jsonrpc:"2.0",method:"phantom_metaMaskOverrideSettingsChanged",params:null})}catch{}})();(async()=>{try{let e=await zr(),t=await hr(Qr);await kn(),await In({enabledChains:e.enabledAddressTypes,metamaskOverrideSetting:t})}catch(e){console.error("Could not re-register content scripts",e)}})()}o(wg,"onMetaMaskOverrideSettingsChanged");function bg(){(async()=>{try{let e=await zr(),t=await hr(Qr);await kn(),await In({enabledChains:e.enabledAddressTypes,metamaskOverrideSetting:t})}catch(e){console.error("Could not re-register content scripts",e)}})()}o(bg,"onChainAvailabilityChanged");d();p();var Po=Ge(pr(),1);async function au(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(!Object.values(ye).includes(r))return c.invalidInput(e.id,"Invalid or missing chain.");let n=t[1];if(typeof n!="string")return c.invalidInput(e.id,"Missing private key.");let s=t[2];if(typeof n!="string")return c.invalidInput(e.id,"Missing account name.");if(!Ue())return c.result(e.id,null);let a=await ge.addPrivateKeyAccount(r,tt.from(Buffer.from(n,"base64")),s);return c.result(e.id,JSON.stringify(a))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(au,"_importPrivateKeyAccount");async function cu(e){try{let t=e.params;if(Object.values(t).length===0)return c.invalidInput(e.id);let r=Object.keys(t);if(!Object.values(ye).includes(...r))return c.invalidInput(e.id);if(Object.values(t).map(i=>typeof i!="string").reduce((i,a)=>i||a,!1))return c.invalidInput(e.id);let s=await ge.addReadonlyAccount(t);return c.result(e.id,JSON.stringify(s))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(cu,"_importReadOnlyAccount");async function du(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.length===0)return c.invalidInput(e.id);let s=t[2];if(typeof s!="string")return c.invalidInput(e.id,"Missing account name.");if(!Ue())return c.result(e.id,null);let l=(await no()).fromEntropy(Po.default.decode(r)),m=await ge.addSeedWithMultipleAccounts(tt.from(l.getEntropy()),s,n),f=m[0]?.seedIdentifier;return f&&X.addBreadcrumb(Q.Account,`Imported seed phrase (seedIdentifier=${f})`,fe.Info),c.result(e.id,JSON.stringify(m))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(du,"_importSeedAccount");async function pu(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.length===0)return c.invalidInput(e.id);let s=t[2];if(typeof s!="string")return c.invalidInput(e.id,"Missing account name.");if(!Ue())return c.result(e.id,null);let l=(await no()).fromEntropy(Po.default.decode(r)),m=await ge.addSeedlessWithMultipleAccounts(tt.from(l.getEntropy()),s,n),f=m[0]?.seedIdentifier;return f&&X.addBreadcrumb(Q.Account,`Imported seedless phrase (seedIdentifier=${f})`,fe.Info),c.result(e.id,JSON.stringify(m))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(pu,"_importSocialSeedAccount");async function uu(e){try{let t=e.params;if(typeof t!="string")return c.invalidInput(e.id);if(!Ue())return c.result(e.id,null);let s=(await no()).fromEntropy(Po.default.decode(t)),i=await ge.isExistingSeed(tt.from(s.getEntropy()));return c.result(e.id,i)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(uu,"_isExistingSeed");async function lu(e){try{let r=e.params[0];if(!r)return c.invalidInput(e.id,"Missing se*d identifier.");if(!Ue())return c.result(e.id,null);let s=await ge.fetchAllSeedMetas();if(!s||s.length===0)return c.invalidInput(e.id,"No available se*d.");if(!s.find(l=>l.identifier===r))return c.invalidInput(e.id,"Invalid se*d identifier.");let a=await ge.addAccountForExistingSeed(r);return c.result(e.id,JSON.stringify(a))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(lu,"_addAccountForSeed");async function mu(e){try{let r=e.params[0];if(!r)return c.invalidInput(e.id,"Missing se*d identifier.");if(!Ue())return c.result(e.id,null);let s=await ge.fetchAllSeedlessMetas();if(!s||s.length===0)return c.invalidInput(e.id,"No available se*d.");if(!s.find(l=>l.identifier===r))return c.invalidInput(e.id,"Invalid se*d identifier.");let a=await ge.addAccountForExistingSeedless(r);return c.result(e.id,JSON.stringify(a))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(mu,"_addSocialAccountForSocialSeed");async function hu(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.some(a=>!vc.safeParse(a).success))return c.invalidInput(e.id);if(!Ue())return c.result(e.id,null);let i=await ge.addLedgerAccounts(r,n);return c.result(e.id,JSON.stringify(i))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(hu,"_addLedgerAccounts");async function fu(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id);let n=t[1];if(typeof n!="string")return c.invalidInput(e.id,"Missing account identifier.");let s=t[2];if(!Object.values(ye).includes(s))return c.invalidInput(e.id,"Invalid or missing chain.");if(!await gr(tt.from(Buffer.from(r))))return c.invalidInput(e.id,"Invalid passw*rd.");let a=await ge.exportPrivateKey(n,s);if(!a)return c.result(e.id,null);let l=a.fold(m=>Buffer.from(m.buffer).toString("hex"));return c.result(e.id,l)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(fu,"_exportPrivateKey");async function gu(e){try{let t=e.params,r=t[0];if(typeof r!="string")return c.invalidInput(e.id);if(!await gr(tt.from(Buffer.from(r))))return c.invalidInput(e.id,"Invalid passw*rd.");let s=t[1];if(!s)return c.invalidInput(e.id,"Missing se*d identifier.");let i=await ge.fetchAllSeedMetas(),a=await ge.fetchAllSeedlessMetas(),l=i.concat(...a);if(!l||l.length===0)return c.result(e.id,null);let m=l.find(g=>g.identifier===s);if(!m)return c.result(e.id,null);let f=await ge.exportEntropy(m.identifier);if(!f)return c.result(e.id,null);let b=f.fold(g=>Buffer.from(g.buffer).toString("hex"));return c.result(e.id,b)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(gu,"_exportEntropy");async function yu(e){try{let t=e.params;return Array.isArray(t)?typeof t[0]!="string"?c.invalidInput(e.id):typeof t[1]!="string"?c.invalidInput(e.id):Ue()?c.result(e.id,!0):c.result(e.id,null):c.invalidInput(e.id)}catch(t){return c.internalError(e.id,t.message)}}o(yu,"_setAccountIcon");async function xu(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.deriveAddresses();return c.result(e.id,r)}catch(t){return X.captureError(Error(`Failed to derive addresses for enabled chains in account.ts due to ${t.message}`),Q.Account),c.internalError(e.id,t.message)}}o(xu,"_deriveAddresses");async function wu(e){try{let t=e.params;return typeof t!="string"?c.invalidInput(e.id):Ue()?(await ge.removeAccount(t),c.result(e.id,!0)):c.result(e.id,null)}catch(t){return X.captureError(Error(`Failed to remove account in account.ts due to ${t.message}`),Q.Account),c.internalError(e.id,t.message)}}o(wu,"_removeAccount");async function bu(e){try{let{identifier:t,toIndex:r}=e.params;return typeof t!="string"||typeof r!="number"?c.invalidInput(e.id):Ue()?(await ge.reorderAccount(t,r),c.result(e.id,!0)):c.result(e.id,null)}catch(t){return X.captureMessage("Failed to reorder account in account.ts",Q.Account),c.internalError(e.id,t.message)}}o(bu,"_reorderAccount");async function Su(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.fetchAllAccounts();if(!r)return c.result(e.id,null);let n=Bc({accounts:r}).accounts;return c.result(e.id,JSON.stringify(n))}catch(t){return c.internalError(e.id,t.message)}}o(Su,"_getAllAccounts");async function Au(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.fetchAllSeedMetas();return r?(Le.capture("walletSeeds",{data:{numOfSeeds:r.length}}),c.result(e.id,JSON.stringify(r))):c.result(e.id,null)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(Au,"_getAllSeeds");async function _u(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.fetchAllSeedlessMetas();return r?c.result(e.id,JSON.stringify(r)):c.result(e.id,null)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(_u,"_getAllSocialSeeds");async function Eu(e){try{let t=e.params;if(typeof t.accountIdentifier!="string")return c.invalidInput(e.id,"Account Identifier needs to be of type string.");if(!Hc(t.params))return c.invalidInput(e.id,"Invalid vault signer params.");if(!Ue())return c.result(e.id,null);let n=await ge.sign(t.accountIdentifier,t.params);return c.result(e.id,lr(n))}catch(t){return X.captureError(t,Q.Transaction),c.internalError(e.id,t.message)}}o(Eu,"_sign");async function Tu(e){try{let t=e.params;if("secretIdentifier"in t&&typeof t.secretIdentifier!="string")return c.invalidInput(e.id,"Secret Identifier needs to be present and of type string.");if(!Ue())return c.result(e.id,null);let n=await ge.getAuthenticationPublicKey(t.secretIdentifier);return c.result(e.id,lr(n))}catch(t){return X.captureError(t,Q.Transaction),c.internalError(e.id,t.message)}}o(Tu,"_getAuthenticationPublicKey");async function vu(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.checkVaultIntegrity();return c.result(e.id,r)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(vu,"_checkVaultIntegrity");async function Iu(e){try{if(!Ue())return c.result(e.id,null);let r=await ge.DO_NOT_USE_diagnoseSeedCacheDigests();return c.result(e.id,JSON.stringify(r))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(Iu,"_DO_NOT_USE_diagnoseSeedCacheDigests");async function ku(e){if(!Qa)return c.internalError(e.id,"Debug API not available in production");try{if(!Ue())return c.result(e.id,null);let r=await ge.DEBUG_corruptSeedCacheWithSha256();return c.result(e.id,JSON.stringify(r))}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(ku,"_DEBUG_corruptSeedCacheWithSha256");d();p();async function St(){if(!Ue())throw new Error("Wallet is locked - password not available");try{return ge.getKMSInstance()}catch(t){throw t instanceof Error&&t.message.includes("Failed to get the encryption password")?new Error("KMS not ready - JWT keypair cannot be derived. Please try again."):t}}o(St,"getKMSInstance");async function Ru(e){try{let r=await(await St()).getPhantomOrganization({});return c.result(e.id,r)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to get Phantom organization"})}}o(Ru,"_getPhantomOrganization");async function Cu(e){try{let t=e.params;if(!t)throw new Error("Missing params");let[r,n]=t;if(!r||!n)throw new Error("organizationId and username are required");let i=await(await St()).deleteUserFromOrganization({organizationId:r,username:n});return c.result(e.id,i)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to delete user from organization"})}}o(Cu,"_deleteUserFromOrganization");async function Bu(e){try{let r=await(await St()).getOrCreatePhantomOrganization();return c.result(e.id,r)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to get or create Phantom organization"})}}o(Bu,"_getOrCreatePhantomOrganization");async function Lu(e){try{let t=await St(),r=await Xc(t,ge);return Vn("enable-kms-vault-account-ext")?await Kc(r,ge):X.addBreadcrumb(Q.Account,"KMS vault account storage skipped: feature flag disabled",fe.Info),c.result(e.id,{...r,isNewAccount:r.isNewlyCreated})}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to retrieve KMS wallet"})}}o(Lu,"_retrieveKMSWallet");async function Uu(e){try{let t=await St(),r=await Zc(t,ge);return c.result(e.id,r)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to get KMS wallet status"})}}o(Uu,"_getKMSWalletStatus");async function Mu(e){try{let t=e.params;if(!t)throw new Error("Missing params");let[r,n,s,i,a,l,m]=t;if(!r||!n||!i||!a||!m)throw new Error("userOrganizationId, publicKey, appId, walletId, and derivationPaths are required");let f=await St(),b=await Yc({kms:f,userOrganizationId:r,publicKey:n,expiresInMs:s,appId:i,walletId:a,usdCentsLimitPerDay:l,derivationPaths:m});return c.result(e.id,b)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to add user to current user organization"})}}o(Mu,"_addUserToCurrentUserOrganization");async function Pu(e){try{if(!Ue())throw new Error("Wallet is locked - password not available");let r=await he(),n=await(async()=>ge.getKMSInstance())(),s=null,i=null,a;try{let y=await n.getPhantomOrganization({});if(!y.result)return c.result(e.id,{orgFound:!1});s=y.result.organizationId,i=y.result.organizationName,a=Object.fromEntries((y.result.users??[]).map(S=>[S.username,S.authenticators]))}catch{return c.result(e.id,{orgFound:!1})}let m=(await n.getOrganizationWallets({organizationId:s,limit:50,offset:0})).result.wallets,f=new Pe,g=await Cc(),w={};for(let y of m)try{let S=await n.getAccounts({organizationId:s,walletId:y.walletId,accounts:g});w[y.walletId]=S.result}catch{X.addBreadcrumb(Q.Account,`Failed to fetch KMS accounts for wallet ${y.walletId}`,fe.Debug),w[y.walletId]=[]}let _=await n.getAuthenticatorPublicKey();return c.result(e.id,{orgFound:!0,organizationId:s,organizationName:i??void 0,wallets:m,accountsByWalletId:w,selectedAccountIdentifier:r.identifier,selectedAccountAddresses:r.addresses?.map(y=>y.address),authenticatorsByUser:a,kmsAuthenticatorPublicKey:_})}catch(t){let r=t instanceof Error?t.message:"Failed to get KMS accounts";return c.error(e.id,{code:-1,message:r})}}o(Pu,"_getKmsAccounts");async function Du(e){try{let t=e.params;if(!t)throw new Error("Missing params");let[r,n,s]=t,a=await(await St()).getWalletWithTag({organizationId:r,tag:n,accounts:s});return c.result(e.id,a)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to get wallet with tag"})}}o(Du,"_getWalletWithTag");async function Nu(e){try{let t=e.params;if(!t)throw new Error("Missing params");let[r,n,s,i,a]=t,m=await(await St()).updateUserInOrganization({organizationId:r,username:n,removeTraits:s,addTraits:i,newPolicy:a});return c.result(e.id,m)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to update user in organization"})}}o(Nu,"_updateUserInOrganization");async function Ou(e){try{let t=e.params;if(!t)throw new Error("Missing params");let[r,n,s]=t,a=await(await St()).getAccounts({organizationId:r,walletId:n,accounts:s});return c.result(e.id,a)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to get accounts"})}}o(Ou,"_getAccounts");async function Hu(e){try{let t=e.params;if(!Array.isArray(t)||t.length!==3)throw new Error("Missing or invalid params");let[r,n,s]=t,a=await(await St()).exportWallet({organizationId:r,walletId:n,publicKey:s});return c.result(e.id,a)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to export wallet"})}}o(Hu,"_exportWallet");async function Fu(e){try{let t=e.params;if(!t||!Array.isArray(t)||!t.every(s=>s.method&&s.params))throw new Error("Missing or invalid params");let n=await(await St()).batchRpcCall(t);return c.result(e.id,n)}catch(t){return c.error(e.id,{code:-1,message:t instanceof Error?t.message:"Failed to batch RPC call"})}}o(Fu,"_batchRpcCall");d();p();d();p();async function $u(){if(!Vn("enable-kms-vault-account-ext")){X.addBreadcrumb(Q.Account,"KMS vault sync skipped: feature flag disabled",fe.Info);return}await Vc(ge)}o($u,"syncKMSVaultAccount");async function Vu(e){try{let t=await fr.hasPersistedDeviceEncryptionKey();return c.result(e.id,t)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(Vu,"_hasOnboarded");async function Ku(e){try{return await fr.deletePersistedDeviceEncryptionKey(),c.result(e.id,!0)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(Ku,"_resetHasOnboarded");var js=!1;function qu(e){js=e}o(qu,"setShouldLockOnPopupOpen");function Ws(){return js}o(Ws,"shouldLockOnPopupOpen");var zu=!1;async function Sg(){if(!zu)try{await ge.healAccountsWithMissingSecrets(),zu=!0}catch(e){X.captureError(e,Q.Account)}}o(Sg,"healAccountsAfterUnlock");async function Gu(e){try{let t=e.params;if(typeof t!="string")return c.invalidInput(e.id);let r=tt.from(Buffer.from(t));return await gr(r)?(js=!1,await Sg(),await Od(),await Nd(),$u().catch(s=>{X.captureError(s,Q.Account)}),$c(ge).catch(s=>{X.captureError(s,Q.Account)}),c.result(e.id,{isUnlocked:!0})):c.result(e.id,{isUnlocked:!1})}catch(t){return c.internalError(e.id,t.message)}}o(Gu,"_unlockExtension");function ju(e){try{let t=!!Ue();return c.result(e.id,t)}catch(t){return X.captureError(t,Q.Account),c.internalError(e.id,t.message)}}o(ju,"_isExtensionUnlocked");function Wu(e){try{return xn(),c.result(e.id,!0)}catch(t){return X.captureError(Error(`Failed to lock extension due to ${t.message}`),Q.Account),c.internalError(e.id,t.message)}}o(Wu,"_lockExtension");async function Yu(e){try{let t=e.params;return typeof t!="string"?c.invalidInput(e.id):(await ge.clearVault(),await fr.deletePersistedDeviceEncryptionKey(),os(tt.from(Buffer.from(t))),await fr.persistDeviceEncryptionKey(),c.result(e.id,!0))}catch(t){return X.captureMessage(`\u{1F6AB} Failed to Set Passw*rd in BackgroundScript: ${t.message}`,Q.Account),c.internalError(e.id,t.message)}}o(Yu,"_setPassword");async function Zu(e){try{let t=e.params;if(typeof t!="string")return c.invalidInput(e.id);let r=await gr(tt.from(Buffer.from(t)));return c.result(e.id,r)}catch(t){return X.captureMessage(`\u{1F6AB} Failed to Verify Passw*rd in BackgroundScript: ${t.message}`,Q.Account),c.internalError(e.id,t.message)}}o(Zu,"_verifyPassword");async function Xu(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id,"Missing current password.");let n=t[1];if(typeof n!="string")return c.invalidInput(e.id,"Missing new password.");if(!await gr(tt.from(Buffer.from(r))))return c.result(e.id,null);if(!Ue())return c.result(e.id,null);let a=tt.from(Buffer.from(n)),l=await Dd.rotateEncryptionKey(a);return l&&(X.addBreadcrumb(Q.Account,"new passw*rd set in memory!",fe.Info),os(a)),X.addBreadcrumb(Q.Account,`storage key rotation success: ${l}`,fe.Info),c.result(e.id,l)}catch(t){return X.captureMessage(`\u{1F6AB} Failed to Update Passw*rd in BackgroundScript: ${t.message}`,Q.Account),c.internalError(e.id,t.message)}}o(Xu,"_updatePassword");d();p();async function Ju(e){try{let t=e.params;if(!Array.isArray(t))return c.invalidInput(e.id);let r=t[0];if(typeof r!="string")return c.invalidInput(e.id);let n=t[1];return n.featureTag?(mr.write(r,n.featureTag,n.severity,n.data),c.result(e.id,!0)):c.invalidInput(e.id)}catch(t){return X.captureError(t,Q.BugReporter),c.internalError(e.id,t.message)}}o(Ju,"_logMessage");function Qu(e){try{return mr.downloadLog({noop:!0}),c.result(e.id,!0)}catch(t){return X.captureError(t,Q.BugReporter),c.internalError(e.id,t.message)}}o(Qu,"_downloadLogs");d();p();d();p();d();p();d();p();d();p();d();p();var el=o(e=>{try{return new URL(e)}catch{return}},"parseURL");function z(e){let t=me(e);if(t)return t.protocol!=="http:"&&t.protocol!=="https:"?`${t.protocol}//${t.hostname}`:t.origin}o(z,"getSourceOrigin");var Ag="8bfda36a-d292-4aa3-b30f-53ef91ab6380",_g="b4285baa-c852-490f-9af2-8459680b1264";function me(e){if(e.type==="BrowserTabRpcRequestSource"||e.type==="InternalRpcRequestSource")return e.url;if(e.type==="DeepLinkRpcRequestSource"){if(e.sdkKey===Ag)return new URL("https://app.drift.trade");if(e.sdkKey===_g)return new URL("https://app.lulo.fi");let t=el(e.deepLinkUrl)?.searchParams?.get("redirect_uri");if(t){let r=el(t);if(r)return r.protocol!=="http:"&&r.protocol!=="https:"?new URL(`${r.protocol}//${r.hostname}`):r}return}}o(me,"getSourceURL");function be(e){if(e.type==="BrowserTabRpcRequestSource"||e.type==="InternalRpcRequestSource")return e.icon?.href||null;if(e.type==="DeepLinkRpcRequestSource"){let t=me(e);return t?jn(t.hostname):null}return null}o(be,"getSourceIcon");var Eg=new Set(Ja),ue=o(async({source:e,request:t})=>{if(!e)return c.unauthorized(t.id);if(e.type!=="BrowserTabRpcRequestSource"&&e.type!=="InternalRpcRequestSource"&&e.type!=="DeepLinkRpcRequestSource")return c.unauthorized(t.id);let r=me(e);if(!r)return c.unauthorized(t.id);if(e.type!=="DeepLinkRpcRequestSource"&&r.protocol!=="https:")return Eg.has(r.hostname)?void 0:c.unauthorized(t.id)},"requireSecureSource");d();p();var de=o(e=>async({source:t,request:r},{i18n:n})=>{if(!t)return c.unauthorized(r.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!==e)return c.unauthorized(r.id,n.t("rpcErrorUnauthorizedUnknownSource"))},"requireValidSourceType");d();p();var en=o(async(e,{wallet:t})=>{let{request:r}=e,n="transactions"in r.params?r.params.transactions:[r.params.transaction],s=await Promise.all(n.map(i=>t.sol.addPriorityFee(i)));"transactions"in r.params?r.params.transactions=s:r.params.transaction=s[0]},"addPriorityFeeToSolanaTransaction");d();p();d();p();function nr(e){return/\blocalhost\b|(\d{1,3}\.){3}\d{1,3}/.test(e)}o(nr,"shouldSkipAnalytics");var Rn=o(async({request:e,source:t},{analytics:r})=>t?t.type!=="BrowserTabRpcRequestSource"?c.internalError(e.id,"missing source"):async n=>{let{method:s}=e,i=t.url.hostname;if(nr(i))return;let a={method:s,chainType:"bip122",chainId:"000000000019d6689c085ae165831e93",origin:i};if(s==="btc_requestAccounts"){let l={...a};"error"in n?r.declineConnection({...l,errorCode:n.error.code}):r.approveConnection({...l,eager:!1})}if(s==="btc_signPSBT"){let l={...a};"error"in n?r.declineTransaction({...l,errorCode:n.error.code}):r.approveTransaction(l)}if(s==="btc_signMessage"){let l={...a};"error"in n?r.declineSignMessage({...l,errorCode:n.error.code}):r.approveSignMessage(l)}}:c.internalError(e.id,"missing source"),"btcAnalytics");d();p();var Je=o(async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return c.internalError(e.id,"missing source");let i=me(t);return i?async a=>{if("error"in a)return;let l=i.toString();switch(e.method){case"eth_sendTransaction":{let m=a.result,f=await n.eth.getSelectedAccount();return r.eth.submittedTransaction({origin:l,request:e,signatures:[m],walletAddress:f})}case"eth_sign":case"personal_sign":case"eth_signTypedData":case"eth_signTypedData_v3":case"eth_signTypedData_v4":{let m=await n.eth.getSelectedAccount();return r.eth.signedMessage({origin:l,request:e,chainId:await n.eth.getNetworkId(l),walletAddress:m})}case"sol_signAllTransactions":{let m=a.result.map(({signature:b})=>b),f=await n.sol.getSelectedAccount();return r.sol.submittedTransaction({origin:l,request:e,chainId:await n.sol.getNetworkId(),signatures:m,walletAddress:f})}case"sol_signAndSendTransaction":{let m=a.result.signature,f=await n.sol.getSelectedAccount();return r.sol.submittedTransaction({origin:l,request:e,chainId:await n.sol.getNetworkId(),signatures:[m],walletAddress:f})}case"sol_signAndSendAllTransactions":{let m=a.result.signatures.filter(Boolean),f=await n.sol.getSelectedAccount();return r.sol.submittedTransaction({origin:l,request:e,chainId:await n.sol.getNetworkId(),signatures:m,walletAddress:f})}case"sol_signTransaction":{let m=a.result.signature,f=await n.sol.getSelectedAccount();return r.sol.submittedTransaction({origin:l,request:e,chainId:await n.sol.getNetworkId(),signatures:[m],walletAddress:f})}case"sol_signIn":case"sol_signMessage":{let m=await n.sol.getSelectedAccount();return r.sol.signedMessage({origin:l,request:e,chainId:await n.sol.getNetworkId(),walletAddress:m})}case"sui_signTransaction":{let m=a.result.signature,f=await n.sui.getSelectedAccount();return r.sui.submittedTransaction({origin:l,request:e,chainId:e.params.networkID,signatures:[m],walletAddress:e.params.address||f.address})}case"sui_signAndExecuteTransaction":{let m=a.result.digest,f=await n.sui.getSelectedAccount();return r.sui.submittedTransaction({origin:l,request:e,chainId:e.params.networkID,signatures:[m],walletAddress:e.params.address||f.address})}case"sui_signMessage":{let m=await n.sui.getSelectedAccount();return r.sui.signedMessage({origin:l,request:e,chainId:await n.sui.getNetworkId(),walletAddress:e.params.address||m.address})}}}:c.internalError(e.id,"missing source")},"captureSignatureEventAnalytics");d();p();var Ys=o(async(e,{wallet:t,rpc:r,utils:n})=>{let{request:s,source:i}=e;if(!i)return c.internalError(s.id,"missing source");let a=z(i);if(!a)return c.unauthorized(s.id);let l=await t.eth.getSelectedAccount(),[m]=s.params,f=m.chainId?m.chainId:await t.eth.getNetworkId(a),b=await t.eth.getRpcURL(f);if(m.type=Nn.eip1559,m.chainId||(m.chainId=f),m.nonce||(m.nonce=await t.eth.getAccountNonce(f,l)),!m.gas){let g=await r.eth.eth_estimateGas(b,[m]);if("error"in g)return c.error(s.id,g.error);m.gas=n.eth.getBufferedGasLimit(g.result)}delete m.gasPrice},"convertToEIP1559");d();p();var G=o(async(e,{config:t,logger:r})=>{let n=Date.now(),s=new Date().toISOString(),i=o((a,l)=>{mr.write(a,Q.Provider,l,{method:e.request.method,requestId:String(e.request.id)})},"logToFile");return i(`RPC Request started: method=${e.request.method} id=${e.request.id} timestamp=${s}`,fe.Info),a=>{if(e.source?.type!=="BrowserTabRpcRequestSource"&&e.source?.type!=="InternalRpcRequestSource"&&e.source?.type!=="DeepLinkRpcRequestSource")return;let l="error"in a,m=l&&t.logRequestsOnError||(typeof t.logRequestMethods=="boolean"?t.logRequestMethods:t.logRequestMethods.has(e.request.method)),f=Date.now(),b=new Date().toISOString(),g=f-n,w=me(e.source),_=be(e.source),y=`method=${e.request.method} id=${e.request.id} timestamp=${b} duration=${g}ms`;l?i(`RPC Request failed: ${y} request=${JSON.stringify(e.request)} response=${JSON.stringify(a)}`,fe.Error):i(`RPC Request finished: ${y}`,fe.Info),t.env!=="production"&&m&&r.debug(`
*-------------------------------------------------------------------------------
| method   | ${e.request.method}
| id       | ${e.request.id}
| params   | ${JSON.stringify(e.request.params).substring(0,67)}
*----------+--------------------------------------------------------------------
| result   | ${JSON.stringify(a.result)}
| error    | ${JSON.stringify(a.error)}
*----------+--------------------------------------------------------------------
| url      | ${JSON.stringify(w)}
| icon     | ${JSON.stringify(_)}
*----------+--------------------------------------------------------------------
| duration | ${g}ms
*-------------------------------------------------------------------------------
`)}},"debugLog");d();p();var xe=o(async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return c.internalError(e.id,"missing source");let i=me(t),a=z(t);return!i||!a?c.internalError(e.id):async l=>{let{method:m}=e;if(nr(i.hostname))return;let f=await n.eth.getNetworkId(a),b=s.eth.hexToCAIP2(f),w={method:m,chainType:"eip155",chainId:b,origin:i.hostname};if(m==="eth_requestAccounts"){let _={...w};"error"in l?r.declineConnection({..._,errorCode:l.error.code}):r.approveConnection({..._,eager:!1})}if(m==="eth_sendTransaction"){let[_]=e.params,y={...w,gas:_.gas,maxFeePerGas:_.maxFeePerGas,maxPriorityFeePerGas:_.maxPriorityFeePerGas};"error"in l?r.declineTransaction({...y,errorCode:l.error.code}):r.approveTransaction(y)}if(m==="eth_sign"||m==="personal_sign"||m==="eth_signTypedData"||m==="eth_signTypedData_v3"||m==="eth_signTypedData_v4"){let _={...w};"error"in l?r.declineSignMessage({..._,errorCode:l.error.code}):r.approveSignMessage(_)}if(m==="wallet_selectEthereumProvider"&&!("error"in l)){let _=l.result,y={...w,selection:_};r.metamaskOverrideSelection(y)}}},"ethAnalytics");d();p();d();p();var or=o(e=>{let t=e.protocol,r=`${t}//${e.host}`;return t==="https:"||t==="http:"?r:`${t}//`},"computeTrustedAppOrigin");var sr=o(async({request:e},{wallet:t,logger:r})=>{let n=e.params?.redirect_link;if(!n)return c.unauthorized(e.id);let s=ut(n,{restrictProtocols:!1});if(!s)return c.unauthorized(e.id);let i=or(s);if(!await t.isTrustedApp(i))return r.debug("> Deeplink redirect_link not trusted",i),c.unauthorized(e.id)},"requireAuthorizedRedirectLink");d();p();var ze=o(e=>async({source:t,request:r},{wallet:n,logger:s})=>{if(!t)return c.unauthorized(r.id);if(t.type==="InternalRpcRequestSource")return;if(t.type!==e)return c.unauthorized(r.id);let i=z(t);if(!i)return c.unauthorized(r.id);if(!await n.isTrustedApp(i))return s.debug("> Dapp not trusted",i),c.unauthorized(r.id)},"requireAuthorizedSource");d();p();var ir=o(async({source:e,request:t},{wallet:r,analytics:n})=>{if(!e)return c.unauthorized(t.id);let s=me(e),i=z(e),a=be(e);if(!s||!i)return c.unauthorized(t.id);let l;switch(t.method){case"eth_sendTransaction":{let[_]=t.params;if(!_.chainId)return c.transactionRejected(t.id);l=_.chainId;break}case"eth_signTypedData":{let[_]=t.params,y="";for(let S of _)if(S.name==="chainId"){y=S.value;break}if(!y)return;l="0x"+parseInt(y,10).toString(16);break}case"eth_signTypedData_v3":{let[_,y]=t.params;if(!y.domain.chainId)return;l="0x"+y.domain.chainId.toString(16);break}case"eth_signTypedData_v4":{let[_,y]=t.params;if(typeof y.domain.chainId=="number")l="0x"+y.domain.chainId.toString(16);else return;break}case"wallet_switchEthereumChain":case"wallet_addEthereumChain":{let[_]=t.params;l=_.chainId;break}}let m={url:s.toString(),icon:a};if(!new Set(r.eth.getSupportedNetworks()).has(l))return n.eth.unsupportedChain({origin:i,data:{method:t.method,hexChainId:l}}),await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedNetwork",id:0,params:[m,l]}),c.chainDisconnected(t.id);let b=new Set(await r.eth.getEnabledChains(!0)),g=new Set(await r.eth.getEnabledChains());if(!b.has(l))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmDisabledNetwork",id:0,params:[m,l]}),c.chainDisconnected(t.id);if(!g.has(l))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmIncorrectMode",id:0,params:[m,g.has("0x1")?"mainnet":"testnet"]}),c.chainDisconnected(t.id);if(["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(t.method)){let _=await r.eth.getNetworkId(i);if(_!==l)return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmEIP712IncorrectChainId",id:0,params:[m,{connectedChainId:_,messageChainId:l}]}),c.chainDisconnected(t.id)}},"requireConnectedChain");d();p();var Zs=o(async(e,{wallet:t,i18n:r})=>{let{request:n,source:s}=e;try{if(!s)return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireEthereumAccount middleware started - missing source",fe.Error,{requestId:n.id}),c.unauthorized(n.id,r.t("rpcErrorUnauthorizedUnknownSource"));if(s.type!=="BrowserTabRpcRequestSource")return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireEthereumAccount middleware started - invalid source type",fe.Error,{sourceType:s.type,requestId:n.id}),c.unauthorized(n.id,r.t("rpcErrorUnauthorizedUnknownSource"));X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireEthereumAccount middleware started",fe.Info,{origin:s.url.origin,requestId:n.id});let i={url:s.url.toString(),icon:s.icon?.href??null};if(X.addBreadcrumb(Q.Provider,"eth_requestAccounts: checking if account supports ETH",fe.Info,{origin:s.url.origin,requestId:n.id}),await t.eth.doesSupportEth()){X.addBreadcrumb(Q.Provider,"eth_requestAccounts: account supports ETH, continuing",fe.Info,{origin:s.url.origin,requestId:n.id});return}return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: account does not support ETH, requesting user confirmation",fe.Info,{origin:s.url.origin,requestId:n.id}),await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedAccount",params:[i,"ethereum"],id:le()}),c.resourceUnavailable(n.id)}catch(i){let a=s&&s.type==="BrowserTabRpcRequestSource"?s.url.origin:"unknown";throw X.captureError(i instanceof Error?i:new Error(String(i)),Q.Provider),X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireEthereumAccount middleware error",fe.Error,{origin:a,requestId:n.id,error:i instanceof Error?i.message:String(i)}),i}},"requireEthereumAccount");d();p();var ol=Ge(tn(),1);var Xs=o(async({request:e})=>{let t=ol.default.decode(e.params.message);if(!sc(t))return c.invalidInput(e.id,"You cannot sign solana transactions using sign message")},"requireSafeSolanaMessage");d();p();var Js=o(async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return c.userRejectedRequest(r.id);if(n.type!=="BrowserTabRpcRequestSource")return c.userRejectedRequest(r.id);if(await t.isTrustedApp(n.url.origin))return;let i=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcRequestAccounts",id:le(),params:[{url:n.url.toString(),icon:n.icon?.href??null}]});if("error"in i)return c.error(r.id,i.error)},"requireUserApprovalBtcRequestAccounts");d();p();var Qs=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcSignMessage",id:le(),params:[{url:t.url.toString(),icon:t.icon?.href??null},{message:e.params.message}]});if("error"in s)return c.error(e.id,s.error);switch(s.result.type){case"send":return c.result(e.id,{signature:s.result.signature,signedMessage:s.result.signedMessage});case"signAndSend":return}},"requireUserApprovalBtcSignMessage");d();p();var ei=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcSignPSBT",id:le(),params:[{url:t.url.toString(),icon:t.icon?.href??null},{psbt:e.params[0],inputsToSign:e.params[1].inputsToSign,finalize:e.params[1].finalize}]});if("error"in s)return c.error(e.id,s.error);switch(s.result.type){case"send":return c.result(e.id,s.result.signature);case"signAndSend":return}},"requireUserApprovalBtcSignPSBT");d();p();var ti=o(async(e,{wallet:t})=>{let{request:r,source:n}=e;try{if(!n)return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireUserApprovalEthRequestAccounts middleware started - missing source",fe.Error,{requestId:r.id}),c.userRejectedRequest(r.id);if(n.type!=="BrowserTabRpcRequestSource")return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireUserApprovalEthRequestAccounts middleware started - invalid source type",fe.Error,{sourceType:n.type,requestId:r.id}),c.userRejectedRequest(r.id);if(X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireUserApprovalEthRequestAccounts middleware started",fe.Info,{origin:n.url.origin,requestId:r.id}),X.addBreadcrumb(Q.Provider,"eth_requestAccounts: checking if app is trusted",fe.Info,{origin:n.url.origin,requestId:r.id}),await t.isTrustedApp(n.url.origin)){X.addBreadcrumb(Q.Provider,"eth_requestAccounts: app is trusted, skipping approval",fe.Info,{origin:n.url.origin,requestId:r.id});return}X.addBreadcrumb(Q.Provider,"eth_requestAccounts: app not trusted, requesting user approval",fe.Info,{origin:n.url.origin,requestId:r.id});let i=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthRequestAccounts",id:le(),params:[{url:n.url.toString(),icon:n.icon?.href??null}]});if("error"in i)return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: user approval rejected or error",fe.Info,{origin:n.url.origin,requestId:r.id,errorCode:i.error.code,errorMessage:i.error.message}),c.error(r.id,i.error);X.addBreadcrumb(Q.Provider,"eth_requestAccounts: user approval granted",fe.Info,{origin:n.url.origin,requestId:r.id})}catch(s){let i=n&&n.type==="BrowserTabRpcRequestSource"?n.url.origin:"unknown";throw X.captureError(s instanceof Error?s:new Error(String(s)),Q.Provider),X.addBreadcrumb(Q.Provider,"eth_requestAccounts: requireUserApprovalEthRequestAccounts middleware error",fe.Error,{origin:i,requestId:r.id,error:s instanceof Error?s.message:String(s)}),s}},"requireUserApprovalEthRequestAccounts");d();p();var ri=o(async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return c.userRejectedRequest(r.id);let s=z(n),i=me(n),a=be(n);if(!s||!i)return c.unauthorized(r.id);if(await t.isTrustedApp(s))return;let m=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveWalletRequestPermissions",id:le(),params:[{url:i.toString(),icon:a}]});if("error"in m)return c.error(r.id,m.error)},"requireUserApprovalWalletRequestPermissions");d();p();d();p();var et=o(e=>[Ae.OK,Ae.RateLimitExceeded,Ae.SessionExpired,Ae.SimulationFailed,Ae.Unknown,Ae.UnsupportedNetworkId,Ae.UnsupportedMethod].includes(e),"isAutoConfirmStatusCodeLoggable");var ni=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let[m]=e.params;if(await r.eth.getSelectedAccount()!==m.from.toLowerCase())return c.transactionRejected(e.id);let b=await r.eth.autoConfirmValidateTransaction(a,[m]),g=b.status===Ae.OK;if(et(b.status)){let y=await r.eth.getSelectedAccount();await s.eth.autoConfirmedTransaction({request:e,chainId:await r.eth.getNetworkId(i),origin:i,data:{sessionStartTime:b.sessionStartTime,sessionMaxDuration:b.sessionMaxDuration,lastStatusCode:b.status,dollarValue:b.dollarValue,auditTrail:b.auditTrail},walletAddress:y})}if(g)return;let w={url:a.toString(),icon:l},_=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSendTransaction",id:le(),params:[w,{transaction:m,autoConfirmStatusCode:b.status}]});if("error"in _)return c.error(e.id,_.error);switch(_.result.maxFeePerGas&&(m.maxFeePerGas=_.result.maxFeePerGas),_.result.maxPriorityFeePerGas&&(m.maxPriorityFeePerGas=_.result.maxPriorityFeePerGas),_.result.type){case"send":{let y=await r.eth.sendTransaction(m,_.result.signature);return c.any(e.id,{result:y})}case"signAndSend":return}},"requireUserApprovalEthSendTransaction");d();p();var oi=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t),i=me(t),a=be(t);if(!s||!i)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let l=await r.eth.getSelectedAccount(),m=await r.eth.getNetworkId(s),[f,b]=e.params;if(l!==f.toLowerCase())return c.unauthorized(e.id);let g={url:i.toString(),icon:a},w=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:le(),params:[g,{signer:f,message:b,originalMethod:"eth_sign",chainId:m,autoConfirmStatusCode:Ae.UnsupportedMethod}]});if("error"in w)return c.error(e.id,w.error);switch(w.result.approvalType){case"hardware":return c.result(e.id,w.result.signature);case"user":return}},"requireUserApprovalEthSign");d();p();var si=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t),i=me(t),a=be(t);if(!s||!i)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let l=await r.eth.getSelectedAccount(),m=await r.eth.getNetworkId(s),[f,b]=e.params;if(l!==b.toLowerCase())return c.unauthorized(e.id);let g="0x"+Buffer.from(JSON.stringify(f)).toString("hex"),w={url:i.toString(),icon:a},_=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:le(),params:[w,{signer:b,message:g,originalMethod:"eth_signTypedData",chainId:m,autoConfirmStatusCode:Ae.UnsupportedMethod}]});if("error"in _)return c.error(e.id,_.error)},"requireUserApprovalEthSignTypedData");d();p();var ii=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let m=await r.eth.getSelectedAccount(),f=await r.eth.getNetworkId(i),[b,g]=e.params;if(m!==b.toLowerCase())return c.unauthorized(e.id);let w=await r.eth.autoConfirmValidateMessage(a,g),_=w.status===Ae.OK;if(et(w.status)){let x=await r.eth.getSelectedAccount();await s.eth.autoConfirmedMessage({request:e,chainId:await r.eth.getNetworkId(i),origin:i,data:{sessionStartTime:w.sessionStartTime,sessionMaxDuration:w.sessionMaxDuration,lastStatusCode:w.status,auditTrail:w.auditTrail},walletAddress:x})}if(_)return;let y={url:a.toString(),icon:l},S=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:le(),params:[y,{signer:b,message:"0x"+Buffer.from(JSON.stringify(g)).toString("hex"),originalMethod:"eth_signTypedData_v3",chainId:f,autoConfirmStatusCode:w.status}]});if("error"in S)return c.error(e.id,S.error)},"requireUserApprovalEthSignTypedDataV3");d();p();var ai=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let m=await r.eth.getSelectedAccount(),f=await r.eth.getNetworkId(i),[b,g]=e.params;if(m!==b.toLowerCase())return c.unauthorized(e.id);let w=await r.eth.autoConfirmValidateMessage(a,g),_=w.status===Ae.OK;if(et(w.status)){let x=await r.eth.getSelectedAccount();await s.eth.autoConfirmedMessage({request:e,chainId:await r.eth.getNetworkId(i),origin:i,data:{sessionStartTime:w.sessionStartTime,sessionMaxDuration:w.sessionMaxDuration,lastStatusCode:w.status,auditTrail:w.auditTrail},walletAddress:x})}if(_)return;let y={url:a.toString(),icon:l},S=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:le(),params:[y,{signer:b,message:"0x"+Buffer.from(JSON.stringify(g)).toString("hex"),originalMethod:"eth_signTypedData_v4",chainId:f,autoConfirmStatusCode:w.status}]});if("error"in S)return c.error(e.id,S.error)},"requireUserApprovalEthSignTypedDataV4");d();p();d();p();d();p();d();p();d();p();var Cn;(function(e){e[e.ALT=1]="ALT",e[e.CAT=2]="CAT",e[e.REP=3]="REP",e[e.RNM=4]="RNM",e[e.TRG=5]="TRG",e[e.TBS=6]="TBS",e[e.TLS=7]="TLS",e[e.UDT=11]="UDT",e[e.AND=12]="AND",e[e.NOT=13]="NOT",e[e.BKR=14]="BKR",e[e.BKA=15]="BKA",e[e.BKN=16]="BKN",e[e.ABG=17]="ABG",e[e.AEN=18]="AEN",e[e.ACTIVE=100]="ACTIVE",e[e.MATCH=101]="MATCH",e[e.EMPTY=102]="EMPTY",e[e.NOMATCH=103]="NOMATCH",e[e.SEM_PRE=200]="SEM_PRE",e[e.SEM_POST=201]="SEM_POST",e[e.SEM_OK=300]="SEM_OK",e[e.SEM_SKIP=301]="SEM_SKIP",e[e.ATTR_N=400]="ATTR_N",e[e.ATTR_R=401]="ATTR_R",e[e.ATTR_MR=402]="ATTR_MR",e[e.LOOKAROUND_NONE=500]="LOOKAROUND_NONE",e[e.LOOKAROUND_AHEAD=501]="LOOKAROUND_AHEAD",e[e.LOOKAROUND_BEHIND=502]="LOOKAROUND_BEHIND",e[e.BKR_MODE_UM=601]="BKR_MODE_UM",e[e.BKR_MODE_PM=602]="BKR_MODE_PM",e[e.BKR_MODE_CS=603]="BKR_MODE_CS",e[e.BKR_MODE_CI=604]="BKR_MODE_CI"})(Cn||(Cn={}));var qe;(function(e){e.Ethereum="sign-in-with-ethereum",e.Solana="sign-in-with-solana",e.X="sign-in-with-x"})(qe||(qe={}));var De;(function(e){e.ADDRESS_MISMATCH="ADDRESS_MISMATCH",e.DOMAIN_MISMATCH="DOMAIN_MISMATCH",e.URI_MISMATCH="URI_MISMATCH",e.CHAIN_ID_MISMATCH="CHAIN_ID_MISMATCH",e.ISSUED_TOO_FAR_IN_THE_PAST="ISSUED_TOO_FAR_IN_THE_PAST",e.ISSUED_TOO_FAR_IN_THE_FUTURE="ISSUED_TOO_FAR_IN_THE_FUTURE",e.EXPIRED="EXPIRED",e.EXPIRES_BEFORE_ISSUANCE="EXPIRES_BEFORE_ISSUANCE",e.VALID_AFTER_EXPIRATION="VALID_AFTER_EXPIRATION"})(De||(De={}));function rn(e,t){let{expectedAddress:r,expectedURL:n,expectedChainId:s,issuedAtThreshold:i}=t,a=[],l=Date.now();if(e.address!==r&&a.push(De.ADDRESS_MISMATCH),e.domain!==n.host&&a.push(De.DOMAIN_MISMATCH),e.uri&&e.uri.origin!==n.origin&&a.push(De.URI_MISMATCH),e.chainId&&(e.type!==qe.Solana&&e.chainId!==s||e.type===qe.Solana&&e.chainId.replace(/solana:/g,"")!==s)&&a.push(De.CHAIN_ID_MISMATCH),e.issuedAt){let m=e.issuedAt.getTime();Math.abs(m-l)>i&&(m<l?a.push(De.ISSUED_TOO_FAR_IN_THE_PAST):a.push(De.ISSUED_TOO_FAR_IN_THE_FUTURE))}if(e.expirationTime){let m=e.expirationTime.getTime();m<=l&&a.push(De.EXPIRED),e.issuedAt&&m<e.issuedAt.getTime()&&a.push(De.EXPIRES_BEFORE_ISSUANCE),e.notBefore&&e.notBefore.getTime()>m&&a.push(De.VALID_AFTER_EXPIRATION)}return a}o(rn,"verify");d();p();d();p();o(function e(t,r,n){function s(l,m){if(!r[l]){if(!t[l]){var f=typeof dn=="function"&&dn;if(!m&&f)return f(l,!0);if(i)return i(l,!0);var b=new Error("Cannot find module '"+l+"'");throw b.code="MODULE_NOT_FOUND",b}var g=r[l]={exports:{}};t[l][0].call(g.exports,function(w){return s(t[l][1][w]||w)},g,g.exports,e,t,r,n)}return r[l].exports}o(s,"o");for(var i=typeof dn=="function"&&dn,a=0;a<n.length;a++)s(n[a]);return s},"e")({1:[function(e,t,r){"use strict";r.byteLength=function(g){var w=f(g),_=w[0],y=w[1];return 3*(_+y)/4-y},r.toByteArray=function(g){var w,_,y=f(g),S=y[0],x=y[1],E=new i(function(B,D,M){return 3*(D+M)/4-M}(0,S,x)),C=0,I=x>0?S-4:S;for(_=0;_<I;_+=4)w=s[g.charCodeAt(_)]<<18|s[g.charCodeAt(_+1)]<<12|s[g.charCodeAt(_+2)]<<6|s[g.charCodeAt(_+3)],E[C++]=w>>16&255,E[C++]=w>>8&255,E[C++]=255&w;return x===2&&(w=s[g.charCodeAt(_)]<<2|s[g.charCodeAt(_+1)]>>4,E[C++]=255&w),x===1&&(w=s[g.charCodeAt(_)]<<10|s[g.charCodeAt(_+1)]<<4|s[g.charCodeAt(_+2)]>>2,E[C++]=w>>8&255,E[C++]=255&w),E},r.fromByteArray=function(g){for(var w,_=g.length,y=_%3,S=[],x=16383,E=0,C=_-y;E<C;E+=x)S.push(b(g,E,E+x>C?C:E+x));return y===1?(w=g[_-1],S.push(n[w>>2]+n[w<<4&63]+"==")):y===2&&(w=(g[_-2]<<8)+g[_-1],S.push(n[w>>10]+n[w>>4&63]+n[w<<2&63]+"=")),S.join("")};for(var n=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,m=a.length;l<m;++l)n[l]=a[l],s[a.charCodeAt(l)]=l;function f(g){var w=g.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=g.indexOf("=");return _===-1&&(_=w),[_,_===w?0:4-_%4]}o(f,"c");function b(g,w,_){for(var y,S,x=[],E=w;E<_;E+=3)y=(g[E]<<16&16711680)+(g[E+1]<<8&65280)+(255&g[E+2]),x.push(n[(S=y)>>18&63]+n[S>>12&63]+n[S>>6&63]+n[63&S]);return x.join("")}o(b,"l"),s[45]=62,s[95]=63},{}],2:[function(e,t,r){(function(n){(function(){"use strict";var s=e("base64-js"),i=e("ieee754");r.Buffer=m,r.SlowBuffer=function(u){return+u!=u&&(u=0),m.alloc(+u)},r.INSPECT_MAX_BYTES=50;var a=2147483647;function l(u){if(u>a)throw new RangeError('The value "'+u+'" is invalid for option "size"');var h=new Uint8Array(u);return h.__proto__=m.prototype,h}o(l,"a");function m(u,h,A){if(typeof u=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(u)}return f(u,h,A)}o(m,"s");function f(u,h,A){if(typeof u=="string")return function(R,v){if(typeof v=="string"&&v!==""||(v="utf8"),!m.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var F=0|y(R,v),Y=l(F),q=Y.write(R,v);return q!==F&&(Y=Y.slice(0,q)),Y}(u,h);if(ArrayBuffer.isView(u))return w(u);if(u==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(ce(u,ArrayBuffer)||u&&ce(u.buffer,ArrayBuffer))return function(R,v,F){if(v<0||R.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<v+(F||0))throw new RangeError('"length" is outside of buffer bounds');var Y;return Y=v===void 0&&F===void 0?new Uint8Array(R):F===void 0?new Uint8Array(R,v):new Uint8Array(R,v,F),Y.__proto__=m.prototype,Y}(u,h,A);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var k=u.valueOf&&u.valueOf();if(k!=null&&k!==u)return m.from(k,h,A);var L=function(R){if(m.isBuffer(R)){var v=0|_(R.length),F=l(v);return F.length===0||R.copy(F,0,0,v),F}if(R.length!==void 0)return typeof R.length!="number"||$(R.length)?l(0):w(R);if(R.type==="Buffer"&&Array.isArray(R.data))return w(R.data)}(u);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return m.from(u[Symbol.toPrimitive]("string"),h,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}o(f,"i");function b(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}o(b,"h");function g(u){return b(u),l(u<0?0:0|_(u))}o(g,"c");function w(u){for(var h=u.length<0?0:0|_(u.length),A=l(h),k=0;k<h;k+=1)A[k]=255&u[k];return A}o(w,"l");function _(u){if(u>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|u}o(_,"f");function y(u,h){if(m.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||ce(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);var A=u.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&A===0)return 0;for(var L=!1;;)switch(h){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return ae(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return re(u).length;default:if(L)return k?-1:ae(u).length;h=(""+h).toLowerCase(),L=!0}}o(y,"u");function S(u,h,A){var k=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0)<=(h>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return H(this,h,A);case"utf8":case"utf-8":return Se(this,h,A);case"ascii":return se(this,h,A);case"latin1":case"binary":return V(this,h,A);case"base64":return J(this,h,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,h,A);default:if(k)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),k=!0}}o(S,"p");function x(u,h,A){var k=u[h];u[h]=u[A],u[A]=k}o(x,"d");function E(u,h,A,k,L){if(u.length===0)return-1;if(typeof A=="string"?(k=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),$(A=+A)&&(A=L?0:u.length-1),A<0&&(A=u.length+A),A>=u.length){if(L)return-1;A=u.length-1}else if(A<0){if(!L)return-1;A=0}if(typeof h=="string"&&(h=m.from(h,k)),m.isBuffer(h))return h.length===0?-1:C(u,h,A,k,L);if(typeof h=="number")return h&=255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(u,h,A):Uint8Array.prototype.lastIndexOf.call(u,h,A):C(u,[h],A,k,L);throw new TypeError("val must be string, number or Buffer")}o(E,"g");function C(u,h,A,k,L){var R,v=1,F=u.length,Y=h.length;if(k!==void 0&&((k=String(k).toLowerCase())==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(u.length<2||h.length<2)return-1;v=2,F/=2,Y/=2,A/=2}function q(Be,Me){return v===1?Be[Me]:Be.readUInt16BE(Me*v)}if(o(q,"c"),L){var ne=-1;for(R=A;R<F;R++)if(q(u,R)===q(h,ne===-1?0:R-ne)){if(ne===-1&&(ne=R),R-ne+1===Y)return ne*v}else ne!==-1&&(R-=R-ne),ne=-1}else for(A+Y>F&&(A=F-Y),R=A;R>=0;R--){for(var _e=!0,Te=0;Te<Y;Te++)if(q(u,R+Te)!==q(h,Te)){_e=!1;break}if(_e)return R}return-1}o(C,"b");function I(u,h,A,k){A=Number(A)||0;var L=u.length-A;k?(k=Number(k))>L&&(k=L):k=L;var R=h.length;k>R/2&&(k=R/2);for(var v=0;v<k;++v){var F=parseInt(h.substr(2*v,2),16);if($(F))return v;u[A+v]=F}return v}o(I,"A");function B(u,h,A,k){return ie(ae(h,u.length-A),u,A,k)}o(B,"T");function D(u,h,A,k){return ie(function(L){for(var R=[],v=0;v<L.length;++v)R.push(255&L.charCodeAt(v));return R}(h),u,A,k)}o(D,"m");function M(u,h,A,k){return D(u,h,A,k)}o(M,"w");function ee(u,h,A,k){return ie(re(h),u,A,k)}o(ee,"E");function W(u,h,A,k){return ie(function(L,R){for(var v,F,Y,q=[],ne=0;ne<L.length&&!((R-=2)<0);++ne)F=(v=L.charCodeAt(ne))>>8,Y=v%256,q.push(Y),q.push(F);return q}(h,u.length-A),u,A,k)}o(W,"y");function J(u,h,A){return h===0&&A===u.length?s.fromByteArray(u):s.fromByteArray(u.slice(h,A))}o(J,"C");function Se(u,h,A){A=Math.min(u.length,A);for(var k=[],L=h;L<A;){var R,v,F,Y,q=u[L],ne=null,_e=q>239?4:q>223?3:q>191?2:1;if(L+_e<=A)switch(_e){case 1:q<128&&(ne=q);break;case 2:(192&(R=u[L+1]))==128&&(Y=(31&q)<<6|63&R)>127&&(ne=Y);break;case 3:R=u[L+1],v=u[L+2],(192&R)==128&&(192&v)==128&&(Y=(15&q)<<12|(63&R)<<6|63&v)>2047&&(Y<55296||Y>57343)&&(ne=Y);break;case 4:R=u[L+1],v=u[L+2],F=u[L+3],(192&R)==128&&(192&v)==128&&(192&F)==128&&(Y=(15&q)<<18|(63&R)<<12|(63&v)<<6|63&F)>65535&&Y<1114112&&(ne=Y)}ne===null?(ne=65533,_e=1):ne>65535&&(ne-=65536,k.push(ne>>>10&1023|55296),ne=56320|1023&ne),k.push(ne),L+=_e}return function(Te){var Be=Te.length;if(Be<=oe)return String.fromCharCode.apply(String,Te);for(var Me="",He=0;He<Be;)Me+=String.fromCharCode.apply(String,Te.slice(He,He+=oe));return Me}(k)}o(Se,"S"),r.kMaxLength=a,m.TYPED_ARRAY_SUPPORT=function(){try{var u=new Uint8Array(1);return u.__proto__={__proto__:Uint8Array.prototype,foo:o(function(){return 42},"foo")},u.foo()===42}catch{return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:o(function(){if(m.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:o(function(){if(m.isBuffer(this))return this.byteOffset},"get")}),typeof Symbol<"u"&&Symbol.species!=null&&m[Symbol.species]===m&&Object.defineProperty(m,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),m.poolSize=8192,m.from=function(u,h,A){return f(u,h,A)},m.prototype.__proto__=Uint8Array.prototype,m.__proto__=Uint8Array,m.alloc=function(u,h,A){return function(k,L,R){return b(k),k<=0?l(k):L!==void 0?typeof R=="string"?l(k).fill(L,R):l(k).fill(L):l(k)}(u,h,A)},m.allocUnsafe=function(u){return g(u)},m.allocUnsafeSlow=function(u){return g(u)},m.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==m.prototype},m.compare=function(u,h){if(ce(u,Uint8Array)&&(u=m.from(u,u.offset,u.byteLength)),ce(h,Uint8Array)&&(h=m.from(h,h.offset,h.byteLength)),!m.isBuffer(u)||!m.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;for(var A=u.length,k=h.length,L=0,R=Math.min(A,k);L<R;++L)if(u[L]!==h[L]){A=u[L],k=h[L];break}return A<k?-1:k<A?1:0},m.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return m.alloc(0);var A;if(h===void 0)for(h=0,A=0;A<u.length;++A)h+=u[A].length;var k=m.allocUnsafe(h),L=0;for(A=0;A<u.length;++A){var R=u[A];if(ce(R,Uint8Array)&&(R=m.from(R)),!m.isBuffer(R))throw new TypeError('"list" argument must be an Array of Buffers');R.copy(k,L),L+=R.length}return k},m.byteLength=y,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<u;h+=2)x(this,h,h+1);return this},m.prototype.swap32=function(){var u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<u;h+=4)x(this,h,h+3),x(this,h+1,h+2);return this},m.prototype.swap64=function(){var u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<u;h+=8)x(this,h,h+7),x(this,h+1,h+6),x(this,h+2,h+5),x(this,h+3,h+4);return this},m.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?Se(this,0,u):S.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(u){if(!m.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||m.compare(this,u)===0},m.prototype.inspect=function(){var u="",h=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},m.prototype.compare=function(u,h,A,k,L){if(ce(u,Uint8Array)&&(u=m.from(u,u.offset,u.byteLength)),!m.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),A===void 0&&(A=u?u.length:0),k===void 0&&(k=0),L===void 0&&(L=this.length),h<0||A>u.length||k<0||L>this.length)throw new RangeError("out of range index");if(k>=L&&h>=A)return 0;if(k>=L)return-1;if(h>=A)return 1;if(this===u)return 0;for(var R=(L>>>=0)-(k>>>=0),v=(A>>>=0)-(h>>>=0),F=Math.min(R,v),Y=this.slice(k,L),q=u.slice(h,A),ne=0;ne<F;++ne)if(Y[ne]!==q[ne]){R=Y[ne],v=q[ne];break}return R<v?-1:v<R?1:0},m.prototype.includes=function(u,h,A){return this.indexOf(u,h,A)!==-1},m.prototype.indexOf=function(u,h,A){return E(this,u,h,A,!0)},m.prototype.lastIndexOf=function(u,h,A){return E(this,u,h,A,!1)},m.prototype.write=function(u,h,A,k){if(h===void 0)k="utf8",A=this.length,h=0;else if(A===void 0&&typeof h=="string")k=h,A=this.length,h=0;else{if(!isFinite(h))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0,isFinite(A)?(A>>>=0,k===void 0&&(k="utf8")):(k=A,A=void 0)}var L=this.length-h;if((A===void 0||A>L)&&(A=L),u.length>0&&(A<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");for(var R=!1;;)switch(k){case"hex":return I(this,u,h,A);case"utf8":case"utf-8":return B(this,u,h,A);case"ascii":return D(this,u,h,A);case"latin1":case"binary":return M(this,u,h,A);case"base64":return ee(this,u,h,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,u,h,A);default:if(R)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),R=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var oe=4096;function se(u,h,A){var k="";A=Math.min(u.length,A);for(var L=h;L<A;++L)k+=String.fromCharCode(127&u[L]);return k}o(se,"M");function V(u,h,A){var k="";A=Math.min(u.length,A);for(var L=h;L<A;++L)k+=String.fromCharCode(u[L]);return k}o(V,"$");function H(u,h,A){var k=u.length;(!h||h<0)&&(h=0),(!A||A<0||A>k)&&(A=k);for(var L="",R=h;R<A;++R)L+=te(u[R]);return L}o(H,"k");function O(u,h,A){for(var k=u.slice(h,A),L="",R=0;R<k.length;R+=2)L+=String.fromCharCode(k[R]+256*k[R+1]);return L}o(O,"x");function P(u,h,A){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+h>A)throw new RangeError("Trying to access beyond buffer length")}o(P,"B");function U(u,h,A,k,L,R){if(!m.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>L||h<R)throw new RangeError('"value" argument is out of bounds');if(A+k>u.length)throw new RangeError("Index out of range")}o(U,"N");function N(u,h,A,k,L,R){if(A+k>u.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}o(N,"R");function Z(u,h,A,k,L){return h=+h,A>>>=0,L||N(u,0,A,4),i.write(u,h,A,k,23,4),A+4}o(Z,"v");function K(u,h,A,k,L){return h=+h,A>>>=0,L||N(u,0,A,8),i.write(u,h,A,k,52,8),A+8}o(K,"O"),m.prototype.slice=function(u,h){var A=this.length;(u=~~u)<0?(u+=A)<0&&(u=0):u>A&&(u=A),(h=h===void 0?A:~~h)<0?(h+=A)<0&&(h=0):h>A&&(h=A),h<u&&(h=u);var k=this.subarray(u,h);return k.__proto__=m.prototype,k},m.prototype.readUIntLE=function(u,h,A){u>>>=0,h>>>=0,A||P(u,h,this.length);for(var k=this[u],L=1,R=0;++R<h&&(L*=256);)k+=this[u+R]*L;return k},m.prototype.readUIntBE=function(u,h,A){u>>>=0,h>>>=0,A||P(u,h,this.length);for(var k=this[u+--h],L=1;h>0&&(L*=256);)k+=this[u+--h]*L;return k},m.prototype.readUInt8=function(u,h){return u>>>=0,h||P(u,1,this.length),this[u]},m.prototype.readUInt16LE=function(u,h){return u>>>=0,h||P(u,2,this.length),this[u]|this[u+1]<<8},m.prototype.readUInt16BE=function(u,h){return u>>>=0,h||P(u,2,this.length),this[u]<<8|this[u+1]},m.prototype.readUInt32LE=function(u,h){return u>>>=0,h||P(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},m.prototype.readUInt32BE=function(u,h){return u>>>=0,h||P(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},m.prototype.readIntLE=function(u,h,A){u>>>=0,h>>>=0,A||P(u,h,this.length);for(var k=this[u],L=1,R=0;++R<h&&(L*=256);)k+=this[u+R]*L;return k>=(L*=128)&&(k-=Math.pow(2,8*h)),k},m.prototype.readIntBE=function(u,h,A){u>>>=0,h>>>=0,A||P(u,h,this.length);for(var k=h,L=1,R=this[u+--k];k>0&&(L*=256);)R+=this[u+--k]*L;return R>=(L*=128)&&(R-=Math.pow(2,8*h)),R},m.prototype.readInt8=function(u,h){return u>>>=0,h||P(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},m.prototype.readInt16LE=function(u,h){u>>>=0,h||P(u,2,this.length);var A=this[u]|this[u+1]<<8;return 32768&A?4294901760|A:A},m.prototype.readInt16BE=function(u,h){u>>>=0,h||P(u,2,this.length);var A=this[u+1]|this[u]<<8;return 32768&A?4294901760|A:A},m.prototype.readInt32LE=function(u,h){return u>>>=0,h||P(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},m.prototype.readInt32BE=function(u,h){return u>>>=0,h||P(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},m.prototype.readFloatLE=function(u,h){return u>>>=0,h||P(u,4,this.length),i.read(this,u,!0,23,4)},m.prototype.readFloatBE=function(u,h){return u>>>=0,h||P(u,4,this.length),i.read(this,u,!1,23,4)},m.prototype.readDoubleLE=function(u,h){return u>>>=0,h||P(u,8,this.length),i.read(this,u,!0,52,8)},m.prototype.readDoubleBE=function(u,h){return u>>>=0,h||P(u,8,this.length),i.read(this,u,!1,52,8)},m.prototype.writeUIntLE=function(u,h,A,k){u=+u,h>>>=0,A>>>=0,k||U(this,u,h,A,Math.pow(2,8*A)-1,0);var L=1,R=0;for(this[h]=255&u;++R<A&&(L*=256);)this[h+R]=u/L&255;return h+A},m.prototype.writeUIntBE=function(u,h,A,k){u=+u,h>>>=0,A>>>=0,k||U(this,u,h,A,Math.pow(2,8*A)-1,0);var L=A-1,R=1;for(this[h+L]=255&u;--L>=0&&(R*=256);)this[h+L]=u/R&255;return h+A},m.prototype.writeUInt8=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,1,255,0),this[h]=255&u,h+1},m.prototype.writeUInt16LE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,2,65535,0),this[h]=255&u,this[h+1]=u>>>8,h+2},m.prototype.writeUInt16BE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=255&u,h+2},m.prototype.writeUInt32LE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=255&u,h+4},m.prototype.writeUInt32BE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=255&u,h+4},m.prototype.writeIntLE=function(u,h,A,k){if(u=+u,h>>>=0,!k){var L=Math.pow(2,8*A-1);U(this,u,h,A,L-1,-L)}var R=0,v=1,F=0;for(this[h]=255&u;++R<A&&(v*=256);)u<0&&F===0&&this[h+R-1]!==0&&(F=1),this[h+R]=(u/v>>0)-F&255;return h+A},m.prototype.writeIntBE=function(u,h,A,k){if(u=+u,h>>>=0,!k){var L=Math.pow(2,8*A-1);U(this,u,h,A,L-1,-L)}var R=A-1,v=1,F=0;for(this[h+R]=255&u;--R>=0&&(v*=256);)u<0&&F===0&&this[h+R+1]!==0&&(F=1),this[h+R]=(u/v>>0)-F&255;return h+A},m.prototype.writeInt8=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=255&u,h+1},m.prototype.writeInt16LE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,2,32767,-32768),this[h]=255&u,this[h+1]=u>>>8,h+2},m.prototype.writeInt16BE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=255&u,h+2},m.prototype.writeInt32LE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,4,2147483647,-2147483648),this[h]=255&u,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},m.prototype.writeInt32BE=function(u,h,A){return u=+u,h>>>=0,A||U(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=255&u,h+4},m.prototype.writeFloatLE=function(u,h,A){return Z(this,u,h,!0,A)},m.prototype.writeFloatBE=function(u,h,A){return Z(this,u,h,!1,A)},m.prototype.writeDoubleLE=function(u,h,A){return K(this,u,h,!0,A)},m.prototype.writeDoubleBE=function(u,h,A){return K(this,u,h,!1,A)},m.prototype.copy=function(u,h,A,k){if(!m.isBuffer(u))throw new TypeError("argument should be a Buffer");if(A||(A=0),k||k===0||(k=this.length),h>=u.length&&(h=u.length),h||(h=0),k>0&&k<A&&(k=A),k===A||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),u.length-h<k-A&&(k=u.length-h+A);var L=k-A;if(this===u&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(h,A,k);else if(this===u&&A<h&&h<k)for(var R=L-1;R>=0;--R)u[R+h]=this[R+A];else Uint8Array.prototype.set.call(u,this.subarray(A,k),h);return L},m.prototype.fill=function(u,h,A,k){if(typeof u=="string"){if(typeof h=="string"?(k=h,h=0,A=this.length):typeof A=="string"&&(k=A,A=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!m.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(u.length===1){var L=u.charCodeAt(0);(k==="utf8"&&L<128||k==="latin1")&&(u=L)}}else typeof u=="number"&&(u&=255);if(h<0||this.length<h||this.length<A)throw new RangeError("Out of range index");if(A<=h)return this;var R;if(h>>>=0,A=A===void 0?this.length:A>>>0,u||(u=0),typeof u=="number")for(R=h;R<A;++R)this[R]=u;else{var v=m.isBuffer(u)?u:m.from(u,k),F=v.length;if(F===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(R=0;R<A-h;++R)this[R+h]=v[R%F]}return this};var pe=/[^+/0-9A-Za-z-_]/g;function te(u){return u<16?"0"+u.toString(16):u.toString(16)}o(te,"U");function ae(u,h){var A;h=h||1/0;for(var k=u.length,L=null,R=[],v=0;v<k;++v){if((A=u.charCodeAt(v))>55295&&A<57344){if(!L){if(A>56319){(h-=3)>-1&&R.push(239,191,189);continue}if(v+1===k){(h-=3)>-1&&R.push(239,191,189);continue}L=A;continue}if(A<56320){(h-=3)>-1&&R.push(239,191,189),L=A;continue}A=65536+(L-55296<<10|A-56320)}else L&&(h-=3)>-1&&R.push(239,191,189);if(L=null,A<128){if((h-=1)<0)break;R.push(A)}else if(A<2048){if((h-=2)<0)break;R.push(A>>6|192,63&A|128)}else if(A<65536){if((h-=3)<0)break;R.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(A<1114112))throw new Error("Invalid code point");if((h-=4)<0)break;R.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return R}o(ae,"_");function re(u){return s.toByteArray(function(h){if((h=(h=h.split("=")[0]).trim().replace(pe,"")).length<2)return"";for(;h.length%4!=0;)h+="=";return h}(u))}o(re,"I");function ie(u,h,A,k){for(var L=0;L<k&&!(L+A>=h.length||L>=u.length);++L)h[L+A]=u[L];return L}o(ie,"H");function ce(u,h){return u instanceof h||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===h.name}o(ce,"F");function $(u){return u!=u}o($,"P")}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:3}],3:[function(e,t,r){r.read=function(n,s,i,a,l){var m,f,b=8*l-a-1,g=(1<<b)-1,w=g>>1,_=-7,y=i?l-1:0,S=i?-1:1,x=n[s+y];for(y+=S,m=x&(1<<-_)-1,x>>=-_,_+=b;_>0;m=256*m+n[s+y],y+=S,_-=8);for(f=m&(1<<-_)-1,m>>=-_,_+=a;_>0;f=256*f+n[s+y],y+=S,_-=8);if(m===0)m=1-w;else{if(m===g)return f?NaN:1/0*(x?-1:1);f+=Math.pow(2,a),m-=w}return(x?-1:1)*f*Math.pow(2,m-a)},r.write=function(n,s,i,a,l,m){var f,b,g,w=8*m-l-1,_=(1<<w)-1,y=_>>1,S=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=a?0:m-1,E=a?1:-1,C=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(b=isNaN(s)?1:0,f=_):(f=Math.floor(Math.log(s)/Math.LN2),s*(g=Math.pow(2,-f))<1&&(f--,g*=2),(s+=f+y>=1?S/g:S*Math.pow(2,1-y))*g>=2&&(f++,g/=2),f+y>=_?(b=0,f=_):f+y>=1?(b=(s*g-1)*Math.pow(2,l),f+=y):(b=s*Math.pow(2,y-1)*Math.pow(2,l),f=0));l>=8;n[i+x]=255&b,x+=E,b/=256,l-=8);for(f=f<<l|b,w+=l;w>0;n[i+x]=255&f,x+=E,f/=256,w-=8);n[i+x-E]|=128*C}},{}],4:[function(e,t,r){(function(n){(function(){let s=this,i=e("./transformers"),a="UTF8",l="UTF16",m="UTF16BE",f="UTF16LE",b="UTF32",g="UTF32BE",w="UTF32LE",_="UINT7",y="ASCII",S="BINARY",x="UINT8",E="UINT16",C="UINT16LE",I="UINT16BE",B="UINT32",D="UINT32LE",M="UINT32BE",ee="ESCAPED",W="STRING",J=o(function(oe,se){if(typeof oe!="string"||oe==="")throw new TypeError(`type: "${oe}" not recognized`);let V=function(H){let O={type:"",base64:!1},P=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(H);return P&&(P[2]&&(O.type=P[2].toUpperCase()),P[1]&&(O.base64=!0)),O}(oe.toUpperCase());if(V.base64){if(V.type===W)throw new TypeError(`type: "${oe} "BASE64:" prefix not allowed with type STRING`);if(n.isBuffer(se))V.data=i.base64.decode(se);else{if(typeof se!="string")throw new TypeError(`type: "${oe} unrecognized data type: typeof(data): ${typeof se}`);{let H=n.from(se,"ascii");V.data=i.base64.decode(H)}}}else V.data=se;switch(V.type){case a:(function(H){H.type=a;let O=H.data;H.bom=0,O.length>=3&&O[0]===239&&O[1]===187&&O[2]===191&&(H.bom=3)})(V);break;case l:case m:case f:(function(H){let O=H.data;switch(H.bom=0,H.type){case l:H.type=m,O.length>=2&&(O[0]===254&&O[1]===255?H.bom=2:O[0]===255&&O[1]===254&&(H.type=f,H.bom=2));break;case m:if(H.type=m,O.length>=2){if(O[0]===254&&O[1]===255)H.bom=2;else if(O[0]===255&&O[1]===254)throw new TypeError('src type: "UTF16BE" specified but BOM is for "UTF16LE"')}break;case f:if(H.type=f,O.length>=0){if(O[0]===254&&O[1]===255)throw new TypeError('src type: "UTF16LE" specified but BOM is for "UTF16BE"');O[0]===255&&O[1]===254&&(H.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${H.type}" unrecognized`)}})(V);break;case b:case g:case w:(function(H){let O=H.data;switch(H.bom=0,H.type){case b:H.type=g,O.length>=4&&(O[0]===0&&O[1]===0&&O[2]===254&&O[3]===255&&(H.bom=4),O[0]===255&&O[1]===254&&O[2]===0&&O[3]===0&&(H.type=w,H.bom=4));break;case g:if(H.type=g,O.length>=4&&(O[0]===0&&O[1]===0&&O[2]===254&&O[3]===255&&(H.bom=4),O[0]===255&&O[1]===254&&O[2]===0&&O[3]===0))throw new TypeError('src type: UTF32BE specified but BOM is for UTF32LE"');break;case w:if(H.type=w,O.length>=4){if(O[0]===0&&O[1]===0&&O[2]===254&&O[3]===255)throw new TypeError('src type: "UTF32LE" specified but BOM is for "UTF32BE"');O[0]===255&&O[1]===254&&O[2]===0&&O[3]===0&&(H.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${H.type}" unrecognized`)}})(V);break;case E:V.type=I;break;case B:V.type=M;break;case y:V.type=_;break;case S:V.type=x;break;case _:case x:case C:case I:case D:case M:case W:case ee:break;default:throw new TypeError(`type: "${oe}" not recognized`)}if(V.type===W){if(typeof V.data!="string")throw new TypeError(`type: "${oe}" but data is not a string`)}else if(!n.isBuffer(V.data))throw new TypeError(`type: "${oe}" but data is not a Buffer`);return V},"S"),Se=o(function(oe,se){switch(oe){case a:return i.utf8.encode(se);case m:return i.utf16be.encode(se);case f:return i.utf16le.encode(se);case g:return i.utf32be.encode(se);case w:return i.utf32le.encode(se);case _:return i.uint7.encode(se);case x:return i.uint8.encode(se);case I:return i.uint16be.encode(se);case C:return i.uint16le.encode(se);case M:return i.uint32be.encode(se);case D:return i.uint32le.encode(se);case W:return i.string.encode(se);case ee:return i.escaped.encode(se);default:throw new TypeError(`encode type "${oe}" not recognized`)}},"L");r.decode=function(oe,se){return function(V){switch(V.type){case a:return i.utf8.decode(V.data,V.bom);case f:return i.utf16le.decode(V.data,V.bom);case m:return i.utf16be.decode(V.data,V.bom);case g:return i.utf32be.decode(V.data,V.bom);case w:return i.utf32le.decode(V.data,V.bom);case _:return i.uint7.decode(V.data);case x:return i.uint8.decode(V.data);case I:return i.uint16be.decode(V.data);case C:return i.uint16le.decode(V.data);case M:return i.uint32be.decode(V.data);case D:return i.uint32le.decode(V.data);case W:return i.string.decode(V.data);case ee:return i.escaped.decode(V.data);default:throw new TypeError(`decode type "${V.type}" not recognized`)}}(J(oe,se))},r.encode=function(oe,se){let V,H,O=function(P,U){if(!Array.isArray(U))throw new TypeError('dst chars: not array: "'+typeof U);if(typeof P!="string")throw new TypeError('dst type: not string: "'+typeof P);let N=function(Z){let K,pe,te={crlf:!1,lf:!1,base64:!1,type:""};for(;;){if(pe=Z,K=Z.slice(0,5),K==="CRLF:"){te.crlf=!0,pe=Z.slice(5);break}if(K=Z.slice(0,3),K==="LF:"){te.lf=!0,pe=Z.slice(3);break}break}return K=pe.split(":"),K.length===1?te.type=K[0]:K.length===2&&K[1]==="BASE64"&&(te.base64=!0,te.type=K[0]),te}(P.toUpperCase());switch(N.type){case a:case m:case f:case g:case w:case _:case x:case C:case I:case D:case M:case ee:break;case W:if(N.base64)throw new TypeError('":BASE64" suffix not allowed with type STRING');break;case y:N.type=_;break;case S:N.type=x;break;case l:N.type=m;break;case b:N.type=g;break;case E:N.type=I;break;case B:N.type=M;break;default:throw new TypeError(`dst type unrecognized: "${P}" : must have form [crlf:|lf:]type[:base64]`)}return N}(oe,se);return O.crlf?(V=i.lineEnds.crlf(se),H=Se(O.type,V)):O.lf?(V=i.lineEnds.lf(se),H=Se(O.type,V)):H=Se(O.type,se),O.base64&&(H=i.base64.encode(H)),H},r.convert=function(oe,se,V){return s.encode(V,s.decode(oe,se))}}).call(this)}).call(this,e("buffer").Buffer)},{"./transformers":6,buffer:2}],5:[function(e,t,r){t.exports={converter:e("./converter"),transformers:e("./transformers")}},{"./converter":4,"./transformers":6}],6:[function(e,t,r){(function(n){(function(){let s=this,i=4294967292,a=4294967293,l=4294967294,m=4294967295,f=[0,1,3,7,15,31,63,127,255,511,1023],b=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),w=[];g.forEach(y=>{w.push(y.charCodeAt(0))}),r.utf8={encode(y){let S=[];return y.forEach(x=>{if(x>=0&&x<=127)S.push(x);else if(x<=2047)S.push(192+(x>>6&f[5])),S.push(128+(x&f[6]));else if(x<55296||x>57343&&x<=65535)S.push(224+(x>>12&f[4])),S.push(128+(x>>6&f[6])),S.push(128+(x&f[6]));else{if(!(x>=65536&&x<=1114111))throw new RangeError(`utf8.encode: character out of range: char: ${x}`);{let E=x>>16&f[5];S.push(240+(E>>2)),S.push(128+((E&f[2])<<4)+(x>>12&f[4])),S.push(128+(x>>6&f[6])),S.push(128+(x&f[6]))}}}),n.from(S)},decode(y,S){function x(se,V){if((192&V)!=128)return a;let H=((se&f[5])<<6)+(V&f[6]);return H<128?i:H}o(x,"n");function E(se,V,H){if((192&H)!=128||(192&V)!=128)return a;let O=((se&f[4])<<12)+((V&f[6])<<6)+(H&f[6]);return O<2048?i:O>=55296&&O<=57343?l:O}o(E,"h");function C(se,V,H,O){if((192&O)!=128||(192&H)!=128||(192&V)!=128)return a;let P=(((se&f[3])<<2)+(V>>4&f[2])<<16)+((V&f[4])<<12)+((H&f[6])<<6)+(O&f[6]);return P<65536?i:P>1114111?l:P}o(C,"c");let I,B,D,M,ee,W,J=y.length,Se=S?3:0,oe=[];for(;Se<J;){B=y[Se],I=m;let se=!0;for(;se;){if(B>=0&&B<=127){I=B,W=1;break}if(D=Se+1,D<J&&B>=194&&B<=223){I=x(B,y[D]),W=2;break}if(M=Se+2,M<J&&B>=224&&B<=239){I=E(B,y[D],y[M]),W=3;break}if(ee=Se+3,ee<J&&B>=240&&B<=244){I=C(B,y[D],y[M],y[ee]),W=4;break}break}if(I>1114111){let V=`byte[${Se}]`;throw I===m?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${V}`):I===a?new RangeError(`utf8.decode: illegal trailing byte found at: ${V}`):I===l?new RangeError(`utf8.decode: code point out of range found at: ${V}`):I===i?new RangeError(`utf8.decode: non-shortest form found at: ${V}`):new RangeError(`utf8.decode: unrecognized error found at: ${V}`)}oe.push(I),Se+=W}return oe}},r.utf16be={encode(y){let S=[],x,E,C;for(let I=0;I<y.length;I+=1)if(x=y[I],x>=0&&x<=55295||x>=57344&&x<=65535)S.push(x>>8&f[8]),S.push(x&f[8]);else{if(!(x>=65536&&x<=1114111))throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${I}]: ${x}`);C=x-65536,E=55296+(C>>10),C=56320+(C&f[10]),S.push(E>>8&f[8]),S.push(E&f[8]),S.push(C>>8&f[8]),S.push(C&f[8])}return n.from(S)},decode(y,S){if(y.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${y.length}`);let x=[],E=y.length,C,I,B,D,M,ee,W=S?2:0,J=0;for(;W<E;){for(;;){if(B=W+1,B<E){if(M=(y[W]<<8)+y[B],M<55296||M>57343){C=M,I=2;break}if(D=W+3,D<E&&(ee=(y[W+2]<<8)+y[D],M<=56319&&ee>=56320&&ee<=57343)){C=65536+(M-55296<<10)+(ee-56320),I=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${W}]`)}x[J++]=C,W+=I}return x}},r.utf16le={encode(y){let S=[],x,E,C;for(let I=0;I<y.length;I+=1)if(x=y[I],x>=0&&x<=55295||x>=57344&&x<=65535)S.push(x&f[8]),S.push(x>>8&f[8]);else{if(!(x>=65536&&x<=1114111))throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${I}]: ${x}`);C=x-65536,E=55296+(C>>10),C=56320+(C&f[10]),S.push(E&f[8]),S.push(E>>8&f[8]),S.push(C&f[8]),S.push(C>>8&f[8])}return n.from(S)},decode(y,S){if(y.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${y.length}`);let x=[],E=y.length,C,I,B,D,M,ee,W=S?2:0,J=0;for(;W<E;){for(;;){if(B=W+1,B<E){if(M=(y[B]<<8)+y[W],M<55296||M>57343){C=M,I=2;break}if(D=W+3,D<E&&(ee=(y[D]<<8)+y[W+2],M<=56319&&ee>=56320&&ee<=57343)){C=65536+(M-55296<<10)+(ee-56320),I=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${W}]`)}x[J++]=C,W+=I}return x}},r.utf32be={encode(y){let S=n.alloc(4*y.length),x=0;return y.forEach(E=>{if(E>=55296&&E<=57343||E>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${x/4}]: ${E}`);S[x++]=E>>24&f[8],S[x++]=E>>16&f[8],S[x++]=E>>8&f[8],S[x++]=E&f[8]}),S},decode(y,S){if(y.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${y.length}`);let x=[],E=S?4:0;for(;E<y.length;E+=4){let C=(y[E]<<24)+(y[E+1]<<16)+(y[E+2]<<8)+y[E+3];if(C>=55296&&C<=57343||C>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${E/4}]: ${C}`);x.push(C)}return x}},r.utf32le={encode(y){let S=n.alloc(4*y.length),x=0;return y.forEach(E=>{if(E>=55296&&E<=57343||E>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${x/4}]: ${E}`);S[x++]=E&f[8],S[x++]=E>>8&f[8],S[x++]=E>>16&f[8],S[x++]=E>>24&f[8]}),S},decode(y,S){if(y.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${y.length}`);let x=[],E=S?4:0;for(;E<y.length;E+=4){let C=(y[E+3]<<24)+(y[E+2]<<16)+(y[E+1]<<8)+y[E];if(C>=55296&&C<=57343||C>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${E/4}]: ${C}`);x.push(C)}return x}},r.uint7={encode(y){let S=n.alloc(y.length);for(let x=0;x<y.length;x+=1){if(y[x]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${x}]: ${y[x]}`);S[x]=y[x]}return S},decode(y){let S=[];for(let x=0;x<y.length;x+=1){if(y[x]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${x}]: ${y[x]}`);S[x]=y[x]}return S}},r.uint8={encode(y){let S=n.alloc(y.length);for(let x=0;x<y.length;x+=1){if(y[x]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${x}]: ${y[x]}`);S[x]=y[x]}return S},decode(y){let S=[];for(let x=0;x<y.length;x+=1)S[x]=y[x];return S}},r.uint16be={encode(y){let S=n.alloc(2*y.length),x=0;return y.forEach(E=>{if(E>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${x/2}]: ${E}`);S[x++]=E>>8&f[8],S[x++]=E&f[8]}),S},decode(y){if(y.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${y.length}`);let S=[];for(let x=0;x<y.length;x+=2)S.push((y[x]<<8)+y[x+1]);return S}},r.uint16le={encode(y){let S=n.alloc(2*y.length),x=0;return y.forEach(E=>{if(E>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${x/2}]: ${E}`);S[x++]=E&f[8],S[x++]=E>>8&f[8]}),S},decode(y){if(y.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${y.length}`);let S=[];for(let x=0;x<y.length;x+=2)S.push((y[x+1]<<8)+y[x]);return S}},r.uint32be={encode(y){let S=n.alloc(4*y.length),x=0;return y.forEach(E=>{S[x++]=E>>24&f[8],S[x++]=E>>16&f[8],S[x++]=E>>8&f[8],S[x++]=E&f[8]}),S},decode(y){if(y.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${y.length}`);let S=[];for(let x=0;x<y.length;x+=4)S.push((y[x]<<24)+(y[x+1]<<16)+(y[x+2]<<8)+y[x+3]);return S}},r.uint32le={encode(y){let S=n.alloc(4*y.length),x=0;return y.forEach(E=>{S[x++]=E&f[8],S[x++]=E>>8&f[8],S[x++]=E>>16&f[8],S[x++]=E>>24&f[8]}),S},decode(y){if(y.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${y.length}`);let S=[];for(let x=0;x<y.length;x+=4)S.push((y[x+3]<<24)+(y[x+2]<<16)+(y[x+1]<<8)+y[x]);return S}},r.string={encode:o(y=>s.utf16le.encode(y).toString("utf16le"),"encode"),decode:o(y=>s.utf16le.decode(n.from(y,"utf16le"),0),"decode")},r.escaped={encode(y){let S=[];for(let x=0;x<y.length;x+=1){let E=y[x];if(E===96)S.push(E),S.push(E);else if(E===10)S.push(E);else if(E>=32&&E<=126)S.push(E);else{let C="";if(E>=0&&E<=31)C+=`\`x${b[E]}`;else if(E>=127&&E<=255)C+=`\`x${b[E]}`;else if(E>=256&&E<=65535)C+=`\`u${b[E>>8&f[8]]}${b[E&f[8]]}`;else{if(!(E>=65536&&E<=4294967295))throw new Error("escape.encode(char): char > 0xffffffff not allowed");{C+="`u{";let I=E>>24&f[8];I>0&&(C+=b[I]),C+=`${b[E>>16&f[8]]+b[E>>8&f[8]]+b[E&f[8]]}}`}}n.from(C).forEach(I=>{S.push(I)})}}return n.from(S)},decode(y){function S(J){return J>=48&&J<=57||J>=65&&J<=70||J>=97&&J<=102}o(S,"t");function x(J,Se,oe){let se={char:null,nexti:J+2,error:!0};if(J+1<Se&&S(oe[J])&&S(oe[J+1])){let V=String.fromCodePoint(oe[J],oe[J+1]);se.char=parseInt(V,16),Number.isNaN(se.char)||(se.error=!1)}return se}o(x,"n");function E(J,Se,oe){let se={char:null,nexti:J+4,error:!0};if(J+3<Se&&S(oe[J])&&S(oe[J+1])&&S(oe[J+2])&&S(oe[J+3])){let V=String.fromCodePoint(oe[J],oe[J+1],oe[J+2],oe[J+3]);se.char=parseInt(V,16),Number.isNaN(se.char)||(se.error=!1)}return se}o(E,"r");function C(J,Se,oe){let se={char:null,nexti:J+4,error:!0},V="";for(;J<Se&&S(oe[J]);)V+=String.fromCodePoint(oe[J]),J+=1;return se.char=parseInt(V,16),oe[J]!==125||Number.isNaN(se.char)||(se.error=!1),se.nexti=J+1,se}o(C,"o");let I=[],B=y.length,D,M,ee,W=0;for(;W<B;){for(;;){if(ee=!0,y[W]!==96){I.push(y[W]),W+=1,ee=!1;break}if(D=W+1,D>=B)break;if(y[D]===96){I.push(96),W+=2,ee=!1;break}if(y[D]===120){if(M=x(D+1,B,y),M.error)break;I.push(M.char),W=M.nexti,ee=!1;break}if(y[D]===117){if(y[D+1]===123){if(M=C(D+2,B,y),M.error)break;I.push(M.char),W=M.nexti,ee=!1;break}if(M=E(D+1,B,y),M.error)break;I.push(M.char),W=M.nexti,ee=!1;break}break}if(ee)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${W}]`)}return I}};let _=10;r.lineEnds={crlf(y){let S=[],x=0;for(;x<y.length;)switch(y[x]){case 13:x+1<y.length&&y[x+1]===_?x+=2:x+=1,S.push(13),S.push(_);break;case _:S.push(13),S.push(_),x+=1;break;default:S.push(y[x]),x+=1}return S.length>0&&S[S.length-1]!==_&&(S.push(13),S.push(_)),S},lf(y){let S=[],x=0;for(;x<y.length;)switch(y[x]){case 13:x+1<y.length&&y[x+1]===_?x+=2:x+=1,S.push(_);break;case _:S.push(_),x+=1;break;default:S.push(y[x]),x+=1}return S.length>0&&S[S.length-1]!==_&&S.push(_),S}},r.base64={encode(y){if(y.length===0)return n.alloc(0);let S,x,E,C=y.length%3;C=C>0?3-C:0;let I=(y.length+C)/3,B=n.alloc(4*I);C>0&&(I-=1),S=0,x=0;for(let D=0;D<I;D+=1)E=y[S++]<<16,E+=y[S++]<<8,E+=y[S++],B[x++]=w[E>>18&f[6]],B[x++]=w[E>>12&f[6]],B[x++]=w[E>>6&f[6]],B[x++]=w[E&f[6]];return C===0?B:C===1?(E=y[S++]<<16,E+=y[S]<<8,B[x++]=w[E>>18&f[6]],B[x++]=w[E>>12&f[6]],B[x++]=w[E>>6&f[6]],B[x]=w[64],B):C===2?(E=y[S]<<16,B[x++]=w[E>>18&f[6]],B[x++]=w[E>>12&f[6]],B[x++]=w[64],B[x]=w[64],B):void 0},decode(y){if(y.length===0)return n.alloc(0);let S=function(ee){let W=[],J=0;for(let Se=0;Se<ee.length;Se+=1){let oe=ee[Se],se=!0;for(;se&&oe!==32&&oe!==9&&oe!==10&&oe!==13;){if(oe>=65&&oe<=90){W.push(oe-65);break}if(oe>=97&&oe<=122){W.push(oe-71);break}if(oe>=48&&oe<=57){W.push(oe+4);break}if(oe===43){W.push(62);break}if(oe===47){W.push(63);break}if(oe===61){W.push(64),J+=1;break}throw new RangeError(`base64.decode: invalid character buf[${Se}]: ${oe}`)}}if(W.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${W.length}`);switch(J){case 0:break;case 1:if(W[W.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(W[W.length-1]!==64||W[W.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${J}`)}return{tail:J,buf:n.from(W)}}(y),{tail:x}=S,E=S.buf,C,I,B,D=E.length/4,M=n.alloc(3*D-x);x>0&&(D-=1),I=0,C=0;for(let ee=0;ee<D;ee+=1)B=E[C++]<<18,B+=E[C++]<<12,B+=E[C++]<<6,B+=E[C++],M[I++]=B>>16&f[8],M[I++]=B>>8&f[8],M[I++]=B&f[8];return x===1&&(B=E[C++]<<18,B+=E[C++]<<12,B+=E[C]<<6,M[I++]=B>>16&f[8],M[I]=B>>8&f[8]),x===2&&(B=E[C++]<<18,B+=E[C++]<<12,M[I]=B>>16&f[8]),M},toString(y){if(y.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${y.length}`);let S="",x=0;function E(I,B,D,M){switch(x){case 76:S+=`\r
${I}${B}${D}${M}`,x=4;break;case 75:S+=`${I}\r
${B}${D}${M}`,x=3;break;case 74:S+=`${I+B}\r
${D}${M}`,x=2;break;case 73:S+=`${I+B+D}\r
${M}`,x=1;break;default:S+=I+B+D+M,x+=4}}o(E,"r");for(let I=0;I<y.length;I+=4){for(let B=I;B<I+4;B+=1)if(!((C=y[B])>=65&&C<=90||C>=97&&C<=122||C>=48&&C<=57||C===43||C===47||C===61))throw new RangeError(`base64.toString: buf[${B}]: ${y[B]} : not valid base64 character code`);E(String.fromCharCode(y[I]),String.fromCharCode(y[I+1]),String.fromCharCode(y[I+2]),String.fromCharCode(y[I+3]))}var C;return S}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:2}],7:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),i=this,a=null,l=null,m=null,f=0,b=[],g=[],w=[],_=[];function y(S){let x="";for(let E=0;E<S;E+=1)x+=" ";return x}o(y,"u"),this.callbacks=[],this.astObject="astObject",this.init=function(S,x,E){let C;w.length=0,_.length=0,b.length=0,f=0,a=S,l=x,m=E;let I=[];for(C=0;C<a.length;C+=1)I.push(a[C].lower);for(C=0;C<l.length;C+=1)I.push(l[C].lower);for(f=a.length+l.length,C=0;C<f;C+=1)b[C]=!1,g[C]=null;for(let B in i.callbacks){let D=B.toLowerCase();if(C=I.indexOf(D),C<0)throw new Error(`ast.js: init: node '${B}' not a rule or udt name`);typeof i.callbacks[B]=="function"&&(b[C]=!0,g[C]=i.callbacks[B]),i.callbacks[B]===!0&&(b[C]=!0)}},this.ruleDefined=function(S){return b[S]!==!1},this.udtDefined=function(S){return b[a.length+S]!==!1},this.down=function(S,x){let E=_.length;return w.push(E),_.push({name:x,thisIndex:E,thatIndex:null,state:n.SEM_PRE,callbackIndex:S,phraseIndex:null,phraseLength:null,stack:w.length}),E},this.up=function(S,x,E,C){let I=_.length,B=w.pop();return _.push({name:x,thisIndex:I,thatIndex:B,state:n.SEM_POST,callbackIndex:S,phraseIndex:E,phraseLength:C,stack:w.length}),_[B].thatIndex=I,_[B].phraseIndex=E,_[B].phraseLength=C,I},this.translate=function(S){let x,E,C;for(let I=0;I<_.length;I+=1)C=_[I],E=g[C.callbackIndex],C.state===n.SEM_PRE?E!==null&&(x=E(n.SEM_PRE,m,C.phraseIndex,C.phraseLength,S),x===n.SEM_SKIP&&(I=C.thatIndex)):E!==null&&E(n.SEM_POST,m,C.phraseIndex,C.phraseLength,S)},this.setLength=function(S){_.length=S,w.length=S>0?_[S-1].stack:0},this.getLength=function(){return _.length},this.toXml=function(S){let x=s.charsToDec,E="decimal integer character codes";if(typeof S=="string"&&S.length>=3){let B=S.slice(0,3).toLowerCase();B==="asc"?(x=s.charsToAscii,E="ASCII for printing characters, hex for non-printing"):B==="hex"?(x=s.charsToHex,E="hexadecimal integer character codes"):B==="uni"&&(x=s.charsToUnicode,E="Unicode UTF-32 integer character codes")}let C="",I=0;return C+=`<?xml version="1.0" encoding="utf-8"?>
`,C+=`<root nodes="${_.length/2}" characters="${m.length}">
`,C+=`<!-- input string, ${E} -->
`,C+=y(I+2),C+=x(m),C+=`
`,_.forEach(B=>{B.state===n.SEM_PRE?(I+=1,C+=y(I),C+=`<node name="${B.name}" index="${B.phraseIndex}" length="${B.phraseLength}">
`,C+=y(I+2),C+=x(m,B.phraseIndex,B.phraseLength),C+=`
`):(C+=y(I),C+=`</node><!-- name="${B.name}" -->
`,I-=1)}),C+=`</root>
`,C},this.phrases=function(){let S={},x,E;for(x=0;x<_.length;x+=1)E=_[x],E.state===n.SEM_PRE&&(Array.isArray(S[E.name])||(S[E.name]=[]),S[E.name].push({index:E.phraseIndex,length:E.phraseLength}));return S}}},{"./identifiers":10,"./utilities":16}],8:[function(e,t,r){t.exports=function(){let n=-1,s=0;this.init=function(i){if(typeof i!="number"||i<=0)throw new Error("circular-buffer.js: init: circular buffer size must an integer > 0");s=Math.ceil(i),n=-1},this.increment=function(){return n+=1,(n+s)%s},this.maxSize=function(){return s},this.items=function(){return n+1},this.getListIndex=function(i){return n===-1||i<0||i>n||n-i>=s?-1:(i+s)%s},this.forEach=function(i){if(n!==-1)if(n<s)for(let a=0;a<=n;a+=1)i(a,a);else for(let a=n-s+1;a<=n;a+=1)i((a+s)%s,a)}}},{}],9:[function(e,t,r){t.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}},{}],10:[function(e,t,r){t.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}},{}],11:[function(e,t,r){t.exports={ast:e("./ast"),circular:e("./circular-buffer"),ids:e("./identifiers"),parser:e("./parser"),stats:e("./stats"),trace:e("./trace"),utils:e("./utilities"),emitcss:e("./emitcss"),style:e("./style")}},{"./ast":7,"./circular-buffer":8,"./emitcss":9,"./identifiers":10,"./parser":12,"./stats":13,"./style":14,"./trace":15,"./utilities":16}],12:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),i=this,a;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let l,m,f,b,g=null,w=null,_=0,y=0,S=0,x=null,E=null,C=null,I=null,B=null,D=0,M=1/0,ee=1/0,W=o(function($,u,h){let A="parser.js: evaluateRule(): ";if($>=C.length)throw new Error(`${A}rule index: ${$} out of range`);if(u>=f)throw new Error(`${A}phrase index: ${u} out of range`);let{length:k}=g;g.push({type:n.RNM,index:$}),a(k,u,h),g.pop()},"y"),J=o(function($,u,h){let A="parser.js: evaluateUdt(): ";if($>=I.length)throw new Error(`${A}udt index: ${$} out of range`);if(u>=f)throw new Error(`${A}phrase index: ${u} out of range`);let{length:k}=g;g.push({type:n.UDT,empty:I[$].empty,index:$}),a(k,u,h),g.pop()},"C"),Se=o(function(){_=0,y=0,S=0,D=0,b=[{lookAround:n.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],C=null,I=null,w=null,l=0,m=0,f=0,x=null,E=null,B=null,g=null},"S"),oe=o(function(){let $=[];this.push=function(){$.push(function(){let u=$[$.length-1],h={};for(let A in u)h[A]=u[A];return h}())},this.pop=function(u){let h=u;if(h||(h=$.length-1),h<1||h>$.length)throw new Error(`parser.js: backRef.pop(): bad length: ${h}`);return $.length=h,$[$.length-1]},this.length=function(){return $.length},this.savePhrase=function(u,h,A){$[$.length-1][u]={phraseIndex:h,phraseLength:A}},this.getPhrase=function(u){return $[$.length-1][u]},function(){let u={};C.forEach(h=>{h.isBkr&&(u[h.lower]=null)}),I.length>0&&I.forEach(h=>{h.isBkr&&(u[h.lower]=null)}),$.push(u)}()},"L"),se=o(function(){let $=this;this.state=n.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=b[b.length-1],this.uFrame=new oe,this.pFrame=new oe,this.evaluateRule=W,this.evaluateUdt=J,this.refresh=function(){$.state=n.ACTIVE,$.phraseLength=0,$.lookAround=b[b.length-1]}},"M"),V=o(function(){return b[b.length-1]},"$"),H=o(function(){return b.length>1},"k"),O=o(function($,u,h){let A="parser.js: initializeInputChars(): ",k=$,L=u,R=h;if(k===void 0)throw new Error(`${A}input string is undefined`);if(k===null)throw new Error(`${A}input string is null`);if(typeof k=="string")k=s.stringToChars(k);else if(!Array.isArray(k))throw new Error(`${A}input string is not a string or array`);if(k.length>0&&typeof k[0]!="number")throw new Error(`${A}input string not an array of integers`);if(typeof L!="number")L=0;else if(L=Math.floor(L),L<0||L>k.length)throw new Error(`${A}input beginning index out of range: ${L}`);if(typeof R!="number")R=k.length-L;else if(R=Math.floor(R),R<0||R>k.length-L)throw new Error(`${A}input length out of range: ${R}`);w=k,l=L,m=R,f=l+m},"x");this.setMaxTreeDepth=function($){if(typeof $!="number")throw new Error(`parser: max tree depth must be integer > 0: ${$}`);if(M=Math.floor($),M<=0)throw new Error(`parser: max tree depth must be integer > 0: ${$}`)},this.setMaxNodeHits=function($){if(typeof $!="number")throw new Error(`parser: max node hits must be integer > 0: ${$}`);if(ee=Math.floor($),ee<=0)throw new Error(`parser: max node hits must be integer > 0: ${$}`)};let P=o(function($,u,h){let A;(function(R){let v="parser.js: initializeGrammar(): ";if(!R)throw new Error(`${v}grammar object undefined`);if(R.grammarObject!=="grammarObject")throw new Error(`${v}bad grammar object`);C=R.rules,I=R.udts})($);let k=function(R){let v="parser.js: initializeStartRule(): ",F=null;if(typeof R=="number"){if(R>=C.length)throw new Error(`${v}start rule index too large: max: ${C.length}: index: ${R}`);F=R}else{if(typeof R!="string")throw new Error(`${v}type of start rule '${typeof R}' not recognized`);{let Y=R.toLowerCase();for(let q=0;q<C.length;q+=1)if(Y===C[q].lower){F=C[q].index;break}if(F===null)throw new Error(`${v}start rule name '${R}' not recognized`)}}return F}(u);(function(){let R="parser.js: initializeCallbacks(): ",v,F;for(x=[],E=[],v=0;v<C.length;v+=1)x[v]=null;for(v=0;v<I.length;v+=1)E[v]=null;let Y=[];for(v=0;v<C.length;v+=1)Y.push(C[v].lower);for(v=0;v<I.length;v+=1)Y.push(I[v].lower);for(let q in i.callbacks){if(v=Y.indexOf(q.toLowerCase()),v<0)throw new Error(`${R}syntax callback '${q}' not a rule or udt name`);if(F=i.callbacks[q],F||(F=null),typeof F!="function"&&F!==null)throw new Error(`${R}syntax callback[${q}] must be function reference or 'false' (false/null/undefined/etc.)`);v<C.length?x[v]=F:E[v-C.length]=F}for(v=0;v<I.length;v+=1)if(E[v]===null)throw new Error(`${R}all UDT callbacks must be defined. UDT callback[${I[v].lower}] not a function reference`)})(),function(){for(;;){if(i.trace===void 0){i.trace=null;break}if(i.trace===null)break;if(i.trace.traceObject!=="traceObject")throw new Error("parser.js: initializeTrace(): trace object not recognized");break}i.trace!==null&&i.trace.init(C,I,w)}(),function(){for(;;){if(i.stats===void 0){i.stats=null;break}if(i.stats===null)break;if(i.stats.statsObject!=="statsObject")throw new Error("parser.js: initializeStats(): stats object not recognized");break}i.stats!==null&&i.stats.init(C,I)}(),function(){for(;;){if(i.ast===void 0){i.ast=null;break}if(i.ast===null)break;if(i.ast.astObject!=="astObject")throw new Error("parser.js: initializeAst(): ast object not recognized");break}i.ast!==null&&i.ast.init(C,I,w)}();let L=new se;switch(h!=null&&(B=h),g=[{type:n.RNM,index:k}],a(0,l,L),g=null,L.state){case n.ACTIVE:throw new Error("parser.js: parse(): final state should never be 'ACTIVE'");case n.NOMATCH:A=!1;break;case n.EMPTY:case n.MATCH:A=L.phraseLength===m;break;default:throw new Error("unrecognized state")}return{success:A,state:L.state,length:m,matched:L.phraseLength,maxMatched:D,maxTreeDepth:y,nodeHits:S,inputLength:w.length,subBegin:l,subEnd:f,subLength:m}},"B");this.parseSubstring=function($,u,h,A,k,L){return Se(),O(h,A,k),P($,u,L)},this.parse=function($,u,h,A){return Se(),O(h,0,h.length),P($,u,A)};let U=o(function($,u,h){let A=g[$];for(let k=0;k<A.children.length&&(a(A.children[k],u,h),h.state===n.NOMATCH);k+=1);},"N"),N=o(function($,u,h,A){if(u.phraseLength>h){let k=`parser.js: opRNM(${$.name}): callback function error: `;throw k+=`sysData.phraseLength: ${u.phraseLength}`,k+=` must be <= remaining chars: ${h}`,new Error(k)}switch(u.state){case n.ACTIVE:if(A!==!0)throw new Error(`parser.js: opRNM(${$.name}): callback function return error. ACTIVE state not allowed.`);break;case n.EMPTY:u.phraseLength=0;break;case n.MATCH:u.phraseLength===0&&(u.state=n.EMPTY);break;case n.NOMATCH:u.phraseLength=0;break;default:throw new Error(`parser.js: opRNM(${$.name}): callback function return error. Unrecognized return state: ${u.state}`)}},"R"),Z=o(function($,u,h){let A,k,L,R,v,F,Y=g[$],q=C[Y.index],ne=x[q.index],_e=!H();if(_e&&(k=i.ast&&i.ast.ruleDefined(Y.index),k&&(A=i.ast.getLength(),i.ast.down(Y.index,C[Y.index].name)),R=h.uFrame.length(),v=h.pFrame.length(),h.uFrame.push(),h.pFrame.push(),F=h.pFrame,h.pFrame=new oe),ne===null)L=g,g=q.opcodes,a(0,u,h),g=L;else{let Te=f-u;h.ruleIndex=q.index,ne(h,w,u,B),N(q,h,Te,!0),h.state===n.ACTIVE&&(L=g,g=q.opcodes,a(0,u,h),g=L,h.ruleIndex=q.index,ne(h,w,u,B),N(q,h,Te,!1))}_e&&(k&&(h.state===n.NOMATCH?i.ast.setLength(A):i.ast.up(Y.index,q.name,u,h.phraseLength)),h.pFrame=F,h.state===n.NOMATCH?(h.uFrame.pop(R),h.pFrame.pop(v)):q.isBkr&&(h.pFrame.savePhrase(q.lower,u,h.phraseLength),h.uFrame.savePhrase(q.lower,u,h.phraseLength)))},"v"),K=o(function($,u,h){let A,k,L,R,v,F,Y=g[$],q=I[Y.index];h.UdtIndex=q.index;let ne=!H();ne&&(L=i.ast&&i.ast.udtDefined(Y.index),L&&(k=C.length+Y.index,A=i.ast.getLength(),i.ast.down(k,q.name)),R=h.uFrame.length(),v=h.pFrame.length(),h.uFrame.push(),h.pFrame.push(),F=h.pFrame,h.pFrame=new oe);let _e=f-u;E[Y.index](h,w,u,B),function(Te,Be,Me){if(Be.phraseLength>Me){let He=`parser.js: opUDT(${Te.name}): callback function error: `;throw He+=`sysData.phraseLength: ${Be.phraseLength}`,He+=` must be <= remaining chars: ${Me}`,new Error(He)}switch(Be.state){case n.ACTIVE:throw new Error(`parser.js: opUDT(${Te.name}): callback function return error. ACTIVE state not allowed.`);case n.EMPTY:if(Te.empty===!1)throw new Error(`parser.js: opUDT(${Te.name}): callback function return error. May not return EMPTY.`);Be.phraseLength=0;break;case n.MATCH:if(Be.phraseLength===0){if(Te.empty===!1)throw new Error(`parser.js: opUDT(${Te.name}): callback function return error. May not return EMPTY.`);Be.state=n.EMPTY}break;case n.NOMATCH:Be.phraseLength=0;break;default:throw new Error(`parser.js: opUDT(${Te.name}): callback function return error. Unrecognized return state: ${Be.state}`)}}(q,h,_e),ne&&(L&&(h.state===n.NOMATCH?i.ast.setLength(A):i.ast.up(k,q.name,u,h.phraseLength)),h.pFrame=F,h.state===n.NOMATCH?(h.uFrame.pop(R),h.pFrame.pop(v)):q.isBkr&&(h.pFrame.savePhrase(q.lower,u,h.phraseLength),h.uFrame.savePhrase(q.lower,u,h.phraseLength)))},"O"),pe=o(function($,u,h){b.push({lookAround:n.LOOKAROUND_AHEAD,anchor:u,charsEnd:f,charsLength:m}),f=w.length,m=w.length-l,a($+1,u,h);let A=b.pop();switch(f=A.charsEnd,m=A.charsLength,h.phraseLength=0,h.state){case n.EMPTY:case n.MATCH:h.state=n.EMPTY;break;case n.NOMATCH:h.state=n.NOMATCH;break;default:throw new Error(`opAND: invalid state ${h.state}`)}},"D"),te=o(function($,u,h){b.push({lookAround:n.LOOKAROUND_AHEAD,anchor:u,charsEnd:f,charsLength:m}),f=w.length,m=w.length-l,a($+1,u,h);let A=b.pop();switch(f=A.charsEnd,m=A.charsLength,h.phraseLength=0,h.state){case n.EMPTY:case n.MATCH:h.state=n.NOMATCH;break;case n.NOMATCH:h.state=n.EMPTY;break;default:throw new Error(`opNOT: invalid state ${h.state}`)}},"U"),ae=o(function($,u,h){h.state=n.NOMATCH,h.phraseLength=0,h.state=u===0?n.EMPTY:n.NOMATCH},"_"),re=o(function($,u,h){h.state=n.NOMATCH,h.phraseLength=0,h.state=u===w.length?n.EMPTY:n.NOMATCH},"I"),ie=o(function($,u,h){switch(b.push({lookAround:n.LOOKAROUND_BEHIND,anchor:u}),a($+1,u,h),b.pop(),h.phraseLength=0,h.state){case n.EMPTY:case n.MATCH:h.state=n.EMPTY;break;case n.NOMATCH:h.state=n.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${h.state}`)}},"H"),ce=o(function($,u,h){switch(b.push({lookAround:n.LOOKAROUND_BEHIND,anchor:u}),a($+1,u,h),b.pop(),h.phraseLength=0,h.state){case n.EMPTY:case n.MATCH:h.state=n.NOMATCH;break;case n.NOMATCH:h.state=n.EMPTY;break;default:throw new Error(`opBKN: invalid state ${h.state}`)}},"F");a=o(function($,u,h){let A=!0,k=g[$];if(S+=1,S>ee)throw new Error(`parser: maximum number of node hits exceeded: ${ee}`);if(_+=1,_>y&&(y=_,y>M))throw new Error(`parser: maximum parse tree depth exceeded: ${M}`);if(h.refresh(),i.trace!==null){let L=V();i.trace.down(k,h.state,u,h.phraseLength,L.anchor,L.lookAround)}if(b[b.length-1].lookAround===n.LOOKAROUND_BEHIND)switch(k.type){case n.ALT:U($,u,h);break;case n.CAT:(function(L,R,v){let F,Y,q,ne,_e=g[L],Te=v.uFrame.length(),Be=v.pFrame.length();i.ast&&(Y=i.ast.getLength()),F=!0,q=R,ne=0;for(let Me=_e.children.length-1;Me>=0;Me-=1)if(a(_e.children[Me],q,v),q-=v.phraseLength,ne+=v.phraseLength,v.state===n.NOMATCH){F=!1;break}F?(v.state=ne===0?n.EMPTY:n.MATCH,v.phraseLength=ne):(v.state=n.NOMATCH,v.phraseLength=0,v.uFrame.pop(Te),v.pFrame.pop(Be),i.ast&&i.ast.setLength(Y))})($,u,h);break;case n.REP:(function(L,R,v){let F,Y,q,ne,_e=g[L];Y=R,q=0,ne=0;let Te=v.uFrame.length(),Be=v.pFrame.length();for(i.ast&&(F=i.ast.getLength());!(Y<=0)&&(a(L+1,Y,v),v.state!==n.NOMATCH)&&v.state!==n.EMPTY&&(ne+=1,q+=v.phraseLength,Y-=v.phraseLength,ne!==_e.max););v.state===n.EMPTY||ne>=_e.min?(v.state=q===0?n.EMPTY:n.MATCH,v.phraseLength=q):(v.state=n.NOMATCH,v.phraseLength=0,v.uFrame.pop(Te),v.pFrame.pop(Be),i.ast&&i.ast.setLength(F))})($,u,h);break;case n.RNM:Z($,u,h);break;case n.UDT:K($,u,h);break;case n.AND:pe($,u,h);break;case n.NOT:te($,u,h);break;case n.TRG:(function(L,R,v){let F=g[L];if(v.state=n.NOMATCH,v.phraseLength=0,R>0){let Y=w[R-1];F.min<=Y&&Y<=F.max&&(v.state=n.MATCH,v.phraseLength=1)}})($,u,h);break;case n.TBS:(function(L,R,v){let F,Y=g[L];v.state=n.NOMATCH;let q=Y.string.length,ne=R-q;if(ne>=0){for(F=0;F<q;F+=1)if(w[ne+F]!==Y.string[F])return;v.state=n.MATCH,v.phraseLength=q}})($,u,h);break;case n.TLS:(function(L,R,v){let F,Y=g[L];v.state=n.NOMATCH;let q=Y.string.length;if(q===0)return void(v.state=n.EMPTY);let ne=R-q;if(ne>=0){for(let _e=0;_e<q;_e+=1)if(F=w[ne+_e],F>=65&&F<=90&&(F+=32),F!==Y.string[_e])return;v.state=n.MATCH,v.phraseLength=q}})($,u,h);break;case n.BKR:(function(L,R,v){let F,Y,q,ne,_e=g[L];v.state=n.NOMATCH,v.phraseLength=0,ne=_e.index<C.length?C[_e.index].lower:I[_e.index-C.length].lower;let Te=_e.bkrMode===n.BKR_MODE_PM?v.pFrame.getPhrase(ne):v.uFrame.getPhrase(ne),Be=_e.bkrCase===n.BKR_MODE_CI;if(Te===null)return;let Me=Te.phraseIndex,He=Te.phraseLength;if(He===0)return v.state=n.EMPTY,void(v.phraseLength=0);let kr=R-He;if(kr>=0){if(Be){for(F=0;F<He;F+=1)if(Y=w[kr+F],q=w[Me+F],Y>=65&&Y<=90&&(Y+=32),q>=65&&q<=90&&(q+=32),Y!==q)return;v.state=n.MATCH,v.phraseLength=He}else for(F=0;F<He;F+=1)if(Y=w[kr+F],q=w[Me+F],Y!==q)return;v.state=n.MATCH,v.phraseLength=He}})($,u,h);break;case n.BKA:ie($,u,h);break;case n.BKN:ce($,u,h);break;case n.ABG:ae(0,u,h);break;case n.AEN:re(0,u,h);break;default:A=!1}else switch(k.type){case n.ALT:U($,u,h);break;case n.CAT:(function(L,R,v){let F,Y,q,ne,_e=g[L],Te=v.uFrame.length(),Be=v.pFrame.length();i.ast&&(Y=i.ast.getLength()),F=!0,q=R,ne=0;for(let Me=0;Me<_e.children.length;Me+=1){if(a(_e.children[Me],q,v),v.state===n.NOMATCH){F=!1;break}q+=v.phraseLength,ne+=v.phraseLength}F?(v.state=ne===0?n.EMPTY:n.MATCH,v.phraseLength=ne):(v.state=n.NOMATCH,v.phraseLength=0,v.uFrame.pop(Te),v.pFrame.pop(Be),i.ast&&i.ast.setLength(Y))})($,u,h);break;case n.REP:(function(L,R,v){let F,Y,q,ne,_e=g[L];Y=R,q=0,ne=0;let Te=v.uFrame.length(),Be=v.pFrame.length();for(i.ast&&(F=i.ast.getLength());!(Y>=f)&&(a(L+1,Y,v),v.state!==n.NOMATCH)&&v.state!==n.EMPTY&&(ne+=1,q+=v.phraseLength,Y+=v.phraseLength,ne!==_e.max););v.state===n.EMPTY||ne>=_e.min?(v.state=q===0?n.EMPTY:n.MATCH,v.phraseLength=q):(v.state=n.NOMATCH,v.phraseLength=0,v.uFrame.pop(Te),v.pFrame.pop(Be),i.ast&&i.ast.setLength(F))})($,u,h);break;case n.RNM:Z($,u,h);break;case n.UDT:K($,u,h);break;case n.AND:pe($,u,h);break;case n.NOT:te($,u,h);break;case n.TRG:(function(L,R,v){let F=g[L];v.state=n.NOMATCH,R<f&&F.min<=w[R]&&w[R]<=F.max&&(v.state=n.MATCH,v.phraseLength=1)})($,u,h);break;case n.TBS:(function(L,R,v){let F,Y=g[L],q=Y.string.length;if(v.state=n.NOMATCH,R+q<=f){for(F=0;F<q;F+=1)if(w[R+F]!==Y.string[F])return;v.state=n.MATCH,v.phraseLength=q}})($,u,h);break;case n.TLS:(function(L,R,v){let F,Y,q=g[L];v.state=n.NOMATCH;let ne=q.string.length;if(ne!==0){if(R+ne<=f){for(F=0;F<ne;F+=1)if(Y=w[R+F],Y>=65&&Y<=90&&(Y+=32),Y!==q.string[F])return;v.state=n.MATCH,v.phraseLength=ne}}else v.state=n.EMPTY})($,u,h);break;case n.BKR:(function(L,R,v){let F,Y,q,ne,_e=g[L];v.state=n.NOMATCH,ne=_e.index<C.length?C[_e.index].lower:I[_e.index-C.length].lower;let Te=_e.bkrMode===n.BKR_MODE_PM?v.pFrame.getPhrase(ne):v.uFrame.getPhrase(ne),Be=_e.bkrCase===n.BKR_MODE_CI;if(Te===null)return;let Me=Te.phraseIndex,He=Te.phraseLength;if(He!==0){if(R+He<=f){if(Be){for(F=0;F<He;F+=1)if(Y=w[R+F],q=w[Me+F],Y>=65&&Y<=90&&(Y+=32),q>=65&&q<=90&&(q+=32),Y!==q)return;v.state=n.MATCH,v.phraseLength=He}else for(F=0;F<He;F+=1)if(Y=w[R+F],q=w[Me+F],Y!==q)return;v.state=n.MATCH,v.phraseLength=He}}else v.state=n.EMPTY})($,u,h);break;case n.BKA:ie($,u,h);break;case n.BKN:ce($,u,h);break;case n.ABG:ae(0,u,h);break;case n.AEN:re(0,u,h);break;default:A=!1}if(!H()&&u+h.phraseLength>D&&(D=u+h.phraseLength),i.stats!==null&&i.stats.collect(k,h),i.trace!==null){let L=V();i.trace.up(k,h.state,u,h.phraseLength,L.anchor,L.lookAround)}return _-=1,A},"o")}},{"./identifiers":10,"./utilities":16}],13:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),i=e("./style"),a=[],l=[],m=[],f,b=[],g=[];this.statsObject="statsObject";let w=o(function(B,D){return B.lower<D.lower?-1:B.lower>D.lower?1:0},"l"),_=o(function(B,D){return B.total<D.total?1:B.total>D.total?-1:w(B,D)},"f"),y=o(function(B,D){return B.index<D.index?-1:B.index>D.index?1:0},"u"),S=o(function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},"p"),x=o(function(B,D){switch(B.total+=1,D){case n.EMPTY:B.empty+=1;break;case n.MATCH:B.match+=1;break;case n.NOMATCH:B.nomatch+=1;break;default:throw new Error(`stats.js: collect(): incStat(): unrecognized state: ${D}`)}},"d"),E=o(function(B,D){let M="";return M+="<tr>",M+=`<td class="${i.CLASS_ACTIVE}">${B}</td>`,M+=`<td class="${i.CLASS_EMPTY}">${D.empty}</td>`,M+=`<td class="${i.CLASS_MATCH}">${D.match}</td>`,M+=`<td class="${i.CLASS_NOMATCH}">${D.nomatch}</td>`,M+=`<td class="${i.CLASS_ACTIVE}">${D.total}</td>`,M+=`</tr>
`,M},"g"),C=o(function(){let B="";return B+=E("ALT",m[n.ALT]),B+=E("CAT",m[n.CAT]),B+=E("REP",m[n.REP]),B+=E("RNM",m[n.RNM]),B+=E("TRG",m[n.TRG]),B+=E("TBS",m[n.TBS]),B+=E("TLS",m[n.TLS]),B+=E("UDT",m[n.UDT]),B+=E("AND",m[n.AND]),B+=E("NOT",m[n.NOT]),B+=E("BKR",m[n.BKR]),B+=E("BKA",m[n.BKA]),B+=E("BKN",m[n.BKN]),B+=E("ABG",m[n.ABG]),B+=E("AEN",m[n.AEN]),B+=E("totals",f),B},"b"),I=o(function(){let B="";B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let D=0;D<a.length;D+=1)b[D].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${b[D].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${b[D].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${b[D].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${b[D].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${b[D].total}</td>`,B+=`</tr>
`);if(l.length>0){B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let D=0;D<l.length;D+=1)g[D].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${g[D].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${g[D].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${g[D].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${g[D].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${g[D].total}</td>`,B+=`</tr>
`)}return B},"A");this.validate=function(B){let D=!1;return typeof B=="string"&&B==="stats"&&(D=!0),D},this.init=function(B,D){a=B,l=D,function(){m.length=0,f=new S,m[n.ALT]=new S,m[n.CAT]=new S,m[n.REP]=new S,m[n.RNM]=new S,m[n.TRG]=new S,m[n.TBS]=new S,m[n.TLS]=new S,m[n.UDT]=new S,m[n.AND]=new S,m[n.NOT]=new S,m[n.BKR]=new S,m[n.BKA]=new S,m[n.BKN]=new S,m[n.ABG]=new S,m[n.AEN]=new S,b.length=0;for(let M=0;M<a.length;M+=1)b.push({empty:0,match:0,nomatch:0,total:0,name:a[M].name,lower:a[M].lower,index:a[M].index});if(l.length>0){g.length=0;for(let M=0;M<l.length;M+=1)g.push({empty:0,match:0,nomatch:0,total:0,name:l[M].name,lower:l[M].lower,index:l[M].index})}}()},this.collect=function(B,D){x(f,D.state,D.phraseLength),x(m[B.type],D.state,D.phraseLength),B.type===n.RNM&&x(b[B.index],D.state,D.phraseLength),B.type===n.UDT&&x(g[B.index],D.state,D.phraseLength)},this.toHtml=function(B,D){let M="";for(M+=`<table class="${i.CLASS_STATS}">
`,typeof D=="string"&&(M+=`<caption>${D}</caption>
`),M+=`<tr><th class="${i.CLASS_ACTIVE}">ops</th>
`,M+=`<th class="${i.CLASS_EMPTY}">EMPTY</th>
`,M+=`<th class="${i.CLASS_MATCH}">MATCH</th>
`,M+=`<th class="${i.CLASS_NOMATCH}">NOMATCH</th>
`,M+=`<th class="${i.CLASS_ACTIVE}">totals</th></tr>
`;;){if(B===void 0){M+=C();break}if(B===null){M+=C();break}if(B==="ops"){M+=C();break}if(B==="index"){b.sort(y),g.length>0&&g.sort(y),M+=C(),M+=I();break}if(B==="hits"){b.sort(_),g.length>0&&g.sort(y),M+=C(),M+=I();break}if(B==="alpha"){b.sort(w),g.length>0&&g.sort(w),M+=C(),M+=I();break}break}return M+=`</table>
`,M},this.toHtmlPage=function(B,D,M){return s.htmlToPage(this.toHtml(B,D),M)}}},{"./identifiers":10,"./style":14,"./utilities":16}],14:[function(e,t,r){t.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}},{}],15:[function(e,t,r){t.exports=function(){let n=e("./utilities"),s=e("./style"),i=new(e("./circular-buffer")),a=e("./identifiers"),l=this,m=16,f=80,b=[],g=5e3,w=-1,_=0,y=0,S=[],x=null,E=null,C=null,I=[],B=[],D=`<span class="${s.CLASS_LINEEND}">&bull;</span>`,M=`<span class="${s.CLASS_LINEEND}">&hellip;</span>`,ee=`<span class="${s.CLASS_EMPTY}">&#120634;</span>`;this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(V,H){w=-1,typeof V=="number"&&V>0?(g=Math.ceil(V),typeof H=="number"&&(w=Math.floor(H),w<0&&(w=-1))):g=0},this.getMaxRecords=function(){return g},this.getLastRecord=function(){return w},this.init=function(V,H,O){b.length=0,S.length=0,_=0,y=0,x=O,E=V,C=H,function(){let P=o(function(N){I[a.ALT]=N,I[a.CAT]=N,I[a.REP]=N,I[a.TLS]=N,I[a.TBS]=N,I[a.TRG]=N,I[a.AND]=N,I[a.NOT]=N,I[a.BKR]=N,I[a.BKA]=N,I[a.BKN]=N,I[a.ABG]=N,I[a.AEN]=N},"e"),U=0;for(let N in l.filter.operators)U+=1;if(U!==0){for(let N in l.filter.operators){let Z=N.toUpperCase();if(Z==="<ALL>")return void P(!0);if(Z==="<NONE>")return void P(!1)}P(!1);for(let N in l.filter.operators){let Z=N.toUpperCase();if(Z==="ALT")I[a.ALT]=l.filter.operators[N]===!0;else if(Z==="CAT")I[a.CAT]=l.filter.operators[N]===!0;else if(Z==="REP")I[a.REP]=l.filter.operators[N]===!0;else if(Z==="AND")I[a.AND]=l.filter.operators[N]===!0;else if(Z==="NOT")I[a.NOT]=l.filter.operators[N]===!0;else if(Z==="TLS")I[a.TLS]=l.filter.operators[N]===!0;else if(Z==="TBS")I[a.TBS]=l.filter.operators[N]===!0;else if(Z==="TRG")I[a.TRG]=l.filter.operators[N]===!0;else if(Z==="BKR")I[a.BKR]=l.filter.operators[N]===!0;else if(Z==="BKA")I[a.BKA]=l.filter.operators[N]===!0;else if(Z==="BKN")I[a.BKN]=l.filter.operators[N]===!0;else if(Z==="ABG")I[a.ABG]=l.filter.operators[N]===!0;else{if(Z!=="AEN")throw new Error(`trace.js: initOpratorFilter: '${N}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`);I[a.AEN]=l.filter.operators[N]===!0}}}else P(!1)}(),function(){let P=o(function(K){I[a.RNM]=K,I[a.UDT]=K;let pe=E.length+C.length;B.length=0;for(let te=0;te<pe;te+=1)B.push(K)},"e"),U,N,Z=[];for(N=0;N<E.length;N+=1)Z.push(E[N].lower);for(N=0;N<C.length;N+=1)Z.push(C[N].lower);B.length=0,U=0;for(let K in l.filter.rules)U+=1;if(U!==0){for(let K in l.filter.rules){let pe=K.toLowerCase();if(pe==="<all>")return void P(!0);if(pe==="<none>")return void P(!1)}P(!1),I[a.RNM]=!0,I[a.UDT]=!0;for(let K in l.filter.rules){let pe=K.toLowerCase();if(N=Z.indexOf(pe),N<0)throw new Error(`trace.js: initRuleFilter: '${K}' not a valid rule or udt name`);B[N]=l.filter.rules[K]===!0}}else P(!0)}(),i.init(g)};let W=o(function(V){let H=!1;return H=V.type===a.RNM?!(!I[V.type]||!B[V.index]):V.type===a.UDT?!(!I[V.type]||!B[E.length+V.index]):I[V.type],H},"y"),J=o(function(V){return w===-1||V<=w},"C");this.down=function(V,H,O,P,U,N){J(_)&&W(V)&&(S.push(_),b[i.increment()]={dirUp:!1,depth:y,thisLine:_,thatLine:void 0,opcode:V,state:H,phraseIndex:O,phraseLength:P,lookAnchor:U,lookAround:N},_+=1,y+=1)},this.up=function(V,H,O,P,U,N){if(J(_)&&W(V)){let Z=_,K=S.pop(),pe=i.getListIndex(K);pe!==-1&&(b[pe].thatLine=Z),y-=1,b[i.increment()]={dirUp:!0,depth:y,thisLine:Z,thatLine:K,opcode:V,state:H,phraseIndex:O,phraseLength:P,lookAnchor:U,lookAround:N},_+=1}},this.toTree=function(V){let H=function(){function O(R,v){let F,Y,q;if(v)switch(R.op={id:v.type,name:n.opcodeToString(v.type)},R.opData=void 0,v.type){case a.RNM:R.opData=E[v.index].name;break;case a.UDT:R.opData=C[v.index].name;break;case a.BKR:F=v.index<E.length?E[v.index].name:C[v.index-E.length].name,Y=v.bkrCase===a.BKR_MODE_CI?"%i":"%s",q=v.bkrMode===a.BKR_MODE_UM?"%u":"%p",R.opData=`\\\\${Y}${q}${F}`;break;case a.TLS:R.opData=[];for(let ne=0;ne<v.string.length;ne+=1)R.opData.push(v.string[ne]);break;case a.TBS:R.opData=[];for(let ne=0;ne<v.string.length;ne+=1)R.opData.push(v.string[ne]);break;case a.TRG:case a.REP:R.opData=[v.min,v.max];break;default:throw new Error("unrecognized opcode")}else R.op={id:void 0,name:void 0},R.opData=void 0}o(O,"e");function P(R,v,F){return R===a.MATCH?{index:v,length:F}:R===a.NOMATCH||R===a.EMPTY?{index:v,length:0}:null}o(P,"n");let U=-1;function N(R,v,F){let Y={id:U++,branch:-1,parent:R,up:!1,down:!1,depth:F,children:[]};return v?(Y.down=!0,Y.state={id:v.state,name:n.stateToString(v.state)},Y.phrase=null,O(Y,v.opcode)):(Y.state={id:void 0,name:void 0},Y.phrase=P(),O(Y,void 0)),Y}o(N,"s");function Z(R,v){v&&(R.up=!0,R.state={id:v.state,name:n.stateToString(v.state)},R.phrase=P(v.state,v.phraseIndex,v.phraseLength),R.down||O(R,v.opcode))}o(Z,"i");let K=0,pe=-1,te=1,ae=[],re,ie,ce,$,u=!0,h=N(null,null,-1);for(ae.push(h),ie=h,i.forEach(R=>{if($=b[R],u&&(u=!1,$.depth>0)){let v=$.dirUp?$.depth+1:$.depth;for(let F=0;F<v;F+=1)ce=ie,ie=N(ie,null,F),ae.push(ie),ce.children.push(ie)}$.dirUp?(ie=ae.pop(),Z(ie,$),ie=ae[ae.length-1]):(ce=ie,ie=N(ie,$,$.depth),ae.push(ie),ce.children.push(ie))});ae.length>1;)ie=ae.pop(),Z(ie,null);if(h.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(ae.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");re=h.children[0];let A=re;for(;re&&!re.down&&!re.up;)A=re,re=re.children[0];re=A,re.leftMost=!0,re.rightMost=!0,o(function R(v){if(pe+=1,v.branch=te,pe>y&&(y=pe),v.children.length===0)K+=1;else for(let F=0;F<v.children.length;F+=1)F>0&&(te+=1),v.children[F].leftMost=!1,v.children[F].rightMost=!1,v.leftMost&&(v.children[F].leftMost=F===0),v.rightMost&&(v.children[F].rightMost=F===v.children.length-1),R(v.children[F]);pe-=1},"e")(re),re.branch=0;let k={string:[]};for(let R=0;R<x.length;R+=1)k.string[R]=x[R];k.rules=[];for(let R=0;R<E.length;R+=1)k.rules[R]=E[R].name;k.udts=[];for(let R=0;R<C.length;R+=1)k.udts[R]=C[R].name;let L;return k.id={},k.id.ALT={id:a.ALT,name:"ALT"},k.id.CAT={id:a.CAT,name:"CAT"},k.id.REP={id:a.REP,name:"REP"},k.id.RNM={id:a.RNM,name:"RNM"},k.id.TLS={id:a.TLS,name:"TLS"},k.id.TBS={id:a.TBS,name:"TBS"},k.id.TRG={id:a.TRG,name:"TRG"},k.id.UDT={id:a.UDT,name:"UDT"},k.id.AND={id:a.AND,name:"AND"},k.id.NOT={id:a.NOT,name:"NOT"},k.id.BKR={id:a.BKR,name:"BKR"},k.id.BKA={id:a.BKA,name:"BKA"},k.id.BKN={id:a.BKN,name:"BKN"},k.id.ABG={id:a.ABG,name:"ABG"},k.id.AEN={id:a.AEN,name:"AEN"},k.id.ACTIVE={id:a.ACTIVE,name:"ACTIVE"},k.id.MATCH={id:a.MATCH,name:"MATCH"},k.id.EMPTY={id:a.EMPTY,name:"EMPTY"},k.id.NOMATCH={id:a.NOMATCH,name:"NOMATCH"},k.treeDepth=y,k.leafNodes=K,L=re.down?re.up?"none":"right":re.up?"left":"both",k.branchesIncomplete=L,k.tree=o(function R(v,F){let Y,q={};if(q.id=v.id,q.branch=v.branch,q.leftMost=v.leftMost,q.rightMost=v.rightMost,Y=v.state.name?v.state.name:"ACTIVE",q.state={id:v.state.id,name:Y},Y=v.op.name?v.op.name:"?",q.op={id:v.op.id,name:Y},typeof v.opData=="string")q.opData=v.opData;else if(Array.isArray(v.opData)){q.opData=[];for(let ne=0;ne<v.opData.length;ne+=1)q.opData[ne]=v.opData[ne]}else q.opData=void 0;v.phrase?q.phrase={index:v.phrase.index,length:v.phrase.length}:q.phrase=null,q.depth=v.depth,q.children=[];for(let ne=0;ne<v.children.length;ne+=1)v.children.length,q.children[ne]=R(v.children[ne],F);return q},"e")(re,re.depth),k}();return V?JSON.stringify(H):H},this.toHtmlPage=function(V,H,O){return n.htmlToPage(this.toHtml(V,H),O)},this.indent=function(V){let H="";for(let O=0;O<V;O+=1)H+=".";return H};let Se=o(function(V,H,O,P,U){if(P===0)return"";let N="",Z=U?",":"";switch(V){case m:N=Z+n.charsToHex(H,O,P);break;case 10:if(U)return`,${n.charsToDec(H,O,P)}`;N=Z+n.charsToDec(H,O,P);break;case 32:N=n.charsToUnicode(H,O,P);break;case 8:default:N=n.charsToAsciiHtml(H,O,P)}return N},"S"),oe=o(function(V,H,O,P,U,N){let Z,K,pe,te,ae="",re=D,ie=`<span class="${s.CLASS_REMAINDER}">`,ce="</span>",$=!1;switch(O){case a.EMPTY:ae+=ee;case a.NOMATCH:case a.ACTIVE:Z=P,K=0,pe=P,te=H.length-pe;break;case a.MATCH:Z=P,K=U,pe=P+K,te=H.length-pe;break;default:throw new Error("unrecognized state")}return re=D,K>f?(K=f,re=M,te=0):K+te>f&&(re=M,te=f-K),K>0&&(ae+=N,ae+=Se(V,H,Z,K,$),ae+=ce,$=!0),te>0&&(ae+=ie,ae+=Se(V,H,pe,te,$),ae+=ce),ae+re},"L"),se=o(function(V){if(E===null)return"";let H,O,P,U,N,Z,K="";return K+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",K+=`<th>operator</th><th>phrase</th></tr>
`,i.forEach(pe=>{let te=b[pe];switch(H=te.thisLine,O=te.thatLine!==void 0?te.thatLine:"--",P=!1,U=!1,N=!1,te.lookAround===a.LOOKAROUND_AHEAD&&(P=!0,N=!0,Z=te.lookAnchor),te.opcode.type!==a.AND&&te.opcode.type!==a.NOT||(P=!0,N=!0,Z=te.phraseIndex),te.lookAround===a.LOOKAROUND_BEHIND&&(U=!0,N=!0,Z=te.lookAnchor),te.opcode.type!==a.BKA&&te.opcode.type!==a.BKN||(U=!0,N=!0,Z=te.phraseIndex),K+="<tr>",K+=`<td>${H}</td><td>${O}</td>`,K+=`<td>${te.phraseIndex}</td>`,K+=`<td>${te.phraseLength}</td>`,K+=`<td>${te.depth}</td>`,K+="<td>",te.state){case a.ACTIVE:K+=`<span class="${s.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case a.MATCH:K+=`<span class="${s.CLASS_MATCH}">&uarr;M</span>`;break;case a.NOMATCH:K+=`<span class="${s.CLASS_NOMATCH}">&uarr;N</span>`;break;case a.EMPTY:K+=`<span class="${s.CLASS_EMPTY}">&uarr;E</span>`;break;default:K+=`<span class="${s.CLASS_ACTIVE}">--</span>`}if(K+="</td>",K+="<td>",K+=l.indent(te.depth),P?K+=`<span class="${s.CLASS_LOOKAHEAD}">`:U&&(K+=`<span class="${s.CLASS_LOOKBEHIND}">`),K+=n.opcodeToString(te.opcode.type),te.opcode.type===a.RNM&&(K+=`(${E[te.opcode.index].name}) `),te.opcode.type===a.BKR){let ae=te.opcode.bkrCase===a.BKR_MODE_CI?"%i":"%s",re=te.opcode.bkrMode===a.BKR_MODE_UM?"%u":"%p";K+=`(\\${ae}${re}${E[te.opcode.index].name}) `}te.opcode.type===a.UDT&&(K+=`(${C[te.opcode.index].name}) `),te.opcode.type===a.TRG&&(K+=`(${function(ae,re){let ie="";if(re.type===a.TRG)if(ae===m||ae===32){let ce=re.min.toString(16).toUpperCase();ce.length%2!=0&&(ce=`0${ce}`),ie+=ae===m?"%x":"U+",ie+=ce,ce=re.max.toString(16).toUpperCase(),ce.length%2!=0&&(ce=`0${ce}`),ie+=`&ndash;${ce}`}else ie=`%d${re.min.toString(10)}&ndash;${re.max.toString(10)}`;return ie}(V,te.opcode)}) `),te.opcode.type===a.TBS&&(K+=`(${function(ae,re){let ie="";if(re.type===a.TBS){let ce=Math.min(re.string.length,10);if(ae===m||ae===32){ie+=ae===m?"%x":"U+";for(let $=0;$<ce;$+=1){let u;$>0&&(ie+="."),u=re.string[$].toString(16).toUpperCase(),u.length%2!=0&&(u=`0${u}`),ie+=u}}else{ie="%d";for(let $=0;$<ce;$+=1)$>0&&(ie+="."),ie+=re.string[$].toString(10)}ce<re.string.length&&(ie+=M)}return ie}(V,te.opcode)}) `),te.opcode.type===a.TLS&&(K+=`(${function(ae,re){let ie="";if(re.type===a.TLS){let ce=Math.min(re.string.length,5);if(ae===m||ae===10){let $,u,h;ae===m?(ie="%x",h=16):(ie="%d",h=10);for(let A=0;A<ce;A+=1)A>0&&(ie+="."),u=re.string[A],u>=97&&u<=122?($=u-32,ie+=`${$.toString(h)}/${u.toString(h)}`.toUpperCase()):u>=65&&u<=90?($=u,u+=32,ie+=`${$.toString(h)}/${u.toString(h)}`.toUpperCase()):ie+=u.toString(h).toUpperCase();ce<re.string.length&&(ie+=M)}else{ie='"';for(let $=0;$<ce;$+=1)ie+=n.asciiChars[re.string[$]];ce<re.string.length&&(ie+=M),ie+='"'}}return ie}(V,te.opcode)}) `),te.opcode.type===a.REP&&(K+=`(${function(ae,re){let ie="";if(re.type===a.REP)if(ae===m){let ce=re.min.toString(16).toUpperCase();ce.length%2!=0&&(ce=`0${ce}`),ie=`x${ce}`,re.max<1/0?(ce=re.max.toString(16).toUpperCase(),ce.length%2!=0&&(ce=`0${ce}`)):ce="inf",ie+=`&ndash;${ce}`}else ie=re.max<1/0?`${re.min.toString(10)}&ndash;${re.max.toString(10)}`:`${re.min.toString(10)}&ndash;inf`;return ie}(V,te.opcode)}) `),N&&(K+="</span>"),K+="</td>",K+="<td>",K+=U?function(ae,re,ie,ce,$,u){let h,A,k,L,R="",v=D,F=`<span class="${s.CLASS_LOOKBEHIND}">`,Y=`<span class="${s.CLASS_REMAINDER}">`,q="</span>",ne=!1;switch(ie){case a.EMPTY:R+=ee;case a.NOMATCH:case a.MATCH:case a.ACTIVE:h=ce-$,A=u-h,k=u,L=re.length-k;break;default:throw new Error("unrecognized state")}return v=D,A>f?(A=f,v=M,L=0):A+L>f&&(v=M,L=f-A),A>0&&(R+=F,R+=Se(ae,re,h,A,ne),R+=q,ne=!0),L>0&&(R+=Y,R+=Se(ae,re,k,L,ne),R+=q),R+v}(V,x,te.state,te.phraseIndex,te.phraseLength,Z):P?function(ae,re,ie,ce,$){let u=`<span class="${s.CLASS_LOOKAHEAD}">`;return oe(ae,re,ie,ce,$,u)}(V,x,te.state,te.phraseIndex,te.phraseLength):function(ae,re,ie,ce,$){let u=`<span class="${s.CLASS_MATCH}">`;return oe(ae,re,ie,ce,$,u)}(V,x,te.state,te.phraseIndex,te.phraseLength),K+=`</td></tr>
`}),K+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",K+=`<th>operator</th><th>phrase</th></tr>
`,K+=`</table>
`,K},"M");this.toHtml=function(V,H){let O=8;if(typeof V=="string"&&V.length>=3){let U=V.toLowerCase().slice(0,3);U==="hex"?O=m:U==="dec"?O=10:U==="uni"&&(O=32)}let P="";return P+=function(U,N){let Z;switch(U){case m:Z="hexadecimal";break;case 10:Z="decimal";break;case 8:Z="ASCII";break;case 32:Z="UNICODE";break;default:throw new Error(`trace.js: htmlHeader: unrecognized mode: ${U}`)}let K="";return K+=`<p>display mode: ${Z}</p>
`,K+=`<table class="${s.CLASS_TRACE}">
`,typeof N=="string"&&(K+=`<caption>${N}</caption>`),K}(O,H),P+=se(O),P+=function(){let U="";return U+=`</table>
`,U+=`<p class="${s.CLASS_MONOSPACE}">legend:<br>
`,U+=`(a)&nbsp;-&nbsp;line number<br>
`,U+=`(b)&nbsp;-&nbsp;matching line number<br>
`,U+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,U+=`(d)&nbsp;-&nbsp;phrase length<br>
`,U+=`(e)&nbsp;-&nbsp;tree depth<br>
`,U+=`(f)&nbsp;-&nbsp;operator state<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,U+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,U+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to 80 characters of the phrase being matched<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_MATCH}">matched characters</span><br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ee} empty string<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${D} end of input string<br>
`,U+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${M} input string display truncated<br>
`,U+=`</p>
`,U+=`<p class="${s.CLASS_MONOSPACE}">
`,U+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,U+=`ALT - alternation<br>
`,U+=`CAT - concatenation<br>
`,U+=`REP - repetition<br>
`,U+=`RNM - rule name<br>
`,U+=`TRG - terminal range<br>
`,U+=`TLS - terminal literal string (case insensitive)<br>
`,U+=`TBS - terminal binary string (case sensitive)<br>
`,U+=`<br>
`,U+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,U+=`UDT - user-defined terminal<br>
`,U+=`AND - positive look ahead<br>
`,U+=`NOT - negative look ahead<br>
`,U+=`BKA - positive look behind<br>
`,U+=`BKN - negative look behind<br>
`,U+=`BKR - back reference<br>
`,U+=`ABG - anchor - begin of input string<br>
`,U+=`AEN - anchor - end of input string<br>
`,U+=`</p>
`,U}(),P}}},{"./circular-buffer":8,"./identifiers":10,"./style":14,"./utilities":16}],16:[function(e,t,r){let n=e("./style"),s=e("../apg-conv-api/converter"),i=e("./emitcss"),a=e("./identifiers"),l=this,m=o(function(f,b,g){let w,_=b;for(;;){if(f<=0){_=0,w=0;break}if(typeof _!="number"){_=0,w=f;break}if(_>=f){_=f,w=f;break}if(typeof g!="number"){w=f;break}if(w=_+g,w>f){w=f;break}break}return{beg:_,end:w}},"h");r.htmlToPage=function(f,b){let g;if(typeof f!="string")throw new Error("utilities.js: htmlToPage: input HTML is not a string");g=typeof b!="string"?"htmlToPage":b;let w="";return w+=`<!DOCTYPE html>
`,w+=`<html lang="en">
`,w+=`<head>
`,w+=`<meta charset="utf-8">
`,w+=`<title>${g}</title>
`,w+=`<style>
`,w+=i(),w+=`</style>
`,w+=`</head>
<body>
`,w+=`<p>${new Date}</p>
`,w+=f,w+=`</body>
</html>
`,w},r.parserResultToHtml=function(f,b){let g,w,_=null;typeof b=="string"&&b!==""&&(_=b),g=f.success===!0?`<span class="${n.CLASS_MATCH}">true</span>`:`<span class="${n.CLASS_NOMATCH}">false</span>`,w=f.state===a.EMPTY?`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:f.state===a.MATCH?`<span class="${n.CLASS_MATCH}">MATCH</span>`:f.state===a.NOMATCH?`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let y="";return y+=`<table class="${n.CLASS_STATE}">
`,_&&(y+=`<caption>${_}</caption>
`),y+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,y+=`<tr><td>parser success</td><td>${g}</td>
`,y+=`<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,
`,y+=` <span class="${n.CLASS_NOMATCH}">false</span> otherwise`,y+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,y+=`<tr><td>parser state</td><td>${w}</td>
`,y+=`<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, `,y+=`<span class="${n.CLASS_MATCH}">MATCH</span> or 
`,y+=`<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,y+=`<tr><td>string length</td><td>${f.length}</td><td>length of the input (sub)string</td></tr>
`,y+=`<tr><td>matched length</td><td>${f.matched}</td><td>number of input string characters matched</td></tr>
`,y+=`<tr><td>max matched</td><td>${f.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,y+=`<tr><td>max tree depth</td><td>${f.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,y+=`<tr><td>node hits</td><td>${f.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,y+=`<tr><td>input length</td><td>${f.inputLength}</td><td>length of full input string</td></tr>
`,y+=`<tr><td>sub-string begin</td><td>${f.subBegin}</td><td>sub-string first character index</td></tr>
`,y+=`<tr><td>sub-string end</td><td>${f.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,y+=`<tr><td>sub-string length</td><td>${f.subLength}</td><td>sub-string length</td></tr>
`,y+=`</table>
`,y},r.charsToString=function(f,b,g){let w,_;if(typeof b=="number"){if(b>=f.length)return"";w=b<0?0:b}else w=0;if(typeof g=="number"){if(g<=0)return"";_=g>f.length-w?f.length:w+g}else _=f.length;return w<_?s.encode("UTF16LE",f.slice(w,_)).toString("utf16le"):""},r.stringToChars=function(f){return s.decode("STRING",f)},r.opcodeToString=function(f){let b="unknown";switch(f){case a.ALT:b="ALT";break;case a.CAT:b="CAT";break;case a.RNM:b="RNM";break;case a.UDT:b="UDT";break;case a.AND:b="AND";break;case a.NOT:b="NOT";break;case a.REP:b="REP";break;case a.TRG:b="TRG";break;case a.TBS:b="TBS";break;case a.TLS:b="TLS";break;case a.BKR:b="BKR";break;case a.BKA:b="BKA";break;case a.BKN:b="BKN";break;case a.ABG:b="ABG";break;case a.AEN:b="AEN";break;default:throw new Error("unrecognized opcode")}return b},r.stateToString=function(f){let b="unknown";switch(f){case a.ACTIVE:b="ACTIVE";break;case a.MATCH:b="MATCH";break;case a.EMPTY:b="EMPTY";break;case a.NOMATCH:b="NOMATCH";break;default:throw new Error("unrecognized state")}return b},r.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],r.charToHex=function(f){let b=f.toString(16).toUpperCase();switch(b.length){case 1:case 3:case 7:b=`0${b}`;break;case 2:case 6:b=`00${b}`;break;case 4:break;case 5:b=`000${b}`;break;default:throw new Error("unrecognized option")}return b},r.charsToDec=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToDec: input must be an array of integers");let _=m(f.length,b,g);if(_.end>_.beg){w+=f[_.beg];for(let y=_.beg+1;y<_.end;y+=1)w+=`,${f[y]}`}return w},r.charsToHex=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToHex: input must be an array of integers");let _=m(f.length,b,g);if(_.end>_.beg){w+=`\\x${l.charToHex(f[_.beg])}`;for(let y=_.beg+1;y<_.end;y+=1)w+=`,\\x${l.charToHex(f[y])}`}return w},r.charsToHtmlEntities=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToHex: input must be an array of integers");let _=m(f.length,b,g);if(_.end>_.beg)for(let y=_.beg;y<_.end;y+=1)w+=`&#x${f[y].toString(16)};`;return w},r.charsToUnicode=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToUnicode: input must be an array of integers");let _=m(f.length,b,g);if(_.end>_.beg)for(let S=_.beg;S<_.end;S+=1)w+=(y=f[S])>=55296&&y<=57343||y>1114111?` U+${l.charToHex(f[S])}`:`&#${f[S]};`;var y;return w},r.charsToJsUnicode=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToJsUnicode: input must be an array of integers");let _=m(f.length,b,g);if(_.end>_.beg){w+=`\\u${l.charToHex(f[_.beg])}`;for(let y=_.beg+1;y<_.end;y+=1)w+=`,\\u${l.charToHex(f[y])}`}return w},r.charsToAscii=function(f,b,g){let w="";if(!Array.isArray(f))throw new Error("utilities.js: charsToAscii: input must be an array of integers");let _=m(f.length,b,g);for(let y=_.beg;y<_.end;y+=1){let S=f[y];w+=S>=32&&S<=126?String.fromCharCode(S):`\\x${l.charToHex(S)}`}return w},r.charsToAsciiHtml=function(f,b,g){if(!Array.isArray(f))throw new Error("utilities.js: charsToAsciiHtml: input must be an array of integers");let w,_="",y=m(f.length,b,g);for(let S=y.beg;S<y.end;S+=1)w=f[S],_+=w<32||w===127?`<span class="${n.CLASS_CTRLCHAR}">${l.asciiChars[w]}</span>`:w>127?`<span class="${n.CLASS_CTRLCHAR}">U+${l.charToHex(w)}</span>`:l.asciiChars[w];return _},r.stringToAsciiHtml=function(f){let b=s.decode("STRING",f);return this.charsToAsciiHtml(b)}},{"../apg-conv-api/converter":4,"./emitcss":9,"./identifiers":10,"./style":14}],17:[function(e,t,r){globalThis.apgLib=e("./node-exports"),globalThis.apgConvApi=e("../apg-conv-api/node-exports")},{"../apg-conv-api/node-exports":5,"./node-exports":11}]},{},[17]);d();p();function ci(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"sign-in-with-ethereum",lower:"sign-in-with-ethereum",index:65,isBkr:!1},e.rules[66]={name:"message-domain",lower:"message-domain",index:66,isBkr:!1},e.rules[67]={name:"message-address",lower:"message-address",index:67,isBkr:!1},e.rules[68]={name:"message-statement",lower:"message-statement",index:68,isBkr:!1},e.rules[69]={name:"message-uri",lower:"message-uri",index:69,isBkr:!1},e.rules[70]={name:"message-version",lower:"message-version",index:70,isBkr:!1},e.rules[71]={name:"message-chain-id",lower:"message-chain-id",index:71,isBkr:!1},e.rules[72]={name:"message-nonce",lower:"message-nonce",index:72,isBkr:!1},e.rules[73]={name:"message-issued-at",lower:"message-issued-at",index:73,isBkr:!1},e.rules[74]={name:"message-expiration-time",lower:"message-expiration-time",index:74,isBkr:!1},e.rules[75]={name:"message-not-before",lower:"message-not-before",index:75,isBkr:!1},e.rules[76]={name:"message-request-id",lower:"message-request-id",index:76,isBkr:!1},e.rules[77]={name:"message-resources",lower:"message-resources",index:77,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[65].opcodes[1]={type:4,index:66},e.rules[65].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,69,116,104,101,114,101,117,109,32,97,99,99,111,117,110,116,58]},e.rules[65].opcodes[3]={type:4,index:10},e.rules[65].opcodes[4]={type:4,index:67},e.rules[65].opcodes[5]={type:4,index:10},e.rules[65].opcodes[6]={type:4,index:10},e.rules[65].opcodes[7]={type:3,min:0,max:1},e.rules[65].opcodes[8]={type:2,children:[9,10]},e.rules[65].opcodes[9]={type:4,index:68},e.rules[65].opcodes[10]={type:4,index:10},e.rules[65].opcodes[11]={type:4,index:10},e.rules[65].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[65].opcodes[13]={type:4,index:69},e.rules[65].opcodes[14]={type:4,index:10},e.rules[65].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[65].opcodes[16]={type:4,index:70},e.rules[65].opcodes[17]={type:4,index:10},e.rules[65].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[65].opcodes[19]={type:4,index:71},e.rules[65].opcodes[20]={type:4,index:10},e.rules[65].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[65].opcodes[22]={type:4,index:72},e.rules[65].opcodes[23]={type:4,index:10},e.rules[65].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[65].opcodes[25]={type:4,index:73},e.rules[65].opcodes[26]={type:3,min:0,max:1},e.rules[65].opcodes[27]={type:2,children:[28,29,30]},e.rules[65].opcodes[28]={type:4,index:10},e.rules[65].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[65].opcodes[30]={type:4,index:74},e.rules[65].opcodes[31]={type:3,min:0,max:1},e.rules[65].opcodes[32]={type:2,children:[33,34,35]},e.rules[65].opcodes[33]={type:4,index:10},e.rules[65].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[65].opcodes[35]={type:4,index:75},e.rules[65].opcodes[36]={type:3,min:0,max:1},e.rules[65].opcodes[37]={type:2,children:[38,39,40]},e.rules[65].opcodes[38]={type:4,index:10},e.rules[65].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[65].opcodes[40]={type:4,index:76},e.rules[65].opcodes[41]={type:3,min:0,max:1},e.rules[65].opcodes[42]={type:2,children:[43,44,45]},e.rules[65].opcodes[43]={type:4,index:10},e.rules[65].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[65].opcodes[45]={type:4,index:77},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:4,index:36},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:2,children:[1,2]},e.rules[67].opcodes[1]={type:7,string:[48,120]},e.rules[67].opcodes[2]={type:3,min:40,max:40},e.rules[67].opcodes[3]={type:4,index:8},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:3,min:1,max:1/0},e.rules[68].opcodes[1]={type:1,children:[2,3,4]},e.rules[68].opcodes[2]={type:4,index:62},e.rules[68].opcodes[3]={type:4,index:61},e.rules[68].opcodes[4]={type:7,string:[32]},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:4,index:29},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:7,string:[49]},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:3,min:1,max:1/0},e.rules[71].opcodes[1]={type:4,index:6},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:3,min:8,max:1/0},e.rules[72].opcodes[1]={type:1,children:[2,3]},e.rules[72].opcodes[2]={type:4,index:0},e.rules[72].opcodes[3]={type:4,index:6},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:4,index:28},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:4,index:28},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:4,index:28},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:3,min:0,max:1/0},e.rules[76].opcodes[1]={type:4,index:57},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:3,min:0,max:1/0},e.rules[77].opcodes[1]={type:2,children:[2,3,4]},e.rules[77].opcodes[2]={type:4,index:10},e.rules[77].opcodes[3]={type:7,string:[45,32]},e.rules[77].opcodes[4]={type:4,index:29},e.toString=o(function(){let r="";return r+=`; ==============================================================================
`,r+=`; Core rules for ABNF (RFC 5234)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,r+=`
`,r+=`ALPHA          =  %x41-5A / %x61-7A
`,r+=`               ; A-Z / a-z
`,r+=`
`,r+=`BIT            =  "0" / "1"
`,r+=`
`,r+=`CHAR           =  %x01-7F
`,r+=`               ; any 7-bit US-ASCII character,
`,r+=`               ;  excluding NUL
`,r+=`
`,r+=`CR             =  %x0D
`,r+=`               ; carriage return
`,r+=`
`,r+=`CRLF           =  CR LF
`,r+=`               ; Internet standard newline
`,r+=`
`,r+=`CTL            =  %x00-1F / %x7F
`,r+=`               ; controls
`,r+=`
`,r+=`DIGIT          =  %x30-39
`,r+=`               ; 0-9
`,r+=`
`,r+=`DQUOTE         =  %x22
`,r+=`               ; " (Double Quote)
`,r+=`
`,r+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,r+=`
`,r+=`HTAB           =  %x09
`,r+=`               ; horizontal tab
`,r+=`
`,r+=`LF             =  %x0A
`,r+=`               ; linefeed
`,r+=`
`,r+=`LWSP           =  *(WSP / CRLF WSP)
`,r+=`               ; Use of this linear-white-space rule
`,r+=`               ;  permits lines containing only white
`,r+=`               ;  space that are no longer legal in
`,r+=`               ;  mail headers and have caused
`,r+=`               ;  interoperability problems in other
`,r+=`               ;  contexts.
`,r+=`               ; Do not use when defining mail
`,r+=`               ;  headers and use with caution in
`,r+=`               ;  other contexts.
`,r+=`
`,r+=`OCTET          =  %x00-FF
`,r+=`               ; 8 bits of data
`,r+=`
`,r+=`SP             =  %x20
`,r+=`
`,r+=`VCHAR          =  %x21-7E
`,r+=`               ; visible (printing) characters
`,r+=`
`,r+=`WSP            =  SP / HTAB
`,r+=`               ; white space
`,r+=`; ==============================================================================
`,r+=`; Internet Date/Time Format (RFC 3339)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,r+=`
`,r+=`date-fullyear   = 4DIGIT
`,r+=`
`,r+=`date-month      = 2DIGIT  ; 01-12
`,r+=`
`,r+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,r+=`                          ; month/year
`,r+=`
`,r+=`time-hour       = 2DIGIT  ; 00-23
`,r+=`
`,r+=`time-minute     = 2DIGIT  ; 00-59
`,r+=`
`,r+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,r+=`                          ; rules
`,r+=`
`,r+=`time-secfrac    = "." 1*DIGIT
`,r+=`
`,r+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,r+=`
`,r+=`time-offset     = "Z" / time-numoffset
`,r+=`
`,r+=`partial-time    = time-hour ":" time-minute ":" time-second
`,r+=`                  [time-secfrac]
`,r+=`
`,r+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,r+=`
`,r+=`full-time       = partial-time time-offset
`,r+=`
`,r+=`date-time       = full-date "T" full-time
`,r+=`; ==============================================================================
`,r+=`; Uniform Resource Identifier (RFC 3986)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,r+=`
`,r+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`hier-part     = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-rootless
`,r+=`              / path-empty
`,r+=`
`,r+=`URI-reference = URI / relative-ref
`,r+=`
`,r+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,r+=`
`,r+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`relative-part = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-noscheme
`,r+=`              / path-empty
`,r+=`
`,r+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,r+=`
`,r+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,r+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,r+=`host          = IP-literal / IPv4address / reg-name
`,r+=`port          = *DIGIT
`,r+=`
`,r+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,r+=`
`,r+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,r+=`
`,r+=`IPv6address   =                            6( h16 ":" ) ls32
`,r+=`              /                       "::" 5( h16 ":" ) ls32
`,r+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,r+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,r+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,r+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,r+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,r+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,r+=`              / [ *6( h16 ":" ) h16 ] "::"
`,r+=`
`,r+=`h16           = 1*4HEXDIG
`,r+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,r+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,r+=`dec-octet     = DIGIT                 ; 0-9
`,r+=`              / %x31-39 DIGIT         ; 10-99
`,r+=`              / "1" 2DIGIT            ; 100-199
`,r+=`              / "2" %x30-34 DIGIT     ; 200-249
`,r+=`              / "25" %x30-35          ; 250-255
`,r+=`
`,r+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,r+=`
`,r+=`path          = path-abempty    ; begins with "/" or is empty
`,r+=`              / path-absolute   ; begins with "/" but not "//"
`,r+=`              / path-noscheme   ; begins with a non-colon segment
`,r+=`              / path-rootless   ; begins with a segment
`,r+=`              / path-empty      ; zero characters
`,r+=`
`,r+=`path-abempty  = *( "/" segment )
`,r+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,r+=`path-noscheme = segment-nz-nc *( "/" segment )
`,r+=`path-rootless = segment-nz *( "/" segment )
`,r+=`path-empty    = 0pchar
`,r+=`
`,r+=`segment       = *pchar
`,r+=`segment-nz    = 1*pchar
`,r+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,r+=`; non-zero-length segment without any colon ":"
`,r+=`
`,r+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,r+=`
`,r+=`query         = *( pchar / "/" / "?" )
`,r+=`
`,r+=`fragment      = *( pchar / "/" / "?" )
`,r+=`
`,r+=`pct-encoded   = "%" HEXDIG HEXDIG
`,r+=`
`,r+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,r+=`reserved      = gen-delims / sub-delims
`,r+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,r+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,r+=`              / "*" / "+" / "," / ";" / "="
`,r+=`; ==============================================================================
`,r+=`; Sign in with Ethereum (EIP-4361)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`; - datetime.bnf
`,r+=`; - uri.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://eips.ethereum.org/EIPS/eip-4361
`,r+=`
`,r+=`sign-in-with-ethereum =
`,r+=`  message-domain %s" wants you to sign in with your Ethereum account:" LF
`,r+=`  message-address LF
`,r+=`  LF
`,r+=`  [ message-statement LF ]
`,r+=`  LF
`,r+=`  %s"URI: " message-uri LF
`,r+=`  %s"Version: " message-version LF
`,r+=`  %s"Chain ID: " message-chain-id LF
`,r+=`  %s"Nonce: " message-nonce LF
`,r+=`  %s"Issued At: " message-issued-at
`,r+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,r+=`  [ LF %s"Not Before: " message-not-before ]
`,r+=`  [ LF %s"Request ID: " message-request-id ]
`,r+=`  [ LF %s"Resources:" message-resources ]
`,r+=`
`,r+=`message-domain          = authority
`,r+=`message-address         = "0x" 40*40HEXDIG
`,r+=`message-statement       = 1*( reserved / unreserved / " " )
`,r+=`message-uri             = URI
`,r+=`message-version         = "1"
`,r+=`message-chain-id        = 1*DIGIT
`,r+=`message-nonce           = 8*( ALPHA / DIGIT )
`,r+=`message-issued-at       = date-time
`,r+=`message-expiration-time = date-time
`,r+=`message-not-before      = date-time
`,r+=`message-request-id      = *pchar
`,r+=`message-resources       = *( LF "- " URI )
`,r},"toString"),e}o(ci,"grammar");d();p();function di(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"sign-in-with-solana",lower:"sign-in-with-solana",index:65,isBkr:!1},e.rules[66]={name:"advanced-fields",lower:"advanced-fields",index:66,isBkr:!1},e.rules[67]={name:"message-domain",lower:"message-domain",index:67,isBkr:!1},e.rules[68]={name:"message-address",lower:"message-address",index:68,isBkr:!1},e.rules[69]={name:"message-statement",lower:"message-statement",index:69,isBkr:!1},e.rules[70]={name:"message-uri",lower:"message-uri",index:70,isBkr:!1},e.rules[71]={name:"message-version",lower:"message-version",index:71,isBkr:!1},e.rules[72]={name:"message-chain-id",lower:"message-chain-id",index:72,isBkr:!1},e.rules[73]={name:"message-nonce",lower:"message-nonce",index:73,isBkr:!1},e.rules[74]={name:"message-issued-at",lower:"message-issued-at",index:74,isBkr:!1},e.rules[75]={name:"message-expiration-time",lower:"message-expiration-time",index:75,isBkr:!1},e.rules[76]={name:"message-not-before",lower:"message-not-before",index:76,isBkr:!1},e.rules[77]={name:"message-request-id",lower:"message-request-id",index:77,isBkr:!1},e.rules[78]={name:"message-resources",lower:"message-resources",index:78,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,3,4,5,10]},e.rules[65].opcodes[1]={type:4,index:67},e.rules[65].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,83,111,108,97,110,97,32,97,99,99,111,117,110,116,58]},e.rules[65].opcodes[3]={type:4,index:10},e.rules[65].opcodes[4]={type:4,index:68},e.rules[65].opcodes[5]={type:3,min:0,max:1},e.rules[65].opcodes[6]={type:2,children:[7,8,9]},e.rules[65].opcodes[7]={type:4,index:10},e.rules[65].opcodes[8]={type:4,index:10},e.rules[65].opcodes[9]={type:4,index:69},e.rules[65].opcodes[10]={type:3,min:0,max:1},e.rules[65].opcodes[11]={type:2,children:[12,13]},e.rules[65].opcodes[12]={type:4,index:10},e.rules[65].opcodes[13]={type:4,index:66},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:2,children:[1,6,11,16,21,26,31,36,41]},e.rules[66].opcodes[1]={type:3,min:0,max:1},e.rules[66].opcodes[2]={type:2,children:[3,4,5]},e.rules[66].opcodes[3]={type:4,index:10},e.rules[66].opcodes[4]={type:6,string:[85,82,73,58,32]},e.rules[66].opcodes[5]={type:4,index:70},e.rules[66].opcodes[6]={type:3,min:0,max:1},e.rules[66].opcodes[7]={type:2,children:[8,9,10]},e.rules[66].opcodes[8]={type:4,index:10},e.rules[66].opcodes[9]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[66].opcodes[10]={type:4,index:71},e.rules[66].opcodes[11]={type:3,min:0,max:1},e.rules[66].opcodes[12]={type:2,children:[13,14,15]},e.rules[66].opcodes[13]={type:4,index:10},e.rules[66].opcodes[14]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[66].opcodes[15]={type:4,index:72},e.rules[66].opcodes[16]={type:3,min:0,max:1},e.rules[66].opcodes[17]={type:2,children:[18,19,20]},e.rules[66].opcodes[18]={type:4,index:10},e.rules[66].opcodes[19]={type:6,string:[78,111,110,99,101,58,32]},e.rules[66].opcodes[20]={type:4,index:73},e.rules[66].opcodes[21]={type:3,min:0,max:1},e.rules[66].opcodes[22]={type:2,children:[23,24,25]},e.rules[66].opcodes[23]={type:4,index:10},e.rules[66].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[66].opcodes[25]={type:4,index:74},e.rules[66].opcodes[26]={type:3,min:0,max:1},e.rules[66].opcodes[27]={type:2,children:[28,29,30]},e.rules[66].opcodes[28]={type:4,index:10},e.rules[66].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[66].opcodes[30]={type:4,index:75},e.rules[66].opcodes[31]={type:3,min:0,max:1},e.rules[66].opcodes[32]={type:2,children:[33,34,35]},e.rules[66].opcodes[33]={type:4,index:10},e.rules[66].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[66].opcodes[35]={type:4,index:76},e.rules[66].opcodes[36]={type:3,min:0,max:1},e.rules[66].opcodes[37]={type:2,children:[38,39,40]},e.rules[66].opcodes[38]={type:4,index:10},e.rules[66].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[66].opcodes[40]={type:4,index:77},e.rules[66].opcodes[41]={type:3,min:0,max:1},e.rules[66].opcodes[42]={type:2,children:[43,44,45]},e.rules[66].opcodes[43]={type:4,index:10},e.rules[66].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[66].opcodes[45]={type:4,index:78},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:4,index:36},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:3,min:32,max:44},e.rules[68].opcodes[1]={type:1,children:[2,3,4,5,6,7]},e.rules[68].opcodes[2]={type:5,min:49,max:57},e.rules[68].opcodes[3]={type:5,min:65,max:72},e.rules[68].opcodes[4]={type:5,min:74,max:78},e.rules[68].opcodes[5]={type:5,min:80,max:90},e.rules[68].opcodes[6]={type:5,min:97,max:107},e.rules[68].opcodes[7]={type:5,min:109,max:122},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:3,min:1,max:1/0},e.rules[69].opcodes[1]={type:1,children:[2,3,4]},e.rules[69].opcodes[2]={type:4,index:62},e.rules[69].opcodes[3]={type:4,index:61},e.rules[69].opcodes[4]={type:7,string:[32]},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:4,index:29},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:7,string:[49]},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[72].opcodes[1]={type:6,string:[109,97,105,110,110,101,116]},e.rules[72].opcodes[2]={type:6,string:[116,101,115,116,110,101,116]},e.rules[72].opcodes[3]={type:6,string:[100,101,118,110,101,116]},e.rules[72].opcodes[4]={type:6,string:[108,111,99,97,108,110,101,116]},e.rules[72].opcodes[5]={type:6,string:[115,111,108,97,110,97,58,109,97,105,110,110,101,116]},e.rules[72].opcodes[6]={type:6,string:[115,111,108,97,110,97,58,116,101,115,116,110,101,116]},e.rules[72].opcodes[7]={type:6,string:[115,111,108,97,110,97,58,100,101,118,110,101,116]},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:3,min:8,max:1/0},e.rules[73].opcodes[1]={type:1,children:[2,3]},e.rules[73].opcodes[2]={type:4,index:0},e.rules[73].opcodes[3]={type:4,index:6},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:4,index:28},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:4,index:28},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:4,index:28},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:3,min:0,max:1/0},e.rules[77].opcodes[1]={type:4,index:57},e.rules[78].opcodes=[],e.rules[78].opcodes[0]={type:3,min:0,max:1/0},e.rules[78].opcodes[1]={type:2,children:[2,3,4]},e.rules[78].opcodes[2]={type:4,index:10},e.rules[78].opcodes[3]={type:7,string:[45,32]},e.rules[78].opcodes[4]={type:4,index:29},e.toString=o(function(){let r="";return r+=`; ==============================================================================
`,r+=`; Core rules for ABNF (RFC 5234)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,r+=`
`,r+=`ALPHA          =  %x41-5A / %x61-7A
`,r+=`               ; A-Z / a-z
`,r+=`
`,r+=`BIT            =  "0" / "1"
`,r+=`
`,r+=`CHAR           =  %x01-7F
`,r+=`               ; any 7-bit US-ASCII character,
`,r+=`               ;  excluding NUL
`,r+=`
`,r+=`CR             =  %x0D
`,r+=`               ; carriage return
`,r+=`
`,r+=`CRLF           =  CR LF
`,r+=`               ; Internet standard newline
`,r+=`
`,r+=`CTL            =  %x00-1F / %x7F
`,r+=`               ; controls
`,r+=`
`,r+=`DIGIT          =  %x30-39
`,r+=`               ; 0-9
`,r+=`
`,r+=`DQUOTE         =  %x22
`,r+=`               ; " (Double Quote)
`,r+=`
`,r+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,r+=`
`,r+=`HTAB           =  %x09
`,r+=`               ; horizontal tab
`,r+=`
`,r+=`LF             =  %x0A
`,r+=`               ; linefeed
`,r+=`
`,r+=`LWSP           =  *(WSP / CRLF WSP)
`,r+=`               ; Use of this linear-white-space rule
`,r+=`               ;  permits lines containing only white
`,r+=`               ;  space that are no longer legal in
`,r+=`               ;  mail headers and have caused
`,r+=`               ;  interoperability problems in other
`,r+=`               ;  contexts.
`,r+=`               ; Do not use when defining mail
`,r+=`               ;  headers and use with caution in
`,r+=`               ;  other contexts.
`,r+=`
`,r+=`OCTET          =  %x00-FF
`,r+=`               ; 8 bits of data
`,r+=`
`,r+=`SP             =  %x20
`,r+=`
`,r+=`VCHAR          =  %x21-7E
`,r+=`               ; visible (printing) characters
`,r+=`
`,r+=`WSP            =  SP / HTAB
`,r+=`               ; white space
`,r+=`; ==============================================================================
`,r+=`; Internet Date/Time Format (RFC 3339)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,r+=`
`,r+=`date-fullyear   = 4DIGIT
`,r+=`
`,r+=`date-month      = 2DIGIT  ; 01-12
`,r+=`
`,r+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,r+=`                          ; month/year
`,r+=`
`,r+=`time-hour       = 2DIGIT  ; 00-23
`,r+=`
`,r+=`time-minute     = 2DIGIT  ; 00-59
`,r+=`
`,r+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,r+=`                          ; rules
`,r+=`
`,r+=`time-secfrac    = "." 1*DIGIT
`,r+=`
`,r+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,r+=`
`,r+=`time-offset     = "Z" / time-numoffset
`,r+=`
`,r+=`partial-time    = time-hour ":" time-minute ":" time-second
`,r+=`                  [time-secfrac]
`,r+=`
`,r+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,r+=`
`,r+=`full-time       = partial-time time-offset
`,r+=`
`,r+=`date-time       = full-date "T" full-time
`,r+=`; ==============================================================================
`,r+=`; Uniform Resource Identifier (RFC 3986)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,r+=`
`,r+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`hier-part     = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-rootless
`,r+=`              / path-empty
`,r+=`
`,r+=`URI-reference = URI / relative-ref
`,r+=`
`,r+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,r+=`
`,r+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`relative-part = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-noscheme
`,r+=`              / path-empty
`,r+=`
`,r+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,r+=`
`,r+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,r+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,r+=`host          = IP-literal / IPv4address / reg-name
`,r+=`port          = *DIGIT
`,r+=`
`,r+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,r+=`
`,r+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,r+=`
`,r+=`IPv6address   =                            6( h16 ":" ) ls32
`,r+=`              /                       "::" 5( h16 ":" ) ls32
`,r+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,r+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,r+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,r+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,r+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,r+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,r+=`              / [ *6( h16 ":" ) h16 ] "::"
`,r+=`
`,r+=`h16           = 1*4HEXDIG
`,r+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,r+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,r+=`dec-octet     = DIGIT                 ; 0-9
`,r+=`              / %x31-39 DIGIT         ; 10-99
`,r+=`              / "1" 2DIGIT            ; 100-199
`,r+=`              / "2" %x30-34 DIGIT     ; 200-249
`,r+=`              / "25" %x30-35          ; 250-255
`,r+=`
`,r+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,r+=`
`,r+=`path          = path-abempty    ; begins with "/" or is empty
`,r+=`              / path-absolute   ; begins with "/" but not "//"
`,r+=`              / path-noscheme   ; begins with a non-colon segment
`,r+=`              / path-rootless   ; begins with a segment
`,r+=`              / path-empty      ; zero characters
`,r+=`
`,r+=`path-abempty  = *( "/" segment )
`,r+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,r+=`path-noscheme = segment-nz-nc *( "/" segment )
`,r+=`path-rootless = segment-nz *( "/" segment )
`,r+=`path-empty    = 0pchar
`,r+=`
`,r+=`segment       = *pchar
`,r+=`segment-nz    = 1*pchar
`,r+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,r+=`; non-zero-length segment without any colon ":"
`,r+=`
`,r+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,r+=`
`,r+=`query         = *( pchar / "/" / "?" )
`,r+=`
`,r+=`fragment      = *( pchar / "/" / "?" )
`,r+=`
`,r+=`pct-encoded   = "%" HEXDIG HEXDIG
`,r+=`
`,r+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,r+=`reserved      = gen-delims / sub-delims
`,r+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,r+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,r+=`              / "*" / "+" / "," / ";" / "="
`,r+=`; ==============================================================================
`,r+=`; Sign in with Solana
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`; - datetime.bnf
`,r+=`; - uri.bnf
`,r+=`; - dns.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://eips.ethereum.org/EIPS/eip-4361
`,r+=` 
`,r+=`sign-in-with-solana =
`,r+=`  message-domain %s" wants you to sign in with your Solana account:" LF
`,r+=`  message-address
`,r+=`  [ LF LF message-statement ]
`,r+=`  [ LF advanced-fields ]
`,r+=`
`,r+=`advanced-fields =
`,r+=`  [ LF %s"URI: " message-uri ]
`,r+=`  [ LF %s"Version: " message-version ]
`,r+=`  [ LF %s"Chain ID: " message-chain-id ]
`,r+=`  [ LF %s"Nonce: " message-nonce ]
`,r+=`  [ LF %s"Issued At: " message-issued-at ]
`,r+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,r+=`  [ LF %s"Not Before: " message-not-before ]
`,r+=`  [ LF %s"Request ID: " message-request-id ]
`,r+=`  [ LF %s"Resources:" message-resources ]
`,r+=`
`,r+=`message-domain          = authority
`,r+=`message-address         = 32*44( %x31-39 / %x41-48 / %x4A-4E / %x50-5A / %x61-6B / %x6D-7A )
`,r+=`message-statement       = 1*( reserved / unreserved / " " )
`,r+=`message-uri             = URI
`,r+=`message-version         = "1"
`,r+=`message-chain-id        = %s"mainnet" / %s"testnet" / %s"devnet" / %s"localnet" / %s"solana:mainnet" / %s"solana:testnet" / %s"solana:devnet"
`,r+=`message-nonce           = 8*( ALPHA / DIGIT )
`,r+=`message-issued-at       = date-time
`,r+=`message-expiration-time = date-time
`,r+=`message-not-before      = date-time
`,r+=`message-request-id      = *pchar
`,r+=`message-resources       = *( LF "- " URI )
`,r},"toString"),e}o(di,"grammar");d();p();function pi(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"dnsurl",lower:"dnsurl",index:65,isBkr:!1},e.rules[66]={name:"dnsauthority",lower:"dnsauthority",index:66,isBkr:!1},e.rules[67]={name:"dnsname",lower:"dnsname",index:67,isBkr:!1},e.rules[68]={name:"dnsquery",lower:"dnsquery",index:68,isBkr:!1},e.rules[69]={name:"dnsqueryelement",lower:"dnsqueryelement",index:69,isBkr:!1},e.rules[70]={name:"dnsclassval",lower:"dnsclassval",index:70,isBkr:!1},e.rules[71]={name:"dnstypeval",lower:"dnstypeval",index:71,isBkr:!1},e.rules[72]={name:"chain-id",lower:"chain-id",index:72,isBkr:!1},e.rules[73]={name:"eth-namespace",lower:"eth-namespace",index:73,isBkr:!1},e.rules[74]={name:"eth-network-id",lower:"eth-network-id",index:74,isBkr:!1},e.rules[75]={name:"eth-chain-id",lower:"eth-chain-id",index:75,isBkr:!1},e.rules[76]={name:"sol-namespace",lower:"sol-namespace",index:76,isBkr:!1},e.rules[77]={name:"sol-network-id",lower:"sol-network-id",index:77,isBkr:!1},e.rules[78]={name:"sol-chain-id",lower:"sol-chain-id",index:78,isBkr:!1},e.rules[79]={name:"account-id",lower:"account-id",index:79,isBkr:!1},e.rules[80]={name:"eth-address",lower:"eth-address",index:80,isBkr:!1},e.rules[81]={name:"eth-account-id",lower:"eth-account-id",index:81,isBkr:!1},e.rules[82]={name:"sol-address",lower:"sol-address",index:82,isBkr:!1},e.rules[83]={name:"sol-account-id",lower:"sol-account-id",index:83,isBkr:!1},e.rules[84]={name:"sign-in-with-x",lower:"sign-in-with-x",index:84,isBkr:!1},e.rules[85]={name:"sign-in-with-eth",lower:"sign-in-with-eth",index:85,isBkr:!1},e.rules[86]={name:"sign-in-with-sol",lower:"sign-in-with-sol",index:86,isBkr:!1},e.rules[87]={name:"message-domain",lower:"message-domain",index:87,isBkr:!1},e.rules[88]={name:"message-address",lower:"message-address",index:88,isBkr:!1},e.rules[89]={name:"message-statement",lower:"message-statement",index:89,isBkr:!1},e.rules[90]={name:"message-uri",lower:"message-uri",index:90,isBkr:!1},e.rules[91]={name:"message-version",lower:"message-version",index:91,isBkr:!1},e.rules[92]={name:"message-chain-id",lower:"message-chain-id",index:92,isBkr:!1},e.rules[93]={name:"message-nonce",lower:"message-nonce",index:93,isBkr:!1},e.rules[94]={name:"message-issued-at",lower:"message-issued-at",index:94,isBkr:!1},e.rules[95]={name:"message-expiration-time",lower:"message-expiration-time",index:95,isBkr:!1},e.rules[96]={name:"message-not-before",lower:"message-not-before",index:96,isBkr:!1},e.rules[97]={name:"message-request-id",lower:"message-request-id",index:97,isBkr:!1},e.rules[98]={name:"message-resources",lower:"message-resources",index:98,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,7,8]},e.rules[65].opcodes[1]={type:7,string:[100,110,115,58]},e.rules[65].opcodes[2]={type:3,min:0,max:1},e.rules[65].opcodes[3]={type:2,children:[4,5,6]},e.rules[65].opcodes[4]={type:7,string:[47,47]},e.rules[65].opcodes[5]={type:4,index:66},e.rules[65].opcodes[6]={type:7,string:[47]},e.rules[65].opcodes[7]={type:4,index:67},e.rules[65].opcodes[8]={type:3,min:0,max:1},e.rules[65].opcodes[9]={type:2,children:[10,11]},e.rules[65].opcodes[10]={type:7,string:[63]},e.rules[65].opcodes[11]={type:4,index:68},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:2,children:[1,2]},e.rules[66].opcodes[1]={type:4,index:38},e.rules[66].opcodes[2]={type:3,min:0,max:1},e.rules[66].opcodes[3]={type:2,children:[4,5]},e.rules[66].opcodes[4]={type:7,string:[58]},e.rules[66].opcodes[5]={type:4,index:39},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:3,min:0,max:1/0},e.rules[67].opcodes[1]={type:4,index:57},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:2,children:[1,2]},e.rules[68].opcodes[1]={type:4,index:69},e.rules[68].opcodes[2]={type:3,min:0,max:1},e.rules[68].opcodes[3]={type:2,children:[4,5]},e.rules[68].opcodes[4]={type:7,string:[59]},e.rules[68].opcodes[5]={type:4,index:68},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:1,children:[1,4]},e.rules[69].opcodes[1]={type:2,children:[2,3]},e.rules[69].opcodes[2]={type:7,string:[99,108,97,115,115,61]},e.rules[69].opcodes[3]={type:4,index:70},e.rules[69].opcodes[4]={type:2,children:[5,6]},e.rules[69].opcodes[5]={type:7,string:[116,121,112,101,61]},e.rules[69].opcodes[6]={type:4,index:71},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:1,children:[1,3,4]},e.rules[70].opcodes[1]={type:3,min:1,max:1/0},e.rules[70].opcodes[2]={type:4,index:6},e.rules[70].opcodes[3]={type:7,string:[105,110]},e.rules[70].opcodes[4]={type:7,string:[99,104]},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:1,children:[1,3,4,5]},e.rules[71].opcodes[1]={type:3,min:1,max:1/0},e.rules[71].opcodes[2]={type:4,index:6},e.rules[71].opcodes[3]={type:7,string:[97]},e.rules[71].opcodes[4]={type:7,string:[110,115]},e.rules[71].opcodes[5]={type:7,string:[109,100]},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:1,children:[1,2]},e.rules[72].opcodes[1]={type:4,index:75},e.rules[72].opcodes[2]={type:4,index:78},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:6,string:[101,105,112,49,53,53]},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:3,min:1,max:32},e.rules[74].opcodes[1]={type:4,index:6},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:2,children:[1,2,3]},e.rules[75].opcodes[1]={type:4,index:73},e.rules[75].opcodes[2]={type:7,string:[58]},e.rules[75].opcodes[3]={type:4,index:74},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:6,string:[115,111,108,97,110,97]},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:1,children:[1,2,3,4]},e.rules[77].opcodes[1]={type:6,string:[109,97,105,110,110,101,116]},e.rules[77].opcodes[2]={type:6,string:[116,101,115,116,110,101,116]},e.rules[77].opcodes[3]={type:6,string:[100,101,118,110,101,116]},e.rules[77].opcodes[4]={type:6,string:[108,111,99,97,108,110,101,116]},e.rules[78].opcodes=[],e.rules[78].opcodes[0]={type:2,children:[1,2,3]},e.rules[78].opcodes[1]={type:4,index:76},e.rules[78].opcodes[2]={type:7,string:[58]},e.rules[78].opcodes[3]={type:4,index:77},e.rules[79].opcodes=[],e.rules[79].opcodes[0]={type:1,children:[1,2]},e.rules[79].opcodes[1]={type:4,index:81},e.rules[79].opcodes[2]={type:4,index:83},e.rules[80].opcodes=[],e.rules[80].opcodes[0]={type:2,children:[1,2]},e.rules[80].opcodes[1]={type:7,string:[48,120]},e.rules[80].opcodes[2]={type:3,min:40,max:40},e.rules[80].opcodes[3]={type:4,index:8},e.rules[81].opcodes=[],e.rules[81].opcodes[0]={type:2,children:[1,2,3]},e.rules[81].opcodes[1]={type:4,index:75},e.rules[81].opcodes[2]={type:7,string:[58]},e.rules[81].opcodes[3]={type:4,index:80},e.rules[82].opcodes=[],e.rules[82].opcodes[0]={type:3,min:32,max:44},e.rules[82].opcodes[1]={type:1,children:[2,3,4,5,6,7]},e.rules[82].opcodes[2]={type:5,min:49,max:57},e.rules[82].opcodes[3]={type:5,min:65,max:72},e.rules[82].opcodes[4]={type:5,min:74,max:78},e.rules[82].opcodes[5]={type:5,min:80,max:90},e.rules[82].opcodes[6]={type:5,min:97,max:107},e.rules[82].opcodes[7]={type:5,min:109,max:122},e.rules[83].opcodes=[],e.rules[83].opcodes[0]={type:2,children:[1,2,3]},e.rules[83].opcodes[1]={type:4,index:78},e.rules[83].opcodes[2]={type:7,string:[58]},e.rules[83].opcodes[3]={type:4,index:82},e.rules[84].opcodes=[],e.rules[84].opcodes[0]={type:1,children:[1,2]},e.rules[84].opcodes[1]={type:4,index:85},e.rules[84].opcodes[2]={type:4,index:86},e.rules[85].opcodes=[],e.rules[85].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[85].opcodes[1]={type:4,index:87},e.rules[85].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,69,116,104,101,114,101,117,109,32,97,99,99,111,117,110,116,58]},e.rules[85].opcodes[3]={type:4,index:10},e.rules[85].opcodes[4]={type:4,index:81},e.rules[85].opcodes[5]={type:4,index:10},e.rules[85].opcodes[6]={type:4,index:10},e.rules[85].opcodes[7]={type:3,min:0,max:1},e.rules[85].opcodes[8]={type:2,children:[9,10]},e.rules[85].opcodes[9]={type:4,index:89},e.rules[85].opcodes[10]={type:4,index:10},e.rules[85].opcodes[11]={type:4,index:10},e.rules[85].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[85].opcodes[13]={type:4,index:90},e.rules[85].opcodes[14]={type:4,index:10},e.rules[85].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[85].opcodes[16]={type:4,index:91},e.rules[85].opcodes[17]={type:4,index:10},e.rules[85].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[85].opcodes[19]={type:4,index:75},e.rules[85].opcodes[20]={type:4,index:10},e.rules[85].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[85].opcodes[22]={type:4,index:93},e.rules[85].opcodes[23]={type:4,index:10},e.rules[85].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[85].opcodes[25]={type:4,index:94},e.rules[85].opcodes[26]={type:3,min:0,max:1},e.rules[85].opcodes[27]={type:2,children:[28,29,30]},e.rules[85].opcodes[28]={type:4,index:10},e.rules[85].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[85].opcodes[30]={type:4,index:95},e.rules[85].opcodes[31]={type:3,min:0,max:1},e.rules[85].opcodes[32]={type:2,children:[33,34,35]},e.rules[85].opcodes[33]={type:4,index:10},e.rules[85].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[85].opcodes[35]={type:4,index:96},e.rules[85].opcodes[36]={type:3,min:0,max:1},e.rules[85].opcodes[37]={type:2,children:[38,39,40]},e.rules[85].opcodes[38]={type:4,index:10},e.rules[85].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[85].opcodes[40]={type:4,index:97},e.rules[85].opcodes[41]={type:3,min:0,max:1},e.rules[85].opcodes[42]={type:2,children:[43,44,45]},e.rules[85].opcodes[43]={type:4,index:10},e.rules[85].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[85].opcodes[45]={type:4,index:98},e.rules[86].opcodes=[],e.rules[86].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[86].opcodes[1]={type:4,index:87},e.rules[86].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,83,111,108,97,110,97,32,97,99,99,111,117,110,116,58]},e.rules[86].opcodes[3]={type:4,index:10},e.rules[86].opcodes[4]={type:4,index:83},e.rules[86].opcodes[5]={type:4,index:10},e.rules[86].opcodes[6]={type:4,index:10},e.rules[86].opcodes[7]={type:3,min:0,max:1},e.rules[86].opcodes[8]={type:2,children:[9,10]},e.rules[86].opcodes[9]={type:4,index:89},e.rules[86].opcodes[10]={type:4,index:10},e.rules[86].opcodes[11]={type:4,index:10},e.rules[86].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[86].opcodes[13]={type:4,index:90},e.rules[86].opcodes[14]={type:4,index:10},e.rules[86].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[86].opcodes[16]={type:4,index:91},e.rules[86].opcodes[17]={type:4,index:10},e.rules[86].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[86].opcodes[19]={type:4,index:78},e.rules[86].opcodes[20]={type:4,index:10},e.rules[86].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[86].opcodes[22]={type:4,index:93},e.rules[86].opcodes[23]={type:4,index:10},e.rules[86].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[86].opcodes[25]={type:4,index:94},e.rules[86].opcodes[26]={type:3,min:0,max:1},e.rules[86].opcodes[27]={type:2,children:[28,29,30]},e.rules[86].opcodes[28]={type:4,index:10},e.rules[86].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[86].opcodes[30]={type:4,index:95},e.rules[86].opcodes[31]={type:3,min:0,max:1},e.rules[86].opcodes[32]={type:2,children:[33,34,35]},e.rules[86].opcodes[33]={type:4,index:10},e.rules[86].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[86].opcodes[35]={type:4,index:96},e.rules[86].opcodes[36]={type:3,min:0,max:1},e.rules[86].opcodes[37]={type:2,children:[38,39,40]},e.rules[86].opcodes[38]={type:4,index:10},e.rules[86].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[86].opcodes[40]={type:4,index:97},e.rules[86].opcodes[41]={type:3,min:0,max:1},e.rules[86].opcodes[42]={type:2,children:[43,44,45]},e.rules[86].opcodes[43]={type:4,index:10},e.rules[86].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[86].opcodes[45]={type:4,index:98},e.rules[87].opcodes=[],e.rules[87].opcodes[0]={type:4,index:66},e.rules[88].opcodes=[],e.rules[88].opcodes[0]={type:1,children:[1,2]},e.rules[88].opcodes[1]={type:4,index:81},e.rules[88].opcodes[2]={type:4,index:83},e.rules[89].opcodes=[],e.rules[89].opcodes[0]={type:3,min:1,max:1/0},e.rules[89].opcodes[1]={type:1,children:[2,3,4]},e.rules[89].opcodes[2]={type:4,index:62},e.rules[89].opcodes[3]={type:4,index:61},e.rules[89].opcodes[4]={type:7,string:[32]},e.rules[90].opcodes=[],e.rules[90].opcodes[0]={type:4,index:29},e.rules[91].opcodes=[],e.rules[91].opcodes[0]={type:7,string:[49]},e.rules[92].opcodes=[],e.rules[92].opcodes[0]={type:1,children:[1,2]},e.rules[92].opcodes[1]={type:4,index:75},e.rules[92].opcodes[2]={type:4,index:78},e.rules[93].opcodes=[],e.rules[93].opcodes[0]={type:3,min:8,max:1/0},e.rules[93].opcodes[1]={type:1,children:[2,3]},e.rules[93].opcodes[2]={type:4,index:0},e.rules[93].opcodes[3]={type:4,index:6},e.rules[94].opcodes=[],e.rules[94].opcodes[0]={type:4,index:28},e.rules[95].opcodes=[],e.rules[95].opcodes[0]={type:4,index:28},e.rules[96].opcodes=[],e.rules[96].opcodes[0]={type:4,index:28},e.rules[97].opcodes=[],e.rules[97].opcodes[0]={type:3,min:0,max:1/0},e.rules[97].opcodes[1]={type:4,index:57},e.rules[98].opcodes=[],e.rules[98].opcodes[0]={type:3,min:0,max:1/0},e.rules[98].opcodes[1]={type:2,children:[2,3,4]},e.rules[98].opcodes[2]={type:4,index:10},e.rules[98].opcodes[3]={type:7,string:[45,32]},e.rules[98].opcodes[4]={type:4,index:29},e.toString=()=>{let t="";return t+=`; ==============================================================================
`,t+=`; Core rules for ABNF (RFC 5234)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,t+=`
`,t+=`ALPHA          =  %x41-5A / %x61-7A
`,t+=`               ; A-Z / a-z
`,t+=`
`,t+=`BIT            =  "0" / "1"
`,t+=`
`,t+=`CHAR           =  %x01-7F
`,t+=`               ; any 7-bit US-ASCII character,
`,t+=`               ;  excluding NUL
`,t+=`
`,t+=`CR             =  %x0D
`,t+=`               ; carriage return
`,t+=`
`,t+=`CRLF           =  CR LF
`,t+=`               ; Internet standard newline
`,t+=`
`,t+=`CTL            =  %x00-1F / %x7F
`,t+=`               ; controls
`,t+=`
`,t+=`DIGIT          =  %x30-39
`,t+=`               ; 0-9
`,t+=`
`,t+=`DQUOTE         =  %x22
`,t+=`               ; " (Double Quote)
`,t+=`
`,t+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,t+=`
`,t+=`HTAB           =  %x09
`,t+=`               ; horizontal tab
`,t+=`
`,t+=`LF             =  %x0A
`,t+=`               ; linefeed
`,t+=`
`,t+=`LWSP           =  *(WSP / CRLF WSP)
`,t+=`               ; Use of this linear-white-space rule
`,t+=`               ;  permits lines containing only white
`,t+=`               ;  space that are no longer legal in
`,t+=`               ;  mail headers and have caused
`,t+=`               ;  interoperability problems in other
`,t+=`               ;  contexts.
`,t+=`               ; Do not use when defining mail
`,t+=`               ;  headers and use with caution in
`,t+=`               ;  other contexts.
`,t+=`
`,t+=`OCTET          =  %x00-FF
`,t+=`               ; 8 bits of data
`,t+=`
`,t+=`SP             =  %x20
`,t+=`
`,t+=`VCHAR          =  %x21-7E
`,t+=`               ; visible (printing) characters
`,t+=`
`,t+=`WSP            =  SP / HTAB
`,t+=`               ; white space
`,t+=`; ==============================================================================
`,t+=`; Internet Date/Time Format (RFC 3339)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,t+=`
`,t+=`date-fullyear   = 4DIGIT
`,t+=`
`,t+=`date-month      = 2DIGIT  ; 01-12
`,t+=`
`,t+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,t+=`                          ; month/year
`,t+=`
`,t+=`time-hour       = 2DIGIT  ; 00-23
`,t+=`
`,t+=`time-minute     = 2DIGIT  ; 00-59
`,t+=`
`,t+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,t+=`                          ; rules
`,t+=`
`,t+=`time-secfrac    = "." 1*DIGIT
`,t+=`
`,t+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,t+=`
`,t+=`time-offset     = "Z" / time-numoffset
`,t+=`
`,t+=`partial-time    = time-hour ":" time-minute ":" time-second
`,t+=`                  [time-secfrac]
`,t+=`
`,t+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,t+=`
`,t+=`full-time       = partial-time time-offset
`,t+=`
`,t+=`date-time       = full-date "T" full-time
`,t+=`; ==============================================================================
`,t+=`; Uniform Resource Identifier (RFC 3986)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,t+=`
`,t+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,t+=`
`,t+=`hier-part     = "//" authority path-abempty
`,t+=`              / path-absolute
`,t+=`              / path-rootless
`,t+=`              / path-empty
`,t+=`
`,t+=`URI-reference = URI / relative-ref
`,t+=`
`,t+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,t+=`
`,t+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,t+=`
`,t+=`relative-part = "//" authority path-abempty
`,t+=`              / path-absolute
`,t+=`              / path-noscheme
`,t+=`              / path-empty
`,t+=`
`,t+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,t+=`
`,t+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,t+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,t+=`host          = IP-literal / IPv4address / reg-name
`,t+=`port          = *DIGIT
`,t+=`
`,t+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,t+=`
`,t+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,t+=`
`,t+=`IPv6address   =                            6( h16 ":" ) ls32
`,t+=`              /                       "::" 5( h16 ":" ) ls32
`,t+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,t+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,t+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,t+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,t+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,t+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,t+=`              / [ *6( h16 ":" ) h16 ] "::"
`,t+=`
`,t+=`h16           = 1*4HEXDIG
`,t+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,t+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,t+=`dec-octet     = DIGIT                 ; 0-9
`,t+=`              / %x31-39 DIGIT         ; 10-99
`,t+=`              / "1" 2DIGIT            ; 100-199
`,t+=`              / "2" %x30-34 DIGIT     ; 200-249
`,t+=`              / "25" %x30-35          ; 250-255
`,t+=`
`,t+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,t+=`
`,t+=`path          = path-abempty    ; begins with "/" or is empty
`,t+=`              / path-absolute   ; begins with "/" but not "//"
`,t+=`              / path-noscheme   ; begins with a non-colon segment
`,t+=`              / path-rootless   ; begins with a segment
`,t+=`              / path-empty      ; zero characters
`,t+=`
`,t+=`path-abempty  = *( "/" segment )
`,t+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,t+=`path-noscheme = segment-nz-nc *( "/" segment )
`,t+=`path-rootless = segment-nz *( "/" segment )
`,t+=`path-empty    = 0pchar
`,t+=`
`,t+=`segment       = *pchar
`,t+=`segment-nz    = 1*pchar
`,t+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,t+=`; non-zero-length segment without any colon ":"
`,t+=`
`,t+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,t+=`
`,t+=`query         = *( pchar / "/" / "?" )
`,t+=`
`,t+=`fragment      = *( pchar / "/" / "?" )
`,t+=`
`,t+=`pct-encoded   = "%" HEXDIG HEXDIG
`,t+=`
`,t+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,t+=`reserved      = gen-delims / sub-delims
`,t+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,t+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,t+=`              / "*" / "+" / "," / ";" / "="
`,t+=`; ==============================================================================
`,t+=`; DNS URI (RFC 4501)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - uri.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc4501.html#section-3
`,t+=`;
`,t+=`; Note:
`,t+=`; dnsclassval and dnstypeval are not defined exhaustively
`,t+=`; but their definitions are unused in SIW grammars.
`,t+=`
`,t+=`
`,t+=`dnsurl          = "dns:" [ "//" dnsauthority "/" ]
`,t+=`                  dnsname ["?" dnsquery]
`,t+=`
`,t+=`dnsauthority    = host [ ":" port ]
`,t+=`                ; See RFC 3986 for the
`,t+=`                ; definition of "host" and "port".
`,t+=`
`,t+=`dnsname         = *pchar
`,t+=`                ; See RFC 3986 for the
`,t+=`                ; definition of "pchar".
`,t+=`
`,t+=`                ; The "dnsname" field may be a
`,t+=`                ; "relative" or "absolute" name,
`,t+=`                ; as per RFC 1034, section 3.1.
`,t+=`
`,t+=`                ; Note further that an empty
`,t+=`                ; "dnsname" value is to be
`,t+=`                ; interpreted as the root itself.
`,t+=`                ; See below on relative dnsnames.
`,t+=`
`,t+=`dnsquery        = dnsqueryelement [";" dnsquery]
`,t+=`
`,t+=`dnsqueryelement = ( "CLASS=" dnsclassval ) / ( "TYPE=" dnstypeval )
`,t+=`                ; Each clause MUST NOT be used more
`,t+=`                ; than once.
`,t+=`
`,t+=`dnsclassval     = 1*digit / "IN" / "CH"
`,t+=`                ; omitted:
`,t+=`                ; / <Any IANA registered DNS class mnemonic>
`,t+=`
`,t+=`dnstypeval      = 1*digit / "A" / "NS" / "MD"
`,t+=`                ; omitted:
`,t+=`                ; / <Any IANA registered DNS type mnemonic>
`,t+=`; ==============================================================================
`,t+=`; Chain-agnostic IDs (CAIP-2)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`
`,t+=`chain-id        = eth-chain-id
`,t+=`                / sol-chain-id
`,t+=`                ; NOTE: Only Ethereum and Solana are supported at the moment
`,t+=`
`,t+=`
`,t+=`; Ethereum
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`eth-namespace   = %s"eip155"
`,t+=`                ; The chain-id namespace for evm chains
`,t+=`
`,t+=`eth-network-id  = 1*32DIGIT
`,t+=`                ; Accept up to 32 digits. Could probably be lowered
`,t+=`
`,t+=`eth-chain-id    = eth-namespace ":" eth-network-id
`,t+=`                ; Examples:
`,t+=`                ; - eip155:1   (eth mainnet)
`,t+=`                ; - eip155:137 (polygon mainnet)
`,t+=`
`,t+=`; Solana
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`sol-namespace   = %s"solana"
`,t+=`                ; The chain-id namespace for solana
`,t+=`
`,t+=`sol-network-id  = %s"mainnet" / %s"testnet" / %s"devnet" / %s"localnet"
`,t+=`                ; This enumeration comes from https://github.com/solana-labs/wallet-standard/blob/master/packages/core/chains/src/index.ts
`,t+=`
`,t+=`sol-chain-id    = sol-namespace ":" sol-network-id
`,t+=`                ; Examples:
`,t+=`                ; - solana:mainnet (solana mainnet)
`,t+=`                ; - solana:testnet (solana testnet)
`,t+=`; ==============================================================================
`,t+=`; Chain-agnostic account identifiers (CAIP-10)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - chain-id.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`
`,t+=`account-id      = eth-account-id
`,t+=`                / sol-account-id
`,t+=`                ; NOTE: Only Ethereum and Solana are supported at the moment
`,t+=`
`,t+=`; Ethereum
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`eth-address     = "0x" 40HEXDIG
`,t+=`                ; Must also conform to captilization
`,t+=`                ; checksum encoding specified in EIP-55
`,t+=`                ; where applicable (EOAs).
`,t+=`
`,t+=`eth-account-id  = eth-chain-id ":" eth-address
`,t+=`                ; See CAIP-2 for definition of "eth-chain-id"
`,t+=`                ; Examples:
`,t+=`                ; - eip155:1:0xb9c5714089478a327f09197987f16f9e5d936e8a   (eth mainnet)
`,t+=`                ; - eip155:137:0xb9c5714089478a327f09197987f16f9e5d936e8a (polygon mainnet)
`,t+=`
`,t+=`; Solana
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`sol-address     = 32*44( %x31-39 / %x41-48 / %x4A-4E / %x50-5A / %x61-6B / %x6D-7A )
`,t+=`                ; Valid Solana addresses are 32-44 base58-encoded chars: 1-9 / A-H / J-N / P-Z / a-k / m-z
`,t+=`                ; Note: this doesn't validate whether the address is "on the curve"
`,t+=`
`,t+=`sol-account-id  = sol-chain-id ":" sol-address
`,t+=`                ; See CAIP-2 for definition of "sol-chain-id"
`,t+=`                ; Examples:
`,t+=`                ; - solana:mainnet:FYpB58cLw5cwiN763ayB2sFT8HLF2MRUBbbyRgHYiRpK (solana mainnet)
`,t+=`                ; - solana:testnet:QhnBSSbjScn9VHBBqwosy99icpeJrW4iuEwkJ3d9Fn9  (solana testnet)
`,t+=`; ==============================================================================
`,t+=`; Sign in with X (CAIP-122)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - datetime.bnf
`,t+=`; - uri.bnf
`,t+=`; - dns.bnf
`,t+=`; - chain-id.bnf
`,t+=`; - account-id.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-122.md
`,t+=`;
`,t+=`; Note:
`,t+=`; Currently, this grammar file only supports the Ethereum and Solana blockchains
`,t+=`
`,t+=`sign-in-with-x = sign-in-with-eth
`,t+=`               / sign-in-with-sol
`,t+=`
`,t+=`; Ethereum
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`sign-in-with-eth =
`,t+=`  message-domain %s" wants you to sign in with your Ethereum account:" LF
`,t+=`  eth-account-id LF
`,t+=`  LF
`,t+=`  [ message-statement LF ]
`,t+=`  LF
`,t+=`  %s"URI: " message-uri LF
`,t+=`  %s"Version: " message-version LF
`,t+=`  %s"Chain ID: " eth-chain-id LF
`,t+=`  %s"Nonce: " message-nonce LF
`,t+=`  %s"Issued At: " message-issued-at
`,t+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,t+=`  [ LF %s"Not Before: " message-not-before ]
`,t+=`  [ LF %s"Request ID: " message-request-id ]
`,t+=`  [ LF %s"Resources:" message-resources ]
`,t+=`
`,t+=`; Solana
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`sign-in-with-sol =
`,t+=`  message-domain %s" wants you to sign in with your Solana account:" LF
`,t+=`  sol-account-id LF
`,t+=`  LF
`,t+=`  [ message-statement LF ]
`,t+=`  LF
`,t+=`  %s"URI: " message-uri LF
`,t+=`  %s"Version: " message-version LF
`,t+=`  %s"Chain ID: " sol-chain-id LF
`,t+=`  %s"Nonce: " message-nonce LF
`,t+=`  %s"Issued At: " message-issued-at
`,t+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,t+=`  [ LF %s"Not Before: " message-not-before ]
`,t+=`  [ LF %s"Request ID: " message-request-id ]
`,t+=`  [ LF %s"Resources:" message-resources ]
`,t+=`
`,t+=`; Common
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`message-domain          = dnsauthority ; CAIP-10 spec defines domain as dnsauthority unlike EIP-4361, which uses authority
`,t+=`message-address         = eth-account-id / sol-account-id ; See CAIP-10 for address identifier definition
`,t+=`message-statement       = 1*( reserved / unreserved / " " )
`,t+=`message-uri             = URI
`,t+=`message-version         = "1"
`,t+=`message-chain-id        = eth-chain-id / sol-chain-id
`,t+=`message-nonce           = 8*( ALPHA / DIGIT )
`,t+=`message-issued-at       = date-time
`,t+=`message-expiration-time = date-time
`,t+=`message-not-before      = date-time
`,t+=`message-request-id      = *pchar
`,t+=`message-resources       = *( LF "- " URI )
`,t},e}o(pi,"grammar");d();p();var pt=o((e,t)=>(r,n,s,i,a)=>(r===Cn.SEM_PRE&&(a[e]=t(n,s,i,a)),Cn.SEM_OK),"assign");var{apgLib:Bn}=globalThis;function nn(e,t){let r=new Bn.parser;r.stats=new Bn.stats,r.trace=new Bn.trace,r.ast=new Bn.ast;let n=Bn.utils.charsToString,s=o((b,g,w)=>new Date(n(b,g,w)),"charsToDate"),i=o((b,g,w)=>new URL(n(b,g,w)),"charsToURL");r.ast.callbacks["message-domain"]=pt("domain",n),r.ast.callbacks["message-address"]=pt("address",n),r.ast.callbacks["message-statement"]=pt("statement",n),r.ast.callbacks["message-uri"]=pt("uri",i),r.ast.callbacks["message-version"]=pt("version",n),r.ast.callbacks["message-chain-id"]=pt("chainId",n),r.ast.callbacks["message-nonce"]=pt("nonce",n),r.ast.callbacks["message-issued-at"]=pt("issuedAt",s),r.ast.callbacks["message-expiration-time"]=pt("expirationTime",s),r.ast.callbacks["message-not-before"]=pt("notBefore",s),r.ast.callbacks["message-request-id"]=pt("requestId",n),r.ast.callbacks["message-resources"]=pt("resources",(b,g,w)=>w?n(b,g,w).slice(3).split(`
- `).map(_=>new URL(_)):[]),e===qe.X&&(r.ast.callbacks["eth-account-id"]=r.ast.callbacks["message-address"],r.ast.callbacks["eth-chain-id"]=r.ast.callbacks["message-chain-id"],r.ast.callbacks["sol-account-id"]=r.ast.callbacks["message-address"],r.ast.callbacks["sol-chain-id"]=r.ast.callbacks["message-chain-id"]);let a=null;switch(e){case qe.Ethereum:a=ci;break;case qe.Solana:a=di;break;case qe.X:a=pi;break}if(!a)throw new Error(`Could not find grammar for ${e}`);let l=a(),m=r.parse(l,e,t);if(!m.success){let g=m.maxMatched+1,w=t.slice(0,g),_=w.split(`
`),y=_[_.length-1].length-1,S=[w,y>-1?" ".repeat(y)+"^":"^"].join(`
`);return{success:!1,error:new Error(S)}}let f={type:e};return r.ast.translate(f),{success:!0,data:f}}o(nn,"parse");d();p();function Do(e){return/(Chain ID: solana:|Chain ID: eip155:)/.test(e)?qe.X:/(wants you to sign in with your Ethereum account)/.test(e)?qe.Ethereum:/(wants you to sign in with your Solana account)/.test(e)?qe.Solana:null}o(Do,"inferMessageType");d();p();var _r={[De.ADDRESS_MISMATCH]:"address",[De.DOMAIN_MISMATCH]:"domain",[De.URI_MISMATCH]:"uri",[De.CHAIN_ID_MISMATCH]:"chainId",[De.ISSUED_TOO_FAR_IN_THE_PAST]:"issuedAt",[De.ISSUED_TOO_FAR_IN_THE_FUTURE]:"issuedAt",[De.EXPIRED]:"expirationTime",[De.EXPIRES_BEFORE_ISSUANCE]:"expirationTime",[De.VALID_AFTER_EXPIRATION]:"notBefore"};var kg=Sc({minutes:10}),ui=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t),i=me(t),a=be(t);if(!s||!i)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let l=await r.eth.getSelectedAccount(),m=await r.eth.getNetworkId(s),[f,b]=e.params;if(l!==b.toLowerCase())return c.unauthorized(e.id);let g={url:i.toString(),icon:a},w=Buffer.from(f.substring(2),"hex").toString("utf8"),_=Do(w);if(_!==qe.Ethereum&&_!==qe.X){let M=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:le(),params:[g,{signer:b,message:f,originalMethod:"personal_sign",chainId:m,autoConfirmStatusCode:Ae.UnsupportedMethod}]});return sl(e,M)}let y=nn(_,w);if(!y.success)return c.invalidInput(e.id,n.t("The app's signature request cannot be shown due to invalid formatting."));let S=new URL(i.toString()),x=parseInt(m,16),E=_===qe.X?`eip155:${x}`:x.toString(),C=hc(l),I=_===qe.X?`${E}:${C}`:C,B=rn(y.data,{expectedAddress:I,expectedURL:S,expectedChainId:E,issuedAtThreshold:kg}).map(M=>({label:_r[M],message:`siwsErrorMessage_${M}`}));if(B.some(M=>M.label===_r[De.CHAIN_ID_MISMATCH]))return c.invalidInput(e.id,n.t("The app's signature request cannot be shown as the chain ID does not match the provided chain ID for verification."));if(B.some(M=>M.label===_r[De.ADDRESS_MISMATCH]))return c.invalidInput(e.id,n.t("The app's signature request cannot be shown as the address does not match the provided address for verification."));let D=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignIn",id:le(),params:[g,{signInData:{...y.data,uri:y.data.uri.toString(),version:y.data.version,issuedAt:y.data.issuedAt.toISOString(),expirationTime:y.data.expirationTime?.toISOString(),notBefore:y.data.notBefore?.toISOString(),resources:y.data.resources?.map(M=>M.toString())},message:f,chainId:m,errorDetails:B}]});return"error"in D&&B.length>0?c.invalidInput(e.id,n.t("This sign-in request is invalid. This either means the site is unsafe, or its developer made an error when sending the request.")):sl(e,D)},"requireUserApprovalPersonalSign");function sl(e,t){if("error"in t)return c.error(e.id,t.error);switch(t.result.approvalType){case"hardware":return c.result(e.id,t.result.signature);case"user":return}}o(sl,"handleResponse");d();p();var li=o(async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return c.userRejectedRequest(r.id);let s=z(n),i=me(n),a=be(n);if(!s||!i)return c.unauthorized(r.id);if(await t.isTrustedApp(s))return;if(r.params?.onlyIfTrusted===!0)return c.userRejectedRequest(r.id);let m=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:le(),params:[{url:i.toString(),icon:a}]});if("error"in m)return c.error(r.id,m.error)},"requireUserApprovalSolConnect");d();p();var mi=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let m=await r.sol.autoConfirmValidateTransaction(a,e.params.transactions),f=m.status===Ae.OK;if(et(m.status)){let w=await r.sol.getSelectedAccount();await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:i,data:{sessionStartTime:m.sessionStartTime,sessionMaxDuration:m.sessionMaxDuration,lastStatusCode:m.status,dollarValue:m.dollarValue,auditTrail:m.auditTrail},walletAddress:w})}if(f)return;let b={url:a.toString(),icon:l},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:le(),params:[b,{transactions:e.params.transactions,autoConfirmStatusCode:m.status}]});if("error"in g)return c.error(e.id,g.error);switch(g.result.type){case"send":return c.result(e.id,g.result.result.map(w=>({transaction:w.signedTransaction,signature:w.signature,version:w.version})));case"signAndSend":{let w=g.result.overwriteTransactions;w&&(e.params.transactions=w);return}}},"requireUserApprovalSolSignAllTransactions");d();p();var hi=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let m=await r.sol.autoConfirmValidateTransaction(a,e.params.transactions),f=m.status===Ae.OK;if(et(m.status)){let w=await r.sol.getSelectedAccount();await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:i,data:{sessionStartTime:m.sessionStartTime,sessionMaxDuration:m.sessionMaxDuration,lastStatusCode:m.status,dollarValue:m.dollarValue,auditTrail:m.auditTrail},walletAddress:w})}if(f)return;let b={url:a.toString(),icon:l},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendAllTransactions",id:le(),params:[b,{transactions:e.params.transactions,autoConfirmStatusCode:m.status}]});if("error"in g)return c.error(e.id,g.error);switch(g.result.type){case"send":{let w=await r.sol.getSelectedAccount();for(let[y,S]of g.result.result.entries())e.params.transactions[y]=S.signedTransaction;let _=await r.sol.sendAllTransactions(e.params.transactions);return c.result(e.id,{publicKey:w,signatures:_})}case"signAndSend":{let w=g.result.overwriteTransactions;w&&(e.params.transactions=w);return}}},"requireUserApprovalSolSignAndSendAllTransactions");d();p();var fi=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let m=await r.sol.autoConfirmValidateTransaction(a,[e.params.transaction]),f=m.status===Ae.OK;if(et(m.status)){let w=await r.sol.getSelectedAccount();await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:i,data:{sessionStartTime:m.sessionStartTime,sessionMaxDuration:m.sessionMaxDuration,lastStatusCode:m.status,dollarValue:m.dollarValue,auditTrail:m.auditTrail},walletAddress:w})}if(f)return;let b={url:a.toString(),icon:l},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendTransaction",id:le(),params:[b,{transaction:e.params.transaction,autoConfirmStatusCode:m.status}]});if("error"in g)return c.error(e.id,g.error);switch(g.result.type){case"send":{let w=await r.sol.getSelectedAccount();return await r.sol.sendTransaction(g.result.signedTransaction,e.params.options),c.result(e.id,{publicKey:w,signature:g.result.signature})}case"signAndSend":{let w=g.result.overwriteTransactions;w&&(e.params.transaction=w[0]),g.result.isSharingEligible&&(e.params.isSharingEligible=!0);return}}},"requireUserApprovalSolSignAndSendTransaction");d();p();var gi=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t);if(!i||!a)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let l=await r.sol.autoConfirmValidateMessage(a,e.params.message),m=l.status===Ae.OK;if(et(l.status)){let g=await r.sol.getSelectedAccount();await s.sol.autoConfirmedMessage({request:e,chainId:await r.sol.getNetworkId(),origin:i,data:{sessionStartTime:l.sessionStartTime,sessionMaxDuration:l.sessionMaxDuration,lastStatusCode:l.status,auditTrail:l.auditTrail},walletAddress:g})}if(m)return;let f=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:le(),params:[{url:a.toString(),icon:be(t)},{...e.params,autoConfirmStatusCode:l.status}]});if("error"in f)return c.error(e.id,f.error);let b=await r.sol.getSelectedAccount();switch(f.result.type){case"send":return c.result(e.id,{signature:f.result.signature,publicKey:b});case"signAndSend":return}},"requireUserApprovalSolSignMessage");d();p();var yi=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id);let m=await r.sol.autoConfirmValidateTransaction(a,[e.params.transaction]),f=m.status===Ae.OK;if(et(m.status)){let w=await r.sol.getSelectedAccount();await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:i,data:{sessionStartTime:m.sessionStartTime,sessionMaxDuration:m.sessionMaxDuration,lastStatusCode:m.status,dollarValue:m.dollarValue,auditTrail:m.auditTrail},walletAddress:w})}if(f)return;let b={url:a.toString(),icon:l},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignTransaction",id:le(),params:[b,{transaction:e.params.transaction,autoConfirmStatusCode:m.status}]});if("error"in g)return c.error(e.id,g.error);switch(g.result.type){case"send":return c.result(e.id,{transaction:g.result.signedTransaction,signature:g.result.signature,version:g.result.version});case"signAndSend":{let w=g.result.overwriteTransactions;w&&(e.params.transaction=w[0]),g.result.isSharingEligible&&(e.params.isSharingEligible=!0),g.result.transactionSharingDelayMs&&(e.params.transactionSharingDelayMs=g.result.transactionSharingDelayMs);return}}},"requireUserApprovalSolSignTransaction");d();p();var kt=o(async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return c.internalError(e.id,"missing source");let i=me(t);if(!i)return c.internalError(e.id,"missing source");let a=i.hostname;return async l=>{let{method:m}=e;if(nr(a))return;let f=await n.sol.getNetworkId();if(f==="localnet")return;let b=s.sol.chainIdToCAIP2(f),w={method:m,chainType:"solana",chainId:b,origin:a};if("error"in l&&(w.errorCode=l.error.code),m==="sol_connect"){if(e.params?.eager){"errorCode"in w||r.approveConnection({...w,eager:!0});return}Rg(w,r)}(m==="sol_signTransaction"||m==="sol_signAndSendTransaction"||m==="sol_signAndSendAllTransactions"||m==="sol_signAllTransactions")&&Cg(w,r),(m==="sol_signMessage"||m==="sol_signIn")&&Bg(w,r)}},"solAnalytics"),Rg=o((e,t)=>{"errorCode"in e?t.declineConnection(e):t.approveConnection({...e,eager:!1})},"emitSolConnectAnalytics"),Cg=o((e,t)=>{"errorCode"in e?t.declineTransaction(e):t.approveTransaction(e)},"emitSolTransactionAnalytics"),Bg=o((e,t)=>{"errorCode"in e?t.declineSignMessage(e):t.approveSignMessage(e)},"emitSolMessageAnalytics");d();p();var at=o(async({request:e},{analytics:t,wallet:r,utils:n})=>async s=>{let{method:i}=e,a=e.params&&typeof e.params=="object"&&"redirect_link"in e.params&&typeof e.params.redirect_link=="string"?e.params.redirect_link:"missing redirect_link from deep link";t.deepLinkDetected({method:i,params:JSON.stringify(e.params)});let l=await r.sol.getNetworkId();if(l==="localnet")return;let m=n.sol.chainIdToCAIP2(l),b={method:i,chainType:"solana",chainId:m,origin:a};if(i==="phantom_deep_link_connect"){let g={...b};"error"in s?t.declineConnection({...g,errorCode:s.error.code}):t.approveConnection({...g,eager:!1})}if(i==="phantom_deep_link_signTransaction"||i==="phantom_deep_link_signAllTransactions"||i==="phantom_deep_link_signAndSendTransaction"){let g={...b};"error"in s?t.declineTransaction({...g,errorCode:s.error.code}):t.approveTransaction(g)}if(i==="phantom_deep_link_signMessage"){let g={...b};"error"in s?t.declineSignMessage({...g,errorCode:s.error.code}):t.approveSignMessage(g)}},"phantomDeepLinkAnalytics");d();p();function xi(e){return!!("result"in e&&typeof e.result=="object"&&e.result&&"type"in e.result&&e.result?.type&&typeof e.result.type=="string"&&e.result.type.toUpperCase().endsWith("_DECLINE"))}o(xi,"isDeclineResponse");var on=o(async({request:e},{analytics:t,wallet:r,utils:n})=>async s=>{let{method:i}=e,a="no identity or verifiable identity found on solana mobile wallet adapter request";if(e.params&&typeof e.params=="object"&&"identity"in e.params){let g=lc.safeParse(e.params.identity);g.success&&(a=g.data.identityUri??a)}else if(e.params&&typeof e.params=="object"&&"signPayloads"in e.params){let g=mc.safeParse(e.params.signPayloads);g.success&&(a=g.data.verifiableIdentity.identity.identityUri??a)}let l=await r.sol.getNetworkId();if(l==="localnet")return;let m=n.sol.chainIdToCAIP2(l),b={method:i,chainType:"solana",chainId:m,origin:a};if(i==="sol_mwa_authorize"){let g={...b};"error"in s?t.declineConnection({...g,errorCode:s.error.code}):xi(s)?t.declineConnection({...g,errorCode:s.result.type}):t.approveConnection({...g,eager:!1})}if(i==="sol_mwa_sign_transactions"||i==="sol_mwa_sign_and_send_transactions"){let g={...b};"error"in s?t.declineTransaction({...g,errorCode:s.error.code}):xi(s)?t.declineTransaction({...g,errorCode:s.result.type}):t.approveTransaction(g)}if(i==="sol_mwa_sign_messages"){let g={...b};"error"in s?t.declineSignMessage({...g,errorCode:s.error.code}):xi(s)?t.declineSignMessage({...g,errorCode:s.result.type}):t.approveSignMessage(g)}},"solMwaAnalytics");d();p();var No=[],Ve=o(e=>async({source:t,request:r})=>{let n=Date.now(),i=`${t?.type==="DeepLinkRpcRequestSource"?t.deepLinkUrl:t?.url.href}:${r.method}:${JSON.stringify(r.params)}`;if(No=No.filter(l=>l.timestamp>n-1e3),No.filter(l=>l.key===i).length>=e)return c.rateLimited(r.id);No.push({timestamp:n,key:i})},"rateLimit");d();p();var Oe=o(async({request:e},{wallet:t})=>{if(!await t.isUserOnboarded()){if(e.method==="sol_connect"&&e.params.onlyIfTrusted)return c.userRejectedRequest(e.id);try{await t.requestUserOnboard()}catch{return c.userRejectedRequest(e.id)}}},"requireUserOnboarded");d();p();function Lg({params:e,response:t,analytics:r,data:n}){if(e?.eager){"error"in t||r.approveConnection({...n,eager:!0});return}"error"in t?r.declineConnection({...n,errorCode:t.error.code}):r.approveConnection({...n,eager:!1})}o(Lg,"handleConnectionAnalytics");function Ug({response:e,analytics:t,data:r}){"error"in e?t.declineTransaction({...r,errorCode:e.error.code}):t.approveTransaction(r)}o(Ug,"handleTransactionAnalytics");function Mg({response:e,analytics:t,data:r}){"error"in e?t.declineSignMessage({...r,errorCode:e.error.code}):t.approveSignMessage(r)}o(Mg,"handleSignMessageAnalytics");var sn=o(async({request:e,source:t},{analytics:r})=>{if(!t)return c.internalError(e.id,"missing source");let n=me(t);if(!n)return c.internalError(e.id);let s=n.hostname;return nr(s)?async()=>{}:async i=>{let{method:a,params:l}=e,m={method:a,chainType:"sui",chainId:"mainnet",origin:s};switch(a){case"sui_requestAccounts":Lg({params:l,response:i,analytics:r,data:m});break;case"sui_signTransaction":case"sui_signAndExecuteTransaction":Ug({response:i,analytics:r,data:m});break;case"sui_signMessage":Mg({response:i,analytics:r,data:m});break;default:break}}},"suiAnalytics");d();p();var wi=o(async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return c.userRejectedRequest(r.id);let s=z(n),i=me(n),a=be(n);if(!s||!i)return c.unauthorized(r.id);if(await t.isTrustedApp(s))return;if(r.params?.onlyIfTrusted===!0)return c.userRejectedRequest(r.id);let m=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiRequestAccounts",id:le(),params:[{url:i.toString(),icon:a}]});if("error"in m)return c.error(r.id,m.error)},"requireUserApprovalSuiRequestAccounts");d();p();var Oo=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=me(t),i=be(t);if(!s)return c.unauthorized(e.id);let a=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiSignTransaction",id:le(),params:[{url:s.toString(),icon:i},{transaction:e.params.transaction}]});if("error"in a)return c.error(e.id,a.error)},"requireUserApprovalSuiSignTransaction");d();p();var bi=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=me(t),i=be(t);if(!s)return c.unauthorized(e.id);let a=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiSignMessage",id:le(),params:[{url:s.toString(),icon:i},{message:e.params.message}]});if("error"in a)return c.error(e.id,a.error)},"requireUserApprovalSuiSignMessage");d();p();d();p();d();p();var Si=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.result(e.id,[]);let n=z(t);if(!n)return c.internalError(e.id,"missing source");if(!await r.isTrustedApp(n))return c.result(e.id,[]);let i=await r.eth.getAccounts();return c.result(e.id,i)},"handler");d();p();var Ai=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_blockNumber(a,e.params);return c.any(e.id,l)},"handler");d();p();var _i=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_call(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ei=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_cancelPrivateTransaction(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ti=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.internalError(e.id,"missing source");let n=z(t);if(!n)return c.internalError(e.id,"missing source");let s=await r.eth.getNetworkId(n);return c.result(e.id,s)},"handler");d();p();var vi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_estimateGas(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ii=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_feeHistory(a,e.params);return c.any(e.id,l)},"handler");d();p();var ki=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_gasPrice(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ri=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBalance(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ci=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBlockByHash(a,e.params);return c.any(e.id,l)},"handler");d();p();var Bi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBlockByNumber(a,e.params);return c.any(e.id,l)},"handler");d();p();var Li=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBlockReceipts(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ui=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBlockTransactionCountByHash(a,e.params);return c.any(e.id,l)},"handler");d();p();var Mi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getBlockTransactionCountByNumber(a,e.params);return c.any(e.id,l)},"handler");d();p();var Pi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getCode(a,e.params);return c.any(e.id,l)},"handler");d();p();var Di=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getFilterChanges(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ni=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getFilterLogs(a,e.params);return c.any(e.id,l)},"handler");d();p();var Oi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getLogs(a,e.params);return c.any(e.id,l)},"handler");d();p();var Hi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getProof(a,e.params);return c.any(e.id,l)},"handler");d();p();var Fi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getStorageAt(a,e.params);return c.any(e.id,l)},"handler");d();p();var $i=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getTransactionByBlockHashAndIndex(a,e.params);return c.any(e.id,l)},"handler");d();p();var zi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getTransactionByBlockNumberAndIndex(a,e.params);return c.any(e.id,l)},"handler");d();p();var Vi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getTransactionByHash(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ki=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getTransactionCount(a,e.params);return c.any(e.id,l)},"handler");d();p();var qi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getTransactionReceipt(a,e.params);return c.any(e.id,l)},"handler");d();p();var Gi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getUncleByBlockHashAndIndex(a,e.params);return c.any(e.id,l)},"handler");d();p();var ji=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getUncleByBlockNumberAndIndex(a,e.params);return c.any(e.id,l)},"handler");d();p();var Wi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getUncleCountByBlockHash(a,e.params);return c.any(e.id,l)},"handler");d();p();var Yi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_getUncleCountByBlockNumber(a,e.params);return c.any(e.id,l)},"handler");d();p();var Zi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_maxPriorityFeePerGas(a,e.params);return c.any(e.id,l)},"handler");d();p();var Xi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_newBlockFilter(a,e.params);return c.any(e.id,l)},"handler");d();p();var Ji=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_newFilter(a,e.params);return c.any(e.id,l)},"handler");d();p();var Qi=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_newPendingTransactionFilter(a,e.params);return c.any(e.id,l)},"handler");d();p();var ea=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_protocolVersion(a,e.params);return c.any(e.id,l)},"handler");d();p();var ta=o(async({request:e,source:t},{wallet:r})=>{try{if(!t)return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: handler started - missing source",fe.Error,{requestId:e.id}),c.unauthorized(e.id);let n=z(t),s=me(t);X.addBreadcrumb(Q.Provider,"eth_requestAccounts: handler started",fe.Info,{origin:n??"unknown",url:s?.toString()??"unknown",requestId:e.id});let i=be(t);if(!n||!s)return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: missing origin or url",fe.Error,{requestId:e.id}),c.unauthorized(e.id);let a={url:s,icon:i?new URL(i):void 0};X.addBreadcrumb(Q.Provider,"eth_requestAccounts: adding trusted app",fe.Info,{origin:n,requestId:e.id}),await r.addTrustedApp(n,a),X.addBreadcrumb(Q.Provider,"eth_requestAccounts: getting selected account",fe.Info,{origin:n,requestId:e.id});let l=await r.eth.getSelectedAccount();return X.addBreadcrumb(Q.Provider,"eth_requestAccounts: handler completed successfully",fe.Info,{origin:n,address:l,requestId:e.id}),c.result(e.id,[l])}catch(n){let s=t?z(t)??"unknown":"unknown",i=t?me(t):void 0;throw X.captureError(n instanceof Error?n:new Error(String(n)),Q.Provider),X.addBreadcrumb(Q.Provider,"eth_requestAccounts: handler error",fe.Error,{origin:s,url:i?.toString()??"unknown",requestId:e.id,error:n instanceof Error?n.message:String(n)}),n}},"handler");d();p();var ra=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_sendRawTransaction(a,e.params);return c.any(e.id,l)},"handler");d();p();var na=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_sendPrivateTransaction(a,e.params);return c.any(e.id,l)},"handler");d();p();var oa=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t);if(!s)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(!await r.isTrustedApp(s))return c.unauthorized(e.id);let[a]=e.params,l=await r.eth.getSelectedAccount();if(a.from.toLowerCase()!==l.toLowerCase())return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedWrongAccount"));if(a.type!==Nn.eip1559)return c.transactionRejected(e.id);if(!a.chainId)return c.transactionRejected(e.id);if(!a.nonce)return c.transactionRejected(e.id);let m=await r.eth.signAndSendTransaction(a);return c.any(e.id,{result:m})},"handler");d();p();var sa=o(async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,i=await t.eth.getSelectedAccount();if(n.toLowerCase()!==i)return c.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signMessage(s);return c.result(e.id,a)},"handler");d();p();var ia=o(async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,i=await t.eth.getSelectedAccount();if(s.toLowerCase()!==i)return c.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:1,data:n});return c.result(e.id,a)},"handler");d();p();var aa=o(async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,i=await t.eth.getSelectedAccount();if(n.toLowerCase()!==i)return c.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:3,data:s});return c.result(e.id,a)},"handler");d();p();var ca=o(async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,i=await t.eth.getSelectedAccount();if(n.toLowerCase()!==i)return c.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:4,data:s});return c.result(e.id,a)},"handler");d();p();var da=o(async({request:e},t)=>c.unsupportedMethod(e.id),"handler");d();p();var pa=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id);let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_syncing(a,e.params);return c.any(e.id,l)},"handler");d();p();var ua=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.eth_uninstallFilter(a,e.params);return c.any(e.id,l)},"handler");d();p();var la=o(async({request:e},t)=>c.unsupportedMethod(e.id),"handler");d();p();var ma=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.net_listening(a,e.params);return c.any(e.id,l)},"handler");d();p();var ha=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.internalError(e.id,"missing source");let n=z(t);if(!n)return c.internalError(e.id,"missing source");let s=await r.eth.getNetworkId(n);return c.result(e.id,parseInt(s,16).toString())},"handler");d();p();var fa=o(async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,i=await t.eth.getSelectedAccount();if(s.toLowerCase()!==i)return c.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signMessage(n);return c.result(e.id,a)},"handler");d();p();var ga=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{let[i]=e.params;if(!await r.eth.addChain(i))return c.userRejectedRequest(e.id,n.t("Could not add the requested chain. It is not yet supported."));if(!t)return c.internalError(e.id,"missing source");let l=z(t);return l?await r.eth.switchChain(i.chainId,l)?c.result(e.id,null):(s.eth.unsupportedChain({origin:l,data:{method:e.method,hexChainId:i.chainId,chainName:i.chainName}}),c.internalError(e.id,n.t("Could not switch to the requested chain."))):c.internalError(e.id,"missing source")},"handler");d();p();var ya=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=z(t),s=me(t),i=be(t);if(!n||!s)return c.unauthorized(e.id);if(await r.isTrustedApp(n))return c.result(e.id,dc.enum.CONTINUE_WITH_PHANTOM);let l=await r.requestUserApproval({jsonrpc:"2.0",method:"user_selectEthWallet",id:0,params:[{url:s.toString(),icon:i}]});if("error"in l)return c.error(e.id,l.error);switch(l.result){case ur.user_selectEthWallet.result.enum.CONTINUE_WITH_METAMASK:return c.result(e.id,l.result);case ur.user_selectEthWallet.result.enum.CONTINUE_WITH_PHANTOM:return c.result(e.id,l.result);case ur.user_selectEthWallet.result.enum.ALWAYS_USE_PHANTOM:return await r.setMetaMaskOverrideSetting("USE_PHANTOM"),c.result(e.id,l.result);case ur.user_selectEthWallet.result.enum.ALWAYS_USE_METAMASK:return await r.setMetaMaskOverrideSetting("USE_METAMASK"),c.result(e.id,l.result)}},"handler");d();p();var xa=o(async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return c.internalError(e.id,"missing source");let i=z(t);if(!i)return c.internalError(e.id,"missing source");let[{chainId:a}]=e.params;return await r.eth.switchChain(a,i)?c.result(e.id,null):(s.eth.unsupportedChain({origin:i,data:{method:e.method,hexChainId:a}}),c.chainDisconnected(e.id,n.t("Could not switch to the requested chain. It is not yet supported.")))},"handler");d();p();var wa=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.web3_clientVersion(a,e.params);return c.any(e.id,l)},"handler");d();p();var ba=o(async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return c.internalError(e.id,"missing source");let s=z(t);if(!s)return c.internalError(e.id,"missing source");let i=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(i),l=await n.eth.web3_sha3(a,e.params);return c.any(e.id,l)},"handler");d();p();var Sa=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=z(t),s=me(t),i=be(t);if(!n||!s)return c.unauthorized(e.id);let a=e.params[0];if(!Object.keys(a).includes("eth_accounts"))return c.result(e.id,[]);let m={url:s,icon:i?new URL(i):void 0};return await r.addTrustedApp(n,m),c.result(e.id,[{parentCapability:"eth_accounts",date:Date.now()}])},"handler");d();p();var Aa=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.result(e.id,[]);let n=z(t);return n?await r.isTrustedApp(n)?c.result(e.id,[{invoker:n,parentCapability:"eth_accounts",caveats:[]}]):c.result(e.id,[]):c.result(e.id,[])},"handler");var At={};Fe(At,{sol_connect:()=>al,sol_disconnect:()=>cl,sol_signAllTransactions:()=>dl,sol_signAndSendAllTransactions:()=>ul,sol_signAndSendTransaction:()=>pl,sol_signIn:()=>ml,sol_signMessage:()=>ll,sol_signTransaction:()=>hl});d();p();d();p();var al=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=z(t),s=me(t),i=be(t);if(!n||!s)return c.unauthorized(e.id);let a={url:s,icon:i?new URL(i):void 0};await r.addTrustedApp(n,a);let l=await r.sol.getSelectedAccount();return c.result(e.id,{publicKey:l})},"handler");d();p();var cl=o(async({request:e,source:t})=>t?c.result(e.id,null):c.unauthorized(e.id),"handler");d();p();var dl=o(async({request:e},{wallet:t})=>{let r=await t.sol.signAllTransactions(e.params.transactions);return c.result(e.id,r)},"handler");d();p();var pl=o(async({source:e,request:t},{wallet:r,i18n:n})=>{if(!e)return c.unauthorized(t.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=be(e),i=me(e);if(!i)return c.unauthorized(t.id);let a=await r.sol.getSelectedAccount(),l=await r.sol.signTransaction(t.params.transaction);t.params.showConfirmation&&r.requestUserApproval({jsonrpc:"2.0",method:"user_solTransactionConfirmation",id:le(),params:[{url:i.toString(),icon:s},{signature:l.signature,postAction:t.params.postAction}]});let m=t.params.isSharingEligible?"signAndSendTransaction":void 0;return await r.sol.sendTransaction(l.transaction,{...t.params.options,method:m}),c.result(t.id,{publicKey:a,signature:l.signature})},"handler");d();p();var ul=o(async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await Promise.all(e.params.transactions.map(i=>t.sol.signTransaction(i))),s=await t.sol.sendAllTransactions(n.map(i=>i.transaction));return c.result(e.id,{publicKey:r,signatures:s})},"handler");d();p();var ll=o(async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await t.sol.signMessage(e.params.message);return c.result(e.id,{publicKey:r,signature:n})},"handler");d();p();var ml=o(async({request:e,source:t},{wallet:r,utils:n,i18n:s})=>{if(!t)return c.userRejectedRequest(e.id);let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.userRejectedRequest(e.id);let m=await r.isTrustedApp(i),f=await r.sol.getNetworkId(),b=await r.sol.getSelectedAccount(),g=new URL(a.toString()),w=n.sol.serializeSolanaSignInMessage(e.params.signInData,{expectedChainId:f,expectedAddress:b,expectedURL:g});if(w.type==="fail"){if(w.error[0].label==="PARSE_ERROR")return c.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting."));if(w.error.some(S=>S.label==="chain"))return c.invalidInput(e.id,s.t("The app's signature request cannot be shown as the chain ID does not match the provided chain ID for verification."));if(w.error.some(S=>S.label==="address"))return c.invalidInput(e.id,s.t("The app's signature request cannot be shown as the address does not match the provided address for verification."))}if(e.params.signInData.domain||(e.params.signInData.domain=g.host),e.params.signInData.address||(e.params.signInData.address=b),"error"in await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignIn",params:[{url:a.toString(),icon:l},{connect:!m,signInData:e.params.signInData,message:w.data,errorDetails:w.type==="fail"?w.error:void 0}],id:le()}))return w.type==="fail"?c.invalidInput(e.id,s.t("This sign-in request is invalid. This either means the site is unsafe, or its developer made an error when sending the request.")):c.userRejectedRequest(e.id);m||await r.isTrustedApp(i)||await r.addTrustedApp(i,{url:a,icon:l?new URL(l):void 0});let y=await r.sol.signMessage(w.data);return c.result(e.id,{address:b,signedMessage:w.data,signature:y})},"handler");d();p();var Pg=500,hl=o(async({request:e},{wallet:t})=>{let r=await t.sol.signTransaction(e.params.transaction);if(e.params.isSharingEligible){let n=Date.now(),s=e.params.transactionSharingDelayMs??Pg;try{await Promise.race([t.sol.sendTransaction(r.transaction,{method:"signTransaction"}),Xo(s)]);let i=Date.now()-n,a=Math.max(0,s-i);a>0&&await Xo(a)}catch{}}return c.result(e.id,r)},"handler");var an={};Fe(an,{btc_requestAccounts:()=>fl,btc_signMessage:()=>gl,btc_signPSBT:()=>yl});d();p();d();p();var fl=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=z(t),s=me(t),i=be(t);if(!n||!s)return c.unauthorized(e.id);let a={url:s,icon:i?new URL(i):void 0};await r.addTrustedApp(n,a);let l=await r.btc.getSelectedAccount();return c.result(e.id,l)},"handler");d();p();var gl=o(async({request:e},{wallet:t})=>{let r=await t.btc.signMessage(e.params.address,e.params.message);return c.result(e.id,{...r})},"handler");d();p();var yl=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=await r.btc.signPSBT(...e.params);return c.result(e.id,n)},"handler");var Ie={};Fe(Ie,{phantom_deep_link_browse:()=>xl,phantom_deep_link_cash:()=>$l,phantom_deep_link_chat:()=>zl,phantom_deep_link_competitions:()=>Yl,phantom_deep_link_connect:()=>vl,phantom_deep_link_convert_stake_account:()=>ql,phantom_deep_link_disconnect:()=>Il,phantom_deep_link_explore:()=>Al,phantom_deep_link_feature_flags:()=>_l,phantom_deep_link_feedback_perps:()=>Kl,phantom_deep_link_fungible:()=>bl,phantom_deep_link_mint_psol_marketing:()=>Tl,phantom_deep_link_navigate:()=>Ol,phantom_deep_link_notification_center:()=>El,phantom_deep_link_onboard:()=>Dl,phantom_deep_link_onramp:()=>Nl,phantom_deep_link_perps:()=>Fl,phantom_deep_link_perps_leaderboard:()=>Gl,phantom_deep_link_predictions:()=>jl,phantom_deep_link_signAllTransactions:()=>Ll,phantom_deep_link_signAndSendAllTransactions:()=>Ml,phantom_deep_link_signAndSendTransaction:()=>Ul,phantom_deep_link_signIn:()=>Cl,phantom_deep_link_signMessage:()=>kl,phantom_deep_link_signTransaction:()=>Bl,phantom_deep_link_social:()=>Hl,phantom_deep_link_swap:()=>wl,phantom_deep_link_terminal:()=>Wl,phantom_deep_link_token_chat:()=>Vl,phantom_deep_link_tokens:()=>Pl,phantom_deep_link_user:()=>Sl});d();p();d();p();var xl=o(async({request:e},{wallet:t})=>{let{url:r,ref:n}=e.params;return t.navigate("DetachedBrowser",{url:r,ref:n}),c.result(e.id,null)},"handler");d();p();var wl=o(async({request:e},{wallet:t})=>{let{buy:r,sell:n,amount:s}=e.params,i=r&&r.trim().length>0,a=n&&n.trim().length>0,l,m;return a&&!i?(l={type:"sell",sellCaip19:n,takerCaip19:void 0,takerDestinationCaip19:void 0},m="sell"):(l={type:"buy",buyCaip19:r,...a&&{sellCaip19:n},takerCaip19:void 0,takerDestinationCaip19:void 0},m="buy"),t.navigate("SwapTokenStack",{screen:"SwapToken",params:{swapMode:l,initialSwapAmount:s?{denomination:"fiat",perspective:m,fiatAmount:s}:void 0,comingFrom:Pd.DeepLink}}),c.result(e.id,null)},"handler");d();p();var bl=o(async({request:e},{wallet:t})=>(Fn(e.params.token),t.navigate("FungibleStack",{screen:"FungibleDetail",params:{caip19:e.params.token,entryPoint:"deepLink"}}),c.result(e.id,null)),"handler");d();p();var Sl=o(async({request:e},{wallet:t,analytics:r})=>{let{username:n,action:s}=e.params;return r.userDeepLink({username:n,action:s}),t.openUserProfile(n,s),c.result(e.id,null)},"handler");d();p();var Al=o(async({request:e},{wallet:t})=>(t.navigate("ExploreTab",{screen:"Explore"}),e.params.route&&(e.params.route==="ExplorePerps"?t.navigate("ExploreTab",{screen:"PerpsStack",params:{screen:"ExplorePerps"}}):e.params.route==="ExplorePerpsTrending"?t.navigate("ExploreTab",{screen:"PerpsStack",params:{screen:"ExplorePerpsTrending"}}):t.navigate("ExploreTab",{screen:e.params.route})),c.result(e.id,null)),"handler");d();p();var _l=o(async({request:e},{wallet:t})=>{let{action:r,key:n,type:s,value:i}=e.params;return t.navigate("SettingsStack",{screen:"MockFeatureFlags",params:{action:r,key:n,type:s,value:i}}),c.result(e.id,null)},"handler");d();p();var El=o(async({request:e},{wallet:t})=>(await t.openNotificationCenter({action:e.params.action,id:e.params.id}),c.result(e.id,null)),"handler");d();p();var Tl=o(async({request:e},{wallet:t,remoteConfig:r})=>{let n=await r.getValue("psol-popup-copy-test");return!n||n==="control"?t.navigate("MintLiquidStake",{screen:"MintPSOLInfoPage",params:{entryPoint:"deepLink",presentNext:!0}}):t.navigate("MintLiquidStake",{screen:"MintPSOLMarketingPage",params:{entryPoint:"deepLink",copyVariant:n}}),c.result(e.id,null)},"handler");d();p();d();p();var Ho=o((e,t,r)=>{let n=t.protocol==="https:"||t.protocol==="http:",s=e.protocol==="https:"||e.protocol==="http:",i=s?`${e.protocol}//${e.host}`:e.protocol,a=n?`${t.protocol}//${t.host}`:t.protocol;return i===a||!r&&n&&!s?null:"Redirect link origin does not match app origin"},"validateRedirectOriginMatch");var vl=o(async({request:e},{wallet:t,secrets:r,utils:n,i18n:s,featureFlags:i})=>{let a=ut(e.params.redirect_link,{restrictProtocols:!1}),l=a?.href;if(!l)return c.error(e.id,{code:400,message:"Invalid redirect URL provided."});let m=ut(e.params.app_url,{restrictProtocols:!1});if(!m)return c.invalidInput(e.id,s.t("Invalid app_url provided."));let f=await i.isEnabled("enable-strict-deeplink-origin-checks"),b=Ho(a,m,f);if(b)return c.invalidInput(e.id,s.t(b));try{a.username="",a.password="";let g=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:le(),params:[{url:`phantom.app.deep-link-${l}`,icon:n.getFaviconURL(a.href)}]});if("error"in g)return c.error(e.id,g.error);let w=or(a);await t.isTrustedApp(w)&&await t.deleteTrustedApp(w),await t.addTrustedApp(w,{url:new URL(w),icon:new URL(n.getFaviconURL(l))});let _=await t.sol.getSelectedAccount(),{sharedSecret:y,phantomKeySecret:S,phantomKeyPublicKey:x}=r.generateSharedSecret(e.params.dapp_encryption_public_key);await r.setSharedSecret(new ve.PublicKey(_).toBase58(),e.params.dapp_encryption_public_key,y,S,x);let E=await r.generateSession(new ve.PublicKey(_).toBase58(),e.params?.cluster??"mainnet-beta",e.params.app_url),{nonce:C,encryptedPayload:I}=await r.encryptDeepLinkDappPayload(E,new ve.PublicKey(_).toBase58(),e.params.dapp_encryption_public_key);return c.result(e.id,{phantom_encryption_public_key:x,nonce:C,data:I})}catch(g){return c.error(e.id,{code:500,message:g?.message||"An unexpected error occurred during connect."})}},"handler");d();p();var Il=o(async({request:e},{i18n:t,wallet:r,secrets:n,utils:s,featureFlags:i})=>{let a=await r.sol.getSelectedAccount(),l=s.sol.chainIdToCluster(await r.sol.getNetworkId()),m=await i.isEnabled("enable-strict-deeplink-origin-checks");if(typeof(await n.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new ve.PublicKey(a),l,m)).session!="string")return c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."});let b=ut(e.params.redirect_link,{restrictProtocols:!1});if(!b)return c.invalidInput(e.id,t.t("Redirect link or app session url is invalid."));let g=or(b);return await r.isTrustedApp(g)&&await r.deleteTrustedApp(g),n.deleteSharedSecret(a,e.params.dapp_encryption_public_key),c.result(e.id,null)},"handler");d();p();var kl=o(async({request:e},{wallet:t,secrets:r,utils:n,featureFlags:s})=>{let i=await t.sol.getSelectedAccount(),a=n.sol.chainIdToCluster(await t.sol.getNetworkId()),l=await s.isEnabled("enable-strict-deeplink-origin-checks"),m=e.params,f=await r.decryptDeepLinkDappPayload(m,e.params.dapp_encryption_public_key,new ve.PublicKey(i),a,l);if(typeof f.session!="string"||typeof f.message!="string"||!(!f.display||["utf8","hex"].includes(f.display)))return c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."});let b={message:f.message,display:f.display??"utf8"},g=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:le(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{...b,autoConfirmStatusCode:Ae.Disabled}]});if("error"in g)return c.error(e.id,g.error);let _={signature:await t.sol.signMessage(f.message),publicKey:i},{nonce:y,encryptedPayload:S}=await r.encryptDeepLinkDappPayload(_,new ve.PublicKey(i).toBase58(),e.params.dapp_encryption_public_key);return c.result(e.id,{nonce:y,data:S})},"handler");d();p();var Rl=Ge(tn(),1);var Cl=o(async({request:e},{wallet:t,secrets:r,utils:n,i18n:s,featureFlags:i})=>{let a;try{a=JSON.parse(Buffer.from(Rl.default.decode(e.params.payload)).toString())}catch{return c.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting. Please contact the app developer for assistance."))}let l=ut(e.params.redirect_link,{restrictProtocols:!1}),m=ut(e.params.app_url,{restrictProtocols:!1});if(!l||!m)return c.invalidInput(e.id,s.t("Redirect link or app session url is invalid."));let f=await i.isEnabled("enable-strict-deeplink-origin-checks"),b=Ho(l,m,f);if(b)return c.invalidInput(e.id,s.t(b));let g=or(l),w=await t.isTrustedApp(g),_=await t.sol.getNetworkId(),y=await t.sol.getSelectedAccount(),S=n.sol.serializeSolanaSignInMessage(a,{expectedChainId:_,expectedAddress:y,expectedURL:l});if(S.type==="fail"){if(S.error[0].label==="PARSE_ERROR")return c.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting."));if(S.error.some(J=>J.label==="chain"))return c.invalidInput(e.id,s.t("The app's signature request cannot be shown as the chain ID does not match the provided chain ID for verification."));if(S.error.some(J=>J.label==="address"))return c.invalidInput(e.id,s.t("The app's signature request cannot be shown as the address does not match the provided address for verification."))}if(a.domain||(a.domain=l.host),a.address||(a.address=y),"error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignIn",params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{connect:!w,signInData:a,message:S.data,errorDetails:S.type==="fail"?S.error:void 0}],id:le()}))return S.type==="fail"?c.invalidInput(e.id,s.t("This sign-in request is invalid. This either means the site is unsafe, or its developer made an error when sending the request.")):c.userRejectedRequest(e.id);w||await t.isTrustedApp(g)||await t.addTrustedApp(g,{url:new URL(g),icon:new URL(n.getFaviconURL(l.href))});let{sharedSecret:E,phantomKeySecret:C,phantomKeyPublicKey:I}=r.generateSharedSecret(e.params.dapp_encryption_public_key);await r.setSharedSecret(new ve.PublicKey(y).toBase58(),e.params.dapp_encryption_public_key,E,C,I);let B=await r.generateSession(new ve.PublicKey(y).toBase58(),e.params?.cluster??"mainnet-beta",e.params.app_url),D=await t.sol.signMessage(S.data),M={address:B.public_key,signature:D,signedMessage:S.data,session:B.session},{nonce:ee,encryptedPayload:W}=await r.encryptDeepLinkDappPayload(M,new ve.PublicKey(y).toBase58(),e.params.dapp_encryption_public_key);return c.result(e.id,{phantom_encryption_public_key:I,nonce:ee,data:W})},"handler");d();p();var Bl=o(async({request:e},{wallet:t,secrets:r,utils:n,featureFlags:s})=>{let i=await t.sol.getSelectedAccount(),a=n.sol.chainIdToCluster(await t.sol.getNetworkId()),l=await s.isEnabled("enable-strict-deeplink-origin-checks"),m=await r.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new ve.PublicKey(i),a,l);if(typeof m.session!="string"||typeof m.transaction!="string")return c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."});let f=await t.sol.addPriorityFee(m.transaction),b=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignTransaction",id:le(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{transaction:f,autoConfirmStatusCode:Ae.Disabled}]});if("error"in b)return c.error(e.id,b.error);let{transaction:g}=await t.sol.signTransaction(f),w={transaction:g},{nonce:_,encryptedPayload:y}=await r.encryptDeepLinkDappPayload(w,new ve.PublicKey(i).toBase58(),e.params.dapp_encryption_public_key);return c.result(e.id,{nonce:_,data:y})},"handler");d();p();var Ll=o(async({request:e},{wallet:t,secrets:r,utils:n,featureFlags:s})=>{let i=await t.sol.getSelectedAccount(),a=n.sol.chainIdToCluster(await t.sol.getNetworkId()),l=await s.isEnabled("enable-strict-deeplink-origin-checks"),m=await r.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new ve.PublicKey(i),a,l);if(typeof m.session!="string"||!Array.isArray(m.transactions)||!m.transactions.every(S=>typeof S=="string"))return c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."});let f=await Promise.all(m.transactions.map(S=>t.sol.addPriorityFee(S))),b=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:le(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{transactions:f,autoConfirmStatusCode:Ae.Disabled}]});if("error"in b)return c.error(e.id,b.error);let w={transactions:(await t.sol.signAllTransactions(f)).map(S=>S.transaction)},{nonce:_,encryptedPayload:y}=await r.encryptDeepLinkDappPayload(w,new ve.PublicKey(i).toBase58(),e.params.dapp_encryption_public_key);return c.result(e.id,{nonce:_,data:y})},"handler");d();p();var Ul=o(async({request:e})=>c.error(e.id,{code:Re.MethodNotFound,message:"This method is not supported"}),"handler");d();p();var Ml=o(async({request:e})=>c.error(e.id,{code:Re.MethodNotFound,message:"This method is not supported"}),"handler");d();p();var Dg=Qe.getAllChainIDs(),Ng=o((e,t)=>{let r=e?Dg.find(i=>e===i):void 0;if(!r)throw new Error(`Chain ${e} not supported`);let n=Qe[r],s=n.mainnetID;return typeof t!="string"?Zo({chainId:s,resourceType:Yo.nativeToken,slip44:n.slip44}):Zo({chainId:s,address:t,resourceType:Yo.address})},"getCaip19FromUrlPath"),Pl=o(async({request:e},{wallet:t,analytics:r})=>{let{chain:n,address:s}=e.params,i=Ng(n,s);return r.tokenDeepLink({caip19:i,...e.params}),t.navigate("FungibleStack",{screen:"FungibleDetail",params:{caip19:i,entryPoint:"deepLink"}}),c.result(e.id,null)},"handler");d();p();var Dl=o(async({request:e},{wallet:t})=>{if(!(Za()||Ya()))return c.methodNotFound(e.id);let r=null,n=null,{value:s,accounts:i}=e.params;s&&(r=new Uint8Array(Buffer.from(s,"utf-8")),n=tt.from(r),r.fill(0));let a=i?parseInt(i):1;if(a<1)throw new Error("accounts must be greater than 0");return await t.onboardQuickly(n,a),c.result(e.id,null)},"handler");d();p();var Nl=o(async({request:e},{wallet:t,analytics:r})=>{let n=e.params.buy,s=e.params.amount,i=e.params.redirectURL,a=n?"FiatRampAmount":"FiatRampSelectFungible";return r.fiatOnrampInitiated({native:!1}),t.navigate("FiatRampStack",{screen:a,params:{buy:n,amount:s,redirectURL:i}}),c.result(e.id,null)},"handler");d();p();var Ol=o(async({request:e},{wallet:t})=>(t.navigate(e.params.route,e.params.params),c.result(e.id,null)),"handler");d();p();var Hl=o(async({request:e},{wallet:t})=>(t.navigate("SocialFeedTab",{screen:"SocialFeed"}),c.result(e.id,null)),"handler");d();p();d();p();var Fo=o(e=>e?.type==="DeepLinkRpcRequestSource","isDeepLinkSource");var Og=o(e=>{if(!Fo(e))return[];try{let r=new URL(e.deepLinkUrl).pathname.split("/").filter(Boolean),n=r.indexOf("perps");if(n!==-1)return r.slice(n+1)}catch(t){console.error("Failed to parse deeplink URL:",t)}return[]},"extractPerpsPathSegments"),Fl=o(async({request:e,source:t},{wallet:r})=>{let{marketId:n}=e.params,s=Og(t);if(s[0]==="market-list"){let l=s[1];return l?r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"PerpsMarketList",params:{listKey:l}}}):r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"Perps"}}),c.result(e.id,null)}r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"Perps"}});let i=n,a=n?.startsWith("hypercore:mainnet/address:")?n.split("hypercore:mainnet/address:")[1]:void 0;!i&&s[0]&&(a=s[0].split("-")[0]?.toUpperCase(),a&&(i=`hypercore:mainnet/address:${a}`));try{let l=i?Fn(i):void 0;l&&r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"PerpMarketDetails",params:{data:a?{token:l,name:a}:{token:l}}}})}catch(l){console.error("Failed to decode caip19:",l)}return c.result(e.id,null)},"handler");d();p();var $l=o(async({request:e},{wallet:t})=>(t.openCashTab&&await t.openCashTab(e.params),c.result(e.id,null)),"handler");d();p();var zl=o(async({request:e},{wallet:t})=>(await t.openChat({chatId:e.params.chatId,chatType:e.params.chatType}),c.result(e.id,null)),"handler");d();p();var Vl=o(async({request:e},{wallet:t})=>(await t.openChat({chatId:e.params.caip19,chatType:"token"}),c.result(e.id,null)),"handler");d();p();var Kl=o(async({request:e},{wallet:t})=>(t.navigate("Tab",{screen:"HomeTab",params:{screen:"Home",params:{showPerpsFeedbackInterstitial:Date.now()}}}),c.result(e.id,null)),"handler");d();p();var ql=o(async({request:e},{wallet:t})=>(t.navigate("ConvertToLiquidStake",{screen:"ConvertStakeAccountDeepLinkPage",params:{stakeAddress:e.params.stakeAddress}}),c.result(e.id,null)),"handler");d();p();var Gl=o(async({request:e},{wallet:t})=>{let{period:r}=e.params;return t.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"TopPerpsTradersPage",params:r?{period:r}:void 0}}),c.result(e.id,null)},"handler");d();p();var _t={Feed:"PredictionFeed",Detail:"PredictionDetail",Positions:"Positions",RecentActivity:"PredictionRecentActivity",Categories:"PredictionCategories",CategoryList:"PredictionCategoryList",TagList:"PredictionTagList",ScopeList:"PredictionScopeList",Search:"PredictionSearch",Hub:"PredictionHub"},Hg="deeplink";function Fg(e){if(!e)return[];try{let t=new URL(e),r=t.pathname.split("/").filter(Boolean),n=r.indexOf("predictions");return n!==-1?r.slice(n+1):(t.hostname==="predictions",r)}catch{return[]}}o(Fg,"parsePathSegments");var jl=o(async({request:e,source:t},{wallet:r})=>{let n=e.params,s=Fo(t)?t.deepLinkUrl:void 0,i=Fg(s),a=o(()=>{r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Feed}})},"navigateToPredictionsFeed"),l=o(f=>{a(),r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Detail,params:{ticker:f,entryPointButton:Hg}}})},"navigateToEventDetail");switch(i[0]?.toLowerCase()){case"feed":{a();break}case"positions":{r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Positions}});break}case"activity":{r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.RecentActivity}});break}case"search":{r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Search}});break}case"categories":{r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Categories}});break}case"event":case"market":{let f=i[1]||n.ticker;f?l(f):a();break}case"category":{let f=i[1]||n.categoryId,b=n.categoryLabel||f||"Category";f?(a(),r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.CategoryList,params:{categoryId:f,categoryLabel:b}}})):r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Categories}});break}case"tag":{let f=i[1]||n.categoryId,b=i[2]||n.tagId,g=n.tagLabel||b||"Tag",w=n.competitionType;f&&b?(a(),r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.TagList,params:{categoryId:f,tagId:b,tagLabel:g,competitionType:w}}})):a();break}case"scope":{let f=i[1]||n.categoryId,b=i[2]||n.tagId,g=i[3]||n.scopeId,w=n.scopeLabel||g||"Scope",_=n.competitionType;f&&b&&g?(a(),r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.ScopeList,params:{categoryId:f,tagId:b,scopeId:g,scopeLabel:w,competitionType:_}}})):a();break}case"hub":{let f=i[1];f?(a(),r.navigate("HomeTab",{screen:"PredictionStack",params:{screen:_t.Hub,params:{hubId:f}}})):a();break}default:{a();break}}return c.result(e.id,null)},"handler");d();p();var Wl=o(async({request:e},{wallet:t})=>(t.navigate("TerminalInterstitialPage"),c.result(e.id,null)),"handler");d();p();var Yl=o(async({request:e},{wallet:t})=>(t.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"CompetitionsStack",params:{screen:"CompetitionDetails",params:{competitionId:e.params.competitionId}}}}),c.result(e.id,null)),"handler");var ar={};Fe(ar,{sol_mwa_authorize:()=>Xl,sol_mwa_reauthorize:()=>Zl,sol_mwa_sign_and_send_transactions:()=>Jl,sol_mwa_sign_messages:()=>em,sol_mwa_sign_transactions:()=>Ql});d();p();d();p();var Zl=o(async({request:e},t)=>c.result(e.id,{type:"REAUTHORIZE_SUCCESS"}),"handler");d();p();var Xl=o(async({request:e},{wallet:t,logger:r,utils:n})=>{let{cluster:s="mainnet-beta",identity:i}=e.params,{identityUri:a,iconRelativeUri:l}=i;if(!a)return r.error("identityUri is not defined in sol_mwa_authorize rpc request payload"),c.result(e.id,{type:"AUTHORIZE_DECLINE"});let m=s==="mainnet-beta"?"mainnet":"testnet",f=await t.sol.getNetworkId()===pc.value?"mainnet":"testnet";if(m!==f)return await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmIncorrectMode",id:le(),params:[{url:`phantom.app.mwa-${a}`,icon:l?`${a}/${l}`:n.getFaviconURL(a)},f]}),c.result(e.id,{type:"AUTHORIZE_DECLINE"});if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:le(),params:[{url:a,icon:l?`${a}/${l}`:n.getFaviconURL(a)}]}))return c.result(e.id,{type:"AUTHORIZE_DECLINE"});let g=await t.sol.getSelectedAccount();return c.result(e.id,{type:"AUTHORIZE_SUCCESS",publicKey:g,accountLabel:"phantom-wallet"})},"handler");d();p();var _a=Ge(tn(),1);var Jl=o(async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:i,verifiableIdentity:a}=e.params.signPayloads,{identityUri:l,iconRelativeUri:m}=a.identity,f=await t.sol.getSelectedAccount();if(s!==f)return c.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_ERROR_AUTHORIZATION_NOT_VALID"});if(!l)return r.error("identityUri is not defined in sol_mwa_sign_and_send_transactions rpc request payload"),c.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_DECLINE"});let b=i.map(_=>_a.default.encode(Buffer.from(_,"base64"))),g=await Promise.all(b.map(_=>t.sol.addPriorityFee(_)));if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendAllTransactions",id:le(),params:[{url:`phantom.app.mwa-${l}`,icon:m?`${l}/${m}`:n.getFaviconURL(l)},{transactions:g,autoConfirmStatusCode:Ae.Disabled}]}))return c.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_DECLINE"});try{let _=await t.sol.signAllTransactions(g);await t.sol.sendAllTransactions(_.map(S=>S.transaction));let y=_.map(S=>Buffer.from(_a.default.decode(S.signature)).toString("base64"));return c.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_SUCCESS",signedPayloads:y})}catch{return c.error(e.id,{code:Re.InternalError,message:"Internal error"})}},"handler");d();p();var Ea=Ge(tn(),1);var Ql=o(async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:i,verifiableIdentity:a}=e.params.signPayloads,{identityUri:l,iconRelativeUri:m}=a.identity,f=await t.sol.getSelectedAccount();if(s!==f)return c.result(e.id,{type:"SIGN_PAYLOADS_ERROR_AUTHORIZATION_NOT_VALID"});if(!l)return r.error("identityUri is not defined in sol_mwa_sign_transactions rpc request payload"),c.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});let b=i.map(_=>Ea.default.encode(Buffer.from(_,"base64"))),g=await Promise.all(b.map(_=>t.sol.addPriorityFee(_)));if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:le(),params:[{url:`phantom.app.mwa-${l}`,icon:m?`${l}/${m}`:n.getFaviconURL(l)},{transactions:g,autoConfirmStatusCode:Ae.Disabled}]}))return c.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});try{let y=(await t.sol.signAllTransactions(g)).map(S=>Buffer.from(Ea.default.decode(S.transaction)).toString("base64"));return c.result(e.id,{type:"SIGN_PAYLOADS_SUCCESS",signedPayloads:y})}catch{return c.error(e.id,{code:Re.InternalError,message:"Internal error"})}},"handler");d();p();var Ta=Ge(tn(),1);var em=o(async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:i,verifiableIdentity:a}=e.params.signPayloads,{identityUri:l,iconRelativeUri:m}=a.identity,f=await t.sol.getSelectedAccount();if(s!==f)return c.result(e.id,{type:"SIGN_PAYLOADS_ERROR_AUTHORIZATION_NOT_VALID"});if(!l)return r.error("identityUri is not defined in sol_mwa_sign_messages rpc request payload"),c.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});let b=Ta.default.encode(Buffer.from(i[0],"base64")),g={message:b,display:"utf8"};if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:le(),params:[{url:`phantom.app.mwa-${l}`,icon:m?`${l}/${m}`:n.getFaviconURL(l)},{...g,autoConfirmStatusCode:Ae.Disabled}]}))return c.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});try{let _=await t.sol.signMessage(b),y=Buffer.from(Ta.default.decode(_)).toString("base64");return c.result(e.id,{type:"SIGN_PAYLOADS_SUCCESS",signedPayloads:[y]})}catch{return c.error(e.id,{code:Re.InternalError,message:"Internal error"})}},"handler");var Ln={};Fe(Ln,{sol_pay_transaction:()=>rm,sol_pay_transfer:()=>tm});d();p();d();p();var tm=o(async({request:e},{wallet:t})=>await t.sol.handleSolanaPayTransfer(e.params)?c.result(e.id,null):c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."}),"handler");d();p();var rm=o(async({request:e},{wallet:t})=>{let r=await t.sol.handleSolanaPayTransaction(e.params);if(!r){let l=await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmSolPayError",id:le(),params:[{url:e.params.link,icon:null}]});return"error"in l?c.error(e.id,l.error):c.invalidInput(e.id)}let{icon:n,label:s,transaction:i}=r,a=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolPayTransaction",id:le(),params:[{url:e.params.link,icon:n},{label:s,transaction:i}]});if("error"in a)return c.error(e.id,a.error);if(!i)return c.error(e.id,{code:Re.InvalidInput,message:"Missing or invalid parameters."});switch(a.result.type){case"send":{await t.sol.sendTransaction(i);break}case"signAndSend":{let l=await t.sol.signTransaction(i);await t.sol.sendTransaction(l.transaction);break}}return c.result(e.id,null)},"handler");var Er={};Fe(Er,{sui_requestAccounts:()=>nm,sui_signAndExecuteTransaction:()=>im,sui_signMessage:()=>sm,sui_signTransaction:()=>om});d();p();d();p();var nm=o(async({request:e,source:t},{wallet:r})=>{if(!t)return c.unauthorized(e.id);let n=z(t),s=be(t),i=me(t);if(!n||!i)return c.unauthorized(e.id);let a={url:i,icon:s?new URL(s):void 0};await r.addTrustedApp(n,a);let l=await r.sui.getSelectedAccount();return c.result(e.id,l)},"handler");d();p();var om=o(async({request:e},{wallet:t})=>{let r=await t.sui.signTransaction(e.params.address,e.params.transaction,e.params.networkID);return c.result(e.id,r)},"handler");d();p();var sm=o(async({request:e},{wallet:t})=>{let r=await t.sui.signMessage(e.params.address,e.params.message);return c.result(e.id,r)},"handler");d();p();var im=o(async({request:e},{wallet:t})=>{let r=await t.sui.signAndExecuteTransaction(e.params.address,e.params.transaction,e.params.networkID);return c.result(e.id,r)},"handler");var Tr={};Fe(Tr,{phantom_getFeatures:()=>am,phantom_getUser:()=>cm,phantom_login:()=>dm,phantom_logout:()=>pm});d();p();d();p();var am=o(async({request:e},{featureFlags:t})=>{let r=[];return await t.isEnabled("enable-phantom-login")&&r.push("phantom_login"),c.result(e.id,{features:r})},"handler");d();p();var cm=o(async({request:e},{wallet:t})=>{let r=await t.getUser();return c.result(e.id,r)},"handler");d();p();var dm=o(async({request:e,source:t},{wallet:r,featureFlags:n})=>{if(!t)return c.userRejectedRequest(e.id);if(!await n.isEnabled("enable-phantom-login"))return c.error(e.id,{code:-32601,message:"phantom_login is currently disabled"});let i=z(t),a=me(t),l=be(t);if(!i||!a)return c.unauthorized(e.id);let m=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveKmsLogin",params:[{url:a.toString(),icon:l},{appId:e.params.appId,publicKey:e.params.publicKey}],id:le()});return"error"in m?c.userRejectedRequest(e.id):c.result(e.id,m.result)},"handler");d();p();var pm=o(async({request:e})=>{try{return c.result(e.id,null)}catch{return c.internalError(e.id)}},"handler");var vr={};Fe(vr,{phantom_auto_confirm_disable:()=>mm,phantom_auto_confirm_enable:()=>um,phantom_auto_confirm_status:()=>lm,phantom_auto_confirm_supported_chains:()=>hm});d();p();d();p();var um=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t),i=me(t);if(!s||!i)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let{enabled:a,networks:l}=await r.getAutoConfirmStatus(s);if(a)return c.result(e.id,{enabled:!0,chains:l});let m=await r.fetchAutoConfirmSupportedNetworks(s);if(!m||m.length===0)return c.unsupportedMethod(e.id,"No supported networks found for this domain.");let f=e.params.chains||[],b=be(t);if("error"in await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEnableAutoconfirm",id:le(),params:[{url:i.toString(),icon:b},{origin:s,requestedChains:f}]}))return c.userRejectedRequest(e.id,"User rejected auto confirm");try{await r.enableAutoConfirm(s,f);let{enabled:w,networks:_}=await r.getAutoConfirmStatus(s);return c.result(e.id,{enabled:w,chains:_})}catch{return c.error(e.id,{code:Re.InternalError,message:"Failed to enable auto confirm"})}},"handler");d();p();var lm=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t);if(!s)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{let{enabled:i,networks:a}=await r.getAutoConfirmStatus(s);return c.result(e.id,{enabled:i,chains:a})}catch{return c.error(e.id,{code:Re.InternalError,message:"Failed to get auto confirm status"})}},"handler");d();p();var mm=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t);if(!s)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{await r.disableAutoConfirm(s);let{enabled:i,networks:a}=await r.getAutoConfirmStatus(s);return c.result(e.id,{enabled:i,chains:a})}catch{return c.error(e.id,{code:Re.InternalError,message:"Failed to disable auto confirm"})}},"handler");d();p();var hm=o(async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=z(t);if(!s)return c.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{let i=await r.fetchAutoConfirmSupportedNetworks(s);return c.result(e.id,{chains:i})}catch{return c.error(e.id,{code:Re.InternalError,message:"Failed to get supported chains for auto confirm"})}},"handler");var zt={};Fe(zt,{btc:()=>ka,eth:()=>va,phantom_auto_confirm:()=>Ma,phantom_deep_link:()=>Ra,phantom_embedded:()=>Ua,sol:()=>Ia,sol_mwa:()=>Ca,sol_pay:()=>Ba,sui:()=>La});d();p();var va={};Fe(va,{initialize:()=>$g});d();p();var $g=o((e,t="BrowserTabRpcRequestSource")=>({eth_accounts:j().parse(we.eth_accounts).context(e).use([Ve(100),de(t),G,xe,ue],Si),eth_blockNumber:j().parse(we.eth_blockNumber).context(e).use([G,de(t),xe,ue],Ai),eth_call:j().parse(we.eth_call).context(e).use([G,de(t),xe,ue],_i),eth_cancelPrivateTransaction:j().parse(we.eth_cancelPrivateTransaction).context(e).use([G,de(t),xe,ue],Ei),eth_chainId:j().parse(we.eth_chainId).context(e).use([G,de(t),xe,ue],Ti),eth_estimateGas:j().parse(we.eth_estimateGas).context(e).use([G,de(t),xe,ue],vi),eth_feeHistory:j().parse(we.eth_feeHistory).context(e).use([G,de(t),xe,ue],Ii),eth_gasPrice:j().parse(we.eth_gasPrice).context(e).use([G,de(t),xe,ue],ki),eth_getBalance:j().parse(we.eth_getBalance).context(e).use([G,de(t),xe,ue],Ri),eth_getBlockByHash:j().parse(we.eth_getBlockByHash).context(e).use([G,de(t),xe,ue],Ci),eth_getBlockByNumber:j().parse(we.eth_getBlockByNumber).context(e).use([G,de(t),xe,ue],Bi),eth_getBlockReceipts:j().parse(we.eth_getBlockReceipts).context(e).use([G,de(t),xe,ue],Li),eth_getBlockTransactionCountByHash:j().parse(we.eth_getBlockTransactionCountByHash).context(e).use([G,de(t),xe,ue],Ui),eth_getBlockTransactionCountByNumber:j().parse(we.eth_getBlockTransactionCountByNumber).context(e).use([G,de(t),xe,ue],Mi),eth_getCode:j().parse(we.eth_getCode).context(e).use([G,de(t),xe,ue],Pi),eth_getFilterChanges:j().parse(we.eth_getFilterChanges).context(e).use([G,de(t),xe,ue],Di),eth_getFilterLogs:j().parse(we.eth_getFilterLogs).context(e).use([G,de(t),xe,ue],Ni),eth_getLogs:j().parse(we.eth_getLogs).context(e).use([G,de(t),xe,ue],Oi),eth_getProof:j().parse(we.eth_getProof).context(e).use([G,de(t),xe,ue],Hi),eth_getStorageAt:j().parse(we.eth_getStorageAt).context(e).use([G,de(t),xe,ue],Fi),eth_getTransactionByBlockHashAndIndex:j().parse(we.eth_getTransactionByBlockHashAndIndex).context(e).use([G,de(t),xe,ue],$i),eth_getTransactionByBlockNumberAndIndex:j().parse(we.eth_getTransactionByBlockNumberAndIndex).context(e).use([G,de(t),xe,ue],zi),eth_getTransactionByHash:j().parse(we.eth_getTransactionByHash).context(e).use([G,de(t),xe,ue],Vi),eth_getTransactionCount:j().parse(we.eth_getTransactionCount).context(e).use([G,de(t),xe,ue],Ki),eth_getTransactionReceipt:j().parse(we.eth_getTransactionReceipt).context(e).use([G,de(t),xe,ue],qi),eth_getUncleByBlockHashAndIndex:j().parse(we.eth_getUncleByBlockHashAndIndex).context(e).use([G,de(t),xe,ue],Gi),eth_getUncleByBlockNumberAndIndex:j().parse(we.eth_getUncleByBlockNumberAndIndex).context(e).use([G,de(t),xe,ue],ji),eth_getUncleCountByBlockHash:j().parse(we.eth_getUncleCountByBlockHash).context(e).use([G,de(t),xe,ue],Wi),eth_getUncleCountByBlockNumber:j().parse(we.eth_getUncleCountByBlockNumber).context(e).use([G,de(t),xe,ue],Yi),eth_maxPriorityFeePerGas:j().parse(we.eth_maxPriorityFeePerGas).context(e).use([G,de(t),xe,ue],Zi),eth_newBlockFilter:j().parse(we.eth_newBlockFilter).context(e).use([G,de(t),xe,ue],Xi),eth_newFilter:j().parse(we.eth_newFilter).context(e).use([G,de(t),xe,ue],Ji),eth_newPendingTransactionFilter:j().parse(we.eth_newPendingTransactionFilter).context(e).use([G,de(t),xe,ue],Qi),eth_protocolVersion:j().parse(we.eth_protocolVersion).context(e).use([G,de(t),xe,ue],ea),eth_requestAccounts:j().parse(we.eth_requestAccounts).context(e).use([Ve(100),de(t),G,xe,ue,Zs,ti],ta),eth_sendRawTransaction:j().parse(we.eth_sendRawTransaction).context(e).use([G,de(t),xe,ue],ra),eth_sendPrivateTransaction:j().parse(we.eth_sendPrivateTransaction).context(e).use([G,de(t),xe,ue],na),eth_sendTransaction:j().parse(we.eth_sendTransaction).context(e).use([G,de(t),Je,xe,ue,ze(t),Ys,ir,ni],oa),eth_sign:j().parse(we.eth_sign).context(e).use([G,de(t),Je,xe,ue,ze(t),oi],sa),eth_signTypedData:j().parse(we.eth_signTypedData).context(e).use([G,de(t),Je,xe,ue,ze(t),ir,si],ia),eth_signTypedData_v3:j().parse(we.eth_signTypedData_v3).context(e).use([G,de(t),Je,xe,ue,ze(t),ir,ii],aa),eth_signTypedData_v4:j().parse(we.eth_signTypedData_v4).context(e).use([G,de(t),Je,xe,ue,ze(t),ir,ai],ca),eth_subscribe:j().parse(we.eth_subscribe).context(e).use([G,de(t),xe,ue],da),eth_syncing:j().parse(we.eth_syncing).context(e).use([G,de(t),xe,ue],pa),eth_uninstallFilter:j().parse(we.eth_uninstallFilter).context(e).use([G,de(t),xe,ue],ua),eth_unsubscribe:j().parse(we.eth_unsubscribe).context(e).use([G,de(t),xe,ue],la),net_listening:j().parse(we.net_listening).context(e).use([G,de(t),xe,ue],ma),net_version:j().parse(we.net_version).context(e).use([G,de(t),xe,ue],ha),personal_sign:j().parse(we.personal_sign).context(e).use([G,de(t),Je,xe,ue,ze(t),ui],fa),wallet_addEthereumChain:j().parse(we.wallet_addEthereumChain).context(e).use([G,de(t),xe,ue,ir],ga),wallet_selectEthereumProvider:j().parse(we.wallet_selectEthereumProvider).context(e).use([G,de(t),xe,ue],ya),wallet_switchEthereumChain:j().parse(we.wallet_switchEthereumChain).context(e).use([G,de(t),xe,ue,ze(t),ir],xa),wallet_requestPermissions:j().parse(we.wallet_requestPermissions).context(e).use([G,de(t),xe,ue,ri],Sa),wallet_getPermissions:j().parse(we.wallet_getPermissions).context(e).use([G,de(t),xe,ue],Aa),web3_clientVersion:j().parse(we.web3_clientVersion).context(e).use([G,de(t),xe,ue],wa),web3_sha3:j().parse(we.web3_sha3).context(e).use([G,de(t),xe,ue],ba)}),"initialize");var Ia={};Fe(Ia,{initialize:()=>zg});d();p();var zg=o((e,t="BrowserTabRpcRequestSource")=>({sol_connect:j().parse(Ct.sol_connect).context(e).use([Ve(10),de(t),G,Oe,kt,ue,li],At.sol_connect),sol_disconnect:j().parse(Ct.sol_disconnect).context(e).use([G,de(t),kt,ue],At.sol_disconnect),sol_signAllTransactions:j().parse(Ct.sol_signAllTransactions).context(e).use([G,de(t),Je,kt,ue,ze(t),en,mi],At.sol_signAllTransactions),sol_signAndSendTransaction:j().parse(Ct.sol_signAndSendTransaction).context(e).use([G,de(t),Je,kt,ue,ze(t),en,fi],At.sol_signAndSendTransaction),sol_signAndSendAllTransactions:j().parse(Ct.sol_signAndSendAllTransactions).context(e).use([G,de(t),Je,kt,ue,ze(t),en,hi],At.sol_signAndSendAllTransactions),sol_signMessage:j().parse(Ct.sol_signMessage).context(e).use([G,de(t),Je,kt,ue,ze(t),Xs,gi],At.sol_signMessage),sol_signTransaction:j().parse(Ct.sol_signTransaction).context(e).use([G,de(t),Je,kt,ue,ze(t),en,yi],At.sol_signTransaction),sol_signIn:j().parse(Ct.sol_signIn).context(e).use([G,de(t),Oe,kt,ue],At.sol_signIn)}),"initialize");var ka={};Fe(ka,{initialize:()=>Vg});d();p();var Vg=o((e,t="BrowserTabRpcRequestSource")=>({btc_requestAccounts:j().parse(On.btc_requestAccounts).context(e).use([Ve(10),de(t),G,Rn,Js],an.btc_requestAccounts),btc_signPSBT:j().parse(On.btc_signPSBT).context(e).use([G,de(t),Rn,ei],an.btc_signPSBT),btc_signMessage:j().parse(On.btc_signMessage).context(e).use([G,de(t),Rn,Qs],an.btc_signMessage)}),"initialize");var Ra={};Fe(Ra,{initialize:()=>Kg});d();p();var Kg=o(e=>({phantom_deep_link_browse:j().parse(ke.phantom_deep_link_browse).context(e).use([Ve(10),G,at],Ie.phantom_deep_link_browse),phantom_deep_link_tokens:j().parse(ke.phantom_deep_link_tokens).context(e).use([G,at],Ie.phantom_deep_link_tokens),phantom_deep_link_swap:j().parse(ke.phantom_deep_link_swap).context(e).use([G,Oe],Ie.phantom_deep_link_swap),phantom_deep_link_navigate:j().parse(ke.phantom_deep_link_navigate).context(e).use([G,Oe],Ie.phantom_deep_link_navigate),phantom_deep_link_explore:j().parse(ke.phantom_deep_link_explore).context(e).use([G],Ie.phantom_deep_link_explore),phantom_deep_link_terminal:j().parse(ke.phantom_deep_link_terminal).context(e).use([G,Oe],Ie.phantom_deep_link_terminal),phantom_deep_link_feature_flags:j().parse(ke.phantom_deep_link_feature_flags).context(e).use([G,Oe],Ie.phantom_deep_link_feature_flags),phantom_deep_link_onramp:j().parse(ke.phantom_deep_link_onramp).context(e).use([G,Oe],Ie.phantom_deep_link_onramp),phantom_deep_link_fungible:j().parse(ke.phantom_deep_link_fungible).context(e).use([G],Ie.phantom_deep_link_fungible),phantom_deep_link_user:j().parse(ke.phantom_deep_link_user).context(e).use([G,at],Ie.phantom_deep_link_user),phantom_deep_link_social:j().parse(ke.phantom_deep_link_social).context(e).use([G,Oe],Ie.phantom_deep_link_social),phantom_deep_link_notification_center:j().parse(ke.phantom_deep_link_notification_center).context(e).use([G,Oe],Ie.phantom_deep_link_notification_center),phantom_deep_link_chat:j().parse(ke.phantom_deep_link_chat).context(e).use([G,Oe],Ie.phantom_deep_link_chat),phantom_deep_link_token_chat:j().parse(ke.phantom_deep_link_token_chat).context(e).use([G,Oe],Ie.phantom_deep_link_token_chat),phantom_deep_link_mint_psol_marketing:j().parse(ke.phantom_deep_link_mint_psol_marketing).context(e).use([G,Oe],Ie.phantom_deep_link_mint_psol_marketing),phantom_deep_link_onboard:j().parse(ke.phantom_deep_link_onboard).context(e).use([G],Ie.phantom_deep_link_onboard),phantom_deep_link_connect:j().parse(ke.phantom_deep_link_connect).context(e).use([G,at],Ie.phantom_deep_link_connect),phantom_deep_link_disconnect:j().parse(ke.phantom_deep_link_disconnect).context(e).use([G,sr,at],Ie.phantom_deep_link_disconnect),phantom_deep_link_signMessage:j().parse(ke.phantom_deep_link_signMessage).context(e).use([G,sr,at],Ie.phantom_deep_link_signMessage),phantom_deep_link_signIn:j().parse(ke.phantom_deep_link_signIn).context(e).use([G,at],Ie.phantom_deep_link_signIn),phantom_deep_link_signTransaction:j().parse(ke.phantom_deep_link_signTransaction).context(e).use([G,sr,at],Ie.phantom_deep_link_signTransaction),phantom_deep_link_signAllTransactions:j().parse(ke.phantom_deep_link_signAllTransactions).context(e).use([G,sr,at],Ie.phantom_deep_link_signAllTransactions),phantom_deep_link_signAndSendTransaction:j().parse(ke.phantom_deep_link_signAndSendTransaction).context(e).use([G,sr,at],Ie.phantom_deep_link_signAndSendTransaction),phantom_deep_link_signAndSendAllTransactions:j().parse(ke.phantom_deep_link_signAndSendAllTransactions).context(e).use([G,sr,at],Ie.phantom_deep_link_signAndSendAllTransactions),phantom_deep_link_perps:j().parse(ke.phantom_deep_link_perps).context(e).use([G,Oe],Ie.phantom_deep_link_perps),phantom_deep_link_perps_leaderboard:j().parse(ke.phantom_deep_link_perps_leaderboard).context(e).use([G,Oe],Ie.phantom_deep_link_perps_leaderboard),phantom_deep_link_cash:j().parse(ke.phantom_deep_link_cash).context(e).use([G,at],Ie.phantom_deep_link_cash),phantom_deep_link_feedback_perps:j().parse(ke.phantom_deep_link_feedback_perps).context(e).use([G,Oe],Ie.phantom_deep_link_feedback_perps),phantom_deep_link_convert_stake_account:j().parse(ke.phantom_deep_link_convert_stake_account).context(e).use([G,Oe],Ie.phantom_deep_link_convert_stake_account),phantom_deep_link_predictions:j().parse(ke.phantom_deep_link_predictions).context(e).use([G,Oe],Ie.phantom_deep_link_predictions),phantom_deep_link_competitions:j().parse(ke.phantom_deep_link_competitions).context(e).use([G,Oe],Ie.phantom_deep_link_competitions)}),"initialize");var Ca={};Fe(Ca,{initialize:()=>qg});d();p();var qg=o(e=>({sol_mwa_authorize:j().parse(Lr.sol_mwa_authorize).context(e).use([Ve(10),G,on],ar.sol_mwa_authorize),sol_mwa_reauthorize:j().parse(Lr.sol_mwa_reauthorize).context(e).use([G],ar.sol_mwa_reauthorize),sol_mwa_sign_messages:j().parse(Lr.sol_mwa_sign_messages).context(e).use([G,on],ar.sol_mwa_sign_messages),sol_mwa_sign_transactions:j().parse(Lr.sol_mwa_sign_transactions).context(e).use([G,on],ar.sol_mwa_sign_transactions),sol_mwa_sign_and_send_transactions:j().parse(Lr.sol_mwa_sign_and_send_transactions).context(e).use([G,on],ar.sol_mwa_sign_and_send_transactions)}),"initialize");var Ba={};Fe(Ba,{initialize:()=>Gg});d();p();var Gg=o(e=>({sol_pay_transfer:j().parse(Wo.sol_pay_transfer).context(e).use([G],Ln.sol_pay_transfer),sol_pay_transaction:j().parse(Wo.sol_pay_transaction).context(e).use([G],Ln.sol_pay_transaction)}),"initialize");var La={};Fe(La,{initialize:()=>jg});d();p();var jg=o((e,t="BrowserTabRpcRequestSource")=>({sui_requestAccounts:j().parse(mn.sui_requestAccounts).context(e).use([Ve(100),de(t),G,Oe,sn,ue,wi],Er.sui_requestAccounts),sui_signMessage:j().parse(mn.sui_signMessage).context(e).use([G,de(t),Je,sn,ue,ze(t),bi],Er.sui_signMessage),sui_signTransaction:j().parse(mn.sui_signTransaction).context(e).use([G,de(t),Je,sn,ue,ze(t),Oo],Er.sui_signTransaction),sui_signAndExecuteTransaction:j().parse(mn.sui_signAndExecuteTransaction).context(e).use([G,de(t),Je,sn,ue,ze(t),Oo],Er.sui_signAndExecuteTransaction)}),"initialize");var Ua={};Fe(Ua,{initialize:()=>Wg});d();p();var Wg=o(e=>({phantom_getFeatures:j().parse(ln.phantom_getFeatures).context(e).use([Ve(10),G],Tr.phantom_getFeatures),phantom_getUser:j().parse(ln.phantom_getUser).context(e).use([Ve(10),G],Tr.phantom_getUser),phantom_login:j().parse(ln.phantom_login).context(e).use([Ve(10),G,Oe],Tr.phantom_login),phantom_logout:j().parse(ln.phantom_logout).context(e).use([Ve(10),G],Tr.phantom_logout)}),"initialize");var Ma={};Fe(Ma,{initialize:()=>Yg});d();p();var Yg=o((e,t="BrowserTabRpcRequestSource")=>({phantom_auto_confirm_enable:j().parse(un.phantom_auto_confirm_enable).context(e).use([Ve(10),G,de(t),ue,ze(t)],vr.phantom_auto_confirm_enable),phantom_auto_confirm_status:j().parse(un.phantom_auto_confirm_status).context(e).use([Ve(10),G,de(t),ue,ze(t)],vr.phantom_auto_confirm_status),phantom_auto_confirm_disable:j().parse(un.phantom_auto_confirm_disable).context(e).use([Ve(10),G,de(t),ue,ze(t)],vr.phantom_auto_confirm_disable),phantom_auto_confirm_supported_chains:j().parse(un.phantom_auto_confirm_supported_chains).context(e).use([Ve(10),G,de(t),ue,ze(t)],vr.phantom_auto_confirm_supported_chains)}),"initialize");d();p();d();p();var fm={isEnabled:o(async e=>Kn.isFeatureEnabledAsync(e),"isEnabled")};d();p();var gm={getValue:o(async e=>Ec(e),"getValue")};d();p();var Et=o(e=>t=>{Le.capture(e,{data:t})},"captureEventData"),ym={deepLinkDetected:Et("deepLinkDetected"),tokenDeepLink:Et("deepLinkTokens"),userDeepLink:Et("deepLinkUser"),fiatOnrampInitiated:Et("fiatOnrampInitiated"),metamaskOverrideSelection:Et("notificationMetamaskOverrideSelection"),approveConnection:Et("connectionConfirm"),declineConnection:Et("connectionDeny"),approveSignMessage:Et("signMessageConfirm"),declineSignMessage:Et("signMessageDeny"),approveTransaction:Et("transactionConfirm"),declineTransaction:Et("transactionDeny"),eth:{submittedTransaction:o(async({origin:e,request:t,signatures:r,walletAddress:n})=>{try{let s=await Or(t,{origin:e},r);if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await Yn(Le,{data:{...s.data,ids:s.data.ids??r,walletAddress:n},action:"dapp"})}catch(s){let i=s instanceof Error?s:new Error(String(s));X.captureError(i,Q.Provider)}},"submittedTransaction"),signedMessage:o(async({origin:e,request:t,chainId:r,walletAddress:n})=>{try{let s=await Hr(t,{origin:e,chainId:Go(r)});if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await Zn(Le,{...s.data,walletAddress:n})}catch(s){let i=s instanceof Error?s:new Error(String(s));X.captureError(i,Q.Provider)}},"signedMessage"),autoConfirmedTransaction:o(async({origin:e,request:t,data:r,walletAddress:n})=>{try{let s=new yn(Le),i=await Or(t,{origin:e});if(!i.success)throw new Error(`Failed to capture signature event analytics: ${i.error}`);await s.transactionAutoConfirmed({...i.data,autoConfirm:r,walletAddress:n})}catch(s){let i=s instanceof Error?s:new Error(String(s));X.captureError(i,Q.Provider)}},"autoConfirmedTransaction"),autoConfirmedMessage:o(async({origin:e,request:t,chainId:r,data:n,walletAddress:s})=>{try{let i=new yn(Le),a=await Hr(t,{origin:e,chainId:Go(r)});if(!a.success)throw new Error(`Failed to capture signature event analytics: ${a.error}`);await i.messageAutoConfirmed({...a.data,autoConfirm:n,walletAddress:s})}catch(i){let a=i instanceof Error?i:new Error(String(i));X.captureError(a,Q.Provider)}},"autoConfirmedMessage"),unsupportedChain:o(async({origin:e,data:t})=>{try{await Le.capture("unsupportedChainId",{data:{origin:e,chainType:"eip155",chainId:Ur(t.hexChainId),chainName:t.chainName,method:t.method}})}catch(r){let n=r instanceof Error?r:new Error(String(r));X.captureError(n,Q.Provider)}},"unsupportedChain")},sol:{submittedTransaction:o(async({origin:e,request:t,chainId:r,signatures:n,walletAddress:s})=>{try{let i=await Or(t,{origin:e,chainId:r},n);if(!i.success)throw new Error(`Failed to capture signature event analytics: ${i.error}`);await Yn(Le,{data:{...i.data,ids:i.data.ids??n,walletAddress:s},action:"dapp"})}catch(i){let a=i instanceof Error?i:new Error(String(i));X.captureError(a,Q.Provider)}},"submittedTransaction"),signedMessage:o(async({origin:e,request:t,chainId:r,walletAddress:n})=>{try{let s=await Hr(t,{origin:e,chainId:r});if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await Zn(Le,{...s.data,walletAddress:n})}catch(s){let i=s instanceof Error?s:new Error(String(s));X.captureError(i,Q.Provider)}},"signedMessage"),autoConfirmedTransaction:o(async({origin:e,request:t,data:r,chainId:n,walletAddress:s})=>{try{let i=new yn(Le),a=await Or(t,{origin:e,chainId:n});if(!a.success)throw new Error(`Failed to capture signature event analytics: ${a.error}`);await i.transactionAutoConfirmed({...a.data,autoConfirm:r,walletAddress:s})}catch(i){let a=i instanceof Error?i:new Error(String(i));X.captureError(a,Q.Provider)}},"autoConfirmedTransaction"),autoConfirmedMessage:o(async({origin:e,request:t,chainId:r,data:n,walletAddress:s})=>{try{let i=new yn(Le),a=await Hr(t,{origin:e,chainId:r});if(!a.success)throw new Error(`Failed to capture signature event analytics: ${a.error}`);await i.messageAutoConfirmed({...a.data,autoConfirm:n,walletAddress:s})}catch(i){let a=i instanceof Error?i:new Error(String(i));X.captureError(a,Q.Provider)}},"autoConfirmedMessage")},sui:{submittedTransaction:o(async({origin:e,request:t,chainId:r,signatures:n,walletAddress:s})=>{try{let i=await Or(t,{origin:e,chainId:r},n);if(!i.success)throw new Error(`Failed to capture signature event analytics: ${i.error}`);await Yn(Le,{data:{...i.data,ids:i.data.ids??n,walletAddress:s},action:"dapp"})}catch(i){let a=i instanceof Error?i:new Error(String(i));X.captureError(a,Q.Provider)}},"submittedTransaction"),signedMessage:o(async({origin:e,request:t,chainId:r,walletAddress:n})=>{try{let s=await Hr(t,{origin:e,chainId:r});if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await Zn(Le,{...s.data,walletAddress:n})}catch(s){let i=s instanceof Error?s:new Error(String(s));X.captureError(i,Q.Provider)}},"signedMessage")}};d();p();var xm={env:Pn()?"production":"development",logRequestMethods:new Set(["eth_requestAccounts","eth_accounts","eth_sendTransaction","eth_sign","personal_sign"]),logRequestsOnError:!0};d();p();var wm={t(e){return e}};d();p();var bm={debug(...e){console.debug(...e)},warn(...e){console.warn(...e)},error(...e){X.addBreadcrumb(Q.Provider,e.join(", "),fe.Error)}};d();p();var Sm={eth:od};d();p();var Un=Ge(pr(),1);var Am={eth:{hexToCAIP2:o(e=>`eip155:${parseInt(e,16)}`,"hexToCAIP2"),getBufferedGasLimit(e){return"0x"+new Rr(id(new Rr(e))).toString(16)}},sol:{chainIdToCAIP2:rt,chainIdToCluster:gc,serializeSolanaSignInMessage(e,{expectedChainId:t,expectedAddress:r,expectedURL:n}){let s=e.domain||n.host,i=e.address||r,a=`${s} wants you to sign in with your Solana account:
`;a+=`${i}`,e.statement&&(a+=`

${e.statement}`);let l=[];if(e.uri&&l.push(`URI: ${e.uri}`),e.version&&l.push(`Version: ${e.version}`),e.chainId&&l.push(`Chain ID: ${e.chainId}`),e.nonce&&l.push(`Nonce: ${e.nonce}`),e.issuedAt&&l.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&l.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&l.push(`Not Before: ${e.notBefore}`),e.requestId&&l.push(`Request ID: ${e.requestId}`),e.resources){l.push("Resources:");for(let g of e.resources)l.push(`- ${g}`)}l.length&&(a+=`

${l.join(`
`)}`);let m=nn(qe.Solana,a);if(!m.success)return{type:"fail",data:Un.default.encode(Buffer.from(a)),error:[{label:"PARSE_ERROR",message:m.error.message}]};let f=1e3*60*10,b=rn(m.data,{expectedAddress:r,expectedURL:n,expectedChainId:t,issuedAtThreshold:f});return b.length?{type:"fail",data:Un.default.encode(Buffer.from(a)),error:b.map(g=>({label:_r[g],message:`siwsErrorMessage_${g}`}))}:{type:"success",data:Un.default.encode(Buffer.from(a))}},base58Encode:o(e=>Un.default.encode(e),"base58Encode")},getFaviconURL:jn,parseURL:ut,getOrigin:Wn,getHostname:Nc,getOriginAndHostname:Oc};var Fa={};Fe(Fa,{addTrustedApp:()=>_m,btc:()=>Oa,deleteTrustedApp:()=>Em,disableAutoConfirm:()=>$m,enableAutoConfirm:()=>Fm,eth:()=>fs,fetchAutoConfirmSupportedNetworks:()=>Vm,getAutoConfirmStatus:()=>zm,getMetaMaskOverrideSetting:()=>Tm,getUser:()=>$o,isTrustedApp:()=>vm,isUserOnboarded:()=>Om,navigate:()=>Um,onboardQuickly:()=>Mm,openChat:()=>Dm,openNotificationCenter:()=>Pm,openUserProfile:()=>Nm,requestUserApproval:()=>Bm,requestUserOnboard:()=>Hm,setMetaMaskOverrideSetting:()=>Lm,sol:()=>Na,sui:()=>Ha});d();p();d();p();var Zg=new Pe,Xg=new It(Zg),_m=o(async(e,t)=>{let r=(await he()).identifier;await Xg.add(r,e,{dappMeta:{appUrl:t.url.origin,title:t.title,imageUrl:t.icon?.toString()},lastConnectedTimestamp:Date.now()})},"addTrustedApp");d();p();var Jg=new Pe,Qg=new It(Jg),Em=o(async e=>{let t=(await he()).identifier;await Qg.delete(t,e)},"deleteTrustedApp");d();p();var ey=new Pe,Tm=o(async()=>await hr(ey),"getMetaMaskOverrideSetting");d();p();var ty=new Pe,ry=new It(ty),vm=o(async e=>{let t=(await he()).identifier;return!!(await ry.get(t))[e]},"isTrustedApp");d();p();var cr=Ge($r(),1);d();p();var km=Ge($r(),1);var Im=30,Pa=class{static{o(this,"NotificationManager")}findPopupIfExists=o(async()=>{try{X.addBreadcrumb("NotificationManager","focusPopupIfExists",fe.Debug);let t=await Rd();for(let r of t){if(typeof r.id!="number"){X.addBreadcrumb("NotificationManager","popup has no id",fe.Debug);continue}if(r.type!=="popup"){X.addBreadcrumb("NotificationManager","found a non-popup type window",fe.Error);continue}let n=!1;if(r.tabs?.length===1){let[s]=r.tabs;if(s.url){let i=new URL(s.url).hostname,a=km.default.runtime.id;n=i===a}}if(!n){X.addBreadcrumb("NotificationManager","popup tab url does not have the extension origin",fe.Debug);continue}return r.id}return}catch(t){X.addBreadcrumb("NotificationManager","failed to get open popups",fe.Error),X.captureError(t instanceof Error?t:new Error("failed to get open popups"),Q.Provider);return}},"findPopupIfExists");showNotificationPopupAsync=o(async()=>{X.addBreadcrumb("NotificationManager","showNotificationPopupAsync",fe.Debug);let t=await this.findPopupIfExists();t&&await kd(t);let r=0,n=0;try{let i=await Id();if(i.top!==void 0&&i.left!==void 0&&i.width!==void 0&&i.height!==void 0)n=i.top,r=i.left+i.width-wn;else throw new Error("Couldn't get last focused window")}catch(i){X.addBreadcrumb("NotificationManager","failed to get last focused window",fe.Error),X.captureError(i instanceof Error?i:new Error("failed to get last focused window"),Q.Provider);let{screenX:a,screenY:l,outerWidth:m}=self;n=Math.max(l,0),r=Math.max(a+(m-wn),0)}let s;try{s=await ts({url:"notification.html",type:"popup",width:wn,height:as+Im,left:r,top:n,focused:!0})}catch{n=0,r=0,s=await ts({url:"notification.html",type:"popup",width:wn,height:as+Im,left:r,top:n,focused:!0})}if(!s){let i=new Error("Could not open new popup notification");throw X.captureError(i,Q.Provider),i}try{(s.left!==r||s.top!==n)&&s.id&&s.state!=="fullscreen"&&await vd(s.id,r,n)}catch(i){X.addBreadcrumb("NotificationManager","failed to update window position",fe.Error),X.captureError(i instanceof Error?i:new Error("failed to update window position"),Q.Provider)}return s},"showNotificationPopupAsync")},Rm=new Pa;d();p();var $o=o(async()=>{let e=await oo.getUser();if(!e)return null;let t=await he();return{addresses:Object.values(ye).map(n=>({type:n,address:Ce(t,n)})),authUserId:e.userID}},"getUser");var ny=o((e,t,r)=>{if(typeof r!="string")throw new Error("message must be a string");try{let n=hn(r);console.log("> Received message from popup:",n);let s=ur[t].response.parse(n);if(s.id===e)return s}catch(n){console.error(n)}throw new Error("RPC response ID does not match RPC request ID")},"handleMessage"),Cm=o((e,t,r)=>async n=>await ny(t,r,n),"onMessage"),oy=o(async(e,t,r)=>{let n=!1,i=cr.default.runtime.connect({name:"popup/sidepanel"}),a=Cm(i,e,t);return new Promise((l,m)=>{i.postMessage(r),i.onMessage.addListener(async f=>{i.onMessage.removeListener(a);try{let b=await a(f);return n=!0,i.disconnect(),l(b)}catch(b){return m(b)}}),i.onDisconnect.addListener(()=>{if(!n)return i.onMessage.removeListener(a),c.userRejectedRequest(e)})})},"handleUserApprovalSidebar"),sy=o(async(e,t,r,n)=>{let s=await Rm.showNotificationPopupAsync();if(!s)return c.resourceUnavailable(e);(async()=>{let f=(await $o().catch(()=>null))?.authUserId??null;await Gd(n,f)})();let i=s.id;if(typeof i!="number")throw new Error("No notification window id");let a=`notification/${i}`,l=`${ro()}/notification.html`;return await new Promise((m,f)=>{let b=!1,g=null,w=null;g=o(_=>{let y=Cm(_,e,t);_.name===a&&_.sender&&_.sender.tab?.url===l&&(w&&cr.default.windows.onRemoved.removeListener(w),_.onMessage.addListener(async x=>{try{let E=await y(x);return b=!0,_.disconnect(),_.onMessage.removeListener(y),m(E)}catch(E){return f(E)}}),_.onDisconnect.addListener(()=>{b||(_.onMessage.removeListener(y),m(c.userRejectedRequest(e))),g&&cr.default.runtime.onConnect.removeListener(g)}),_.postMessage(r))},"onConnect"),w=o(_=>{_===i&&(g&&cr.default.runtime.onConnect.removeListener(g),w&&cr.default.windows.onRemoved.removeListener(w),m(c.userRejectedRequest(e)))},"onRemoved"),cr.default.runtime.onConnect.addListener(g),cr.default.windows.onRemoved.addListener(w)})},"handleRequireUserApprovalNotification"),Bm=o(async e=>{let[t]=e.params,r=t.icon??void 0,n=await qd(),s=Dc(t.url),i=lr({url:s,req:e,icon:r});return n?oy(e.id,e.method,i):sy(e.id,e.method,i,s)},"requestUserApproval");d();p();var iy=new Pe,Lm=o(async e=>await td(iy,e),"setMetaMaskOverrideSetting");d();p();var Um=o(()=>{},"navigate");d();p();var Mm=o(()=>{throw new Error("This method is unsupported on extension.")},"onboardQuickly");d();p();var Pm=o(()=>{throw new Error("This method is unsupported on extension.")},"openNotificationCenter");d();p();var Dm=o(()=>{throw new Error("This method is unsupported on extension.")},"openChat");d();p();var Nm=o(()=>{throw new Error("This method is unsupported on extension.")},"openUserProfile");d();p();var Om=o(async()=>!0,"isUserOnboarded");d();p();var Hm=o(async()=>{throw new Error("not implemented")},"requestUserOnboard");d();p();var Fm=o(async(e,t)=>{let r=(await he()).identifier,n=await We.fetchAutoConfirmSupportedNetworks(e),{enabled:s}=await We.getAutoConfirmStatus({origin:e,accountIdentifier:r});if(s)return;let i=[];t&&t.length>0?i=t.filter(a=>n.includes(a)):i=n,await We.enableAutoConfirm({origin:e,accountIdentifier:r,networkIDs:i}),await Gt.invalidateQueries({queryKey:Kt.trustedApps()}),await Gt.invalidateQueries({queryKey:Kt.allAutoConfirm(r)}),await Gt.invalidateQueries({queryKey:Kt.autoConfirm(r,e)})},"enableAutoConfirm");d();p();var $m=o(async e=>{let t=(await he()).identifier,{enabled:r}=await We.getAutoConfirmStatus({origin:e,accountIdentifier:t});r&&(await We.disableAutoConfirm({origin:e,accountIdentifier:t}),await Gt.invalidateQueries({queryKey:Kt.trustedApps()}),await Gt.invalidateQueries({queryKey:Kt.allAutoConfirm(t)}),await Gt.invalidateQueries({queryKey:Kt.autoConfirm(t,e)}))},"disableAutoConfirm");d();p();var zm=o(async e=>{let t=(await he()).identifier,{enabled:r,networkIDs:n}=await We.getAutoConfirmStatus({origin:e,accountIdentifier:t});return{enabled:r,networks:n}},"getAutoConfirmStatus");d();p();var Vm=o(async e=>await We.fetchAutoConfirmSupportedNetworks(e),"fetchAutoConfirmSupportedNetworks");var Na={};Fe(Na,{addPriorityFee:()=>qm,autoConfirmValidateMessage:()=>Gm,autoConfirmValidateTransaction:()=>jm,getNetworkId:()=>ct,getSelectedAccount:()=>Wm,handleSolanaPayTransaction:()=>rh,handleSolanaPayTransfer:()=>nh,sendAllTransactions:()=>Jm,sendTransaction:()=>Zm,signAllTransactions:()=>zo,signMessage:()=>eh,signTransaction:()=>th});d();p();d();p();d();p();var ct=o(async()=>{let e=await he(),t=Gn(e,ye.Solana).networkID;return Qe.getSolanaNetworkIDValue(t)},"getNetworkId");var qm=o(async e=>{let{transaction:t}=ft.deserializeVersionedTransaction(e);t.version==="legacy"&&(t=ft.deserializeWithVersion({transaction:e,type:"legacy"}).transaction);let r=await ct(),n=await gd(t,{connection:qt(rt(r)),calculators:{cost:fd,budget:new hd(2e5,2e5)}});return ft.serialize(n).transaction},"addPriorityFee");d();p();var Gm=o(async(e,t)=>{let r=await ct();if(r==="localnet")return{status:Ae.UnsupportedNetworkId};let n=await he(),s=await Ce(n,ye.Solana),i=Vt(ot.language)??"en",a=await Le.getDeviceId();return We.isSolMessageAutoConfirmable({url:e,data:t,networkID:rt(r),account:n,userAccountAddress:s,accountIdentifier:n.identifier??""},{locale:i,deviceId:a})},"autoConfirmValidateMessage");d();p();var jm=o(async(e,t)=>{let r=await ct();if(r==="localnet")return{status:Ae.UnsupportedNetworkId};let n=await he(),s=await Ce(n,ye.Solana),i=Vt(ot.language)??"en",a=await Le.getDeviceId();return We.isSolTransactionAutoConfirmable({url:e,networkID:rt(r),data:t,account:n,userAccountAddress:s,accountIdentifier:n.identifier??""},{locale:i,deviceId:a})},"autoConfirmValidateTransaction");d();p();var Wm=o(async()=>{let e=await he();return Ce(e,ye.Solana)},"getSelectedAccount");d();p();var Ym=Ge(pr(),1);var Zm=o(async(e,t)=>{let r=await ct(),n=ve.VersionedMessage.deserializeMessageVersion(Ym.default.decode(Cr(e))),s=ft.deserializeWithVersion({transaction:e,type:n}),i;t?.method&&(i={"x-phantom-method":t.method}),await Sd({connection:qt(rt(r),i),signedTx:s.transaction,opts:t})},"sendTransaction");d();p();var Xm=Ge(pr(),1);var Jm=o(async(e,t)=>{let r=await ct(),n=qt(rt(r)),s=e.map(i=>{let a=ve.VersionedMessage.deserializeMessageVersion(Xm.default.decode(Cr(i)));return ft.deserializeWithVersion({transaction:i,type:a}).transaction});return await Ad({connection:n,signedTxs:s,opts:t})},"sendAllTransactions");d();p();var Qm=Ge(pr(),1);var eh=o(async e=>{let t=await he();Ce(t,ye.Solana);let r=Qm.default.decode(e).toString("utf-8"),n=await ge.sign(t.identifier,{chainType:ye.Solana,signingType:"message",message:r});if(n.status!=="success")throw new Error(`[${n.type}] ${n.message}`);return n.signature},"signMessage");d();p();d();p();var Da=Ge(pr(),1);var ay=new Pe,zo=o(async e=>{let t=await he();Ce(t,ye.Solana);let r=Ce(t,ye.Solana),n=await ct(),s={ownerAddress:r,networkID:rt(n),data:{signature:""},type:Fr.DappInteraction,display:{summary:{topLeft:{text:ot.t("transactionsPendingAppInteraction")}}}};return o(async()=>{let a=[];for(let l=0;l<e.length;l++){let m=e[l],f=ve.VersionedMessage.deserializeMessageVersion(Da.default.decode(Cr(m))),b=ft.deserializeWithVersion({transaction:m,type:f}),g=await _d({pendingTransactionInput:s,accountIdentifier:t.identifier,feePayer:new ve.PublicKey(r),connection:qt(rt(n)),accountSigner:ge,transaction:b.transaction,storage:ay}),w=ft.serialize(g);a.push({transaction:w.transaction,signature:Da.default.encode(oc(g)[0]),version:"version"in g?g.version:"legacy"})}return a},"signTx")()},"signAllTransactions");var th=o(async e=>(await zo([e]))[0],"signTransaction");d();p();var rh=o(async()=>{},"handleSolanaPayTransaction");d();p();var nh=o(async()=>!1,"handleSolanaPayTransfer");var Oa={};Fe(Oa,{getSelectedAccount:()=>io,signMessage:()=>sh,signPSBT:()=>oh});d();p();d();p();var oh=o(async(e,t)=>{let r=await he(),n=await ge.sign(r.identifier,{chainType:ye.BitcoinTaproot,signingType:"transaction",message:Buffer.from(e).toString("hex"),inputsToSign:t.inputsToSign,finalize:t.finalize});if(n.status==="error")throw new Error(`[${n.type}] ${n.message}`);return Buffer.from(n.signature,"hex")},"signPSBT");d();p();var sh=o(async(e,t)=>{let r=await he(),n=yc(pn.Mainnet,e),s=await ge.sign(r.identifier,{chainType:n,signingType:"message",message:t});if(s.status==="error")throw new Error(`[btc provider][${s.type}] ${s.message}`);let i=s.message;if(!i)throw new Error("[btc provider] no message on vault response");return{signature:Buffer.from(s.signature,"hex"),signedMessage:i}},"signMessage");var Ha={};Fe(Ha,{getNetworkId:()=>ih,getSelectedAccount:()=>Mo,getSuiAddressWithPubkey:()=>vn,signAndExecuteTransaction:()=>dh,signMessage:()=>ch,signTransaction:()=>ah});d();p();d();p();var ih=o(async()=>{let e=await he(),t=uc.safeParse(Gn(e,ye.Sui).networkID);if(!t.success)throw new Error(`[sui provider] unsupported network id, error: ${t.error}`);return t.data},"getNetworkId");d();p();var ah=o(async(e,t,r)=>{let n=await he(),s=eo.from(t);s.setSenderIfNotSet(e);let i=await to({transaction:s,networkID:r}),a=await ge.sign(n.identifier,{chainType:ye.Sui,signingType:"transaction",transaction:new Uint8Array(i)});if(a.status==="error")throw new Error(`[sui provider][${a.type}] ${a.message}`);let l=a.signature;if(!l)throw new Error("[sui provider] no message on vault response");return{signature:l,transaction:Br(i)}},"signTransaction");d();p();var ch=o(async(e,t)=>{let r=await he(),n=await ge.sign(r.identifier,{chainType:ye.Sui,signingType:"personalMessage",message:t});if(n.status==="error")throw new Error(`[sui provider][${n.type}] ${n.message}`);if(!n.signature)throw new Error("[sui provider] no message on vault response");return{signature:n.signature,message:Br(t)}},"signMessage");d();p();var cy=new Pe,dh=o(async(e,t,r)=>{let n=await he(),s=eo.from(t);s.setSenderIfNotSet(e);let i=await to({transaction:s,networkID:r}),a={ownerAddress:e,networkID:r,data:{digest:""},type:Fr.DappInteraction,display:{summary:{topLeft:{text:ot.t("transactionsPendingAppInteraction")}}}},{signature:l,digest:m,effects:f}=await bd({accountSigner:ge,accountIdentifier:n.identifier,transaction:i,pendingTransactionInput:a,storage:cy});return{signature:l,transaction:Br(i),digest:m,effects:f}},"signAndExecuteTransaction");var Ir={analytics:ym,config:xm,i18n:wm,logger:bm,remoteConfig:gm,rpc:Sm,utils:Am,wallet:Fa,featureFlags:fm,secrets:{setSharedSecret:o(()=>{throw new Error("unimplemented")},"setSharedSecret"),encryptDeepLinkDappPayload:o(()=>{throw new Error("unimplemented")},"encryptDeepLinkDappPayload"),deleteSharedSecret:o(()=>{throw new Error("unimplemented")},"deleteSharedSecret"),generateSharedSecret:o(()=>{throw new Error("unimplemented")},"generateSharedSecret"),generateSession:o(()=>{throw new Error("unimplemented")},"generateSession"),decryptDeepLinkDappPayload:o(()=>{throw new Error("unimplemented")},"decryptDeepLinkDappPayload")}};var dy=zt.eth.initialize(Ir),py=zt.sol.initialize(Ir),uy=zt.btc.initialize(Ir),ly=zt.sui.initialize(Ir),my=zt.phantom_auto_confirm.initialize(Ir),hy=zt.phantom_embedded.initialize(Ir),ph={...uy,...dy,...py,...ly,...my,...hy};d();p();var $a=Ge($r(),1);var uh=o(async e=>{let t=await $a.default.tabs.get(e);if(!t?.url?.startsWith("http"))return{iconUrl:void 0,title:void 0};let r=await fy(e);return{iconUrl:r?.iconUrl??t?.favIconUrl,title:r?.title??t?.title}},"getTabMeta"),fy=o(async e=>{try{let r=(await $a.default.scripting.executeScript({target:{tabId:e},func:o(()=>{let i={},a=document.querySelectorAll("head link[rel^=apple-touch-icon]");a&&(i.iconTuples=Array.from(a).map(m=>[m.href,m.sizes?.[0]??"0x0"]));let l=document.querySelector("meta[property='og:title']");return l&&(i.title=l.content),i},"func")}))[0].result;if(!r)return{iconUrl:void 0,title:void 0};let n,s=0;for(let[i,a]of r.iconTuples??[]){if(n||(n=i),!a)continue;parseInt(a.split("x")[0]??0)>s&&(n=i)}return{title:r.title,iconUrl:n}}catch(t){return console.error("Failed to get tab meta",t),{iconUrl:void 0,title:void 0}}},"getTabMarkupMeta");var lh=o(async e=>{if(!e.sender||!e.sender.tab||!e.sender.url||!e.sender.tab.id)throw new Error("sender information is undefined");let t=e.sender.url,r=e.sender.tab.id;us({origin:new URL(t).origin,url:t,tabId:r,port:e}),e.onDisconnect.addListener(()=>{ls({origin:new URL(t).origin,url:t,tabId:r,port:e})});let n=[],s=o(b=>{if(typeof b=="string")try{let g=qo.parse(hn(b));n.push(g)}catch{}},"queueRequest");e.onMessage.addListener(s);let i=await uh(r),a={type:"BrowserTabRpcRequestSource",url:new URL(t),icon:i.iconUrl?new URL(i.iconUrl):void 0},l=gy(e,a,n),m=yy(e);us({origin:new URL(t).origin,url:t,tabId:r,port:e}),e.onDisconnect.addListener(()=>{ls({origin:new URL(t).origin,url:t,tabId:r,port:e})});let f=new zd({routes:ph}).init(l,m);return e.onMessage.removeListener(s),f},"createRpcRouterController");function gy(e,t,r=[]){return new ReadableStream({async start(n){for(let s of r)n.enqueue(ss(s,t));e.onMessage.addListener(async s=>{let i=null;try{i=qo.parse(hn(s))}catch{}if(i)try{n.enqueue(ss(i,t))}catch(a){X.captureError(new Error(`Stream enqueue failure (${a})`),Q.Provider)}}),e.onDisconnect.addListener(()=>{n.close()})},async cancel(){e.disconnect()}},new CountQueuingStrategy({highWaterMark:1/0}))}o(gy,"createRpcRequestStream");function yy(e){return new WritableStream({write([t,r]){e.postMessage(lr(r))}})}o(yy,"createRpcResponseStream");var fh=20*1e3;self.addEventListener("install",()=>{self.skipWaiting()});self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>Promise.all(t.map(r=>caches.delete(r)))).then(()=>self.clients.claim()))});self.addEventListener("error",e=>{console.error("SW Error:",e.error,e.filename,e.lineno)});wc([[Ac,nt]]);Sy();var xy=o(async()=>{await Jc(),await mr.init({provider:Cd}),await rd(nt),await Ud("background",oo),iu(),nt.remove("unencryptedSeedAndMnemonic"),by(),await kn(),await In({enabledChains:(await zr().catch(()=>({enabledAddressTypes:nc.getAll()}))).enabledAddressTypes,metamaskOverrideSetting:await hr(nt).catch(()=>ed.enum.ALWAYS_ASK)}),jd({isWriter:!0}),await wy()},"init");async function wy(){try{let e=typeof chrome.action?.openPopup=="function";typeof chrome<"u"&&chrome.sidePanel&&e&&(await chrome.action.setPopup({popup:""}),await _y(),chrome.storage.onChanged.addListener((t,r)=>{if(r==="session"){for(let[n,s]of Object.entries(t))if(n.startsWith(Mn+"_")){let i=parseInt(n.replace(Mn+"_",""),10);isNaN(i)||(s.newValue===!0?cn.set(i,!0):cn.delete(i))}}}))}catch(e){console.error("Failed to initialize side panel routing:",e)}}o(wy,"initializeSidePanelRouting");var Va=xy().catch(e=>{console.error("w error",e)});async function by(){if((await Ze.default.tabs.query({url:Ze.default.runtime.getURL("onboarding.html")})).length>0)return;let r=await fr.hasPersistedDeviceEncryptionKey(),n=await nt.get(rs);!r&&!n&&(await nt.set(qc.FirstTimeOnboarding,{isFirstTimeOnboarding:!0}),Td({url:"onboarding.html"}),nt.set(rs,!0))}o(by,"openOnboardingIfNeeded");function Sy(){Ze.default.runtime.onInstalled.addListener(Iy),Ze.default.runtime.onConnect.addListener(By),Ze.default.alarms.onAlarm.addListener(Ly),Ze.default.runtime.onMessage.addListener(fc(Py)),Ze.default.tabs.onRemoved.addListener(Ry),Ze.default.windows.onRemoved.addListener(Cy),Ze.default.webRequest.onBeforeSendHeaders.addListener(Ty,{urls:["http://*/*","https://*/*"]},["requestHeaders"]),Ze.default.storage.onChanged.addListener(Ey),Ze.default.action.onClicked.addListener(Ay)}o(Sy,"initializeListeners");var Mn="sidePanelWindow",cn=new Map;function Ay(e){if(e.windowId===void 0)return;let t=e.windowId;cn.get(t)===!0&&chrome.sidePanel?chrome.sidePanel.open({windowId:t}).catch(n=>{console.error("Failed to open side panel:",n)}):typeof chrome.action?.openPopup=="function"&&chrome.action.setPopup({popup:"popup.html"}).then(()=>chrome.action.openPopup({windowId:t})).catch(n=>{console.error("Failed to open popup:",n)}).finally(()=>{chrome.action.setPopup({popup:""})})}o(Ay,"handleActionClicked");async function _y(){try{let e=await chrome.storage.session.get(null);cn.clear();for(let[t,r]of Object.entries(e))if(t.startsWith(Mn+"_")&&r===!0){let n=parseInt(t.replace(Mn+"_",""),10);isNaN(n)||cn.set(n,!0)}}catch(e){console.error("Failed to sync side panel preferences:",e)}}o(_y,"syncSidePanelPreferencesCache");async function Ey(e,t){if(t!=="local"&&t!=="sync")return;let r=e[Wc.ApiEnvironment];r&&Xa(r.newValue??(Pn()?Vo.Production:Vo.Staging))}o(Ey,"handleStorageChanged");async function Ty(e){return await Va,e.tabId===Ze.default.tabs.TAB_ID_NONE?{}:"documentLifecycle"in e&&e.documentLifecycle==="prerender"?{}:e.requestHeaders?.some(n=>n.name.toLowerCase()==="sec-purpose"&&n.value?.toLowerCase().startsWith("prefetch"))?{}:((e.type==="main_frame"||e.type==="sub_frame")&&await vy(e.url,e.tabId),{})}o(Ty,"handleBeforeSendHeaders");async function vy(e,t){let r=new Pe,n=await nd(r,Le,e);if(!n.result)return;if(n.isSubdomainDomainWhitelisted){let a=await nt.get(zn.UserWhitelistSubdomains);if(JSON.parse(`${a}`)?.includes(`${n.source}`))return}let s=await nt.get(zn.UserWhitelistedOrigins);JSON.parse(`${s}`)?.includes(`${n.source}`)||(Le.capture("phishingBlocklistRedirect",{data:{targetURL:e}}),await Ze.default.tabs.update(t,{url:`phishing.html?origin=${encodeURIComponent(e)}&subdomain=${n.isSubdomainDomainWhitelisted}&source=${encodeURIComponent(n.source??"")}`}))}o(vy,"detectAndRedirectPhishing");function Iy(e){switch(e.reason){case"install":{Le&&Le.capture("appInstall");break}case"update":{X.addBreadcrumb(Q.StartUp,`Extension updated from ${e.previousVersion} to ${ec}`,fe.Debug);break}default:break}}o(Iy,"handleInstallAsync");var gh=o(e=>e.sender?.url===Ze.default.runtime.getURL("popup.html")||e.sender?.url===Ze.default.runtime.getURL("notification.html"),"isPopUpOrNotification");async function ky(e){if(!Ws()&&gh(e)){is(e.sender.url);let t=await nt.get(zn.LockTimerMs),r=Date.now()+(t??jc);X.addBreadcrumb(Q.Account,"Lock alarm created",fe.Debug,{skipFileLogger:!0}),Ze.default.alarms.create(fn.LockExtension,{when:r})}}o(ky,"handleDisconnect");function Ry(e){is(e)}o(Ry,"handleTabRemoved");function Cy(e){if(cn.delete(e),chrome?.storage?.session){let t=`${Mn}_${e}`;chrome.storage.session.remove(t)}}o(Cy,"handleWindowRemoved");async function By(e){if(await Va,e.onDisconnect.addListener(ky),gh(e)&&(Ws()?(xn(),yh(za),Ka()):await Ze.default.alarms.clear(fn.LockExtension)),e.name==="contentscript"){if(e.sender&&e.sender.url&&e.sender.tab&&e.sender.tab.id){let r=e.postMessage.bind(e);e.postMessage=s=>{r(s)},(await lh(e)).start()}e.postMessage("phantom#background#initialized"),e.onMessage.addListener(r=>{typeof r=="string"&&r==="phantom#ready_to_setup_streams"&&e.postMessage("phantom#background#initialized")})}}o(By,"handleConnection");function Ly(e){if(e.name.startsWith(fn.DeleteStorageValue)){let[t,r]=e.name.split(":");nt.remove(r)}e.name===fn.LockExtension&&(X.addBreadcrumb(Q.Account,"Locked by alarm",fe.Debug),qu(!0),xn(),Ka())}o(Ly,"handleAlarm");async function Ka(){await Promise.all([nt.set(ns,!0),Ld("idle")])}o(Ka,"notifyExtensionLocked");async function Uy(){await nt.set(ns,!1)}o(Uy,"notifyExtensionUnlocked");async function My(e,t){try{let r=await Oy.get().catch(()=>[]),n=ps(t),{hideProvidersArray:s,dontOverrideWindowEthereum:i}=cs(n,r);return c.result(e.id,{hideProvidersArray:s,dontOverrideWindowEthereum:i})}catch(r){return X.captureError(r,Q.Provider),c.internalError(e.id,r?.message)}}o(My,"handleProviderInjectionOptionsRequest");async function Py(e,t){if(await Va,e.method?.startsWith(Ed)){let a=await Bd(e);return c.result(null,a??{success:!1,error:"MMKV handler not registered"})}let r=t.url,n=t.tab?.id;if(r&&e.method==="providerInjectionOptions")return My(e,r);if(!r||!r.startsWith(ro()))return X.captureMessage(`Unauthorized request from origin: ${Wn(r)}`,Q.Generic,fe.Error),c.result(e.id,`${e.method} not permitted`);if(!Object.values(Fd).includes(e.method))return X.captureMessage("Unauthorized method",Q.Generic,fe.Error),c.result(e.id,`${e.method} not permitted`);switch(e.method){case"ping":return c.result(e.id,{pong:!0});case"hasOnboarded":return Vu(e);case"resetHasOnboarded":return Ku(e);case"lockExtension":{let a=Wu(e);return yh(za),Ka(),a}case"unlockExtension":{let a=Gu(e);return Dy().then(l=>{za=l}),Uy(),a}case"IsExtensionUnlocked":return ju(e);case"setPassword":return Yu(e);case"verifyPassword":return Zu(e);case"updatePassword":return Xu(e);case"importPrivateKeyAccount":return au(e);case"importReadOnlyAccount":return cu(e);case"importSeedAccount":return du(e);case"importSocialSeedAccount":return pu(e);case"isExistingSeed":return uu(e);case"addAccountForSeed":return lu(e);case"addAccountForSeedless":return mu(e);case"addLedgerAccounts":return hu(e);case"exportPrivateKey":return fu(e);case"exportEntropy":return gu(e);case"setAccountIcon":return yu(e);case"deriveAddresses":return xu(e);case"removeAccount":return wu(e);case"reorderAccount":return bu(e);case"getAllAccounts":return Su(e);case"getAllSeeds":return Au(e);case"getAllSeedlessSeeds":return _u(e);case"sign":return Eu(e);case"getAuthenticationPublicKey":return Tu(e);case"checkVaultIntegrity":return vu(e);case"doNotUseDiagnoseSeedCacheDigests":return Iu(e);case"debugCorruptSeedCacheWithSha256":return ku(e);case"getPhantomOrganization":return Ru(e);case"getKmsAccounts":return Pu(e);case"getOrCreatePhantomOrganization":return Bu(e);case"RetrieveKMSWallet":return Lu(e);case"GetKMSWalletStatus":return Uu(e);case"addUserToCurrentUserOrganization":return Mu(e);case"deleteUserFromOrganization":return Cu(e);case"getWalletWithTag":return Du(e);case"updateUserInOrganization":return Nu(e);case"getAccounts":return Ou(e);case"exportWallet":return Hu(e);case"batchRpcCall":return Fu(e);case"logMessage":return Ju(e);case"downloadLogs":return Qu(e);case"serviceWorkerMutexAcquire":return Vd(e,n??r);case"serviceWorkerMutexRelease":return Kd(e)}return c.methodNotFound(e.id)}o(Py,"handleMessage");var za,mh=(0,hh.default)(async()=>await Ze.default.storage.local.set({"last-sw-ping":new Date().getTime()}),fh);async function Dy(){return await mh(),setInterval(mh,fh)}o(Dy,"startSwPing");async function yh(e){clearInterval(e)}o(yh,"stopSwPing");var Ny=60*10*1e3,Oy=new Mc(nt,Ny,()=>ds().catch(e=>(X.captureError(e,Q.Provider),[])),"phantomwallet-dApps-list");export{Oy as dAppsListCache};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

apg-js/dist/apg-lib-bundle.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=serviceWorker.js.map
