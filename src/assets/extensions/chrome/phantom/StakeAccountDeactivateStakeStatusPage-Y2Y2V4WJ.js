import{a as J}from"./chunk-3YKALUMV.js";import{a as D}from"./chunk-5S2LR6TU.js";import"./chunk-UN5DVVHZ.js";import{e as Y,f as q,g as G}from"./chunk-KYC3TN2Q.js";import"./chunk-RKISZW47.js";import"./chunk-IAL2BZAA.js";import"./chunk-M6UNEOVM.js";import"./chunk-DQLUBVF4.js";import"./chunk-IP6N33CZ.js";import"./chunk-S2IXR5HZ.js";import"./chunk-EOII3ZM4.js";import{b as y}from"./chunk-KUVQSLSD.js";import"./chunk-H3HVEJML.js";import{_a as g}from"./chunk-NDIBTKLE.js";import"./chunk-6JMEWALM.js";import"./chunk-KWNEQJE2.js";import{N as M,_ as V,xa as Q}from"./chunk-HGG2EQ5O.js";import"./chunk-PQUTVVRL.js";import"./chunk-IOXJCRJI.js";import{b as _}from"./chunk-XGLSOW44.js";import"./chunk-56GZZQJU.js";import"./chunk-QLEUWUCH.js";import"./chunk-OJPBMZQC.js";import"./chunk-FLYQWZR6.js";import"./chunk-CYENH7PC.js";import{Fb as H,p as z}from"./chunk-F236ETGH.js";import{Va as F,Wa as B,p as U,q as K}from"./chunk-QF7OLC35.js";import{A as I,D as N,Kb as C,Wa as l}from"./chunk-LPV5DSV2.js";import"./chunk-NEE4FZIK.js";import"./chunk-BYU664DD.js";import{Ba as A,L as oe,M as R,Y as O}from"./chunk-JYKVQ4NC.js";import"./chunk-U7OZEJ4F.js";import"./chunk-ZRGHR2IN.js";import{a as b,g as v,i as x,n as L}from"./chunk-TSHWMJEM.js";x();L();var i=v(oe(),1);var e=v(R(),1),ae=b(a=>{let r={stakePubkey:a.stakeAccountPubkey,stakeAuthorityPubkey:a.stakeAuthorityPubkey,onClose:a.onClose},{t}=O(),{deactivateStake:u,needsLedgerApproval:k,txHash:s,confirmationStatus:c,isError:d,error:S,onDeny:n}=ne(r);if(k)return(0,e.jsx)(q,{ledgerAction:u,cancel:n});if(d){let o=S,m=o?.message,f=Y(o),h=o?.message.includes(K),T=o?.message.includes(U);return f?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:u,onCancelClick:n}):h||T?(0,e.jsx)(J,{onCancelClick:n}):(0,e.jsxs)(y,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:n,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:m??t("stakeAccountDeactivateStakeUnstakingFailedDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})}return c==="confirmed"||c==="finalized"?(0,e.jsxs)(y,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated",children:["You will be able to withdraw your stake",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes inactive."]})}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]}):(0,e.jsxs)(y,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDeactivateStakeUnstakingSolDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})},"StakeAccountDeactivateStakeStatusPage"),ve=ae,ne=b(({onClose:a,...r})=>{let{data:t,isSuccess:u}=H(),{accountIdentifier:k,isLedgerAccount:s,solanaChainAddress:c,solanaPublicKey:d,connection:S,networkID:n}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>C.isSolanaNetworkID(te.networkID)),$=new l.PublicKey(w?.address??""),j=t?.type===z.Ledger,E=w?.networkID,ee=F(B(E));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:E}},[t]),o=Q(S),m=(0,i.useCallback)(()=>{o.mutate({...r,accountIdentifier:k,senderAddress:c,stakePubkey:new l.PublicKey(r.stakePubkey),stakeAuthorityPubkey:new l.PublicKey(r.stakeAuthorityPubkey),authorizedPubkey:d})},[k,r,o,c,d]),f=M(),h=(0,i.useCallback)(()=>{f.denied({chainType:I.Solana,chainName:N.Solana,networkId:C.getSolanaNetworkIDValue(n),type:"undelegate"}),a()},[n,a,f]);(0,i.useEffect)(()=>{if(u){if(!t||!c)throw new Error("Selected account undefined when trying to perform stake transaction.");s||m()}},[u]);let P=o.data?.id,p=V(S,2e3,P),W=s&&(o.isIdle||o.isPending),X=p.data?.value?.confirmationStatus;return{deactivateStake:m,onDeny:h,needsLedgerApproval:W,txHash:P,confirmationStatus:X,isError:o.isError??p.isError,error:o.error??p.error}},"useDeactivateStakeOnMount");export{ae as StakeAccountDeactivateStakeStatusPage,ve as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-Y2Y2V4WJ.js.map
