import{Ba as I,Ia as D,Ta as x,Ya as O,Za as h,g as l,o as A,xa as S}from"./chunk-IOXJCRJI.js";import{dd as T}from"./chunk-LPV5DSV2.js";import{a as r,i as o,n as i}from"./chunk-TSHWMJEM.js";o();i();o();i();o();i();function s(e){return BigInt(Math.round(e*1e18))}r(s,"toSafeInteger");function P(e){return Number(e)/1e18}r(P,"fromSafeInteger");function g(e,t){return P(s(e)+s(t))}r(g,"safeAdd");function c(e,t){return P(s(e)-s(t))}r(c,"safeSubtract");function m(e,t){return P(s(e)*BigInt(1e18)/s(t))}r(m,"safeDivide");function U(e,t){if(t===-100)return-1*e;let n=m(e,1+t/100);return c(e,n)}r(U,"calculatePriceDifference");var y=U;o();i();function v(e,t){return c(t,e)===0?0:e/c(t,e)*100}r(v,"calculateTotalPercentChange24h");var F=v;o();i();function C(e,t){return t*Number(e.totalQuantity)/10**e.decimals}r(C,"getPriceForToken");var k=l(e=>{let t=e(x),n=!1,a=t.reduce((u,f)=>{let p=f.livePrice?.price??f.price?.price,V=f.livePrice?.priceChange24h??f.price?.priceChange24h;p&&(n=!0);let b=C(f,p??0),N=y(b,V??0);return{currentValue:g(u.currentValue,b),priceDifference:g(u.priceDifference,N)}},{currentValue:0,priceDifference:0});return n?{currentValue:a.currentValue,priceDifference:a.priceDifference,totalPercentChange24h:F(a.priceDifference,a.currentValue)}:{currentValue:void 0,priceDifference:void 0,totalPercentChange24h:void 0}}),M=I({atomToStoreOffline:h,offlineKey:l(e=>`${e(D)??""}:portfolio-value`),namespaceKey:"fungible-tokens",ttlMs:T({days:10}),initialValue:{totalValueUsdCentsCurrent:void 0,totalValueUsdStringCurrent:void 0,totalValueUsdCents24h:void 0,totalValueUsdString24h:void 0,totalPercentChange24h:void 0},schema:S}),L=l(e=>{let t=e(M),n=t?.totalPercentChange24h,a=t?.totalValueUsdCents24h,u=t?.totalValueUsdCentsCurrent;return{currentValue:u!==void 0?u/100:void 0,priceDifference:a!==void 0&&u!==void 0?m(c(u,a),100):void 0,totalPercentChange24h:n}}),he=l(e=>{let t=e(k),n=e(L);return{local:t,remote:n}}),R=A(h,e=>e.status),E=l(e=>{if(!e(O))return{status:"idle",data:{currentValue:void 0,priceDifference:void 0,totalPercentChange24h:void 0}};let n=e(k),a=e(R),u=e(L),f=typeof n.currentValue=="number"||typeof n.priceDifference=="number"||typeof n.totalPercentChange24h=="number";return{status:f?"success":a,data:f?n:u}}),Pe=E;export{y as a,C as b,he as c,Pe as d};
//# sourceMappingURL=chunk-3ZRYSYYB.js.map
