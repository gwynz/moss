import{U as y,m as O}from"./chunk-YTLZ2SGV.js";import{d as D}from"./chunk-IAL2BZAA.js";import{c as b}from"./chunk-TWE3NBCC.js";import{h as I,i as C}from"./chunk-EOII3ZM4.js";import{d as x}from"./chunk-H3HVEJML.js";import{d as p,n as f,p as g}from"./chunk-HGG2EQ5O.js";import{a as F}from"./chunk-OJPBMZQC.js";import{Mf as P,dd as h}from"./chunk-LPV5DSV2.js";import{L as M,M as A,Y as w}from"./chunk-JYKVQ4NC.js";import{a as l,g as S,i as m,n as d}from"./chunk-TSHWMJEM.js";m();d();var t=S(M(),1);m();d();var H="_19n0krs0";var c=S(A(),1),V=h({days:3}),k=new F,Di=l(()=>{let i=P(),{isOpen:s}=D(),{data:o,isReady:e}=f(p.AdditionalPermissions),{handleShowModalVisibility:n}=y(),a=e&&!o&&!s;return(0,t.useEffect)(()=>{a&&(n("additionalPermissions"),i.capture("allSitesPermissionsSeen",{data:{uiContext:"interstitial"}}))},[n,a,i]),null},"AdditionalPermissionsInterstitialVisibility");function Hi(){let[i,s]=(0,t.useState)(null),[o,e]=(0,t.useState)(!1),{data:n,isReady:a}=f(p.AdditionalPermissions);(0,t.useEffect)(()=>{(async()=>{let r=await b(k);(!r||r&&Date.now()-r>V)&&e(!0)})()},[]),(0,t.useEffect)(()=>{I().then(r=>{s(r)})},[i]);let u=(0,t.useMemo)(()=>i===null?!1:!i,[i]);return{shouldShowAdditionalPermissionsInterstitial:a&&u&&!n&&o}}l(Hi,"useAdditionalPermissionsInterstitial");var v=l(()=>{let{t:i}=w(),s=P(),{handleHideModalVisibility:o}=y(),e=g(p.AdditionalPermissions),n=(0,t.useCallback)(()=>{s.capture("allSitesPermissions",{data:{uiContext:"interstitial",oldValue:!1,newValue:!1,choice:"commandDontAllow"}}),e(),o("additionalPermissions")},[o,e,s]),a=(0,t.useCallback)(async()=>{let r=await C();s.capture("allSitesPermissions",{data:{uiContext:"interstitial",oldValue:!1,newValue:r,choice:"commandAllow"}}),e(),o("additionalPermissions")},[o,e,s]),u={icon:(0,c.jsx)("img",{className:H,src:"/images/additional-permissions/interstitial.webp"}),bodyTitle:i("interstitialAdditionalPermissionsTitle"),bodyDescription:i("interstitialAdditionalPermissionsSubtitle"),FooterComponent:l(()=>(0,c.jsx)(x,{primaryText:i("commandAllow"),onPrimaryClicked:a,secondaryText:i("commandDontAllow"),onSecondaryClicked:n}),"FooterComponent"),onDismiss:n};return(0,c.jsx)(O,{...u})},"AdditionalPermissionsInterstitial"),Mi=v;export{Di as a,Hi as b,v as c,Mi as d};
//# sourceMappingURL=chunk-FDWUS2JE.js.map
