import{E as Ut,Ia as ta,K as Js,P as Zs,f as Ii,h as Ci,ia as ea,n as yn,o as Di,s as ki}from"./chunk-FLYQWZR6.js";import{Eb as dr,F as Ls,Fb as tt,G as Ks,Ta as Ws,Xa as Ys,ac as Xs,e as lr,i as bt}from"./chunk-F236ETGH.js";import{$b as Ha,$d as wn,B as Mi,Bb as Fa,C as ma,Eb as Ma,Ec as Ar,Fc as lt,Hb as Ua,J as pa,Jc as Wt,Jd as Or,K as ha,Kb as wr,Ld as Ki,Mb as Ba,N as ya,Nd as nc,O as ga,P as ba,Pb as La,Qa as wa,Qb as Ka,R as vt,Ra as Bt,S as hr,Sa as Ea,T as yr,Tc as Ga,U as $t,Ua as Gt,Uc as za,V as gr,Va as Sa,Vb as bn,Vc as Wa,W as br,Wa as Tr,X as va,Xa as Aa,Xb as Va,Xc as U,Y as Ta,Ya as _a,Yb as Bi,Yc as nt,Zc as _r,_ as vr,_b as qa,ae as rc,ba as Ui,bc as Qa,c as X,d as mr,db as Pa,dd as Ya,ed as Xa,fd as Ja,g as ye,gd as Pr,hc as ja,i as na,j as ra,jc as $a,k as pr,kb as xa,l as ia,lb as zt,m as oa,mc as Er,md as Tn,n as Ri,o as Fi,od as Li,pd as xr,qb as Oa,r as sa,rb as Na,rd as Za,s as aa,sb as Ia,sd as Ee,t as ca,tb as Ca,tc as ut,td as ec,u as ua,uc as Sr,ud as tc,v as la,vb as Da,w as da,x as gn,xb as ka,xc as vn,y as fa,yb as Ra}from"./chunk-QF7OLC35.js";import{Ad as q,B as ps,Ba as $d,Bc as Rt,Bd as ur,Ca as zd,Cc as Cs,D as $e,Da as jt,E as Xe,Ee as Qs,F as tr,Fe as js,Gc as z,Hc as F,Ib as gs,Jb as bs,Kb as x,Kc as D,Mb as he,Mf as et,Nb as vs,Pb as Ts,Qb as Be,Rb as ne,Tb as Ei,U as kt,Ub as fn,Ue as Mt,Vc as or,Wa as ve,We as $s,Yc as pn,Ye as Gs,Zc as sr,_c as me,bd as Je,be as Pi,cc as ws,cd as Ce,ce as gt,dc as Es,dd as _,ec as nr,fd as Ds,hd as Ft,ic as Ss,jc as As,jd as Ze,je as Us,kc as mn,ke as Bs,lc as rr,lf as hn,mc as xe,mf as zs,nc as _s,nd as ar,o as Ue,oc as ir,pc as ie,qc as Si,qd as cr,qe as Vs,rc as Ai,rd as ks,sd as Rs,tc as Ps,td as Fs,te as qs,ua as jd,uc as fe,ud as ae,uf as Oi,vc as xs,vd as Ms,wc as _i,wd as yt,we as xi,xc as Os,xe as Hs,yc as Ns,zc as Is,ze as Yd}from"./chunk-LPV5DSV2.js";import{c as wi,m as Gd,t as hs,u as ys}from"./chunk-NEE4FZIK.js";import{A as er,Ha as Ni,Ia as fr,J as B,K as Y,L as Q,M as Wd,Rb as Xd,T as ue,Y as Le,g as Jn,q as ht,w as g,y as Zn}from"./chunk-JYKVQ4NC.js";import{a as s,d as je,g as L,i as u,j as y,m as Buffer,n as l}from"./chunk-TSHWMJEM.js";var Hr=je(re=>{"use strict";u();l();Object.defineProperty(re,"__esModule",{value:!0});re.MULTIPLE_ACCOUNT_INFO_MAX=re.NAME_HOUSE_PREFIX=re.TLD_HOUSE_PREFIX=re.NFT_RECORD_PREFIX=re.TOKEN_METADATA_PROGRAM_ID=re.SPL_TOKEN_PROGRAM_ID=re.NAME_HOUSE_PROGRAM_ID=re.TLD_HOUSE_PROGRAM_ID=re.ANS_PROGRAM_ID=re.ORIGIN_TLD=re.MAIN_DOMAIN_PREFIX=void 0;var kn=jt();re.MAIN_DOMAIN_PREFIX="main_domain";re.ORIGIN_TLD="ANS";re.ANS_PROGRAM_ID=new kn.PublicKey("ALTNSZ46uaAUU7XUV6awvdorLGqAsPwa9shm7h4uP2FK");re.TLD_HOUSE_PROGRAM_ID=new kn.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S");re.NAME_HOUSE_PROGRAM_ID=new kn.PublicKey("NH3uX6FtVE2fNREAioP7hm5RaozotZxeL6khU1EHx51");re.SPL_TOKEN_PROGRAM_ID=new kn.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");re.TOKEN_METADATA_PROGRAM_ID=new kn.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");re.NFT_RECORD_PREFIX="nft_record";re.TLD_HOUSE_PREFIX="tld_house";re.NAME_HOUSE_PREFIX="name_house";re.MULTIPLE_ACCOUNT_INFO_MAX=100});var Uu=je(J=>{"use strict";u();l();var Lm=J&&J.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:s(function(){return e[n]},"get")})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Km=J&&J.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),it=J&&J.__decorate||function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Vm=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&Lm(e,t,n);return Km(e,t),e},ku=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(J,"__esModule",{value:!0});J.deserializeUnchecked=J.deserialize=J.serialize=J.BinaryReader=J.BinaryWriter=J.BorshError=J.baseDecode=J.baseEncode=void 0;var At=ku(wi()),Ru=ku(Gd()),qm=Vm(zd()),Hm=typeof self.TextDecoder!="function"?qm.TextDecoder:self.TextDecoder,Qm=new Hm("utf-8",{fatal:!0});function jm(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),Ru.default.encode(Buffer.from(t))}s(jm,"baseEncode");J.baseEncode=jm;function $m(t){return Buffer.from(Ru.default.decode(t))}s($m,"baseDecode");J.baseDecode=$m;var To=1024,Te=class extends Error{static{s(this,"BorshError")}constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};J.BorshError=Te;var Qr=class{static{s(this,"BinaryWriter")}constructor(){this.buf=Buffer.alloc(To),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(To)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new At.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new At.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new At.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new At.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(To)]),this.length+=e.length}writeString(e){this.maybeResize();let n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(let r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}};J.BinaryWriter=Qr;function ot(t,e,n){let r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(o){if(o instanceof RangeError){let a=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new Te("Reached the end of buffer when deserializing")}throw o}}}s(ot,"handlingRangeError");var Oe=class{static{s(this,"BinaryReader")}constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new At.default(e,"le")}readU128(){let e=this.readBuffer(16);return new At.default(e,"le")}readU256(){let e=this.readBuffer(32);return new At.default(e,"le")}readU512(){let e=this.readBuffer(64);return new At.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Te(`Expected buffer length ${e} isn't within bounds`);let n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){let e=this.readU32(),n=this.readBuffer(e);try{return Qm.decode(n)}catch(r){throw new Te(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(e());return r}};it([ot],Oe.prototype,"readU8",null);it([ot],Oe.prototype,"readU16",null);it([ot],Oe.prototype,"readU32",null);it([ot],Oe.prototype,"readU64",null);it([ot],Oe.prototype,"readU128",null);it([ot],Oe.prototype,"readU256",null);it([ot],Oe.prototype,"readU512",null);it([ot],Oe.prototype,"readString",null);it([ot],Oe.prototype,"readFixedArray",null);it([ot],Oe.prototype,"readArray",null);J.BinaryReader=Oe;function Fu(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(Fu,"capitalizeFirstLetter");function Rn(t,e,n,r,i){try{if(typeof r=="string")i[`write${Fu(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new Te(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new Te(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let o=0;o<r[1];o++)Rn(t,null,n[o],r[0],i)}else i.writeArray(n,o=>{Rn(t,e,o,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),Rn(t,e,n,r.type,i));break}default:throw new Te(`FieldType ${r} unrecognized`)}else Mu(t,n,i)}catch(o){throw o instanceof Te&&o.addToFieldPath(e),o}}s(Rn,"serializeField");function Mu(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}let r=t.get(e.constructor);if(!r)throw new Te(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,o])=>{Rn(t,i,e[i],o,n)});else if(r.kind==="enum"){let i=e[r.field];for(let o=0;o<r.values.length;++o){let[a,c]=r.values[o];if(a===i){n.writeU8(o),Rn(t,a,e[a],c,n);break}}}else throw new Te(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}s(Mu,"serializeStruct");function Gm(t,e,n=Qr){let r=new n;return Mu(t,e,r),r.toArray()}s(Gm,"serialize");J.serialize=Gm;function Fn(t,e,n,r){try{if(typeof n=="string")return r[`read${Fu(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){let i=[];for(let o=0;o<n[1];o++)i.push(Fn(t,null,n[0],r));return i}else return r.readArray(()=>Fn(t,e,n[0],r))}return n.kind==="option"?r.readU8()?Fn(t,e,n.type,r):void 0:wo(t,n,r)}catch(i){throw i instanceof Te&&i.addToFieldPath(e),i}}s(Fn,"deserializeField");function wo(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);let r=t.get(e);if(!r)throw new Te(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){let i={};for(let[o,a]of t.get(e).fields)i[o]=Fn(t,o,a,n);return new e(i)}if(r.kind==="enum"){let i=n.readU8();if(i>=r.values.length)throw new Te(`Enum index: ${i} is out of range`);let[o,a]=r.values[i],c=Fn(t,o,a,n);return new e({[o]:c})}throw new Te(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}s(wo,"deserializeStruct");function zm(t,e,n,r=Oe){let i=new r(n),o=wo(t,e,i);if(i.offset<n.length)throw new Te(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return o}s(zm,"deserialize");J.deserialize=zm;function Wm(t,e,n,r=Oe){let i=new r(n);return wo(t,e,i)}s(Wm,"deserializeUnchecked");J.deserializeUnchecked=Wm});var jr=je(rn=>{"use strict";u();l();var Bu=rn&&rn.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(rn,"__esModule",{value:!0});rn.NameRecordHeader=void 0;var Eo=jt(),Mn=Uu(),Ht=class t{static{s(this,"NameRecordHeader")}constructor(e){this.parentName=new Eo.PublicKey(e.parentName),this.nclass=new Eo.PublicKey(e.nclass),this.expiresAt=new Date(new Mn.BinaryReader(Buffer.from(e.expiresAt)).readU64().toNumber()*1e3),this.createdAt=new Date(new Mn.BinaryReader(Buffer.from(e.createdAt)).readU64().toNumber()*1e3),this.nonTransferable=e.nonTransferable[0]!==0;let n=45*24*60*60*1e3;this.isValid=new Mn.BinaryReader(Buffer.from(e.expiresAt)).readU64().toNumber()===0?!0:this.expiresAt.getTime()+n>new Date(Date.now()).getTime(),this.owner=this.isValid?new Eo.PublicKey(e.owner):void 0}static get byteSize(){return 200}static fromAccountAddress(e,n){var r;return Bu(this,void 0,void 0,function*(){let i=yield e.getAccountInfo(n,"confirmed");if(!i)return;let o=(0,Mn.deserializeUnchecked)(this.schema,t,i.data);return o.data=(r=i.data)===null||r===void 0?void 0:r.subarray(this.byteSize),o})}static fromMultipileAccountAddresses(e,n){return Bu(this,void 0,void 0,function*(){let r=yield e.getMultipleAccountsInfo(n),i=[];return r.forEach(o=>{if(!o){i.push(void 0);return}let a=this.fromAccountInfo(o);if(!a){i.push(void 0);return}i.push(a)}),i})}static fromAccountInfo(e){var n;let r=(0,Mn.deserializeUnchecked)(this.schema,t,e.data);return r.data=(n=e.data)===null||n===void 0?void 0:n.subarray(this.byteSize),r}pretty(){var e;let n=this.data.indexOf(0);return{parentName:this.parentName.toBase58(),owner:(e=this.owner)===null||e===void 0?void 0:e.toBase58(),nclass:this.nclass.toBase58(),expiresAt:this.expiresAt,createdAt:this.createdAt,nonTransferable:this.nonTransferable,isValid:this.isValid,data:this.isValid?this.data.subarray(0,n).toString():void 0}}};rn.NameRecordHeader=Ht;Ht.DISCRIMINATOR=[68,72,88,44,15,167,103,243];Ht.HASH_PREFIX="ALT Name Service";Ht.schema=new Map([[Ht,{kind:"struct",fields:[["discriminator",[8]],["parentName",[32]],["owner",[32]],["nclass",[32]],["expiresAt",[8]],["createdAt",[8]],["nonTransferable",[1]],["padding",[79]]]}]])});var So=je(Fe=>{"use strict";u();l();var Ym=Fe&&Fe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Xm=Fe&&Fe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jm=Fe&&Fe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ym(e,t,n);return Xm(e,t),e};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.tagBeet=Fe.Tag=void 0;var Zm=Jm(Mi()),Lu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.ActiveRecord=1]="ActiveRecord",t[t.InactiveRecord=2]="InactiveRecord"})(Lu=Fe.Tag||(Fe.Tag={}));Fe.tagBeet=Zm.fixedScalarEnum(Lu)});var Ao=je(pe=>{"use strict";u();l();var ep=pe&&pe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),tp=pe&&pe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vu=pe&&pe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ep(e,t,n);return tp(e,t),e},Ku=pe&&pe.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(pe,"__esModule",{value:!0});pe.nftRecordBeet=pe.NftRecord=pe.nftRecordDiscriminator=void 0;var $r=Vu(Mi()),Gr=Vu(ma()),qu=So();pe.nftRecordDiscriminator=[174,190,114,100,177,14,90,254];var zr=class t{static{s(this,"NftRecord")}constructor(e,n,r,i,o,a){this.tag=e,this.bump=n,this.nameAccount=r,this.owner=i,this.nftMintAccount=o,this.tldHouse=a}static fromArgs(e){return new t(e.tag,e.bump,e.nameAccount,e.owner,e.nftMintAccount,e.tldHouse)}static fromAccountInfo(e,n=0){return t.deserialize(e.data,n)}static fromAccountAddress(e,n){return Ku(this,void 0,void 0,function*(){let r=yield e.getAccountInfo(n);if(r==null)throw new Error(`Unable to find NftRecord account at ${n}`);return t.fromAccountInfo(r,0)[0]})}static deserialize(e,n=0){return pe.nftRecordBeet.deserialize(e,n)}serialize(){return pe.nftRecordBeet.serialize(Object.assign({accountDiscriminator:pe.nftRecordDiscriminator},this))}static get byteSize(){return pe.nftRecordBeet.byteSize}static getMinimumBalanceForRentExemption(e,n){return Ku(this,void 0,void 0,function*(){return yield e.getMinimumBalanceForRentExemption(t.byteSize,n)})}static hasCorrectByteSize(e,n=0){return e.byteLength-n===t.byteSize}pretty(){return{tag:"Tag."+qu.Tag[this.tag],bump:this.bump,nameAccount:this.nameAccount.toBase58(),owner:this.owner.toBase58(),nftMintAccount:this.nftMintAccount.toBase58(),tldHouse:this.tldHouse.toBase58()}}};pe.NftRecord=zr;pe.nftRecordBeet=new $r.BeetStruct([["accountDiscriminator",$r.uniformFixedSizeArray($r.u8,8)],["tag",qu.tagBeet],["bump",$r.u8],["nameAccount",Gr.publicKey],["owner",Gr.publicKey],["nftMintAccount",Gr.publicKey],["tldHouse",Gr.publicKey]],zr.fromArgs,"NftRecord")});var Wr=je(K=>{"use strict";u();l();var We=K&&K.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.splitDomainTld=K.getParsedAllDomainsNftAccountsByOwner=K.delay=K.performReverseLookupBatched=K.findMetadataAddress=K.findNameHouse=K.findTldHouse=K.findNftRecord=K.getMintOwner=K.findAllDomainsForTld=K.getParentAccountFromTldHouseAccountInfo=K.getTldFromTldHouseAccountInfo=K.getAllTld=K.findMainDomain=K.findOwnedNameAccountsForUser=K.getOriginNameAccountKey=K.getHashedName=K.getNameOwner=K.getNameAccountKeyWithBump=void 0;var Ve=jt(),np=wi(),rp=jd(),_e=Hr(),_o=jr(),ip=So(),op=Ao();function Po(t,e,n){let r=[t,e?e.toBuffer():Buffer.alloc(32),n?n.toBuffer():Buffer.alloc(32)];return Ve.PublicKey.findProgramAddressSync(r,_e.ANS_PROGRAM_ID)}s(Po,"getNameAccountKeyWithBump");K.getNameAccountKeyWithBump=Po;function sp(t,e,n){return We(this,void 0,void 0,function*(){let r=yield _o.NameRecordHeader.fromAccountAddress(t,e),i=r.owner;if(!r.isValid)return;if(!n)return i;let[o]=Gu(n),[a]=$u(e,o);return i?.toBase58()!==a.toBase58()?i:yield ju(t,a)})}s(sp,"getNameOwner");K.getNameOwner=sp;function xo(t){return We(this,void 0,void 0,function*(){let e=_o.NameRecordHeader.HASH_PREFIX+t,n=(0,rp.sha256)(Buffer.from(e,"utf8")).slice(2);return Buffer.from(n,"hex")})}s(xo,"getHashedName");K.getHashedName=xo;function ap(t=_e.ORIGIN_TLD){return We(this,void 0,void 0,function*(){let e=yield xo(t),[n]=Po(e,void 0,void 0);return n})}s(ap,"getOriginNameAccountKey");K.getOriginNameAccountKey=ap;function cp(t,e,n){return We(this,void 0,void 0,function*(){let r=[{memcmp:{offset:40,bytes:e.toBase58(),encoding:"base58"}}];return n&&r.push({memcmp:{offset:8,bytes:n.toBase58(),encoding:"base58"}}),(yield t.getProgramAccounts(_e.ANS_PROGRAM_ID,{filters:r})).map(o=>o.pubkey)})}s(cp,"findOwnedNameAccountsForUser");K.findOwnedNameAccountsForUser=cp;function up(t){return Ve.PublicKey.findProgramAddressSync([Buffer.from(_e.MAIN_DOMAIN_PREFIX),t.toBuffer()],_e.TLD_HOUSE_PROGRAM_ID)}s(up,"findMainDomain");K.findMainDomain=up;function lp(t){return We(this,void 0,void 0,function*(){let n=[{memcmp:{offset:0,bytes:[247,144,135,1,238,173,19,249],encoding:"binary"}}],r=yield t.getProgramAccounts(_e.TLD_HOUSE_PROGRAM_ID,{filters:n}),i=[];return r.map(({account:o})=>{let a=Qu(o),c=Hu(o);i.push({tld:c,parentAccount:a})}),i})}s(lp,"getAllTld");K.getAllTld=lp;function Hu(t){var e;let r=(e=t?.data)===null||e===void 0?void 0:e.subarray(104),i=new np.BN(r?.subarray(0,4),"le").toNumber();return r.subarray(4,4+i).toString().replace(/\0.*$/g,"")}s(Hu,"getTldFromTldHouseAccountInfo");K.getTldFromTldHouseAccountInfo=Hu;function Qu(t){var e;let r=(e=t?.data)===null||e===void 0?void 0:e.subarray(72,104);return new Ve.PublicKey(r)}s(Qu,"getParentAccountFromTldHouseAccountInfo");K.getParentAccountFromTldHouseAccountInfo=Qu;function dp(t,e){return We(this,void 0,void 0,function*(){let n=[{memcmp:{offset:8,bytes:e.toBase58(),encoding:"base58"}}];return(yield t.getProgramAccounts(_e.ANS_PROGRAM_ID,{filters:n})).map(i=>i.pubkey)})}s(dp,"findAllDomainsForTld");K.findAllDomainsForTld=dp;function ju(t,e){return We(this,void 0,void 0,function*(){try{let n=yield op.NftRecord.fromAccountAddress(t,e);if(n.tag!==ip.Tag.ActiveRecord)return;let r=yield t.getTokenLargestAccounts(n.nftMintAccount),i=yield t.getParsedAccountInfo(r.value[0].address);return i.value.data?new Ve.PublicKey(i.value.data.parsed.info.owner):void 0}catch{return}})}s(ju,"getMintOwner");K.getMintOwner=ju;function $u(t,e){return Ve.PublicKey.findProgramAddressSync([Buffer.from(_e.NFT_RECORD_PREFIX),e.toBuffer(),t.toBuffer()],_e.NAME_HOUSE_PROGRAM_ID)}s($u,"findNftRecord");K.findNftRecord=$u;function fp(t){return t=t.toLowerCase(),Ve.PublicKey.findProgramAddressSync([Buffer.from(_e.TLD_HOUSE_PREFIX),Buffer.from(t)],_e.TLD_HOUSE_PROGRAM_ID)}s(fp,"findTldHouse");K.findTldHouse=fp;function Gu(t){return Ve.PublicKey.findProgramAddressSync([Buffer.from(_e.NAME_HOUSE_PREFIX),t.toBuffer()],_e.NAME_HOUSE_PROGRAM_ID)}s(Gu,"findNameHouse");K.findNameHouse=Gu;var mp=s(t=>Ve.PublicKey.findProgramAddressSync([Buffer.from("metadata"),_e.TOKEN_METADATA_PROGRAM_ID.toBuffer(),t.toBuffer()],_e.TOKEN_METADATA_PROGRAM_ID)[0],"findMetadataAddress");K.findMetadataAddress=mp;function pp(t,e,n){return We(this,void 0,void 0,function*(){let r=e.map(a=>We(this,void 0,void 0,function*(){let c=yield xo(a.toBase58()),[d]=Po(c,n,void 0);return d})),i=yield Promise.all(r);return(yield t.getMultipleAccountsInfo(i)).map(a=>a?.data.subarray(_o.NameRecordHeader.byteSize,a?.data.length).toString())})}s(pp,"performReverseLookupBatched");K.performReverseLookupBatched=pp;function hp(t){return new Promise(e=>setTimeout(e,t))}s(hp,"delay");K.delay=hp;var yp=s((t,e,n)=>We(void 0,void 0,void 0,function*(){let{value:r}=yield e.getParsedTokenAccountsByOwner(t,{programId:_e.SPL_TOKEN_PROGRAM_ID}),i=r.filter(a=>{var c,d,f,m,p,h,b,v,E,A;let V=(p=(m=(f=(d=(c=a.account)===null||c===void 0?void 0:c.data)===null||d===void 0?void 0:d.parsed)===null||f===void 0?void 0:f.info)===null||m===void 0?void 0:m.tokenAmount)===null||p===void 0?void 0:p.uiAmount;return((A=(E=(v=(b=(h=a.account)===null||h===void 0?void 0:h.data)===null||b===void 0?void 0:b.parsed)===null||v===void 0?void 0:v.info)===null||E===void 0?void 0:E.tokenAmount)===null||A===void 0?void 0:A.decimals)===0&&V===1}).map(a=>{var c,d,f,m;return(m=(f=(d=(c=a.account)===null||c===void 0?void 0:c.data)===null||d===void 0?void 0:d.parsed)===null||f===void 0?void 0:f.info)===null||m===void 0?void 0:m.mint});return yield gp(i,e,n)}),"getParsedAllDomainsNftAccountsByOwner");K.getParsedAllDomainsNftAccountsByOwner=yp;var gp=s((t,e,n)=>We(void 0,void 0,void 0,function*(){let r=[];if(t.length>100)for(;t.length>0;){let a=t.splice(0,100).map(d=>(0,K.findMetadataAddress)(new Ve.PublicKey(d))),c=yield e.getMultipleAccountsInfo(a);for(let d of c)if(d){let f=new Ve.PublicKey(d.data.subarray(326,358));if(!!d.data.subarray(326,327)&&f.toString()===n.toString()){let p=d.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}else{let a=t.map(d=>(0,K.findMetadataAddress)(new Ve.PublicKey(d))),c=yield e.getMultipleAccountsInfo(a);for(let d of c)if(d){let f=new Ve.PublicKey(d.data.subarray(326,358));if(!!d.data.subarray(326,327)&&f.toString()===n.toString()){let p=d.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}return r}),"getOwnedDomains");function bp(t){let e=t.split("."),n="",r="",i="";return e.length===1?r=e[0]:(n="."+e[e.length-1],r=e[e.length-2],i=e.slice(0,e.length-2).join(".")),[n,r,i]}s(bp,"splitDomainTld");K.splitDomainTld=bp});var No=je(ce=>{"use strict";u();l();var vp=ce&&ce.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Tp=ce&&ce.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oo=ce&&ce.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&vp(e,t,n);return Tp(e,t),e},zu=ce&&ce.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(ce,"__esModule",{value:!0});ce.mainDomainBeet=ce.MainDomain=ce.mainDomainDiscriminator=void 0;var wp=Oo(jt()),Wu=Oo(ma()),Un=Oo(Mi());ce.mainDomainDiscriminator=[109,239,227,199,98,226,66,175];var Yr=class t{static{s(this,"MainDomain")}constructor(e,n,r){this.nameAccount=e,this.tld=n,this.domain=r}static fromArgs(e){return new t(e.nameAccount,e.tld,e.domain)}static fromAccountInfo(e,n=0){return t.deserialize(e.data,n)}static fromAccountAddress(e,n,r){return zu(this,void 0,void 0,function*(){let i=yield e.getAccountInfo(n,r);if(i==null)throw new Error(`Unable to find MainDomain account at ${n}`);return t.fromAccountInfo(i,0)[0]})}static gpaBuilder(e=new wp.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S")){return Wu.GpaBuilder.fromStruct(e,ce.mainDomainBeet)}static deserialize(e,n=0){return ce.mainDomainBeet.deserialize(e,n)}serialize(){return ce.mainDomainBeet.serialize(Object.assign({accountDiscriminator:ce.mainDomainDiscriminator},this))}static byteSize(e){let n=t.fromArgs(e);return ce.mainDomainBeet.toFixedFromValue(Object.assign({accountDiscriminator:ce.mainDomainDiscriminator},n)).byteSize}static getMinimumBalanceForRentExemption(e,n,r){return zu(this,void 0,void 0,function*(){return yield n.getMinimumBalanceForRentExemption(t.byteSize(e),r)})}pretty(){return{nameAccount:this.nameAccount.toBase58(),tld:this.tld,domain:this.domain}}};ce.MainDomain=Yr;ce.mainDomainBeet=new Un.FixableBeetStruct([["accountDiscriminator",Un.uniformFixedSizeArray(Un.u8,8)],["nameAccount",Wu.publicKey],["tld",Un.utf8String],["domain",Un.utf8String]],Yr.fromArgs,"MainDomain")});var Co=je(on=>{"use strict";u();l();var Yu=on&&on.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(on,"__esModule",{value:!0});on.getDomainKey=void 0;var Io=Wr(),Ep=s((t,e=!1)=>Yu(void 0,void 0,void 0,function*(){let n=t.split(".");if(n.length===3){let c="."+n[2],d=n[1],f=n[0],{pubkey:m}=yield pt(c),{pubkey:p}=yield pt(d,m),b=Buffer.from([e?1:0]).toString().concat(f),v=yield pt(b,p);return Object.assign(Object.assign({},v),{isSub:!0,parent:p})}else if(n.length===4&&e){let c="."+n[3],d=n[2],f=n[1],m=n[0],{pubkey:p}=yield pt(c),{pubkey:h}=yield pt(d,p),{pubkey:b}=yield pt("\0".concat(f),h),v=Buffer.from([1]).toString(),E=yield pt(v.concat(m),b);return Object.assign(Object.assign({},E),{isSub:!0,parent:h,isSubRecord:!0})}else if(n.length>4)throw new Error("Invalid derivation input");let r="."+n[1],{pubkey:i}=yield pt(r),o=n[0],a=yield pt(o,i);return Object.assign(Object.assign({},a),{isSub:!1,parent:void 0})}),"getDomainKey");on.getDomainKey=Ep;var pt=s((t,e)=>Yu(void 0,void 0,void 0,function*(){e||(e=yield(0,Io.getOriginNameAccountKey)());let n=yield(0,Io.getHashedName)(t),[r]=yield(0,Io.getNameAccountKeyWithBump)(n,void 0,e);return{pubkey:r,hashed:n}}),"_getNameAccount")});var Ju=je(sn=>{"use strict";u();l();var Me=sn&&sn.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return s(i,"adopt"),new(n||(n=Promise))(function(o,a){function c(m){try{f(r.next(m))}catch(p){a(p)}}s(c,"fulfilled");function d(m){try{f(r.throw(m))}catch(p){a(p)}}s(d,"rejected");function f(m){m.done?o(m.value):i(m.value).then(c,d)}s(f,"step"),f((r=r.apply(t,e||[])).next())})};Object.defineProperty(sn,"__esModule",{value:!0});sn.TldParser=void 0;var st=jt(),Sp=wi(),Ap=No(),Do=jr(),M=Wr(),_t=Hr(),Xu=Co(),ko=class{static{s(this,"TldParser")}constructor(e){this.connection=e}getAllUserDomains(e){return Me(this,void 0,void 0,function*(){return typeof e=="string"&&(e=new st.PublicKey(e)),yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,void 0)})}getAllUserDomainsFromTld(e,n){return Me(this,void 0,void 0,function*(){let r="."+n,i=yield(0,M.getOriginNameAccountKey)(),o=yield(0,M.getHashedName)(r),[a]=(0,M.getNameAccountKeyWithBump)(o,void 0,i);return typeof e=="string"&&(e=new st.PublicKey(e)),yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,a)})}getOwnerFromDomainTld(e){return Me(this,void 0,void 0,function*(){let n=e.split("."),r=n[0],i="."+n[1],o=yield(0,M.getOriginNameAccountKey)(),a=yield(0,M.getHashedName)(i),[c]=(0,M.getNameAccountKeyWithBump)(a,void 0,o),d=yield(0,M.getHashedName)(r),[f]=(0,M.getNameAccountKeyWithBump)(d,void 0,c),[m]=(0,M.findTldHouse)(i);return yield(0,M.getNameOwner)(this.connection,f,m)})}getNameRecordFromDomainTld(e){return Me(this,void 0,void 0,function*(){let n=e.split("."),r=n[0],i="."+n[1],o=yield(0,M.getOriginNameAccountKey)(),a=yield(0,M.getHashedName)(i),[c]=(0,M.getNameAccountKeyWithBump)(a,void 0,o),d=yield(0,M.getHashedName)(r),[f]=(0,M.getNameAccountKeyWithBump)(d,void 0,c);return yield Do.NameRecordHeader.fromAccountAddress(this.connection,f)})}getTldFromParentAccount(e){var n;return Me(this,void 0,void 0,function*(){typeof e=="string"&&(e=new st.PublicKey(e));let r=yield Do.NameRecordHeader.fromAccountAddress(this.connection,e),i=yield this.connection.getAccountInfo(r?.owner),a=(n=i?.data)===null||n===void 0?void 0:n.subarray(104),c=new Sp.BN(a?.subarray(0,4),"le").toNumber();return a.subarray(4,4+c).toString().replace(/\0.*$/g,"")})}reverseLookupNameAccount(e,n){var r;return Me(this,void 0,void 0,function*(){typeof e=="string"&&(e=new st.PublicKey(e)),typeof n=="string"&&(n=new st.PublicKey(n));let i=yield(0,M.getHashedName)(e.toString()),[o]=(0,M.getNameAccountKeyWithBump)(i,n,void 0),a=yield Do.NameRecordHeader.fromAccountAddress(this.connection,o);return(r=a?.data)===null||r===void 0?void 0:r.toString()})}getMainDomain(e){return Me(this,void 0,void 0,function*(){typeof e=="string"&&(e=new st.PublicKey(e));let[n]=(0,M.findMainDomain)(e);return yield Ap.MainDomain.fromAccountAddress(this.connection,n)})}getParsedAllUserDomainsFromTldUnwrapped(e,n){return Me(this,void 0,void 0,function*(){let r="."+n,i=yield(0,M.getOriginNameAccountKey)(),o=yield(0,M.getHashedName)(r),[a]=(0,M.findTldHouse)(r),[c]=(0,M.getNameAccountKeyWithBump)(o,void 0,i);typeof e=="string"&&(e=new st.PublicKey(e));let d=yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,c),f=[];for(let m=0;m<d.length;m+=_t.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,M.delay)(100);let p=Math.min(m+_t.MULTIPLE_ACCOUNT_INFO_MAX,d.length),h=d.slice(m,p),v=(yield(0,M.performReverseLookupBatched)(this.connection,h,a)).map((E,A)=>({nameAccount:h[A],domain:E+r}));v.length>0&&v.sort((E,A)=>E.domain.localeCompare(A.domain,void 0,{numeric:!0,sensitivity:"base"})),f.push(...v)}return f})}getParsedAllUserDomainsFromTld(e,n){return Me(this,void 0,void 0,function*(){let r="."+n,i=yield(0,M.getOriginNameAccountKey)(),o=yield(0,M.getHashedName)(r),[a]=(0,M.findTldHouse)(r),[c]=(0,M.getNameAccountKeyWithBump)(o,void 0,i);typeof e=="string"&&(e=new st.PublicKey(e));let d=yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,c),f=[],p=(yield(0,M.getParsedAllDomainsNftAccountsByOwner)(e,this.connection,(0,M.findNameHouse)(a)[0])).map(b=>b+r),h=yield Promise.all(p.map(b=>Me(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Xu.getDomainKey)(b)).pubkey,domain:b}})));f.push(...h);for(let b=0;b<d.length;b+=_t.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,M.delay)(100);let v=Math.min(b+_t.MULTIPLE_ACCOUNT_INFO_MAX,d.length),E=d.slice(b,v),V=(yield(0,M.performReverseLookupBatched)(this.connection,E,a)).map((G,Z)=>({nameAccount:E[Z],domain:G+r}));f.push(...V)}return f.length>0&&f.sort((b,v)=>b.domain.localeCompare(v.domain,void 0,{numeric:!0,sensitivity:"base"})),f})}getParsedAllUserDomainsUnwrapped(e){return Me(this,void 0,void 0,function*(){let n=yield(0,M.getAllTld)(this.connection),r=[];typeof e=="string"&&(e=new st.PublicKey(e));for(let{parentAccount:i,tld:o}of n){let a=o.toString(),[c]=(0,M.findTldHouse)(a),d=yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,i);for(let f=0;f<d.length;f+=_t.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,M.delay)(100);let m=Math.min(f+_t.MULTIPLE_ACCOUNT_INFO_MAX,d.length),p=d.slice(f,m),b=(yield(0,M.performReverseLookupBatched)(this.connection,p,c)).map((v,E)=>({nameAccount:p[E],domain:v+a}));r.push(...b)}}return r.length>0&&r.sort((i,o)=>i.domain.localeCompare(o.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}getParsedAllUserDomains(e){return Me(this,void 0,void 0,function*(){let n=yield(0,M.getAllTld)(this.connection),r=[];typeof e=="string"&&(e=new st.PublicKey(e));for(let{parentAccount:i,tld:o}of n){let a=o.toString(),[c]=(0,M.findTldHouse)(a),d=yield(0,M.findOwnedNameAccountsForUser)(this.connection,e,i),m=(yield(0,M.getParsedAllDomainsNftAccountsByOwner)(e,this.connection,(0,M.findNameHouse)(c)[0])).map(h=>h+a),p=yield Promise.all(m.map(h=>Me(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Xu.getDomainKey)(h)).pubkey,domain:h}})));r.push(...p);for(let h=0;h<d.length;h+=_t.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,M.delay)(100);let b=Math.min(h+_t.MULTIPLE_ACCOUNT_INFO_MAX,d.length),v=d.slice(h,b),A=(yield(0,M.performReverseLookupBatched)(this.connection,v,c)).map((V,G)=>({nameAccount:v[G],domain:V+a}));r.push(...A)}}return r.length>0&&r.sort((i,o)=>i.domain.localeCompare(o.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}};sn.TldParser=ko});var Zu=je(Bn=>{"use strict";u();l();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.Record=void 0;var _p;(function(t){t.IPFS="IPFS",t.ARWV="ARWV",t.SOL="SOL",t.ETH="ETH",t.BTC="BTC",t.LTC="LTC",t.DOGE="DOGE",t.Email="email",t.Url="url",t.Discord="discord",t.Github="github",t.Reddit="reddit",t.Twitter="twitter",t.Telegram="telegram",t.Pic="pic",t.SHDW="SHDW",t.POINT="POINT"})(_p=Bn.Record||(Bn.Record={}))});var el=je(De=>{"use strict";u();l();var Pp=De&&De.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Pt=De&&De.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Pp(e,t,n)};Object.defineProperty(De,"__esModule",{value:!0});Pt(Wr(),De);Pt(Hr(),De);Pt(Ju(),De);Pt(jr(),De);Pt(No(),De);Pt(Ao(),De);Pt(Co(),De);Pt(Zu(),De)});u();l();u();l();u();l();var ic=s(t=>{let{accountIdentifier:e,autoConfirmEnabled:n=!1,trustedAppsByAccount:r}=t;if(!e||!r)return;let i=Object.values(r),o=[],a=[];n?(i.forEach(d=>{d.autoConfirm&&Js(d.autoConfirm)?o.push(d):a.push(d)}),o.sort((d,f)=>(f.autoConfirm?.sessionStartTime??0)-(d.autoConfirm?.sessionStartTime??0))):a=i;let c=zs(a.map(d=>{let f=d.lastConnectedTimestamp??0;return{timestamp:f,data:{...d,lastConnectedTimestamp:f}}}));return{autoConfirmEnabledApps:o,timeBucketedApps:c}},"prepareTrustedAppsSections");function oc(t){return t.map(e=>({lastConnectedTimestamp:e.createdAtMs,expiryTimestamp:e.expiresAtMs,dappMeta:{appUrl:e.origin,imageUrl:e.imageUrl,title:e.title,appId:e.appId}}))}s(oc,"mapAppPermissionsToTrustedApps");u();l();var sc=s((t,e)=>{if(!e||t.autoConfirm?.sessionStartTime===void 0||t.autoConfirm?.maxSessionDuration===void 0)return;if(t.expiryTimestamp)return t.expiryTimestamp?Oi(new Date(t.expiryTimestamp)):void 0;let n=new Date(t.autoConfirm?.sessionStartTime+t.autoConfirm?.maxSessionDuration*1e3);return Oi(n)},"getTrustedAppRowUntilValue");u();l();var Jd={...Ft(yn.EmojiSkinTone,[...Ut.emojiSkinTone()]),...Ft(yn.IsAnalyticsOptedOut,[...Ut.isAnalyticsOptedOut()]),...Ft(ur.UserExplorerPreferenceV2,[...Ut.preferredExplorers()]),...Ft(yn.SelectedCurrency,[...Ut.selectedCurrency()]),...Ft(ur.UserRecentAddresses,[...Ut.recentAddresses()],Zs()),...Ft(ur.UserSavedAddresses,[...Ut.savedAddresses()])};u();l();var Zd=0;function O(t,e){let n=`atom${++Zd}`,r={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=ef,r.write=tf),e&&(r.write=e),r}s(O,"atom");function ef(t){return t(this)}s(ef,"defaultRead");function tf(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}s(tf,"defaultWrite");var ac=s((t,e)=>t.unstable_is?t.unstable_is(e):e===t,"isSelfAtom"),qi=s(t=>"init"in t,"hasInitialValue"),Vi=s(t=>!!t.write,"isActuallyWritableAtom"),Ir=new WeakMap,Hi=s(t=>{var e;return Qi(t)&&!((e=Ir.get(t))!=null&&e[1])},"isPendingPromise"),nf=s((t,e)=>{let n=Ir.get(t);if(n)n[1]=!0,n[0].forEach(r=>r(e));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},"cancelPromise"),rf=s(t=>{if(Ir.has(t))return;let e=[new Set,!1];Ir.set(t,e);let n=s(()=>{e[1]=!0},"settle");t.then(n,n),t.onCancel=r=>{e[0].add(r)}},"patchPromiseForCancelability"),Qi=s(t=>typeof t?.then=="function","isPromiseLike"),cc=s(t=>"v"in t||"e"in t,"isAtomStateInitialized"),Nr=s(t=>{if("e"in t)throw t.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},"returnAtomValue"),uc=s((t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},"addPendingPromiseToDependency"),of=s((t,e,n,r)=>{var i;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&n===t)throw new Error("[Bug] atom cannot depend on itself");e.d.set(n,r.n),Hi(e.v)&&uc(t,e.v,r),(i=r.m)==null||i.t.add(t)},"addDependency"),sf=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),lc=s((...t)=>{let[e,n,r,i,o,a]=t,c=s(P=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!P)throw new Error("Atom is undefined or null");let S=e(P);return S||(S={d:new Map,p:new Set,n:0},n(P,S),o?.(P,Ie)),S},"ensureAtomState"),d=new WeakMap,f=new Map,m=new Set,p=new Set,h=s(()=>{var P;let S=[],N=s(I=>{try{I()}catch(k){S.push(k)}},"call");do{(P=Ie[sf])==null||P.call(Ie);let I=new Set,k=I.add.bind(I);f.forEach(C=>{var $;return($=C.m)==null?void 0:$.l.forEach(k)}),f.clear(),m.forEach(k),m.clear(),p.forEach(k),p.clear(),I.forEach(N),f.size&&G()}while(f.size||m.size||p.size);if(S.length)throw S[0]},"flushCallbacks"),b=s((P,S,N)=>{let I="v"in S,k=S.v,C=Hi(S.v)?S.v:null;if(Qi(N)){rf(N);for(let $ of S.d.keys())uc(P,N,c($));S.v=N}else S.v=N;delete S.e,(!I||!Object.is(k,S.v))&&(++S.n,C&&nf(C,N))},"setAtomStateValueOrPromise"),v=s(P=>{var S;let N=c(P);if(cc(N)&&(N.m&&d.get(P)!==N.n||Array.from(N.d).every(([ee,te])=>v(ee).n===te)))return N;N.d.clear();let I=!0,k=s(()=>{N.m&&(H(P,N),G(),h())},"mountDependenciesIfAsync"),C=s(ee=>{if(ac(P,ee)){let Re=c(ee);if(!cc(Re))if(qi(ee))b(ee,Re,ee.init);else throw new Error("no atom init");return Nr(Re)}let te=v(ee);try{return Nr(te)}finally{of(P,N,ee,te),I||k()}},"getter"),$,W,de={get signal(){return $||($=new AbortController),$.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!Vi(P)&&console.warn("setSelf function cannot be used with read-only atom"),!W&&Vi(P)&&(W=s((...ee)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return j(P,...ee)},"setSelf")),W}};try{let ee=r(P,C,de);return b(P,N,ee),Qi(ee)&&((S=ee.onCancel)==null||S.call(ee,()=>$?.abort()),ee.then(k,k)),N}catch(ee){return delete N.v,N.e=ee,++N.n,N}finally{I=!1}},"readAtomState"),E=s(P=>Nr(v(P)),"readAtom"),A=s(P=>{var S;let N=new Map;for(let I of((S=P.m)==null?void 0:S.t)||[]){let k=c(I);k.m&&N.set(I,k)}for(let I of P.p)N.set(I,c(I));return N},"getMountedOrPendingDependents"),V=s(P=>{let S=[P];for(;S.length;){let N=S.pop();for(let[I,k]of A(N))d.has(I)||(d.set(I,k.n),S.push(k))}},"invalidateDependents"),G=s(()=>{var P;let S=[],N=new WeakSet,I=new WeakSet,k=Array.from(f);for(;k.length;){let[C,$]=k[k.length-1];if(I.has(C)){k.pop();continue}if(N.has(C)){d.get(C)===$.n?S.push([C,$,$.n]):(d.delete(C),f.set(C,$)),I.add(C),k.pop();continue}N.add(C);for(let[W,de]of A($))N.has(W)||k.push([W,de])}for(let C=S.length-1;C>=0;--C){let[$,W,de]=S[C],ee=!1;for(let te of W.d.keys())if(te!==$&&f.has(te)){ee=!0;break}ee&&(v($),H($,W),de!==W.n&&(f.set($,W),(P=W.u)==null||P.call(W))),d.delete($)}},"recomputeInvalidatedAtoms"),Z=s((P,...S)=>{let N=!0,I=s(C=>Nr(v(C)),"getter"),k=s((C,...$)=>{var W;let de=c(C);try{if(ac(P,C)){if(!qi(C))throw new Error("atom not writable");let ee=de.n,te=$[0];b(C,de,te),H(C,de),ee!==de.n&&(f.set(C,de),(W=de.u)==null||W.call(de),V(de));return}else return Z(C,...$)}finally{N||(G(),h())}},"setter");try{return i(P,I,k,...S)}finally{N=!1}},"writeAtomState"),j=s((P,...S)=>{try{return Z(P,...S)}finally{G(),h()}},"writeAtom"),H=s((P,S)=>{var N;if(S.m&&!Hi(S.v)){for(let[I,k]of S.d)if(!S.m.d.has(I)){let C=c(I);R(I,C).t.add(P),S.m.d.add(I),k!==C.n&&(f.set(I,C),(N=C.u)==null||N.call(C),V(C))}for(let I of S.m.d||[])if(!S.d.has(I)){S.m.d.delete(I);let k=Pe(I,c(I));k?.t.delete(P)}}},"mountDependencies"),R=s((P,S)=>{var N;if(!S.m){v(P);for(let I of S.d.keys())R(I,c(I)).t.add(P);if(S.m={l:new Set,d:new Set(S.d.keys()),t:new Set},(N=S.h)==null||N.call(S),Vi(P)){let I=S.m,k=s(()=>{let C=!0,$=s((...W)=>{try{return Z(P,...W)}finally{C||(G(),h())}},"setAtom");try{let W=a(P,$);W&&(I.u=()=>{C=!0;try{W()}finally{C=!1}})}finally{C=!1}},"processOnMount");p.add(k)}}return S.m},"mountAtom"),Pe=s((P,S)=>{var N;if(S.m&&!S.m.l.size&&!Array.from(S.m.t).some(I=>{var k;return(k=c(I).m)==null?void 0:k.d.has(P)})){let I=S.m.u;I&&m.add(I),delete S.m,(N=S.h)==null||N.call(S);for(let k of S.d.keys()){let C=Pe(k,c(k));C?.t.delete(P)}return}return S.m},"unmountAtom"),Ie={get:E,set:j,sub:s((P,S)=>{let N=c(P),k=R(P,N).l;return k.add(S),h(),()=>{k.delete(S),Pe(P,N),h()}},"subscribeAtom"),unstable_derive:s(P=>lc(...P(...t)),"unstable_derive")};return Ie},"buildStore"),af=s(t=>{let e=new Set,n,r=0,i=t.unstable_derive((...c)=>{let[d,f,,m]=c;return n=d,c[1]=s(function(h,b){f(h,b);let v=b.h;b.h=()=>{v?.(),b.m?e.add(h):e.delete(h)}},"devSetAtomState"),c[3]=s(function(h,b,v,...E){return r?v(h,...E):m(h,b,v,...E)},"devAtomWrite"),c}),o=i.set;return Object.assign(i,{dev4_get_internal_weak_map:s(()=>({get:s(c=>{let d=n(c);if(!(!d||d.n===0))return d},"get")}),"dev4_get_internal_weak_map"),dev4_get_mounted_atoms:s(()=>e,"dev4_get_mounted_atoms"),dev4_restore_atoms:s(c=>{o({read:s(()=>null,"read"),write:s((f,m)=>{++r;try{for(let[p,h]of c)qi(p)&&m(p,h)}finally{--r}},"write")})},"dev4_restore_atoms")})},"deriveDevStoreRev4"),ji=s(()=>{let t=new WeakMap,e=lc(n=>t.get(n),(n,r)=>t.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var i;return(i=n.unstable_onInit)==null?void 0:i.call(n,...r)},(n,...r)=>{var i;return(i=n.onMount)==null?void 0:i.call(n,...r)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?af(e):e},"createStore"),En,dc=s(()=>(En||(En=ji(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=En),globalThis.__JOTAI_DEFAULT_STORE__!==En&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),En),"getDefaultStore");u();l();var ge=L(Q(),1);var mc=(0,ge.createContext)(void 0),pc=s(t=>{let e=(0,ge.useContext)(mc);return t?.store||e||dc()},"useStore"),vb=s(({children:t,store:e})=>{let n=(0,ge.useRef)(void 0);return!e&&!n.current&&(n.current=ji()),(0,ge.createElement)(mc.Provider,{value:e||n.current},t)},"Provider"),Gi=s(t=>typeof t?.then=="function","isPromiseLike"),hc=s(t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},"attachPromiseMeta"),cf=ge.default.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(hc(t),t)}),$i=new WeakMap,fc=s(t=>{let e=$i.get(t);return e||(e=new Promise((n,r)=>{let i=t,o=s(d=>f=>{i===d&&n(f)},"onFulfilled"),a=s(d=>f=>{i===d&&r(f)},"onRejected"),c=s(d=>{"onCancel"in d&&typeof d.onCancel=="function"&&d.onCancel(f=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&f===d)throw new Error("[Bug] p is not updated even after cancelation");Gi(f)?($i.set(f,e),i=f,f.then(o(f),a(f)),c(f)):n(f)})},"registerCancelHandler");t.then(o(t),a(t)),c(t)}),$i.set(t,e)),e},"createContinuablePromise");function oe(t,e){let n=pc(e),[[r,i,o],a]=(0,ge.useReducer)(f=>{let m=n.get(t);return Object.is(f[0],m)&&f[1]===n&&f[2]===t?f:[m,n,t]},void 0,()=>[n.get(t),n,t]),c=r;(i!==n||o!==t)&&(a(),c=n.get(t));let d=e?.delay;if((0,ge.useEffect)(()=>{let f=n.sub(t,()=>{if(typeof d=="number"){let m=n.get(t);Gi(m)&&hc(fc(m)),setTimeout(a,d);return}a()});return a(),f},[n,t,d]),(0,ge.useDebugValue)(c),Gi(c)){let f=fc(c);return cf(f)}return c}s(oe,"useAtomValue");function Sn(t,e){let n=pc(e);return(0,ge.useCallback)((...i)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}s(Sn,"useSetAtom");function Tb(t,e){return[oe(t,e),Sn(t,e)]}s(Tb,"useAtom");u();l();var uf=g.object({data:g.string(),from:g.string(),to:g.string()}),lf=g.object({transaction:uf});async function df({caip19:t,amount:e,owner:n}){let r=await me.api().post("/tokens/v1/unwrap",{owner:n,caip19:t,amount:e.toNumber()}),i=lf.safeParse(r.data);if(!i.success){let{error:o}=i;throw D.captureError(o,F.Fungibles),new Tn(`Failed to get unwrap transaction: ${o.message}`)}return i.data.transaction}s(df,"getUnwrapTransaction");var ff=s(({caip19:t,amount:e,owner:n})=>q({gcTime:za.Medium,staleTime:Wa.Never,enabled:n!==""&&e.isGreaterThan(0),queryKey:Ee.unwrapTransaction({caip19:t,amount:e,owner:n}),async queryFn(){return await df({caip19:t,amount:e,owner:n})}}),"useGetUnwrapTransaction");u();l();u();l();var dt;(function(t){t.AccountIdToHiddenMints="accountIdToHiddenMints"})(dt||(dt={}));var mf=g.union([g.object({version:g.literal(1),value:g.record(g.array(g.string()))}),g.object({version:g.literal(2),value:g.record(g.array(g.object({mintId:g.string(),status:g.nativeEnum(vn)})))})]),pf=s((t,e)=>{let n=e,r=t;return n||r||null},"visibilityOverridesResolver"),[yc,gc,bc]=Ds("fungibles",[{key:dt.AccountIdToHiddenMints,type:"object",validator:mf,nullable:!0,resolver:pf,updateOn:"idle"}]),$b=s((...t)=>Rt(yc,...t),"useFungiblesStorage");var Yt=fe(t=>{if(!t)return new Map;let e=yc(dt.AccountIdToHiddenMints),i=(Wt(e??null)?.value??{})[t]??[];return new Map(i.map(xe(o=>[o.mintId,o],0)))});function vc(t){return Rt(Yt,t)}s(vc,"useVisibilityOverrides");u();l();var hf=(t=>(t[t.Every1Second=1e3]="Every1Second",t[t.Every5Seconds=5e3]="Every5Seconds",t[t.Every10Seconds=1e4]="Every10Seconds",t[t.Every30Seconds=3e4]="Every30Seconds",t[t.Every1Minute=6e4]="Every1Minute",t[t.Every5Minutes=3e5]="Every5Minutes",t))(hf||{}),_n=(t=>(t.Always="always",t.Online="online",t.OfflineFirst="offlineFirst",t))(_n||{}),w=(t=>(t[t.UNDEFINED=1]="UNDEFINED",t[t.NULL=2]="NULL",t[t.NUMBER=4]="NUMBER",t[t.STRING=8]="STRING",t[t.BOOLEAN=16]="BOOLEAN",t[t.OBJECT=32]="OBJECT",t[t.ARRAY=64]="ARRAY",t[t.ID=128]="ID",t[t.RECORD=256]="RECORD",t[t.UNION=512]="UNION",t[t.ENTITY=1024]="ENTITY",t[t.HAS_SUB_ENTITY=2048]="HAS_SUB_ENTITY",t[t.HAS_NUMBER_FORMAT=4096]="HAS_NUMBER_FORMAT",t[t.HAS_STRING_FORMAT=8192]="HAS_STRING_FORMAT",t[t.PARSE_RESULT=16384]="PARSE_RESULT",t))(w||{}),Tt=Symbol("array"),wt=Symbol("record"),yf=Object.entries,gf=Array.isArray,be=class t{static{s(this,"ValidatorDef")}kind;mask;_optional;_nullable;_nullish;_shapeKey=void 0;_shape;subEntityPaths=void 0;typenameField=void 0;typenameValue=void 0;idField=void 0;values=void 0;_methodsFactory=void 0;_methods=void 0;_entityConfig=void 0;constructor(e,n,r,i=void 0){this.kind=e,this.mask=n,this._shape=r,this.values=i}static cloneWith(e,n,r=void 0){let i=new t(e.kind,n|e.mask,e._shape,r);return i.subEntityPaths=e.subEntityPaths,i.values=e.values,i.typenameField=e.typenameField,i.typenameValue=e.typenameValue,i.idField=e.idField,i._methodsFactory=e._methodsFactory,i._methods=e._methods,i._entityConfig=e._entityConfig,i}reifyShape(){if(this._shapeKey===void 0)switch(this.kind){case 5:{let e=this._shape();this._shape=Tc(this,e),this._methodsFactory&&!this._methods&&(this._methods=this._methodsFactory());break}case 0:this._shape=Tc(this,this._shape);break;case 1:this._shape=_f(this,this._shape);break;case 3:case 4:case 6:{let e=this._shape,n;e instanceof t?(n=e.shapeKey,e.mask&(w.ENTITY|w.HAS_SUB_ENTITY)&&(this.mask|=w.HAS_SUB_ENTITY)):e instanceof Lt?n=ie(Array.from(e)):n=ie(e),this._shapeKey=ie([this.kind,this.mask,this.values,n]);break}}}get shape(){return this.reifyShape(),this._shape}get methods(){return this.reifyShape(),this._methods}get shapeKey(){return this.reifyShape(),this._shapeKey}set shapeKey(e){this._shapeKey=e>>>0}get optional(){return this._optional===void 0&&(this._optional=t.cloneWith(this,w.UNDEFINED)),this._optional}get nullable(){return this._nullable===void 0&&(this._nullable=t.cloneWith(this,w.NULL)),this._nullable}get nullish(){return this._nullish===void 0&&(this._nullish=t.cloneWith(this,w.UNDEFINED|w.NULL)),this._nullish}extend(e,n){if(this.kind!==5&&this.kind!==0)throw new Error("extend() can only be called on Entity or Object types");if(this.kind===5){let r=e,i=this._methodsFactory,o=new t(5,this.mask,()=>{let a=this.shape,c=r();for(let d of Object.keys(c))if(d in a)throw new Error(`Cannot extend: field '${d}' already exists in type definition`);return{...a,...c}});return(i||n)&&(o._methodsFactory=()=>{let a=i?i():{},c=n?n():{};return{...a,...c}}),o._entityConfig=this._entityConfig,o}else{this.reifyShape();let r=this._shape,i=e;for(let o of Object.keys(i))if(o in r)throw new Error(`Cannot extend: field '${o}' already exists in type definition`);return new t(0,this.mask,{...r,...i})}}},Lt=class extends Set{static{s(this,"CaseInsensitiveSet")}lowercaseMap;constructor(e){super(e),this.lowercaseMap=new Map;for(let n of e)if(typeof n=="string"){let r=n.toLowerCase(),i=this.lowercaseMap.get(r);if(i!==void 0)throw new Error(`Case-insensitive enum cannot have multiple values with the same lowercase form: '${i}' and '${n}' both become '${r}'`);this.lowercaseMap.set(r,n)}}has(e){return this.get(e)!==void 0}get(e){if(typeof e=="string")return this.lowercaseMap.get(e.toLowerCase());if(super.has(e))return e}};function bf(t){return new be(3,w.ARRAY,t)}s(bf,"defineArray");function vf(t){return new be(4,w.RECORD|w.OBJECT,t)}s(vf,"defineRecord");function Tf(t){return new be(6,w.PARSE_RESULT,t)}s(Tf,"defineParseResult");function wf(t){return new be(0,w.OBJECT,t)}s(wf,"defineObject");function Fr(...t){let e=0,n,r,i;for(let o of t){if(typeof o=="number"){e|=o;continue}if(o instanceof Set){if(i===void 0)i=new Set(o);else for(let a of o)i.add(a);continue}if(n===void 0){n=o;continue}r===void 0&&(r=[n]),r.push(o)}return n===void 0?i===void 0?e:e===0?i:new be(2,e|w.UNION,void 0,i):r===void 0?be.cloneWith(n,e,i):new be(1,e|w.UNION,r,i)}s(Fr,"defineUnion");function Ef(t){return typeof t=="number"?t|w.UNDEFINED|w.NULL:t instanceof Set?Fr(t,w.UNDEFINED,w.NULL):t.nullish}s(Ef,"defineNullish");function Sf(t){return typeof t=="number"?t|w.UNDEFINED:t instanceof Set?Fr(t,w.UNDEFINED):t.optional}s(Sf,"defineOptional");function Af(t){return typeof t=="number"?t|w.NULL:t instanceof Set?Fr(t,w.NULL):t.nullable}s(Af,"defineNullable");function Tc(t,e){let n=ie([t.mask,t.values]);for(let[r,i]of yf(e))switch(typeof i){case"number":if(i&w.ID){if(t.idField!==void 0)throw new Error(`Duplicate id field: ${r}`);t.idField=r}n+=ie(r)^i;break;case"string":if(t.typenameField!==void 0&&t.typenameField!==r)throw new Error(`Duplicate typename field: ${r}`);t.typenameField=r,t.typenameValue=i,n+=ie(r)^ie(i);break;case"object":if(i instanceof Lt){n^=ie(r)^ie(Array.from(i));break}if(i instanceof Set){n^=ie(r)^ie(i);break}n+=ie(r)^i.shapeKey,i.mask&(w.ENTITY|w.HAS_SUB_ENTITY)&&(t.mask|=w.HAS_SUB_ENTITY,t.subEntityPaths===void 0?t.subEntityPaths=r:gf(t.subEntityPaths)?t.subEntityPaths.push(r):t.subEntityPaths=[t.subEntityPaths,r]);break}return t.shapeKey=n>>>0,e}s(Tc,"reifyObjectShape");function _f(t,e){let n=t.mask,r=Object.create(null),i,o=ie([n,t.values]);for(let a of e){let c=a.mask;if(n|=c,o+=a.shapeKey,c&w.UNION){let d=a;if(d.typenameField!==void 0){if(i!==void 0&&i!==d.typenameField)throw new Error(`Union typename field conflict: Cannot merge unions with different typename fields ('${i}' vs '${d.typenameField}')`);i=d.typenameField}let f=d.shape;if(f!==void 0)for(let m of[...Object.keys(f),Tt,wt]){let p=f[m];if(r[m]!==void 0&&r[m]!==p)throw new Error(`Union merge conflict: Duplicate typename value '${String(m)}' found when merging nested unions (${String(r[m])} vs ${String(p)})`);r[m]=p}}else if(c&w.ARRAY){if(r[Tt]!==void 0)throw new Error("Array shape already defined");r[Tt]=a.shape}else if(c&w.RECORD){if(r[wt]!==void 0)throw new Error("Record shape already defined");r[wt]=a.shape}else{let d=a.typenameField,f=a.typenameValue;if(f===void 0)throw new Error("Object definitions must have a typename to be in a union with other objects, records, or arrays");if(i!==void 0&&d!==i)throw new Error("Object definitions must have the same typename field to be in the same union");i=d,r[f]=a}}return t.typenameField=i,t.shapeKey=o>>>0,t.mask=n,r}s(_f,"reifyUnionShape");function Pf(t){return t}s(Pf,"defineTypename");function xf(t){return new Set([t])}s(xf,"defineConst");var Oc=s((...t)=>new Set(t),"defineEnum");Oc.caseInsensitive=(...t)=>new Lt(t);var io=16,Of=0,Nc=[],Ic=new Map,Cc=new Map;function Nf(t){let e=Ic.get(t);if(e===void 0)throw new Error(`Format ${t} not registered`);return e}s(Nf,"defineFormatted");function wc(t){let e=t>>io;return Nc[e]}s(wc,"getFormat");function Ec(t){let e=t>>io;return Cc.get(e)}s(Ec,"getFormatName");function Dc(t,e,n,r){let i=Of++;Nc[i]=n,Cc.set(i,t);let o=i<<io,a=e===w.STRING?w.HAS_STRING_FORMAT:w.HAS_NUMBER_FORMAT,c=o|e|a;Ic.set(t,c)}s(Dc,"registerFormat");Dc("date",w.STRING,t=>{let e=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!e)throw new Error(`Invalid date string: ${t}. Expected YYYY-MM-DD format.`);let[,n,r,i]=e,o=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(i,10)));if(isNaN(o.getTime()))throw new Error(`Invalid date string: ${t}`);return o});Dc("date-time",w.STRING,t=>{let e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date-time string: ${t}`);return e});function Mr(t,e,n){let r=new be(5,w.ENTITY|w.OBJECT,t);return e&&(r._methodsFactory=e),n&&(r._entityConfig=n),r}s(Mr,"entity");var T={format:Nf,typename:Pf,const:xf,enum:Oc,id:w.ID|w.STRING|w.NUMBER,string:w.STRING,number:w.NUMBER,boolean:w.BOOLEAN,null:w.NULL,undefined:w.UNDEFINED,array:bf,object:wf,record:vf,union:Fr,nullish:Ef,optional:Sf,nullable:Af,result:Tf};function Pn(t){if(t instanceof Lt)return Array.from(t).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(t instanceof Set)return Array.from(t).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(typeof t=="string")return`"${t}"`;if(typeof t=="boolean")return String(t);if(typeof t=="number"){if((t&(w.HAS_STRING_FORMAT|w.HAS_NUMBER_FORMAT))!==0){let i=Ec(t);if(i)return`"${i}"`}let r=[];return t&w.UNDEFINED&&r.push("undefined"),t&w.NULL&&r.push("null"),t&w.NUMBER&&r.push("number"),t&w.STRING&&r.push("string"),t&w.BOOLEAN&&r.push("boolean"),t&w.OBJECT&&r.push("object"),t&w.ARRAY&&r.push("array"),r.length===0?"unknown":r.length===1?r[0]:r.join(" | ")}let e=t.mask;if(e&w.UNION){let n=t,r=[];if(n.values!==void 0&&n.values.size>0)for(let o of n.values){let a=typeof o=="string"?`"${o}"`:String(o);r.push(a)}if(n.shape!==void 0){n.shape[Tt]!==void 0&&r.push(`Array<${Pn(n.shape[Tt])}>`),n.shape[wt]!==void 0&&r.push(`Record<string, ${Pn(n.shape[wt])}>`);for(let[o,a]of Object.entries(n.shape))o!==Tt&&o!==wt&&r.push(o)}if(e=n.mask,(e&(w.HAS_STRING_FORMAT|w.HAS_NUMBER_FORMAT))!==0){let o=Ec(e);o&&r.push(`"${o}"`)}return e&w.UNDEFINED&&r.push("undefined"),e&w.NULL&&r.push("null"),e&w.NUMBER&&r.push("number"),e&w.STRING&&r.push("string"),e&w.BOOLEAN&&r.push("boolean"),r.length===0?"union":r.join(" | ")}if(e&w.ENTITY)return`Entity<${t.typenameValue}>`;if(e&w.ARRAY){let n=t.shape;return`Array<${Pn(n)}>`}if(e&w.RECORD){let n=t.shape;return`Record<string, ${Pn(n)}>`}if(e&w.OBJECT){let n=t.typenameValue;return n?`Object<${n}>`:"object"}return"unknown"}s(Pn,"typeToString");function An(t,e,n){return new TypeError(`Validation error at ${t}: expected ${Pn(e)}, got ${typeof n=="object"?n===null?"null":Array.isArray(n)?"array":"object":typeof n}`)}s(An,"typeError");var If=Array.isArray;function Dr(t){if(t===null)return w.NULL;switch(typeof t){case"number":return w.NUMBER;case"string":return w.STRING;case"boolean":return w.BOOLEAN;case"undefined":return w.UNDEFINED;case"object":return If(t)?w.ARRAY:w.OBJECT;default:throw new Error(`Invalid type: ${typeof t}`)}}s(Dr,"typeMaskOf");var Xt=s(()=>{},"noopWarn"),oo=Object.entries,Sc=Array.isArray,xn=new WeakMap,Wi=class{static{s(this,"Entity")}};function Cf(t,e,n,r,i=Xt){if(t===w.ARRAY){let o=n.shape[Tt];return o===void 0||typeof o=="number"?e:kc(e,o,r,i)}else{let o=n.typenameField,a=o?e[o]:void 0;if(a===void 0||typeof a!="string"){let d=n.shape[wt];if(d===void 0||typeof d=="number")throw new Error(`Typename field '${o}' is required for union discrimination but was not found in the data`);return Rc(e,d,r,i)}let c=n.shape[a];if(c===void 0||typeof c=="number")throw new Error(`Unknown typename '${a}' in union`);return Fc(e,c,r,i)}}s(Cf,"parseUnionValue");function kc(t,e,n,r=Xt){let i=[];for(let o=0;o<t.length;o++)try{i.push(Et(t[o],e,`${n}[${o}]`,!1,r))}catch(a){r("Failed to parse array item, filtering out",{index:o,value:t[o],error:a instanceof Error?a.message:String(a)})}return i}s(kc,"parseArrayValue");function Rc(t,e,n,r=Xt){for(let[i,o]of oo(t))t[i]=Et(o,e,`${n}["${i}"]`,!1,r);return t}s(Rc,"parseRecordValue");function Fc(t,e,n,r=Xt){if(xn.has(t))return t;let i=e.shape;for(let[o,a]of oo(i))t[o]=Et(t[o],a,`${n}.${o}`,!1,r);return t}s(Fc,"parseObjectValue");function Et(t,e,n,r=!1,i=Xt){if(e instanceof Lt){let o=e.get(t);if(o===void 0)throw An(n,e,t);return o}if(e instanceof Set){if(!e.has(t))throw An(n,e,t);return t}switch(typeof e){case"string":if(t==null)return e;if(t!==e)throw An(n,e,t);return t;case"number":{let o=Dr(t);if(!(e&o)){if(!r&&e&w.UNDEFINED){i("Invalid value for optional type, defaulting to undefined",{value:t,path:n});return}throw An(n,e,t)}if(e&(w.HAS_STRING_FORMAT|w.HAS_NUMBER_FORMAT))try{return wc(e)(t)}catch(a){if(!r&&e&w.UNDEFINED){i("Invalid formatted value for optional type, defaulting to undefined",{value:t,path:n,error:a instanceof Error?a.message:String(a)});return}throw a}return t}default:{let o=Dr(t),a=e.mask;if(a&w.PARSE_RESULT)try{return{success:!0,value:Et(t,e.shape,n,!0,i)}}catch(c){return{success:!1,error:c instanceof Error?c:new Error(String(c))}}if(!(a&o)&&!e.values?.has(t)){if(!r&&a&w.UNDEFINED){i("Invalid value for optional type, defaulting to undefined",{value:t,path:n});return}throw An(n,a,t)}if(o<w.OBJECT){if(a&(w.HAS_STRING_FORMAT|w.HAS_NUMBER_FORMAT))try{return wc(a)(t)}catch(c){if(!r&&a&w.UNDEFINED){i("Invalid formatted value for optional type, defaulting to undefined",{value:t,path:n,error:c instanceof Error?c.message:String(c)});return}throw c}return t}return a&w.UNION?Cf(o,t,e,n,i):o===w.ARRAY?kc(t,e.shape,n,i):a&w.RECORD?Rc(t,e.shape,n,i):Fc(t,e,n,i)}}}s(Et,"parseValue");function Cr(t,e){for(let[n,r]of oo(e)){let i=t[n];typeof r=="object"&&r!==null&&!Sc(r)&&!xn.has(r)&&typeof i=="object"&&i!==null&&!Sc(i)&&!xn.has(i)?Cr(i,r):t[n]=r}return t}s(Cr,"mergeValues");var Df=Symbol.for("nodejs.util.inspect.custom");function kf(t,e,n,r,i,o=Xt,a){let c=n.shape,d=n.methods,f=new Map,m=s(()=>({__entityRef:t}),"toJSON"),p,h={getPrototypeOf(){return Wi.prototype},get(b,v){if(v==="toJSON")return m;let{data:E,cache:A,notifier:V}=e;if(r?.value,V.consume(),A.has(v))return A.get(v);if(d&&typeof v=="string"&&v in d){let H=f.get(v);return H||(H=xs(p,d[v].bind(p)),f.set(v,H)),H}let G=E[v],Z=c[v];if(!Object.hasOwnProperty.call(c,v))return G;let j=Et(G,Z,`[[${a}]].${v}`,!1,o);return A.set(v,j),j},has(b,v){return d&&typeof v=="string"&&v in d?!0:v in c},ownKeys(b){let v=Object.keys(c),E=n.typenameField;if(E&&!v.includes(E)&&v.push(E),d)for(let A of Object.keys(d))v.includes(A)||v.push(A);return v},getOwnPropertyDescriptor(b,v){let E=n.typenameField;if(v in c||v===E)return{enumerable:!0,configurable:!0};if(d&&typeof v=="string"&&v in d)return{enumerable:!1,configurable:!0}}};return p=new Proxy({[Df]:()=>Object.keys(c).reduce((b,v)=>(b[v]=p[v],b),{})},h),xn.set(p,t),Ps(p,i),p}s(kf,"createEntityProxy");function Ge(t){return xn.get(t)}s(Ge,"getProxyId");function Yi(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(n=>Yi(n));if(t instanceof Date)return new Date(t.getTime());let e={};for(let n of Object.keys(t))e[n]=Yi(t[n]);return e}s(Yi,"deepClone");var Xi=class{static{s(this,"EntityStore")}map=new Map;queryClient;pendingOptimisticUpdates=new Map;constructor(e){this.queryClient=e}hasEntity(e){return this.map.has(e)}getEntity(e){return this.map.get(e)}getNestedEntityRefIds(e,n){let r=this.getEntity(e);if(r===void 0)throw new Error(`Entity ${e} not found when getting nested entity ref ids`);if(n.add(e),r.notifier.consume(),r.entityRefs!==void 0)for(let i of r.entityRefs)this.getNestedEntityRefIds(i,n);return n}hydratePreloadedEntity(e,n){let r=this.getEntity(e);if(r===void 0)throw new Error(`Entity ${e} not found`);return r.proxy=this.createEntityProxy(r,n),r}setPreloadedEntity(e,n){let r={key:e,data:n,notifier:rr(),cache:new Map,id:void 0,proxy:void 0,entityRefs:void 0};return this.map.set(e,r),r}setEntity(e,n,r,i){let o=this.map.get(e);return o===void 0?(o=this.setPreloadedEntity(e,n),o.proxy=this.createEntityProxy(o,r)):(o.data=Cr(o.data,n),o.notifier.notify(),o.cache.clear()),o.entityRefs=i,o}registerOptimisticUpdate(e,n){if(this.pendingOptimisticUpdates.has(e))throw new Error(`Cannot apply optimistic update: entity ${e} already has a pending optimistic update from another mutation.`);let r=this.map.get(e);if(!r){this.pendingOptimisticUpdates.set(e,{snapshot:{}});return}let i=Yi(r.data);this.pendingOptimisticUpdates.set(e,{snapshot:i}),r.data=Cr(r.data,n),r.cache.clear(),queueMicrotask(()=>{r.notifier.notify()})}revertOptimisticUpdate(e){let n=this.pendingOptimisticUpdates.get(e);if(!n)return;let r=this.map.get(e);r&&Object.keys(n.snapshot).length>0&&(r.data=n.snapshot,r.cache.clear(),queueMicrotask(()=>{r.notifier.notify()})),this.pendingOptimisticUpdates.delete(e)}clearOptimisticUpdates(e){this.pendingOptimisticUpdates.delete(e)}createEntityProxy(e,n){let r=n.idField;if(r===void 0)throw new Error(`Entity id field is required ${n.typenameValue}`);let i=e.data[r];if(typeof i!="string"&&typeof i!="number")throw console.log(e.data),new Error(`Entity id must be string or number: ${n.typenameValue}`);e.id=i;let o,a=n._entityConfig;a?.stream&&(o=_i(d=>{let f=this.queryClient.getContext(),m=s(h=>{let b=e.data,v=Cr(b,h);e.data=v,e.notifier.notify(),e.cache.clear()},"onUpdate"),p=a.stream.subscribe(f,i,m);return d.value=e.proxy,p}));let c=this.queryClient.getContext().log?.warn;return kf(e.key,e,n,o,this.queryClient,c)}},kr=class{static{s(this,"NetworkManager")}onlineSignal;manualOverride=void 0;eventListenersAttached=!1;constructor(e){let n=e??this.detectOnlineStatus();this.onlineSignal=mn(n),this.canAttachListeners()&&this.attachEventListeners()}get isOnline(){return this.manualOverride!==void 0?this.manualOverride:this.onlineSignal.value}setNetworkStatus(e){this.manualOverride=e,this.onlineSignal.value=e}clearManualOverride(){this.manualOverride=void 0,this.onlineSignal.value=this.detectOnlineStatus()}getOnlineSignal(){return this.onlineSignal}detectOnlineStatus(){return typeof navigator<"u"&&"onLine"in navigator?navigator.onLine:!0}canAttachListeners(){return typeof self<"u"&&typeof self.addEventListener=="function"}attachEventListeners(){if(this.eventListenersAttached)return;let e=s(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!0)},"handleOnline"),n=s(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!1)},"handleOffline");self.addEventListener("online",e),self.addEventListener("offline",n),this.eventListenersAttached=!0}},Ac=class t{static{s(this,"NoOpNetworkManager")}static onlineSignal=mn(!0);get isOnline(){return!0}setNetworkStatus(e){}clearManualOverride(){}getOnlineSignal(){return t.onlineSignal}destroy(){}},Rf=new kr,ev=Si(Rf),Mc=Object.entries;function Ff(t,e,n,r,i){if(t===w.ARRAY){let o=n.shape[Tt];return o===void 0||typeof o=="number"?e:Uc(e,{mask:w.ARRAY,shape:o,values:void 0},r,i)}else{let o=n.typenameField,a=o?e[o]:void 0;if(a===void 0||typeof a!="string"){let d=n.shape[wt];if(d===void 0||typeof d=="number")throw new Error(`Typename field '${o}' is required for union discrimination but was not found in the data`);return Bc(e,d,r,i)}let c=n.shape[a];if(c===void 0||typeof c=="number")throw new Error(`Unknown typename '${a}' in union`);return Rr(e,c,r,i)}}s(Ff,"parseUnionEntities");function Uc(t,e,n,r){let i=[];for(let o=0;o<t.length;o++)try{i.push(ft(t[o],e,n,r))}catch(a){n.getContext().log?.warn?.("Failed to parse array item, filtering out",{index:o,value:t[o],error:a instanceof Error?a.message:String(a)})}return i}s(Uc,"parseArrayEntities");function Bc(t,e,n,r){if(typeof e=="number")return t;for(let[i,o]of Mc(t))t[i]=ft(o,e,n,r);return t}s(Bc,"parseRecordEntities");function Rr(t,e,n,r){let i=t.__entityRef;if(typeof i=="number")return n.hydrateEntity(i,e).proxy;let{mask:o}=e,a=o&w.ENTITY?new Set:r,c=e.shape,d=e.subEntityPaths;if(d!==void 0)if(typeof d=="string"){let m=c[d];t[d]=ft(t[d],m,n,a)}else for(let m of d){let p=c[m];t[m]=ft(t[m],p,n,a)}if(o&w.ENTITY){let m=e,p=m.typenameValue,h=t[m.idField];if(h===void 0)throw new Error(`Entity id is required: ${p}`);let b=`${p}:${h}`,v=ie(b);return r!==void 0&&r.add(v),n.saveEntity(v,t,m,a).proxy}let f=n.getContext().log?.warn;for(let[m,p]of Mc(c))d!==void 0&&(typeof d=="string"?m===d:d.includes(m))||(t[m]=Et(t[m],p,`${e.typenameValue??"object"}.${m}`,!1,f));return t}s(Rr,"parseObjectEntities");function ft(t,e,n,r){let i=Dr(t),o=e.mask;if(o&w.PARSE_RESULT)try{return{success:!0,value:ft(t,e.shape,n,r)}}catch(a){return{success:!1,error:a instanceof Error?a:new Error(String(a))}}return i<w.OBJECT||!(o&i)?t:o&w.UNION?Ff(i,t,e,n,r):i===w.ARRAY?Uc(t,e.shape,n,r):o&w.RECORD?Bc(t,e.shape,n,r):Rr(t,e,n,r)}s(ft,"parseEntities");var Ji=class{static{s(this,"QueryResultExtra")}_streamOrphansNotifier=void 0;_streamOrphans=void 0;_optimisticInsertsNotifier=void 0;_optimisticInserts=void 0;onChanged;constructor(e){this.onChanged=e}get streamOrphansNotifier(){return this._streamOrphansNotifier??(this._streamOrphansNotifier=rr())}get optimisticInsertsNotifier(){return this._optimisticInsertsNotifier??(this._optimisticInsertsNotifier=rr())}get streamOrphans(){return this._streamOrphans??(this._streamOrphans=new Set)}get optimisticInserts(){return this._optimisticInserts??(this._optimisticInserts=new Set)}getExtra(){return this.streamOrphansNotifier.consume(),this.optimisticInsertsNotifier.consume(),{streamOrphans:this.streamOrphans,optimisticInserts:this.optimisticInserts}}addStreamOrphan(e){let n=this.streamOrphans,r=n.size;if(n.add(e),n.size!==r){this.streamOrphansNotifier.notify();let i=Ge(e);return i!==void 0&&this.removeOptimisticInsertById(i),this.onChanged(),!0}return!1}addOptimisticInsert(e){let n=this.optimisticInserts,r=n.size;return n.add(e),n.size!==r?(this.optimisticInsertsNotifier.notify(),this.onChanged(),!0):!1}removeOptimisticInsert(e){let n=Ge(e);return n===void 0?!1:this.removeOptimisticInsertById(n)}removeOptimisticInsertById(e){let n=this._optimisticInserts;if(n===void 0||n.size===0)return!1;for(let r of n)if(Ge(r)===e)return n.delete(r),this.optimisticInsertsNotifier.notify(),this.onChanged(),!0;return!1}hasOrphanWithId(e){let n=this._streamOrphans;if(n===void 0)return!1;for(let r of n)if(Ge(r)===e)return!0;return!1}reconcile(e){let n=this._streamOrphans;if(n!==void 0&&n.size>0){let i=!1;for(let o of n){let a=Ge(o);a!==void 0&&e.has(a)&&(n.delete(o),i=!0)}i&&this.streamOrphansNotifier.notify()}let r=this._optimisticInserts;if(r!==void 0&&r.size>0){let i=!1;for(let o of r){let a=Ge(o);a!==void 0&&(e.has(a)||n!==void 0&&n.has(o))&&(r.delete(o),i=!0)}i&&this.optimisticInsertsNotifier.notify()}}clear(){let e=!1;this._streamOrphans!==void 0&&this._streamOrphans.size>0&&(this._streamOrphans=void 0,this.streamOrphansNotifier.notify(),e=!0),this._optimisticInserts!==void 0&&this._optimisticInserts.size>0&&(this._optimisticInserts=void 0,this.optimisticInsertsNotifier.notify(),e=!0),e&&this.onChanged()}loadFromCache(e,n,r,i){if(e.streamOrphanRefs&&e.streamOrphanRefs.length>0&&r){let o=this.streamOrphans;for(let a of e.streamOrphanRefs){let c=n.hydrateEntity(a,r);o.add(c.proxy)}}if(e.optimisticInsertRefs&&e.optimisticInsertRefs.length>0&&i){let o=this.optimisticInserts;for(let a of e.optimisticInsertRefs){let c=n.hydrateEntity(a,i);o.add(c.proxy)}}}getForPersistence(){let e=this._streamOrphans,n=this._optimisticInserts;if((e===void 0||e.size===0)&&(n===void 0||n.size===0))return;let r={};if(e!==void 0&&e.size>0){r.streamOrphanRefs=[];for(let i of e){let o=Ge(i);o!==void 0&&r.streamOrphanRefs.push(o)}}if(n!==void 0&&n.size>0){r.optimisticInsertRefs=[];for(let i of n){let o=Ge(i);o!==void 0&&r.optimisticInsertRefs.push(o)}}return r}get hasData(){return this._streamOrphans!==void 0&&this._streamOrphans.size>0||this._optimisticInserts!==void 0&&this._optimisticInserts.size>0}},Zi=class{static{s(this,"QueryResultImpl")}def;queryKey;storageKey=-1;queryClient;initialized=!1;isRefetchingSignal=mn(!1);isFetchingMoreSignal=mn(!1);updatedAt=void 0;params=void 0;refIds=void 0;allNestedRefIdsSignal=void 0;refetchPromise=void 0;fetchMorePromise=void 0;unsubscribe=void 0;relay;_relayState=void 0;wasPaused=!1;currentParams=void 0;debounceTimer=void 0;get relayState(){let e=this._relayState;if(!e)throw new Error("Relay state not initialized");return e}_extra=void 0;get extraData(){return this._extra??(this._extra=new Ji(()=>this.persistExtraData()))}_nextPageParams=void 0;get nextPageParams(){if(this.def.type!==se.InfiniteQuery)return null;let e=this._nextPageParams,n=this.relayState.value;if(e===void 0&&n!==void 0){if(!Array.isArray(n))throw new Error("Query result is not an array, this is a bug");let i=this.def.pagination?.getNextPageParams?.(n[n.length-1]);if(i===void 0)e=null;else{let o=!1,a={...this.currentParams};for(let[c,d]of Object.entries(i))d!=null&&(a[c]=d,o=!0);this._nextPageParams=e=o?a:null}}return e??null}constructor(e,n,r,i){_s(this),this.def=e,this.queryClient=n,this.queryKey=r,this.params=i,this.relay=_i(o=>{this._relayState=o,this.currentParams=Pc(this.params),this.storageKey=ro(this.def,this.currentParams),this.queryClient.activateQuery(this);let a=this.isPaused;this.wasPaused=a,this.initialized?a||((this.def.type===se.Stream||this.def.stream)&&this.setupSubscription(),this.def.type!==se.Stream&&this.isStale&&this.refetch()):this.initialize();let c=s(()=>{clearTimeout(this.debounceTimer),this.debounceTimer=void 0,this.unsubscribe?.(),this.unsubscribe=void 0,this.def.type!==se.Stream&&this.def.cache?.refetchInterval&&this.queryClient.refetchManager.removeQuery(this),this.queryClient.memoryEvictionManager.scheduleEviction(this.queryKey)},"deactivate");return{update:s(()=>{let{wasPaused:d,isPaused:f}=this;if(this.wasPaused=f,f){c();return}let m=Pc(this.params),p=ro(this.def,m),h=p!==this.storageKey;h&&(this.params=m,this.storageKey=p),d?(this.queryClient.activateQuery(this),this.def.type!==se.Stream?(this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&o.setPromise(this.runQuery(this.currentParams,!0)):this.setupSubscription()):h&&(this.def.type!==se.Stream?this.debouncedRefetch():this.setupSubscription())},"update"),deactivate:c}})}get value(){return this.relay.value}get error(){return this.relay.error}get isPending(){return this.relay.isPending}get isRejected(){return this.relay.isRejected}get isResolved(){return this.relay.isResolved}get isSettled(){return this.relay.isSettled}get isReady(){return this.relay.isReady}get _version(){return this.relay._version}get _signal(){return this.relay._signal}get _flags(){return this.relay._flags}then(e,n){return this.relay.then(e,n)}catch(e){return this.relay.catch(e)}finally(e){return this.relay.finally(e)}get[Symbol.toStringTag](){return"QueryResult"}getAllEntityRefs(){let e=this.allNestedRefIdsSignal;if(!e){let n=this.queryClient;this.allNestedRefIdsSignal=e=Is(()=>{this.relay.value;let r=new Set;if(this.refIds!==void 0)for(let i of this.refIds)n.getNestedEntityRefIds(i,r);return this.extraData.reconcile(r),r})}return e.value}async initialize(){let e=this.relayState;this.initialized=!0;let n;try{if(n=await this.queryClient.loadCachedQuery(this.def,this.storageKey),n!==void 0){if(this.updatedAt=n.updatedAt,this.refIds=n.refIds,n.extra){let i=this.def;this.extraData.loadFromCache(n.extra,this.queryClient,i.stream?.shape,i.optimisticInserts?.shape)}let r=this.def.shape;r instanceof be?this.def.type===se.InfiniteQuery&&Array.isArray(n.value)?e.value=n.value.map(i=>ft(i,r,this.queryClient,new Set)):e.value=ft(n.value,r,this.queryClient,new Set):e.value=Et(n.value,r,this.def.id)}}catch(r){this.queryClient.deleteCachedQuery(this.storageKey),this.queryClient.getContext().log?.warn?.("Failed to initialize query, the query cache may be corrupted or invalid",r)}if(!this.isPaused)try{(this.def.type===se.Stream||this.def.stream)&&this.setupSubscription(),this.def.type!==se.Stream&&(n!==void 0?this.isStale&&(this.def.debounce!==void 0&&this.def.debounce>0?this.debouncedRefetch():this.refetch()):e.setPromise(this.runQuery(this.currentParams,!0)))}catch(r){e.setError(r)}}setupSubscription(){this.unsubscribe?.();let e,n;if(this.def.type===se.Stream)n=this.def.shape,e=this.def.subscribeFn;else{let i=this.def.stream;if(!i)return;n=i.shape,e=i.subscribeFn}let r=this.currentParams;this.unsubscribe=e(this.queryClient.getContext(),r,i=>{let o=Rr(i,n,this.queryClient);if(this.def.type===se.Stream)this.relayState.value=o,this.updatedAt=Date.now(),this.queryClient.saveQueryData(this.def,this.storageKey,o,this.updatedAt);else{let a=this.getAllEntityRefs(),c=Ge(o);c!==void 0&&!a.has(c)&&this.extraData.addStreamOrphan(o)}})}async runQuery(e,n=!1){if(this.isPaused)throw new Error("Query is paused due to network status");let{retries:r,retryDelay:i}=this.getRetryConfig(),o;for(let a=0;a<=r;a++)try{let d=await this.def.fetchFn(this.queryClient.getContext(),e),f,m=this.def.type===se.InfiniteQuery;m&&!n&&this.refIds!==void 0?f=this.refIds:f=this.refIds=new Set;let p=this.def.shape,h=p instanceof be?ft(d,p,this.queryClient,f):Et(d,p,this.def.id),b;if(m){let E=this.relayState.value;b=n||E===void 0?[h]:[...E,h]}else b=h;let v;return n?v=this.updatedAt=Date.now():v=this.updatedAt??=Date.now(),this._nextPageParams=void 0,this.queryClient.saveQueryData(this.def,this.storageKey,b,v,f,this.getExtraForPersistence()),this.updatedAt=Date.now(),b}catch(c){if(o=c,a>=r)throw c;let d=i(a);if(await new Promise(f=>setTimeout(f,d)),this.isPaused)throw new Error("Query is paused due to network status")}throw o}debouncedRefetch(){let e=this.def.debounce;if(e===void 0){this.refetch();return}clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=void 0,this.refetch()},e)}refetch=s(()=>{if(this.def.type===se.Stream)throw new Error("Cannot refetch a stream query");if(this.fetchMorePromise)throw new Error("Query is fetching more, cannot refetch");if(this.refetchPromise)return this.refetchPromise;clearTimeout(this.debounceTimer),this.debounceTimer=void 0,this._nextPageParams=void 0,this.isRefetchingSignal.value=!0,this._version.update(n=>n+1);let e=this.runQuery(this.currentParams,!0).then(n=>(this.relayState.value=n,this._extra!==void 0&&this._extra.clear(),n)).catch(n=>(this.relayState.setError(n),Promise.reject(n))).finally(()=>{this._version.update(n=>n+1),this.isRefetchingSignal.value=!1,this.refetchPromise=void 0});return this.refetchPromise=e,e},"refetch");fetchNextPage=s(()=>{if(this.def.type===se.Stream)throw new Error("Cannot fetch next page on a stream query");if(this.refetchPromise)return Promise.reject(new Error("Query is refetching, cannot fetch next page"));if(this.fetchMorePromise)return this.fetchMorePromise;let e=this.nextPageParams;if(!e)return Promise.reject(new Error("No next page params"));this.isFetchingMoreSignal.value=!0,this._version.update(r=>r+1);let n=this.runQuery(e,!1).then(r=>(this.relayState.value=r,r)).catch(r=>(this.relayState.setError(r),Promise.reject(r))).finally(()=>{this._version.update(r=>r+1),this.isFetchingMoreSignal.value=!1,this.fetchMorePromise=void 0});return this.fetchMorePromise=n,n},"fetchNextPage");get isRefetching(){return this.isRefetchingSignal.value}get isFetchingMore(){return this.isFetchingMoreSignal.value}get isFetching(){return this.relay.isPending||this.isRefetching||this.isFetchingMore}get hasNextPage(){return this.nextPageParams!==null}get extra(){return this.getAllEntityRefs(),this.extraData.getExtra()}persistExtraData(){if(this.updatedAt===void 0)return;let e=this._extra?.getForPersistence();this.queryClient.saveQueryData(this.def,this.storageKey,this.relayState.value,this.updatedAt,this.refIds,e)}getExtraForPersistence(){return this._extra?.getForPersistence()}addOptimisticInsert(e){let r=this.def.optimisticInserts;if(r===void 0)throw new Error("Query does not have optimisticInserts configured. Add optimisticInserts: { type: YourEntity } to the query definition.");let i=Ge(e),o=e;if(i===void 0&&(o=Rr(e,r.shape,this.queryClient),i=Ge(o),i===void 0))throw new Error("Optimistic insert must be or produce an entity proxy");this.getAllEntityRefs().has(i)||this.extraData.hasOrphanWithId(i)||this.extraData.addOptimisticInsert(o)}removeOptimisticInsert(e){this.extraData.removeOptimisticInsert(e)}get isStale(){if(this.def.type===se.Stream)return!1;if(this.updatedAt===void 0)return!0;let e=this.def.cache?.staleTime??0;return Date.now()-this.updatedAt>=e}get isPaused(){if(this.def.type===se.Stream)return!1;let e=this.def.cache?.networkMode??_n.Online,r=this.queryClient.networkManager.getOnlineSignal().value;switch(e){case _n.Always:return!1;case _n.Online:return!r;case _n.OfflineFirst:return!r&&this.updatedAt===void 0;default:return!1}}getRetryConfig(){if(this.def.type===se.Stream)return{retries:0,retryDelay:s(()=>0,"retryDelay")};let e=this.def.cache?.retry,n=this.queryClient.isServer,r,i;return e===!1?r=0:e===void 0?r=n?0:3:typeof e=="number"?r=e:r=e.retries,typeof e=="object"&&e.retryDelay?i=e.retryDelay:i=s(o=>1e3*Math.pow(2,o),"retryDelay"),{retries:r,retryDelay:i}}},eo=class{static{s(this,"MutationResultImpl")}def;queryClient;_task;_pendingOptimisticKeys=new Set;constructor(e,n){this.def=e,this.queryClient=n,this._task=this.createTask()}createTask(){return Os(async e=>{try{let n=await this.executeWithRetry(e),r=this.parseAndUpdateEntities(n);return this.clearOptimisticUpdates(),r}catch(n){throw this.revertOptimisticUpdates(),n}})}get value(){return this._task.value}get error(){return this._task.error}get isPending(){return this._task.isPending}get isRejected(){return this._task.isRejected}get isResolved(){return this._task.isResolved}get isSettled(){return this._task.isSettled}get isReady(){return this._task.isReady}then(e,n){return this._task.then(e,n)}catch(e){return this._task.catch(e)}finally(e){return this._task.finally(e)}get[Symbol.toStringTag](){return"MutationResult"}run=s(e=>(this.def.optimisticUpdates&&this.applyOptimisticUpdates(e),this._task.run(e),this),"run");reset=s(()=>{this.revertOptimisticUpdates(),this._task=this.createTask()},"reset");applyOptimisticUpdates(e){this._pendingOptimisticKeys.clear();let n=this.def.requestShape;n instanceof be&&this.findAndUpdateEntities(e,n)}findAndUpdateEntities(e,n){let r=Dr(e),i=n.mask;if(!(r<w.OBJECT||!(i&r))){if(i&w.UNION){let o=n;if(r===w.ARRAY){let a=o.shape["[]"];a&&typeof a!="number"&&this.findAndUpdateEntitiesInArray(e,a)}else{let a=o.typenameField,c=a?e[a]:void 0;if(c&&typeof c=="string"){let d=o.shape[c];d&&typeof d!="number"&&this.findAndUpdateEntitiesInObject(e,d)}}return}if(r===w.ARRAY){let o=n.shape;o&&typeof o!="number"&&this.findAndUpdateEntitiesInArray(e,o);return}if(i&w.RECORD){let o=n.shape;if(o&&typeof o!="number")for(let a of Object.values(e))this.findAndUpdateEntities(a,o);return}this.findAndUpdateEntitiesInObject(e,n)}}findAndUpdateEntitiesInArray(e,n){for(let r of e)this.findAndUpdateEntities(r,n)}findAndUpdateEntitiesInObject(e,n){let{mask:r}=n;if(r&w.ENTITY){let a=n,c=a.idField,d=e[c];if(d!==void 0){let f=a.typenameValue,m=ie(`${f}:${d}`);this.queryClient.registerOptimisticUpdate(m,e),this._pendingOptimisticKeys.add(m)}}let i=n.shape,o=n.subEntityPaths;if(o!==void 0)if(typeof o=="string"){let a=i[o];a&&typeof a!="number"&&this.findAndUpdateEntities(e[o],a)}else for(let a of o){let c=i[a];c&&typeof c!="number"&&this.findAndUpdateEntities(e[a],c)}}revertOptimisticUpdates(){for(let e of this._pendingOptimisticKeys)this.queryClient.revertOptimisticUpdate(e);this._pendingOptimisticKeys.clear()}clearOptimisticUpdates(){for(let e of this._pendingOptimisticKeys)this.queryClient.clearOptimisticUpdates(e);this._pendingOptimisticKeys.clear()}parseAndUpdateEntities(e){let n=this.def.responseShape;if(!(n instanceof be))return e;let r=new Set;return ft(e,n,this.queryClient,r)}async executeWithRetry(e){let{retries:n,retryDelay:r}=this.getRetryConfig(),i;for(let o=0;o<=n;o++)try{return await this.def.mutateFn(this.queryClient.getContext(),e)}catch(a){if(i=a,o>=n)throw a;let c=r(o);await new Promise(d=>setTimeout(d,c))}throw i}getRetryConfig(){let e=this.def.cache?.retry,n,r;return e===!1||e===void 0?n=0:typeof e=="number"?n=e:n=e.retries,typeof e=="object"&&e.retryDelay?r=e.retryDelay:r=s(i=>1e3*Math.pow(2,i),"retryDelay"),{retries:n,retryDelay:r}}},zi=1e3,to=class{static{s(this,"RefetchManager")}constructor(e=1){this.multiplier=e;let n=zi*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),n)}intervalId;clock=0;buckets=new Map;addQuery(e){if(e.def.type===se.Stream)return;let n=e.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,i=this.buckets.get(r);i||(i=new Set,this.buckets.set(r,i)),i.add(e)}removeQuery(e){if(e.def.type===se.Stream)return;let n=e.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,i=this.buckets.get(r);i&&(i.delete(e),i.size===0&&this.buckets.delete(r))}tick(){this.clock+=zi*this.multiplier;for(let[n,r]of this.buckets.entries())if(this.clock%n===0)for(let i of r)i&&!i.isFetching&&i.refetch();let e=zi*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),e)}destroy(){clearTimeout(this.intervalId)}};var Mf=60*1e3,no=class{static{s(this,"MemoryEvictionManager")}constructor(e,n=1){this.queryClient=e,this.multiplier=n,this.intervalId=setInterval(this.tick,Mf*this.multiplier)}intervalId;currentFlush=new Set;nextFlush=new Set;scheduleEviction(e){this.nextFlush.add(e)}cancelEviction(e){this.currentFlush.delete(e),this.nextFlush.delete(e)}tick=s(()=>{if(this.queryClient){for(let e of this.currentFlush)this.queryClient.queryInstances.delete(e);this.currentFlush=this.nextFlush,this.nextFlush=new Set}},"tick");destroy(){clearInterval(this.intervalId)}};function _c(t){if(t!==void 0)return typeof t=="string"?t:typeof t=="function"?t():t.value}s(_c,"resolveBaseUrl");var se=(t=>(t.Query="query",t.InfiniteQuery="infiniteQuery",t.Stream="stream",t))(se||{});function Uf(t){return typeof t=="object"&&t!==null}s(Uf,"isSignal");function Pc(t){if(t===void 0)return;let e={};for(let[n,r]of Object.entries(t))Uf(r)?e[n]=r.value:e[n]=r;return e}s(Pc,"extractParamsForKey");var ro=s((t,e)=>ie([t.id,t.shapeKey,e]),"queryKeyFor"),xc=class{static{s(this,"QueryClient")}constructor(e,n={fetch,log:console},r,i,o){this.store=e,this.context=n,this.memoryEvictionManager=i??new no(this,this.context.evictionMultiplier),this.refetchManager=o??new to(this.context.refetchMultiplier),this.networkManager=r??new kr,this.isServer=typeof self>"u",this.entityMap=new Xi(this)}entityMap;queryInstances=new Map;mutationInstances=new Map;memoryEvictionManager;refetchManager;networkManager;isServer;getContext(){return this.context}saveQueryData(e,n,r,i,o,a){let c=o!==void 0?new Set(o):void 0;this.store.saveQuery(e,n,r,i,c,a)}activateQuery(e){let{def:n,queryKey:r,storageKey:i}=e;this.store.activateQuery(n,i),n.type!=="stream"&&n.cache?.refetchInterval&&this.refetchManager.addQuery(e),this.memoryEvictionManager.cancelEviction(r)}loadCachedQuery(e,n){return this.store.loadQuery(e,n,this.entityMap)}deleteCachedQuery(e){this.store.deleteQuery(e)}getQuery(e,n){let r=ro(e,n),i=this.queryInstances.get(r);return i===void 0&&(i=new Zi(e,this,r,n),this.queryInstances.set(r,i)),i}getMutation(e){let n=e.id,r=this.mutationInstances.get(n);return r===void 0&&(r=new eo(e,this),this.mutationInstances.set(n,r)),r}registerOptimisticUpdate(e,n){this.entityMap.registerOptimisticUpdate(e,n)}clearOptimisticUpdates(e){this.entityMap.clearOptimisticUpdates(e)}revertOptimisticUpdate(e){this.entityMap.revertOptimisticUpdate(e)}hydrateEntity(e,n){return this.entityMap.hydratePreloadedEntity(e,n)}saveEntity(e,n,r,i){let o=this.entityMap.setEntity(e,n,r,i);return this.store.saveEntity(e,n,i),o}getNestedEntityRefIds(e,n){return this.entityMap.getNestedEntityRefIds(e,n)}destroy(){this.refetchManager.destroy(),this.memoryEvictionManager.destroy()}},Lc=Si(void 0);function Bf(t){let e=[],n=[],r=new Set,i=0,o=/\[([^\]]+)\]/g,a;for(;(a=o.exec(t))!==null;)e.push(t.slice(i,a.index)),n.push(a[1]),r.add(a[1]),i=o.lastIndex;return e.push(t.slice(i)),c=>{let d=e[0];for(let m=0;m<n.length;m++)d+=encodeURIComponent(String(c[n[m]]))+e[m+1];let f=null;for(let m in c)!r.has(m)&&c[m]!==void 0&&(f===null&&(f=new URLSearchParams),f.append(m,String(c[m])));return f!==null&&(d+="?"+f.toString()),d}}s(Bf,"createPathInterpolator");var Kc=new Map;function Vc(t){let e,n=s(()=>{if(e===void 0){let{path:i,method:o="GET",response:a,requestOptions:c,cache:d,pagination:f,stream:m,optimisticInserts:p,debounce:h}=t(),b=`${o}:${i}`,v,E;typeof a=="object"?a instanceof be?(v=a,E=a.shapeKey):a instanceof Set?(v=a,E=ie(a)):(v=T.object(a),E=v.shapeKey):(v=a,E=ie(v));let A=Bf(i),V=s(async(j,H)=>{let R=A(H),Pe=_c(c?.baseUrl)??_c(j.baseUrl),ke=Pe?`${Pe}${R}`:R,{baseUrl:Ye,...Ie}=c??{};return(await j.fetch(ke,{method:o,...Ie})).json()},"fetchFn"),G;if(m){let j,H,R=m.type;typeof R=="object"?R instanceof be?(j=R,H=R.shapeKey):R instanceof Set?(j=R,H=ie(R)):(j=T.object(R),H=j.shapeKey):(j=R,H=ie(j)),G={shape:j,shapeKey:H,subscribeFn:s((Pe,ke,Ye)=>m.subscribe(Pe,ke,Ye),"subscribeFn")}}let Z;if(p){let j,H,R=p.type;typeof R=="object"?R instanceof be?(j=R,H=R.shapeKey):R instanceof Set?(j=R,H=ie(R)):(j=T.object(R),H=j.shapeKey):(j=R,H=ie(j)),Z={shape:j,shapeKey:H}}e={type:f?se.InfiniteQuery:se.Query,id:b,shape:v,shapeKey:E,fetchFn:V,pagination:f,cache:d,stream:G,optimisticInserts:Z,debounce:h}}return e},"getQueryDefinition"),r=fe(i=>{let o=Ai(Lc);if(o===void 0)throw new Error("QueryClient not found");return o.getQuery(n(),i)});return Kc.set(r,n),r}s(Vc,"buildQueryFn");function qc(t){return Vc(t)}s(qc,"query");function Hc(t){return Vc(t)}s(Hc,"infiniteQuery");function Qc(t){let e,n=s(()=>{if(e===void 0){let{id:i,response:o,subscribe:a,cache:c}=t();if(!(o instanceof be)||!(o.mask&w.ENTITY))throw new Error("Stream query response must be an EntityDef");e={type:se.Stream,id:i,shape:o,shapeKey:o.shapeKey,subscribeFn:s((d,f,m)=>a(f,m),"subscribeFn"),cache:c}}return e},"getStreamDefinition"),r=fe(i=>{let o=Ai(Lc);if(o===void 0)throw new Error("QueryClient not found");return o.getQuery(n(),i)});return Kc.set(r,n),r}s(Qc,"streamQuery");u();l();var On=L(Q());u();l();var Lf=new As({[$e.Solana]:{},[$e.Ethereum]:{},[$e.Polygon]:{},[$e.Base]:{},[$e.Arbitrum]:{},[$e.Monad]:{},[$e.Bitcoin]:{},[$e.Sui]:{},[$e.Hypercore]:{},[$e.Hyperevm]:{}}),mt=Ss(Lf);u();l();u();l();u();l();var Kf=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],so=class{static{s(this,"EventSource")}ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(e,n={}){if(!e||typeof e!="string"&&typeof e.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof e.toString=="function"?e.toString():e,this.method=n.method||"GET",this.timeout=n.timeout??0,this.timeoutBeforeConnection=n.timeoutBeforeConnection??0,this.withCredentials=n.withCredentials||!1,this.headers=n.headers||{},this.body=n.body||void 0,this.debug=n.debug||!1,this.interval=n.pollingInterval??5e3,this.lineEndingCharacter=n.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(e,n){(e>0||n)&&(this._logDebug(`[EventSource] Will open new connection in ${e} ms.`),this._pollTimer=setTimeout(()=>{this.open()},e))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[e,n]of Object.entries(this.headers))this._xhr.setRequestHeader(e,n);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let e=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${Kf[e.readyState]||"Unknown"}(${e.readyState}), status: ${e.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(e.readyState)&&(e.status>=200&&e.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(e.responseText||""),e.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):e.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:e.responseText,xhrStatus:e.status,xhrState:e.readyState}),e.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(e){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:e.message,error:e})}}_logDebug(...e){this.debug&&console.debug(...e)}_handleEvent(e){if(this.lineEndingCharacter===null){let f=this._detectNewlineChar(e);if(f!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(f).slice(1,-1)}`),this.lineEndingCharacter=f;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let n=this._getLastDoubleNewlineIndex(e);if(n<=this._lastIndexProcessed)return;let r=e.substring(this._lastIndexProcessed,n).split(this.lineEndingCharacter);this._lastIndexProcessed=n;let i,o=null,a=[],c=0,d="";for(let f=0;f<r.length;f++)if(d=r[f].trim(),d.startsWith("event"))i=d.replace(/event:?\s*/,"");else if(d.startsWith("retry"))c=parseInt(d.replace(/retry:?\s*/,""),10),isNaN(c)||(this.interval=c);else if(d.startsWith("data"))a.push(d.replace(/data:?\s*/,""));else if(d.startsWith("id"))o=d.replace(/id:?\s*/,""),o!==""?this.lastEventId=o:this.lastEventId=null;else if(d===""&&a.length>0){let m=i||"message",p={type:m,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(m,p),a=[],i=void 0}}_detectNewlineChar(e){let n=[this.CRLF,this.LF,this.CR];for(let r of n)if(e.includes(r))return r;return null}_getLastDoubleNewlineIndex(e){let n=this.lineEndingCharacter+this.lineEndingCharacter,r=e.lastIndexOf(n);return r===-1?-1:r+n.length}addEventListener(e,n){this.eventHandlers[e]===void 0&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(n)}removeEventListener(e,n){this.eventHandlers[e]!==void 0&&(this.eventHandlers[e]=this.eventHandlers[e].filter(r=>r!==n))}removeAllEventListeners(e){let n=Object.keys(this.eventHandlers);if(e===void 0)for(let r of n)this.eventHandlers[r]=[];else{if(!n.includes(e))throw Error(`[EventSource] '${e}' type is not supported event type.`);this.eventHandlers[e]=[]}}dispatch(e,n){if(Object.keys(this.eventHandlers).includes(e))for(let i of Object.values(this.eventHandlers[e]))i(n)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},ao=so;u();l();var co=class{static{s(this,"AbstractStreamEventProducer")}getDefaultHeaders(){let e={"X-Phantom-Version":Zn,"X-Phantom-Platform":er},n=or();return n&&(e["X-Phantom-AnonymousId"]=n),e}getOptions(e={}){return{...e,headers:Object.fromEntries(pn(this.getDefaultHeaders(),e.headers).entries())}}getOptionsWithAuth(e,n={}){let r=this.getOptions(n);if(r.withClientAuth!==!1){let i=sr(e,r.headers);return{...r,headers:Object.fromEntries(pn(r.headers,i).entries())}}return r}getApiEnvironment(){return Jn()}safeJsonParse(e){try{return e?{success:!0,data:JSON.parse(e)}:{success:!1,error:new Error("No data provided")}}catch(n){return{success:!1,error:n instanceof Error?n:new Error("Failed to parse JSON")}}}createErrorEvent(e,n="error"){return{type:n,error:typeof e=="string"?new Error(e):e}}};u();l();function uo({url:t,signal:e,customEvent:n}){return{[Symbol.asyncIterator](){let r=[],i=null,o=!1,a={"X-Phantom-Version":Zn,"X-Phantom-Platform":er},c=or();c&&(a["X-Phantom-AnonymousId"]=c);let d=sr(t,a),f={headers:Object.fromEntries(pn(a,d).entries()),lineEndingCharacter:`
`},m=new ao(t,f),p=s(A=>{try{r.push(JSON.parse(A.data??""))}catch{r.push(A.data??"")}if(i){let V=i;i=null,V({value:r.shift(),done:!1})}},"onMessage"),h=s(()=>{o||(o=!0,E(),v())},"handleStreamTermination"),b=h,v=s(()=>{if(i){let A=i;i=null,A({value:void 0,done:!0})}},"finish"),E=s(()=>{n&&m.removeEventListener(n,p),m.removeEventListener("message",p),m.removeEventListener("error",b),m.close()},"cleanup");return n&&m.addEventListener(n,p),m.addEventListener("message",p),m.addEventListener("error",b),e?.addEventListener("abort",h,{once:!0}),{async next(){return o?Promise.resolve({value:void 0,done:!0}):r.length?Promise.resolve({value:r.shift(),done:!1}):new Promise(A=>{i=A})},async return(){return o||(o=!0,e?.removeEventListener("abort",h),E()),Promise.resolve({value:void 0,done:!0})},async throw(A){return o||(o=!0,e?.removeEventListener("abort",h),E()),Promise.reject(A)}}}}}s(uo,"sseIterable");u();l();function jc(t){return{usd:t.price??void 0,usd_24h_change:t.priceChange24h??void 0,price:t.price??void 0,priceChange24h:t.priceChange24h??void 0,lastUpdatedAt:t.lastUpdatedAt}}s(jc,"priceUpdateDataToPriceData");var Vf=_({minutes:5}),qf=100,$c=5,Hf=_({seconds:1}),Qf=_({seconds:30}),lo=class{static{s(this,"PriceStreamManager")}subscriptions=new Map;activeConnection=null;currentTokenIds=new Set;subscriptionOrder=[];connectionState="disconnected";reconnectAttempts=0;reconnectTimeoutId=null;subscribe(e,n,r){!this.subscriptions.has(e)&&this.subscriptions.size>=qf&&this.evictOldestToken();let i={priceCallback:n,evictedCallback:r?.onEvicted};return this.subscriptions.has(e)?(this.removeFromSubscriptionOrder(e),this.subscriptionOrder.push(e)):(this.subscriptions.set(e,new Set),this.subscriptionOrder.push(e)),this.subscriptions.get(e).add(i),this.updateConnection(),()=>{let o=this.subscriptions.get(e);if(o){for(let a of o)if(a.priceCallback===n){o.delete(a);break}o.size===0&&(this.subscriptions.delete(e),this.removeFromSubscriptionOrder(e),this.updateConnection())}}}updateConnection(){let e=new Set(this.subscriptions.keys());if(e.size===0){this.disconnect();return}this.setsEqual(this.currentTokenIds,e)&&this.activeConnection&&this.connectionState==="connected"||this.connectionState==="reconnecting"&&this.setsEqual(this.currentTokenIds,e)||(this.disconnect(),this.connect(e))}connect(e){let n=new AbortController;this.activeConnection=n,this.currentTokenIds=new Set(e),this.connectionState="connecting";let r=Array.from(e).map(o=>encodeURIComponent(o)).join(","),i=`${Jn()}/price-stream?throttleMs=5000&tokenIds=${r}`;this.consumeStream(i,n.signal)}async consumeStream(e,n){try{let r=uo({url:e,signal:n,customEvent:"price-update"});this.connectionState="connected",this.reconnectAttempts=0;for await(let i of r){if(n.aborted)break;this.handlePriceUpdate(i)}}catch{n.aborted||(this.connectionState="disconnected",this.scheduleReconnect())}}handlePriceUpdate(e){let n=e.caip19,r=this.subscriptions.get(n);if(!r)return;if(!e.price){let o=new Date(e.lastUpdatedAt).getTime();if(Date.now()-o<Vf)return}let i=jc(e);r.forEach(o=>{try{o.priceCallback(n,i)}catch{}})}disconnect(){this.cancelReconnection(),this.activeConnection&&(this.activeConnection.abort(),this.activeConnection=null),this.currentTokenIds.clear(),this.connectionState!=="disconnected"&&(this.connectionState="disconnected")}setsEqual(e,n){if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;return!0}evictOldestToken(){if(this.subscriptionOrder.length===0)return;let e=this.subscriptionOrder[0],n=this.subscriptions.get(e);n&&(n.forEach(r=>{if(r.evictedCallback)try{r.evictedCallback(e)}catch{}}),n.clear()),this.subscriptions.delete(e),this.removeFromSubscriptionOrder(e),this.updateConnection()}removeFromSubscriptionOrder(e){let n=this.subscriptionOrder.indexOf(e);n>-1&&this.subscriptionOrder.splice(n,1)}scheduleReconnect(){if(this.reconnectAttempts>=$c){this.connectionState="disconnected";return}if(this.subscriptions.size===0)return;this.connectionState="reconnecting",this.reconnectAttempts++;let e=Math.min(Hf*Math.pow(2,this.reconnectAttempts-1),Qf);this.reconnectTimeoutId=setTimeout(()=>{if(this.reconnectTimeoutId=null,this.subscriptions.size===0){this.connectionState="disconnected";return}this.connect(new Set(this.subscriptions.keys()))},e)}cancelReconnection(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}getConnectionState(){return this.connectionState}getStats(){return{connectionState:this.connectionState,activeSubscriptions:this.subscriptions.size,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:$c,currentTokenIds:Array.from(this.currentTokenIds)}}forceReconnect(){this.subscriptions.size!==0&&(this.reconnectAttempts=0,this.disconnect(),this.connect(new Set(this.subscriptions.keys())))}destroy(){this.cancelReconnection(),this.disconnect(),this.subscriptions.clear(),this.subscriptionOrder.length=0,this.connectionState="disconnected",this.reconnectAttempts=0}},Gc=new lo;u();l();u();l();u();l();var Jt;(function(t){t[t.Always=1/0]="Always",t[t.Short=_({days:1})]="Short",t[t.Medium=_({days:3})]="Medium",t[t.Long=_({days:7})]="Long",t[t.VeryLong=_({days:30})]="VeryLong",t[t.Never=0]="Never"})(Jt||(Jt={}));var Se;(function(t){t[t.Immediate=0]="Immediate",t[t.VeryShort=_({seconds:1})]="VeryShort",t[t.Short=_({seconds:15})]="Short",t[t.Medium=_({minutes:3})]="Medium",t[t.Long=_({minutes:5})]="Long",t[t.VeryLong=_({minutes:10})]="VeryLong",t[t.Never=1/0]="Never"})(Se||(Se={}));var rt;(function(t){t[t.VeryShort=_({seconds:2})]="VeryShort",t[t.Short=_({seconds:15})]="Short",t[t.Medium=_({minutes:3})]="Medium",t[t.Long=_({minutes:5})]="Long"})(rt||(rt={}));var zc=_({seconds:10}),Wc={gcTime:Jt.Short,staleTime:Se.Short};u();l();var jf="prices",Ur=s((t,e)=>{if(!Ce(t))return;let r=t.response?.status;if(!r||r===0||r>=500||r===404){D.addBreadcrumb(jf,t.message,z.Info,e);return}r>=400&&r<500&&D.captureError(t,F.Prices)},"captureClientError");var Xc=g.object({price:g.number(),priceChange24h:g.number(),lastUpdatedAt:g.string().datetime().optional()}),Yc=g.object({prices:g.record(vs,Xc)});async function Kt({tokens:t}){try{let e=t.filter(a=>!mt.get(a.chainId)?.pricesDisabled),n={tokens:e.map(a=>({token:a}))},r="/price/v1",i,o=me.timeout(zc).retry(1,200).validateStatus(!0).api();if(e.length===0)return{};if(e.length===1){let a=e[0];r+=`/${a.chainId}`,a.resourceType===he.nativeToken?r+=`/nativeToken/${a.slip44}`:r+=`/address/${a.address}`;let c=await o.get(r);i=Yc.parse({prices:{[ne(a)]:c.data}})}else{let a=await o.post(r,n);i=Yc.parse(a.data)}return $f(i.prices)}catch(e){throw Ur(e),e}}s(Kt,"getPrices");function $f(t){let e={};for(let n of Object.keys(t)){let{price:r,priceChange24h:i,lastUpdatedAt:o}=t[n],a={price:r,usd:r,usd_24h_change:i,lastUpdatedAt:o};e[n]=a}return e}s($f,"pricesToPriceMap");u();l();function Br(t){return{caip19:fo(t)}}s(Br,"parseCaip19Able");function fo(t){return typeof t=="string"?Be(t):t}s(fo,"fungibledCaip19");u();l();var Lr="prices",Ae={price:s(t=>[Lr,{id:t}],"price"),priceError:s(()=>[Lr,"error"],"priceError"),priceHistory:s((t,e)=>[Lr,t,e],"priceHistory"),priceHistoryInterval:s((t,e,n,r)=>[Lr,t,e,n,...r?[r]:[]],"priceHistoryInterval"),tempPrices:s(t=>["tempPrices",t],"tempPrices")};var Jc=new Error("Price not available"),Zc=s(t=>{let e=t?t.data:void 0;return e?Gf(e):void 0},"tokenIdFromQuery"),eu=s(({query:t,enabled:e=!0,queryOptions:n={refetchInterval:rt.Short,staleTime:Se.Short,gcTime:Se.Short}})=>{let r=Zc(t),{refetchInterval:i}=n,{staleTime:o}=n,{gcTime:a}=n,c=t?t.data:void 0,d=c?Br(c).caip19.chainId:void 0,f=d?!mt.get(d).pricesDisabled:!1;return{enabled:e&&!!r&&f,queryKey:Ae.price(r),refetchInterval(p){return p.state.error===Jc?!1:i},staleTime:o,gcTime:a,retry:!1,queryFn:s(async()=>{if(!c||!r)throw new Error("No caip19able provided");let p=fo(c);try{let b=(await Kt({tokens:[p]}))[r];if(!b)throw new Error(`Failed to fetch price for ${c}`);return b}catch(h){let b=h;throw r&&(b.response?.status===404||b.response?.status===400)?Jc:h}},"queryFn")}},"getPriceQueryConfig");function Gf(t){return typeof t=="string"?t:ne(t)}s(Gf,"encodedCaip19");var zf=Mr(()=>({__typename:T.typename("TokenPrice"),id:T.id,usd:T.union(T.number,T.undefined),usd_24h_change:T.union(T.number,T.undefined),price:T.union(T.number,T.undefined),priceChange24h:T.union(T.number,T.undefined),currencyValue:T.union(T.number,T.undefined),currencyChange:T.union(T.number,T.undefined),lastUpdatedAt:T.union(T.string,T.undefined)})),Wf=Qc(()=>({id:"PriceStream",response:zf,params:{tokenId:T.union(T.string,T.undefined)},subscribe:s((t,e)=>t.tokenId?Gc.subscribe(t.tokenId,(n,r)=>{e({...r,__typename:"TokenPrice",id:t.tokenId})}):()=>{},"subscribe")})),Yf={data:void 0,error:void 0,isFetched:!1,isFetching:!1,isSuccess:!1,isLoading:!1,isError:!1};function Xf(t){let{chainId:e}=Be(t);return x.isEthereumNetworkID(e)||x.isSolanaNetworkID(e)||x.isPolygonNetworkID(e)||x.isBaseNetworkID(e)}s(Xf,"isSupportedStreamingChain");var Jf=s((t,e)=>{let[n]=(0,On.useState)(t),{value:r,error:i,isReady:o,isResolved:a,isPending:c,isRejected:d,isFetching:f}=Cs(Wf,{tokenId:n});return(0,On.useMemo)(()=>e?{data:r,error:i,isFetched:o,isFetching:f,isSuccess:a,isLoading:c,isError:d}:Yf,[e,r,i,o,a,c,d,f])},"usePriceLegacyInteropSafe");function Vt({query:t,enabled:e=!0,queryOptions:n={refetchInterval:rt.Short,staleTime:Se.Short,gcTime:Se.Short}}){let r=Zc(t),[i]=(0,On.useState)(()=>gt("enable-signalium-query-price-streaming")&&!!r&&Xf(r)),o=Jf(r,i),a=q(eu({query:t,enabled:e&&!i,queryOptions:n}));return i?o:a}s(Vt,"usePrice");u();l();u();l();var iu=L(Q());u();l();var tu=s(function(t,e=0){let n=3735928559^e,r=1103547991^e;for(let i=0,o;i<t.length;i++)o=t.charCodeAt(i),n=Math.imul(n^o,2654435761),r=Math.imul(r^o,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)},"cyrb53");u();l();function nu(t){return t.data.map(Br)}s(nu,"parseQueries");u();l();var Zf=500;async function ru({queryClient:t,queries:e}){let n={};try{let r={},i=[];for(let f of e){let{caip19:m}=f,p=ne(m);if(r[p])continue;r[p]=!0;let h=Ae.price(p),b=t.getQueryState(h);if(b&&Date.now()-b.dataUpdatedAt<Wc.staleTime){n[p]=b.data;continue}i.push(m)}let o=await Promise.allSettled(Vs(i,Zf).map(async f=>Kt({tokens:f}))),a=[],c=o.some(f=>f.status==="rejected"),d=o.reduce((f,m)=>m.status==="rejected"?f:{...f,...m.value},{});for(let f of i){let m=ne(f),p=d[m],h=Ae.price(m);!p&&c&&(p=t.getQueryData(h)),p&&(n[m]=p),a.push(()=>{let b=p??null;t.setQueryData(h,b,{updatedAt:Date.now()})})}if(c){let f=t.getQueryData(Ae.priceError())??0;t.setQueryData(Ae.priceError(),f+1)}else t.removeQueries({queryKey:Ae.priceError()});em(a,50)}catch(r){Ur(r)}return n}s(ru,"fetchPricesFn");function em(t,e){let n=t.length,r=0;function i(){let o=t.slice(r,r+e);cr.batch(()=>{o.forEach(a=>{a()})}),r+=e,r<n&&setTimeout(i,0)}s(i,"processNextChunk"),i()}s(em,"updateCacheInChunks");var tm=s(t=>typeof t=="string"?t:t.resourceType==="nativeToken"?t.slip44:t.address,"uniqueStringFromCaip19Able"),nm=s((t,e)=>t<e?-1:t>e?1:0,"compare"),ou=s(t=>{let e=t.map(tm).sort(nm).join(",");return tu(e)},"getPricesKey"),su=s(({query:t,enabled:e=!0,key:n,queryOptions:r={refetchInterval:rt.Short},queryClient:i})=>{let{refetchInterval:o}=r,a=nu(t),c=e&&t!=null&&t.data.length>0;return{queryKey:Ae.tempPrices(n),staleTime:Se.Immediate,gcTime:Jt.Never,refetchInterval:o,queryFn:s(async()=>ru({queryClient:i,queries:a}),"queryFn"),enabled:c}},"getPricesQueryConfig");function mo({query:t,enabled:e=!0,queryOptions:n={refetchInterval:rt.Short}}){let r=ae(),i=(0,iu.useMemo)(()=>ou(t.data),[t]);return q(su({query:t,enabled:e,key:i,queryOptions:n,queryClient:r}))}s(mo,"usePrices");u();l();var po=s(()=>q({queryKey:Ae.priceError(),queryFn:s(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0}),"usePricesErrorCount");u();l();u();l();var Ew=g.object({caip19:g.string(),price:g.number().nullish(),priceChange24h:g.number().nullish(),lastUpdatedAt:g.string(),marketCap:g.string().nullish()}),rm=[g.literal("1H"),g.literal("1D"),g.literal("1W"),g.literal("1M"),g.literal("YTD"),g.literal("ALL")],Sw=g.union(rm).nullish().transform(t=>t??"1D");var im=[g.literal("1m"),g.literal("5m"),g.literal("1h"),g.literal("4h"),g.literal("1d"),g.literal("1w"),g.literal("4w"),g.literal("1mo")],Aw=g.union(im).nullish().transform(t=>t??"1d"),om=g.object({unixTime:g.number(),value:g.string()}),au=g.object({history:g.array(om)});var Zt=new Error("Price history unavailable for this token"),ho=new Error("Insufficient data for this time frame and token"),cu=s(async({caip19:t,timeFrame:e})=>{let n=Be(t);if(mt.get(n.chainId)?.pricesDisabled)throw Zt;let i=await me.api().get("/price-history/v1",{params:{token:t,type:e}});if(i.status===400)throw Zt;let o=au.safeParse(i.data);if(!o.success)throw Zt;if(o.data.history.length<2)throw ho;return o.data.history},"fetchPriceHistory"),uu=s(({caip19:t,timeFrame:e})=>({queryKey:Ae.priceHistory(t,e),queryFn:s(async()=>cu({caip19:t,timeFrame:e}),"queryFn"),staleTime:Se.Short,gcTime:Se.Short}),"getPriceHistoryQueryConfig"),Nn=s(t=>q(uu(t)),"usePriceHistory");u();l();var sm=1*60*1e3,am=s(t=>{let e=t.queryKey[1];return Object.prototype.hasOwnProperty.call(e??{},"id")?t.state.dataUpdatedAt>Date.now()-sm:String(e)===Ae.priceError()[1]},"pricesShouldDehydrateQueryPredicate");u();l();var le=L(Q());u();l();var lu=s(({priceHistory:t,realtimePriceUpdates:e})=>{let n=t.at(-1),r=t.at(-2);if(!n||!r)return t.map(c=>({...c,tooltipUnixTime:c.unixTime}));let i=n.unixTime-r.unixTime,o=e.map((c,d)=>({unixTime:n.unixTime+(d+1)*i,value:c.value,tooltipUnixTime:c.unixTime}));return[...t.map(c=>({...c,tooltipUnixTime:c.unixTime})),...o]},"ensureConsistentIntervals");u();l();var du=s(({priceHistory:t,currentPrice:e})=>{let n=t.at(-1),r=t.at(-2),i=t.map(c=>({...c,tooltipUnixTime:c.unixTime}));if(e===void 0||!n||!r)return i;let o=n.unixTime-r.unixTime,a={unixTime:n.unixTime+o,value:e.toString(),tooltipUnixTime:n.unixTime+o};return[...i,a]},"ensureLatestPricing");u();l();var fu=L(Xd()),en=L(Q());var mu=s((t,e=100)=>{let[n,r]=(0,en.useState)(t),i=(0,en.useMemo)(()=>(0,fu.default)(o=>{r(o)},e),[e]);return(0,en.useEffect)(()=>{i(t)},[i,t]),n},"useThrottle");var cm=s(({error:t,chainId:e,prices:n,isPending:r})=>{if(mt.get(e).pricesDisabled)return ue.t("assetDetailPriceNoValue");if(t===Zt)return ue.t("assetDetailPriceHistoryUnavailable");if(t===ho||!r&&n.length===0)return ue.t("assetDetailPriceHistoryInsufficientData");if(t)return ue.t("assetDetailPriceHistoryError")},"getErrorText"),um=s(({caip19:t,userLocale:e="en-US",timeFrame:n="1D"})=>{let{t:r}=Le(),i=et(),o=ae(),[a,c]=(0,le.useState)(n),d=(0,le.useCallback)(te=>{if(te!==a){c(te);try{let Re=o.getQueryData(Pr.tokenDetails({caip19:t,includePrice:!0}));i.capture("onPublicFungibleTimeframeChanged",{data:{timeFrame:te,caip19:t,symbol:Re?.symbol}})}catch(Re){console.error("error capturing onPublicFungibleTimeframeChanged",Re)}}},[i,t,o,a]),{data:f,isPending:m,error:p}=Nn({caip19:t,timeFrame:a}),{data:h}=Vt({query:{data:t},queryOptions:{refetchInterval:rt.VeryShort,staleTime:Se.VeryShort}}),b=(0,le.useMemo)(()=>{if(f){if(h?.price&&h.lastUpdatedAt&&f){let{price:te}=h,Re=new Date(h.lastUpdatedAt),Xn={value:te.toString(),unixTime:Math.floor(Re.getTime()/1e3)};return lu({priceHistory:f,realtimePriceUpdates:[Xn]})}return du({priceHistory:f,currentPrice:h?.price})}},[f,h]),v=Be(t),{chainId:E}=v,A=h?.price,V=h?.usd_24h_change,G=(0,le.useMemo)(()=>!A||!V?null:A/(1+V/100),[A,V]),[Z,j]=(0,le.useState)(null);(0,le.useEffect)(()=>{b?.length&&j(b)},[b,j]);let H=(0,le.useMemo)(()=>b||Z||[],[b,Z]),R=cm({error:p,chainId:E,prices:H,isPending:m});(0,le.useEffect)(()=>{R&&j(null)},[R]);let Pe=(0,le.useMemo)(()=>[{timeFrame:"1H",label:r("assetDetailTimeFrame1H")},{timeFrame:"1D",label:r("assetDetailTimeFrame1D")},{timeFrame:"1W",label:r("assetDetailTimeFrame1W")},{timeFrame:"1M",label:r("assetDetailTimeFrame1M")},{timeFrame:"YTD",label:r("assetDetailTimeFrameYTD")},{timeFrame:"ALL",label:r("assetDetailTimeFrameAll")}].map(te=>({...te,label:te.label?.toUpperCase()})),[r]),[ke,Ye]=(0,le.useState)(null),Ie=mu(ke,100),[P,S]=(0,le.useMemo)(()=>H.length?[new B(H[0].value).toNumber(),A??null]:[G??null,A??null],[A,G,H]),N=(0,le.useMemo)(()=>Ie??S,[Ie,S]),I=(0,le.useMemo)(()=>S===null||P===null?null:S-P,[P,S]),k=(0,le.useMemo)(()=>N===null||P===null?null:N-P,[N,P]),C=(0,le.useMemo)(()=>{if(k===null||P===null||P===0)return null;let te=k/P*100;return`${Gs(te,{includePlusPrefix:!0})}%`},[k,P]),$=(0,le.useCallback)(te=>{let Re=new Date(te*1e3),Xn=Re.toLocaleTimeString(e,{hour:"2-digit",minute:"2-digit"}),ms=Re.toLocaleString(e,{month:"short",day:"2-digit"}),Qd=Re.getFullYear();if(H.at(-1)?.unixTime===te)return r("assetDetailPriceHistoryNow");switch(a){case"1H":case"1D":return Xn;case"1W":case"1M":return`${Xn}, ${ms}`;case"YTD":case"ALL":return`${ms}, ${Qd}`;default:return a}},[e,H,a,r]),W=(0,le.useMemo)(()=>mt.get(E).pricesDisabled??!1,[E]);return{activeTimeFrame:a,setActiveTimeFrame:d,prices:H,isPending:m,errorText:R,timeFrames:Pe,setScrubValue:Ye,scrubValue:Ie,currentPrice:N,overallPriceChange:I,currentPriceChange:k,formattedPercentageChange:C,formatTimeFrameText:$,hidePriceAmounts:W,hideTimeFrames:W}},"usePriceHistoryState");u();l();var Ke=L(Q());var lm=s(({caip19:t,fungible:e,pnlData:n,userLocale:r="en-US",timeFrame:i="ALL"})=>{let{t:o}=Le(),{data:a,isPending:c,error:d}=Nn({caip19:t,timeFrame:i}),f=(0,Ke.useMemo)(()=>{let R=e?.data.balance;return R?new B(R):new B(0)},[e?.data.balance]),m=(0,Ke.useMemo)(()=>{let R=e?.data.price;return R?new B(R):new B(0)},[e?.data.price]),p=(0,Ke.useMemo)(()=>f.multipliedBy(m),[f,m]),h=(0,Ke.useMemo)(()=>!a?.length||f.isZero()?[]:a.map(R=>({unixTime:R.unixTime,value:new B(R.value).multipliedBy(f).toString(),tooltipUnixTime:R.unixTime})),[a,f]),[b,v]=(0,Ke.useState)(null),[E,A]=(0,Ke.useMemo)(()=>h.length?[new B(h[0].value),p]:[null,p],[h,p]),V=A.toNumber(),G=b??V,Z=(0,Ke.useMemo)(()=>E===null?null:A.minus(E).toNumber(),[E,A]),j=(0,Ke.useCallback)(R=>{let Pe=new Date(R*1e3),ke=Pe.toLocaleString(r,{month:"short",day:"2-digit"}),Ye=Pe.getFullYear();return h.at(-1)?.unixTime===R?o("assetDetailPriceHistoryNow"):`${ke}, ${Ye}`},[r,h,o]),H=(0,Ke.useMemo)(()=>{if(d)return o("assetDetailPriceHistoryError");if(!c&&h.length===0)return o("assetDetailPriceHistoryInsufficientData")},[d,c,h.length,o]);return{positionValueHistory:h,isPending:c,errorText:H,setScrubValue:v,currentDisplayValue:G,currentBalance:f.toNumber(),overallValueChange:Z,formatTimeFrameText:j}},"usePositionHistoryState");u();l();u();l();var yo=g.object({feerate:g.string()}),pu=g.object({conservative:yo,economical:yo,unset:yo}),dm=g.object({recommended:g.object({priceEstimates:pu}),bitcoin_rpc:g.object({priceEstimates:pu})}),fm=g.object({gasPriceSources:dm}),mm=new Y("1.25"),pm=new Y("1.5"),hu=s(async(t,e=!0)=>{let n,r,i;try{let{priceEstimates:o}=(await hm(t)).gasPriceSources.recommended,{conservative:a,economical:c,unset:d}=o;n=new Y(a.feerate),r=new Y(c.feerate),i=new Y(d.feerate)}catch(o){if(!e)throw o;let a=await Ea(t).estimateSmartFee(2,"ECONOMICAL");i=new Y(a.feerate),r=i.times(mm),n=i.times(pm)}return{[ye.fast]:{btcPerKilobyte:n.multipliedBy(1)},[ye.standard]:{btcPerKilobyte:r.multipliedBy(1)},[ye.slow]:{btcPerKilobyte:i.multipliedBy(1)}}},"getBitcoinTransactionSpeeds");async function hm(t){let e=`https://gas-price-oracle.phantom.app/?chainId=${t}`,n=await me.headers({"Content-Type":"application/json"}).get(e);return fm.parse(n.data)}s(hm,"getBitcoinTransactionUnitCosts");u();l();var tn="gas-estimation";var ym=3,gm=600,bm=_({seconds:30}),qt=s(({networkID:t,enableFallback:e=!1,retry:n=ym,retryDelay:r=gm,enabled:i=!0})=>q({queryFn:s(async()=>{try{if(!t)throw new Error("Missing networkID");if(x.isBitcoinNetworkID(t))return await hu(t,e);if(x.isEVMNetworkID(t))return await da(t,e);if(x.isSolanaNetworkID(t))throw new Error("Transaction speeds is not supported for Solana.");if(x.isSuiNetworkID(t))throw new bs("transaction speeds to unit cost");return Ue(t)}catch(o){throw o instanceof la||(D.addBreadcrumb(tn,`enableFallback: ${e}, networkID: ${t}`,z.Info),D.captureError(o,F.Transaction)),o}},"queryFn"),queryKey:X.transactionSpeedsToUnitCost(t),refetchOnMount:"always",retry:n,retryDelay:r,staleTime:bm,enabled:i&&!!t&&(x.isEVMNetworkID(t)||x.isBitcoinNetworkID(t)),placeholderData:ar}),"useTransactionSpeedsToUnitCost");u();l();u();l();var yu=s(async(t,e)=>{let n=aa(t),r=await na.eth_estimateGas(n,[e]);if("error"in r)throw new Error(`[${r.error.code}] ${r.error.message}`);return new Y(r.result)},"estimateGas");var OS=new Y(21e3),vm=6,Tm=600,wm=_({seconds:5}),Em=_({days:1}),go=s((t,e=!0)=>q({queryFn:s(async()=>{if(!t)throw new Error("Args is required for calculating transaction units.");try{return await Sm(t)}catch(r){throw D.addBreadcrumb(tn,`networkId: ${t?.networkID}`,z.Info),D.captureError(r,F.Transaction),r}},"queryFn"),queryKey:X.transactionUnitAmount(t),enabled:!!t&&(x.isEVMNetworkID(t.networkID)||x.isBitcoinNetworkID(t.networkID))&&e,retry:vm,retryDelay:Tm,staleTime:wm,gcTime:Em}),"useTransactionUnitAmount"),Sm=s(async t=>{if(br(t)){let{gas:e}=t.unsignedTransaction;if(e)return{gasLimit:new Y(e,16)};{let n=await yu(t.networkID,t.unsignedTransaction);return{gasLimit:new Y(fa(n))}}}else if(gr(t)){let e=t.psbtChain,n=e?new Y(xi(e.map(i=>i.additionalCost.vb.toNumber()))):new Y(0),r=e?new Y(xi(e.map(i=>i.additionalCost.sats.toNumber()))):new Y(0);return{virtualBytes:new Y(t.vb),additionalCosts:{vb:n,sats:r}}}else throw new Error(`Unsupported transaction networkId: ${t.networkID} for calculating transaction units.`)},"getTransactionUnitAmount");u();l();u();l();var Kr=L($d(),1),bu=L(jt(),1);var gu=(0,Kr.struct)([(0,Kr.u8)("instruction")]);function vu(t,e,n,r=[],i=bn){let o=Qa([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,r),a=Buffer.alloc(gu.span);return gu.encode({instruction:qa.CloseAccount},a),new bu.TransactionInstruction({keys:o,programId:i,data:a})}s(vu,"createCloseAccountInstruction");u();l();var Am=_({seconds:30}),_m=_({minutes:5}),Tu=s(t=>q({queryKey:X.transactionAdditionalCosts(t),queryFn:s(async()=>{if(!t)return new Y(0);let e=Bt.get(t.networkID).additionalTransactionCost;return e?await e(t):new Y(0)},"queryFn"),enabled:!!t,staleTime:Am,gcTime:_m}),"useTransactionAdditionalCosts");var Pm=6,xm=600,Om=_({seconds:5}),Nm=_({days:1}),Im=[ye.fast,ye.standard,ye.slow],Cm=s(t=>{if(!t)return ye.fast;for(let e of Im)if(t[e])return e;throw new Error("No valid transaction speeds found.")},"getFastestSpeed"),bo=s(t=>{let e=Rm(t),n=t?.queryOptions?.refetchInterval,{data:r,isError:i}=go(t?.multichainTransaction,e),{data:o}=qt({networkID:t?.networkID,enableFallback:!0,refetchInterval:n}),{data:a}=Tu(t?.multichainTransaction),c=km(t,r,o);return q({queryFn:s(async()=>{try{if(!t)throw new Error("Missing args");let{multichainTransaction:f,transactionSpeed:m=ye.standard}=t;if(!f)throw new Error("Multichain transaction is null.");if(i&&Vr(t.networkID))throw new Error("Transaction unit amount is required but errored.");if(br(f)||gr(f)){if(!o)throw new Error("Missing transactionSpeedsToUnitCost");if(!r)throw new Error("Missing transactionUnit");let p=m==="fastest"?Cm(o):m,h=o[p];if(!h)throw new Error(`Missing transactionSpeedsToUnitCost for ${m}`);return zt(f.networkID,h,r,a)}if(va(f))return f.networkID===tr.Localnet?{networkID:f.networkID,value:0,highFees:!1}:await ja(f.networkID,f.transaction.map(h=>"version"in h?h.message:h.compileMessage()));if(Ta(f))try{return await Ba(f)}catch(p){let h=p instanceof Error?p:new Error(String(p));return D.addBreadcrumb(F.Transaction,`useGasEstimation: sui getGasEstimation failed for ${f.networkID}, using fallback`,z.Error),D.captureError(h,F.Transaction),{networkID:f.networkID,gasBudget:Y("10000000")}}Ue(f)}catch(f){throw D.addBreadcrumb(tn,`chainId: ${t?.networkID}`,z.Info),D.captureError(f,F.Transaction),f}},"queryFn"),queryKey:X.gasEstimation(t?.networkID,t?.multichainTransaction,t?.transactionSpeed,a),enabled:c,retry:Pm,retryDelay:xm,refetchInterval:n,staleTime:Om,gcTime:Nm,placeholderData:s(f=>f,"placeholderData")})},"useGasEstimation");function Vr(t){return x.isBitcoinNetworkID(t)||x.isEVMNetworkID(t)?!0:x.isSolanaNetworkID(t)||x.isSuiNetworkID(t)?!1:Ue(t)}s(Vr,"isTransactionUnitAmountRequired");function Dm(t){return Vr(t)}s(Dm,"isTransactionUnitCostsBySpeedRequired");function km(t,e,n){if(!t)return!1;let{networkID:r,multichainTransaction:i}=t;return i?(!!e||!Vr(r))&&(!!n||!Dm(r)):!1}s(km,"calculateGasEstimationEnabled");function Rm(t){return t?Vr(t.networkID):!1}s(Rm,"calculateTransactionUnitAmountEnabled");u();l();u();l();var Fm=new Error("missing price"),Mm=new Error("Unable to format gas estimation"),qr=s((t,e)=>{if(!e.usd)throw Fm;try{let n=x.getTokenDecimals(t.networkID);if(yr(t)){let r=Na(t),o=new B(r).div(Mt(n)).times(new B(e.usd));return{gasEstimationPriceUSD:gn(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:r}}else if(vt(t)){let r=Ia(t),o=r.div(new B(ve.LAMPORTS_PER_SOL)).times(e.usd);return{gasEstimationPriceUSD:gn(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:r}}else if(hr(t)){let i=$s(t.gasBudget,n).times(e.usd);return{gasEstimationPriceUSD:gn(i),gasEstimationPriceUSDNumber:i.toNumber(),gasEstimationAmount:t.gasBudget}}else if($t(t)){let r=Ca(t),o=new B(r).div(Mt(n)).times(e.usd);return{gasEstimationPriceUSD:gn(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:r}}else throw Ue(t),new Error("unsupported chain type")}catch{throw Mm}},"createGasEstimationPrice");var Um=s((t,e,n)=>{let r=t?x.getChainID(t):null,i=r?nr(r):void 0,{data:o,isFetched:a}=Vt({query:{data:i}}),c=!!t&&!!e&&a,d=X.gasEstimationPrice(t,e);return q({enabled:c,queryKey:d,queryFn:s(()=>{if(!o||!e)throw new Error("missing args");return qr(e,o)},"queryFn"),refetchOnMount:!0,placeholderData:ar,...n||{}})},"useGasEstimationPrice");u();l();u();l();var wu=Object.prototype.hasOwnProperty;function Eu(t,e,n){for(n of t.keys())if(nn(n,e))return n}s(Eu,"find");function nn(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&nn(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=Eu(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=Eu(e,i),!i)||!nn(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(wu.call(t,n)&&++r&&!wu.call(e,n)||!(n in e)||!nn(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}s(nn,"dequal");var ze=L(Q(),1);u();l();var In=L(Yd(),1),Su=L(Q(),1);function Au(t){let e=(0,Su.useRef)((0,In.default)());q({queryKey:["PENDING-TX-POLLER",t],enabled:t.length>0,queryFn:s(()=>Oa(t),"queryFn"),refetchInterval:s(()=>(0,In.default)().diff(e.current,"seconds")<30?5*1e3:(0,In.default)().diff(e.current,"minutes")<2?15*1e3:(0,In.default)().diff(e.current,"minutes")<5?30*1e3:!1,"refetchInterval")})}s(Au,"usePendingTransactionsFromEndpoint");var Cn=s(t=>{let e=(0,ze.useRef)([]),[n,r]=(0,ze.useState)([]),i=(0,ze.useMemo)(()=>t.map(c=>`${c.networkID}:${c.address}`).join(","),[t]);(0,ze.useEffect)(()=>{e.current=[],r([])},[i]);let o=_a(Aa.PendingTransactions);Au(t);let a=(0,ze.useMemo)(()=>Pa(o??{},t),[t,o]);return(0,ze.useEffect)(()=>{if(!nn(a,e.current)){let c=e.current.filter(d=>!a.find(f=>f.id===d.id));c.length>0&&r(c),e.current=a}},[a]),(0,ze.useEffect)(()=>{if(n.length>0){let c=setTimeout(()=>{r([])},1e3);return()=>clearTimeout(c)}},[n]),{pendingTransactions:a,removedPendingTransactions:n}},"usePendingTransactions");u();l();var Ou=L(Q(),1);u();l();var _u=s(t=>({connection:Gt(t),cluster:Tr(t)}),"solanaNetworkIDToConnection"),Pu=s(()=>_u(kt.Solana.Mainnet),"getDefaultSolanaConnection"),xu=s(t=>{let e,n=t?.addresses??[];for(let i of n)if(x.isSolanaNetworkID(i.networkID)){e=i.networkID;break}let r=e??kt.Solana.Mainnet;return _u(r)},"selectSolanaConnection");var vo=s(()=>{let t=(0,Ou.useMemo)(()=>Pu(),[]),{data:e=t}=tt({select:xu});return e},"useSelectedSolanaConnection");u();l();var Nu=L(Wd(),1);u();l();var St=L(Q(),1);var Iu=(0,St.createContext)(null),Bm=s(({children:t})=>{let{data:e}=ta(),{data:n,isLoading:r}=ki(e),i=e&&n?Ni[e].languageCode:fr.languageCode,o=e||fr.value,a=e&&n?Ni[e].symbol:fr.symbol,c=(0,St.useCallback)((p,h)=>Intl.NumberFormat(i,{style:"currency",currency:o,...h}).format(p),[o,i]),d=(0,St.useCallback)(p=>!e||!n?Number(p):B(p).div(B(n)).toNumber(),[e,n]),f=(0,St.useCallback)((p,h)=>{if(!e||!n)return Number(p);let b=B(p).times(B(n));return h===void 0?b.toNumber():b.decimalPlaces(h).toNumber()},[e,n]),m={isLoading:r,currencyLocale:i,currencySymbol:a,currencyCode:o,toUsd:d,fromUsd:f,formatLocalizedPrice:c};return(0,Nu.jsx)(Iu.Provider,{value:m,children:t})},"LocalizedCurrencyProvider"),Dn=s(()=>{let t=(0,St.useContext)(Iu);if(!t)throw new Error("useLocalizedCurrency must be used within a LocalizedCurrencyProvider");return t},"useLocalizedCurrency");u();l();u();l();var il=L(Q(),1);u();l();var Cu=s(async t=>{try{return await ca(kt.Ethereum.Mainnet).resolveName(t)}catch(e){return console.error(e),null}},"resolveEVMDomainName");u();l();var Du=s(async(t,e)=>{let n="/uns/v1/resolve";try{let r=await me.api().headers({"Content-Type":"application/json"}).post(n,{query:t,chainId:e});if(!Je(r))throw Fi;let i=r.data;if(i.address===""||i.status!=="OK")throw Fi;return i.address}catch{return null}},"resolveSolanaHandle");u();l();var tl=L(el(),1);var nl=s(async(t,e)=>{try{if(!x.isSolanaNetworkID(e))return null;let n=Tr(e),r=Sa(n),o=await new tl.TldParser(r).getOwnerFromDomainTld(t);return o?o.toString():null}catch{return null}},"fetchAnsDomainOwner");u();l();var rl=s(async(t,e)=>{try{if(!x.isSuiNetworkID(e))return null;let n=wa(e);return t.toLowerCase().endsWith(".sui")&&await n.resolveNameServiceAddress({name:t})||null}catch{return null}},"fetchSuiNsDomainOwner");function Ro(t,e){let n=t?.toLowerCase(),r=Fo(n,e),i=r.error,o=(0,il.useMemo)(()=>i===pr?ue.t("sendFormErrorInvalidDomain"):i===ia?ue.t("sendFormErrorInvalidSolanaAddress"):i===oa?ue.t("sendFormErrorInvalidTwitterHandle"):i===Ri?ue.t("sendFormErrorInvalidUsername"):"",[i]);return{...r,error:o}}s(Ro,"useResolveDomainOwner");function Fo(t,e){let n=Xs(),r=et(),i=!!t&&!!e,o=X.resolveDomainName(t,e);return q({queryKey:o,queryFn:s(async()=>{if(!t||!e)throw ra;let c=await ol(t,e,n,r);return{address:c?.owner??null,type:c?.type??null,handle:t}},"queryFn"),enabled:i})}s(Fo,"useFetchDomainOwner");var xp=s(async(t,e)=>{try{if(t.startsWith("@")||!x.isEVMNetworkID(e))return null;let[n]=Ks(t);if(n){let r=await Cu(t);if(!r)throw pr;return r}return null}catch(n){return D.captureError(n instanceof Error?n:new Error(`Unable to resolve EVM domain: ${t}`),F.Transaction),null}},"fetchEVMDomainOwner"),Op=s(async(t,e,n)=>{try{if(t.startsWith("@")||!x.isSolanaNetworkID(e))return null;let[r,i,o]=Ls(t);(r||i||o)&&n.capture("resolveDomainBonfida");let a=r||i||o,c=null;if(a&&(c=await Du(t,e),!c))throw pr;return c}catch(r){return D.captureError(r instanceof Error?r:new Error(`Unable to resolve solana domain: ${t}`),F.Transaction),null}},"fetchSolanaDomainOwner"),Np=s(async(t,e,n)=>{try{if(!t.startsWith("@"))return null;let r=t.slice(1),i=await n.getUserProfileByUsername(r),o=i?.username?.toLowerCase()===r.toLowerCase(),a=i?.addresses?i.addresses?.[e]!==void 0:!1,c=!!i&&o&&a,d=null;if(c&&(d=i.addresses[e],!d))throw Ri;return d}catch(r){return D.captureError(r instanceof Error?r:new Error(`Unable to resolve username: ${t}`),F.Auth),null}},"fetchUsernameDomainOwner");async function ol(t,e,n,r){let i=[{type:"username",fetch:Np(t,e,n)},{type:"solana",fetch:Op(t,e,r)},{type:"evm",fetch:xp(t,e)},{type:"ans",fetch:nl(t,e)},{type:"suins",fetch:rl(t,e)}],o=await Promise.all(i.map(({fetch:c})=>c)),a=o.findIndex(c=>c!==null);return a===-1?null:{type:i[a].type,owner:o[a]}}s(ol,"fetchDomainOwner");u();l();var sl=L(Q(),1);function Ip(t,e){let n=Qs(t,500),{data:r,error:i,isLoading:o}=Ro(n,e),c=r?.address??t,d=t.length>0,m=!d||t!==n||o,p=(0,sl.useMemo)(()=>{if(m)return;if(i)return i;if(!ws(c,e))return ue.t("sendFormInvalidAddress",{assetName:x.getChainName(e)})},[e,m,i,c]);return{recipientError:p,currentRecipient:c,isStaleRecipient:m,disabledDueToRecipient:!!p||m||!d,isRecipientLoading:o&&t!==""}}s(Ip,"useRecipient");u();l();var Cp=3,Dp=500,kp=5e3,Rp=s((t,e,n)=>q({async queryFn(){if(x.isEVMNetworkID(t))try{return await Fp(t,e,n)}catch(r){throw D.captureError(r,F.Transaction),r}},queryKey:X.gasEstimationTimeToMine(t,e,n),retry:Cp,retryDelay:Dp,refetchInterval:kp,enabled:x.isEVMNetworkID(t)&&x.isMainnetNetworkID(t)}),"useEvmTimeToMineEstimate");async function Fp(t,e,n){let r=`https://gas-price-oracle.phantom.app/time_to_mine?chainId=${t}&maxFeePerGas=${e}&maxPriorityFeePerGas=${n}`,i={Accept:"application/json","Content-Type":"application/json"},o=await me.headers(i).get(r);if(o.status!==200)throw new Error("Error estimating time to mine");return o.data}s(Fp,"fetchEvmTimeToMineEstimate");u();l();u();l();var Mp=s(({networkID:t,refetchInterval:e,transactionSpeed:n=ye.standard,gasLimit:r,enabled:i=!0})=>{let{data:o,status:a,fetchStatus:c,isError:d,isPending:f,isFetched:m,isSuccess:p}=qt({networkID:t,refetchInterval:e,enableFallback:!0,enabled:i}),h;if(i&&o&&r){let{maxFeePerGas:v,maxPriorityFeePerGas:E}=o[n];h={networkID:t,gasLimit:r,maxFeePerGas:v,maxPriorityFeePerGas:E}}return{status:a,data:h,isError:d,isLoading:f,fetchStatus:c,hasFailed:m&&!p}},"useEvmGasEstimation");u();l();var al=s(t=>{let e=t[0]?.networkID,n=e?x.getChainID(e):null,r=n?nr(n):void 0,{data:i}=Vt({query:{data:r}});return Ms({queries:t.map(a=>({queryKey:X.gasEstimationPrice(e,a),queryFn:s(()=>{if(!i||!a)throw new Error("missing args");return qr(a,i)},"queryFn")}))}).map(a=>a.data)},"useGasEstimationPrices");u();l();var cl=L(Q(),1);var Up=_({days:5}),Bp=s(()=>{let t=et(),e=ae(),{data:n={}}=q({queryKey:X.timestamps(),queryFn:s(()=>({...e.getQueryData(X.timestamps())||{}}),"queryFn")});(0,cl.useEffect)(()=>{let r=Object.values(n),{staleTimestampDatas:i,freshTimestampDatas:o}=r.reduce((c,d)=>{let f=Math.max(...Object.values(d.timestamps));return Date.now()-f>Up?c.staleTimestampDatas.push(d):c.freshTimestampDatas.push(d),c},{staleTimestampDatas:[],freshTimestampDatas:[]});pa(e,i?.map(c=>c.transactionId)??[]);let a=o.filter(c=>c.timestamps.appUpdated);ha(a,t,e)},[n,t,e])},"useLogTimestamps");u();l();var ul=L(Q(),1);var Mo=s((t,e,n=!1)=>{let r=ae();return(0,ul.useCallback)((i,o,a)=>{if(i===void 0)return;let c=X.timestamps(),f=r.getQueryData(c)||{[i]:{chainId:e,transactionType:t,isLedger:n,transactionId:i,timestamps:{}}},m=f[i];if(m?.timestamps[o])return;let p={...f,[i]:{...m||{chainId:e,transactionType:t,isLedger:n,transactionId:i,timestamps:{}},timestamps:{...m?.timestamps??{},[o]:a??Date.now()}}};r.setQueryData(c,p)},[e,n,r,t])},"useMarkTimestamp");u();l();function Lp(t){let e=Ze(),n=bt();return yt({mutationFn:s(async i=>await Er({...i,accountSigner:n,connection:t,storage:e}),"mutationFn")})}s(Lp,"useSignAndSendSolanaTransactionAsync");u();l();var Ln=L(Q(),1);var Kp={[ye.fast]:"gasFast",[ye.standard]:"gasAverage",[ye.slow]:"gasSlow"};function Vp(t,e,n){let[r,i]=(0,Ln.useState)(e),o=n??ya(t),{data:a={}}=qt({networkID:t}),c=(0,Ln.useMemo)(()=>Object.keys(a).reduce((A,V)=>{let G=V,Z=a[G];return Z&&(A[G]=zt(t,Z,o,void 0)),A},{}),[a,t,o]),d=Object.keys(c),f=Object.values(c),m=al(Object.values(c)),p=f.map(A=>vr(A)),{fromUsd:h,formatLocalizedPrice:b}=Dn(),v=d.map((A,V)=>{let G=f[V],Z=m[V],j=p[V];return qp(Z,j,A,G,h,b)});return{presets:(0,Ln.useMemo)(()=>v.map((A,V)=>({description:A,title:ue.t(Kp[d[V]]),selected:r===d[V],onClick:s(()=>i(d[V]),"onClick"),withBorderTop:V!==0})),[v,d,r]),transactionSpeed:r}}s(Vp,"useTransactionSettingsViewState");var qp=s((t,e,n,r,i,o)=>{let a=[],c=t?.gasEstimationPriceUSDNumber?i(t?.gasEstimationPriceUSDNumber):void 0,d=c?o(c,{maximumFractionDigits:4}):void 0,f=d?ue.t("gasUpTo",{amount:d}):e?ue.t("gasUpTo",{amount:e}):void 0;a.push(f);let m=r?Bt.get(r.networkID).transactionSettingsRowFeeDescription?.(r):void 0;a.push(m);let p=r?.networkID;if(p){let h=Bt.get(p).transactionSpeedDescription(n);h&&a.push(ue.t(h))}return a.filter(qs).join("  \u2022  ")},"getSpeedDescriptionString");u();l();function Hp(t){let e=Cn(t?[t]:[]);if(t&&x.isBitcoinNetworkID(t.networkID))return e.pendingTransactions.length===0?void 0:{title:ue.t("sendSummaryBitcoinPendingTxTitle"),description:ue.t("sendSummaryBitcoinPendingTxDescription"),buttonText:ue.t("gotIt")}}s(Hp,"useTxSubmissionCheck");u();l();var ll=L(Q(),1);u();l();var Xr=js(Ze,t=>Ra(new ka(t)));var Qp="transactions-utxo-state",jp=6,$p=600,Gp=_({seconds:30}),zp=_({seconds:5}),Wp=_({minutes:10}),Uo=s(t=>{let e=Xr(),n=Pi("enable-bypass-utxo-protection");return q({queryFn:dl(t,e,n),queryKey:X.utxoState(t,n),enabled:fl(t),retry:jp,retryDelay:$p,refetchInterval:Gp,staleTime:zp,gcTime:Wp})},"useUtxoState");function Yp(t){let e=Xr(),n=ae(),r=Pi("enable-bypass-utxo-protection"),i=X.utxoState(t,r);(0,ll.useEffect)(()=>{fl(t)&&n.prefetchQuery({queryKey:i,queryFn:dl(t,e,r)})},[r,t,n,i,e])}s(Yp,"usePrefetchUtxoState");function dl(t,e,n){return async()=>{try{if(!t)throw new Error("chainAddress not provided when fetching utxo state.");if(Ei(t)){await e.refetchUtxos(t,n);let[r,i]=await Promise.all([e.getSafeToSendUtxos(t.address,n),e.getInscribedUtxos(t.address)]);return{safeToSendUtxos:r,inscribedUtxos:i}}else throw new Error(`Unsupported chain address type for fetching utxo state: ${t.addressType}`)}catch(r){if(Ce(r)){let i=r.response?.status;Fa(r,i,Qp)}throw r}}}s(dl,"queryFn");function fl(t){return!!t&&Ei(t)}s(fl,"enabled");u();l();function Xp(t,e){let n=t?.toLowerCase(),{data:r}=Fo(n,e);return r?.address||t}s(Xp,"useResolveDomainOwnerIfNecessary");u();l();var Jp=s(({networkID:t,gasEstimation:e,gasEstimationPrice:n})=>{let r=vr(e),{fromUsd:i,formatLocalizedPrice:o}=Dn(),a=n?.gasEstimationPriceUSDNumber?i(n?.gasEstimationPriceUSDNumber):void 0,c=a?o(a,{maximumFractionDigits:4}):void 0,d=!x.isMainnetNetworkID(t),f=c&&!d?c:r||void 0;return Bt.get(t).networkFeeRowString(f,c)},"useNetworkFee");u();l();var ml=L(Q(),1);function Zp(t,e,n){let r=t.data.transactions[t.data.transactions.length-1],i=Cn(n?.addresses||[]),o=t.networkID;(0,ml.useEffect)(()=>{let A=i.pendingTransactions.find(V=>V.id===t.id);(!A||A.data.transactions.some(V=>V.confirmations>0))&&e()},[i.pendingTransactions,e,t]);let a={networkID:o,unsignedTransaction:r.unsignedTransaction},{data:c,status:d}=bo({networkID:o,transactionSpeed:ye.fast,multichainTransaction:a,queryOptions:{refetchInterval:!1}}),f=new Y(r.unsignedTransaction.maxFeePerGas??"0"),m=c?.maxFeePerGas&&c?.maxFeePerGas.gt(f)?c?.maxFeePerGas:f,p=new Y(r.unsignedTransaction.maxPriorityFeePerGas??"0"),h=c?.maxPriorityFeePerGas&&c?.maxPriorityFeePerGas.gt(p)?c?.maxPriorityFeePerGas:p,b=m?.multipliedBy(1.11).integerValue(),v=h?.multipliedBy(1.11).integerValue();return{data:zt(o,{maxFeePerGas:b,maxPriorityFeePerGas:v},{gasLimit:new Y(r.unsignedTransaction.gas??"0")},c?.l1Fee),status:d}}s(Zp,"useReplacementEvmTransactionGasEstimate");u();l();var eh=s(()=>{let t=Us.getMultivariateAssignment("frontend-transaction-sharing-delay-ms");if(!t)return Ui;let e=parseInt(t);return Number.isNaN(e)?Ui:e},"getTransactionSharingDelay"),th=s(()=>({delayMs:eh()}),"useTransactionSharingConfig");u();l();u();l();var pl=s(async(t,e,n)=>{let{accountIdentifier:r,nonce:i,pendingTransaction:o,pendingTransactionInput:a,gasEstimation:c}=e,{data:{transactions:d}}=o,f=d[d.length-1],{callPayload:m,unsignedTransaction:p}=f,{networkID:h}=o,b=await wr({accountSigner:t,accountIdentifier:r,networkID:h,unsignedTransaction:{...p,...xa(c),nonce:Ua(new Y(i))},callPayload:{...m},pendingTransactionInput:a,storage:n});return{networkID:h,id:b}},"speedUpEvmTransaction");function nh(){let t=bt(),e=Ze();return yt({mutationFn:s(async r=>pl(t,r,e),"mutationFn")})}s(nh,"useSpeedUpEvmTransaction");u();l();function rh(t,e,n){let r=et(),i=!!e,o=X.waitForTransactionConfirmation(e);return q({enabled:i,queryKey:o,queryFn:s(async()=>{if(!e){let c="Missing chainID or transactionReceipt.";throw new Error(c)}try{if(x.isSolanaNetworkID(e.networkID)){let c=Gt(e.networkID);await $a({connection:c,signature:e.id})}else if(x.isEVMNetworkID(e.networkID))await ua(e.networkID,e.id);else if(x.isBitcoinNetworkID(e.networkID))await Ma(e.networkID,e.id);else if(x.isSuiNetworkID(e.networkID))await La(e.networkID,e.id);else throw new Error("Unsupported transaction receipt type.");return t(e),!0}catch(c){if(c&&c instanceof sa)throw n?.(e,c),c;let d="Unable to send transaction.";c.message&&(d=c.message);let{networkID:f}=e,m={chainId:x.getChainID(f),networkId:f};r.capture("waitForTransactionConfirmationError",{data:{...m,errorMessage:c.message}});let p=new Error(d);throw n?.(e,p),p}},"queryFn")})}s(rh,"useWaitForTransactionConfirmation");u();l();var ih=s(t=>{let e=t.transaction.getData();return q({queryKey:X.suiTransaction(e),queryFn:s(async()=>{try{return await Ka(t)}catch(n){throw D.addBreadcrumb(F.Transaction,`Sui tx build failed (${t.networkID}): ${n instanceof Error?n.message:"Unknown error"}`,z.Error),D.captureError(n,F.Transaction),n}},"queryFn")})},"useSuiTransaction");u();l();var oh=/[e+\-]/i;function sh(t,e){let n=Math.floor(t*e*100)/100;return!Number.isFinite(n)||oh.exec(n.toString())?0:n}s(sh,"assetToDollars");function ah(t,e,n){let r=B(t);return e<=0||!r.isFinite()?0:r.dividedBy(e).decimalPlaces(n).toNumber()}s(ah,"dollarsToAsset");u();l();u();l();function Bo({balance:t,priceId:e,priceMap:n}){let r=e?n[e]?.usd:void 0,i=e?n[e]?.usd_24h_change:void 0;if(r===void 0)return{usd:void 0,usd_24h_change:void 0,price:r};let o=t.multipliedBy(r),a;return i!==void 0&&(a=o.minus(o.dividedBy(1+i/100))),{usd:o.toNumber(),usd_24h_change:a?.toNumber(),price:r,priceChange24h:i,currencyValue:o.toNumber(),currencyChange:a?.toNumber()}}s(Bo,"calculatePriceData");u();l();u();l();var at=L(Q());u();l();function hl(t){let e,n;for(let{data:r}of t){let{usd:i,usd_24h_change:o}=r;i!==void 0&&(e=e!==void 0?e+i:i),o!==void 0&&(n=n!==void 0?n+o:o)}return{value:e,earnings:n}}s(hl,"calculatePortfolio");u();l();function yl(t,e){return t.getQueriesData({predicate:s(r=>r.queryKey[0]===Za.transferFungibleLoggingContext,"predicate")}).map(([,r])=>r).filter(r=>{if(!r)return!1;let{previousBalance:i,fungibleKey:o}=r,a=e.get(o);return a?!a.data.balance.isEqualTo(i):!1})}s(yl,"checkForExpectedAppUpdates");u();l();var gl=s((t,e)=>{let n=Ee.transferFungibleLoggingContext(t);e.removeQueries({queryKey:n})},"removeLoggingContext");u();l();function bl({tokens:t,priceMap:e}){let n=[];for(let r of t){let{amount:i,decimals:o}=r.data,a=Or(r),c=ne(a),d=xr(r),f=wn(i,o),m={type:r.type,data:{...r.data,balance:f,key:d}},p,h=Bo({priceId:c,balance:f,priceMap:e});if(r.type===U.SPL||r.type===U.CompressedSPL){let{mintAddress:b}=r.data;p=b}else if(r.type===U.ERC20||r.type===U.SuiCoin){let{contractAddress:b}=r.data;p=b}else if(r.type===U.BRC20){let{firstCreatedInscriptionId:b}=r.data;p=b}m.data.tokenAddress=p,m.data.usd=h.usd,m.data.price=h.price,m.data.usd_24h_change=h.usd_24h_change,m.data.priceChange24h=h.priceChange24h,m.data.currencyChange=h.currencyChange,m.data.currencyValue=h.currencyValue,n.push(m)}return n}s(bl,"tokensToFungibles");function Qt({showHiddenMints:t=!1,keys:e,fungibleAddresses:n,enablePrices:r=!0,enableSorting:i=!0,usePricesQueryOptions:o,useTokenQueryOptions:a}={}){let{data:c}=tt(),{data:d=[],isPending:f,isRefetching:m,refetch:p,error:h}=tc({chainAddresses:c?.addresses,keys:e,fungibleAddresses:n,queryOptions:a}),b=h!==null,v=vc(c?.identifier),{query:E}=(0,at.useMemo)(()=>({query:{data:d.map(Or)}}),[d]),{data:A,isPending:V,isRefetching:G,refetch:Z,isError:j}=mo({query:E,enabled:r&&!f&&c?.identifier!=null,queryOptions:o}),{fungibles:H,fungibleMap:R}=(0,at.useMemo)(()=>{let N=t?d:d.filter(C=>{let $=xr(C),W=(e||[]).includes($),de=lt(v,{key:$,spamStatus:C.data.spamStatus});return W||de}),I=bl({tokens:N,priceMap:A??{}});i&&(e===void 0?I=I.sort(nc):I=I.sort((C,$)=>{let W=e.indexOf(C.data.key),de=e.indexOf($.data.key);return W<de?-1:W>de?1:0}));let k=new Map;for(let C of I)k.set(C.data.key,C);return{fungibles:I,fungibleMap:k}},[d,e,t,v,A,i]),Pe=(0,at.useMemo)(()=>!!v&&v.size>0&&d.length>0&&H.length===0,[d,v,H]),ke=ae(),Ye=(0,at.useMemo)(()=>yl(ke,R),[R,ke]),Ie=Mo("send:fungible",kt.Solana.Mainnet);(0,at.useEffect)(()=>{for(let N of Ye)Ie(N.transactionId,"appUpdated"),gl(N.fungibleKey,ke)},[Ye,Ie,ke]);let P=(0,at.useMemo)(()=>hl(H),[H]),S=(0,at.useCallback)(async()=>{await Promise.all([p(),Z()])},[p,Z]);return{fungibles:H,portfolio:P,visibilityOverrides:v,isHidingAllFungibles:Pe,isLoadingTokens:f,isLoadingPrices:r?V:!1,isRefetchingTokens:m,isRefetchingPrices:r?G:!1,isErrorTokens:b,tokensError:h,isErrorPrices:j,refetch:S}}s(Qt,"useGetFungibleBalances");function ch({key:t,fungibleAddresses:e,splTokenAccount:n,...r}){let{fungibles:i,...o}=Qt({...r,keys:t?[t]:[],fungibleAddresses:e}),a;return i.length===1?a=i[0]:i.length>1&&n?a=i.find(c=>c.type===U.SPL&&c.data.splTokenAccountPubkey===n):i.length>1&&(a=i.filter(c=>c.type===U.SPL).reduce((c,d)=>!c||d.data.balance.gt(c.data.balance)?d:c,void 0)),{fungible:a,...o}}s(ch,"useGetFungibleBalance");u();l();var dn=L(Q());u();l();u();l();function uh(t,e){if(t.type==="native"&&e.type!=="native")return-1;if(t.type!=="native"&&e.type==="native")return 1;if(t.type==="native"&&e.type==="native"){let n=hn((t.name??"").toLowerCase()),r=hn((e.name??"").toLowerCase());return n<r?-1:n>r?1:0}}s(uh,"sortNativeTokensFirst");function lh(t,e){if(!t&&e)return 1;if(t&&!e)return-1}s(lh,"sortTokensWithValidPrice");function vl(t,e){if(t&&!e)return-1;if(!t&&e)return 1;if(!t||!e)return 0;let n=hn(t.toLowerCase()),r=hn(e.toLowerCase());return n<r?-1:n>r?1:0}s(vl,"sortByString");function Tl(t,e){if(t!==e)return e-t}s(Tl,"sortByNumber");function Jr(t,e){let n=t.livePrice?.price,r=e.livePrice?.price,i=lh(n,r);if(i)return i;let o=t.totalQuantity/10**t.decimals,a=e.totalQuantity/10**e.decimals;if(!n&&!r){let p=uh(t,e);if(p)return p;let h=Tl(o,a);if(h)return h;let b=vl(t.name,e.name);return b||0}let c=(n??0)*o,d=(r??0)*a,f=Tl(c,d);if(f)return f;let m=x.compareNetworkID(t.decodedCaip19.chainId,e.decodedCaip19.chainId);return m||(vl(t.name,e.name)??0)}s(Jr,"compareTokensByValue");u();l();u();l();var an=O(new Fs);function Lo(){return Lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lo.apply(this,arguments)}s(Lo,"i");y.NODE_ENV!=="production"&&(an.debugPrivate=!0);var dh=s((t,e,n)=>t?.suspense&&fh(e,n),"a"),fh=s((t,e)=>t.isPending&&!e,"p"),mh=s(({result:t,throwOnError:e,query:n})=>t.isError&&!t.isFetching&&ph(e,[t.error,n]),"d");function ph(t,e){return typeof t=="function"?t(...e):!!t}s(ph,"E");var hh=s(t=>t.suspense&&typeof t.staleTime!="number"?Lo({},t,{staleTime:1e3}):t,"l");function wl(t,e,n=r=>r(an)){let r=O(0),i=O(n);y.NODE_ENV!=="production"&&(i.debugPrivate=!0);let o=O(()=>new WeakMap);y.NODE_ENV!=="production"&&(o.debugPrivate=!0);let a=O(f=>{let m=f(i),p=t(f),h=m.defaultQueryOptions(p),b=f(o).get(m);return h._optimisticResults="optimistic",b&&b.setOptions(h,{listeners:!1}),hh(h)});y.NODE_ENV!=="production"&&(a.debugPrivate=!0);let c=O(f=>{let m=f(i),p=f(a),h=f(o),b=h.get(m);if(b)return b;let v=new e(m,p);return h.set(m,v),v});y.NODE_ENV!=="production"&&(c.debugPrivate=!0);let d=O(f=>{let m=f(c),p=f(a),h=m.getOptimisticResult(p),b=O(h);return y.NODE_ENV!=="production"&&(b.debugPrivate=!0),b.onMount=v=>{let E=m.subscribe(cr.batchCalls(v));return()=>{m.getCurrentResult().isError&&m.getCurrentQuery().reset(),E()}},b});return y.NODE_ENV!=="production"&&(d.debugPrivate=!0),O(f=>{f(r);let m=f(c),p=f(a),h=f(f(d));if(dh(p,h,!1))return m.fetchOptimistic(p);if(mh({result:h,query:m.getCurrentQuery(),throwOnError:p.throwOnError}))throw h.error;return h},(f,m)=>{m(r,p=>p+1)})}s(wl,"b");function Zr(t,e=n=>n(an)){return wl(t,ks,e)}s(Zr,"O");function El(t,e=n=>n(an)){return wl(t,Rs,e)}s(El,"g");u();l();var nC=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Ko=s((t,e,n)=>(e.has(n)?e:e.set(n,t())).get(n),"getCached$2"),yh=new WeakMap,gh=s((t,e,n,r)=>{let i=Ko(()=>new WeakMap,yh,e),o=Ko(()=>new WeakMap,i,n);return Ko(t,o,r)},"memo3");function qe(t,e,n=Object.is){return gh(()=>{let r=Symbol(),i=s(([a,c])=>{if(c===r)return e(a);let d=e(a,c);return n(c,d)?c:d},"selectValue"),o=O(a=>{let c=a(o),d=a(t);return i([d,c])});return o.init=r,o},t,e,n)}s(qe,"selectAtom");var bh=s(t=>typeof t?.then=="function","isPromiseLike");function vh(t=()=>{try{return self.localStorage}catch(n){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(n);return}},e){var n;let r,i,o={getItem:s((d,f)=>{var m,p;let h=s(v=>{if(v=v||"",r!==v){try{i=JSON.parse(v,e?.reviver)}catch{return f}r=v}return i},"parse"),b=(p=(m=t())==null?void 0:m.getItem(d))!=null?p:null;return bh(b)?b.then(h):h(b)},"getItem"),setItem:s((d,f)=>{var m;return(m=t())==null?void 0:m.setItem(d,JSON.stringify(f,e?.replacer))},"setItem"),removeItem:s(d=>{var f;return(f=t())==null?void 0:f.removeItem(d)},"removeItem")},a=s(d=>(f,m,p)=>d(f,h=>{let b;try{b=JSON.parse(h||"")}catch{b=p}m(b)}),"createHandleSubscribe"),c;try{c=(n=t())==null?void 0:n.subscribe}catch{}return!c&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(c=s((d,f)=>{if(!(t()instanceof self.Storage))return()=>{};let m=s(p=>{p.storageArea===t()&&p.key===d&&f(p.newValue)},"storageEventCallback");return self.addEventListener("storage",m),()=>{self.removeEventListener("storage",m)}},"subscriber")),c&&(o.subscribe=a(c)),o}s(vh,"createJSONStorage");var rC=vh();u();l();u();l();u();l();var Th=s(t=>{let e=_r(t);if(nt(e))return e===U.BitcoinNative,e;if(e===U.SPL&&t.resourceType===he.address||e===U.ERC20&&t.resourceType===he.address)return t.address;if(e===U.BRC20&&t.resourceType===he.address)return`${t.address}-${ps[0]}`;if(e===U.SuiCoin&&t.resourceType===he.address)return t.address},"getLegacyKey"),Sl=Th;function wh({caip19:t,...e}){let n=Be(t);return{...e,type:t.includes("/nativeToken:")?"native":"fungible",chainName:x.getChainName(n.chainId).toLowerCase(),encodedCaip19:t,decodedCaip19:n,legacyKey:Sl(n)??t}}s(wh,"getDerivedCaip19Values");var xt=wh;var Eh=g.object({account:g.string(),quantity:g.number(),quantityString:g.string()}),Kn=g.object({address:g.string(),quantity:g.number(),quantityString:g.string(),lastTransferredDate:g.coerce.date().nullish(),subaccounts:g.array(Eh).optional()}),cn=g.object({price:g.number(),priceChange24h:g.number().optional(),lastUpdatedAt:g.coerce.date(),marketCap:g.number().optional()}).nullish(),Al=g.object({id:g.string(),name:g.string(),imageUri:g.string().nullish().transform(t=>t??""),numTokens:g.number()}),ei=g.object({compression:g.object({compressed:g.boolean()}).optional(),creators:g.array(g.object({address:g.string(),share:g.number(),verified:g.boolean()})).nullish(),tokenProgram:g.string().nullish(),extensions:Hs(Ga).nullish()}),_l=Sr,OC=g.object({totalValueUsdCentsCurrent:g.number().optional(),totalValueUsdStringCurrent:g.string().optional(),totalValueUsdCents24h:g.number().optional(),totalValueUsdString24h:g.string().optional(),totalPercentChange24h:g.number().optional()}),Pl=g.object({name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),logoUri:g.string().nullish(),extraMetadata:ei.optional(),price:cn}),Vo=Pl.extend({type:g.enum(["native","fungible"]),encodedCaip19:g.string(),decodedCaip19:Ts,spamStatus:_l,chainName:g.string(),legacyKey:g.string()}),Sh=Pl.extend({caip19:g.string(),spamStatus:_l.nullish().transform(t=>t??ut.NotVerified)}),xl=g.union([Sh.transform(t=>xt(t)),Vo]),Ol=Vo.extend({totalQuantity:g.number(),totalQuantityString:g.string(),walletAddress:g.string().optional(),queriedWalletBalances:g.array(Kn),livePrice:cn}),qo=Vo.extend({timestamp:g.string().nullish(),totalQuantityString:g.string(),totalQuantity:g.number(),queriedWalletBalances:g.array(Kn)}),NC=qo.extend({id:g.string()});u();l();u();l();u();l();function Ne(t){let e=O(0),n=O(()=>({i:0}),(d,f)=>{let m=d(n);return Object.assign(m,{m:!0,peek:d,set:f}),f(e,p=>p+1),()=>{m.m=!1,a(m),c(m)}});n.onMount=d=>d();let r=O(d=>{d(e);let f=d(n);if(!f.m||f.irc||f.i&&!f.irf)return f.p;c(f);let m=new Map,p=s(E=>{let A=d(E);return m.set(E,A),A},"getter");p.peek=f.peek;let h=s((...E)=>{try{return++f.i,f.set(...E)}finally{Array.from(m.keys(),d),--f.i}},"setter");h.recurse=(E,...A)=>{if(f.fc){if(y.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return f.irc=!0,f.set(E,...A)}finally{f.irc=!1,Array.from(m).some(b)&&o(f)}};function b([E,A]){return d(E)!==A}s(b,"areDifferent"),++f.i;function v(){try{if(f.irf=!1,!f.m)return;a(f),f.c=i.effect(p,h)}catch(E){f.e=E,o(f)}finally{f.p=void 0,--f.i}}return s(v,"runEffect"),f.irf?v():f.p=Promise.resolve().then(v)});if(y.NODE_ENV!=="production"){let d=function(f,m){Object.defineProperty(f,"debugLabel",{get:s(()=>`${i.debugLabel??"effect"}:${m}`,"get")}),f.debugPrivate=!0};s(d,"setLabel"),d(e,"refresh"),d(n,"ref"),d(r,"base")}let i=O(d=>void d(r));return i.effect=t,i;function o(d){try{d.irf=!0,d.set(e,f=>f+1)}finally{d.irf=!1}}s(o,"refresh");function a(d){if(typeof d.c=="function")try{d.fc=!0,d.c()}finally{d.fc=!1,d.c=void 0}}s(a,"cleanup");function c(d){if("e"in d){let f=d.e;throw delete d.e,f}}s(c,"throwPendingError")}s(Ne,"atomEffect");u();l();var Ah=s(()=>{if(typeof self>"u")return!1;try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(t){return console.error("Error checking for extension context:",t),!1}},"isExtensionContext"),Ho=class{static{s(this,"ExtensionStorage")}browser;storage;constructor(e){if(!e||!e.storage||!e.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=e,this.storage=this.browser.storage.local}async get(e){try{let r=(await this.storage.get(e))[e];return r==null||typeof r!="string"?null:JSON.parse(r)}catch(n){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${e}):`,n),null}}async getAll(e){try{let n=await this.storage.get(e),r={};for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=n[i];if(o==null||typeof o!="string")r[i]=null;else try{r[i]=JSON.parse(o)}catch(a){console.error(`[ExtensionStorage.getAll] Error parsing key (${i}):`,a),r[i]=null}}return r}catch(n){let r=`[ExtensionStorage.getAll] Error getting keys (${e}): ${n}`;throw console.error(r),new Error(r)}}async remove(e){try{await this.storage.remove(e)}catch(n){let r=`[ExtensionStorage.remove] Error removing key(s) (${e}): ${n}`;throw console.error(r),new Error(r)}}async set(e,n){try{let r=JSON.stringify(n);await this.storage.set({[e]:r})}catch(r){let i=`[ExtensionStorage.set] Error setting/stringifying key (${e}): ${r}`;throw console.error(i),new Error(i)}}async setAll(e){try{let n={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=JSON.stringify(e[r]));await this.storage.set(n)}catch(n){let i=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(e)}): ${n}`;throw console.error(i),new Error(i)}}async update(e,n){if(!navigator.locks){let r=await this.get(e),i=await n(r);i===null?await this.remove(e):await this.set(e,i);return}try{await navigator.locks.request(`storage.${e}`,async r=>{let i=await this.get(e),o=await n(i);o===null?await this.remove(e):await this.set(e,o)})}catch(r){let i=`[ExtensionStorage.update] Error updating key (${e}): ${r}`;throw console.error(i),new Error(i)}}async clear(){try{await this.storage.clear()}catch(e){let n=`[ExtensionStorage.clear] Error clearing storage: ${e}`;throw console.error(n),new Error(n)}}},ti=class{static{s(this,"WebLocalStorage")}_storage;get storage(){if(!this._storage){if(typeof self>"u")throw new Error("WebLocalStorage requires window.localStorage");this._storage=self.localStorage}return this._storage}async get(e){try{let n=this.storage.getItem(e);return n===null||typeof n!="string"?null:JSON.parse(n)}catch(n){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${e}):`,n),null}}async getAll(e){let n={},r=e??Object.keys(this.storage);for(let i of r)try{let o=this.storage.getItem(i);if(e&&o===null)continue;if(o===null||typeof o!="string")n[i]=null;else try{n[i]=JSON.parse(o)}catch(a){console.error(`[WebLocalStorage.getAll] Error parsing key (${i}):`,a),n[i]=null}}catch(o){console.error(`[WebLocalStorage.getAll] Error reading key (${i}) from storage:`,o),e||(n[i]=null)}return n}async remove(e){try{let n=Array.isArray(e)?e:[e];for(let r of n)this.storage.removeItem(r)}catch(n){let r=`[WebLocalStorage.remove] Error removing key(s) (${e}): ${n}`;throw console.error(r),new Error(r)}}async set(e,n){try{let r=JSON.stringify(n);this.storage.setItem(e,r)}catch(r){let i=`[WebLocalStorage.set] Error setting/stringifying key (${e}): ${r}`;throw console.error(i),new Error(i)}}async setAll(e){let n=!1,r=Object.keys(e);for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))try{await this.set(i,e[i])}catch{n=!0}if(n)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${r})`)}async update(e,n){if(!navigator.locks){let r=await this.get(e),i=await n(r);i===null?await this.remove(e):await this.set(e,i);return}try{await navigator.locks.request(`storage.${e}`,async r=>{let i=await this.get(e),o=await n(i);o===null?await this.remove(e):await this.set(e,o)})}catch(r){let i=`[WebLocalStorage.update] Error updating key (${e}): ${r}`;throw console.error(i),new Error(i)}}async clear(){try{this.storage.clear()}catch(e){let n=`[WebLocalStorage.clear] Error clearing storage: ${e}`;throw console.error(n),new Error(n)}}},Qo=class{static{s(this,"LocalStorage")}initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(e=>{console.error("LocalStorage initialization failed:",e)})}async _initialize(){if(!this.storageImpl&&!(typeof self>"u"))if(Ah())try{let n=(await import("./browser-polyfill-52YP62EY.js")).default;if(!n||!n.storage||!n.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Ho(n)}catch{this.storageImpl=new ti}else this.storageImpl=new ti}async ensureInitialized(){if(await this.initPromise,!this.storageImpl&&typeof self<"u"&&await this._initialize(),!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed or is not available in this context.")}async get(e){return await this.ensureInitialized(),this.storageImpl.get(e)}async getAll(e){return await this.ensureInitialized(),this.storageImpl.getAll(e)}async remove(e){return await this.ensureInitialized(),this.storageImpl.remove(e)}async set(e,n){return await this.ensureInitialized(),this.storageImpl.set(e,n)}async setAll(e){return await this.ensureInitialized(),this.storageImpl.setAll(e)}async update(e,n){return await this.ensureInitialized(),this.storageImpl.update(e,n)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},jo=new Qo;u();l();u();l();var Vn=class{static{s(this,"PersistentStore")}namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(e){this.namespaceKey=e.namespaceKey,this.ttlMilliseconds=e.ttlMilliseconds,this.storage=e.storage,this.onError=e.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(n=>{console.error("Failed to load data",n)})}async _load(){if(!this.isLoaded){try{let e=await this.storage.get(this.namespaceKey);e?(this.data=e,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(e){this.onError?.(e instanceof Error?e:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(e){this.onError?.(e instanceof Error?e:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let e=Date.now(),n=!1;for(let r in this.data)Object.prototype.hasOwnProperty.call(this.data,r)&&this.data[r].expiresAt<=e&&(delete this.data[r],n=!0);return n}_updateExpiration(e){return this.data[e]?(this.data[e].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(e,n){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[e]={value:n,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(e,n){this.isLoaded||await this._load();let r=this._cleanupExpired(),i=this.data[e];if(!i)return r&&await this._save(),null;let o=this._updateExpiration(e),a=n.safeParse(i.value);return a.success?((r||o)&&await this._save(),a.data):(this.onError?.(new ht(a.error.issues),`get (validation failed for key: ${e})`),delete this.data[e],await this._save(),null)}async remove(e){let n=this._cleanupExpired(),r=!1;Object.prototype.hasOwnProperty.call(this.data,e)&&(delete this.data[e],r=!0),(n||r)&&await this._save()}async clear(){this.data={},await this._save()}};var Nl=new Map;function _h({storage:t,namespaceKey:e,ttlMs:n}){let r=Nl.get(e);if(r)return r;if(!t)throw new Error("Storage is required");let i=new Vn({storage:t,namespaceKey:e,ttlMilliseconds:n,onError:s((o,a)=>{console.error(`[PersistentStore Error - ${a}]:`,o.message),o instanceof ht&&console.error("Zod Issues:",o.issues)},"onError")});return Nl.set(e,i),i}s(_h,"getDataStorage");var $o=_h;function Ph({atomToStoreOffline:t,namespaceKey:e,ttlMs:n,initialValue:r,schema:i,...o}){let a=O({status:"pending",value:r}),c=O(p=>{if("offlineKey"in o)return p(o.offlineKey);let h=p(t);if("offlineKey"in h&&typeof h.offlineKey=="string")return h.offlineKey;throw new Error("No key provided")}),d=Ne((p,h)=>{$o({storage:jo,namespaceKey:`.offline.${e}`,ttlMs:n}).get(p(c),i).then(b=>{b&&h(a,{status:"offline",value:b})}).catch(b=>{console.error(b)})}),f=Ne((p,h)=>{p(c),h(a,{status:"pending",value:r})}),m=Ne((p,h)=>{let b=p(t),v=p(c);b.status==="success"&&b.data&&b.data!==p(a).value&&(h(a,{status:"live",value:b.data}),$o({storage:jo,namespaceKey:`.offline.${e}`,ttlMs:n}).set(v,b.data).catch(E=>{D.addBreadcrumb(F.Tokens,"Error storing offline data",z.Error,{namespaceKey:e,error:E.toString()})}))});return qe(O(p=>{let h=p(t);p(f),p(d),p(m);let b=p(a);return h.data?{status:"live",value:h.data}:{status:"offline",value:b.value}}),p=>p.value)}s(Ph,"atomWithOfflineStorage");var ni=Ph;u();l();u();l();var xh=Sr,Go=g.object({caip19:g.string(),name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),spamStatus:xh.nullish().transform(t=>t??ut.NotVerified),logoUri:g.string().nullish()}),Il=Go.extend({totalQuantity:g.number(),totalQuantityString:g.string(),queriedWalletBalances:g.array(Kn),extraMetadata:ei.optional(),price:cn}),Cl=Il.transform(xt),Dl=g.object({items:g.array(Il),cursor:g.string().nullish().default(null),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}).transform(t=>{let{items:e,cursor:n,errors:r,...i}=t;return{...i,nextCursor:n,tokens:e,errors:r||[],updatedAt:Date.now()}}),kl=Go.extend({id:g.string(),timestamp:g.string().nullish(),postQuantityString:g.string(),postQuantity:g.number(),price:cn,queriedWalletBalances:g.array(Kn)}),Rl=kl.transform(t=>{let{postQuantity:e,postQuantityString:n,...r}=xt(t);return{...r,totalQuantity:e,totalQuantityString:n}}),Fl=g.object({cursor:g.string().nullish().default(null),items:g.array(kl)}).transform(t=>({nextCursor:t.cursor,transfers:t.items})),Ml=g.object({totalValueUsdCentsCurrent:g.number(),totalValueUsdStringCurrent:g.string(),totalValueUsdCents24h:g.number(),totalValueUsdString24h:g.string(),totalPercentChange24h:g.number(),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}),zo=Go.extend({createdDate:g.coerce.date().nullish().default(null),extraMetadata:ei.extend({id:g.string().nullish().default(null),description:g.string().nullish().default(null),marketCap:g.coerce.number().optional(),circulatingSupply:g.coerce.number().optional(),totalSupply:g.coerce.number().optional(),liquidity:g.coerce.number().optional(),holders:g.coerce.number().optional(),links:g.array(g.object({type:g.string(),url:g.string()})).optional(),volume24hUSD:g.coerce.number().optional(),volume24hUSDChangePercentage:g.coerce.number().optional(),trades24h:g.coerce.number().optional(),trades24hChangePercentage:g.coerce.number().optional(),uniqueWallets24h:g.coerce.number().optional(),uniqueWallets24hChangePercentage:g.coerce.number().optional(),top10HoldersPercent:g.coerce.number().optional(),mintable:g.boolean().optional(),freezable:g.boolean().optional(),mutableMetadata:g.boolean().optional(),ownershipRenounced:g.boolean().optional(),updateAuthority:g.string().optional(),createdDate:g.string().datetime().nullish().default(null)}).optional(),categories:g.array(Al).optional().default([]),price:cn}),Ul=zo.transform(xt);u();l();function Wo(t){return x.isBitcoinNetworkID(t.decodedCaip19.chainId)&&t.decodedCaip19.resourceType===he.nativeToken?t.queriedWalletBalances.map(n=>{let r=Xa(t.decodedCaip19.chainId,n.address);if(!r)throw new Error("No legacy key found for bitcoin native token");return{...t,legacyKey:r,queriedWalletBalances:[n],totalQuantity:n.quantity,totalQuantityString:n.quantityString,walletAddress:n.address}}):[t]}s(Wo,"explodeBitcoinToken");var Bl=s(t=>e=>e.map(n=>t.parse(n)),"createSimpleMapper"),Oh=s(t=>Bl(t),"createTokenMapper"),_D=Oh(xl),Nh=s(t=>e=>e.flatMap(n=>{let r=t.parse(n);return Wo(r)}),"createTokenBalanceMapper"),Ll=Nh(Cl),Ih=s(t=>Bl(t),"createTokenBalanceUpdateMapper"),Kl=Ih(Rl);async function Ch(t){let e={walletAddresses:t.walletCaip19s.join(","),includePrices:"true"};"cursor"in t&&(e.cursor=t.cursor),"fromMicroseconds"in t?e.fromTimestamp=t.fromMicroseconds.toString():"from"in t&&(e.fromTimestamp=t.from.toString());let n=await me.api().timeout(_({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:e}).then(r=>{if(Je(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText||`Status: ${r.status}`,{cause:r.data?.code??r.data?.name})}).catch(r=>{throw Ce(r)||(D.addBreadcrumb(F.Tokens,"getTokenBalanceUpdates",z.Error,{message:r.message,cause:r.cause,...e}),D.captureError(r,F.Tokens)),r});try{return Fl.parse(n)}catch(r){throw r instanceof ht&&D.addBreadcrumb(F.Tokens,"getTokenBalanceUpdates parse error",z.Error,{message:r.message,...r.issues?{issues:JSON.stringify(r.issues)}:{},result:JSON.stringify(n)}),r}}s(Ch,"getTokenBalanceUpdates");async function ri(t){let e=[],n=s(()=>e.at(-1)?.nextCursor,"getNextCursor");do{let r=n(),i=await Ch(r?{walletCaip19s:t.walletCaip19s,cursor:r}:t);e.push(i)}while(n());return Kl(e.flatMap(r=>r.transfers))}s(ri,"getTokenBalanceUpdatesAll");u();l();var Dh="25.13.0",qn=`fungible-tokens-${Dh}`,Vl=[qn,"token-updates"];var ql=[qn,"portfolio-value"],kh=[qn,"token-balance"],Hl=[qn,"infinite-token-balances"],Rh=[qn,"visibility-overrides"],He={infiniteTokenBalances:s(({walletCaip19s:t})=>[...Hl,{walletCaip19s:t}],"infiniteTokenBalances"),tokenBalance:s(({wallets:t,encodedCaip19:e,isSplCompressed:n})=>{let r=t.map(i=>typeof i=="string"?i:ne({chainId:i.networkID,address:i.address,resourceType:he.address})).sort();return[...kh,{walletCaip19s:r,encodedCaip19:e,isSplCompressed:n}]},"tokenBalance"),tokenUpdates:s(({walletCaip19s:t,from:e})=>[...Vl,{walletCaip19s:t,from:e}],"tokenUpdates"),portfolioValue:s(({walletCaip19s:t,include:e,exclude:n,isMainnet:r})=>[...ql,{walletCaip19s:t,include:e,exclude:n,isMainnet:r}],"portfolioValue"),visibilityOverrides:s(({accountId:t})=>[...Rh,{accountId:t}],"visibilityOverrides"),tokenDetails:Pr.tokenDetails};u();l();u();l();function Fh(t){let e=_r(t.decodedCaip19);return e===U.SPL?t.extraMetadata?.compression?.compressed||"queriedWalletBalances"in t&&t.queriedWalletBalances.some(n=>!n.subaccounts?.length)?U.CompressedSPL:U.SPL:e}s(Fh,"getTokenTypeFromToken");var Ql=Fh;function Yo({newUpdates:t,existingUpdates:e={}}){return t.reduce((n,r)=>n[r.encodedCaip19]?.totalQuantityString===r.totalQuantityString?n:Ql(r)===U.CompressedSPL?{...n,[`${r.encodedCaip19}-compressed`]:r}:r?{...n,[r.encodedCaip19]:r}:n,e)}s(Yo,"aggregateUpdates");u();l();function Mh(t){let e=t.match(/^(.+\d{2}:\d{2}:\d{2})\.(?<fraction>\d{1,9})Z$/);if(!e||!e.groups?.fraction)throw new Error("Invalid date format");let n=new Date(t).getTime(),o=e.groups.fraction.padEnd(6,"0").slice(-3);return n*1e3+parseInt(o,10)}s(Mh,"getMicrosecondsFromTimestamp");var un=Mh;u();l();var Uh=1e3,jl=5e3,Hn=Math.ceil(jl*2.25);function Qn(t){return _(t)*1e3}s(Qn,"toMicroseconds");function Bh(t){if(!t?.length)return null;let e=new Date(Date.now()-Hn).toISOString();return Math.floor(Math.max(...t.map(({timestamp:n})=>un(n||e))))}s(Bh,"getLastTimestamp");function ii(t){let e=Bh(t);return e?e-Qn({seconds:1}):null}s(ii,"getNextTimestamp");function oi(t){return Math.min(Math.max(t*250,Uh),jl)}s(oi,"calculatePollingInterval");u();l();var Lh=O(!1),si=Lh;u();l();u();l();u();l();var Xo=_({minutes:5}),jn=0;function $l(){if(!jn){jn=Math.floor(Math.random()*1e6);return}jn++}s($l,"incrementTokensBalancesCacheBust");async function Gl({walletCaip19s:t,fungibleCaip19s:e,cursor:n,cacheBust:r}){let i={walletAddresses:t.join(","),includePrices:"true"};n&&(i.cursor=n),(r||jn)&&(i.cacheBust=r?.toString()||jn.toString()),e&&e.length>0&&(i.fungibleAddresses=e.sort().join(","));try{let o=await me.api().timeout(_({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:i}).then(c=>{if(Je(c))return c.data;throw new Error(c.data?.message||c.data?.error||c.statusText||`Status: ${c.status}`,{cause:c.data?.code})}),a=Dl.parse(o);return a.errors&&a.errors.length>0&&a.errors.forEach(c=>{D.addBreadcrumb(F.Tokens,"getTokenBalances_partialError",z.Info,{code:c.code,message:c.message,chainId:c.details.chainId,address:c.details.address})}),{...a,tokens:Ll(a.tokens)}}catch(o){throw Ce(o)||o instanceof Error&&(D.addBreadcrumb(F.Tokens,"getTokenBalances",z.Error,{...i,message:o.message,...typeof o.cause=="string"||typeof o.cause=="number"?{cause:o.cause}:{}}),D.captureError(o,F.Tokens)),o}}s(Gl,"getTokenBalances");function zl({walletCaip19s:t,isEnabled:e=!0,cacheBust:n}){return{staleTime:Xo,gcTime:_({days:3}),queryKey:He.infiniteTokenBalances({walletCaip19s:t}),enabled:e&&!!t.length,queryFn:s(async({pageParam:r})=>Gl({walletCaip19s:t,cursor:r,cacheBust:n}),"queryFn"),initialPageParam:"",getNextPageParam:s(r=>r?.nextCursor||void 0,"getNextPageParam")}}s(zl,"getTokenBalancesQuery");function Wl(t){let{walletCaip19s:e,encodedCaip19:n,queryOptions:r={enabled:!0}}=t;return{staleTime:_({seconds:10}),gcTime:_({days:3}),queryKey:He.tokenBalance({wallets:e,encodedCaip19:n}),enabled:r.enabled&&!!e.length,queryFn:s(async()=>(await Gl({walletCaip19s:e,fungibleCaip19s:[n]})).tokens,"queryFn")}}s(Wl,"getTokenBalanceQuery");u();l();u();l();var Kh=O(void 0),ai=Kh;var Vh=O(t=>{let e=t(ai);return e?e.addresses.map(n=>ne({chainId:n.networkID,address:n.address,resourceType:he.address})).sort():[]}),Ot=Vh;var qh=El(t=>{let e=t(Ot);return zl({walletCaip19s:e})}),we=qh;var Hh=O(t=>{let{data:e}=t(we),n=e?.pages[0];return!n||!n.tokens.length?0:n.updatedAt}),Yl=Hh;u();l();var Qh=qe(ai,t=>t?.identifier),Nt=Qh;var Jo=Zr(t=>{let e=t(an),n=t(Yl),r=Math.floor(n-_({minutes:10})),i=t(Ot),o=t(si),a=r>Date.now()-_({days:10}),c=He.tokenUpdates({walletCaip19s:i,from:r}),d=s(async()=>{let f=e.getQueryData(c)?.lastTimestamp;if(!f){let b=new Date(r-Hn).toISOString();return{updates:{},lastTimestamp:un(b)}}let m=await ri({walletCaip19s:i,fromMicroseconds:f-Qn({seconds:30})}),p=e.getQueryData(c)?.updates??{};return{updates:Yo({newUpdates:m,existingUpdates:p}),lastTimestamp:Math.max(ii(m)??0,f)}},"queryFn");return{meta:{fetchCount:0},enabled:a&&!o&&i.length>0,queryKey:c,refetchInterval:s(f=>{let m=Number(f.meta?.fetchCount??0);return f.meta&&(f.meta.fetchCount=m+1),oi(m)},"refetchInterval"),queryFn:d}}),jh=ni({atomToStoreOffline:Jo,offlineKey:O(t=>`${t(Nt)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:_({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:g.object({updates:g.record(g.string(),qo),lastTimestamp:g.number()})}),$h=qe(jh,t=>t?.updates??{},(t,e)=>JSON.stringify(t)===JSON.stringify(e)),ci=$h;u();l();u();l();function ui(t){return e=>{let n=!1,r={...e};for(let[i,o]of Object.entries(t)){let a=o?.price,c=o?.lastUpdatedAt?new Date(o.lastUpdatedAt):null;if(!a||!c)continue;let d=e[i]?.price!==a&&(!e[i]?.lastUpdatedAt||c>e[i].lastUpdatedAt);n=n||d,d&&(r[i]={price:o.price,priceChange24h:o.priceChange24h,lastUpdatedAt:c})}return n?r:e}}s(ui,"processExtractedPriceData");u();l();var Gh=O(t=>{let{data:e,status:n}=t(we);return{data:e?.pages.flatMap(r=>r.tokens),status:n}}),zh=ni({atomToStoreOffline:Gh,offlineKey:O(t=>`${t(Nt)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:_({days:10}),initialValue:[],schema:g.array(Ol)}),It=zh;var li=O({}),Wh=O(t=>t(It).slice(-100).reduce((r,i)=>(i.price&&(r[i.encodedCaip19]=i.price),r),{})),Yh=Ne((t,e)=>{let n=t(Wh);!n||Object.keys(n).length===0||e(li,ui(n))}),Xh=O(t=>{let e=t(ci);return Object.values(e).reduce((r,i)=>(i.price&&(r[i.encodedCaip19]=i.price),r),{})}),Jh=Ne((t,e)=>{let n=t(Xh);!n||Object.keys(n).length===0||e(li,ui(n))}),Zh=O(t=>(t(Yh),t(Jh),t(li)),(t,e,n)=>{e(li,n)}),Ct=Zh;u();l();u();l();var ey=qe(we,t=>t.hasNextPage),ln=ey;var $n=O(1/0),di=O(t=>(t(ty),t(ny),t(ln)?t($n):0),(t,e,n)=>{if(n===null){e($n,1/0);return}let r=Math.min(t($n),n);r!==t($n)&&e($n,r)}),Xl=di,ty=Ne((t,e)=>{let{hasNextPage:n}=t(we),r=t(It),i=t(Ct);if(r.length>0&&!n){e(di,0);return}let o=r.slice(-100).filter(a=>a.type==="fungible").map(a=>{let c=i[a.encodedCaip19]??a.price;return c?a.totalQuantity*c.price/10**a.decimals:1/0});e(di,Math.min(...o))}),ny=Ne((t,e)=>{t(Nt)&&e(di,1/0)});function ry(t){return{totalQuantity:t.totalQuantity,totalQuantityString:t.totalQuantityString}}s(ry,"getUpdatedBalances");var iy=O(t=>{let e=t(It),n=t(ci),r=new Set(Object.keys(n)),i=e.map(o=>{let a=o.extraMetadata?.compression?.compressed?`${o.encodedCaip19}-compressed`:o.encodedCaip19,c=n[a];return c?(r.delete(a),{...o,...ry(c)}):o});return r.forEach(o=>{let a=n[o];a&&i.push(a)}),i}),oy=O(t=>{let e=t(Ct),n=t(iy),r=t(Xl),i=n.filter(o=>o.totalQuantity>0||o.type==="native").map(o=>({...o,livePrice:e[o.encodedCaip19]??o.price})).sort(Jr);return r?i.filter(o=>{let a=o.livePrice?.price,c=o.totalQuantity/10**o.decimals;return(a??0)*c>=r}):i}),Qe=oy;u();l();function sy(t){if(t)return typeof t=="string"||typeof t=="number"?new Date(t):t}s(sy,"toDate");function ay(t,{key:e,newPriceData:n}){let r=t[e];if(!n||r?.price===n?.price)return t;let i=sy(n.lastUpdatedAt);return!i||!(!r?.lastUpdatedAt||i>r.lastUpdatedAt)?t:{...t,[e]:{price:n.price,priceChange24h:n.priceChange24h??n.usd_24h_change,lastUpdatedAt:i}}}s(ay,"handlePriceAtomUpdate");var fi=ay;var cy=s((t,e,n)=>{let r=t.extraMetadata?.compression?.compressed,i=e.extraMetadata?.compression?.compressed;if(r!==i)return n?r?-1:1:r?1:-1},"sortByCompressed"),uy=s((t,e,n)=>{let r=t.legacyKey===n,i=e.legacyKey===n;if(r!==i)return r?-1:1},"sortByLegacyKey"),Jl=s(({isSplCompressed:t,legacyKey:e},n)=>n.length?n.length===1?n[0]:[...n].sort((i,o)=>{if(t!==void 0&&(i.encodedCaip19.includes("solana:")||o.encodedCaip19.includes("solana:"))){let a=cy(i,o,t);if(a)return a}if(e){let a=uy(i,o,e);if(a)return a}return o.totalQuantity-i.totalQuantity})[0]:null,"pickBalance"),mi=s(t=>{let e=oe(Ot),n=oe(Qe),r=(0,dn.useMemo)(()=>n.filter(h=>h.encodedCaip19!==t.encodedCaip19?!1:t.legacyKey?h.legacyKey===t.legacyKey:!0),[n,t.encodedCaip19,t.legacyKey]),{isSplCompressed:i,legacyKey:o}=t,a=(0,dn.useMemo)(()=>Jl({isSplCompressed:i,legacyKey:o},r),[i,o,r]),c=Wl({...t,walletCaip19s:e}),d=q({...c,select:s(h=>Jl(t,h),"select")}),f=d.data??null,m=f??a??null,p=Sn(Ct);return(0,dn.useEffect)(()=>{let h=f;h&&!d.isPlaceholderData&&h.price&&p(b=>{let v=h.encodedCaip19,E=h.price;return fi(b,{key:v,newPriceData:E})})},[d.isPlaceholderData,f,p]),{...d,data:m,isPlaceholderData:a?!1:d.isPlaceholderData}},"useTokenBalance"),pi=s(({networkID:t,queryOptions:e,addressType:n})=>{let r={chainId:t,slip44:x.getSlip44(t),resourceType:he.nativeToken},i=Ya(t,n),o=ne(r);return mi({encodedCaip19:o,legacyKey:i,queryOptions:e})},"useNativeTokenBalance"),ly=s(()=>{let{data:t}=tt(),e=(0,dn.useMemo)(()=>t?.addresses.find(n=>x.isSolanaNetworkID(n.networkID)),[t]);return pi({networkID:e?.networkID||tr.Mainnet,addressType:e?.addressType})},"useSolanaBalance");u();l();var sd=L(Q());u();l();u();l();var dy=O(t=>{let{isFetching:e,isPending:n}=t(we),r=t(It);return(e||n)&&r.length===0}),Dt=qe(dy,t=>t);u();l();var fy=new Map,my=O(null),py=O(t=>{let e=t(Nt);if(!e)return fy;let n=t(my),o=(Wt(n??null)?.value??{})[e]??[];return new Map(o.map(a=>[a.mintId,a]))}),ct=py;function Zl(){let t=oe(Qe),e=oe(Dt),n=oe(ln),r=oe(ct);return{isLoading:e,hasNextPage:n,fungibleTokens:t,visibilityOverrides:r}}s(Zl,"useOwnedFungiblesJotai");u();l();u();l();u();l();u();l();var Gn=Mr(()=>({__typename:T.typename("FungibleBalance"),id:T.id,caip19:T.string,name:T.nullable(T.string),symbol:T.nullable(T.string),decimals:T.number,logoUri:T.nullable(T.string),spamStatus:T.nullable(T.string),totalQuantity:T.number,totalQuantityString:T.string,queriedWalletBalances:T.array(T.object({__typename:T.optional(T.string),id:T.optional(T.string),address:T.string,quantity:T.number,quantityString:T.string,lastTransferredDate:T.optional(T.string),subaccounts:T.optional(T.array(T.object({account:T.string,quantity:T.number,quantityString:T.string})))})),price:T.optional(T.nullable(T.object({price:T.number,priceChange24h:T.optional(T.number),lastUpdatedAt:T.optional(T.string),marketCap:T.optional(T.number)})))}));u();l();function hy(t){return{...t,lastTransferredDate:t.lastTransferredDate?.toISOString()}}s(hy,"walletBalanceToEntityFormat");var hi=class{static{s(this,"FungibleTokensBalancePoller")}context;walletCaip19s;onUpdate;lastTimestamp=0;pollingTimeoutId=null;fetchCount=0;abortController=null;constructor(e,n,r){this.context=e,this.walletCaip19s=n,this.onUpdate=r}start(e){if(this.abortController)return;this.abortController=new AbortController;let n=Math.floor(e-_({minutes:10})),r=new Date(n-Hn).toISOString();this.lastTimestamp=un(r),this.poll()}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.pollingTimeoutId&&(clearTimeout(this.pollingTimeoutId),this.pollingTimeoutId=null)}async poll(){let e=this.abortController?.signal;if(!(!e||e.aborted)){try{let n=await ri({walletCaip19s:this.walletCaip19s,fromMicroseconds:this.lastTimestamp-Qn({seconds:30})});if(e.aborted)return;for(let i of n)this.onUpdate({id:i.id,caip19:i.encodedCaip19,totalQuantity:i.totalQuantity,totalQuantityString:i.totalQuantityString,name:i.name,symbol:i.symbol,decimals:i.decimals,logoUri:i.logoUri,spamStatus:i.spamStatus,queriedWalletBalances:i.queriedWalletBalances.map(hy),price:i.price,extraMetadata:i.extraMetadata});let r=ii(n);r&&(this.lastTimestamp=Math.max(r,this.lastTimestamp))}catch{}this.fetchCount++,e.aborted||this.scheduleNext()}}scheduleNext(){let e=this.abortController?.signal;if(!e||e.aborted)return;let n=oi(this.fetchCount);this.pollingTimeoutId=setTimeout(()=>{this.poll()},n)}};var yy=_({minutes:5}),ed=Hc(()=>({path:"/portfolio/v1/fungibles/balances",searchParams:{walletAddresses:T.string,includePrices:T.optional(T.const("true")),cursor:T.optional(T.string)},response:{items:T.array(Gn),cursor:T.optional(T.string),errors:T.optional(T.array(T.object({code:T.string,message:T.string,details:T.object({chainId:T.string,address:T.string})})))},cache:{staleTime:yy,gcTime:_({days:3})},pagination:{getNextPageParams:s(t=>t.cursor?{cursor:t.cursor}:void 0,"getNextPageParams")},stream:{type:Gn,subscribe:s((t,e,n)=>{if(!e||!e.walletAddresses)return()=>{};let r=e.walletAddresses.split(","),i=new hi(t,r,n);return i.start(Date.now()),()=>{i.stop()}},"subscribe")}}));u();l();function td(t){let e=t.caip19;if(!e)return[];let n={caip19:e,name:t.name,symbol:t.symbol,decimals:t.decimals,logoUri:t.logoUri,spamStatus:t.spamStatus,totalQuantity:t.totalQuantity,totalQuantityString:t.totalQuantityString,queriedWalletBalances:t.queriedWalletBalances,price:t.price},r={...xt(n),livePrice:t.price};return Wo(r)}s(td,"transformEntityToFungibleTokenBalance");u();l();var yi=fe(function*(){let t=yield dr();return t?t.addresses.map(xe(e=>ne({chainId:e.networkID,address:e.address,resourceType:he.address}),0)).sort():[]}),zn=fe(function*(){return(yield dr())?.identifier}),nd=fe(function*(){let t=yield dr();return t?t.addresses.map(xe(e=>e.address,0)).sort():[]});var gy=s(t=>t.reduce((e,n)=>(n.price&&(e[n.encodedCaip19]=n.price),e),{}),"extractPricesFromTokens"),by=s((t,e)=>{if(e.length===0)return t;let n=new Set(e);return t.map(r=>({...r,items:r.items.filter(i=>i.queriedWalletBalances.some(o=>n.has(o.address)))}))},"filterFungibleTokensBalancePagesForAccount"),Wn=fe(function*(){let t=yield yi(),e=yield nd();if(t.length===0)return null;let n=ed({walletAddresses:t.join(","),includePrices:"true"}),r=n.value??[],i=by(r,e),o=new Set(e),a=Array.from(n.extra.streamOrphans??[]).filter(xe(d=>d.queriedWalletBalances.some(xe(f=>o.has(f.address),0,[o])),0,[o])),c=a.length>0?[...i,{items:a}]:i;return{values:c,hasValue:c.length>0,isFetching:n.isFetching??!1,isPending:n.isPending??!1,isRefetching:n.isRefetching??!1,isRejected:n.isRejected??!1,hasNextPage:n.hasNextPage??!1,refetch:xe(function*(){yield n.refetch()},1,[n]),fetchNextPage:xe(function*(){yield n.fetchNextPage()},2,[n])}}),gi=fe(function*(){let t=yield Wn();if(!t)return[];if(t.isPending&&!t.hasValue)return[];let e=[];for(let i of t.values)for(let o of i.items)e.push(...td(o));let n=gy(e),r=[];for(let i of e)(i.totalQuantity>0||i.type==="native")&&r.push({...i,livePrice:n[i.encodedCaip19]??i.price});return r.sort(Jr)}),rd=fe(function*(){let t=yield zn(),e=Yt(t);return(yield gi()).filter(xe(r=>lt(e,{key:r.legacyKey??"",spamStatus:r.spamStatus}),0,[e]))}),id=fe(function*(){let t=yield zn(),e=Yt(t);return(yield gi()).filter(xe(r=>Ar(e,{key:r.legacyKey??"",spamStatus:r.spamStatus}),0,[e]))});var vy=fe(function*(){let[t,e,n]=yield ir.all([gi(),Wn(),zn()]),r=Yt(n);return{fungibleTokens:t,isLoading:e?(e.isFetching||e.isPending)&&!e.hasValue:!1,hasNextPage:e?.hasNextPage??!1,visibilityOverrides:r}}),Zo={fungibleTokens:[],isLoading:!0,hasNextPage:!1,visibilityOverrides:new Map};function od(){let t=Rt(vy);return t.isRejected?{...Zo,isLoading:!1}:(t.isPending,t.value??Zo)}s(od,"useOwnedFungiblesSignal");function ad(){return(0,sd.useRef)(gt("enable-signalium-query-fungible-tokens")).current?od():Zl()}s(ad,"useOwnedFungibles");u();l();u();l();var pd=L(Q());u();l();var cd=L(Q());function ud({wallets:t,encodedCaip19:e,isSplCompressed:n=!1}){let r=ae();return(0,cd.useCallback)(async()=>await r.invalidateQueries({queryKey:He.tokenBalance({wallets:t,encodedCaip19:e,isSplCompressed:n})}),[r,t,e,n])}s(ud,"useInvalidateFungibleTokensBalanceJotai");u();l();var fd=L(Q());u();l();u();l();var ld=qc(()=>({path:"/portfolio/v1/fungibles/balances",searchParams:{walletAddresses:T.string,fungibleAddresses:T.string,includePrices:T.optional(T.const("true"))},response:{items:T.array(Gn),cursor:T.optional(T.string),errors:T.optional(T.array(T.object({code:T.string,message:T.string,details:T.object({chainId:T.string,address:T.string})})))},cache:{staleTime:0,gcTime:_({minutes:1})}}));async function dd({walletCaip19s:t,encodedCaip19:e}){await ld({walletAddresses:t.join(","),fungibleAddresses:e,includePrices:"true"}).refetch()}s(dd,"invalidateFungibleTokenBalance");function md({encodedCaip19:t}){return(0,fd.useCallback)(async()=>{let e=await yi();await dd({walletCaip19s:e,encodedCaip19:t})},[t])}s(md,"useInvalidateFungibleTokensBalanceSignal");var Ty=s(({wallets:t,encodedCaip19:e,isSplCompressed:n=!1})=>(0,pd.useRef)(gt("enable-signalium-query-fungible-tokens")).current?md({wallets:t,encodedCaip19:e,isSplCompressed:n}):ud({wallets:t,encodedCaip19:e,isSplCompressed:n}),"useInvalidateFungibleTokensBalance"),wy=Ty;u();l();u();l();function Ey(t){let e={message:"Failed to parse token details response"};if(t instanceof ht)try{e.zodIssuesJson=JSON.stringify(t.issues.map(n=>({path:n.path.join("."),message:n.message,code:n.code})))}catch{e.zodIssuesJson="Failed to stringify Zod issues"}else e.errorMessage=t instanceof Error?t.message:String(t);return e}s(Ey,"zodErrorToBreadcrumbData");var hd=Ey;function yd(t){return t.resourceType===he.nativeToken?`/fungibles/v1/${t.chainId}/${t.resourceType}/${t.slip44}`:`/fungibles/v1/${t.chainId}/${t.resourceType}/${t.address}`}s(yd,"getUrlPathForDecodedCaip19");function Sy(t){return yd(Be(t))}s(Sy,"getUrlPathForEncodedCaip19");function Ay(t){let e=new URLSearchParams,n="encodedCaip19"in t?Sy(t.encodedCaip19):yd(t.decodedCaip19);return t.includePrice&&e.append("includePrice","true"),t.includeFungibleDetails&&e.append("includeFungibleDetails","true"),[n,{params:e}]}s(Ay,"getUrlParams");async function es(t){let e=await me.api().noBearer().timeout(_({seconds:10})).get(...Ay(t)).then(n=>{if(Je(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText||`Status: ${n.status}`,{cause:{code:n.data?.code,status:n.status}})}).catch(n=>{if(Ce(n))throw n;let r=n.cause?.status===404,i={message:n.message,cause:n.cause,..."encodedCaip19"in t&&{caip19:t.encodedCaip19},..."decodedCaip19"in t&&{caip19:ne(t.decodedCaip19)}};throw r?D.addBreadcrumb(F.Tokens,"getTokenDetails.NotFound",z.Info,i):(D.addBreadcrumb(F.Tokens,"getTokenDetails",z.Error,i),D.captureError(n,F.Tokens)),n});try{return zo.parse(e)}catch(n){console.error(n);let r=hd(n);throw"encodedCaip19"in t&&typeof t.encodedCaip19=="string"?r.caip19=t.encodedCaip19:"decodedCaip19"in t&&(r.caip19=ne(t.decodedCaip19)),D.addBreadcrumb(F.Tokens,"getTokenDetails.ParseError",z.Error,r),n}}s(es,"getTokenDetails");u();l();function gd({tokens:t}){return Kt({tokens:t}).catch(e=>{throw Ce(e)||(D.addBreadcrumb(F.Tokens,"getTokenPrices",z.Error,{message:e.message,cause:e.cause,tokens:t.map(ne).join(",")}),D.captureError(e,F.Tokens)),e})}s(gd,"getTokenPrices");u();l();u();l();var _y=O(t=>{let e=t(ct);return t(Qe).filter(r=>lt(e??new Map,{key:r.legacyKey??"",spamStatus:r.spamStatus}))}),bi=_y;function bd(){let t=oe(bi),e=oe(Dt),n=oe(ln),r=oe(ct);return{isLoading:e,hasNextPage:n,fungibleTokens:t,visibilityOverrides:r}}s(bd,"useOwnedVisibleFungibles");u();l();var Yn=L(Q());function Py({includePrice:t,encodedCaip19:e,localTokenDetails:n,enabled:r=!0}){return{refetchInterval:_({seconds:t?5:30}),queryKey:He.tokenDetails({caip19:e,includePrice:t}),queryFn:s(async()=>{let i=await es({encodedCaip19:e,includeFungibleDetails:!0,includePrice:t});return Ul.parse(i)},"queryFn"),...n&&{placeholderData:n},enabled:r}}s(Py,"getTokenDetailsQueryOptions");function xy({caip19:t,includePrice:e}){let n=(0,Yn.useMemo)(()=>typeof t=="string"?t:ne(t),[t]),r=oe(Qe),i=(0,Yn.useMemo)(()=>{let c=r.find(d=>d.encodedCaip19===n);return c?{chainName:c.chainName,encodedCaip19:n,decodedCaip19:c.decodedCaip19,type:c.type,categories:[],price:c.price,symbol:c.symbol??"",name:c.name??"",decimals:c.decimals,legacyKey:c.legacyKey??n,spamStatus:c.spamStatus??ut.NotVerified,logoUri:c.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,createdDate:null,...c.extraMetadata},createdDate:null}:null},[n]),o=q(Py({includePrice:e,encodedCaip19:n,localTokenDetails:i,enabled:n!==""})),a=Sn(Ct);return(0,Yn.useEffect)(()=>{let c=o.data;c&&!o.isPlaceholderData&&e&&c.price&&a(d=>{let f=c.encodedCaip19,m=c.price;return fi(d,{key:f,newPriceData:m})})},[o.data,o.isPlaceholderData,a,e]),o}s(xy,"useTokenDetails");var ts=xy;u();l();var Od=L(Q());u();l();var Ti=L(Q());u();l();var Oy=O(t=>{let{fetchNextPage:e,hasNextPage:n,isFetching:r,refetch:i,data:o}=t(we),a=t(Dt);return async()=>{if(!r&&n&&!a){let c=o?.pages[0];c&&new Date().getTime()-c.updatedAt>Xo&&await i(),e()}}}),vd=Oy;u();l();var Ny=O(t=>{let e=t(ct);return t(Qe).filter(r=>Ar(e??new Map,{key:r.legacyKey??"",spamStatus:r.spamStatus}))}),Td=Ny;u();l();u();l();u();l();async function ns({walletCaip19s:t,includeFungibleCaip19s:e,excludeFungibleCaip19s:n}){let r=await me.api().timeout(_({seconds:10})).get("/portfolio/v1/fungibles/value",{params:{walletAddresses:t.join(","),...e.length>0&&{includeFungibleCaip19s:e.join(",")},...n.length>0&&{excludeFungibleCaip19s:n.join(",")}}}).then(o=>{if(Je(o))return o.data;throw new Error(o.data?.message||o.data?.error||o.statusText||`Status: ${o.status}`,{cause:o.data?.code})}).catch(o=>{throw Ce(o)||(D.addBreadcrumb(F.Tokens,"getPortfolioValue",z.Error,{message:o.message,cause:o.cause,walletCaip19s:t.join(","),...e.length>0&&{includeFungibleCaip19s:e.join(",")},...n.length>0&&{excludeFungibleCaip19s:n.join(",")}}),D.captureError(o,F.Tokens)),o}),i=Ml.parse(r);return i.errors&&i.errors.length>0&&i.errors.forEach(o=>{D.addBreadcrumb(F.Tokens,"getPortfolioValue_partialError",z.Info,{code:o.code,message:o.message,chainId:o.details.chainId,address:o.details.address})}),i}s(ns,"getPortfolioValue");u();l();var Iy=fe(function*(){return Ys(Ws.DeveloperMode)}),rs=Ns(()=>Iy()),is=O(null),Cy=Ne((t,e)=>{let n=rs.addListener(()=>{(async()=>{let r=await rs.value;e(is,r??lr)})()});return(async()=>{let r=await rs.value;e(is,r??lr)})(),()=>{n()}}),Dy=O(t=>(t(Cy),t(is)??lr)),ky=O(t=>!t(Dy).isDeveloperMode),vi=ky;var Ry=qe(O(t=>{let e=t(ct),r=t(Qe).reduce((i,o)=>{let a=lt(void 0,{key:o.legacyKey??"",spamStatus:o.spamStatus??ut.NotVerified}),c=lt(e,{key:o.legacyKey??"",spamStatus:o.spamStatus??ut.NotVerified});return a===c?i:a?{...i,exclude:[...i.exclude,o.encodedCaip19]}:{...i,include:[...i.include,o.encodedCaip19]}},{include:[],exclude:[]});return{include:r.include.sort().slice(0,50),exclude:r.exclude.sort().slice(0,50)}}),t=>t,(t,e)=>t.include.join(",")===e.include.join(",")&&t.exclude.join(",")===e.exclude.join(",")),Fy=Zr(t=>{let e=t(Ot),{include:n,exclude:r}=t(Ry),i=t(si),o=t(vi),a=He.portfolioValue({walletCaip19s:e,include:n,exclude:r,isMainnet:o});return{enabled:e.length>0&&!i&&o,queryKey:a,refetchInterval:!1,queryFn:s(async()=>ns({walletCaip19s:e,includeFungibleCaip19s:n,excludeFungibleCaip19s:r}),"queryFn")}}),wd=Fy;var Ed=O(t=>{let{refetch:e}=t(wd),{refetch:n}=t(we),r=t(vi);return()=>{$l(),n(),r&&e()}}),My=Ne(t=>{let e=t(Ed),n=t(Jo);n.status==="error"&&n.error.cause==="TooManyFungibleUpdates"&&e()}),Uy=O(t=>{t(My);let e=t(Ed),{isPending:n,isRefetching:r,isLoading:i}=t(we);return{isPending:n,isLoading:i,isRefetching:r,refetch:e}}),Sd=Uy;function Ad(){let t=oe(bi),e=oe(Td),n=oe(Dt),{status:r,hasNextPage:i,isFetching:o}=oe(we),{refetch:a}=oe(Sd),c=oe(vd),d=(0,Ti.useCallback)(async()=>{a()},[a]),f=(0,Ti.useMemo)(()=>n?"loading":t.length===0&&r==="error"?"error":t.length===0&&e.length>0?"hidden":"success",[t.length,r,n,e.length]);return{fungibles:t,status:f,refetch:d,fetchNextPage:c,hasNextPage:i,isFetching:o}}s(Ad,"useFungibleTokensListJotai");u();l();var Pd=L(Q());var By=fe(function*(){let[t,e,n]=yield ir.all([rd(),id(),Wn()]),r=n?(n.isFetching||n.isPending)&&!n.hasValue:!1,i=n?.isRefetching??!1,o=n?.isRejected??!1,a;return r||i?a="loading":t.length===0&&o?a="error":t.length===0&&e.length>0?a="hidden":a="success",{fungibles:t,status:a,refetch:xe(function*(){yield n?.refetch()},0,[n]),fetchNextPage:xe(function*(){yield n?.fetchNextPage()},1,[n]),hasNextPage:n?.hasNextPage??!1,isFetching:n?.isFetching??!1}}),_d=s(async()=>{},"noopAsync"),os={fungibles:[],status:"loading",refetch:_d,fetchNextPage:_d,hasNextPage:!1,isFetching:!1};function xd(){let t=Rt(By),e=(0,Pd.useRef)(void 0);return t.isResolved&&t.value&&(e.current=t.value),t.isRejected?{...os,status:"error"}:t.isPending?t.value??e.current??os:t.value??os}s(xd,"useFungibleTokensListSignal");function Ly(){return(0,Od.useRef)(gt("enable-signalium-query-fungible-tokens")).current?xd():Ad()}s(Ly,"useFungibleTokensList");u();l();var ls=L(Q());u();l();var ss=new B(0),as=s(({chainAddress:t,type:e,balance:n,decimals:r,recipient:i,gasEstimation:o,clampToZero:a=!0})=>{let{data:c,isPending:d}=Uo(t);if(!e||!n)return ss;let f=new B(n).multipliedBy(Mt(r));if(!nt(e))return f;if(!o)return;let m=new B(0);if(vt(o))m=f.minus(new B(o.value));else if(yr(o)){let{gasLimit:p,maxFeePerGas:h,l1Fee:b=new B(0)}=o,v=p.times(h).plus(b);m=f.minus(v)}else if($t(o)){if(!t||d)return;let p=t.addressType,h=c?.safeToSendUtxos??[],b=ba(o.btcPerKilobyte),v=i&&gs.safeParse(i).success?i:"bc1p",A=[{value:h.reduce((G,Z)=>G.plus(new B(Z.value)),new B(0)).toNumber(),address:v}],V=Da(p,h,A,b.toNumber(),[]);if(V.type==="error")m=new B(V.maxAmount).integerValue(B.ROUND_DOWN);else{let{inputs:G,fee:Z}=V;m=G.reduce((H,R)=>H.plus(new B(R.value)),new B(0)).minus(Z).integerValue(B.ROUND_DOWN)}}else if(hr(o))m=f.minus(o.gasBudget);else return Ue(o);return m.isGreaterThan(ss)?m:a?ss:m},"useTransferFungibleMaxAmount");u();l();u();l();var cs=new B(890880);function us({balance:t,decimals:e,gasEstimation:n,transactionValue:r,networkID:i}){if(!x.isSolanaNetworkID(i)||!n||!vt(n))return{shouldBlock:!1};let o=new B(t).multipliedBy(Mt(e)),a=new B(n.value),c=cs.plus(a);if(o.lt(c))return{shouldBlock:!0,reason:"rent-exemption"};let d=o.minus(r).minus(a);return d.lt(0)?{shouldBlock:!0,reason:"insufficient-balance"}:d.lte(cs)?{shouldBlock:!0,reason:"rent-exemption"}:{shouldBlock:!1}}s(us,"checkSolanaRentExemption");var Ky=s(({networkID:t,addressType:e,gasEstimation:n,transactionValue:r=new B(0),recipient:i})=>{let{data:o,isLoading:a,isError:c}=pi({networkID:t,addressType:e}),d=Ja.get(t).nativeFungibleTokenType,f="unknown",m,p="",h=(0,ls.useMemo)(()=>{let v=o?.queriedWalletBalances[0]?.address;if(!v)return;let E=Es(t,v);return{networkID:t,address:v,addressType:E}},[o?.queriedWalletBalances,t]),b=as({chainAddress:h,type:d,balance:o?.totalQuantityString?new B(o?.totalQuantityString):void 0,decimals:o?.decimals??0,recipient:i,gasEstimation:n,clampToZero:!1});if(!c&&o&&b){if(b.gte(r)?f="sufficient":(f="insufficient",m=us({balance:o.totalQuantityString,decimals:o.decimals,gasEstimation:n,transactionValue:r,networkID:t}).reason??"insufficient-balance"),f==="sufficient"){let v=us({balance:o.totalQuantityString,decimals:o.decimals,gasEstimation:n,transactionValue:r,networkID:t});v.shouldBlock&&(f="insufficient",m=v.reason)}p=o?.symbol||""}return(0,ls.useMemo)(()=>({hasSufficientFunds:f,insufficientReason:m,nativeTokenSymbol:p,isLoading:a,isError:c}),[f,m,p,a,c])},"useHasSufficientFunds");u();l();var Dd=L(Q());u();l();var ds=L(Q());u();l();var Nd=s(({chainAddresses:t=[]})=>{let e=Ee.tokensErrorCount(t);return q({queryKey:e,queryFn:s(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0})},"useTokensErrorCount");u();l();var Vy=s(({errors:t})=>t,"select");function Id({chainAddresses:t,queryOptions:e}){return ec({select:Vy,chainAddresses:t,queryOptions:e})}s(Id,"useTokensPartialErrors");var Cd=3,qy=1,fs=s(({networkID:t,chainAddresses:e=[]})=>{let{data:n=[]}=Id({chainAddresses:e}),{data:r=0}=Nd({chainAddresses:e}),i=r>=Cd,{data:o=0}=po(),a=o>=Cd,c=n.length===qy&&n.some(m=>m.code==="TokensTrimmed"),{t:d}=Le(),f=(0,ds.useMemo)(()=>{if(i)return d("partialErrorGeneric");let m=n.filter(h=>t?h.details.chainId===t:!0),p=m.length+(a?1:0);return p?p>1?d("partialErrorGeneric"):a?d("partialErrorTokenPrices"):c?d("partialErrorTokensTrimmed"):t?d("partialErrorTokenDetail"):d("partialErrorBalanceChainName",{chainName:x.getChainName(m[0].details.chainId)}):""},[i,n,a,t,c,d]);return(0,ds.useMemo)(()=>({partialErrorMessage:f,shouldShowPartialError:f!==""}),[f])},"usePartialErrorBanner");function Hy(t){let{onTappingBuy:e,onTappingReceive:n,onTappingSend:r,onTappingSwap:i,account:o}=t,{shouldShowPartialError:a,partialErrorMessage:c}=fs({chainAddresses:o?.addresses});return{ctaActions:Qy({onTappingBuy:e,onTappingReceive:n,onTappingSend:r,onTappingSwap:i}),shouldShowPartialError:a,partialErrorMessage:c}}s(Hy,"useHomeViewState");function Qy(t){let{t:e}=Le(),n=Bs();return(0,Dd.useMemo)(()=>{let r=[];return r.push({text:e("commandSend"),type:"send",onClick:t.onTappingSend}),n?r.push({text:e("commandTrade"),type:"trade",onClick:t.onTappingSwap}):r.push({text:e("commandSwap"),type:"swap",onClick:t.onTappingSwap}),r.push({text:e("commandReceive"),type:"receive",onClick:t.onTappingReceive}),r.push({text:e("commandBuy"),type:"buy",onClick:t.onTappingBuy}),r.sort((i,o)=>(Ki.get(i.type)??100)-(Ki.get(o.type)??100)),{primary:r,more:[]}},[e,n,t.onTappingSend,t.onTappingSwap,t.onTappingReceive,t.onTappingBuy])}s(Qy,"useHomeCTABarActions");u();l();var kd=L(Q());var jy=s(({networkID:t,unsignedTransaction:e,pendingActivityRows:n,accountIdentifier:r,accountSigner:i,storage:o,includeCallPayload:a})=>({accountSigner:i,accountIdentifier:r,networkID:t,unsignedTransaction:e,...a&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:mr.Swap,display:{summary:n}},storage:o}),"buildArgs"),$y=s(async({t,fungible:e,unsignedUnwrapTx:n,gasEstimation:r,storage:i,accountMetadata:o,accountSigner:a})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!r)throw new Error("Gas estimation is required");let{chain:c,balance:d}=e.data;if(!x.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let f=c.id,m={topRight:{text:`+${d} ${c.symbol}`},topLeft:{text:t("transactionsPendingSwapping")},bottomRight:{text:`-${d} ${e.data.symbol}`},bottomLeft:{text:`${e.data.name}`}},p=ys.parse({type:hs.eip1559,chainId:x.getEVMNetworkIDValue(f),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`,...n}),h=jy({storage:i,accountSigner:a,pendingActivityRows:m,includeCallPayload:!1,networkID:f,unsignedTransaction:p,accountIdentifier:o.accountIdentifier});return wr(h)},"executeUnwrapTransaction"),Gy=s(()=>{let{data:t}=tt();return(0,kd.useMemo)(()=>{let e=t?.type,n=t?.name??"",r=t?.identifier??"";return{accountName:n,accountType:e,accountIdentifier:r}},[t])},"useAccountMetadata"),zy=s(t=>{let e=Ze(),n=ae(),{t:r}=Le(),i=Gy(),o=bt();return yt({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:d}){return await $y({t:r,fungible:a,unsignedUnwrapTx:c,gasEstimation:d,accountMetadata:i,storage:e,accountSigner:o})},async onSuccess(){await n.invalidateQueries({queryKey:Ee.tokens(t)})}})},"useUnwrapTransaction");u();l();var Rd=L(Q());function Wy(t){let e=et(),n=ae();return(0,Rd.useCallback)(async r=>{let i=await bc(dt.AccountIdToHiddenMints)??{version:2,value:{}},a=Wt(i)?.value??{},c=a[t]??[],d=new Map(c.map(m=>[m.mintId,m]));for(let{fungibleKey:m,...p}of r)if("isHidden"in p){let{isHidden:h}=p;e.capture(h?"hideFungibleToken":"unhideFungibleToken",{data:{fungibleKey:m}}),d.set(m,{mintId:m,status:h?vn.Hidden:vn.Visible})}else{let{visibility:h}=p;d.set(m,{mintId:m,status:h})}a[t]=Array.from(d.values()),await gc(dt.AccountIdToHiddenMints)({version:2,value:a}),await n.invalidateQueries({queryKey:Ee.hiddenMints(t)}),await n.invalidateQueries({predicate:s(m=>{let p=m.queryKey;return Array.isArray(p)&&p.length>=2&&typeof p[0]=="string"&&p[0].startsWith("fungible-tokens-")&&p[1]==="visibility-overrides"&&typeof p[2]=="object"&&p[2]!==null&&"accountId"in p[2]&&p[2].accountId===t},"predicate")})},[t,e,n])}s(Wy,"useSetVisibilityOverrides");u();l();u();l();var Fd=L(Q());var Yy=s((t,e,n)=>{let r=ae(),{fungibles:i}=Qt({keys:[t]}),o=i.length===1?i[0]:void 0;(0,Fd.useEffect)(()=>{if(!o)return;let{type:a,data:c}=o,{balance:d,decimals:f,chain:m}=c,{id:p}=m,h=nt(a)===!0;if(!n||!d||h||d.isEqualTo(e))return;let b=Ee.transferFungibleLoggingContext(t),v={transactionId:n,decimals:f,chainId:p,isNativeToken:h,previousBalance:d,fungibleKey:t};r.setQueryData(b,v)},[n,o,t,r,e])},"useTransferFungibleLoggingContext");u();l();var Ud=L(Q());u();l();function Md(t,e,n){return ve.PublicKey.findProgramAddressSync([t.toBuffer(),n.toBuffer(),e.toBuffer()],Va)[0]}s(Md,"findAssociatedTokenAddress");var Xy=new Tn("Unable to unwrap SOL. Wrapped SOL Token account does not exist."),Jy=new Tn("Unable to unwrap SOL. Token account is not expected mint.");async function Zy(t,e){let n=await t.getAccountInfo(e);if(!n)throw Xy;let r=Ha.decode(n.data);return new ve.PublicKey(r.mint)}s(Zy,"getMintOfATA");function eg(t){if(t)return typeof t=="string"?new ve.PublicKey(t):t}s(eg,"ensurePublicKey");function tg(){let{connection:t}=vo(),{data:e}=tt(),{solanaChainAddress:n,accountIdentifier:r}=(0,Ud.useMemo)(()=>({solanaChainAddress:e?.addresses.find(fn),accountIdentifier:e?.identifier??""}),[e]),i=Ze(),o=bt(),{t:a}=Le();return yt({mutationFn:s(async c=>{if(!n)return Promise.reject("solanaChainAddress not loaded");try{let{networkID:d,address:f}=n,m=new ve.PublicKey(f),p=eg(c?.tokenAccount)??Md(m,Bi,bn);if((await Zy(t,p)).toBase58()!==Bi.toBase58())throw Jy;let b=vu(p,m,m,[],bn),v=new ve.Transaction().add(b),E={ownerAddress:f,networkID:d,data:{signature:""},type:mr.UnwrapSOL,display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},A=await Er({accountIdentifier:r,accountSigner:o,connection:t,feePayer:new ve.PublicKey(f),pendingTransactionInput:E,storage:i,transaction:v,useSubmissionService:!1});return{networkID:d,id:A}}catch(d){throw d instanceof Error&&D.captureError(d,F.Tokens),d}},"mutationFn")})}s(tg,"useUnwrapSOL");u();l();var Bd=_({minutes:1}),ng=s((t,e=!0)=>{let n=Ee.solanaBalance(t);return q({enabled:!!t&&e&&fn(t),gcTime:Bd,staleTime:Bd,queryKey:n,async queryFn(){if(!t)throw new Error("No chain address provided");if(fn(t))return Gt(t.networkID).getBalance(new ve.PublicKey(t.address));throw new Error(`SOL balance not implemented for ${t.networkID}`)}})},"useSolanaBalance");u();l();var Ld=L(Q());var rg=s(t=>{let{data:e}=ea();return(0,Ld.useMemo)(()=>{if(!t||!e)return;let n=t.data.chain.id,r=e.explorers[n]??Ii.get(n).defaultExplorer,i,o;if(nt(t.type))o="address",i=t.data.walletAddress;else switch(t.type){case U.SuiCoin:{o="token",i=t.data.contractAddress;break}case U.ERC20:{o="address",i=t.data.contractAddress;break}case U.SPL:case U.CompressedSPL:{o="address",i=t.data.mintAddress;break}case U.BRC20:return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${t.data.walletAddress}`}}let a=Di({networkID:n,endpoint:o,explorerType:r,param:i});return{explorerName:Ci[r],explorerUrl:a}},[t,e])},"useFungibleExplorerUrl");u();l();var Kd=L(Q());var ig=s(t=>{let e=ae();return(0,Kd.useCallback)(()=>e.invalidateQueries({queryKey:Ee.tokens(t)}),[e,t])},"useInvalidateTokens");u();l();var Vd=L(Q());var og=s((t,e)=>(0,Vd.useMemo)(()=>{if(t)if($t(t)){let n=ga(t).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:e("satsAmount",{sats:n.toString()})}}else return vt(t)&&t.highFees?{leftSubtext:e("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"spotWarning",rightSubtext:""}:void 0},[t,e]),"useNetworkFeeRow");u();l();var qd=L(Q());var sg=s(({caip19:t,fungibleCaip19:e,fungibleKeys:n,isSplCompressed:r})=>{let{fungibles:i,isLoadingTokens:o,refetch:a}=Qt({keys:n}),{data:c,refetch:d,isLoading:f}=mi({encodedCaip19:t,legacyKey:n?.[0]??null,isSplCompressed:r}),{data:m,isLoading:p}=ts({caip19:t,includePrice:!0}),h=lg(i,r),b=(0,qd.useMemo)(()=>{if(!h)return;if(!c)return h;let E=wn(c.totalQuantityString,c.decimals);return{...h,data:{...h.data,amount:c.totalQuantityString,balance:E,usd:c.price?.price?E.times(c.price.price).toNumber():void 0,usd_24h_change:c.price?.priceChange24h!==void 0?Hd(E.times(c.price.price).toNumber(),c.price?.priceChange24h):void 0}}},[h,c]);return{derivedFungible:ag({fungible:b,fungibleCaip19:e,tokenDetails:m,tokenBalance:c}),isLoading:o||p||f,refetchFungibleBalance:a,refetchTokenBalance:d}},"useFungibleData");function ag({fungible:t,fungibleCaip19:e,tokenDetails:n,tokenBalance:r}){if(t)return t;if(!n)return;let i=rc(n),o="address"in e?cg(e,i):ug(e,i);if(o){if(r){r.extraMetadata?.compression?.compressed&&(o.type=U.CompressedSPL);let a=wn(r.totalQuantityString,r.decimals);o.data.balance=a,o.data.amount=r.totalQuantityString,o.data.usd=r.price?.price?a.times(r.price.price).toNumber():void 0,o.data.usd_24h_change=r.price?.priceChange24h!==void 0?Hd(a.times(r.price.price).toNumber(),r.price?.priceChange24h):void 0,o.data.walletAddress=r.queriedWalletBalances.find(c=>c.quantity>0)?.address??""}return o}D.addBreadcrumb(F.Tokens,"deriveFungible",z.Error,{fungibleCaip19:JSON.stringify(e),tokenDetails:JSON.stringify(n),tokenBalance:JSON.stringify(r)}),D.captureError(new Error(`Fungible type could not be derived from ${JSON.stringify(e)}`),F.Fungibles)}s(ag,"deriveFungible");function cg(t,e){let n=Li(t);if(nt(n))throw new Error("Cannot create fake non-native fungible for native token");let r=e.address??t.address,i={amount:"0",balance:B(0),chain:e.chain,decimals:e.decimals,logoUri:e.logoURI??e.logoUri,name:e.name??"Unknown",symbol:e.symbol??"Unknown",key:r,walletAddress:"",spamStatus:e.spamStatus};switch(n){case U.SPL:return{type:n,data:{...i,mintAddress:r,programId:"",splTokenAccountPubkey:""}};case U.CompressedSPL:return{type:n,data:{...i,mintAddress:r,programId:""}};case U.ERC20:case U.SuiCoin:return{type:n,data:{...i,contractAddress:r}};case U.BRC20:return{type:n,data:{...i,firstCreatedInscriptionId:r}};case U.HypercoreAsset:return;default:Ue(n)}}s(cg,"createFakeNonNativeFungible");function ug(t,e){let n=Li(t),r={amount:"0",balance:B(0),chain:e.chain,decimals:e.decimals,logoUri:e.logoURI??e.logoUri,name:e.name??"Unknown",symbol:e.symbol??"Unknown",key:n,walletAddress:"",spamStatus:e.spamStatus};switch(t.slip44){case Xe.Solana:return{type:U.SolanaNative,data:r};case Xe.Bitcoin:return{type:U.BitcoinNative,data:r};case Xe.Ethereum:return{type:U.EthereumNative,data:r};case Xe.Base:return{type:U.BaseNative,data:r};case Xe.Monad:return{type:U.MonadNative,data:r};case Xe.Arbitrum:return{type:U.ArbitrumNative,data:r};case Xe.Hypercore:return{type:U.HypercoreNative,data:r};case Xe.Polygon:return{type:U.PolygonNative,data:r};case Xe.Sui:return{type:U.SuiNative,data:r};default:{let i=new Error("Missing native token implementation when creating fake a Fungible");throw Ue(t.slip44,i),i}}}s(ug,"createFakeNativeFungible");var lg=s((t,e)=>t?.length?[...t].sort((r,i)=>{if(e!==void 0){let o=r.type===U.CompressedSPL,a=i.type===U.CompressedSPL;if(o!==a)return e?o?-1:1:o?1:-1}return i.data.balance.minus(r.data.balance).toNumber()})[0]:void 0,"getSelectedFungible"),Hd=s((t,e)=>{if(e===-100)return-1*t;let n=t/(1+e/100);return t-n},"calculatePriceDifference");export{ic as a,oc as b,sc as c,Jd as d,vu as e,nn as f,O as g,pc as h,vb as i,oe as j,Sn as k,Tb as l,an as m,Zr as n,qe as o,ff as p,dt as q,$b as r,vc as s,Kt as t,mo as u,hf as v,T as w,xc as x,Lc as y,qc as z,ao as A,co as B,Vt as C,am as D,um as E,lm as F,hu as G,qt as H,Mp as I,go as J,bo as K,Um as L,Bp as M,Mo as N,Cn as O,xu as P,vo as Q,Lp as R,Bm as S,Dn as T,Vp as U,Hp as V,Xr as W,Uo as X,Yp as Y,Ro as Z,ol as _,Xp as $,Jp as aa,Zp as ba,Ip as ca,th as da,nh as ea,rh as fa,Rp as ga,ih as ha,sh as ia,ah as ja,Qt as ka,Yy as la,as as ma,tg as na,ng as oa,rg as pa,ch as qa,Vl as ra,ql as sa,Hl as ta,He as ua,wy as va,Al as wa,OC as xa,xl as ya,Gl as za,Ne as Aa,ni as Ba,Ql as Ca,si as Da,ai as Ea,Ot as Fa,we as Ga,Yl as Ha,Nt as Ia,Jo as Ja,Ct as Ka,ln as La,Qe as Ma,mi as Na,ly as Oa,gd as Pa,Dt as Qa,my as Ra,ad as Sa,bi as Ta,bd as Ua,ts as Va,vd as Wa,is as Xa,vi as Ya,wd as Za,Sd as _a,Ly as $a,Ky as ab,fs as bb,Hy as cb,ig as db,og as eb,zy as fb,sg as gb,Wy as hb};
//# sourceMappingURL=chunk-IOXJCRJI.js.map
