import{a as w}from"./chunk-CYENH7PC.js";import{a as n,g as l,i as c,n as g}from"./chunk-TSHWMJEM.js";c();g();var a=l(w(),1);var i=class{static{n(this,"LocalStorage")}async get(r){try{let e=(await a.default.storage.local.get(r))[r];return e==null?null:e.expiry?e.value:e}catch(t){let e=`[LocalStorage.get] Error getting key (${r}): ${t}`;throw new Error(e)}}async getAll(r){try{return await a.default.storage.local.get(r)}catch(t){let e=`[LocalStorage.getAll] Error getting key(s) (${r}): ${t}`;throw new Error(e)}}async remove(r){try{await a.default.storage.local.remove(r)}catch(t){let e=`[LocalStorage.remove] Error removing key(s) (${r}): ${t}`;throw new Error(e)}}async set(r,t){try{await a.default.storage.local.set({[r]:t})}catch(e){let o=`[LocalStorage.set] Error setting key (${r}): ${e}`;throw new Error(o)}}async setAll(r){try{await a.default.storage.local.set(r)}catch(t){let o=`[LocalStorage.setAll] Error setting keys (${Object.keys(r)}): ${t}`;throw new Error(o)}}async clear(){try{await a.default.storage.local.clear()}catch(r){let t=`[LocalStorage.clear] Error clearing storage: ${r}`;throw new Error(t)}}subscribe(r){let t=n(e=>{let o=Object.keys(e);for(let s of o)r(s)},"cb");return a.default.storage.onChanged.addListener(t),()=>{a.default.storage.onChanged.removeListener(t)}}async update(r,t){try{await navigator.locks.request(`storage.${r}`,async e=>{let o=await this.get(r),s=await t(o);await this.set(r,s)})}catch(e){let o=`[LocalStorage.update] Error updating key (${r}): ${e}`;throw new Error(o)}}};export{i as a};
//# sourceMappingURL=chunk-OJPBMZQC.js.map
