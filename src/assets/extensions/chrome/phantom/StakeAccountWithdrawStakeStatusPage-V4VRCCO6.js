import{a as G}from"./chunk-3YKALUMV.js";import{a as g}from"./chunk-5S2LR6TU.js";import{d as V}from"./chunk-UN5DVVHZ.js";import{e as Q,f as U,g as q}from"./chunk-KYC3TN2Q.js";import"./chunk-RKISZW47.js";import"./chunk-IAL2BZAA.js";import"./chunk-M6UNEOVM.js";import"./chunk-DQLUBVF4.js";import"./chunk-IP6N33CZ.js";import"./chunk-S2IXR5HZ.js";import"./chunk-EOII3ZM4.js";import{b as A}from"./chunk-KUVQSLSD.js";import"./chunk-H3HVEJML.js";import{_a as f}from"./chunk-NDIBTKLE.js";import"./chunk-6JMEWALM.js";import"./chunk-KWNEQJE2.js";import{N as K,_ as M}from"./chunk-HGG2EQ5O.js";import"./chunk-PQUTVVRL.js";import"./chunk-IOXJCRJI.js";import"./chunk-XGLSOW44.js";import"./chunk-56GZZQJU.js";import"./chunk-QLEUWUCH.js";import"./chunk-OJPBMZQC.js";import"./chunk-FLYQWZR6.js";import"./chunk-CYENH7PC.js";import{Fb as _,p as H}from"./chunk-F236ETGH.js";import{Va as B,Wa as F,p as z,q as v}from"./chunk-QF7OLC35.js";import{A as P,D as N,Kb as T,Wa as m}from"./chunk-LPV5DSV2.js";import"./chunk-NEE4FZIK.js";import"./chunk-BYU664DD.js";import{Ba as h,L as et,M as R,Y as O}from"./chunk-JYKVQ4NC.js";import"./chunk-U7OZEJ4F.js";import"./chunk-ZRGHR2IN.js";import{a as W,g as D,i as x,n as I}from"./chunk-TSHWMJEM.js";x();I();var i=D(et(),1);var e=D(R(),1),ot=W(r=>{let c={stakePubkey:r.stakeAccountPubkey,amount:r.amount,usdPerSol:r.usdPerSol,onClose:r.onClose},{t}=O(),{withdrawStake:d,needsLedgerApproval:l,txHash:n,confirmationStatus:s,isError:u,error:k,onDeny:a}=rt(c);if(l)return(0,e.jsx)(U,{ledgerAction:d,cancel:a});if(u){let o=k,S=o?.message,w=Q(o),p=o?.message.includes(v),E=o?.message.includes(z);return w?(0,e.jsx)(q,{ledgerActionError:o,onRetryClick:d,onCancelClick:a}):p||E?(0,e.jsx)(G,{onCancelClick:a}):(0,e.jsxs)(A,{icon:"error",title:t("stakeAccountWithdrawStakeWithdrawalFailed"),onClose:a,showButton:!!n,children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:S??t("stakeAccountWithdrawStakeWithdrawalFailedDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})}return s==="confirmed"||s==="finalized"?(0,e.jsxs)(A,{icon:"success",title:t("stakeAccountWithdrawStakeSolWithdrawn"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsxs)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:[t("stakeAccountWithdrawStakeSolWithdrawnDescription.part1"),(0,e.jsx)("br",{})," ",t("stakeAccountWithdrawStakeSolWithdrawnDescription.part2")]}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]}):(0,e.jsxs)(A,{icon:"loading",title:t("stakeAccountWithdrawStakeWithdrawingSol"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountWithdrawStakeWithdrawingSolDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})},"StakeAccountWithdrawStakeStatusPage"),Ct=ot,rt=W(({onClose:r,...c})=>{let{data:t,isSuccess:d}=_(),{accountIdentifier:l,isLedgerAccount:n,solanaChainAddress:s,solanaPublicKey:u,connection:k,networkID:a}=(0,i.useMemo)(()=>{let Y=t?.identifier??"",C=(t?.addresses??[]).find(tt=>T.isSolanaNetworkID(tt.networkID)),Z=new m.PublicKey(C?.address??""),$=t?.type===H.Ledger,L=C?.networkID,j=B(F(L));return{accountIdentifier:Y,isLedgerAccount:$,solanaChainAddress:C,solanaPublicKey:Z,connection:j,networkID:L}},[t]),o=V(k),S=(0,i.useCallback)(()=>{o.mutate({...c,accountIdentifier:l,senderAddress:s,stakePubkey:new m.PublicKey(c.stakePubkey),authorizedPubkey:u})},[l,c,s,u,o]),w=K(),p=(0,i.useCallback)(()=>{w.denied({chainType:P.Solana,chainName:N.Solana,networkId:T.getSolanaNetworkIDValue(a),type:"withdraw"}),r()},[a,r,w]);(0,i.useEffect)(()=>{if(d){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");n||S()}},[d]);let b=o.data?.id,y=M(k,2e3,b),J=n&&(o.isIdle||o.isPending),X=y.data?.value?.confirmationStatus;return{withdrawStake:S,onDeny:p,needsLedgerApproval:J,txHash:b,confirmationStatus:X,isError:o.isError||y.isError,error:o.error||y.error}},"useWithdrawStakeOnMount");export{ot as StakeAccountWithdrawStakeStatusPage,Ct as default};
//# sourceMappingURL=StakeAccountWithdrawStakeStatusPage-V4VRCCO6.js.map
