import{K as oi,Oa as ni,Q as ft,R as ri,ab as ii,fa as xo,qa as Nt,u as ei}from"./chunk-IOXJCRJI.js";import{b as xe}from"./chunk-XGLSOW44.js";import{e as ko,ua as Ee}from"./chunk-FLYQWZR6.js";import{Ac as qn,B as Fn,Fb as re,gb as Vn,i as Mn,ka as Kn,p as pe,pb as Wn,wc as Et}from"./chunk-F236ETGH.js";import{Jd as Wt,Oc as $n,Pc as B,Qc as zn,Qd as _n,Rb as br,Rc as Zn,Td as ti,Ua as To,Vb as Qt,Vd as Se,Xb as vr,Xc as We,Zb as Gn,_b as Hn,ac as xr,bc as Yn,d as Pe,dc as bo,eb as ho,fb as wo,hb as Yt,jc as vo,mc as Qn,qc as jn,tc as Jn,vd as Xn}from"./chunk-QF7OLC35.js";import{$e as Bn,A as q,Ad as I,Ba as Pa,Bc as Ke,D as mt,Da as Tr,F as le,Fe as Rn,Hc as Y,Kb as N,Kc as Q,Mb as hn,Mf as xt,Na as kn,Ob as wn,Qb as bn,Rb as oe,T as Ar,Ta as An,Tc as xn,U as wt,Ua as Tn,Va as bt,Wa as y,We as vt,Xe as Un,Yb as vn,_c as _,_e as fe,bd as lt,be as hr,bf as Dn,dd as R,ee as Cn,fd as En,fe as Ln,hd as Pn,ie as In,jd as Ve,me as Nn,ud as pt,wd as ve}from"./chunk-LPV5DSV2.js";import{c as go,m as Ca}from"./chunk-NEE4FZIK.js";import{A as So,B as yn,C as yo,D as gn,Ea as Ao,J as it,K as O,L,La as ct,M as Ht,Pa as On,Sa as j,T as v,Y as tt,Zb as wr,f as fo,lb as ne,r as kr,s as De,t as ee,u as fn,v as Sn,w as A,y as be}from"./chunk-JYKVQ4NC.js";import{a as r,d as xa,g as x,i as s,l as Ea,m as Buffer,n as a}from"./chunk-TSHWMJEM.js";var qs=xa(P=>{"use strict";s();a();var gu=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P,"__esModule",{value:!0});P.map=P.array=P.rustEnum=P.str=P.vecU8=P.tagged=P.vec=P.bool=P.option=P.publicKey=P.i256=P.u256=P.i128=P.u128=P.i64=P.u64=P.struct=P.f64=P.f32=P.i32=P.u32=P.i16=P.u16=P.i8=P.u8=void 0;var G=br(),ku=Tr(),Au=gu(go()),$t=br();Object.defineProperty(P,"u8",{enumerable:!0,get:r(function(){return $t.u8},"get")});Object.defineProperty(P,"i8",{enumerable:!0,get:r(function(){return $t.s8},"get")});Object.defineProperty(P,"u16",{enumerable:!0,get:r(function(){return $t.u16},"get")});Object.defineProperty(P,"i16",{enumerable:!0,get:r(function(){return $t.s16},"get")});Object.defineProperty(P,"u32",{enumerable:!0,get:r(function(){return $t.u32},"get")});Object.defineProperty(P,"i32",{enumerable:!0,get:r(function(){return $t.s32},"get")});Object.defineProperty(P,"f32",{enumerable:!0,get:r(function(){return $t.f32},"get")});Object.defineProperty(P,"f64",{enumerable:!0,get:r(function(){return $t.f64},"get")});Object.defineProperty(P,"struct",{enumerable:!0,get:r(function(){return $t.struct},"get")});var ae=class extends G.Layout{static{r(this,"BNLayout")}constructor(e,o,n){super(e,n),this.blob=(0,G.blob)(e),this.signed=o}decode(e,o=0){let n=new Au.default(this.blob.decode(e,o),10,"le");return this.signed?n.fromTwos(this.span*8).clone():n}encode(e,o,n=0){return this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),o,n)}};function Vs(t){return new ae(8,!1,t)}r(Vs,"u64");P.u64=Vs;function Tu(t){return new ae(8,!0,t)}r(Tu,"i64");P.i64=Tu;function hu(t){return new ae(16,!1,t)}r(hu,"u128");P.u128=hu;function wu(t){return new ae(16,!0,t)}r(wu,"i128");P.i128=wu;function bu(t){return new ae(32,!1,t)}r(bu,"u256");P.u256=bu;function vu(t){return new ae(32,!0,t)}r(vu,"i256");P.i256=vu;var Gt=class extends G.Layout{static{r(this,"WrappedLayout")}constructor(e,o,n,i){super(e.span,i),this.layout=e,this.decoder=o,this.encoder=n}decode(e,o){return this.decoder(this.layout.decode(e,o))}encode(e,o,n){return this.layout.encode(this.encoder(e),o,n)}getSpan(e,o){return this.layout.getSpan(e,o)}};function xu(t){return new Gt((0,G.blob)(32),e=>new ku.PublicKey(e),e=>e.toBuffer(),t)}r(xu,"publicKey");P.publicKey=xu;var en=class extends G.Layout{static{r(this,"OptionLayout")}constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,G.u8)()}encode(e,o,n=0){return e==null?this.discriminator.encode(0,o,n):(this.discriminator.encode(1,o,n),this.layout.encode(e,o,n+1)+1)}decode(e,o=0){let n=this.discriminator.decode(e,o);if(n===0)return null;if(n===1)return this.layout.decode(e,o+1);throw new Error("Invalid option "+this.property)}getSpan(e,o=0){let n=this.discriminator.decode(e,o);if(n===0)return 1;if(n===1)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid option "+this.property)}};function Eu(t,e){return new en(t,e)}r(Eu,"option");P.option=Eu;function Pu(t){return new Gt((0,G.u8)(),Cu,Lu,t)}r(Pu,"bool");P.bool=Pu;function Cu(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}r(Cu,"decodeBool");function Lu(t){return t?1:0}r(Lu,"encodeBool");function Iu(t,e){let o=(0,G.u32)("length"),n=(0,G.struct)([o,(0,G.seq)(t,(0,G.offset)(o,-o.span),"values")]);return new Gt(n,({values:i})=>i,i=>({values:i}),e)}r(Iu,"vec");P.vec=Iu;function Nu(t,e,o){let n=(0,G.struct)([Vs("tag"),e.replicate("data")]);function i({tag:c,data:u}){if(!c.eq(t))throw new Error("Invalid tag, expected: "+t.toString("hex")+", got: "+c.toString("hex"));return u}return r(i,"decodeTag"),new Gt(n,i,c=>({tag:t,data:c}),o)}r(Nu,"tagged");P.tagged=Nu;function Ws(t){let e=(0,G.u32)("length"),o=(0,G.struct)([e,(0,G.blob)((0,G.offset)(e,-e.span),"data")]);return new Gt(o,({data:n})=>n,n=>({data:n}),t)}r(Ws,"vecU8");P.vecU8=Ws;function Mu(t){return new Gt(Ws(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}r(Mu,"str");P.str=Mu;function Fu(t,e,o){let n=(0,G.union)(o??(0,G.u8)(),e);return t.forEach((i,c)=>n.addVariant(c,i,i.property)),n}r(Fu,"rustEnum");P.rustEnum=Fu;function Ru(t,e,o){let n=(0,G.struct)([(0,G.seq)(t,e,"values")]);return new Gt(n,({values:i})=>i,i=>({values:i}),o)}r(Ru,"array");P.array=Ru;var on=class extends G.Layout{static{r(this,"MapEntryLayout")}constructor(e,o,n){super(e.span+o.span,n),this.keyLayout=e,this.valueLayout=o}decode(e,o){o=o||0;let n=this.keyLayout.decode(e,o),i=this.valueLayout.decode(e,o+this.keyLayout.getSpan(e,o));return[n,i]}encode(e,o,n){n=n||0;let i=this.keyLayout.encode(e[0],o,n),c=this.valueLayout.encode(e[1],o,n+i);return i+c}getSpan(e,o){return this.keyLayout.getSpan(e,o)+this.valueLayout.getSpan(e,o)}};function Uu(t,e,o){let n=(0,G.u32)("length"),i=(0,G.struct)([n,(0,G.seq)(new on(t,e),(0,G.offset)(n,-n.span),"values")]);return new Gt(i,({values:c})=>new Map(c),c=>({values:Array.from(c.entries())}),o)}r(Uu,"map");P.map=Uu});s();a();var Pt;(function(t){t.DirectLink="Deep Link",t.Modal="Modal",t.BottomSheet="Bottom Sheet"})(Pt||(Pt={}));var Oe;(function(t){t.Buy="Buy",t.Collectibles="Collectibles",t.ConnectHardwareWallet="Connect Hardware Wallet",t.ConvertStakeAccount="Convert Stake Account",t.ConvertToJito="Convert to Jito",t.MintPSOL="Mint PSOL",t.Explore="Explore",t.Perps="Perps",t.MintCollectible="Mint Collectible",t.SocialLogin="Social Login",t.SettingsClaimUsername="Settings: Claim Username",t.SettingsCurrency="Settings: Currency",t.SettingsImportSeedPhrase="Settings: Import Seed Phrase",t.SettingsNotificationPreferences="Settings: Notification Preferences",t.SettingsSecurityAndPrivacy="Settings: Security & Privacy",t.TokenCategory="Token Category",t.Swapper="Swapper",t.ExternalLink="External Link",t.Token="Token",t.TokenChat="Token Chat",t.Terminal="Terminal"})(Oe||(Oe={}));var La=A.enum(["dark","light"]).default("dark").catch("dark"),Ia=A.enum(["normal","full","background"]).default("normal").catch("normal"),Na=A.string().regex(/^#[0-9a-fA-F]{6}$/),Ma=A.string().regex(/^#[0-9a-fA-F]{8}$/),qe=A.union([Na,Ma]).optional().catch(void 0),Pd=A.object({theme:La,imageBleed:Ia,"overrides.titleColor":qe,"overrides.descriptionColor":qe,"overrides.domainColor":qe,gradientStartColor:qe,gradientEndColor:qe}),C;(function(t){t.Multichain="Multichain",t.MultichainSwapper="MultichainSwapper",t.InvalidChecksum="InvalidChecksum",t.AdditionalPermissions="AdditionalPermissions",t.SuiWelcome="SuiWelcome",t.SuiWelcomeDefaultOn="SuiWelcomeDefaultOn",t.MonadMainnetWelcome="MonadMainnetWelcome",t.ArbitrumWelcome="ArbitrumWelcome",t.StakingWelcome="StakingWelcomeNew",t.ClaimUsernameNudge="ClaimUsernameNudge",t.QuickClaimUsername="QuickClaimUsername",t.SeedlessPinVerification="SeedlessPinVerification",t.TermsOfServiceUpdate="TermsOfServiceUpdate",t.NotificationsUpdate="NotificationsUpdate",t.PerpsJoinFeedbackGroup="PerpsJoinFeedbackGroup",t.PerpsIntro="PerpsIntro",t.CashWaitlistActivated="CashWaitlistActivated",t.CashGeneralAccessActivation="CashGeneralAccessActivation",t.PredictionInsiderTradingAttestation="PredictionInsiderTradingAttestation"})(C||(C={}));s();a();s();a();var Eo=r(t=>{let e=[];for(let o in t.errors)Array.isArray(t.errors[o])&&e.push(t.errors[o].join(", "));return e.join(", ")},"formatErrorMessages");var Po;(function(t){t.Upgrade="upgrade",t.Noop="noop"})(Po||(Po={}));var ai=r(async({locale:t})=>{let e;try{let o=JSON.stringify({platform:So,appVersion:be,locale:t}),n=await _.api().headers({"Content-Type":"application/json"}).post(({apiEnv:c})=>`/banners/force_upgrade/${c}/v1`,o);if(n.status===400){let c=await n.data,u=Eo(c);throw new Error(u)}else if(n.status<200||n.status>299)throw new Error(`status code: ${n.status}, body: ${n.statusText}`);let i=n.data;return i?{...i}:si}catch(o){return e===400&&o instanceof Error&&Q.captureError(o,Y.ActionBanner),si}},"fetchForceUpgradeStatus"),si={forceUpgradeStatus:Po.Noop};s();a();s();a();var ci=r(async({locale:t})=>({...await ai({locale:t})}),"fetchForceUpgrade");s();a();var qt="@phantom/interstitials",Ce=`${qt}:action-banners`,ui=`${qt}:force-upgrade`,Er={actionBanners:r((t,e)=>[Ce,{accountIdentifier:t,accessToken:e}],"actionBanners"),hasSeenInterstitial:r(t=>[`${qt}:has-seen-interstitial`,{feature:t}],"hasSeenInterstitial"),interstitialViewHistory:r(t=>[`${qt}:interstitial-view-history`,{feature:t}],"interstitialViewHistory"),appLaunchTimes:r(()=>[`${qt}:app-launch-times`],"appLaunchTimes"),lastOnboardedAt:r(()=>[`${qt}:last-onboarded-at`],"lastOnboardedAt"),contentCards:[`${qt}:content-cards`]};var Fa=r(()=>I({queryKey:[ui],queryFn:r(async()=>{let e=ko(v.language)??"en";return ci({locale:e})},"queryFn"),enabled:!!be,staleTime:R({minutes:5})}),"useForceUpgrade");s();a();s();a();s();a();s();a();var Ra={[C.Multichain]:2,[C.MultichainSwapper]:1,[C.InvalidChecksum]:1,[C.SuiWelcome]:1,[C.SuiWelcomeDefaultOn]:1,[C.MonadMainnetWelcome]:1,[C.ArbitrumWelcome]:1,[C.ClaimUsernameNudge]:1,[C.QuickClaimUsername]:1,[C.SeedlessPinVerification]:1,[C.AdditionalPermissions]:1,[C.TermsOfServiceUpdate]:1,[C.StakingWelcome]:1,[C.PerpsJoinFeedbackGroup]:1,[C.PerpsIntro]:1,[C.NotificationsUpdate]:1,[C.CashWaitlistActivated]:1,[C.CashGeneralAccessActivation]:1,[C.PredictionInsiderTradingAttestation]:1},Ua={[C.Multichain]:3,[C.MultichainSwapper]:1,[C.InvalidChecksum]:1,[C.SuiWelcome]:1,[C.SuiWelcomeDefaultOn]:1,[C.MonadMainnetWelcome]:1,[C.ArbitrumWelcome]:1,[C.StakingWelcome]:1,[C.ClaimUsernameNudge]:1,[C.QuickClaimUsername]:1,[C.AdditionalPermissions]:1,[C.SeedlessPinVerification]:1,[C.TermsOfServiceUpdate]:1,[C.PerpsJoinFeedbackGroup]:1,[C.PerpsIntro]:1,[C.NotificationsUpdate]:1,[C.CashWaitlistActivated]:1,[C.CashGeneralAccessActivation]:1,[C.PredictionInsiderTradingAttestation]:1},Co=r(t=>yo?Ra[t]:yn?Ua[t]:-1,"getMostRecentVersion");var Ba=1,Lo=".phantom-labs.settings.interstitials";var Da={...Pn(Lo,[`${qt}:has-seen-interstitial`,`${qt}:interstitial-view-history`],(t,e)=>({version:Ba,interstitialsSeen:{...t?.interstitialsSeen,...e?.interstitialsSeen},interstitialsViewHistory:{...t?.interstitialsViewHistory,...e?.interstitialsViewHistory}}))};var St;(function(t){t.LastOnboardedAt="lastOnboardedAt",t.AppLaunchTimes="appLaunchTimes",t.DismissedActionBanners="dismissedActionBanners",t.DismissedContentCards="dismissedContentCards"})(St||(St={}));var Ka=A.object({version:A.literal(1),dismissedContentCards:A.record(A.string().describe("cardId"),A.object({dismissedTimestamp:A.number().describe("unix timestamp in milliseconds of dismissal")}))}),[Io,di]=xn("interstitials",[{key:St.LastOnboardedAt,defaultValue:-1,type:"number"},{key:St.AppLaunchTimes,defaultValue:[],type:"array",validator:A.array(A.number())},{key:St.DismissedActionBanners,defaultValue:[],type:"array",validator:A.array(A.string())},{key:St.DismissedContentCards,type:"object",validator:Ka,nullable:!0}]),ye=r((...t)=>Ke(Io,...t),"useInterstitialsStorage"),No=r((...t)=>Ke(di,...t),"useSetInterstitialsStorage"),Va=1,Wa=A.object({version:A.literal(1),interstitialsSeen:A.record(A.number()).optional(),interstitialsViewHistory:A.record(A.array(A.number())).optional()}),qa=r((t,e)=>{let o=t,n=e;return!o&&!n?null:{version:Va,interstitialsSeen:{...o?.interstitialsSeen??{},...n?.interstitialsSeen??{}},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},...n?.interstitialsViewHistory??{}}}},"interstitialsResolver"),[Pr,mi,Oa]=En("interstitials",[{key:Lo,type:"object",validator:Wa,nullable:!0,resolver:qa,updateOn:"idle"}]);var Cr=r((...t)=>Ke(mi,...t),"useSetSyncedInterstitialsStorage"),li=r((...t)=>Ke(Oa,...t),"useAsyncSyncedInterstitialsStorage");var Ge=r(t=>{let{value:e,isReady:o}=li(".phantom-labs.settings.interstitials"),n=Co(t);return{isReady:o,data:(e?.interstitialsSeen?.[t]??0)>=n}},"useHasSeenInterstitial");s();a();var pi=x(L());var Ga=1,Tt=r(t=>{let e=Cr(".phantom-labs.settings.interstitials");return(0,pi.useCallback)(async()=>{let o=Pr(".phantom-labs.settings.interstitials"),n=Co(t);await e({version:Ga,interstitialsSeen:{...o?.interstitialsSeen??{},[t]:n},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},[t]:[...o?.interstitialsViewHistory?.[t]??[],Date.now()]}})},[t,e])},"useSetHasSeenInterstitial");s();a();s();a();s();a();s();a();var Si=r(async({accountID:t,deviceId:e,locale:o,rootId:n,selectedAccountAddresses:i,accessToken:c})=>{let u;try{let d={accountID:t,deviceId:e,locale:o,platform:So,rootId:n,selectedAccountAddresses:i,version:be},m=await _.api().headers({"Content-Type":"application/json"}).bearer(c).post(({apiEnv:S})=>`/banners/get_banners/${S}/v2`,d);if(m.status===400){let S=await m.data,l=Eo(S);throw new Error(l)}else if(m.status<200||m.status>299)throw new Error(`status code: ${m.status}, body: ${await m.statusText}`);let p=m.data;return p?{...p,banners:p.banners??[]}:fi}catch(d){return u===400&&d instanceof Error&&Q.captureError(d,Y.ActionBanner),fi}},"fetchSanityActionBanners"),fi={id:void 0,banners:[]};s();a();s();a();var Lr=r(t=>t?Object.values(Oe).includes(t):!1,"isActionBannerDestinationSupported");s();a();var yi=r(t=>{switch(t){case Pt.BottomSheet:return yo;case Pt.Modal:return!0;default:return!1}},"isActionBannerInterstitialSupported");var gi=r(t=>{let{bannerType:e,destinationType:o}=t;switch(e){case Pt.DirectLink:return Lr(o);case Pt.BottomSheet:case Pt.Modal:return yi(e)&&Lr(o);default:return!1}},"isActionBannerSupported");var ki=r(async({accountID:t,deviceId:e,dismissedBanners:o,locale:n,rootId:i,selectedAccountAddresses:c,accessToken:u})=>{let d=await Si({accountID:t,deviceId:e,locale:n,rootId:i,selectedAccountAddresses:c,accessToken:u});return{...d,banners:d.banners.filter(m=>gi(m)&&!o.includes(m.id))}},"fetchActionBanners");var Ha=R({minutes:1}),Ya=r(()=>{let t=xt(),{data:e,isLoading:o}=Kn(),{data:n}=re(),i=r(async()=>{let c=n?.type!==pe.ReadOnly?n?.addresses.map(vn)??[]:[],u=n?.type===pe.Seed?n.seedIdentifier:null,d=Io(St.DismissedActionBanners),m=ko(v.language)??"en",p=await t.getDeviceId();return ki({accountID:n?.identifier??"",deviceId:p,dismissedBanners:d,locale:m,rootId:u,selectedAccountAddresses:c,accessToken:e?.accessToken})},"queryFn");return I({queryKey:Er.actionBanners(n?.identifier,e?.accessToken),queryFn:i,enabled:!o&&!!n?.identifier,staleTime:Ha})},"useActionBanners");s();a();s();a();var Mo=x(L());s();a();var Ai=r(()=>{let t=ye(St.LastOnboardedAt),e=ye(St.AppLaunchTimes);if(e.length<2)return!0;if(t!==void 0){let[o,n]=e;if(t<o&&t<n)return!1}return!0},"useHasJustOnboarded");function He(t,e,o){let{data:n,isReady:i}=Ge(t),{data:c}=In(e?[e]:[]),u=c?.length===1?c[0]:!0,d=Ai(),m=(0,Mo.useCallback)(()=>o(),[o]);return(0,Mo.useMemo)(()=>u&&i&&!n&&!d&&m(),[u,n,d,m,i])}r(He,"useNewFeatureVisibility");s();a();var Fo=x(Ht());var Le=x(L());var Ir={data:{feature:"arbitrum"}},Qa=r(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:n=r(()=>!0,"condition")})=>{let{t:i}=tt(),{mutateAsync:c}=Vn(),[u]=Wn([mt.Arbitrum]),d=Tt(C.ArbitrumWelcome),m=He(C.ArbitrumWelcome,"enable-arbitrum",()=>n()&&!u&&!fo()),p=(0,Le.useCallback)(async()=>{await c({chainIDs:[mt.Arbitrum]}),t(),d()},[c,t,d]),S=(0,Le.useCallback)(()=>{e(),d()},[e,d]),l=(0,Le.useMemo)(()=>({title:i("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:i("interstitialArbitrumWelcomeItemTitle_1"),icon:(0,Fo.jsx)(ne,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:i("interstitialArbitrumWelcomeItemTitle_2"),icon:(0,Fo.jsx)(ne,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:i("interstitialArbitrumWelcomeItemTitle_3"),icon:(0,Fo.jsx)(ne,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:i("interstitialArbitrumWelcomePrimaryButtonText"),onAction:p,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Ir}},secondaryButton:{children:i("commandNotNow"),onAction:S,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Ir}},onDismiss:d,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:Ir}}),[i,p,S,o,d]);return(0,Le.useMemo)(()=>({interstitial:l,shouldShow:m}),[l,m])},"useArbitrumWelcomeModal");s();a();var Ro=x(Ht());var Ie=x(L());var Nr={data:{feature:"staking"}},ja=r(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:n=r(()=>!0,"condition")})=>{let{t:i}=tt(),c=Tt(C.StakingWelcome),u=He(C.StakingWelcome,"enable-psol-welcome-modal",()=>n()&&!fo()),d=(0,Ie.useCallback)(()=>{t(),c()},[t,c]),m=(0,Ie.useCallback)(()=>{e(),c()},[e,c]),p=(0,Ie.useMemo)(()=>({title:void 0,mobileTitleSheetInset:gn,items:[{key:"stakingValueProp1",title:i("stakingInterstitialWelcomeItemTitle_1"),icon:(0,Ro.jsx)(ne,{icon:"InfoCircle",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:i("stakingInterstitialWelcomeItemTitle_2"),icon:(0,Ro.jsx)(ne,{icon:"TrendingUp",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:i("stakingInterstitialWelcomeItemTitle_3"),icon:(0,Ro.jsx)(ne,{icon:"Shield",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:i("stakingInterstitialWelcomePrimaryButtonText"),onAction:d,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Nr},background:"spot",theme:"positive"},secondaryButton:{children:i("commandNotNow"),onAction:m,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Nr}},onDismiss:c,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:Nr},disclaimers:[i("mintStakeInfoPageDisclaimer1"),i("mintStakeInfoPageDisclaimer2_US")]}),[i,d,m,o,c]);return(0,Ie.useMemo)(()=>({interstitial:p,shouldShow:u}),[p,u])},"useStakingWelcomeModal");s();a();var jt=x(Ht());var Ne=x(L());var Ja="https://phantom.com/terms",$a="https://phantom.com/privacy",za="https://phantom.com/terms-and-privacy-update",Za=r(({onConfirm:t,openUrl:e})=>{let{t:o}=tt(),n=xt(),i=Tt(C.TermsOfServiceUpdate),c=(0,Ne.useCallback)(async()=>{i(),t()},[i,t]),u=(0,Ne.useCallback)(m=>async()=>{await n.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await e(m)},[n,e]),d=(0,Ne.useMemo)(()=>({title:o("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:o("commandContinue"),onAction:c,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:(0,jt.jsx)(Xa,{openUrl:u}),dismissGestureDisabled:!0}),[o,c,u]);return(0,Ne.useMemo)(()=>({interstitial:d}),[d])},"useTermsOfServiceUpdated"),Xa=r(({openUrl:t})=>(0,jt.jsx)(ct,{marginTop:24,children:(0,jt.jsx)(j,{font:"body",align:"center",children:(0,jt.jsxs)(xe,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle",children:["Please review our updated",(0,jt.jsx)(j,{onPress:t(Ja),color:"spotBase",children:"Terms of Use"}),"and",(0,jt.jsx)(j,{onPress:t($a),color:"spotBase",children:"Privacy Policy"}),". By continuing, you agree to the updated terms and policies.",(0,jt.jsx)(j,{onPress:t(za),color:"spotBase",children:"Learn More"}),"."]})})}),"TermsOfServiceUpdateDescription");s();a();var Ti=x(Ht());var hi=x(L());s();a();var _a=x(Ht());var wi=x(L());s();a();var tc=x(Ht());var bi=x(L());s();a();var ec=x(L());s();a();var oc=x(L());s();a();var vi=x(L());var rc=r(()=>{let t=ye(St.DismissedActionBanners),e=No(St.DismissedActionBanners),o=pt();return(0,vi.useCallback)(n=>{e([...t,n]),o.setQueriesData({queryKey:[Ce]},i=>{if(!i)return;let c=i.banners.filter(u=>u.id!==n);return{...i,banners:c}})},[t,e,o])},"useDismissActionBanner");s();a();s();a();var nc=x(L());s();a();var Sf=R({seconds:20}),yf=R({seconds:5});var Ef=R({minutes:5});s();a();var xi=r(async t=>{await t.invalidateQueries({queryKey:[Ce]})},"invalidateActionBanners");Nn(xi);var Ei=r(t=>t,"coerceStorageKey"),jf=r(t=>ye(Ei(t)),"useInterstitialStorage"),Jf=r(t=>No(Ei(t)),"useSetInterstitialStorage");s();a();s();a();var Mr=class{static{r(this,"ActionBannerAnalytics")}#t;constructor(e){this.#t=e}onBannerSeen=r(e=>{this.#t.capture("actionBannerSeenByUser",{data:{banner:e}})},"onBannerSeen");onBannerClick=r(e=>{this.#t.capture("actionBannerClickedByUser",{data:{banner:e}})},"onBannerClick");onBannerDismiss=r(e=>{this.#t.capture("actionBannerDismissedByUser",{data:{banner:e}})},"onBannerDismiss");onInterstitialSeen=r(e=>{this.#t.capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})},"onInterstitialSeen");onInterstitialPrimaryClick=r(e=>{this.#t.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialPrimaryClick");onInterstitialSecondaryClick=r(e=>{this.#t.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialSecondaryClick");onInterstitialDismiss=r(e=>{this.#t.capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})},"onInterstitialDismiss")};s();a();var ic=r(({id:t,humanReadableId:e,description:o,bannerType:n})=>({id:t,humanReadableId:e,description:o,type:n}),"generateActionBannerBaseAnalyticsPayload"),sc=r(({id:t,humanReadableId:e,description:o,bannerType:n,interstitial:i})=>{let{title:c,primaryButtonText:u,secondaryButtonText:d}=i,m;if(n===Pt.Modal)for(let[p,S]of Object.values(i.lineItems).entries())m={...m??{},[`lineItem${p+1}`]:{title:S.title,description:S.description}};return{id:t,humanReadableId:e,description:o,type:n,interstitial:{title:c,body:m,primaryButtonText:u??v.t("commandContinue"),secondaryButtonText:d??v.t("commandDismiss")}}},"generateActionBannerInterstitialAnalyticsPayload");s();a();s();a();var Uo=x(Pa(),1);var Ci=x(Tr(),1);var Pi=(0,Uo.struct)([(0,Uo.u8)("instruction"),Gn("amount")]);function Fr(t,e,o,n,i=[],c=Qt){let u=Yn([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],o,i),d=Buffer.alloc(Pi.span);return Pi.encode({instruction:Hn.Approve,amount:BigInt(n)},d),new Ci.TransactionInstruction({keys:u,programId:c,data:d})}r(Fr,"createApproveInstruction");s();a();var Bo=x(Tr(),1);function Li(t,e,o,n,i=Qt,c=vr){return ac(t,e,o,n,Buffer.from([1]),i,c)}r(Li,"createAssociatedTokenAccountIdempotentInstruction");function ac(t,e,o,n,i,c=Qt,u=vr){let d=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Bo.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1}];return new Bo.TransactionInstruction({keys:d,programId:u,data:i})}r(ac,"buildAssociatedTokenAccountInstruction");var Ii=new y.PublicKey("Config1111111111111111111111111111111111111"),cc="https://docs.solana.com/staking",uc="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating";var yt={type:We.SolanaNative,data:{amount:"0",balance:new it(0),chain:{id:N.solana.mainnetID,imageUrl:N.solana.iconUrl,name:N.solana.name,symbol:N.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:Jn.NotVerified}},Ni=new Map([[wt.Solana.Mainnet,yt]]);var Rr="https://www.jito.network/staking/?mode=unstake",Ur="https://help.phantom.com/hc/en-us/articles/29846774040467",dc="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Br="https://help.phantom.com/hc/en-us/articles/41210373532307";var Dr="https://kamino.com/borrow/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",ie="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",Do=4e6,Ye=2282880;s();a();var Me;(function(t){t.Initialized="initialized",t.Delegated="delegated"})(Me||(Me={}));var Qe=A.object({apy:A.number()}),mc=A.object({validators:A.array(A.string())}),Mi=A.object({epoch:A.number(),effectiveSlot:A.number(),amount:A.number(),postBalance:A.number(),percentChange:A.number(),apr:A.number(),timestamp:A.number()}),lc=A.object({items:A.array(Mi)}),pc=A.object({address:A.string(),chainId:Ar,decimals:A.number(),logoURI:A.string(),name:A.string(),symbol:A.string()}),fc=A.object({caip19:A.string(),metadata:pc}),Sc=A.object({vote_account:A.string()}),yc=A.object({apy:A.string(),totalRewardsFeePercentage:A.string().optional(),chainId:Ar,convertRatio:A.string(),name:A.string(),stakePoolAddress:A.string(),stakePoolTokenMetadata:fc,validators:A.array(Sc)}),Fi=A.record(A.string(),A.array(yc)),sy=A.object({totalStaked:A.string(),rewards:A.string()}),je=r(t=>t==="inactive","canWithdrawStakeAccount"),Je=r(t=>t==="active"||t==="activating","canUnstakeStakeAccount");s();a();function Ko(t,e){let o=new O(t/100),n=new O(e/100);return o.minus(o.times(n)).times(100).decimalPlaces(2).toNumber()}r(Ko,"calculateTotalValidatorAPY");function Ri(t){return new O(t/100).times(100).decimalPlaces(2).toNumber()}r(Ri,"formatTotalValidatorAPY");s();a();s();a();s();a();var J="staking",Mt;(function(t){t.convertStakeList="convertStakeAccountList",t.supportedTokens="liquidStakingSupportedTokens",t.convertStakeTransaction="convertStakeTransaction",t.mintTokenTransaction="mintTokenTransaction",t.withdrawLiquidStakeTransaction="withdrawLiquidStakeTransaction",t.featureUsed="featureUsed"})(Mt||(Mt={}));var Kr=[J,"stakeAccounts"],Vr=[J,"stakeActivationData"],Wr=[J,Mt.convertStakeList],qr=[J,Mt.convertStakeTransaction],Or=[J,Mt.mintTokenTransaction],gc=[J,Mt.withdrawLiquidStakeTransaction],kc=[J,"deactivateStakeTransaction"],Gr="averageValidatorApy",Ac="recommendedValidators",Tc="signatureStatus",hc="stakeAccountMinBalance",wc="stakeRewardsHistory",bc="stakeApy",vc="validatorInfo",xc="voteAccounts",Ec="validatorsV2",Pc="keybaseUserAvatar",Cc="epochTimeRemaining",F={keybaseUserAvatar(t){return[J,Pc,t]},signatureStatus(t){return[J,Tc,t]},stakeAccounts(t,e){return[...Kr,t,e]},stakeAccountMinBalance(){return[J,hc]},stakeActivationData(t){return[...Vr,t]},stakeRewardsHistory(t){return[J,wc,t]},stakeApy(){return[J,bc]},averageValidatorApy(){return[J,Gr]},recommendedValidators(){return[J,Ac]},validatorInfo(){return[J,vc]},voteAccounts(t){return[J,xc,t]},validatorsV2(){return[J,Ec]},convertStakeAccountList(t,e){return[...Wr,t,e]},liquidStakingSupportedTokens(){return[J,Mt.supportedTokens]},getConvertStakeTransaction(t){return[...qr,t]},getMintTokenTransaction(t){return[...Or,t]},getWithdrawLiquidStakeTransaction(t){return[...gc,t]},featureUsed(){return[J,Mt.featureUsed]},epochTimeRemaining(t){return[J,Cc,t]},getDeactivateStakeTransaction(t){return[...kc,t]}};var $e=r(t=>()=>{t.invalidateQueries({predicate:r(e=>{let o=r(n=>n.every((i,c)=>e.queryKey[c]===i),"matchesEveryKeyScope");return o(Kr)||o(Vr)||o(Wr)||o(qr)||o(Or)},"predicate")})},"invalidateAllStakeAccountData");s();a();function Vo(t,e=9){if(!/^\d*(?:\.\d*)?$/u.test(t))return!1;let[,o=""]=t.split(".");return o.length<=e}r(Vo,"validateDecimals");s();a();var Ui={type:"fungible",isNativeOfType:"sol",chain:mt.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},Lc="stake",Bi=r(t=>new Hr(t,Lc),"createStakeAnalytics"),Hr=class extends Ee{static{r(this,"StakeAnalytics")}createStakeAccountAndDelegateStake=r(e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...e,...Ui}})},"createStakeAccountAndDelegateStake");deactivateStake=r(()=>{this.analytics.capture("deactivateStake",{data:{...Ui}})},"deactivateStake")};var Yr=Rn(xt,t=>Bi(t));s();a();var Ji=x(L());s();a();var Di=new Error("Failed to fetch validators from API"),Ic=new Error("Missing validators in response"),Nc=A.object({validators:A.array(A.object({identityPubkey:A.string(),voteAccountPubkey:A.string(),commission:A.number(),lastVote:A.number(),epochCredits:A.array(A.tuple([A.number(),A.number(),A.number()])).nullish().transform(t=>t??[]),activatedStake:A.number(),info:A.object({details:A.string().optional(),keybaseUsername:A.string().optional(),name:A.string(),website:A.string().optional(),iconUrl:A.string().nullish().transform(t=>t??"")}).optional(),totalApy:A.number()}))});async function Ki(){try{let t=await _.api().get("/staking/v1/validators");if(!lt(t))throw Di;let e=Nc.safeParse(t.data);if(!e.success)throw console.error("Failed to parse validators from API",e.error),Ic;return e.data.validators}catch(t){throw console.error("Failed to fetch validators from API",t),Di}}r(Ki,"getValidatorsFromAPI");s();a();var se;(function(t){t[t.Always=1/0]="Always",t[t.Short=R({days:1})]="Short",t[t.Medium=R({days:3})]="Medium",t[t.Long=R({days:7})]="Long"})(se||(se={}));var W;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=R({minutes:1})]="Short",t[t.Medium=R({minutes:2.5})]="Medium",t[t.Long=R({minutes:5})]="Long",t[t.Never=1/0]="Never"})(W||(W={}));s();a();var Wo=x(L());s();a();var Wi=r((t,e)=>t+e[1],"calcReturns");function qi(t){let e=Mc(t),o={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},n=Rc(e.maxEpochCredits,e.maxActivatedStake,o);return t.sort(n)}r(qi,"sortVoteAccounts");function Mc(t){let e={maxEpochCredits:0,maxActivatedStake:0};for(let o of t){let n=o.epochCredits.reduce(Wi,0);e.maxEpochCredits<n&&(e.maxEpochCredits=n),e.maxActivatedStake<o.activatedStake&&(e.maxActivatedStake=o.activatedStake)}return e}r(Mc,"findMaxValues");function Fc(t,e,o,n,i){let c=(100-t)/100,u=e/o,d=Math.log10(n+1)/Math.log10(i+1);return{normalizedCommission:c,normalizedEpochCredits:u,normalizedActivatedStake:d}}r(Fc,"calculateNormalizedValues");function Vi(t,e,o,n){let{commission:i,epochCredits:c,activatedStake:u}=t,{commissionWeight:d,epochCreditsWeight:m,activatedStakeWeight:p}=n,{normalizedCommission:S,normalizedEpochCredits:l,normalizedActivatedStake:k}=Fc(i,c.reduce(Wi,0),e,u,o);return(i>10?.5:1)*(d*S+m*l+p*k)}r(Vi,"calculateScore");function Rc(t,e,o){return(n,i)=>{let c=Vi(n,t,e,o);return Vi(i,t,e,o)-c}}r(Rc,"createVoteAccountSorter");s();a();s();a();var Oi=new Error("Failed to fetch staking APY");async function Gi(){try{let t=await _.api().get("/staking/v1/apy");if(!lt(t))throw Oi;let e=t.data;return Qe.parse(e).apy}catch{throw Oi}}r(Gi,"getStakingApy");var Hi=r(()=>{let t=F.stakeApy();return I({enabled:!0,queryKey:t,gcTime:se.Short,staleTime:W.Never,async queryFn(){return Gi()}})},"useStakeApy");s();a();var Uc=r(t=>async()=>(await t.getParsedProgramAccounts(Ii)).reduce((o,n)=>{if(n.account.data.parsed?.type!=="validatorInfo")return o;let i=n.pubkey.toString(),c=n.account.data.parsed.info.keys,[,u]=c;if(!u.signer)return o;let d=u.pubkey,m=n.account.data.parsed.info.configData;return o.push({identityPubkey:d,infoPubkey:i,info:m}),o},[]),"fetchValidatorInfo");function Yi(t,e){let o=F.validatorInfo(),n=Uc(t);return I({queryKey:o,queryFn:n,placeholderData:[],staleTime:W.Never,enabled:e})}r(Yi,"useValidatorInfo");s();a();var Bc=r(async t=>{let e=await t.getVoteAccounts();return[...e.current,...e.delinquent].map(o=>({identityPubkey:o.nodePubkey,voteAccountPubkey:o.votePubkey,commission:o.commission,lastVote:o.lastVote,epochCredits:o.epochCredits,activatedStake:o.activatedStake})).filter(o=>o.commission<99)},"fetchVoteAccounts");function Qi(t,e){let o=F.voteAccounts(t.rpcEndpoint);return I({queryKey:o,queryFn:r(async()=>Bc(t),"queryFn"),placeholderData:[],staleTime:W.Never,enabled:e})}r(Qi,"useVoteAccounts");function ji(t,e){let{isFetched:o,isFetching:n,isSuccess:i,isError:c,isPending:u,dataUpdatedAt:d,errorUpdatedAt:m,error:p,refetch:S,data:l}=Qi(t,e),k=Math.max(d,m),{data:g=null}=Hi(),{isFetched:T,isFetching:h,isSuccess:w,isPending:b,isError:U,dataUpdatedAt:K,errorUpdatedAt:H,error:$,refetch:et,data:Z}=Yi(t,e),M=Math.max(K,H),rt=u||b,at=Math.max(k,M),ot=o&&T,nt=n||h,Lt=i||w,Vt=c||U,zt=p||$,Zt=(0,Wo.useCallback)(async()=>{Promise.all([S(),et()])},[et,S]);return{results:(0,Wo.useMemo)(()=>{if(!l)return[];if(!Z)return[];let _t=qi(l),te=new Map(_t.map(V=>[V.identityPubkey,V])),X=new Map(Z.map(V=>[V.identityPubkey,V])),At=[];for(let[V,It]of te){let we=X.get(V);At.push({...It,...we,totalApy:g?Ko(g,It.commission):0})}return At},[Z,l,g]),dataUpdatedAt:at,error:zt,isSuccess:Lt,isError:Vt,isFetched:ot,isFetching:nt,isPending:rt,refetch:Zt}}r(ji,"useValidators");function Dc(t){let e=F.validatorsV2(),o=I({enabled:t,queryKey:e,gcTime:se.Short,staleTime:W.Long,async queryFn(){return Ki()}});return{results:(0,Ji.useMemo)(()=>{let i=o.data??[];return i.sort((c,u)=>u.totalApy-c.totalApy),i},[o.data]),dataUpdatedAt:o.dataUpdatedAt,error:o.error,isSuccess:o.isSuccess,isError:o.isError,isFetched:o.isFetched,isFetching:o.isFetching,isPending:o.isPending,refetch:r(async()=>{await o.refetch()},"refetch")}}r(Dc,"useValidatorsV2Inner");function ze(){let{connection:t}=ft(),e=Ln("kill-validators-v2"),o=ji(t,e),n=Dc(!e);return e?o:n}r(ze,"useValidatorsV2");s();a();function Qr(t){let e=!!t?.info.meta.lockup,o=new Date((t?.info.meta.lockup?.unixTimestamp??0)*1e3);return e&&o.getTime()>Date.now()}r(Qr,"isLockedStakeAccount");s();a();var Ho=x(L());s();a();var _i=x(L());s();a();var Kc="https://keybase.io/_/api/1.0/user/pic_url.json",qo=r(async t=>{let e=await _.get(`${Kc}?username=${encodeURIComponent(t)}`);if(!lt(e)||e.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return e.data.pic_url},"getKeybaseUserAvatar");s();a();s();a();s();a();function Oo(t,e){for(let o of e)if(o.epoch===t)return o;return null}r(Oo,"getStakeHistoryEntry");var $i=.09;function Vc(t,e,o){if(t.activationEpoch===t.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(e===t.activationEpoch)return{effective:BigInt(0),activating:t.stake};if(e<t.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let n=t.activationEpoch,i=Oo(n,o);if(i!==null){let c=BigInt(0);for(;i!==null;){n++;let u=t.stake-c,d=Number(u)/Number(i.activating),m=Number(i.effective)*$i,p=BigInt(Math.max(1,Math.round(d*m)));if(c+=p,c>=t.stake){c=t.stake;break}if(n>=e||n>=t.deactivationEpoch)break;i=Oo(n,o)}return{effective:c,activating:t.stake-c}}else return{effective:t.stake,activating:BigInt(0)}}r(Vc,"getStakeAndActivating");function zi(t,e,o){let{effective:n,activating:i}=Vc(t,e,o);if(e<t.deactivationEpoch)return{effective:n,activating:i,deactivating:BigInt(0)};if(e==t.deactivationEpoch)return{effective:n,activating:BigInt(0),deactivating:n};let c=t.deactivationEpoch,u=Oo(c,o);if(u!==null){let d=n;for(;u!==null&&(c++,u.deactivating!==BigInt(0));){let m=Number(d)/Number(u.deactivating),p=Number(u.effective)*$i,S=BigInt(Math.max(1,Math.round(m*p)));if(d-=S,d<=0){d=BigInt(0);break}if(c>=e)break;u=Oo(c,o)}return{effective:d,deactivating:d,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}r(zi,"getStakeActivatingAndDeactivating");s();a();var Zi=r(function(t){if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");let e=[];return t.value.data.parsed.info.forEach(o=>{e.push({epoch:BigInt(o.epoch),effective:BigInt(o.stakeHistory.effective),activating:BigInt(o.stakeHistory.activating),deactivating:BigInt(o.stakeHistory.deactivating)})}),e},"getStakeHistory"),Xi=r(function(t){let e=BigInt(0);if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");return t.value.data.parsed.type==="delegated"&&(e=BigInt(1)),{discriminant:e,meta:{rentExemptReserve:BigInt(t.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:t.value.data.parsed.info.meta.authorized.staker,withdrawer:t.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(t.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(t.value.data.parsed.info.meta.lockup.epoch),custodian:t.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:t.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(t.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(t.value.data.parsed.info.stake.creditsObserved)}}},"getStakeAccount");async function Ze(t,e){let o=new y.PublicKey("SysvarStakeHistory1111111111111111111111111"),n=await t.getParsedAccountInfo(e);if(n===null||n.value===null)throw new Error("Account not found");let i=await t.getParsedAccountInfo(o);if(i===null)throw new Error("StakeHistory not found");let c=Zi(i),u=await t.getEpochInfo(),d=Xi(n),{effective:m,activating:p,deactivating:S}=zi(d.stake.delegation,BigInt(u.epoch),c),l;S>0?l="deactivating":p>0?l="activating":m>0?l="active":l="inactive";let k=BigInt(n.value.lamports)-m-d.meta.rentExemptReserve;return{state:l,active:Number(m),inactive:Number(k)}}r(Ze,"getStakeActivation");var Wc=r(t=>{let e=[];return t.ownerPublicKey&&e.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&e.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}}),e},"getStakeAccountFilters"),ts=r(async(t,e,o)=>{let n=Wc(e),i=await t.getParsedProgramAccounts(y.StakeProgram.programId,{filters:n}),u=(await Promise.allSettled(i.map(p=>Ze(t,p.pubkey)))).map(p=>{if(p.status==="fulfilled")return p.value.state}),m=(await Promise.allSettled(i.map(p=>{let S=p.account.data?.parsed?.info?.stake?.delegation?.voter,l=o.get(S),k=l?.info?.keybaseUsername,g=l?.info?.iconUrl;return g?Promise.resolve(g):k?qo(k):Promise.resolve(null)}))).map(p=>{if(p.status==="fulfilled"&&p.value!==null)return p.value});return i.map((p,S)=>({pubkey:p.pubkey.toString(),lamports:p.account.lamports,activationState:u[S],imageUri:m[S],...p.account.data.parsed}))},"fetchStakeAccounts"),es=r((t,e)=>F.convertStakeAccountList(t,e),"getQueryKey"),qc=r((t,e,o)=>()=>ts(t,{ownerPublicKey:e},o),"getQueryFn");function os(t,e,o,n=!0){let i=es(e,t.rpcEndpoint),c=qc(t,e,o);return I({queryKey:i,queryFn:c,enabled:!!e&&n,staleTime:W.Never})}r(os,"useConvertStakeAccountList");var rs=r((t,e,o,n)=>{let i=pt();return(0,_i.useCallback)(async()=>{n&&await i.prefetchQuery({queryKey:es(e,t.rpcEndpoint),queryFn:r(()=>ts(t,{ownerPublicKey:e},o),"queryFn")})},[i,e,t,o,n])},"usePrefetchConvertStakeAccountList");s();a();var Ct=x(L());var Go=null,Oc=r(t=>{if(!Go&&t){let e="liquidStake";Go=new Ee(t,e)}if(!Go)throw new Error("liquidStakeAnalytics was not properly configured");return Go},"getLiquidStakeSequenceAnalytics"),Ft=r(()=>{let t=xt(),e=Oc(t),o=(0,Ct.useCallback)((g,T)=>{t.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:g,stakeAccountBalance:T}}})},[t]),n=(0,Ct.useCallback)(g=>{t.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:g}}})},[t]),i=(0,Ct.useCallback)(()=>{t.capture("liquidStakingConvertBannerClicked")},[t]),c=(0,Ct.useCallback)(()=>{t.capture("liquidStakingConvertBannerSeen")},[t]),u=(0,Ct.useCallback)(()=>{t.capture("liquidStakingConvertModalContinue")},[t]),d=(0,Ct.useCallback)(()=>{t.capture("liquidStakingConvertModalNotNow")},[t]),m=(0,Ct.useCallback)(({provider:g,convertDetails:T,amount:h,fromAmount:w,toAmount:b,fromAmountUSD:U,toAmountUSD:K})=>{t.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:g?.stakePoolAddress,token:g?.stakePoolTokenMetadata.metadata.name,fromAmount:w,toAmount:b,fromAmountUSD:U,toAmountUSD:K,apy:g?.apy,convertRatio:g?.convertRatio,caip19:g?.stakePoolTokenMetadata.caip19,validatorName:T?.validatorName,stakeAccountBalance:h}}})},[t]),p=(0,Ct.useCallback)((g,T)=>{e.submittedTransaction(g,{chainType:q.Solana,chainName:mt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:T})},[e]),S=(0,Ct.useCallback)(({amount:g,convertDetails:T,provider:h})=>{t.capture("liquidStakingConvertSuccess",{data:{stake:{apy:h?.apy,convertRatio:h?.convertRatio,caip19:h?.stakePoolTokenMetadata.caip19,stakePoolAddress:h?.stakePoolAddress,token:h?.stakePoolTokenMetadata.metadata.name,totalAmount:g,validatorName:T?.validatorName}}})},[t]),l=(0,Ct.useCallback)(({amount:g,convertDetails:T})=>{t.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:T?.validatorName,stakeAccountBalance:g}}})},[t]),k=(0,Ct.useCallback)(()=>{t.capture("liquidStakingConvertMoreClicked")},[t]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:n,trackConvertBannerClicked:i,trackConvertBannerSeen:c,trackConvertModalContinue:u,trackConvertModalNotNow:d,trackConvertApprovedByUser:m,trackConvertFailed:l,trackConvertSubmitted:p,trackConvertSuccess:S,trackConvertMoreClicked:k}},"useConvertStakeAnalytics");var Gc=r(()=>{let{connection:t}=ft(),{data:e}=Et(q.Solana),{trackConvertModalContinue:o,trackConvertModalNotNow:n}=Ft(),{results:i,isFetched:c}=ze(),u=(0,Ho.useMemo)(()=>new Map(i.map(m=>[m.voteAccountPubkey,m])),[i]),d=rs(t,e?.address??"",u,c);return(0,Ho.useEffect)(()=>{d()},[d]),{trackConvertModalContinue:o,trackConvertModalNotNow:n}},"useConvertStakeAccountInfoPageProps");s();a();s();a();var ns=r(({numSignatures:t,lamportsPerSignature:e,lamportBalance:o,rentExemptionMinimum:n})=>{let i=it(e).multipliedBy(t),c=o.minus(i);return it.max(c.minus(n),0)},"getMaxTransferrableSol");var Hc=r(({balance:t,rentExemptionMinimum:e})=>{let o=ns({numSignatures:11,lamportsPerSignature:jn,lamportBalance:it(t),rentExemptionMinimum:Tn(e)});return parseFloat(An(o).toFixed(9))},"useGetMaxTransferrableSol");s();a();var Yc=r(t=>{let e=F.keybaseUserAvatar(t);return I({enabled:!!t,queryKey:e,async queryFn(){if(!t)throw new Error("Keybase username is required");return qo(t)},placeholderData:"",staleTime:W.Never})},"useKeybaseUserAvatar");s();a();s();a();var is=new Error("Missing sender address for staking fungibles."),ss=new Error("Missing signature from waiting for staking transaction confirmation."),as=new Error("PublicKey is required"),Fe;(function(t){t.MissingTransactionData="MissingTransactionData",t.UnknownError="UnknownError",t.FailedToConfirmTransaction="FailedToConfirmTransaction"})(Fe||(Fe={}));var ge=class extends Error{static{r(this,"StakingError")}constructor(e){super(e)}};var Qc=r(async(t,e)=>await t.getSignatureStatuses([e],{searchTransactionHistory:!0}),"fetchSignatureStatus");function jc(t,e,o){let n=pt(),i=F.signatureStatus(o),c=r(async()=>{if(!o)throw ss;let p=await Qc(t,o);return{...p,value:p.value[0]}},"queryFn"),d=n.getQueryData(i)?.value?.confirmationStatus;return I({queryKey:i,queryFn:c,enabled:!!o&&d!=="finalized",refetchInterval:e,staleTime:W.Never})}r(jc,"useSignatureStatus");s();a();var Jc=r(t=>async()=>await t.getMinimumBalanceForRentExemption(y.StakeProgram.space),"getStakeAccountMinBalance");function $c(t){let e=F.stakeAccountMinBalance(),o=Jc(t);return I({queryKey:e,queryFn:o,placeholderData:0,staleTime:W.Never})}r($c,"useStakeAccountMinBalance");s();a();var zc=r(async(t,e,o,n="confirmed")=>await t.getInflationReward(e,o,n),"getInflationReward"),Zc=r(async(t,e)=>{let o=[];e.ownerPublicKey&&o.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&o.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}});let n=await t.getParsedProgramAccounts(y.StakeProgram.programId,{filters:o}),i=[];if(e.fetchInflationRewards)try{i=await zc(t,n.map(({pubkey:c})=>c))}catch(c){let u=c;!u.message.includes("RPC request timed out")&&Q.captureError(u,Y.Staking)}return n.map((c,u)=>({pubkey:c.pubkey.toString(),lamports:c.account.lamports,inflationReward:i[u]?.amount,...c.account.data.parsed}))},"fetchStakeAccounts"),Xc=r((t,e)=>F.stakeAccounts(t,e),"getQueryKey"),_c=r((t,e)=>()=>Zc(t,{ownerPublicKey:e,fetchInflationRewards:!0}),"getQueryFn");function tu(t,e){let o=Xc(e,t.rpcEndpoint),n=_c(t,e);return I({queryKey:o,queryFn:n,placeholderData:[],staleTime:R({minutes:5})})}r(tu,"useStakeAccounts");s();a();function eu(t,e){let o=F.stakeActivationData(e);return I({queryKey:o,queryFn:r(async()=>{if(!e)throw as;return await Ze(t,new y.PublicKey(e))},"queryFn"),enabled:!!e,staleTime:W.Never})}r(eu,"useStakeActivationData");s();a();var ds=x(L());s();a();s();a();var cs=new Error("Failed to fetch liquid staking supported tokens"),ou=new Error("Missing supported tokens in response");async function us(){try{let t=await _.api().get("/liquid-staking/v1/supported-tokens");if(!lt(t))throw cs;let e=Fi.safeParse(t.data.supportedTokens);if(!e.success)throw ou;return e.data}catch{throw cs}}r(us,"getLiquidStakingSupportedTokens");var Yo=r(()=>{let t=F.liquidStakingSupportedTokens();return I({queryKey:t,staleTime:R({minutes:15}),async queryFn(){return await us()}})},"useLiquidStakingSupportedTokens");function ru(t){return typeof t=="string"?t:t?oe(Wt(t)):""}r(ru,"getCaip19String");var Ot=r(t=>{let e=ru(t),{data:o={}}=Yo();return(0,ds.useMemo)(()=>!!Object.values(o).flat().find(i=>i.stakePoolTokenMetadata.caip19===e),[e,o])},"useIsSupportedLST");s();a();s();a();var Xe=x(L());s();a();s();a();var ms=new Error("Failed to fetch Average Validator APY");async function ls(){let t=await _.api().get("/staking/v1/avg-validator-apy");if(!lt(t))throw ms;let e=Qe.safeParse(t.data);if(e.success)return e.data.apy;throw ms}r(ls,"getAverageValidatorApy");var ps=r(()=>{let t=F.averageValidatorApy();return I({enabled:!0,queryKey:t,gcTime:R({hours:1}),staleTime:R({hours:6}),async queryFn(){return ls()}})},"useAverageValidatorApy");var fs=r(t=>{let e=(0,Xe.useMemo)(()=>t?oe(Wt(t)):"",[t]),{data:o,isPending:n}=ps(),i=o?o/100:null,{data:c={},isPending:u}=Yo(),d=(0,Xe.useMemo)(()=>c[e]??[],[e,c]),m=d?d[0]:void 0,p=(0,Xe.useCallback)((S,l=!1)=>S?d.find(k=>k.stakePoolTokenMetadata.caip19===S):l?void 0:m,[m,d]);return{isLoading:u||n,isSupported:d.length>0,providers:d,pickedLSTProvider:p,defaultProvider:m,avgValidatorApy:i}},"useLiquidStaking");var Rt=r(t=>{let e=Ni.get(t);return fs(e)},"useNativeLiquidStaking");s();a();var Ss=x(L());var nu=r(({onLiquidStake:t,onNativeStake:e})=>{let{t:o}=tt(),n=Ur,{avgValidatorApy:i,pickedLSTProvider:c}=Rt(wt.Solana.Mainnet),u=Ot(B),d=c(u?B:Zn);return{options:(0,Ss.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:o("stakeMethodSelectionLiquidStakingTitle"),description:o("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:d?.stakePoolTokenMetadata?.metadata?.symbol}),apy:d?o("stakeMethodEstApy",{apy:fe(parseFloat(d.apy))}):null,disabled:!d,onClick:t??(()=>{})},{type:"native",isRecommended:!1,title:o("stakeMethodSelectionNativeStakingTitle"),description:o("stakeMethodSelectionNativeStakingDescription"),apy:i?o("stakeMethodEstApy",{apy:fe(i)}):null,onClick:e,disabled:!1}],[i,d,t,e,o]),learnMoreLink:n}},"useStakingMethodSelectionProps");s();a();function iu({hideOnLowBalance:t}){let{pickedLSTProvider:e}=Rt(wt.Solana.Mainnet),o=Ot(B),n=e(B),{data:i}=ni();if(!i||!n)return{shouldHide:!0,apy:0,formattedApy:"0%"};let c=vt(i.totalQuantityString,i.decimals),u=!1;t&&(u=!c.isGreaterThan(0)),o||(u=!0);let d=parseFloat(n.apy),m=`${(d*100).toFixed(2)}%`;return{shouldHide:u,apy:d,formattedApy:m}}r(iu,"useStakingWelcomeProps");s();a();s();a();var Qo;(function(t){t.AF="AF",t.AX="AX",t.AL="AL",t.DZ="DZ",t.AS="AS",t.AD="AD",t.AO="AO",t.AI="AI",t.AQ="AQ",t.AG="AG",t.AR="AR",t.AM="AM",t.AW="AW",t.AU="AU",t.AT="AT",t.AZ="AZ",t.BS="BS",t.BH="BH",t.BD="BD",t.BB="BB",t.BY="BY",t.BE="BE",t.BZ="BZ",t.BJ="BJ",t.BM="BM",t.BT="BT",t.BO="BO",t.BQ="BQ",t.BA="BA",t.BW="BW",t.BV="BV",t.BR="BR",t.IO="IO",t.BN="BN",t.BG="BG",t.BF="BF",t.BI="BI",t.KH="KH",t.CM="CM",t.CA="CA",t.CV="CV",t.KY="KY",t.CF="CF",t.TD="TD",t.CL="CL",t.CX="CX",t.CC="CC",t.CO="CO",t.KM="KM",t.CK="CK",t.CR="CR",t.CI="CI",t.HR="HR",t.CU="CU",t.CW="CW",t.CY="CY",t.CZ="CZ",t.CD="CD",t.DK="DK",t.DJ="DJ",t.DM="DM",t.DO="DO",t.EC="EC",t.EG="EG",t.SV="SV",t.GQ="GQ",t.ER="ER",t.EE="EE",t.SZ="SZ",t.ET="ET",t.FK="FK",t.FO="FO",t.FJ="FJ",t.FI="FI",t.FR="FR",t.GF="GF",t.PF="PF",t.TF="TF",t.GA="GA",t.GE="GE",t.DE="DE",t.GH="GH",t.GI="GI",t.GR="GR",t.GL="GL",t.GD="GD",t.GP="GP",t.GU="GU",t.GT="GT",t.GG="GG",t.GN="GN",t.GW="GW",t.GY="GY",t.HT="HT",t.HM="HM",t.VA="VA",t.HN="HN",t.HK="HK",t.HU="HU",t.IS="IS",t.IN="IN",t.ID="ID",t.IQ="IQ",t.IE="IE",t.IR="IR",t.IM="IM",t.IL="IL",t.IT="IT",t.JM="JM",t.JP="JP",t.JE="JE",t.JO="JO",t.KZ="KZ",t.KE="KE",t.KI="KI",t.XK="XK",t.KW="KW",t.KG="KG",t.LA="LA",t.LV="LV",t.LB="LB",t.LS="LS",t.LR="LR",t.LY="LY",t.LI="LI",t.LT="LT",t.LU="LU",t.MO="MO",t.MG="MG",t.MW="MW",t.MY="MY",t.MV="MV",t.ML="ML",t.MT="MT",t.MH="MH",t.MQ="MQ",t.MR="MR",t.MU="MU",t.YT="YT",t.MX="MX",t.FM="FM",t.MD="MD",t.MC="MC",t.MN="MN",t.ME="ME",t.MS="MS",t.MA="MA",t.MZ="MZ",t.MM="MM",t.NA="NA",t.NR="NR",t.NP="NP",t.NL="NL",t.NC="NC",t.NZ="NZ",t.NI="NI",t.NE="NE",t.NG="NG",t.NU="NU",t.NF="NF",t.KP="KP",t.MP="MP",t.NO="NO",t.OM="OM",t.PK="PK",t.PW="PW",t.PA="PA",t.PG="PG",t.PY="PY",t.CN="CN",t.PE="PE",t.PH="PH",t.PN="PN",t.PL="PL",t.PT="PT",t.PR="PR",t.QA="QA",t.CG="CG",t.GM="GM",t.RE="RE",t.RO="RO",t.RU="RU",t.RW="RW",t.BL="BL",t.SH="SH",t.KN="KN",t.LC="LC",t.MF="MF",t.PM="PM",t.VC="VC",t.WS="WS",t.SM="SM",t.ST="ST",t.SA="SA",t.SN="SN",t.RS="RS",t.SC="SC",t.SL="SL",t.SG="SG",t.SX="SX",t.SK="SK",t.SI="SI",t.SB="SB",t.SO="SO",t.ZA="ZA",t.GS="GS",t.KR="KR",t.SS="SS",t.ES="ES",t.LK="LK",t.PS="PS",t.SD="SD",t.SR="SR",t.SJ="SJ",t.SE="SE",t.CH="CH",t.SY="SY",t.TW="TW",t.TJ="TJ",t.TH="TH",t.MK="MK",t.TL="TL",t.TG="TG",t.TK="TK",t.TO="TO",t.TT="TT",t.TN="TN",t.TR="TR",t.TM="TM",t.TC="TC",t.TV="TV",t.UG="UG",t.UA="UA",t.AE="AE",t.GB="GB",t.TZ="TZ",t.UM="UM",t.US="US",t.UY="UY",t.UZ="UZ",t.VU="VU",t.VE="VE",t.VN="VN",t.VG="VG",t.VI="VI",t.WF="WF",t.EH="EH",t.YE="YE",t.ZM="ZM",t.ZW="ZW"})(Qo||(Qo={}));var z;(function(t){t.FAIL_SEVERE="FAIL_SEVERE",t.FAIL_HIGH="FAIL_HIGH",t.NO_ACTION="NO_ACTION",t.DATA_NOT_FOUND="DATA_NOT_FOUND"})(z||(z={}));var ys=A.object({action:A.nativeEnum(z),address:wn,expirationUnixtimeInSec:A.number().nullish().default(null)}),jr=A.object({addressScreenResults:A.array(ys)}),gs=A.object({country:A.nativeEnum(Qo)}),_e=class extends Error{static{r(this,"WalletScreenError")}constructor(e){super(e),this.name="WalletScreenError"}},to;(function(t){t.BURN_COLLECTIBLE="BURN_COLLECTIBLE",t.SEND_COLLECTIBLE="SEND_COLLECTIBLE",t.SEND_FUNGIBLE="SEND_FUNGIBLE",t.STAKE_FUNGIBLE="STAKE_FUNGIBLE",t.SWAP_FUNGIBLE="SWAP_FUNGIBLE",t.INSTANT_SELL="INSTANT_SELL",t.PERPS_FUNDING="PERPS_FUNDING"})(to||(to={}));s();a();var vs=x(L());s();a();s();a();var ks="@phantom/wallet-screening",As=`${ks}:wallet-screen-action`,su=`${ks}:wallet-screen-geo`,jo={walletScreenAction(t){return[As,t]},walletGeo(){return[su]}};s();a();var Ts=new Error("Failed to fetch wallet screen action.");async function hs(t){try{let e=await _.api().post("/wallet_screen/v1",t);if(!lt(e))throw Ts;let o=e.data;return jr.parse(o)}catch{throw Ts}}r(hs,"fetchWalletScreenAction");var ws=R({days:7}),bs=r(t=>{let e=t!==void 0&&N.isMainnetNetworkID(t.networkID),o=[];if(t!==void 0){let d=N.isEVMNetworkID(t.networkID)?t.address.toLowerCase():t.address;o=[{chainId:t.networkID,address:d,resourceType:hn.address}]}let n={addresses:o},i=pt(),c=jo.walletScreenAction(n),u=[c[0]];return I({enabled:e,queryKey:c,gcTime:ws,staleTime:ws,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(au(i,u))return z.FAIL_SEVERE;let m=await hs(n);return cu(m)}})},"useWalletScreenAction"),au=r((t,e)=>{let o=t.getQueriesData({queryKey:e,exact:!1}),n=!1;for(let[i,c]of o){let u=c;if(u&&u===z.FAIL_SEVERE){n=!0;break}}return n},"findSevereInQueryData"),cu=r(t=>{let e=t.addressScreenResults;return e.some(o=>o.action===z.FAIL_SEVERE)?z.FAIL_SEVERE:e.some(o=>o.action===z.FAIL_HIGH)?z.FAIL_HIGH:e.some(o=>o.action===z.NO_ACTION)?z.NO_ACTION:z.DATA_NOT_FOUND},"getActionFromResponse");var Jr=r((t,e)=>{let o=xt(),{data:n}=bs(t);switch((0,vs.useEffect)(()=>{n&&t&&o.capture("walletScreened",{data:{walletScreen:{action:n.toString(),surface:e},chainId:N.getChainID(t.networkID),networkId:t.networkID}})},[n,t,e,o]),n){case z.FAIL_SEVERE:case z.FAIL_HIGH:throw new _e(`Transaction disabled: ${e}`);case z.NO_ACTION:case z.DATA_NOT_FOUND:return}},"useThrowIfFailWalletScreen");s();a();s();a();s();a();var xs=new Error("Failed to fetch wallet geo.");async function Es(){try{let t=await _.api().get("/wallet_screen/v1/geo");if(!lt(t))throw xs;let e=t.data;return gs.parse(e).country}catch{throw xs}}r(Es,"fetchWalletGeo");var Ps=R({hours:1}),$r=r(()=>{let t=jo.walletGeo();return I({queryKey:t,staleTime:Ps,refetchInterval:Ps,queryFn:Es})},"useWalletGeo");s();a();var Jt=r(()=>{let{data:t}=$r(),e=t==="GB",o=hr("enable-uk-staking-disclaimers"),n=hr("enable-uk-staking-override"),i=Ot(B);return n?!0:o&&e&&i},"useShowUKDisclaimer");s();a();var Ls=x(L());s();a();var uu=r(async t=>{let e=await t.getEpochInfo(),o=e.slotsInEpoch-e.slotIndex;return{hours:o*.4/3600,totalSlots:e.slotsInEpoch,remainingSlots:o,epoch:e.epoch}},"fetchEpochTimeRemaining"),Cs=r(t=>{let e=F.epochTimeRemaining(t.rpcEndpoint);return I({queryKey:e,queryFn:r(async()=>uu(t),"queryFn"),placeholderData:{hours:0,totalSlots:0,remainingSlots:0,epoch:0},staleTime:W.Long})},"useEpochTimeRemaining");var ke=r(()=>{let{t}=tt(),{connection:e}=ft(),{data:o}=Cs(e);return(0,Ls.useMemo)(()=>{if(!o)return"";if(o.hours<24){let n=Math.max(o.hours,1),i=t(n===1?"timeUnitHour":"timeUnitHours");return`${n.toFixed(0)} ${i}`}else{let n=o.hours,i=Math.floor(n/24),c=n%24,u=Math.floor(c),d=t(u===1?"timeUnitHour":"timeUnitHours"),m=t(i===1?"timeUnitDay":"timeUnitDays");return u===0?`${i} ${m}`:`${i} ${m} ${u} ${d}`}},[o,t])},"useDurationUntilEpochEnds");s();a();s();a();var eo=x(L());s();a();var Is=r(t=>Qr(t)?!1:je(t.activationState),"isEligibleToConvert");var Jo=r(t=>{let{connection:e}=ft(),{data:o}=Et(q.Solana),{results:n,isFetched:i,isError:c}=ze(),u=(0,eo.useMemo)(()=>new Map(n.map(w=>[w.voteAccountPubkey,w])),[n]),{data:d,isLoading:m,isFetching:p,error:S,refetch:l}=os(e,o?.address??"",u,i||c),k=m||p,g=(0,eo.useMemo)(()=>k||!d?[]:d.map(w=>du(w,u)).sort((w,b)=>w.lamports>b.lamports?-1:1),[k,d,u]),T=(0,eo.useMemo)(()=>g.filter(w=>w.eligible),[g]),h=(0,eo.useMemo)(()=>g.filter(w=>!w.eligible),[g]);return t?.stakePoolTokenMetadata.caip19===B?{hasConvertibleStakeAccounts:T.length>0||h.length>0,eligibleStakeAccounts:T,inelegibleStakeAccounts:h,isLoadingList:k,error:S,refetch:l}:{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:k,error:S,refetch:l}},"useConvertibleStakeAccounts"),du=r((t,e)=>{let o=Is(t),n=mu(t,e),i=t.lamports;return{...t,amount:i,eligible:o,title:n,imageUri:t.imageUri}},"mapStakeAccountToViewState"),mu=r((t,e)=>{let o="";if(t.type===Me.Delegated){let{voter:n}=t.info.stake.delegation,i=e.get(n),c=i?.info?.keybaseUsername;o=i?.info?.name??c??Fn(n)}else t.type===Me.Initialized&&(o=t.pubkey);return o},"getTitleForConvertStakeAccount");s();a();var lu=r(()=>{let t=oo();if(!t)throw new Error("PSOL provider not found");return t},"usePSolProviderUnsafe"),oo=r(()=>{let{pickedLSTProvider:t}=Rt(N.solana.mainnetID);return t(B,!0)},"usePSolProvider");s();a();var Fs=x(L());s();a();var $o=x(L());s();a();var ro;(function(t){t.FeatureUsed="featureUsed"})(ro||(ro={}));function Ns({key:t,queryKey:e,defaultValue:o=null}){let n=Ve();return I({enabled:!0,queryKey:e,gcTime:se.Long,staleTime:W.Never,async queryFn(){try{return await n.get(t)}catch(i){return i instanceof Error&&Q.captureError(i,Y.Staking),o}}})}r(Ns,"useStakeStorageValue");function Ms({key:t,queryKey:e}){let o=Ve(),n=pt();return ve({async mutationFn(i){try{return await o.set(t,i)}catch(c){c instanceof Error&&Q.captureError(c,Y.Staking);return}},async onMutate(i){await n.cancelQueries({queryKey:e});let c=n.getQueryData(e);return n.setQueryData(e,i),{previousValue:c}},onError(i,c,u){n.setQueryData(e,u?.previousValue)}})}r(Ms,"useSetStakeStorageValue");var pu=A.object({convert:A.boolean(),mint:A.boolean()}),zr={convert:!1,mint:!1},fu=JSON.stringify(zr),Re=r(()=>{let{data:t}=Ns({key:ro.FeatureUsed,queryKey:F.featureUsed(),defaultValue:fu}),e=(0,$o.useMemo)(()=>{if(!t)return zr;let i=pu.safeParse(JSON.parse(t));return i.success?i.data:zr},[t]),{mutateAsync:o}=Ms({key:ro.FeatureUsed,queryKey:F.featureUsed()}),n=(0,$o.useCallback)(async i=>{let c={...e,...i};await o(JSON.stringify(c))},[o,e]);return{usageState:e,setUsageState:n}},"useFeatureUsage");var Zr=r(({method:t,goToInfoPage:e,goToInitFlowPage:o})=>{let{usageState:n}=Re();return(0,Fs.useCallback)(()=>{n[t]?o():e()},[e,o,t,n])},"useOnShowLiquidStakingMethod");s();a();var Su=r(t=>{let e=Jt();return t&&t!==B?{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:t}}:e?{screen:"MintPSOLUKInfoPage",params:{presentNext:!0}}:{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:B}}},"useLiquidStakingScreen");s();a();var Rs=x(L());s();a();s();a();var no={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0,activationState:void 0,stakeAuthorityPubkey:""},amount:"",navigateTo:null},D=qn(t=>({...no,resetStaking:r(()=>t(e=>({...e,amount:no.amount,transactionData:no.transactionData,convert:no.convert,navigateTo:no.navigateTo})),"resetStaking"),setTransactionData:r(e=>t({transactionData:e}),"setTransactionData"),setProvider:r(e=>t({provider:e}),"setProvider"),setConvertStakeAccount:r(e=>t({convert:e}),"setConvertStakeAccount"),setAmount:r(e=>t({amount:e}),"setAmount"),setNavigateTo:r(e=>t({navigateTo:e}),"setNavigateTo")}));var Us=r(t=>{let e=D(d=>d.setConvertStakeAccount),o=D(d=>d.setAmount),{trackConvertStakeAccountClicked:n}=Ft(),i=oo(),{eligibleStakeAccounts:c,inelegibleStakeAccounts:u}=Jo(i);return(0,Rs.useCallback)(({stakeAccount:d,validatorName:m,activationState:p})=>{let S=d?.info?.stake?.delegation?.voter??"",l=`${d?.lamports??"0"}`;e({validatorVote:S,stakeAccount:d.pubkey,stakeAuthorityPubkey:d?.info?.meta?.authorized?.staker??"",validatorName:m??"",activationState:p,eligibleAccountsCount:c.length+u.length}),o(l),n(m??"",l),t()},[n,t,e,o,c.length,u.length])},"useConvertStakeNavigateToReview");s();a();var io=x(L());var yu=r((t,e)=>{let o=yt,{pickedLSTProvider:n}=Rt(N.solana.mainnetID),i=n(B,!0),{trackConvertStakeAccountListSeen:c}=Ft(),{error:u,refetch:d,isLoadingList:m,eligibleStakeAccounts:p,inelegibleStakeAccounts:S}=Jo(i);(0,io.useEffect)(()=>{m||c([...p,...S].map(h=>({title:h.title,amount:h.amount,eligible:h.eligible})))},[c,p,S,m]);let l=Us(t),k=(0,io.useCallback)(h=>{l({stakeAccount:h,validatorName:h.title,activationState:h.activationState})},[l]),g=ke(),T=(0,io.useCallback)(()=>{d()},[d]);return{isLoading:m,error:u,eligibleStakeAccounts:p,inelegibleStakeAccounts:S,onPressBack:e,onReload:T,onSelectStakeAccount:k,tokenSymbol:o?.data.symbol??"",tokenDecimals:o?.data.decimals??0,durationUntilEpochEnds:g}},"useConvertStakeAccountListPageProps");s();a();s();a();var Bs=x(L());var zo=r(()=>{let t=pt();return(0,Bs.useCallback)(()=>$e(t)(),[t])},"useInvalidateQueries"),Ds=r((t,e,o)=>vo({connection:t,signature:e,commitment:"finalized"}).then(()=>{$e(o)()}),"invalidateStakeDataOnTransactionFinalized");s();a();var Be=x(go());s();a();var Xr=x(Ea());var Hv=new y.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var ht=new y.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var Yv=Xr.Buffer.from("ephemeral"),Ks=Xr.Buffer.from("transient"),so=y.LAMPORTS_PER_SOL;s();a();var _r=Object.freeze({DepositStake:{index:9,layout:bt.struct([bt.u8("instruction")])},DepositSol:{index:14,layout:bt.struct([bt.u8("instruction"),bt.ns64("lamports")])},WithdrawStake:{index:10,layout:bt.struct([bt.u8("instruction"),bt.ns64("poolTokens")])},WithdrawSol:{index:16,layout:bt.struct([bt.u8("instruction"),bt.ns64("poolTokens")])}});function tn(t,e){let o=t.layout.span,n=Buffer.alloc(o),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}r(tn,"encodeData");var Ue=class{static{r(this,"StakePoolInstruction")}static depositSol(e){let{stakePool:o,withdrawAuthority:n,depositAuthority:i,reserveStake:c,fundingAccount:u,destinationPoolAccount:d,managerFeeAccount:m,referralPoolAccount:p,poolMint:S,lamports:l,referralAccount:k}=e,g=_r.DepositSol,T=tn(g,{lamports:l}),h=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:y.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Qt,isSigner:!1,isWritable:!1}];return i&&h.push({pubkey:i,isSigner:!0,isWritable:!1}),k&&h.push({pubkey:k,isSigner:!1,isWritable:!1}),new y.TransactionInstruction({programId:ht,keys:h,data:T})}static withdrawStake(e){let{stakePool:o,validatorList:n,withdrawAuthority:i,validatorStake:c,destinationStake:u,destinationStakeAuthority:d,sourceTransferAuthority:m,sourcePoolAccount:p,managerFeeAccount:S,poolMint:l,poolTokens:k}=e,g=_r.WithdrawStake,T=tn(g,{poolTokens:k}),h=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:y.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Qt,isSigner:!1,isWritable:!1},{pubkey:y.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new y.TransactionInstruction({programId:ht,keys:h,data:T})}static withdrawSol(e){let{stakePool:o,withdrawAuthority:n,sourceTransferAuthority:i,sourcePoolAccount:c,reserveStake:u,destinationSystemAccount:d,managerFeeAccount:m,solWithdrawAuthority:p,poolMint:S,poolTokens:l}=e,k=_r.WithdrawSol,g=tn(k,{poolTokens:l}),T=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:y.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:y.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:y.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Qt,isSigner:!1,isWritable:!1}];return p&&T.push({pubkey:p,isSigner:!0,isWritable:!1}),new y.TransactionInstruction({programId:ht,keys:T,data:g})}};s();a();var E=x(qs());var Gs=x(go()),Hs=x(br());var ce=[(0,E.u64)("denominator"),(0,E.u64)("numerator")],Os;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.StakePool=1]="StakePool",t[t.ValidatorList=2]="ValidatorList"})(Os||(Os={}));var Zo=kr().transform(t=>new Gs.default(t,10)),Xo=kr().transform(t=>new y.PublicKey(t)),Bu=fn(["uninitialized","initialized","delegated","rewardsPool"]),Du=ee({rentExemptReserve:Zo,authorized:ee({staker:Xo,withdrawer:Xo}),lockup:ee({unixTimestamp:De(),epoch:De(),custodian:Xo})}),Ku=ee({meta:Du,stake:ee({delegation:ee({voter:Xo,stake:Zo,activationEpoch:Zo,deactivationEpoch:Zo,warmupCooldownRate:De()}),creditsObserved:De()}).nullish().default(null)}),Ys=ee({type:Bu,info:Sn(Ku)}),nn=class extends Hs.Layout{static{r(this,"FutureEpochLayout")}layout;discriminator;constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,E.u8)()}encode(e,o,n=0){return e==null?this.discriminator.encode(0,o,n):(this.discriminator.encode(2,o,n),this.layout.encode(e,o,n+1)+1)}decode(e,o=0){let n=this.discriminator.decode(e,o);if(n===0)return null;if(n===1||n===2)return this.layout.decode(e,o+1);throw new Error("Invalid future epoch "+this.property)}getSpan(e,o=0){let n=this.discriminator.decode(e,o);if(n===0)return 1;if(n===1||n===2)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid future epoch "+this.property)}};function rn(t,e){return new nn(t,e)}r(rn,"futureEpoch");var Qs=(0,E.struct)([(0,E.u8)("accountType"),(0,E.publicKey)("manager"),(0,E.publicKey)("staker"),(0,E.publicKey)("stakeDepositAuthority"),(0,E.u8)("stakeWithdrawBumpSeed"),(0,E.publicKey)("validatorList"),(0,E.publicKey)("reserveStake"),(0,E.publicKey)("poolMint"),(0,E.publicKey)("managerFeeAccount"),(0,E.publicKey)("tokenProgramId"),(0,E.u64)("totalLamports"),(0,E.u64)("poolTokenSupply"),(0,E.u64)("lastUpdateEpoch"),(0,E.struct)([(0,E.u64)("unixTimestamp"),(0,E.u64)("epoch"),(0,E.publicKey)("custodian")],"lockup"),(0,E.struct)(ce,"epochFee"),rn((0,E.struct)(ce),"nextEpochFee"),(0,E.option)((0,E.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,E.option)((0,E.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,E.struct)(ce,"stakeDepositFee"),(0,E.struct)(ce,"stakeWithdrawalFee"),rn((0,E.struct)(ce),"nextStakeWithdrawalFee"),(0,E.u8)("stakeReferralFee"),(0,E.option)((0,E.publicKey)(),"solDepositAuthority"),(0,E.struct)(ce,"solDepositFee"),(0,E.u8)("solReferralFee"),(0,E.option)((0,E.publicKey)(),"solWithdrawAuthority"),(0,E.struct)(ce,"solWithdrawalFee"),rn((0,E.struct)(ce),"nextSolWithdrawalFee"),(0,E.u64)("lastEpochPoolTokenSupply"),(0,E.u64)("lastEpochTotalLamports")]),_o;(function(t){t[t.Active=0]="Active",t[t.DeactivatingTransient=1]="DeactivatingTransient",t[t.ReadyForRemoval=2]="ReadyForRemoval"})(_o||(_o={}));var Vu=(0,E.struct)([(0,E.u64)("activeStakeLamports"),(0,E.u64)("transientStakeLamports"),(0,E.u64)("lastUpdateEpoch"),(0,E.u64)("transientSeedSuffixStart"),(0,E.u64)("transientSeedSuffixEnd"),(0,E.u8)("status"),(0,E.publicKey)("voteAccountAddress")]),tr=(0,E.struct)([(0,E.u8)("accountType"),(0,E.u32)("maxValidators"),(0,E.vec)(Vu,"validators")]);s();a();var Ut=x(go());function sn(t){return isNaN(t)?0:Number(t*y.LAMPORTS_PER_SOL)}r(sn,"solToLamports");function er(t,e){let o=e.mul(t.totalLamports),n=t.poolTokenSupply;return o.lt(n)?new Ut.default(0):o.div(n)}r(er,"calcLamportsWithdrawAmount");async function or(t,e){let[o]=await y.PublicKey.findProgramAddress([e.toBuffer(),Buffer.from("withdraw")],t);return o}r(or,"findWithdrawAuthorityProgramAddress");async function rr(t,e,o,n){let[i]=await y.PublicKey.findProgramAddress([e.toBuffer(),o.toBuffer(),n?new Ut.default(n).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],t);return i}r(rr,"findStakeProgramAddress");function Ae(t){if(typeof t=="number")return Math.abs(t)/y.LAMPORTS_PER_SOL;if(typeof t=="bigint")return Math.abs(Number(t))/y.LAMPORTS_PER_SOL;let e=1;t.isNeg()&&(e=-1);let n=t.abs().toString(10).padStart(10,"0"),i=n.length-9,c=n.slice(0,i)+"."+n.slice(i);return e*parseFloat(c)}r(Ae,"lamportsToSol");async function Wu(t,e,o,n){let[i]=await y.PublicKey.findProgramAddress([Ks,e.toBuffer(),o.toBuffer(),n.toArrayLike(Buffer,"le",8)],t);return i}r(Wu,"findTransientStakeProgramAddress");function qu(t,e){return t.poolTokenSupply.isZero()||t.totalLamports.isZero()?e:e.mul(t.poolTokenSupply).div(t.totalLamports)}r(qu,"calcPoolTokensForDeposit");async function js(t,e,o,n,i,c){let u=await t.getAccountInfo(e.validatorList),d=tr.decode(u?.data);if(!d?.validators||d?.validators.length==0)throw new Error("No accounts found");let m=await t.getMinimumBalanceForRentExemption(y.StakeProgram.space),p=new Ut.default(m+so),S=[];for(let b of d.validators){if(b.status!==_o.Active)continue;let U=await rr(ht,b.voteAccountAddress,o);if(!b.activeStakeLamports.isZero()){let H=e?.preferredWithdrawValidatorVoteAddress?.equals(b.voteAccountAddress);S.push({type:H?"preferred":"active",voteAddress:b.voteAccountAddress,stakeAddress:U,lamports:b.activeStakeLamports})}let K=b.transientStakeLamports.sub(p);if(K.gt(new Ut.default(0))){let H=await Wu(ht,b.voteAccountAddress,o,b.transientSeedSuffixStart);S.push({type:"transient",voteAddress:b.voteAccountAddress,stakeAddress:H,lamports:K})}}S=S.sort(i||((b,U)=>U.lamports.sub(b.lamports).toNumber()));let l=await t.getAccountInfo(e.reserveStake),k=new Ut.default((l?.lamports??0)-m);k.gt(new Ut.default(0))&&S.push({type:"reserve",stakeAddress:e.reserveStake,lamports:k});let g=[],T=new Ut.default(n),h=e.stakeWithdrawalFee,w={numerator:h.denominator.sub(h.numerator),denominator:h.denominator};for(let b of["preferred","active","transient","reserve"]){let U=S.filter(K=>K.type==b);for(let{stakeAddress:K,voteAddress:H,lamports:$}of U){if($.lte(p)&&b=="transient")continue;let et=qu(e,$);!c&&!w.numerator.isZero()&&(et=et.mul(w.denominator).div(w.numerator));let Z=Ut.default.min(et,T);if(!Z.lte(new Ut.default(0))&&(g.push({stakeAddress:K,voteAddress:H,poolAmount:Z}),T=T.sub(Z),T.isZero()))break}if(T.isZero())break}if(T.gt(new Ut.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${Ae(n)} pool tokens.`);return g}r(js,"prepareWithdrawAccounts");function Js(t,e,o){let n=y.Keypair.generate();return e.push(y.SystemProgram.createAccount({fromPubkey:t,newAccountPubkey:n.publicKey,lamports:o,space:y.StakeProgram.space,programId:y.StakeProgram.programId})),n}r(Js,"newStakeAccount");function ao(t){let e,o;return t.solWithdrawalFee&&(e=t.solWithdrawalFee.numerator.toNumber()*100/t.solWithdrawalFee.denominator.toNumber()),t.stakeWithdrawalFee&&(o=t.stakeWithdrawalFee.numerator.toNumber()*100/t.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:e,stakeWithdrawalFee:o}}r(ao,"getStakePoolFee");async function nr(t,e){let o=await t.getAccountInfo(e);if(!o)throw new Error("Invalid stake pool account");return{pubkey:e,account:{data:Qs.decode(o.data),executable:o.executable,lamports:o.lamports,owner:o.owner}}}r(nr,"getStakePoolAccount");async function Ou(t,e){let o=(await t.getParsedAccountInfo(e)).value;if(!o||!("parsed"in o.data))throw new Error("Invalid stake account");if(o.data.program!="stake")throw new Error("Not a stake account");return Ys.parse(o.data.parsed)}r(Ou,"getStakeAccount");async function ir(t,e,o,n,i,c,u,d,m=!0){if(m){let b=await t.getBalance(o,"confirmed");if(b<n)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${Ae(b)} SOL.`)}let S=(await nr(t,e)).account.data,l=new y.Keypair,k=[l],g=[];if(g.push(y.SystemProgram.transfer({fromPubkey:o,toPubkey:l.publicKey,lamports:n})),!i){let b=bo(S.poolMint,o);g.push(Li(o,b,o,S.poolMint)),i=b}let T=await or(ht,e);g.push(Ue.depositSol({stakePool:e,reserveStake:S.reserveStake,fundingAccount:l.publicKey,destinationPoolAccount:i,managerFeeAccount:S.managerFeeAccount,referralPoolAccount:u??i,poolMint:S.poolMint,lamports:n,withdrawAuthority:T,depositAuthority:d,referralAccount:c}));let{solWithdrawalFee:h,stakeWithdrawalFee:w}=ao(S);return{instructions:g,signers:k,solWithdrawalFee:h,stakeWithdrawalFee:w}}r(ir,"depositSol");async function $s(t,e){let o=await nr(t,e);return ao(o.account.data)}r($s,"fetchStakePoolFees");async function zs(t,e,o,n,i=!1,c,u,d,m){let p=await nr(t,e),S=new Be.default(sn(n));d||(d=bo(p.account.data.poolMint,o));let l=await xr(t,d);if(l.amount<S.toNumber())throw new Error(`Not enough token balance to withdraw ${Ae(S)} pool tokens.
          Maximum withdraw amount is ${Ae(l.amount)} pool tokens.`);let k=await t.getMinimumBalanceForRentExemption(y.StakeProgram.space),g=await or(ht,e),T=null;u&&(T=await Ou(t,u));let h=[];if(i)h.push({stakeAddress:p.account.data.reserveStake,voteAddress:void 0,poolAmount:S});else if(T&&T?.type=="delegated"){let M=T.info?.stake?.delegation.voter;if(!M)throw new Error(`Invalid stake reciever ${u} delegation`);let rt=await t.getAccountInfo(p.account.data.validatorList),ot=tr.decode(rt?.data).validators.find(nt=>nt.voteAccountAddress.equals(M));if(c&&c!==M)throw new Error(`Provided withdrawal vote account ${c} does not match delegation on stake receiver account ${M},
        remove this flag or provide a different stake account delegated to ${c}`);if(ot){let nt=await rr(ht,M,e),Lt=await t.getAccountInfo(nt);if(!Lt)throw new Error("Preferred withdraw valdator's stake account is invalid");let Vt=er(p.account.data,new Be.default(Lt.lamports-so-k));if(Vt.lt(S))throw new Error(`Not enough lamports available for withdrawal from ${nt},
              ${S} asked, ${Vt} available.`);h.push({stakeAddress:nt,voteAddress:M,poolAmount:S})}else throw new Error(`Provided stake account is delegated to a vote account ${M} which does not exist in the stake pool`)}else if(c){let M=await rr(ht,c,e),rt=await t.getAccountInfo(M);if(!rt)throw new Error("Invalid Stake Account");let at=new Be.default(rt.lamports-so-k);if(at.lt(new Be.default(0)))throw new Error("Invalid Stake Account");let ot=er(p.account.data,at);if(ot.lt(S))throw new Error(`Not enough lamports available for withdrawal from ${M},
            ${S} asked, ${ot} available.`);h.push({stakeAddress:M,voteAddress:c,poolAmount:S})}else{let M=await js(t,p.account.data,e,S,m,d.equals(p.account.data.managerFeeAccount));h.push(...M)}let w=[],b=y.Keypair.generate(),U=[b];w.push(Fr(d,b.publicKey,o,S.toNumber()));let K=0,H=5,$=0;for(let M of h){if($>H)break;let at=`Withdrawing \u25CE${er(p.account.data,M.poolAmount)},
        from stake account ${M.stakeAddress?.toBase58()}`;M.voteAddress&&(at=`${at}, delegated to ${M.voteAddress?.toBase58()}`);let ot;if(!u||T&&T.type==="delegated"){let nt=Js(o,w,k);U.push(nt),K+=k,ot=nt.publicKey}else ot=u;w.push(Ue.withdrawStake({stakePool:e,validatorList:p.account.data.validatorList,validatorStake:M.stakeAddress,destinationStake:ot,destinationStakeAuthority:o,sourceTransferAuthority:b.publicKey,sourcePoolAccount:d,managerFeeAccount:p.account.data.managerFeeAccount,poolMint:p.account.data.poolMint,poolTokens:M.poolAmount.toNumber(),withdrawAuthority:g})),w.push(...y.StakeProgram.deactivate({stakePubkey:ot,authorizedPubkey:o}).instructions),$++}u&&T&&T.type==="delegated"&&U.forEach(M=>{w.concat(y.StakeProgram.merge({stakePubkey:u,sourceStakePubKey:M.publicKey,authorizedPubkey:o}).instructions)});let{solWithdrawalFee:et,stakeWithdrawalFee:Z}=ao(p.account.data);return{instructions:w,signers:U,stakeReceiver:u,totalRentFreeBalances:K,solWithdrawalFee:et,stakeWithdrawalFee:Z}}r(zs,"withdrawStake");async function Zs(t,e,o,n,i,c){let u=await nr(t,e),d=new Be.default(sn(i)),m=bo(u.account.data.poolMint,o),p=await xr(t,m);if(p.amount<d.toNumber())throw new Error(`Not enough token balance to withdraw ${Ae(d)} pool tokens.
            Maximum withdraw amount is ${Ae(p.amount)} pool tokens.`);let S=[],l=y.Keypair.generate(),k=[l];S.push(Fr(m,l.publicKey,o,d.toNumber()));let g=await or(ht,e);if(c){let b=u.account.data.solWithdrawAuthority;if(!b)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(c.toBase58()!=b.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${b.toBase58()}, received ${c.toBase58()}`)}let T=Ue.withdrawSol({stakePool:e,withdrawAuthority:g,reserveStake:u.account.data.reserveStake,sourcePoolAccount:m,sourceTransferAuthority:l.publicKey,destinationSystemAccount:n,managerFeeAccount:u.account.data.managerFeeAccount,poolMint:u.account.data.poolMint,poolTokens:d.toNumber(),solWithdrawAuthority:c});S.push(T);let{solWithdrawalFee:h,stakeWithdrawalFee:w}=ao(u.account.data);return{instructions:S,signers:k,solWithdrawalFee:h,stakeWithdrawalFee:w}}r(Zs,"withdrawSol");function Xs({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,transaction:n=new y.Transaction}){return e.equals(o)||n.add(y.StakeProgram.authorize({authorizedPubkey:o,newAuthorizedPubkey:o,stakeAuthorizationType:y.StakeAuthorizationLayout.Staker,stakePubkey:t})),n.add(y.StakeProgram.deactivate({stakePubkey:t,authorizedPubkey:o})),n}r(Xs,"deactivateStake");var Gx=r(t=>{let{t:e}=tt(),o=pt(),n=Yr(),{mutateAsync:i}=ri(t);return ve({mutationFn:r(async({accountIdentifier:d,senderAddress:m,stakePubkey:p,stakeAuthorityPubkey:S,authorizedPubkey:l})=>{if(!m)throw is;let{networkID:k,address:g}=m,T=Xs({stakePubkey:p,stakeAuthorityPubkey:S,authorizedPubkey:l}),h=await Yt(T,{connection:t}),w={ownerAddress:g??"",networkID:k,data:{signature:""},type:Pe.DeactivateStake,display:{summary:{topLeft:{text:e("transactionsPendingDeactivatingStake")}}}};n.approved({chainType:q.Solana,chainName:mt.Solana,networkId:N.getSolanaNetworkIDValue(k),type:"undelegate"});let b=await i({accountIdentifier:d,feePayer:new y.PublicKey(g),transaction:h,pendingTransactionInput:w});return n.submittedTransaction(b,{chainType:q.Solana,chainName:mt.Solana,networkId:N.getSolanaNetworkIDValue(k),method:"signAndSendTransaction",walletAddress:g}),n.deactivateStake(),{networkID:k,id:b??""}},"mutationFn"),onSuccess:r(d=>{vo({connection:t,signature:d.id}).then(()=>{n.transactionStatus(d.id,{chainType:q.Solana,chainName:mt.Solana,networkId:N.getSolanaNetworkIDValue(d.networkID),status:{type:"confirmed"}})}).catch(m=>{n.transactionStatus(d.id,{chainType:q.Solana,chainName:mt.Solana,networkId:N.getSolanaNetworkIDValue(d.networkID),status:{type:"error"}}),Q.captureError(m,Y.Staking)}),Ds(t,d.id,o)},"onSuccess")})},"useDeactivateStake");async function Gu({connection:t,stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:n}){let i=Xs({stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:n}),c=(await t.getLatestBlockhash("confirmed")).blockhash,u=new y.TransactionMessage({instructions:i.instructions,payerKey:o,recentBlockhash:c}).compileToV0Message(),d=new y.VersionedTransaction(u);return await Yt(d,{connection:t})}r(Gu,"getDeactivateStakeTransaction");var _s=r(({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,connection:n,stakePoolAddress:i,disabled:c})=>{let u=F.getDeactivateStakeTransaction({stakePubkey:t.toString(),stakeAuthorityPubkey:e.toString(),authorizedPubkey:o.toString()});return I({enabled:!c&&!!t&&!!e&&!!o,queryKey:u,staleTime:R({seconds:30}),async queryFn(){try{let[m,{solWithdrawalFee:p,stakeWithdrawalFee:S}]=await Promise.all([Gu({connection:n,stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o}),$s(n,i)]);return{transaction:m,networkID:wt.Solana.Mainnet,solWithdrawalFee:p,stakeWithdrawalFee:S}}catch(m){throw Q.captureError(m,Y.Staking),m}}})},"useGetDeactivateStakeTransaction");s();a();var st=x(L());s();a();var ta=x(L());var sr=r(({txReceipt:t,isTxError:e,poolTokenFungible:o,invalidateQueries:n,dismissLiquidStaking:i})=>{let c=D(d=>d.resetStaking),u=D(d=>d.setNavigateTo);return(0,ta.useCallback)(()=>{if(c(),!t||e)return i();n(),u(o?{screen:"FungibleDetail",caip19:oe(Wt(o))}:{screen:"Activity"}),i()},[t,e,o,n,i,u,c])},"useDismissLiquidStaking");s();a();var ar=x(L());s();a();var ea=r(({connection:t})=>{let e=Ve(),o=Mn();return ve({mutationFn:r(async({accountIdentifier:i,ownerAddress:c,pendingActivityRow:u,activityType:d,transactionData:{networkID:m,transaction:p,signers:S}})=>{if(N.isSolanaNetworkID(m)){await kn(p,t);let l={ownerAddress:c,networkID:m,data:{signature:""},type:d,display:{summary:u}};return{id:await Qn({accountIdentifier:i,feePayer:new y.PublicKey(c),connection:t,accountSigner:o,transaction:p,pendingTransactionInput:l,storage:e,opts:{additionalSignerAccounts:S}}),networkID:m}}throw new Error(`Unsupported network for liquid staking: ${m}`)},"mutationFn")})},"useProcessTransactionData");function cr({isLoadingPoolToken:t,pendingActivityRow:e,onTransactionSubmitted:o,onTransactionFailed:n,activityType:i}){let{connection:c}=ft(),u=D(w=>w.transactionData),d=yt,{data:m,isLoading:p}=re(),{mutateAsync:S}=ea({connection:c}),k=(0,ar.useMemo)(()=>(m?.addresses??[]).find(w=>w.networkID===d?.data.chain.id),[d?.data.chain.id,m?.addresses])?.address??"",g=m?.identifier??"";return{executeLiquidStake:(0,ar.useCallback)(async()=>{try{if(!u)throw new ge(Fe.MissingTransactionData);let w=await S({accountIdentifier:g,ownerAddress:k,pendingActivityRow:e,activityType:i,transactionData:u});o(w)}catch(w){n(w)}},[g,k,e,u,S,o,n,i]),isReadyToExecute:!p&&!t}}r(cr,"useExecuteLiquidStakeTransaction");s();a();function ur(t){return t instanceof ge?t:new ge(Fe.UnknownError)}r(ur,"parseStakingError");function Hu({stakedTokenSymbol:t,poolTokenSymbol:e,txHash:o,txError:n,confirmationStatus:i,eligibleAccountsCount:c,isConvertDelayed:u,durationUntilEpochEnds:d,onDismiss:m,onConvertMore:p}){let S={title:v.t("commandClose"),onPress:m},l={title:v.t("convertStakeStatusConvertMore"),onPress:p},k={txHash:o,txHashTitle:v.t("commandViewTransaction")};return n?{type:"error",title:v.t("convertStakeStatusErrorTitle"),message:v.t("convertStakeStatusErrorMessage",{poolTokenSymbol:e}),...k,primaryButton:S,showUKDisclaimer:!1,openExternalLink:void 0}:i==="confirmed"?{type:"success",title:v.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...k,...c>1?{primaryButton:l,secondaryButton:S}:{primaryButton:S},showUKDisclaimer:!1,openExternalLink:void 0,...u?{title:v.t("convertStakeStatusSuccessTitleDelayed"),message:v.t("convertStakeStatusSuccessMessageDelayed",{durationUntilEpochEnds:d})}:{}}:{type:"loading",title:v.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:v.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:t,poolTokenSymbol:e}),...k,primaryButton:S,showUKDisclaimer:!1,openExternalLink:void 0}}r(Hu,"getStatusPageProps");var Yu=r(({dismissConvertFlow:t,goToConvertAccountList:e})=>{let o=zo(),[n,i]=(0,st.useState)("loading"),[c,u]=(0,st.useState)(),[d,m]=(0,st.useState)(),{trackConvertSubmitted:p,trackConvertSuccess:S,trackConvertFailed:l,trackConvertMoreClicked:k}=Ft(),{usageState:g,setUsageState:T}=Re(),h=oo(),w=D(dt=>dt.convert),b=D(dt=>dt.amount),[U]=(0,st.useState)(w?.eligibleAccountsCount??0),K=D(dt=>dt.convert),H=D(dt=>dt.setTransactionData),$=yt,et=$?.data.symbol??"",Z=h?.stakePoolTokenMetadata.metadata.symbol??"",M=h?.stakePoolTokenMetadata.metadata.address??"",{data:rt}=re(),at=rt?.type===pe.Ledger,nt=(0,st.useMemo)(()=>(rt?.addresses??[]).find(dt=>dt.networkID===$?.data.chain.id),[$?.data.chain.id,rt?.addresses])?.addressType??q.Solana,{fungible:Lt,isLoadingTokens:Vt}=Nt({key:M}),zt=ke(),Zt=(0,st.useCallback)(dt=>{p(dt.id),u(dt),g.convert||T({convert:!0})},[T,p,g.convert]),Xt=(0,st.useCallback)(dt=>{l({amount:b,convertDetails:w});let va=ur(dt);m(va)},[l,b,w]),_t=(0,st.useMemo)(()=>({topLeft:{text:v.t("convertStakePendingTitle",{symbol:Z})}}),[Z]),{executeLiquidStake:te,isReadyToExecute:X}=cr({isLoadingPoolToken:Vt,pendingActivityRow:_t,onTransactionSubmitted:Zt,onTransactionFailed:Xt,activityType:Pe.ConvertStake}),At=(0,st.useCallback)(()=>{S({amount:b,convertDetails:w,provider:h}),H(void 0),o()},[b,S,H,o,h,w]),{isSuccess:V,isError:It,error:we}=xo(At,c);(0,st.useEffect)(()=>{V?i("confirmed"):It&&(i("error"),m(we),l({amount:b,convertDetails:w}))},[b,w,V,It,l,we,c]);let lo=sr({txReceipt:c,isTxError:It,poolTokenFungible:Lt,invalidateQueries:o,dismissLiquidStaking:t}),po=(0,st.useCallback)(()=>{k(),e()},[k,e]),ba=(0,st.useMemo)(()=>Hu({stakedTokenSymbol:et,poolTokenSymbol:Z,txHash:c?.id,txError:d,confirmationStatus:n,eligibleAccountsCount:U,isConvertDelayed:Je(K?.activationState),durationUntilEpochEnds:zt,onDismiss:lo,onConvertMore:po}),[et,Z,c?.id,d,n,U,K?.activationState,zt,lo,po]);return{addressType:nt,isLedger:at,isReadyToExecute:X,statusPageProps:ba,txError:d,executeLiquidStake:te,learnMoreLink:Br,isJitoSOL:!1,isPSOL:!0}},"useConvertStakeAccountStatusPageProps");s();a();s();a();var ga=x(L());s();a();var da=x(L());s();a();var oa=r((t,e)=>{let o=[],n=t?Wt(t):void 0,i=bn(e?.stakePoolTokenMetadata.caip19??"");return n&&i&&(o.push(n),o.push(i)),{query:{data:o}}},"getPriceArgs");s();a();var Te=x(L());s();a();function dr(t){return t?t.stakePoolTokenMetadata.caip19===ie:!1}r(dr,"isJitoLST");s();a();s();a();var aP={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:le.Mainnet},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:le.Mainnet,validators:[{vote_account:"validator"}]},ra={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:$n,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:le.Mainnet},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:le.Mainnet,validators:[{vote_account:"validator"}]};function mr(t){return t?t.stakePoolTokenMetadata.caip19===ra.stakePoolTokenMetadata.caip19:!1}r(mr,"isPhantomLST");var Qu=r((t,e)=>{if(e===void 0)return;let o=Wt(t),n=oe(o);return e[n]},"extractPrice"),ju=r((t,e,o)=>{if(!e)return O(0);let n=O(e.convertRatio),i=vt(t,e.stakePoolTokenMetadata.metadata.decimals);return o?i.multipliedBy(n):i.div(n)},"getReceiveAmount");function na(t,e,o){return e?{network:{id:e.stakePoolTokenMetadata.metadata.chainId??le.Mainnet,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:o?o[e.stakePoolTokenMetadata.caip19]:void 0,decimals:e.stakePoolTokenMetadata.metadata.decimals,logoUri:e.stakePoolTokenMetadata.metadata.logoURI??null,symbol:e.stakePoolTokenMetadata.metadata.symbol,tokenAddress:e.stakePoolTokenMetadata.metadata.address,tokenType:We.SPL}:{network:{id:t.data.chain.id,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:Qu(t,o),decimals:t.data.decimals,logoUri:t.data.logoUri??null,symbol:t.data.symbol,tokenAddress:t.data.tokenAddress,tokenType:t.type??We.SolanaNative}}r(na,"extractAssetMetadata");var ia=r((t,e,o,n,i=!1)=>{if(!t)return null;let{priceData:c,decimals:u,...d}=na(t,i?e:void 0,n),m=vt(o,u),p=c?.usd?m.multipliedBy(c.usd):null;return{amount:Se(m),amountUsd:p?p.toNumber():null,border:!1,title:v.t("liquidStakeReviewYouPay"),...d}},"getAssetPropsForPayAsset"),sa=r((t,e,o,n,i=!1)=>{if(!e||!t)return null;let{priceData:c,...u}=na(t,i?void 0:e,n),d=ju(o,e,i),m=c?.usd?d.multipliedBy(c.usd):null;return{amount:Se(d),amountUsd:m?m.toNumber():null,border:!1,title:i?v.t("liquidStakeUnstakeReviewYouReceive"):v.t("liquidStakeReviewYouReceive"),...u}},"getAssetPropsForReceiveAsset"),aa=r(({process:t,fungibleToStake:e,amount:o,provider:n,selectedChainAddress:i,transactionFees:c,isLoading:u,canSubmit:d,transactionData:m,priceMap:p,networkFeeErrorMsg:S,showUKDisclaimer:l})=>{let k=(0,Te.useMemo)(()=>ia(e,n,o,p),[e,n,o,p]),g=(0,Te.useMemo)(()=>sa(e,n,o,p),[e,n,o,p]),T=n?.name??"",h=i?.address??"",w=n?.apy!==void 0?fe(Number.parseFloat(n.apy)):"",b=`${Se(vt(c,e?.data.decimals??0))} ${e?.data.symbol}`,U=dr(n),K=mr(n),H=n?.totalRewardsFeePercentage??"8",$=m?.solWithdrawalFee??m?.stakeWithdrawalFee,et=(0,Te.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),providerLabelText:v.t("liquidStakeReviewProvider"),apyLabelText:v.t("stakeReviewAPY"),apyLabelTextTooltip:v.t("stakeReviewAPYTooltip"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t(t==="convert"||t==="convertDelayed"?"commandConvert":"commandStake"),feeFootnoteText:v.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:H}),feeFootnoteDescriptionText:v.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:$}),feeFootnoteTooltipText:v.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:H}),title:v.t("liquidStakeReviewPageTitle")}),[t,H,$]);return{process:t,payAsset:k,receiveAsset:g,account:h,providerName:T,apy:w,networkFee:b,strings:et,isLoading:u,canSubmit:d,networkFeeErrorMsg:S,isJitoSOL:U,isPSOL:K,showUKDisclaimer:l,totalRewardsFeePercentage:H}},"useStakeMapToViewState"),xP=r(({stakedFungible:t,amount:e,provider:o,selectedChainAddress:n,transactionFees:i,isLoading:c,canSubmit:u,priceMap:d,networkFeeErrorMsg:m,transactionData:p,durationUntilEpochEnds:S})=>{let l=(0,Te.useMemo)(()=>ia(t,o,e,d,!0),[t,o,e,d]),k=(0,Te.useMemo)(()=>sa(t,o,e,d,!0),[t,o,e,d]),g=n?.address??"",T=`${Se(vt(i,t?.data.decimals??0))} ${t?.data.symbol}`,h=p?.isWithdrawSol??!0,w=h?p?.solWithdrawalFee??.1:p?.stakeWithdrawalFee??.1,b=(0,Te.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t("commandUnstake"),feeLabelText:v.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:v.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:v.t("unstakeLiquidStakeDelayDisclaimer",{durationUntilEpochEnds:S}),feePercentageText:`${w}%`,title:v.t("liquidStakeReviewPageTitle")}),[w,S]),U=Jt();return{payAsset:l,receiveAsset:k,account:g,networkFee:T,strings:b,isLoading:c,canSubmit:u,networkFeeErrorMsg:m,isWithdrawSol:h,showUKDisclaimer:U}},"useUnstakeMapToViewState");s();a();var ca=x(L());var Ju=R({seconds:10}),ua=r(({hasPoolTokenAccount:t,chainAddress:e,transactionData:o})=>{let{data:n,isPending:i,isFetched:c,isSuccess:u}=oi({networkID:o?.networkID??N.solana.mainnetID,multichainTransaction:zu(o),queryOptions:{refetchInterval:Ju}}),{data:d=0}=Xn(e),m=it(Do).plus(Ye),p=t?it(m):it(d).plus(m),{hasSufficientFunds:S,isLoading:l,nativeTokenSymbol:k}=ii({networkID:o?.networkID??N.solana.mainnetID,addressType:e?.addressType,gasEstimation:n,transactionValue:p}),g=Zu({hasSufficientFunds:S,hasGasEstimationFailed:c&&!u,nativeTokenSymbol:k}),T=$u(n),h=p.plus(T),w=i||l;return(0,ca.useMemo)(()=>({isLoading:w,hasSufficientFunds:S,transactionFees:h,networkFeeErrorMsg:g,nativeTokenSymbol:k}),[w,S,h,g,k])},"useLiquidStakingTransactionFees"),$u=r(t=>t?N.isSolanaNetworkID(t.networkID)?it(t.value):it(0):it(0),"getGasEstimationValue"),zu=r(t=>{if(t&&N.isSolanaNetworkID(t.networkID)){let{networkID:e,transaction:o}=t;return{networkID:e,transaction:[o]}}},"getMultichainTransaction"),Zu=r(({hasSufficientFunds:t,hasGasEstimationFailed:e,nativeTokenSymbol:o})=>e?v.t("transactionGasEstimationError"):t==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0,"getNetworkFeeErrorMessage");var lr=r(({process:t,provider:e,transactionData:o,isLoadingTransactionData:n})=>{let i=yt,c=D(K=>K.amount),{data:u}=Et(q.Solana),{fungible:d,isLoadingTokens:m}=Nt({key:e?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:p,hasSufficientFunds:S,transactionFees:l,networkFeeErrorMsg:k}=ua({hasPoolTokenAccount:!!d,chainAddress:u,transactionData:o}),g=(0,da.useMemo)(()=>oa(i,e),[i,e]),{data:T}=ei(g),h=n||p||m,w=!h&&!!o&&S!=="insufficient"&&!k,b=Jt();return aa({process:t,fungibleToStake:i,amount:c,provider:e,selectedChainAddress:u,transactionFees:l,transactionData:o,isLoading:h,canSubmit:w,priceMap:T,networkFeeErrorMsg:k,showUKDisclaimer:t==="mint"&&b})},"useLiquidStakeReviewPageProps");s();a();s();a();s();a();s();a();s();a();s();a();s();a();function Xu(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}r(Xu,"bytes");function an(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}r(an,"exists");function ma(t,e){Xu(t);let o=e.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}r(ma,"output");s();a();var _u=r(t=>t instanceof Uint8Array,"u8a");var fr=r(t=>new DataView(t.buffer,t.byteOffset,t.byteLength),"createView"),Bt=r((t,e)=>t<<32-e|t>>>e,"rotr"),td=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!td)throw new Error("Non little-endian hardware is not supported");function ed(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}r(ed,"utf8ToBytes");function cn(t){if(typeof t=="string"&&(t=ed(t)),!_u(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}r(cn,"toBytes");var pr=class{static{r(this,"Hash")}clone(){return this._cloneInto()}},sC={}.toString;function la(t){let e=r(n=>t().update(cn(n)).digest(),"hashC"),o=t();return e.outputLen=o.outputLen,e.blockLen=o.blockLen,e.create=()=>t(),e}r(la,"wrapConstructor");function od(t,e,o,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,o,n);let i=BigInt(32),c=BigInt(4294967295),u=Number(o>>i&c),d=Number(o&c),m=n?4:0,p=n?0:4;t.setUint32(e+m,u,n),t.setUint32(e+p,d,n)}r(od,"setBigUint64");var Sr=class extends pr{static{r(this,"SHA2")}constructor(e,o,n,i){super(),this.blockLen=e,this.outputLen=o,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fr(this.buffer)}update(e){an(this);let{view:o,buffer:n,blockLen:i}=this;e=cn(e);let c=e.length;for(let u=0;u<c;){let d=Math.min(i-this.pos,c-u);if(d===i){let m=fr(e);for(;i<=c-u;u+=i)this.process(m,u);continue}n.set(e.subarray(u,u+d),this.pos),this.pos+=d,u+=d,this.pos===i&&(this.process(o,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){an(this),ma(e,this),this.finished=!0;let{buffer:o,view:n,blockLen:i,isLE:c}=this,{pos:u}=this;o[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>i-u&&(this.process(n,0),u=0);for(let l=u;l<i;l++)o[l]=0;od(n,i-8,BigInt(this.length*8),c),this.process(n,0);let d=fr(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=m/4,S=this.get();if(p>S.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<p;l++)d.setUint32(4*l,S[l],c)}digest(){let{buffer:e,outputLen:o}=this;this.digestInto(e);let n=e.slice(0,o);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:o,buffer:n,length:i,finished:c,destroyed:u,pos:d}=this;return e.length=i,e.pos=d,e.finished=c,e.destroyed=u,i%o&&e.buffer.set(n),e}};var rd=r((t,e,o)=>t&e^~t&o,"Chi"),nd=r((t,e,o)=>t&e^t&o^e&o,"Maj"),id=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ue=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),de=new Uint32Array(64),un=class extends Sr{static{r(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=ue[0]|0,this.B=ue[1]|0,this.C=ue[2]|0,this.D=ue[3]|0,this.E=ue[4]|0,this.F=ue[5]|0,this.G=ue[6]|0,this.H=ue[7]|0}get(){let{A:e,B:o,C:n,D:i,E:c,F:u,G:d,H:m}=this;return[e,o,n,i,c,u,d,m]}set(e,o,n,i,c,u,d,m){this.A=e|0,this.B=o|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=u|0,this.G=d|0,this.H=m|0}process(e,o){for(let l=0;l<16;l++,o+=4)de[l]=e.getUint32(o,!1);for(let l=16;l<64;l++){let k=de[l-15],g=de[l-2],T=Bt(k,7)^Bt(k,18)^k>>>3,h=Bt(g,17)^Bt(g,19)^g>>>10;de[l]=h+de[l-7]+T+de[l-16]|0}let{A:n,B:i,C:c,D:u,E:d,F:m,G:p,H:S}=this;for(let l=0;l<64;l++){let k=Bt(d,6)^Bt(d,11)^Bt(d,25),g=S+k+rd(d,m,p)+id[l]+de[l]|0,h=(Bt(n,2)^Bt(n,13)^Bt(n,22))+nd(n,i,c)|0;S=p,p=m,m=d,d=u+g|0,u=c,c=i,i=n,n=g+h|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,u=u+this.D|0,d=d+this.E|0,m=m+this.F|0,p=p+this.G|0,S=S+this.H|0,this.set(n,i,c,u,d,m,p,S)}roundClean(){de.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var pa=la(()=>new un);var fa=x(Ca());var sd=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],yr=r(t=>{let e=`${String.fromCharCode(...sd)}||${t}`,o=pa(Buffer.from(e));return fa.default.encode(o)},"getReferralAccount");var dn=r(async({connection:t,stakePoolAddress:e,ownerAddress:o,amount:n,poolTokenAccountAddress:i})=>{let c=new y.PublicKey(e),u=new y.PublicKey(o),d=i?new y.PublicKey(i):void 0,m=new y.PublicKey(yr(o)),{instructions:p,signers:S,solWithdrawalFee:l,stakeWithdrawalFee:k}=await ir(t,c,u,n,d,m),g=(await t.getLatestBlockhash("confirmed")).blockhash,T=new y.VersionedTransaction(new y.TransactionMessage({instructions:p,payerKey:u,recentBlockhash:g}).compileToV0Message());return{transaction:await Yt(T,{connection:To(wt.Solana.Mainnet),calculators:{cost:wo,budget:new ho(2e5,2e5)}}),signers:S,solWithdrawalFee:l,stakeWithdrawalFee:k}},"getMintPoolTokenTransaction");s();a();async function Sa({connection:t,stakePoolAddress:e,amount:o,senderAddress:n,useWithdrawSol:i}){let c=new y.PublicKey(n),u,d,m,p;if(i){let g=await Zs(t,new y.PublicKey(e),c,c,o).catch(T=>{throw Q.captureError(T,Y.Staking),T});u=g.instructions,d=g.signers,m=g.solWithdrawalFee,p=g.stakeWithdrawalFee}else{let g=await zs(t,new y.PublicKey(e),c,o).catch(T=>{throw Q.captureError(T,Y.Staking),T});u=g.instructions,d=g.signers,m=g.solWithdrawalFee,p=g.stakeWithdrawalFee}let S=(await t.getLatestBlockhash("confirmed")).blockhash,l=new y.VersionedTransaction(new y.TransactionMessage({instructions:u,payerKey:c,recentBlockhash:S}).compileToV0Message());return{transaction:await Yt(l,{connection:t}),signers:d,solWithdrawalFee:m,stakeWithdrawalFee:p}}r(Sa,"getWithdrawLiquidStakeTransactionWithOptions");async function ad({connection:t,stakePoolAddress:e,amount:o,senderAddress:n,useWithdrawSol:i}){try{let c=await Sa({connection:t,stakePoolAddress:e,amount:o,senderAddress:n,useWithdrawSol:i}),u=await t.simulateTransaction(c.transaction,{sigVerify:!1});if(u.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(u.value.err)}`);return{...c,isWithdrawSol:i}}catch(c){Q.captureError(c instanceof Error?c:new Error(String(c)),Y.Staking);try{return{...await Sa({connection:t,stakePoolAddress:e,amount:o,senderAddress:n,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(u){throw Q.captureError(u instanceof Error?u:new Error(String(u)),Y.Staking),u}}}r(ad,"getWithdrawLiquidStakeTransaction");s();a();var mn=r(async({connection:t,stakePoolAddress:e,stakePubkey:o,ownerAddress:n,amount:i})=>{let c=new y.PublicKey(e),u=new y.PublicKey(n),d=new y.PublicKey(o),m=new y.PublicKey(yr(n)),p=y.StakeProgram.withdraw({stakePubkey:d,authorizedPubkey:u,toPubkey:u,lamports:i}),[S]=p.instructions,{instructions:l,signers:k,solWithdrawalFee:g,stakeWithdrawalFee:T}=await ir(t,c,u,i,void 0,m,void 0,void 0,!1),h=[S,...l],w=(await t.getLatestBlockhash("confirmed")).blockhash,b=new y.TransactionMessage({instructions:h,payerKey:u,recentBlockhash:w}).compileToV0Message(),U=new y.VersionedTransaction(b);return{transaction:await Yt(U,{connection:To(wt.Solana.Mainnet),calculators:{cost:wo,budget:new ho(2e5,2e5)}}),signers:k,solWithdrawalFee:g,stakeWithdrawalFee:T}},"getConvertToPSOLTransaction");var ya=r(t=>{let e=F.getConvertStakeTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,validatorVoteAddress:"",stakeAccountAddress:t.stakePubkey}),o=!t.disabled&&!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.stakePubkey&&!!t.amount;return I({enabled:o,queryKey:e,staleTime:R({seconds:30}),async queryFn(){if(N.isSolanaNetworkID(t.networkId))try{let{transaction:n,signers:i,solWithdrawalFee:c,stakeWithdrawalFee:u}=await mn({connection:t.connection,stakePoolAddress:t.stakePoolAddress,stakePubkey:t.stakePubkey,ownerAddress:t.ownerAddress,amount:t.amount});return{networkID:t.networkId,transaction:n,signers:i,solWithdrawalFee:c,stakeWithdrawalFee:u}}catch(n){throw Q.captureError(n,Y.Staking),n}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetConvertToPSOLTransaction");var cd=r((t,e,o)=>{let{data:n}=Et(q.Solana),{trackConvertApprovedByUser:i}=Ft(),c=D(K=>K.amount),u=D(K=>K.setTransactionData),d=ke(),{connection:m}=ft(),{data:p,isLoading:S}=_s({connection:m,stakePubkey:new y.PublicKey(e.stakeAccount??""),stakeAuthorityPubkey:new y.PublicKey(e.stakeAuthorityPubkey??""),authorizedPubkey:new y.PublicKey(n?.address??""),stakePoolAddress:new y.PublicKey(t?.stakePoolAddress??""),disabled:e.activationState!=="active"&&e.activationState!=="activating"}),{data:l,isLoading:k}=ya({connection:m,networkId:t?.chainId??N.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:n?.address??"",stakePubkey:e?.stakeAccount??"",amount:parseInt(c),disabled:e?.activationState!=="inactive"}),g=je(e?.activationState),T=Je(e?.activationState),h=g?l:T?p:void 0,w=g?k:T?S:!1,b=lr({process:e?.activationState==="active"?"convertDelayed":"convert",provider:t,transactionData:h,isLoadingTransactionData:w}),U=(0,ga.useCallback)(()=>{i({provider:t,convertDetails:e,amount:c,fromAmount:b.payAsset?.amount,toAmount:b.receiveAsset?.amount,fromAmountUSD:b.payAsset?.amountUsd,toAmountUSD:b.receiveAsset?.amountUsd}),u(h),o()},[o,u,h,i,e,t,b,c]);return{...b,durationUntilEpochEnds:d,onPrimaryButtonPress:U}},"useConvertStakeAccountReviewPageProps");s();a();s();a();var Dt=x(L());s();a();var ud=2,ka=r(({networkID:t,poolTokenMintAddress:e})=>{let o=N.getAddressType(t),{fungible:n}=Nt({key:e}),i=_n(t,o),{fungible:c}=Nt({key:i}),u=O(c?.data.amount??""),d=O(Do),m=O(Ye),p=O(Ye),S=O(ud).plus(d),l=n?O(S).plus(m):O(p).plus(S).plus(m),k=O(u).minus(l),g=O.max(k,0);return{minAmount:l,maxAmount:g,balance:u}},"useMintMaxMinAmounts");var dd=r(t=>{if(t.isLessThan(.01))return t.toString();let e=t.dp();return t.isLessThan(1)&&e&&e>1?t.toFixed(2,O.ROUND_FLOOR):parseFloat(t.toFixed(1,O.ROUND_FLOOR)).toString()},"formatInitialStakeUiAmount"),md=r(({goBack:t,goToReviewPage:e,showInfoPage:o,lstCaip19:n})=>{let i=yt,c=D(X=>X.amount),u=D(X=>X.setAmount),d=D(X=>X.setProvider),m=i?.data.symbol??"",p=i?.data.chain.id??N.solana.mainnetID,S=i?.data.decimals??yt.data.decimals,{data:l}=Et(q.Solana),{pickedLSTProvider:k}=Rt(N.solana.mainnetID),g=k(n),T=g?.stakePoolTokenMetadata.metadata.address??"";Jr(l,to.STAKE_FUNGIBLE);let{minAmount:h,maxAmount:w,balance:b}=ka({networkID:p,poolTokenMintAddress:T}),U=(0,Dt.useMemo)(()=>{if(c)return Un(c,S);let X=b.multipliedBy(.95),At=O.max(O.min(X,w),h);return dd(vt(At,S))},[c,b,S,w,h]),[K,H]=(0,Dt.useState)(U),$=vt(w,S),et=vt(h,S),Z=vt(b,S),M=Dn(K,S).toString(),rt=O(M),at=b.isLessThan(h),ot=rt.isGreaterThan(w),nt=rt.isFinite(),Lt=(0,Dt.useMemo)(()=>{if(!g)return v.t("mintLiquidStakeAmountNoProviders");if(M&&at)return v.t("mintLiquidStakeAmountMinRequired",{symbol:m,amount:et});if(M&&ot)return v.t("mintLiquidStakeAmountInsufficientBalance")},[g,M,at,ot,et,m]),Vt=nt&&!Lt,zt=(0,Dt.useMemo)(()=>{if(!g)return;let X=fe(Number.parseFloat(g.apy)),{address:At,name:V,symbol:It,logoURI:we}=g.stakePoolTokenMetadata.metadata,lo=O(1).dividedBy(O(g.convertRatio)),po=`1 ${m} \u2248 ${Se(lo)} ${It}`;return{identifier:At,apy:X,name:V,symbol:It,rate:po,logoURI:we}},[g,m]),Zt=(0,Dt.useCallback)(()=>{H(String($))},[$]),Xt=(0,Dt.useCallback)(X=>{let At=Bn(X);Vo(At,S??9)&&H(At)},[S]),_t=(0,Dt.useCallback)(()=>{d(g),u(M),e()},[g,M,e,u,d]),te=(0,Dt.useCallback)(()=>{u(""),t()},[u,t]);return{amount:K,amountError:Lt,balance:Z,symbol:m,title:v.t("liquidStakeMintStakeSOL"),poolToken:zt,canSubmit:Vt,onBack:te,onContinue:_t,onChangeAmount:Xt,onSetMax:Zt,onInfoPress:n===B?o:void 0}},"useMintLiquidStakeAmountProps");s();a();var me=x(L());var gr=null,ld=r(t=>{if(!gr&&t){let e="liquidStake";gr=new Ee(t,e)}if(!gr)throw new Error("liquidStakeAnalytics was not properly configured");return gr},"getLiquidStakeSequenceAnalytics"),Kt=r(()=>{let t=xt(),e=ld(t),o=r(l=>{switch(l){case B:return"Phantom Staked SOL";case ie:return"Jito Staked SOL";default:return}},"getTokenNameFromCaip19"),n=r(l=>{switch(l){case B:return"PSOL";case ie:return"JITOSOL";default:return}},"getTokenSymbolFromCaip19"),i=(0,me.useCallback)(({provider:l,entryPoint:k,testVariant:g})=>{t.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:l,lstSymbol:n(l),entryPoint:k,testVariant:g??""}})},[t]),c=(0,me.useCallback)(({lstCaip19:l,testVariant:k,entryPoint:g})=>{t.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:l,lstSymbol:n(l),testVariant:k,entryPoint:g}}})},[t]),u=(0,me.useCallback)(l=>{let k=l?o(l):void 0,g=l?n(l):void 0;t.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:l,token:k,tokenSymbol:g}}})},[t]),d=(0,me.useCallback)(({provider:l,payAmount:k,receiveAmount:g,payAmountUSD:T,receiveAmountUSD:h,payAssetTitle:w,providerName:b,receiveAssetTitle:U})=>{t.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:l?.stakePoolAddress,token:l?.stakePoolTokenMetadata.metadata.name,apy:l?.apy,convertRatio:l?.convertRatio,caip19:l?.stakePoolTokenMetadata.caip19,payAmount:k,receiveAmount:g,payAmountUSD:T,receiveAmountUSD:h,payAssetTitle:w,receiveAssetTitle:U,providerName:b}}})},[t]),m=(0,me.useCallback)((l,k)=>{e.submittedTransaction(l,{chainType:q.Solana,chainName:mt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:k})},[e]),p=(0,me.useCallback)(({provider:l,amount:k})=>{t.capture("liquidStakingMintSuccess",{data:{stake:{apy:l?.apy,convertRatio:l?.convertRatio,caip19:l?.stakePoolTokenMetadata.caip19,stakePoolAddress:l?.stakePoolAddress,token:l?.stakePoolTokenMetadata.metadata.name,totalAmount:k}}})},[t]),S=(0,me.useCallback)(l=>{t.capture("liquidStakingMintFailed",{data:{stake:{amount:l}}})},[t]);return{trackMintModalContinue:u,trackMarketingModalSeen:i,trackMarketingModalContinue:c,trackMintSubmitted:m,trackMintSuccess:p,trackMintFailed:S,trackMintApprovedByUser:d}},"useMintStakeAnalytics");s();a();var gt=x(L());var pd="https://www.jito.network/defi/";function fd({poolTokenSymbol:t,txHash:e,txError:o,confirmationStatus:n,showUKDisclaimer:i,onDismiss:c,openExternalLink:u}){let d={title:v.t("commandClose"),onPress:c},m={txHash:e,txHashTitle:v.t("commandViewTransaction")};return o?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:t}),...m,primaryButton:d,showUKDisclaimer:i,openExternalLink:u}:n==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle"),message:"",...m,primaryButton:d,showUKDisclaimer:i,openExternalLink:u}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle"),message:v.t("mintStakeStatusLoadingMessage"),...m,primaryButton:d,showUKDisclaimer:i,openExternalLink:u}}r(fd,"getStatusPageProps");var Sd=r((t,e)=>{let o=zo(),[n,i]=(0,gt.useState)("loading"),[c,u]=(0,gt.useState)(),[d,m]=(0,gt.useState)(),{trackMintSubmitted:p,trackMintSuccess:S,trackMintFailed:l}=Kt(),{usageState:k,setUsageState:g}=Re(),T=D(V=>V.provider),h=D(V=>V.setTransactionData),w=D(V=>V.amount),b=yt,U=T?.stakePoolTokenMetadata.metadata.symbol??"",K=T?.stakePoolTokenMetadata.metadata.address??"",{data:H}=re(),$=H?.type===pe.Ledger,Z=(0,gt.useMemo)(()=>(H?.addresses??[]).find(V=>V.networkID===b?.data.chain.id),[b?.data.chain.id,H?.addresses])?.addressType??q.Solana,{fungible:M,isLoadingTokens:rt}=Nt({key:K}),at=(0,gt.useCallback)(V=>{p(V.id),u(V),k.mint||g({mint:!0})},[g,p,k.mint]),ot=(0,gt.useCallback)(V=>{l(w);let It=ur(V);m(It)},[l,w]),nt=(0,gt.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle")}}),[]),{executeLiquidStake:Lt,isReadyToExecute:Vt}=cr({isLoadingPoolToken:rt,pendingActivityRow:nt,onTransactionSubmitted:at,onTransactionFailed:ot,activityType:Pe.DelegateStake}),zt=(0,gt.useCallback)(()=>{S({amount:w,provider:T}),h(void 0),o()},[S,w,T,h,o]),{isSuccess:Zt,isError:Xt,error:_t}=xo(zt,c);(0,gt.useEffect)(()=>{Zt?i("confirmed"):Xt&&(i("error"),m(_t),l(w))},[Zt,l,w,Xt,_t,c]);let te=sr({txReceipt:c,isTxError:Xt,poolTokenFungible:M,invalidateQueries:o,dismissLiquidStaking:t}),X=Jt(),At=(0,gt.useMemo)(()=>fd({poolTokenSymbol:U,txHash:c?.id,txError:d,confirmationStatus:n,showUKDisclaimer:X,onDismiss:te,openExternalLink:e}),[U,c?.id,d,n,te,e,X]);return{addressType:Z,isLedger:$,isReadyToExecute:Vt,statusPageProps:At,learnMoreLink:pd,txError:d,executeLiquidStake:Lt,isJitoSOL:dr(T),isPSOL:mr(T)}},"useMintLiquidStakeStatusPageProps");s();a();var uo=x(L());function yd({navigateToMintLiquidStakeAmountPage:t,navigateBack:e,entryPoint:o}){let{trackMarketingModalContinue:n}=Kt(),i=Tt(C.StakingWelcome),c=Cn("psol-popup-copy-test"),u=(0,uo.useCallback)(()=>{n({lstCaip19:B,testVariant:c,entryPoint:o}),t(B),i()},[t,n,i,c,o]),d=(0,uo.useCallback)(()=>{e(),i()},[e,i]),{t:m}=tt(),p={title:m("liquidStakingInfoPageStillEarningZero"),description:m("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:m("liquidStakingInfoPageConvertYourSOLButton")},S={title:m("liquidStakingInfoPageEarnUpTo9APY"),description:m("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:m("liquidStakingInfoPageStartEarning")},l=c==="test1"?p:c==="test2"?S:p;return(0,uo.useLayoutEffect)(()=>()=>void i(),[i]),{onPrimaryButtonPress:u,onClose:d,viewState:l}}r(yd,"useMintLiquidStakeMarketingProps");s();a();s();a();var Ta=x(L());s();a();var Aa=r(t=>{let e=F.getMintTokenTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,amount:t.amount,poolTokenAccountAddress:t.poolTokenAccountAddress}),o=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.amount;return I({enabled:o,queryKey:e,staleTime:W.Never,async queryFn(){if(N.isSolanaNetworkID(t.networkId))try{let{transaction:n,signers:i,solWithdrawalFee:c,stakeWithdrawalFee:u}=await dn(t);return{networkID:t.networkId,transaction:n,signers:i,solWithdrawalFee:c,stakeWithdrawalFee:u}}catch(n){throw Q.captureError(n,Y.Staking),n}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetMintPoolTokenTransaction");var gd=r((t,e)=>{let o=D(g=>g.amount),n=D(g=>g.setTransactionData),{data:i}=Et(q.Solana),{connection:c}=ft(),{fungible:u}=Nt({key:t?.stakePoolTokenMetadata.metadata.address||""}),d=u?ti(u):void 0,{trackMintApprovedByUser:m}=Kt(),{data:p,isPending:S}=Aa({amount:it(o).toNumber(),connection:c,networkId:t?.chainId??N.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:i?.address??"",poolTokenAccountAddress:d}),l=lr({provider:t,process:"mint",transactionData:p,isLoadingTransactionData:S}),k=(0,Ta.useCallback)(()=>{m({provider:t,payAmount:l.payAsset?.amount,receiveAmount:l.receiveAsset?.amount,payAmountUSD:l.payAsset?.amountUsd,receiveAmountUSD:l.receiveAsset?.amountUsd,payAssetTitle:l.payAsset?.title,receiveAssetTitle:l.receiveAsset?.title,providerName:l.providerName}),n(p),e()},[m,t,l.payAsset?.amount,l.payAsset?.amountUsd,l.payAsset?.title,l.receiveAsset?.amount,l.receiveAsset?.amountUsd,l.receiveAsset?.title,l.providerName,n,p,e]);return{...l,onPrimaryButtonPress:k}},"useMintLiquidStakeReviewPageProps");s();a();var mo=x(L());var kd=r((t,e)=>{let{navigateToStake:o,navigateToUnstake:n,navigateToExternalLink:i}=t,{trackMintModalContinue:c}=Kt(),u=Ot(B),p=!e||e===zn?u?B:ie:e,S=(0,mo.useCallback)(()=>{o(p)},[o,p]),l=(0,mo.useCallback)(()=>{c(p),o(p)},[o,c,p]),k=(0,mo.useCallback)(()=>{p===B?n():i(Rr)},[n,i,p]),g=(0,mo.useCallback)(()=>{i(Dr)},[i]),T=Zr({method:"mint",goToInfoPage:S,goToInitFlowPage:l});return Ot(p)?{isSupported:!0,onStake:T,onUnstake:k,onDepositWithKamino:g}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}},"useLSTMintActions");s();a();var he=x(Ht());var Ad="https://phantom.com/en-GB/uk-risk-summary";function ln({navigateToExternalLink:t,paddingTop:e,marginX:o,paddingX:n}){let{t:i}=tt();return(0,he.jsx)(ct,{backgroundColor:"brandMidnight",paddingX:n??"screen",marginX:o,paddingBottom:12,style:{paddingTop:(e??0)+4},gap:8,children:(0,he.jsx)(j,{children:(0,he.jsxs)(xe,{children:[(0,he.jsx)(j,{font:"captionSemibold",color:"textBase",children:i("stakingUKDisclaimerPart1")})," ",(0,he.jsx)(j,{font:"captionSemibold",color:"textBase",onPress:r(()=>t(Ad),"onPress"),style:{textDecorationLine:"underline"},children:i("stakingUKDisclaimerTake2Mins")})]})})})}r(ln,"UKDisclaimerCard");s();a();var pn=x(L());function Td({navigateToMintLiquidStakeAmountPage:t,navigateBack:e}){let{trackMintModalContinue:o}=Kt(),n=(0,pn.useCallback)(()=>{o(B),t(B)},[t,o]),i=(0,pn.useCallback)(()=>{e()},[e]),c={imageUrl:"https://assets.phantom.app/assets/metadata/PSOL.png",title:v.t("mintPSOLInfoPageTitle"),features:[{icon:"InfoCircle",title:v.t("mintPSOLFeature1Title"),description:v.t("mintPSOLFeature1Description")},{icon:"TrendingUp",title:v.t("mintPSOLFeature2Title"),description:v.t("mintPSOLFeature2Description")},{icon:"ShieldVerified",title:v.t("mintPSOLFeature3Title"),description:v.t("mintPSOLFeature3Description")}],primaryButtonText:v.t("gotIt")};return{onPrimaryButtonPress:n,onClose:i,viewState:c}}r(Td,"useMintLiquidStakeUKInfoProps");s();a();var kt=x(Ht());var wa=x(L());s();a();var ut=x(Ht());function ha({marginTop:t}){let{t:e}=tt();return(0,ut.jsxs)(ct,{marginTop:t,children:[(0,ut.jsx)(wr,{content:(0,ut.jsx)(ct,{padding:16,children:(0,ut.jsx)(j,{children:e("stakingUKDisclaimerPastPerformanceBody")})}),children:(0,ut.jsx)(j,{font:"caption",color:"brandYellowMoon",children:e("stakingUKDisclaimerPastPerformance")})}),(0,ut.jsx)(j,{children:(0,ut.jsxs)(xe,{children:[(0,ut.jsx)(j,{font:"caption",color:"textDiminished",children:e("stakingUKDisclaimerExchangeRates")})," "]})}),(0,ut.jsx)(wr,{content:(0,ut.jsx)(ct,{padding:16,children:(0,ut.jsx)(j,{children:e("stakingUKDisclosuresMarketDataBody")})}),children:(0,ut.jsx)(j,{font:"caption",color:"brandPrimary",children:e("stakingUKDisclaimerDisclosures")})}),(0,ut.jsx)(j,{font:"caption",color:"textDiminished",marginTop:24,children:e("stakingUKDisclaimerApproval")})]})}r(ha,"UKFooterDisclaimer");var hd={InfoCircle:Ao.InfoCircle,TrendingUp:Ao.TrendingUp,ShieldVerified:Ao.ShieldVerified};function wd(t){return wa.default.createElement(hd[t],{size:24})}r(wd,"getIcon");function bd({viewState:t,openLink:e,onPastPerformancePress:o,onDisclosuresPress:n}){let{features:i,title:c,imageUrl:u}=t;return(0,kt.jsxs)(ct,{flex:1,backgroundColor:"areaBase",borderRadius:"base",width:"100%",maxWidth:400,children:[(0,kt.jsx)(ln,{marginX:"-16",paddingX:12,paddingTop:8,navigateToExternalLink:e}),(0,kt.jsx)(ct,{alignItems:"center",padding:24,marginY:16,children:(0,kt.jsx)(On,{src:u,size:100})}),(0,kt.jsx)(j,{color:"white",font:"title1Bold",marginBottom:16,align:"center",children:c}),(0,kt.jsx)(ct,{gap:"list",marginBottom:"screen",children:i.map(d=>(0,kt.jsxs)(ct,{direction:"row",alignItems:"flex-start",marginBottom:16,children:[(0,kt.jsx)(ct,{width:24,height:24,marginRight:"screen",alignItems:"center",justifyContent:"center",children:wd(d.icon)}),(0,kt.jsxs)(ct,{flex:1,children:[(0,kt.jsx)(j,{color:"white",font:"bodySemibold",marginBottom:2,children:d.title}),(0,kt.jsx)(j,{color:"textDiminished",font:"caption",children:d.description})]})]},d.title))}),(0,kt.jsx)(ha,{marginTop:0,showPastPerformanceInline:!0,onPastPerformancePress:o,onDisclosuresPress:n})]})}r(bd,"StakeUKInfoView");s();a();s();a();var vd=[Mt.supportedTokens,Mt.featureUsed,Gr],xd=r(t=>{let e=String(t.queryKey[1]);return vd.includes(e)},"stakingShouldDehydrateQueryPredicate");export{Ce as a,Pt as b,Oe as c,C as d,Lo as e,Da as f,Mr as g,ic as h,sc as i,St as j,Ya as k,Po as l,Fa as m,Ge as n,He as o,Tt as p,Qa as q,ja as r,Za as s,rc as t,xi as u,jf as v,Jf as w,cc as x,uc as y,yt as z,dc as A,Br as B,ie as C,Do as D,Ye as E,Me as F,mc as G,sy as H,je as I,Je as J,Ri as K,F as L,Vo as M,Yr as N,D as O,xd as P,se as Q,W as R,Hi as S,ze as T,Qr as U,Ft as V,Gc as W,Hc as X,Yc as Y,is as Z,jc as _,$c as $,tu as aa,eu as ba,Jo as ca,Ot as da,Rt as ea,lu as fa,Zr as ga,nu as ha,iu as ia,_e as ja,to as ka,As as la,Jr as ma,Jt as na,Su as oa,ke as pa,Us as qa,yu as ra,oa as sa,ra as ta,xP as ua,ua as va,Ds as wa,Gx as xa,ad as ya,cd as za,cr as Aa,Yu as Ba,md as Ca,Kt as Da,gd as Ea,Sd as Fa,yd as Ga,kd as Ha,ln as Ia,Td as Ja,ha as Ka,bd as La};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-HGG2EQ5O.js.map
