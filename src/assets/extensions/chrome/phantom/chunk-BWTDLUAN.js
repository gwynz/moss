import{a as W}from"./chunk-5ESBNNEN.js";import{I as Pe,L as Ae,S as Ne,U as Me}from"./chunk-YTLZ2SGV.js";import{s as T}from"./chunk-QNVGN5HE.js";import{T as Le,d as Te,e as ae,l as q}from"./chunk-OHN4H3IY.js";import{b as De}from"./chunk-IAL2BZAA.js";import{a as Ee}from"./chunk-M6UNEOVM.js";import{c as z}from"./chunk-6JMEWALM.js";import{qb as Re,yb as ke,zb as we}from"./chunk-PQUTVVRL.js";import{Fb as Se}from"./chunk-F236ETGH.js";import{Jd as O,Zd as ve}from"./chunk-QF7OLC35.js";import{Bf as xe,Rb as F,Ye as te,jd as ue,kf as ye}from"./chunk-LPV5DSV2.js";import{a as fe}from"./chunk-BYU664DD.js";import{$a as V,Ba as v,Ea as be,L as he,La as G,M as J,Pa as oe,Sa as p,Y as ge,ab as Ce,kb as Ie,mb as Y,za as g}from"./chunk-JYKVQ4NC.js";import{a as c,g as N,i as M,n as B}from"./chunk-TSHWMJEM.js";M();B();var x=N(he(),1);M();B();var l=N(he());M();B();var D=N(J(),1),Be=c(e=>{if(typeof e=="number")return e;switch(e??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},"sizeToPx"),st=c(e=>{switch(e){case"square":return 6;case"circle":default:return 0}},"shapeToBorderRadius"),ct=z.div`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${e=>fe(e.color,e.alpha??.1)};
`,Q=c(({src:e,fallback:o,alt:n,size:a="normal",shape:r="circle",style:s,onDragStart:h})=>{let m=o??(0,D.jsx)(lt,{children:"?"}),d=Be(a),f=Be(a),S=st(r);return r==="circle"?(0,D.jsx)(Ee,{color:v.colors.legacy.areaBase,diameter:d,style:s,children:(0,D.jsx)(oe,{src:e,fallback:m,alt:n||void 0,width:d,height:f,borderRadius:S,onDragStart:h,loader:(0,D.jsx)(T,{borderRadius:`${S}px`,width:`${d}px`,height:`${f}px`})})}):(0,D.jsx)(ct,{color:v.colors.legacy.areaBase,width:d,height:f,style:s,children:(0,D.jsx)(oe,{src:e,fallback:m,alt:n||"",width:d,height:f,borderRadius:S,onDragStart:h,loader:(0,D.jsx)(T,{borderRadius:`${S}px`,width:`${d}px`,height:`${f}px`})})})},"ShapedImage"),lt=z.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var dt=c(({item:e,index:o,onClick:n})=>{let a=e.type==="token"?e.data.data.symbol:e.type==="perp"?e.data.data.name:e.data.name,r=(0,l.useCallback)(m=>{m.preventDefault()},[]),s=e.type==="token"?l.default.createElement(q,{image:{type:"fungible",src:e.data.data.logoUri,fallback:e.data.data.symbol??""},tokenType:e.data.type,chainMeta:e.data.data.chain,size:36}):e.type==="dapp"?l.default.createElement(Q,{src:e.data.imageUrl,size:36,shape:"square",onDragStart:r}):e.type==="category"?l.default.createElement(Y,{src:e.data.imageUri,size:36,backgroundColor:"elementAccent",shape:"square",onDragStart:r}):null,h=(0,l.useCallback)(()=>{n(o,e)},[o,n,e]);return l.default.createElement("div",{className:K.buttonContainer},l.default.createElement("div",{className:K.button,onClick:h},s,l.default.createElement(p,{className:K.text,color:"white",children:a??""})))},"PillButton"),He=c(({items:e,onClick:o})=>{let n=Ce(0),a=(0,l.useRef)(null),[r,s]=(0,l.useState)(0),h=(0,l.useMemo)(()=>{let m=self.innerWidth-r;return Math.min(0,m)},[r]);return(0,l.useEffect)(()=>{a.current&&s(a.current.scrollWidth)},[e]),l.default.createElement(G,{overflow:"hidden"},l.default.createElement(V.div,{ref:a},l.default.createElement(V.div,{className:K.scrollView,style:{x:n},drag:"x",dragConstraints:{left:h,right:0}},e.map((m,d)=>l.default.createElement(dt,{key:d,item:m,index:d,onClick:o})))))},"RecentlyViewedSearchItemRow"),K={scrollView:g({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:g({paddingRight:10}),button:g({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"elementBase",hover:"elementAccent"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:g({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var t=N(J(),1),mt=z.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${e=>e.isLast?v.colors.legacy.areaBase:v.colors.legacy.borderDiminished};
`,C={searchResultsContainer:g({marginTop:16,width:"100%"}),searchResultsHeaderContainer:g({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:g({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:g({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:g({cursor:"pointer"}),picturePlaceholder:g({borderRadius:6,height:32,width:32}),noResultsContainer:g({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:g({display:"flex",gap:4,alignItems:"center"}),dotContainer:g({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:g({backgroundColor:"textDiminished",width:4,height:4,borderRadius:"circle"}),secondaryAction:g({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},$e=c((e,o,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:r,entryPoint:s,navigateToSwapper:h,handleHideModalVisibility:m,addRecentlySearchedItem:d,dappsItems:f,pushDetailView:S})=>{let R=F(O(e)),w=n[R],H=w?.price,X=H!==void 0,E=w?.usd_24h_change,$=E!==void 0,u=X||$;return{type:"generic",key:R,"data-testid":`search-result-token-${e.data.symbol}`,image:(0,t.jsx)(q,{image:{type:"fungible",src:e.data.logoUri,fallback:e.data.symbol??""},tokenType:e.type,chainMeta:e.data.chain,size:32}),textMain:(0,t.jsx)(Te,{children:ye(e.data.name||"",25),spamStatus:e.data.spamStatus||null,font:"body"}),textDiminished:(0,t.jsxs)("div",{className:C.tokenSecondaryContainer,children:[(0,t.jsx)(p,{children:e.data.symbol||"",font:"caption",color:"textDiminished"}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{width:"36px",height:"14px",borderRadius:"8px"}),(0,t.jsx)(T,{width:"48px",height:"14px",borderRadius:"8px"})]}):(0,t.jsxs)(t.Fragment,{children:[u?(0,t.jsx)("div",{className:C.dotContainer,children:(0,t.jsx)("div",{className:C.dot})}):null,X?(0,t.jsx)(ae,{value:H,font:"caption",color:"textDiminished"}):null,$?(0,t.jsx)(p,{children:`${te(E,{includePlusPrefix:!0})}%`,font:"caption",color:E>=0?"spotPositive":"spotNegative",truncate:"ellipsis"}):null]})]}),secondaryAction:r?void 0:{icon:(0,t.jsx)(be.Swap,{}),onClick:c(L=>{L.stopPropagation(),h({buyFungibleCaip19:R}),s==="home"&&setTimeout(()=>{m("searchPage")},50)},"onClick")},onClick:c(async()=>{ze({addRecentlySearchedItem:d,token:e,position:f.length+o+1,entryPoint:s,handleHideModalVisibility:m,pushDetailView:S})},"onClick")}},"mapTokenToSearchListItem"),pt=c((e,o,n,{isPerpMarketMapLoading:a,entryPoint:r})=>{let s=F(O(e)),h=o?.name||e.data.name||e.data.symbol||"",m=o?.symbol||e.data.symbol||"",d=o?Number(o.price):void 0,f=o?Number(o.priceChange24h.percentage):void 0,S=o?.maxLeverage;return{type:"generic",key:`perp-${s}`,"data-testid":`search-result-perp-${m}`,image:(0,t.jsx)(q,{image:{type:"fungible",src:e.data.logoUri,fallback:m},badge:{type:"network",preset:"hypercore"},size:32}),textMain:(0,t.jsxs)(G,{direction:"row",alignItems:"center",gap:6,children:[(0,t.jsx)(p,{font:"body",children:Le(h)}),S&&(0,t.jsxs)(Ie,{size:"small",children:[S,"x"]})]}),textDiminished:(0,t.jsx)("div",{className:C.tokenSecondaryContainer,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{width:"36px",height:"14px",borderRadius:"8px"}),(0,t.jsx)(T,{width:"48px",height:"14px",borderRadius:"8px"})]}):(0,t.jsxs)(t.Fragment,{children:[d!==void 0?(0,t.jsx)(ae,{value:d,font:"caption",color:"textDiminished"}):null,f!==void 0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:C.dotContainer,children:(0,t.jsx)("div",{className:C.dot})}),(0,t.jsx)(p,{font:"caption",color:f>=0?"spotPositive":"spotNegative",truncate:"ellipsis",children:`${te(f,{includePlusPrefix:!0})}%`})]}):null]})}),onClick:c(()=>{W.searchItemClickedByUser({itemDetails:{position:n,title:h,id:s,type:"perps",uiContext:r}}),self.open(ve(m,"extension_explore_search"),"_blank","noopener,noreferrer")},"onClick")}},"mapPerpToSearchListItem"),no=c(({searchedDapps:e,tokens:o,trendingTokens:n,priceMap:a,isPriceMapLoading:r,showMoreDapps:s,setShowMoreDapps:h,renderShowMoreDappsButton:m,showMoreTokens:d,setShowMoreTokens:f,renderShowMoreTokensButton:S,perps:R,showMorePerps:w,setShowMorePerps:H,renderShowMorePerpsButton:X,perpMarketMap:E,isPerpMarketMapLoading:$,entryPoint:u,recentlyViewedSearchItems:L=[],searchQuery:ne,categories:re})=>{let{t:b}=ge(),{pushDetailView:k}=De(),j=Ae(),{handleHideModalVisibility:P}=Me(),ie=u==="home",se=ue(),{mutate:I}=ke(se),{mutate:ce}=we(se),{data:qe}=Se(),_=!!qe?.isReadOnly,We=Re(),A=(0,x.useMemo)(()=>e.map((i,y)=>({type:"generic",key:i.id,"data-testid":`search-result-dapp-${i.name}`,image:(0,t.jsx)(Q,{src:i.imageUrl,size:"small",shape:"square"}),textMain:(0,t.jsx)(p,{children:i.name,font:"body"}),textDiminished:(0,t.jsx)(p,{children:i.category||"",font:"caption",color:"textDiminished"}),onClick:c(async()=>{Ve({addRecentlySearchedItem:I,dapp:i,position:y+1,entryPoint:u})},"onClick")})),[e,I,u]),le=(0,x.useMemo)(()=>o.map((i,y)=>$e(i,y,{priceMap:a,isPriceMapLoading:r,isReadOnlyAccount:_,entryPoint:u,navigateToSwapper:j,handleHideModalVisibility:P,addRecentlySearchedItem:I,dappsItems:A,pushDetailView:k})),[o,a,r,_,u,j,P,I,A,k]),de=(0,x.useMemo)(()=>n.map((i,y)=>$e(i,y,{priceMap:a,isPriceMapLoading:r,isReadOnlyAccount:_,entryPoint:u,navigateToSwapper:j,handleHideModalVisibility:P,addRecentlySearchedItem:I,dappsItems:A,pushDetailView:k})),[n,a,r,_,u,j,P,I,A,k]),Z=(0,x.useMemo)(()=>(re||[]).map((i,y)=>({type:"generic",key:i.id,"data-testid":`search-result-category-${i.name}`,image:(0,t.jsx)(Y,{src:i.imageUri,size:32,backgroundColor:"elementAccent",shape:"square"}),textMain:(0,t.jsx)(p,{children:i.name,font:"body"}),textDiminished:(0,t.jsx)(p,{children:b("fungibleCategoriesNumTokens",{numTokens:i.numTokens}),font:"caption",color:"textDiminished"}),onClick:c(()=>{Oe({addRecentlySearchedItem:I,category:i,index:y,entryPoint:u,pushDetailView:k})},"onClick")})),[re,b,k,I,u]),ee=(0,x.useMemo)(()=>(R||[]).map((i,y)=>{let rt=F(O(i)),it=E?.[rt];return pt(i,it,y,{isPerpMarketMapLoading:$,entryPoint:u})}),[R,E,$,u]),Xe=(0,x.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:L,onClick:c(async(i,y)=>{if(y.type==="token")ze({addRecentlySearchedItem:I,token:y.data,position:i,entryPoint:u,handleHideModalVisibility:P,pushDetailView:k});else if(y.type==="dapp")Ve({addRecentlySearchedItem:I,dapp:y.data,position:i,entryPoint:u});else if(y.type==="category")Oe({addRecentlySearchedItem:I,category:y.data,index:i,entryPoint:u,pushDetailView:k});else throw new Error("Unknown item type")},"onClick")}),[I,P,u,k,L]),je=L.length?b("commandClear"):void 0,_e=(0,x.useCallback)(()=>{ce()},[ce]),Je=S?b(d?"exploreShowLess":"exploreShowMore"):void 0,Ge=(0,x.useCallback)(()=>{f(!d)},[f,d]),Ye=m?b(s?"exploreShowLess":"exploreShowMore"):void 0,Qe=(0,x.useCallback)(()=>{h(!s)},[h,s]),Ke=X?b(w?"exploreShowLess":"exploreShowMore"):void 0,Ze=(0,x.useCallback)(()=>{H(!w)},[H,w]);if(!e.length&&!o.length&&!ee.length&&!Z.length)return(0,t.jsx)("div",{className:C.noResultsContainer,"data-testid":"explore-search-results-nodata",children:(0,t.jsx)(p,{children:b("searchNoResultsFound"),font:"bodyMedium",color:"textDiminished"})});let me=ne==null||ne.length===0,et=L.length&&me?(0,t.jsx)(U,{testId:"explore-search-results",title:(0,t.jsx)(p,{children:b("dAppBrowserRecents"),font:"title1Semibold"}),items:[Xe],accessoryText:je,accessoryOnPress:_e}):null,tt=Z.length?(0,t.jsx)(U,{testId:"explore-search-results-categories",title:(0,t.jsx)(p,{children:b("exploreCategories"),font:"title1Semibold"}),items:Z}):null,pe=A.length?(0,t.jsx)(U,{testId:"explore-search-results",title:(0,t.jsx)(p,{children:b("exploreSites"),font:"title1Semibold"}),items:A,accessoryText:Ye,accessoryOnPress:Qe}):null,ot=le.length?(0,t.jsx)(U,{testId:"explore-search-results",title:(0,t.jsx)(p,{children:b("exploreTokens"),font:"title1Semibold"}),items:le,accessoryText:Je,accessoryOnPress:Ge}):null,at=We&&ee.length?(0,t.jsx)(U,{testId:"explore-search-results-perps",title:(0,t.jsx)(p,{children:b("perps"),font:"title1Semibold"}),items:ee,accessoryText:Ke,accessoryOnPress:Ze}):null,nt=me&&de.length?(0,t.jsx)(U,{testId:"explore-search-results",title:(0,t.jsx)(p,{children:b("exploreTrendingTokens"),font:"title1Semibold"}),items:de}):null;return(0,t.jsxs)(t.Fragment,{children:[et,ie?void 0:pe,nt,ot,at,tt,ie?pe:void 0]})},"ExploreSearchResults"),Fe=c(({hoverColor:e,baseColor:o,...n})=>(0,t.jsx)(V.div,{...n,whileHover:{background:e},style:{background:o},transition:{ease:[.5,1,.89,1],duration:.1}}),"AnimatedBackgroundChangeDiv"),U=c(({items:e,title:o,testId:n,accessoryText:a,accessoryOnPress:r})=>(0,t.jsxs)("div",{className:C.searchResultsContainer,"data-testid":n,children:[(0,t.jsxs)("div",{className:C.searchResultsHeaderContainer,children:[o,a?(0,t.jsx)(p,{className:C.hover,children:a,font:"caption",color:"textDiminished",onPress:r}):null]}),e.map((s,h)=>(0,t.jsx)(ht,{...s,isLast:h===e.length-1}))]}),"SearchResultsContent"),ht=c(e=>{let[o,n]=(0,x.useState)(!1),[a,r]=(0,x.useState)(!1);if(e.type==="recentSearchItems")return(0,t.jsx)(He,{items:e.items,onClick:e.onClick});let{onClick:h,image:m,isLast:d,textMain:f,textDiminished:S,secondaryAction:R,"data-testid":w}=e;return(0,t.jsxs)(Fe,{className:C.searchResult,onClick:h,"data-testid":w,baseColor:v.colors.legacy.areaBase,hoverColor:a?v.colors.legacy.areaBase:v.colors.legacy.elementAccent,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,t.jsx)("div",{children:m}),(0,t.jsxs)(mt,{isLast:d,children:[(0,t.jsxs)("div",{className:C.searchResultTextContainer,children:[f,S]}),R?(0,t.jsx)(Fe,{className:C.secondaryAction,onClick:R.onClick,baseColor:o?v.colors.legacy.borderBase:v.colors.legacy.elementAccent,hoverColor:v.colors.legacy.borderBase,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:R.icon}):null]})]})},"SearchResultItem");function Ve({addRecentlySearchedItem:e,dapp:o,position:n,entryPoint:a}){e({type:"dapp",data:o}),self.open(xe(o.domain).origin),W.searchItemClickedByUser({itemDetails:{position:n,title:o.name,id:o.id,type:"site",uiContext:a}})}c(Ve,"dappSelected");function ze({addRecentlySearchedItem:e,token:o,position:n,entryPoint:a,pushDetailView:r}){let s=F(O(o));W.searchItemClickedByUser({itemDetails:{position:n,title:o.data.name||o.data.symbol||s,id:s,type:"token",uiContext:a}}),r((0,t.jsx)(Ne,{caip19:s,title:o.data.name??void 0,entryPoint:"exploreSearch"})),e({type:"token",data:o})}c(ze,"tokenSelected");function Oe({addRecentlySearchedItem:e,category:o,pushDetailView:n,index:a,entryPoint:r}){n((0,t.jsx)(Pe,{category:o})),W.onExploreListItemClickedByUser({datasourceId:"",listName:"token-categories",context:r,itemDetails:{position:a,title:o.name,id:o.id}}),e({type:"category",data:o})}c(Oe,"categorySelected");export{no as a};
//# sourceMappingURL=chunk-BWTDLUAN.js.map
