import{a as Mt}from"./chunk-ELZLSFHJ.js";import{d as Lt}from"./chunk-IOLK2RTO.js";import"./chunk-5ESBNNEN.js";import{a as Nt}from"./chunk-EDANRIVM.js";import{a as Bt}from"./chunk-62SZ2XSE.js";import{B as vt,L as It,S as Be,U as Z}from"./chunk-YTLZ2SGV.js";import"./chunk-IRPDX252.js";import"./chunk-U5BHRVQL.js";import"./chunk-5S2LR6TU.js";import"./chunk-UN5DVVHZ.js";import"./chunk-K3AOJOH2.js";import{o as re,q as Ue}from"./chunk-QNVGN5HE.js";import"./chunk-KYC3TN2Q.js";import"./chunk-KECH4XEC.js";import"./chunk-RKISZW47.js";import"./chunk-OP3E2FEL.js";import"./chunk-D6ZWMAKN.js";import{M as Et,Z as Dt,d as Ct,l as Ie,q as At,r as we}from"./chunk-OHN4H3IY.js";import"./chunk-YEWLBR7H.js";import"./chunk-HAR363KY.js";import{h as ge}from"./chunk-YE5I2OIJ.js";import"./chunk-XCWTSWVJ.js";import"./chunk-OEKZJ4Z7.js";import{b as De}from"./chunk-IAL2BZAA.js";import"./chunk-M6UNEOVM.js";import"./chunk-Y7HDHZJX.js";import{b as at,c as it,j as We,k as st}from"./chunk-DQLUBVF4.js";import"./chunk-RHCYAVA3.js";import"./chunk-3ZRYSYYB.js";import"./chunk-IP6N33CZ.js";import"./chunk-S2IXR5HZ.js";import"./chunk-GA7OWDUC.js";import"./chunk-EOII3ZM4.js";import"./chunk-4AQPJCXC.js";import"./chunk-NFWY65KR.js";import"./chunk-KUVQSLSD.js";import"./chunk-IEGIKGVV.js";import"./chunk-H3HVEJML.js";import{_a as qe,c as Pt,j as Tt}from"./chunk-NDIBTKLE.js";import{c as U}from"./chunk-6JMEWALM.js";import{a as Oe}from"./chunk-QQJPKFTO.js";import"./chunk-5NEPC5CX.js";import"./chunk-JQE54VLJ.js";import{Ea as yt,Ia as ht,Ja as xt,Ka as Ft,La as kt,Na as Ee}from"./chunk-KWNEQJE2.js";import"./chunk-HGG2EQ5O.js";import{$ as Ce,Ab as bt,F as mt,V as _e,W as ut,X as fe,kb as wt,na as le,oa as dt,pa as ft,qb as Ae,sa as gt,xb as St,za as ve}from"./chunk-PQUTVVRL.js";import{T as ct}from"./chunk-IOXJCRJI.js";import"./chunk-XGLSOW44.js";import"./chunk-56GZZQJU.js";import"./chunk-QLEUWUCH.js";import"./chunk-ZGQB4B3Z.js";import"./chunk-OJPBMZQC.js";import"./chunk-FLYQWZR6.js";import"./chunk-UPPQC44E.js";import"./chunk-CYENH7PC.js";import{Ac as tt,Rb as je,sc as et}from"./chunk-F236ETGH.js";import{Jd as oe,Xd as lt,Yc as pt}from"./chunk-QF7OLC35.js";import{Kb as Y,Mb as Je,Mf as xe,Qb as Re,Rb as H,_e as R,o as Ze}from"./chunk-LPV5DSV2.js";import"./chunk-NEE4FZIK.js";import{a as Qe}from"./chunk-BYU664DD.js";import{Ba as C,Ea as Fe,L as I,La as l,Lb as ze,M as S,Ma as pe,Na as ke,Sa as T,T as g,Y as P,hb as rt,lb as Pe,sb as Te,ub as nt,za as ot}from"./chunk-JYKVQ4NC.js";import"./chunk-U7OZEJ4F.js";import"./chunk-ZRGHR2IN.js";import{a as i,g as u,i as c,n as m}from"./chunk-TSHWMJEM.js";c();m();c();m();var G=u(I(),1);c();m();var Rt="f8uvp90";var Qt="f8uvp92 f8uvp91 _48j31axc _48j31a13j _48j31ayt",zt="f8uvp93";c();m();var Q=u(I());c();m();var me=u(I(),1);c();m();var po=u(I());var Ne=U.div`
  display: flex;
  align-items: center;
  height: 36px;
  input {
    font-size: ${e=>e.fontSize??34}px;
    line-height: 1;
    font-weight: 600;
    padding: 0;
    background: none;
  }
`,Fr=U.div`
  width: 100%;
  margin-top: 11px;
  margin-bottom: 10px;
`;var kr=U.div`
  color: ${C.colors.legacy.spotBase};
  font-size: 14px;
  font-weight: 400;
  white-space: nowrap;
  cursor: pointer;
  margin-left: 5px;
  border-radius: 8px;
  padding: 8px;
  &:hover {
    background-color: ${C.colors.legacy.elementAccent};
  }
`;c();m();var B=u(I());var Me=i(({input:e,isLoading:t,onSelectorPress:n,perspective:a,selectorIcon:o,selectorLabel:s,spamStatus:p,accessories:r,footer:b})=>{let{t:f}=P(),y=f(a==="buy"?"swapAssetCardBuyTitle":"swapAssetCardSellTitle"),F=(0,B.useMemo)(()=>{if(r)return B.default.createElement(l,{display:"flex",direction:"row",alignItems:"center",gap:6,marginTop:6},r)},[r]);(0,B.useEffect)(()=>{a==="buy"?perfalyze.markFrame("buyTokenUpdated"):perfalyze.markFrame("sellTokenUpdated")},[s,a]);let E=B.default.createElement(l,{display:"flex",direction:"column",gap:0,backgroundColor:"elementBase",borderRadius:"base",padding:20},B.default.createElement(T,{font:"labelSemibold",color:"textIncidental",children:y}),B.default.createElement(l,{display:"flex",direction:"row",alignItems:"center",minHeight:48},e,B.default.createElement(l,{flex:1}),t?B.default.createElement(pe,{width:112,height:24}):B.default.createElement(l,{onPress:n,display:"flex",gap:8,direction:"row",backgroundColor:{base:"gray",hover:"borderBase"},paddingY:4,paddingLeft:4,paddingRight:8,alignItems:"center",borderRadius:"full",cursor:"pointer",testID:`${a}-token-button`},o,B.default.createElement(Ct,{spamStatus:p,children:s,font:"captionSemibold"}),B.default.createElement(Fe.ChevronDown,{size:14}))),F);return lo(E,b)},"SwapperCard"),lo=i((e,t)=>t?B.default.createElement(l,{direction:"column",backgroundColor:"elementBase",borderRadius:"base"},e,t):e,"withFooter");c();m();var Wt="_1mhrh80";c();m();var Ot=u(I(),1);var V=u(S(),1),_t=i(({warnings:e})=>{let{t}=P(),n=e[0],{backgroundColor:a,textColor:o}=(0,Ot.useMemo)(()=>{if(!n)return{backgroundColor:"elementBase",textColor:"textBase"};switch(n.level){case"warn":return{backgroundColor:"spotWarning",textColor:"areaBase"};case"info":return{backgroundColor:"elementBase",textColor:"textBase"}}},[n]);return e.length===0?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l,{width:"100%",height:1,backgroundColor:"areaBase"}),(0,V.jsxs)(l,{gap:8,direction:"row",backgroundColor:a,padding:"screen",borderBottomRadius:"base",children:[(0,V.jsx)(l,{flexShrink:0,children:(0,V.jsx)(Fe.AlertTriangle,{color:o,size:18})}),(0,V.jsx)(T,{flexShrink:1,font:"caption",color:o,children:t(n.titleKey,n.options)})]})]})},"AssetWarningFooter");c();m();var ce=u(S(),1),qt=i(({isLoading:e,secondaryAmount:t,supportsCurrencyDenominationSwitching:n,switchCurrencyDenomination:a})=>{if(e)return(0,ce.jsx)(pe,{width:40,height:18,borderRadius:12,testID:"secondary-price-loader"});let o=t?(0,ce.jsx)(T,{font:"caption",color:"textDiminished",children:t}):null;return n?(0,ce.jsxs)(l,{direction:"row",alignItems:"center",gap:6,cursor:"pointer",onPress:a,children:[o,(0,ce.jsx)(Pe,{icon:"SwapVertical",size:20,shape:"circle",backgroundColor:{base:"gray",hover:"borderBase"},color:"textDiminished"})]}):o},"SecondaryPriceDisplay");var v=u(S(),1),Ut=i(({asset:e,perspective:t,currentPercentage:n,onPercentageTap:a,onInputChange:o,onFungibleTap:s,switchCurrencyDenomination:p,onBalanceTap:r})=>{let{amount:b,balance:f,fungible:y,isAmountEditable:F,isAmountLoading:E,isSecondaryAmountLoading:h,hasAmountWarning:w,secondaryAmount:k,amountPrefix:D,percentages:d,supportsCurrencyDenominationSwitching:W,warnings:$}=e,{t:_}=P(),ee=(0,v.jsx)(Ie,{image:{type:"fungible",src:y.data?.logoUri,fallback:y.data?.symbol||y.data?.tokenAddress},size:32,tokenType:y.type,chainMeta:y.data?.chain}),ie=i(K=>K.length>16?16:K.length>14?18:K.length>12?20:22,"getInputFontSize"),te=(0,me.useMemo)(()=>{let K=ie(b);return E?(0,v.jsx)(pe,{width:100,height:18,borderRadius:12}):(0,v.jsxs)(Ne,{hasWarning:w,fontSize:K,children:[D&&(0,v.jsx)(T,{font:"heading3",children:D,marginRight:2}),(0,v.jsx)(ge,{name:"amount",border:"0",placeholder:"0",warning:w,value:b,decimalLimit:y.data?.decimals,disabled:!F,onUserInput:o})]})},[E,w,D,b,y.data?.decimals,F,o]),ye=(0,me.useMemo)(()=>(0,v.jsx)(qt,{isLoading:h,secondaryAmount:k,supportsCurrencyDenominationSwitching:W,switchCurrencyDenomination:p}),[h,k,W,p]),L=(0,me.useMemo)(()=>{let K=i(se=>{switch(se.percentage){case .25:return"25%";case .5:return"50%";case 1:return _("swapAssetCardMaxButton")}},"swapPercentageDisplay");return d.map(se=>(0,v.jsx)(Te,{active:se.percentage===n?.percentage,children:K(se),onChange:()=>a(se),className:Wt},se.percentage))},[d,_,n,a]),he=(0,me.useMemo)(()=>(0,v.jsxs)(v.Fragment,{children:[ye,(0,v.jsx)(l,{flex:1}),f&&(0,v.jsx)(T,{font:"caption",color:{base:"textDiminished",hover:r?"textBase":void 0},children:f,onPress:r}),L&&(0,v.jsx)(l,{direction:"row",alignItems:"center",gap:4,marginLeft:2,children:L})]}),[f,L,r,ye]),Le=(0,me.useMemo)(()=>{if($.length!==0)return(0,v.jsx)(_t,{warnings:$})},[$]);return(0,v.jsx)(Me,{perspective:t,input:te,selectorIcon:ee,selectorLabel:y.data?.symbol??"",spamStatus:y.data?.spamStatus,onSelectorPress:s,accessories:he,footer:Le})},"AssetSwapperCard");c();m();var Se=u(I(),1);var N=u(S(),1),co=[.5,1],Vt=i(({perspective:e})=>{let{t}=P(),n=(0,Se.useMemo)(()=>{let p=Number(C.typography.font.heading3.fontSize.replace("px",""));return(0,N.jsx)(Ne,{fontSize:p,children:(0,N.jsx)(ge,{name:"amount",border:"0",placeholder:"0",warning:!1,value:e==="sell"?"":"0",onUserInput:()=>{}})})},[e]),a=(0,Se.useMemo)(()=>(0,N.jsx)(T,{font:"caption",color:"textDiminished",children:"$0"}),[]),o=(0,Se.useMemo)(()=>{let p=i(r=>{switch(r){case .25:return"25%";case .5:return"50%";case 1:return t("swapAssetCardMaxButton")}},"swapPercentageDisplay");return co.map(r=>(0,N.jsx)(Te,{active:!1,children:p(r),onChange:()=>{},className:Rt}))},[t]),s=(0,Se.useMemo)(()=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(l,{direction:"row",alignItems:"center",gap:6,children:[a,e==="sell"?(0,N.jsx)(Pe,{icon:"SwapVertical",size:20,shape:"circle",backgroundColor:"gray",color:"textDiminished"}):null]}),(0,N.jsx)(l,{flex:1}),(0,N.jsx)(ke,{font:"caption",width:64}),e==="sell"?(0,N.jsx)(l,{direction:"row",alignItems:"center",gap:4,marginLeft:2,children:o}):null]}),[o,a,e]);return(0,N.jsx)(Me,{spamStatus:null,perspective:e,input:n,isLoading:!0,selectorIcon:null,selectorLabel:"",onSelectorPress:()=>{},accessories:s})},"LoadingSwapperCard");var mo=32,Gt=i(({isInitializingTokens:e,tokens:t,currentSellPercentage:n,setInputAmount:a,setSellPercentage:o,setInputPerspective:s,switchCurrencyDenomination:p,switchTokens:r,onSelectToken:b})=>{let{t:f}=P(),y=(0,Q.useCallback)(w=>{let k=w.percentages.find(D=>D.percentage===1);k&&o(k,w.fungible)},[o]),F=(0,Q.useCallback)(w=>{b(w)},[b]),E=(0,Q.useCallback)((w,k)=>{o(w,k)},[o]),h=(0,Q.useMemo)(()=>["sell","buy"].map(w=>{let k=t.find(d=>d.perspective===w);if(!k||e)return Q.default.createElement(Vt,{key:`loading-${w}`,perspective:w});let D=Q.default.createElement(Ut,{key:w,asset:k,perspective:w,switchCurrencyDenomination:p,currentPercentage:n,onFungibleTap:()=>F(w),onPercentageTap:d=>E(d,k.fungible),onInputChange:d=>{s(w),a(d,w)},onBalanceTap:()=>y(k)});return w==="buy"?Q.default.createElement(l,{position:"relative",key:w+"-swap-button"},D,Q.default.createElement("div",{className:Qt,style:{pointerEvents:"none"}},Q.default.createElement(nt,{label:f("swapperSwitchTokens"),size:mo,shape:"circle",onClick:r,backgroundColor:{base:"spotBase",hover:"spotAccent"},icon:"SwapVertical"}))):D}),[t,e,p,n,F,E,a,s,y,f,r]);return Q.default.createElement(l,{display:"flex",direction:"column",flex:1,paddingX:"screen",paddingTop:"screen"},Q.default.createElement(l,{display:"flex",direction:"column",gap:12},h))},"SwapperAssets");c();m();var O=u(I());c();m();var Kt=u(I());var uo=i(e=>Y.isBitcoinNetworkID(e.data.chain.id)&&pt(e.type),"isBitcoinSellAsset"),$t="swapperBitcoinSellWarningDontShowAgain",Ht=i(()=>{let{handleShowModalVisibility:e}=Z();return{maybeShowBitcoinSellWarning:(0,Kt.useCallback)(async({tokenState:n,onContinue:a})=>{let o=fe(n)?n.sellToken:void 0;if(!o||!uo(o)){a();return}let s=!1;try{s=await Oe.get($t)===!0}catch{}if(s){a();return}e("bitcoinSellWarning",{onContinue:i(p=>{if(!p){a();return}(async()=>{try{await Oe.set($t,!0)}catch{}finally{a()}})()},"onContinue")})},[e])}},"useBitcoinSellWarning");var fo=i(async e=>{await st(Ee),We(Ee,it);try{await e()}finally{We(Ee,at)}},"ledgerSwapPreprocessor"),Xt=i(({swapMode:e,quotedAmounts:t,tokenState:n,inputErrors:a,quoteProcessorState:o,currentPerspective:s,sellPercentages:p,onPress:r,resetSwapper:b})=>{let f=et(),y=It(),{handleShowModalVisibility:F}=Z(),{maybeShowBitcoinSellWarning:E}=Ht(),{pushDetailView:h}=De(),w=Pt(),k=(0,O.useCallback)(L=>{let he=H(oe(L));h(O.default.createElement(Be,{caip19:he,title:L.data.name??void 0,entryPoint:"exploreInSwap"}))},[h]),{openBuy:D}=vt({caip19:go(n)||"",context:"modal",analyticsEvent:"fiatOnrampFromInsufficientBalance"}),d=(0,O.useCallback)(L=>{y({sellFungible:L.sell,buyFungible:L.buy,sellAmount:L.amount.amount})},[y]),W=(0,O.useCallback)((L,he)=>{let Le=L.networkId,K={balance:L.balance,required:L.required};F("insufficientBalance",{networkId:Le,token:K},{event:"showSwapModal",payload:{data:{uiContext:mt.InsufficientBalance}}})},[F]),$=(0,O.useCallback)(()=>{w("/notifications")},[w]),{buttonState:_,swap:ee}=kt({swapMode:e,quotedAmounts:t,tokenState:n,inputErrors:a,quoteProcessorState:o,currentPerspective:s,sellPercentages:p,showFungibleDetails:k,showBuyFungibleScreen:D,retryAndNavigateToSwapper:d,resetSwapper:b,goToInsufficientFunds:W,showActivity:$,preprocessor:f?fo:void 0}),ie=(0,O.useCallback)(()=>{r?.(),f?F("swapLedgerSigning",{executeSwap:ee}):ee()},[r,ee,f,F]),te=(0,O.useCallback)(()=>{E({tokenState:n,onContinue:ie})},[ie,E,n]),ye=(0,O.useMemo)(()=>_.type==="insufficientBalance"?{background:"spot",theme:"negative"}:["untradable"].includes(_.type)?{background:"element"}:{background:"spot"},[_.type]);return["idle","error"].includes(o.type)?null:O.default.createElement(rt,{...ye,disabled:_.type!=="tradable",onPress:te},_.label)},"SwapperButton");function go(e){if(!(e.type!=="pair"&&e.type!=="refreshing"))return H(oe(e.sellToken))}i(go,"getSellCaip19");c();m();var A=u(I());c();m();var j=u(I(),1);c();m();var be=u(I(),1);var q=u(S(),1),wo=be.default.memo(({rankAlgo:e,limit:t})=>{let{t:n}=P(),a=xe(),o=Ae(),s=we(d=>d.sortBy),p=we(d=>d.sortDirection),r=we(d=>d.timeFrame),b=we(d=>d.network),{data:f,error:y,isLoading:F,refetch:E}=bt({sortBy:s,sortDirection:p,timeFrame:r,limit:t,rankAlgo:e,network:b}),{pushDetailView:h}=De(),w=(0,be.useCallback)(({item:d,index:W})=>{let $=H({chainId:d.chainId,address:d.address,resourceType:Je.address});a.capture("onExploreListItemClickedByUser",{data:{explore:{context:"swap",listName:"tokens",itemDetails:{position:W,title:d.name||d.symbol,id:`${d.address}-${d.chainId}`}}}}),h((0,q.jsx)(Be,{caip19:$,title:d.name??void 0,entryPoint:"exploreInSwap"}))},[a,h]),k=!!y||f?.items.length===0,D=F||typeof f>"u";return(0,q.jsxs)(l,{paddingTop:o?10:24,flex:1,width:"100%",children:[!o&&(0,q.jsx)(T,{paddingX:"screen",paddingBottom:10,font:"title2Semibold",children:n("exploreTokens")}),(0,q.jsx)(Dt,{isError:k,isLoading:D,refetch:E,filters:(0,q.jsx)(Mt,{}),rows:(f?.items??[]).map((d,W)=>({...Et({item:d,sortBy:s,image:(0,q.jsx)(Lt,{index:W,displayRank:!0,outlineColor:C.colors.legacy.areaBase,image:(0,q.jsx)(Ie,{image:{type:"fungible",src:d.logoUrl,fallback:d.symbol||d.name},size:48,badge:{type:"network",preset:Y.getChainID(d.chainId)}})}),t:n}),onClick:i(()=>w({item:d,index:W}),"onClick")}))})]})});function So(){let e=St("tokens");return e?(0,q.jsx)(At,{sortByOptions:e.sortBy,sortBy:e.sortByDefault,sortDirection:e.sortDirectionDefault,networkOptions:e.network,network:e.networkDefault,timeFrameOptions:e.timeFrame,timeFrame:e.timeFrameDefault,children:(0,q.jsx)(wo,{rankAlgo:e.rankAlgo,limit:10})}):null}i(So,"ExploreTokens");var Ve=be.default.memo(So);c();m();var ne=u(I(),1),ue=u(S(),1),Yt={tab:ot({cursor:"pointer"})},Zt=ne.default.memo(({selectedTab:e,onTabChange:t})=>{let{t:n}=P(),a=xe(),o=(0,ne.useCallback)(r=>{r!==e&&(t(r),a.capture("swapperTabSelected",{data:{tab:r}}))},[e,t,a]),s=(0,ne.useCallback)(()=>{a.capture("swapperSeeMorePressed"),self.open(lt,"_blank","noopener,noreferrer")},[a]),p=(0,ne.useMemo)(()=>[{key:"tokens",label:n("exploreTokens")},{key:"perps",label:n("explorePerps")}],[n]);return(0,ue.jsxs)(l,{direction:"row",paddingX:"screen",gap:16,marginTop:24,justifyContent:"space-between",alignItems:"center",children:[(0,ue.jsx)(l,{direction:"row",gap:16,children:p.map(r=>(0,ue.jsx)(T,{font:"title1Semibold",color:e===r.key?"textBase":"textIncidental",onPress:()=>o(r.key),className:Yt.tab,children:r.label},r.key))}),(0,ue.jsx)(T,{font:"caption",color:["spotBase","spotAccent"],onPress:s,className:Yt.tab,children:n("exploreSeeMore")})]})});var J=u(S(),1),bo=(0,j.lazy)(()=>import("./ExplorePerps-TM7EMI3I.js").then(e=>({default:e.SwapperExplorePerps}))),Jt=j.default.memo(()=>{let e=Ae(),[t,n]=(0,j.useState)("tokens");return e?(0,J.jsxs)(l,{children:[(0,J.jsx)(Zt,{selectedTab:t,onTabChange:n}),t==="tokens"&&(0,J.jsx)(Ve,{}),t==="perps"&&(0,J.jsx)(j.Suspense,{fallback:null,children:(0,J.jsx)(bo,{})})]}):(0,J.jsx)(Ve,{})});c();m();var Ge=u(S(),1),jt=i(({phantom:e,gasless:t})=>(0,Ge.jsx)(l,{paddingY:16,paddingX:32,children:(0,Ge.jsx)(Bt,{tooltipAlignment:"topLeft",iconSize:12,lineHeight:17,fontWeight:500,noWrap:!1,showInfoIcon:!1,info:t?g.t("swapFeesPhantomFeeGaslessDisclaimer",{feePercentage:R(e),gaslessFeePercentage:R(t)}):g.t("swapFeesPhantomFeeRegularDisclaimer",{feePercentage:R(e)}),children:t?g.t("swapQuoteGaslessFeeDisclaimer",{feePercentage:R(e),gaslessFeePercentage:R(t)}):g.t("swapQuoteFeeDisclaimer",{feePercentage:R(e)})})}),"PhantomFee");c();m();c();m();function $e({amountUsd:e,fromUsd:t,formatLocalizedPrice:n}){let a=yo(e),o=t(a),s=o>0&&o<.01?{minimumSignificantDigits:1,maximumSignificantDigits:2}:void 0;return n(o,s)}i($e,"formatSwapFee");function yo(e){return typeof e=="number"?e:parseFloat(typeof e=="string"?e:e.toString())}i(yo,"toNumber");var eo=u(I(),1);var M=u(S(),1),ho=i(({entry:e,fromUsd:t,formatLocalizedPrice:n})=>{let a=e.quoteFees.fees,o=a.find(r=>r.type==="phantom"),s=a.find(r=>r.type==="gasless"),p=a.filter(r=>!["gasless","phantom"].includes(r.type)).sort((r,b)=>le(r)&&!le(b)?-1:!le(r)&&le(b)?1:0).map(r=>{let b=$e({amountUsd:r.amountUsd,fromUsd:t,formatLocalizedPrice:n}),f=le(r)&&"network"in r?g.t("swapFeesChainNetworkFee",{chainName:Y.getChainName(r.network)}):g.t(r.type);switch(r.type){case"ata":return(0,M.jsxs)(eo.default.Fragment,{children:[(0,M.jsxs)(Ue,{children:[(0,M.jsx)(re,{children:f}),(0,M.jsx)(re,{children:b})]}),(0,M.jsx)(re,{style:{color:C.colors.legacy.textIncidental,fontSize:"12px",marginTop:4,textAlign:"left"},children:g.t("accountCreationFeeBody")})]},r.type);default:return(0,M.jsxs)(Ue,{children:[(0,M.jsx)(re,{children:f}),(0,M.jsx)(re,{children:b})]},r.type)}});return(0,M.jsxs)(M.Fragment,{children:[p,o&&(0,M.jsx)(re,{style:{fontStyle:"italic",color:C.colors.legacy.textIncidental,marginTop:8,textAlign:"left"},children:s?g.t("swapQuoteGaslessFeeDisclaimer",{feePercentage:R(o.percentage.toNumber()),gaslessFeePercentage:R(s.percentage.toNumber())}):g.t("swapQuoteFeeDisclaimer",{feePercentage:R(o.percentage.toNumber())})})]})},"FeeBreakdownTooltip");function Ke({entry:e,fromUsd:t,formatLocalizedPrice:n,showSwapSettings:a,showSwapPricing:o}){let s,p,r;switch(e.type){case"pricing":{p=g.t("swapFeesPricing"),s=e.exchangeRate,r=o;break}case"slippage":{p=g.t("swapFeesSlippage"),s=e.slippageType==="auto"?g.t("swapTokenDetailEntryAutoSlippage",{slippage:e.slippage}):g.t("swapTokenDetailEntryFixedSlippage",{slippage:e.slippage}),r=a;break}case"priceImpact":{p=g.t("swapFeesPriceImpact"),s=e.priceImpactPercentage;break}case"fees":{p=dt(e.quoteFees)?g.t("swapFeesNetworkFee"):g.t("swapFeesFees"),s=$e({amountUsd:e.quoteFees.totalFees,fromUsd:t,formatLocalizedPrice:n});break}case"transferFees":{p=g.t("swapFeesTransferFees"),s=g.t("swapTransferFeeDisclaimer",{symbol:e.transferTokenSymbol,feePercent:e.transferFees});break}default:throw new Error(`Unsupported entry type: ${e.type}`)}return{title:p,content:xo(e,s),tooltipContent:Fo(e,t,n),color:ko(e),onClick:r}}i(Ke,"toEntrySpec");function xo(e,t){return e.type==="transferFees"?t:e.warning?g.t("swapTokenDetailsWarningVeryHigh",{value:t}):e.alert?g.t("swapTokenDetailsAlertHigh",{value:t}):t}i(xo,"getEntryContent");function Fo(e,t,n){switch(e.type){case"pricing":return g.t("swapFeesRateDisclaimerMultichain");case"slippage":return g.t("swapFeesHighSlippageDisclaimer",{slippage:e.slippage});case"priceImpact":return g.t("swapFeesPriceImpactDisclaimer");case"fees":{if(t&&n)return(0,M.jsx)(ho,{entry:e,fromUsd:t,formatLocalizedPrice:n});let a=e.quoteFees.fees.find(s=>s.type==="phantom"),o=e.quoteFees.fees.find(s=>s.type==="gasless");return a?o?g.t("swapQuoteGaslessFeeDisclaimer",{feePercentage:R(a.percentage.toNumber()),gaslessFeePercentage:R(o.percentage.toNumber())}):g.t("swapQuoteFeeDisclaimer",{feePercentage:R(a.percentage.toNumber())}):void 0}default:return}}i(Fo,"getTooltipForEntry");function ko(e){return e.warning?C.colors.legacy.spotNegative:e.alert?C.colors.legacy.spotWarning:C.colors.legacy.textDiminished}i(ko,"getTextColorForEntry");function to(e){switch(e){case"slippage":return{title:g.t("swapFeesSlippage")};case"priceImpact":return{title:g.t("swapFeesPriceImpact")};case"fees":return{title:g.t("swapFeesFees")};case"pricing":return{title:g.t("swapFeesPricing")};case"transferFees":return{title:g.t("swapFeesTransferFees")};default:return Ze(e)}}i(to,"toLoadingEntrySpec");c();m();var de=u(S(),1),oo=i(({message:e,errorCode:t,onRetry:n})=>{let{t:a}=P(),o=a("swapQuestionRetry");return t==="InsufficientSellAmount"?(0,de.jsx)(l,{width:"100%",children:(0,de.jsx)(ze,{level:"1-critical-alert",children:e})}):(0,de.jsx)(l,{gap:10,width:"100%",children:(0,de.jsx)(l,{width:"100%",children:(0,de.jsx)(ze,{level:"2-alert",actions:[{children:o,onPress:n}],children:e})})})},"SwapperError");var Po=["pricing","slippage","priceImpact","fees"],ro=i(({quoteProcessorState:e})=>{let t=Ce();switch(e.type){case"idle":return A.default.createElement(l,{style:{marginTop:-16}},A.default.createElement(Jt,null));case"starting":case"firstQuoteReceived":case"quoteProcessed":return A.default.createElement(To,{quoteProcessorState:e});case"error":return A.default.createElement(l,{paddingX:"screen"},A.default.createElement(oo,{message:e.error.message,errorCode:e.error.code,onRetry:()=>t.refreshQuoteProcessor()}))}},"SwapperQuoteDetails"),To=i(({quoteProcessorState:e})=>{let{fromUsd:t,formatLocalizedPrice:n}=ct(),{handleShowModalVisibility:a}=Z(),o=Co(e),s=o.filter(h=>h.type!=="transferFees"),p=o.find(h=>h.type==="transferFees"),r=o.find(h=>h.type==="fees"),b=r?.quoteFees.fees.find(h=>h.type==="phantom"),f=r?.quoteFees.fees.find(h=>h.type==="gasless"),y=(0,A.useCallback)(()=>{a("swapSettings")},[a]),F=(0,A.useCallback)(()=>{a("swapPricing")},[a]),E=(0,A.useMemo)(()=>Po.map(h=>{let w=s.find(k=>k.type===h);return w?vo(Ke({entry:w,fromUsd:t,formatLocalizedPrice:n,showSwapSettings:y,showSwapPricing:F})):Ao(to(h))}),[s,t,n,y,F]);return A.default.createElement(l,{direction:"column",gap:4},A.default.createElement(l,{paddingX:"screen"},A.default.createElement(Nt,{rows:E,borderRadius:"8px"})),b&&A.default.createElement(jt,{phantom:b.percentage.toNumber(),gasless:f?.percentage.toNumber()}),p&&A.default.createElement(T,{font:"label",color:"spotWarning",paddingX:32},Ke({entry:p,fromUsd:t,formatLocalizedPrice:n,showSwapSettings:y,showSwapPricing:F}).content))},"QuoteDetailsContent");function Co(e){switch(e.type){case"firstQuoteReceived":case"quoteProcessed":return e.quoteDetails.entries;default:return[]}}i(Co,"entriesForQuoteProcessorState");function vo(e){return{label:e.title,value:e.content,tooltipContent:e.tooltipContent,color:e.color,onClick:e.onClick}}i(vo,"toRowSpec");function Ao(e){return{label:e.title,value:A.default.createElement(ke,{width:60,font:"caption"})}}i(Ao,"toRowLoadingSpec");c();m();var ae=u(I());c();m();var z=u(S(),1),Eo=U.div`
  overflow-y: "scroll";
  padding-top: 16px;
`,Do=U.fieldset.attrs({disabled:!0})`
  pointer-events: none;
  user-select: none;
`,Io=U.div`
  position: absolute;
  z-index: 1;
  top: 0;
  height: 100vh;
  width: 100%;
  background-color: ${Qe(C.colors.legacy.areaBase,.75)};
`,no=U.div`
  background-color: ${Qe(C.colors.brand.yellowMoon,.7)};
  padding: 12px 15px;
  position: absolute;
  /* TODO: change 15px to 16px and create a screen padding constant like on mobile */
  top: -15px;
  left: -15px;
  right: 15px;
  width: calc(100% + 2 * 15px);
`,ao=U(qe).attrs({size:14,lineHeight:19,weight:500,color:C.colors.legacy.textBase,textAlign:"left"})``,He=i(({message:e,swapDisabled:t=!0,children:n})=>t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Io,{"data-testid":"disable-overlay",children:(0,z.jsx)(no,{children:(0,z.jsx)(ao,{children:e})})}),(0,z.jsx)(Do,{"data-testid":"disable-wrapper",children:n})]}):(0,z.jsxs)(Eo,{children:[(0,z.jsx)(no,{children:(0,z.jsx)(ao,{children:e})}),(0,z.jsx)(z.Fragment,{children:n})]}),"SwapNotAvailableWrapper");var io=ae.default.memo(({children:e})=>{let t=je(),n=t.every(r=>Y.isMainnetNetworkID(r)),o=ve().some(r=>t.includes(r)),{t:s}=P(),p=(0,ae.useMemo)(()=>({availableOnlyOnMainnet:s("swapAvailableOnMainnet"),notAvailableOnSelectedNetwork:s("swapNotAvailableOnSelectedNetwork")}),[s]);return n?o?ae.default.createElement(l,{display:"flex",flex:1,paddingBottom:16,style:{marginBottom:"-16px"}},e):ae.default.createElement(He,{message:p.notAvailableOnSelectedNetwork,swapDisabled:!0},e):ae.default.createElement(He,{message:p.availableOnlyOnMainnet,swapDisabled:!0},e)});var X=u(S(),1),Bo=[.5,1],so=i(()=>{let e=Ce(),[t]=Tt(),n=Xe(f=>f.setSwapMode),a=ve(),o=(0,G.useCallback)(f=>{e.initializeSwap({swapMode:f,cashAddresses:{}}),n(f)},[e,n]),s=xt(),p=Xe(f=>f.swapMode),r=(0,G.useMemo)(()=>Lo({searchParams:t}),[t]),b=(0,G.useMemo)(()=>{if(r)return r;if(p){let f=_e(p);if(a.includes(f))return p}return s},[r,p,s,a]);return(0,G.useEffect)(()=>{if(r){if(!p){o(r);return}if(!ut(r,p)){o(r);return}}if(p){let f=_e(p);if(a.includes(f))return}o(s)},[r,p,s,o,a]),(0,G.useEffect)(()=>()=>{Xe.setState({swapMode:void 0})},[]),(0,X.jsx)(No,{swapMode:b})},"ClassicSwapperPage"),No=i(({swapMode:e})=>{let t=ft(e,Bo),{inputPerspective:n,tokens:a,tokenState:o,quotedAmounts:s,quoteProcessorState:p,inputErrors:r,currentSellPercentage:b,sellPercentages:f,setInputAmount:y,setSellPercentage:F,switchCurrencyDenomination:E,switchTokens:h,clearInput:w,setInputPerspective:k}=Ft(t),{handleShowModalVisibility:D}=Z(),d=(0,G.useCallback)(te=>{fe(o)&&D(te==="sell"?"swapSellAssetSelect":"swapBuyAssetSelect",{selectStrategy:{type:"navigateToClassic",sellCaip19:H(oe(o.sellToken)),buyCaip19:H(oe(o.buyToken)),isCashEligible:!1}})},[D,o]),W=yt({goToAssetSelect:d}),$=(0,G.useCallback)(te=>{fe(o)&&W(te)},[o,W]),_=o.type==="pair"?o.buyToken:void 0,ee=_?H(oe(_)):void 0;wt(ee,"swapper");let ie=ht();return(0,X.jsxs)(io,{children:[(0,X.jsxs)(l,{direction:"column",gap:16,paddingBottom:72,children:[(0,X.jsx)(Gt,{isInitializingTokens:ie,tokens:a,currentSellPercentage:b,setInputAmount:y,setSellPercentage:F,setInputPerspective:k,switchCurrencyDenomination:E,switchTokens:h,onSelectToken:$}),(0,X.jsx)(ro,{quoteProcessorState:p})]}),Mo(p)&&(0,X.jsx)(l,{position:"fixed",bottom:72,left:16,right:16,backgroundColor:"areaBase",borderRadius:"base",className:zt,children:(0,X.jsx)(Xt,{swapMode:e,quotedAmounts:s,tokenState:o,inputErrors:r,quoteProcessorState:p,currentPerspective:n,sellPercentages:f,resetSwapper:w})})]})},"ClassicSwapper");function Mo(e){return["quoteProcessed","firstQuoteReceived","starting"].includes(e.type)}i(Mo,"showButton");var Lo=i(({searchParams:e})=>{let t=e.get("sellFungible"),n=e.get("buyFungible"),a=e.get("sellFungibleKey"),o=e.get("buyFungibleKey");if(n)return{type:"swap",network:Re(n).chainId,buyCaip19:n,sellCaip19:void 0,takerCaip19:void 0,takerDestinationCaip19:void 0,sellFungibleKey:a??void 0,buyFungibleKey:o??void 0};if(t)return{type:"swap",network:Re(t).chainId,buyCaip19:void 0,sellCaip19:t,takerCaip19:void 0,takerDestinationCaip19:void 0,sellFungibleKey:a??void 0,buyFungibleKey:o??void 0}},"parseSearchParamsSwapMode"),Xe=tt(e=>({swapMode:void 0,setSwapMode:i(t=>e({swapMode:t}),"setSwapMode")}));var Ye=u(S(),1),Ro=i(()=>(0,Ye.jsx)(gt,{children:(0,Ye.jsx)(so,{})}),"SwapTabPage"),qs=Ro;export{qs as default};
//# sourceMappingURL=SwapTabPage-VZKA64NH.js.map
