import{a as m,b as g,c as p}from"./chunk-JQE54VLJ.js";import{a as z}from"./chunk-CYENH7PC.js";import{O as I,h as M,ta as v}from"./chunk-F236ETGH.js";import{A as O,Kc as d,Nf as b,ob as P}from"./chunk-LPV5DSV2.js";import{m as D}from"./chunk-NEE4FZIK.js";import{M as x}from"./chunk-JYKVQ4NC.js";import{a as t,g as A,i as y,m as Buffer,n as w}from"./chunk-TSHWMJEM.js";y();w();var E=(n=>(n.Ping="ping",n.HasOnboarded="hasOnboarded",n.ResetHasOnboarded="resetHasOnboarded",n.LockExtension="lockExtension",n.UnlockExtension="unlockExtension",n.IsExtensionUnlocked="IsExtensionUnlocked",n.SetPassword="setPassword",n.VerifyPassword="verifyPassword",n.UpdatePassword="updatePassword",n.ImportPrivateKeyAccount="importPrivateKeyAccount",n.ImportReadOnlyAccount="importReadOnlyAccount",n.ImportSeedAccount="importSeedAccount",n.ImportSeedlessAccount="importSocialSeedAccount",n.IsExistingSeed="isExistingSeed",n.AddAccountForSeed="addAccountForSeed",n.AddAccountForSeedless="addAccountForSeedless",n.AddLedgerAccounts="addLedgerAccounts",n.DeriveAddresses="deriveAddresses",n.ExportPrivateKey="exportPrivateKey",n.ExportEntropy="exportEntropy",n.SetAccountIcon="setAccountIcon",n.RemoveAccount="removeAccount",n.ReorderAccount="reorderAccount",n.GetAllAccounts="getAllAccounts",n.GetAllSeeds="getAllSeeds",n.GetAllSeedless="getAllSeedlessSeeds",n.GetAuthenticationPublicKey="getAuthenticationPublicKey",n.Sign="sign",n.CheckVaultIntegrity="checkVaultIntegrity",n.DO_NOT_USE_DiagnoseSeedCacheDigests="doNotUseDiagnoseSeedCacheDigests",n.DEBUG_CorruptSeedCacheWithSha256="debugCorruptSeedCacheWithSha256",n.GetPhantomOrganization="getPhantomOrganization",n.GetOrCreatePhantomOrganization="getOrCreatePhantomOrganization",n.RetrieveKMSWallet="RetrieveKMSWallet",n.GetKMSWalletStatus="GetKMSWalletStatus",n.AddUserToCurrentUserOrganization="addUserToCurrentUserOrganization",n.DeleteUserFromOrganization="deleteUserFromOrganization",n.UpdateUserInOrganization="updateUserInOrganization",n.GetAccounts="getAccounts",n.ExportWallet="exportWallet",n.BatchRpcCall="batchRpcCall",n.GetKmsAccounts="getKmsAccounts",n.GetWalletWithTag="getWalletWithTag",n.LogMessage="logMessage",n.DownloadLogs="downloadLogs",n.ProviderInjectionOptions="providerInjectionOptions",n.ServiceWorkerMutexAcquire="serviceWorkerMutexAcquire",n.ServiceWorkerMutexRelease="serviceWorkerMutexRelease",n))(E||{});y();w();var S=A(D(),1),c=A(z(),1);y();w();function a(r,e,s=b()){return{jsonrpc:"2.0",id:s,method:r,params:e}}t(a,"createRpcRequest");y();w();var l=A(z(),1);var N=t(async()=>{let r=a("getPhantomOrganization",[]),e=await p(l.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"getPhantomOrganization"),F=t(async()=>{let r=a("getOrCreatePhantomOrganization",[]),e=await p(l.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"getOrCreatePhantomOrganization"),B=t(async()=>{let r=a("RetrieveKMSWallet",[]),e=await p(l.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"retrieveKMSWallet"),de=t(async()=>{let r=a("GetKMSWalletStatus",[]),e=await p(l.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"getKMSWalletStatus"),ye=t(async(r,e,s,o,i,u,f)=>{let G=a("addUserToCurrentUserOrganization",[r,e,s,o,i,u,f]),R=await p(l.default.runtime,G);if("error"in R)throw new Error(R.error.message);return R.result},"addUserToCurrentUserOrganization"),_=t(async(r,e)=>{let s=a("deleteUserFromOrganization",[r,e]),o=await p(l.default.runtime,s);if("error"in o)throw new Error(o.error.message);return o.result},"deleteUserFromOrganization"),K=t(()=>({getPhantomOrganization:t(async()=>await N(),"getPhantomOrganization"),getOrCreatePhantomOrganization:t(async()=>await F(),"getOrCreatePhantomOrganization"),retrieveKMSWallet:t(async()=>await B(),"retrieveKMSWallet"),deleteUserFromOrganization:t(async({organizationId:r,username:e})=>await _(r,e),"deleteUserFromOrganization"),getKmsAccounts:t(async()=>{let r=a("getKmsAccounts",[]),e=await p(l.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"getKmsAccounts"),getWalletWithTag:t(async({organizationId:r,tag:e,accounts:s})=>{let o=a("getWalletWithTag",[r,e,s]),i=await p(l.default.runtime,o);if("error"in i)throw new Error(i.error.message);return i.result},"getWalletWithTag"),updateUserInOrganization:t(async({organizationId:r,username:e,newPolicy:s,addTraits:o,removeTraits:i})=>{let u=a("updateUserInOrganization",[r,e,i,o,s]),f=await p(l.default.runtime,u);if("error"in f)throw new Error(f.error.message);return f.result},"updateUserInOrganization"),getAccounts:t(async({organizationId:r,walletId:e,accounts:s})=>{let o=a("getAccounts",[r,e,s]),i=await p(l.default.runtime,o);if("error"in i)throw new Error(i.error.message);return i.result},"getAccounts"),exportWallet:t(async({organizationId:r,walletId:e,publicKey:s})=>{let o=a("exportWallet",[r,e,s]),i=await p(l.default.runtime,o);if("error"in i)throw new Error(i.error.message);return i.result},"exportWallet")}),"createKMSProxy");var U=A(x(),1),L=K(),J=t(async(r,e,s)=>{let o=e.fold(f=>Buffer.from(f.buffer).toString("base64")),i=a("importPrivateKeyAccount",[r,o,s]),u=await d.startSpan("importPrivateKeyAccount",()=>p(c.default.runtime,i));if("error"in u)throw new Error(u.error.message);if(typeof u.result=="string")return JSON.parse(u.result);throw new Error("importPrivateKeyAccount: Invalid response from background script")},"importPrivateKeyAccount"),ve=t(async(r,e,s)=>{let o=r.getEntropy(),i=a("importSeedAccount",[S.default.encode(o),e,s]);o.fill(0);let u=await d.startSpan("importSeedAccount",()=>p(c.default.runtime,i));if("error"in u)throw new Error(u.error.message);if(typeof u.result=="string")return JSON.parse(u.result);throw new Error("importS*edAccount: Invalid response from background script")},"importSeedAccount"),be=t(async(r,e,s)=>{let o=r.getEntropy(),i=a("importSocialSeedAccount",[S.default.encode(o),e,s]);o.fill(0);let u=await d.startSpan("importSeedlessAccount",()=>p(c.default.runtime,i));if("error"in u)throw new Error(u.error.message);if(typeof u.result=="string")return JSON.parse(u.result);throw new Error("importS*edlessAccount: Invalid response from background script")},"importSeedlessAccount"),ze=t(async r=>{let e=r.getEntropy(),s=a("isExistingSeed",S.default.encode(e));e.fill(0);let o=await d.startSpan("isExistingSeed",()=>p(c.default.runtime,s));if("error"in o)throw new Error(o.error.message);if(typeof o.result=="boolean"||o.result===null)return o.result;throw new Error("isExistingS*ed: Invalid response from background script")},"isExistingSeed"),q=t(async r=>{let e=a("addAccountForSeed",[r]),s=await d.startSpan("addAccountForSeed",async()=>g(await c.default.runtime.sendMessage(m(e))));if("error"in s)throw new Error(s.error.message);if(typeof s.result=="string")return JSON.parse(s.result);throw new Error("addAccountForS*ed: Invalid response from background script")},"addAccountForSeed"),W=t(async r=>{let e=a("addAccountForSeedless",[r]),s=await d.startSpan("addAccountForSeedless",async()=>g(await c.default.runtime.sendMessage(m(e))));if("error"in s)throw new Error(s.error.message);if(typeof s.result=="string")return JSON.parse(s.result);throw new Error("addAccountForS*ed: Invalid response from background script")},"addAccountForSeedless"),H=t(async(r,e)=>{let s=a("addLedgerAccounts",[r,e]),o=await d.startSpan("connectLedgerAccounts",async()=>g(await c.default.runtime.sendMessage(m(s))));if("error"in o)throw new Error(o.error.message);if(typeof o.result=="string")return JSON.parse(o.result);throw new Error("connectLedgerAccounts: Invalid response from background script")},"connectLedgerAccounts"),j=t(async r=>{let e=a("importReadOnlyAccount",r),s=await d.startSpan("addReadonlyAccount",async()=>g(await c.default.runtime.sendMessage(m(e))));if("error"in s)throw new Error(s.error.message);if(typeof s.result=="string")return JSON.parse(s.result);throw new Error("addReadonlyAccount: Invalid response from background script")},"addReadonlyAccount"),Ke=t(async(r,e,s)=>{let o=a("exportPrivateKey",[r,e,s]),i=await d.startSpan("exportPrivateKey",async()=>g(await c.default.runtime.sendMessage(m(o))));if("error"in i)throw new Error(i.error.message);if(typeof i.result=="string")return P.from(Buffer.from(i.result,"hex"));throw new Error("exportPrivateKey: Invalid response from background script")},"exportPrivateKey"),Ce=t(async(r,e)=>{let s=a("exportEntropy",[r,e]),o=await d.startSpan("exportEntropy",async()=>g(await c.default.runtime.sendMessage(m(s))));if("error"in o)throw new Error(o.error.message);if(typeof o.result=="string")return P.from(Buffer.from(o.result,"hex"));throw new Error("exportEntropy: Invalid response from background script")},"exportEntropy"),Q=t(async()=>{let r=a("deriveAddresses",void 0),e=await p(c.default.runtime,r);if("error"in e)throw new Error(e.error.message);return e.result},"deriveAddresses"),X=t(async r=>{let e=a("removeAccount",r),s=await p(c.default.runtime,e);if("error"in s)throw new Error(s.error.message);return s.result},"removeAccount"),Y=t(async(r,e)=>{let s=a("reorderAccount",{identifier:r,toIndex:e}),o=await p(c.default.runtime,s);if("error"in o)throw new Error(o.error.message);return o.result},"reorderAccount"),Z=t(async()=>{let r=a("getAllAccounts",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);if(typeof e.result=="string"){let s=JSON.parse(e.result);return I({accounts:s}).accounts}throw new Error("fetchAllAccounts: Invalid response from background script")},"fetchAllAccounts"),$=t(async()=>{let r=a("getAllSeeds",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);if(typeof e.result=="string")return JSON.parse(e.result);throw new Error("fetchAllSe*dMetas: Invalid response from background script")},"fetchAllSeedMetas"),k=t(async()=>{let r=a("getAllSeedlessSeeds",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);if(typeof e.result=="string")return JSON.parse(e.result);throw new Error("fetchAllSe*dlessMetas: Invalid response from background script")},"fetchAllSeedlessMetas"),T=t(async r=>{let e=a("getAuthenticationPublicKey",{secretIdentifier:r}),s=g(await c.default.runtime.sendMessage(m(e)));if("error"in s)throw new Error(s.error.message);if(typeof s.result=="string")return JSON.parse(s.result);throw new Error("getAuthenticationPublicK*y: Invalid response from background script")},"getAuthenticationPublicKey"),ee=t(async()=>{let r=a("checkVaultIntegrity",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);return e.result},"checkVaultIntegrity"),re=t(async()=>{let r=a("doNotUseDiagnoseSeedCacheDigests",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);return typeof e.result=="string"?JSON.parse(e.result):null},"diagnoseSeedCacheDigestsRpc"),se=t(async()=>{let r=a("debugCorruptSeedCacheWithSha256",void 0),e=g(await c.default.runtime.sendMessage(m(r)));if("error"in e)throw new Error(e.error.message);return typeof e.result=="string"?JSON.parse(e.result):null},"debugCorruptSeedCacheWithSha256Rpc"),te=t(async(r,e)=>{let s=v.parse(e);"chainType"in s&&s.chainType===O.Solana&&s.signingType==="transaction"&&typeof s.message!="string"&&(s.message=S.default.encode(s.message));let o=a("sign",{accountIdentifier:r,params:s}),i=g(await c.default.runtime.sendMessage(m(o)));if("error"in i)throw new Error(i.error.message);if(typeof i.result=="string")return g(i.result);throw new Error("sign: Invalid response from background script")},"sign"),C={addAccountForSeed:q,addReadonlyAccount:j,importPrivateKeyAccount:J,connectLedgerAccounts:H,fetchAllAccounts:Z,fetchAllSeedMetas:$,fetchAllSeedlessMetas:k,connectSolanaSeedVaultAccounts:t(()=>{throw new Error("Solana Seed Vault is not supported on browser extension.")},"connectSolanaSeedVaultAccounts"),deriveAddresses:Q,removeAccount:t(async r=>{if(!await X(r))throw new Error("Error while removing account")},"removeAccount"),reorderAccount:t(async(r,e)=>{if(!await Y(r,e))throw new Error("Error while reordering account")},"reorderAccount"),sign:te,getAuthenticationPublicKey:T,addAccountForSeedless:W,checkVaultIntegrity:ee,getCashKMSAccount:t(async()=>{throw new Error("getCashKMSAccount: Not implemented on browser extension")},"getCashKMSAccount"),updateCashAccountMapping:t(async()=>{throw new Error("updateCashAccountMapping: Not implemented on browser extension")},"updateCashAccountMapping"),getKMSInstance:t(()=>L,"getKMSInstance"),addKMSVaultAccount:t(()=>{throw new Error("addKMSVaultAccount: Only callable from background script, not UI")},"addKMSVaultAccount"),canDeriveKMSAuthenticator:t(()=>{throw new Error("canDeriveKMSAuthenticator: Not implemented on browser extension")},"canDeriveKMSAuthenticator"),DO_NOT_USE_diagnoseSeedCacheDigests:t(async()=>{let r=await re();if(!r)throw new Error("DO_NOT_USE_diagnoseSeedCacheDigests: Vault locked");return r},"DO_NOT_USE_diagnoseSeedCacheDigests"),DEBUG_corruptSeedCacheWithSha256:t(async()=>{let r=await se();if(!r)throw new Error("DEBUG_corruptSeedCacheWithSha256: Vault locked");return r},"DEBUG_corruptSeedCacheWithSha256")},Ue=t(()=>C,"getVaultProxy");function Ge({children:r}){return(0,U.jsx)(M,{vault:C,children:r})}t(Ge,"VaultProxyProvider");export{E as a,a as b,B as c,de as d,ye as e,K as f,ve as g,be as h,ze as i,Ke as j,Ce as k,k as l,Ue as m,Ge as n};
//# sourceMappingURL=chunk-5NEPC5CX.js.map
