import{P as Nu,a as fl,la as Uu}from"./chunk-HGG2EQ5O.js";import{$ as Zt,B as Sr,C as wt,Ca as Pu,D as $n,H as ms,I as zn,J as Su,K as fs,L as Cu,P as wu,Pa as _u,Qa as Mu,R as hs,S as Tu,V as xu,X as Jt,Xa as Du,Y as Au,Z as Eu,da as Cr,ea as Iu,hb as Bu,ia as vu,ka as Hn,la as Gn,o as bu,ra as ku,ta as Ru,za as Ou}from"./chunk-PQUTVVRL.js";import{$ as gu,C as cu,D as lu,H as uu,I as du,L as pu,T as Ne,W as mu,X as fu,Y as hu,h as iu,i as su,m as au,qa as yu}from"./chunk-IOXJCRJI.js";import{a as Lu,b as Fu}from"./chunk-QLEUWUCH.js";import{a as Kl}from"./chunk-OJPBMZQC.js";import{ba as xl,f as Sl,h as Cl,o as wl,r as Tl}from"./chunk-FLYQWZR6.js";import{Ac as St,B as vn,Cb as ul,D as as,E as _o,Fb as bt,Lb as dl,Rb as pl,_b as ml,e as rl,i as qr,ka as Wt,p as In,wc as Qr}from"./chunk-F236ETGH.js";import{$ as Bn,Aa as Jr,Ba as Zr,Bc as ds,Ca as M,Cc as Ql,D as El,Da as W,Dc as Uo,Ea as Xt,F as Il,Fa as le,Fd as eu,G as vl,Ga as v,Gc as ps,Gd as tu,Ha as Ee,Hc as jn,I as Dn,Ia as eo,Ic as Wl,Ja as L,Jd as Vn,Ka as Fn,Kb as Ll,La as we,M as kl,Ma as Pt,Md as ru,Na as ne,Oa as ee,P as Rl,Qd as ou,Ra as Nn,Rb as jh,Sb as Fl,Ta as Fo,Tb as Nl,Tc as Yl,Ua as yr,Va as Pl,Vd as ro,Wa as _l,Xc as Xl,Yc as Jl,Zc as Zl,_ as Ol,b as Al,be as nu,d as Mn,ec as Un,f as Ct,fc as Ul,fd as to,g as Yr,gc as jl,hb as Ml,hc as Vl,jc as $l,kd as br,ld as jo,mc as zl,pb as No,rc as Hl,sc as Gl,tc as ge,ua as Xr,va as ue,vb as Dl,vc as ql,wa as Ln,wb as Bl,xa as Lo,xc as oe,ya as _,z as Bo,za as us}from"./chunk-QF7OLC35.js";import{$e as sl,A as bn,Ad as be,Bb as Nh,Bc as Qc,C as Nc,D as he,Db as zc,Ee as kn,F as Uc,G as jc,Gc as qt,Ge as il,Hc as te,Ja as is,Kb as B,Kc as Z,Lb as nt,Mb as Kt,Mf as Q,Nf as ll,Pb as wn,Qb as ss,Rb as Gr,S as Sn,Se as cs,T as Vc,Ta as $c,Te as Rn,U as Cn,Ub as Hc,Ue as On,Ve as it,Wa as j,We as gr,_b as Gc,_c as se,bd as Je,be as En,cd as Qt,dc as Kc,dd as G,df as al,ec as qc,fd as Wc,gf as cl,hd as Yc,ic as Tn,ie as tl,jc as xn,jd as Kr,kf as yt,lf as Mo,md as Xc,o as Fc,pe as Uh,td as Jc,te as ol,ud as Ce,vf as Qe,wd as An,xd as Zc,xe as nl,yd as el}from"./chunk-LPV5DSV2.js";import{t as zr,u as Hr}from"./chunk-NEE4FZIK.js";import{$b as bl,B as Lc,Ea as Yt,J as Le,Ja as hl,K as q,L as R,La as z,Lb as yl,M as Ae,Pa as Ot,Sa as _e,T as O,Ua as _n,Wb as Wr,Y as N,c as Gt,lb as Do,vb as gl,w as p,wa as Pn,y as ot,za as ls}from"./chunk-JYKVQ4NC.js";import{a as n,g as I,i as a,l as Fh,m as Buffer,n as c}from"./chunk-TSHWMJEM.js";a();c();var Vh=n(t=>t??[],"toEmptyArray"),Tt=class extends Error{static{n(this,"CollectiblesError")}constructor(e){super(e),this.name="CollectiblesError"}},J=p.string().nullish().transform(Qe),wr=p.number().nullish().transform(Qe),gs=p.union([J,wr]).transform(t=>typeof t=="number"?t.toString():t),$h=p.object({name:J,symbol:J,decimals:wr,address:J}),oo;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.ReservationListV1=3]="ReservationListV1",t[t.MetadataV1=4]="MetadataV1",t[t.ReservationListV2=5]="ReservationListV2",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker",t[t.UseAuthorityRecord=8]="UseAuthorityRecord",t[t.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",t[t.TokenOwnedEscrow=10]="TokenOwnedEscrow",t[t.TokenRecord=11]="TokenRecord",t[t.MetadataDelegate=12]="MetadataDelegate"})(oo||(oo={}));var Kn=p.nativeEnum(oo),$u=p.object({price:p.number(),token:$h.nullish().transform(Qe)}),zh=$u.nullish().transform(Qe),Hh=p.object({name:J,url:J,isVerified:p.coerce.boolean()}),zu=p.object({id:p.string(),isValidCollectionId:p.coerce.boolean(),name:J,description:J,externalUrl:J,imageUrl:J,isSpam:p.coerce.boolean(),spamStatus:p.nativeEnum(ge).optional().default(ge.NotVerified),floorPrice:$u.nullish().transform(Qe),ownerCount:wr,totalCount:wr,tokenCount:wr,marketplaces:p.array(Hh)}),Gh=p.object({small:J,medium:J,large:J,blurhash:J}),Kh=Gh.nullish().transform(Qe),qh=p.enum(["image","video","audio","model","other"]),Qh=p.object({url:J}),Vo=Qh.nullish().transform(Qe),Wh=p.object({type:qh,image:Vo,video:Vo,audio:Vo,model:Vo,other:Vo,previews:Kh}),Yh=Wh.nullish().transform(Qe),Xh=p.object({trait_type:J,value:J.or(wr),display_type:J}),Jh=p.object({id:p.string(),contract:p.string(),standard:p.nativeEnum(jo)}),Hu=p.object({compressed:p.boolean(),merkleTree:p.string(),leafIndex:p.number()}),Zh=p.object({mint:p.string(),tokenAccount:p.string(),standard:p.nativeEnum(br),compression:Hu.nullish().transform(Qe),programId:p.string(),mintExtensions:nl(Yl).optional()}),eg=p.object({firstCreatedTransactionHash:p.string(),firstCreatedInscriptionId:p.string(),inscriptionId:J,inscriptionNumber:gs,outputValue:gs,satNumber:gs,satName:J,satRarity:J,protocolName:J,utxoHash:J,utxoIndex:wr,createdAt:p.string().nullish().transform(Qe)}),tg=p.object({objectId:p.string().optional(),kioskId:p.string().optional()}),rg=p.object({listingPrice:p.string(),listingPriceUiAmount:p.string(),isNative:p.boolean(),url:p.string()}),og=p.union([Zh,Jh,eg,tg]),ys=p.object({id:nt,chain:Gc,name:J,symbol:J,description:J,externalUrl:J,collection:zu,media:Yh,uri:J,attributes:p.array(Xh).nullish().transform(Vh),lastSalePrice:zh,balance:J,decimals:J,owner:J,chainData:og.optional(),listings:p.record(rg).nullish().transform(Qe)}),ng=zu.extend({items:p.array(ys)}),Mw=p.object({items:p.array(ng),isTrimmed:p.boolean()}),ju;(function(t){t.HiddenTitle="hidden-title",t.HiddenButton="hidden-button",t.Collection="collection",t.Empty="empty",t.CollectiblesTrimmed="collectibles-trimmed",t.AddCollection="add-collection"})(ju||(ju={}));var Vu;(function(t){t.userHid="userHid",t.userUnhid="userUnhid",t.userBurned="userBurned",t.markAsSpam="markAsSpam",t.markAsNotSpam="markAsNotSpam"})(Vu||(Vu={}));var Dw=p.object({compression:Hu.nullish().transform(Qe).refine(t=>t?.compressed),mint:p.string()}),Bw=p.object({root:p.string(),proof:p.array(p.string()),merkleTree:p.string(),dataHash:p.string(),creatorHash:p.string(),leafIndex:p.number(),owner:p.string(),delegate:p.string().optional()}),Ue;(function(t){t.CONFIRMATION="CONFIRMATION",t.SUBMISSION="SUBMISSION"})(Ue||(Ue={}));a();c();var Gu=p.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),_t=p.object({id:p.string(),displayName:p.string().optional(),logoURI:p.union([p.string(),p.null()]).optional(),tokenType:Gu,decimals:p.number().optional(),symbol:p.string().optional(),isSpam:p.boolean().optional()}),Ku=p.object({id:nt,displayName:p.string(),logoURI:p.union([p.string(),p.null()]).optional()}),qn=p.object({token:_t,amount:p.string(),to:nt,from:nt}),bs=p.literal("UNCLASSIFIED_APP_INTERACTION"),Ss=p.literal("TOKEN_SEND"),Cs=p.literal("TOKEN_BURN"),ws=p.literal("TOKEN_SWAP"),Ts=p.literal("TOKEN_UNWRAP"),xs=p.literal("WITHDRAW_STAKE"),As=p.literal("DEACTIVATE_STAKE"),Es=p.literal("STAKE"),Is=p.literal("COLLECTIBLE_LIST"),vs=p.literal("COLLECTIBLE_BUY_ITEM"),ks=p.literal("COLLECTIBLE_CANCEL_BID"),Rs=p.literal("COLLECTIBLE_BID_ITEM"),Os=p.literal("COLLECTIBLE_UNLIST"),Ps=p.literal("COLLECTIBLE_SELL_ITEM"),_s=p.literal("CANCEL_TX"),Ms=p.literal("TOKEN_APPROVAL"),Ds=p.literal("CANCEL_ORDER"),Bs=p.literal("COLLECTION_APPROVAL"),Ls=p.literal("BRIDGE_INIT"),ig=p.union([bs,Ss,Cs,ws,Ts,xs,As,Es,Is,vs,ks,Rs,Os,Ps,_s,Ms,Ds,Bs,Ls]),qu=p.object({transactionType:bs,balanceChanges:p.array(qn),dapp:p.union([Ct,p.null()]).optional()}),Qu=p.object({transactionType:Ss,balanceChanges:p.array(qn).nonempty(),dapp:p.union([Ct,p.null()]).optional()}),Wu=p.object({transactionType:Cs,dapp:p.union([Ct,p.null()]).optional(),token:_t,amount:p.string()}),Yu=p.object({transactionType:ws,dapp:p.union([Ct,p.null()]).optional(),receiveToken:_t,sendToken:_t,receiveAmount:p.string(),sendAmount:p.string()}),Xu=p.object({transactionType:Ts,token:_t,amount:p.string()}),Ju=p.object({transactionType:xs,stakeAccount:nt,amount:p.string()}),Zu=p.object({transactionType:As,stakeAccount:nt,amount:p.string()}),ed=p.object({transactionType:Es,stakeAccount:nt,amount:p.string(),validatorName:p.string().optional(),validatorWebsite:p.string().optional(),keybaseUsername:p.string().optional()}),td=p.object({transactionType:_s}),no=p.object({dapp:p.union([Ct,p.null()]),itemAmount:p.string().optional(),item:_t,forAmount:p.string(),forAsset:_t,listingUrl:p.string().optional()}),rd=no.merge(p.object({transactionType:Is})),od=no.merge(p.object({transactionType:vs})),nd=no.merge(p.object({transactionType:ks})),id=no.merge(p.object({transactionType:Rs})),sd=no.merge(p.object({transactionType:Os})),ad=no.merge(p.object({transactionType:Ps})),cd=p.object({transactionType:Ms,dapp:p.union([Ct,p.null()]).optional(),token:_t,value:p.string().optional(),isApproved:p.boolean()}),ld=p.object({transactionType:Ds,dapp:p.union([Ct,p.null()]).optional(),orderId:p.string()}),ud=p.object({transactionType:Bs,collection:Ku,dapp:p.union([Ct,p.null()]).optional(),isApproved:p.boolean()}),dd=p.object({transactionType:Ls,dapp:p.union([Ct,p.null()]).optional(),balanceChanges:p.array(qn).nonempty(),explorerUrl:p.string().optional()}),pd=p.enum(["success","failed"]),md=p.object({networkFee:p.string().optional(),networkFeePayer:p.string().optional(),status:pd,errorMessage:p.union([p.string(),p.null()]),blockNumber:p.string(),chainId:Vc,transactionId:p.string()}),Qn=p.object({timestamp:p.number(),owner:nt,id:nt,interactionData:p.union([qu,Qu,Wu,Yu,Xu,Ju,Zu,ed,rd,od,nd,id,sd,ad,td,cd,ld,ud,dd]),chainMeta:md}),Me=n(t=>t.split("/")[1]?.split(":").slice(1).join(":"),"extractAddressfromBri");a();c();var Tr=n(t=>{switch(t){case"SemiFungible":case"NonFungible":return!0;default:return!1}},"isCollectibleTokenType"),Fs=n((t,e)=>{let r=Me(t.to),o=Me(t.from),i=e.some(l=>l.address.toLowerCase()===r.toLowerCase()),s=e.some(l=>l.address.toLowerCase()===o.toLowerCase());return i&&!s},"isReceiveTransaction");a();c();var Ns=I(Ae());a();c();var fd=n(({interactionData:t,isError:e,selectedAccountAddresses:r,getKnownAddressLabel:o,start:i,networkID:s})=>{let u=t.balanceChanges[0],{token:{symbol:d,displayName:m,tokenType:f,decimals:y},amount:w}=u,S=Fs(u,r),b=Tr(f),T=sg({isCollectible:b,sign:S?"+":"-",amount:w,decimals:y,tokenSymbol:d,tokenType:f,isError:e});if(S){let E=Me(u.from),P=as(E,void 0,o(E,s));return{topLeft:{text:`${O.t("transactionsReceived")} ${b?m||O.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${T}`,color:"spotPositive"},bottomLeft:{text:O.t("transactionsFromParagraphInterpolated",{from:P,defaultValue:`From ${P}`})},start:i}}let x=Me(u.to),A=as(x,void 0,o(x,s));return{topLeft:{text:e?O.t("transactionsSendFailed"):`${O.t("transactionsSent")} ${b?m||O.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${T}`,color:"textBase"},bottomLeft:{text:O.t("transactionsToParagraphInterpolated",{to:A,defaultValue:`To ${A}`})},start:i}},"tokenSendLabel");function sg({isCollectible:t,sign:e,amount:r,decimals:o,tokenSymbol:i,tokenType:s,isError:l}){return l||o===void 0||s==="NonFungible"?"":t?`${e}${it(r,o)}`:`${e}${it(r,o)}${i?` ${yt(i,6)}`:""}`}n(sg,"getValueDisplay");var ag=["So11111111111111111111111111111111111111112","501"],cg=n((t,e,r,o,i)=>{let{interactionData:s,chainMeta:l}=t,{transactionType:u}=s,d=l.status==="failed",m=l.chainId,f=B.getTokenSymbol(m),y=B.getTokenDecimals(m),w=e("historyUnknownDappName"),S=(0,Ns.jsx)(r,{activityItem:t,size:"small",isDetailViewOrSvg:!1});switch(u){case"TOKEN_SEND":return fd({interactionData:s,isError:d,selectedAccountAddresses:i,getKnownAddressLabel:o,start:S,networkID:m});case"TOKEN_BURN":{let{amount:b,token:C}=s,T="";return C.displayName?b==="1"?T=C.displayName:T=`${C.displayName} (${b})`:T=e("richTransactionDetailUnknownNFT"),{topLeft:{text:d?`${e("transactionsFailedBurn")}`:`${e("transactionsBurned")}`},bottomLeft:{text:T},start:S}}case"TOKEN_UNWRAP":{let{amount:b,token:C}=s;return{topLeft:{text:d?`${e("transactionsUnwrappedFailed")}`:`${e("transactionsUnwrapped")}`},topRight:{text:d?"":`${it(b,C.decimals??0)} ${C.symbol}`,color:"textBase"},start:S}}case"TOKEN_SWAP":{let{receiveAmount:b,receiveToken:C,sendAmount:T,sendToken:x,dapp:A}=s,E=A?A.displayName:e("historyUnknownDappName"),P=_o(Me(x.id)||""),D=_o(Me(C.id)||""),re="";!d&&C.decimals!==void 0&&(re=`+${it(b,C.decimals)} ${yt(C.symbol||D,6)}`);let F="";return!d&&x.decimals!==void 0&&(F=`-${it(T,x.decimals)} ${yt(x.symbol||P,6)}`),{topLeft:{text:e(d?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:re,color:"spotPositive"},bottomLeft:{text:E},bottomRight:{text:F,color:"textBase"},start:S}}case"BRIDGE_INIT":{let b=s.dapp?s.dapp.displayName:w,T=s.balanceChanges[0],{token:{symbol:x,decimals:A},amount:E}=T,P=x?` ${yt(x,6)}`:"";if(!d&&A!==void 0){let D=`-${it(E,A)}${P}`;return{topLeft:{text:d?e("transactionBridgeInitiatedFailed"):`${e("transactionBridgeInitiated")}`},bottomLeft:{text:b},topRight:{text:`${D}`,color:"textBase"},start:S}}return{topLeft:{text:d?e("transactionBridgeInitiatedFailed"):`${e("transactionBridgeInitiated")}`},bottomLeft:{text:b},start:S}}case"WITHDRAW_STAKE":{let{amount:b,stakeAccount:C}=s,T=Me(C),x=B.getTokenSymbol(m);return{topLeft:{text:e(d?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:d?"":`${it(b,y)} ${yt(x,6)}`,color:"textBase"},bottomLeft:{text:vn(T,4)},start:S}}case"DEACTIVATE_STAKE":{let{stakeAccount:b}=s,C=Me(b);return{topLeft:{text:e(d?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:vn(C,4)},start:S}}case"STAKE":{let{amount:b,stakeAccount:C,validatorName:T}=s,x=Me(C);return{topLeft:{text:e(d?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:d?"":`${it(b,y)} ${yt(f,6)}`,color:"textBase"},bottomLeft:{text:T||vn(x,4)},start:S}}case"COLLECTIBLE_LIST":{let{dapp:b,item:C}=s,T=b?b.displayName:e("historyUnknownDappName"),x=C.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:d?e("transactionsListedFailed"):e("transactionsListedInterpolated",{name:x})},bottomLeft:{text:T},start:S}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:b,itemAmount:C,item:T,forAsset:x,forAmount:A}=s,E=b?b.displayName:e("historyUnknownDappName"),P=hd(A,x.decimals,yt(x.symbol||"",6)),D=T.symbol||_o(Me(T.id)),re=C&&T.tokenType==="SemiFungible"?`+${C} ${D}`:`+${D}`;return{topLeft:{text:e(d?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:d?"":re,color:"spotPositive"},bottomRight:{text:d?"":`${P}`,color:"textBase"},bottomLeft:{text:E},start:S}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:b,item:C}=s,T=b?b.displayName:e("historyUnknownDappName"),x=C.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:d?e("transactionsCancelBidOnFailed"):e("transactionsCancelBidOnInterpolated",{name:x})},bottomLeft:{text:T},start:S}}case"COLLECTIBLE_BID_ITEM":{let{dapp:b,item:C}=s,T=b?b.displayName:e("historyUnknownDappName"),x=C.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:d?e("transactionsBidFailed"):e("transactionsBidOnInterpolated",{name:x})},bottomLeft:{text:T},start:S}}case"COLLECTIBLE_UNLIST":{let{dapp:b,item:C}=s,T=b?b.displayName:e("historyUnknownDappName"),x=C.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:d?e("transactionsUnlistedFailed"):e("transactionsUnlistedInterpolated",{name:x})},bottomLeft:{text:T},start:S}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:b,itemAmount:C,item:T,forAsset:x,forAmount:A}=s,E=b?b.displayName:e("historyUnknownDappName"),P=x.decimals!==void 0?`+${it(A,x.decimals)} ${yt(x.symbol||"",6)}`:e("transactionsUnknownAmount"),D=T.symbol||_o(Me(T.id)),re=C&&T.tokenType==="SemiFungible"?`-${C} ${D}`:`-${D}`;return{topLeft:{text:e(d?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:d?"":`${P}`,color:"spotPositive"},bottomRight:{text:d?"":re,color:"textBase"},bottomLeft:{text:E},start:S}}case"CANCEL_TX":return{topLeft:{text:e(d?"transactionCancelledFailed":"transactionCancelled")},start:S};case"TOKEN_APPROVAL":{let{dapp:b,token:C,isApproved:T}=s,x=Tr(C.tokenType)?C.displayName:C.symbol,A;return d?T?Tr(C.tokenType)?A=e("transactionApproveTokenFailed",{tokenSymbol:x}):A=e("transactionApprovalFailed"):Tr(C.tokenType)?A=e("transactionRevokeApproveTokenFailed",{tokenSymbol:x}):A=e("transactionRevokeFailed"):T?A=e("transactionApproveToken",{tokenSymbol:x}):A=e("transactionRevokeApproveToken",{tokenSymbol:x}),{topLeft:{text:A},bottomLeft:{text:b?b.displayName:w,color:"textIncidental"},start:S}}case"COLLECTION_APPROVAL":{let{collection:b,isApproved:C,dapp:T}=s,x=b.displayName,A;return d?C?A=e("transactionApproveTokenFailed",{tokenSymbol:x}):A=e("transactionRevokeApproveTokenFailed",{tokenSymbol:x}):C?A=e("transactionApproveToken",{tokenSymbol:x}):A=e("transactionRevokeApproveToken",{tokenSymbol:x}),{topLeft:{text:A},bottomLeft:{text:T?T.displayName:w,color:"textIncidental"},start:S}}case"CANCEL_ORDER":{let{dapp:b}=s;return{topLeft:{text:e(d?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:b?.displayName||e("historyUnknownDappName"),color:"textIncidental"},start:S}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:b}=s,C=b?b.displayName:w;return{topLeft:{text:e(d?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:C},start:S}}}},"createActivityRowLabels"),lg=n((t,e)=>{let{display:r,type:o}=t,{topLeft:i,topRight:s,bottomLeft:l,bottomRight:u}=r.summary,d=(0,Ns.jsx)(e,{logoUri:r.summary.logoUri,pendingTransactionType:o,size:"small"});return{topLeft:i,topRight:s,bottomLeft:l,bottomRight:u,start:d}},"createPendingTransactionRowLabels"),Us=n((t,e,r)=>{let o=(t??[]).map(No);if(e){let i=o.find(s=>s.chainId===e)?.address;if(i){let s={chainId:e,address:i};r&&(s.filters=[{type:"token",value:r}]),o=[s]}}return o},"getAccountsWithFilter"),js=n(t=>{if(!t)return;let e=Vn(t);if(e.resourceType!==Kt.nativeToken)return t.type===Xl.SPL?t.data.splTokenAccountPubkey:e.address},"getTokenActivityFilterId"),ug=n((t,e)=>{let r=Me(t.id);return ag.includes(r)&&(t.tokenType="Native"),t.tokenType==="Native"?{chainId:e,slip44:B.getSlip44(e),resourceType:Kt.nativeToken}:{chainId:e,address:r,resourceType:Kt.address}},"getFungibleCaip19FromToken"),hd=n((t,e,r)=>{if(!t||!e)return O.t("transactionsUnknownAmount");let o=gr(t,e),i=o.abs(),s=o.isZero()?"":o.isPositive()?"-":"+",l=ro(i);return`${s}${l} ${r}`},"formatPaidAmount");a();c();var $o=I(R());var dg=p.object({orderIds:p.array(p.object({bytesValue:p.string(),bytesArrayValue:p.string(),stringValue:p.string()}))}),pg=n(async(t,e)=>{if(e==="LI.FI")return{label:O.t("transactionBridgeStatusLink",{dappName:"LI.FI"}),value:`https://explorer.li.fi/tx/${t}`};if(e==="deBridge")try{let r=await se.get(`https://stats-api.dln.trade/api/Transaction/${t}/orderIds`),o=dg.safeParse(r.data);if(!o.success){Z.captureError(new Error("Failed to parse deBridge response"),te.History);return}let i=o.data.orderIds[0]?.stringValue;if(!i){Z.captureError(new Error("No orderId found in deBridge response"),te.History);return}return{label:O.t("transactionBridgeStatusLink",{dappName:"DeBridge"}),value:`https://app.debridge.finance/order?orderId=${i}`}}catch(r){Z.captureError(new Error(`Could not fetch bridge explorer url: ${r}`),te.History);return}},"getBridgeExplorerUrl"),mg=n((t,e)=>{let[r,o]=(0,$o.useState)(),[i,s]=(0,$o.useState)(!1);return(0,$o.useEffect)(()=>{t&&e&&n(async()=>{s(!0);try{let u=await pg(t,e);o(u)}finally{s(!1)}},"fetchBridgeUrl")().catch(u=>{Z.addBreadcrumb(te.History,"[useBridgeExplorerUrl] Failed to fetch bridge URL",qt.Error,{error:String(u)})})},[t,e]),{bridgeUrl:r,isLoading:i}},"useBridgeExplorerUrl");a();c();a();c();a();c();var je={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var gd={...je};a();c();var yd={...je};a();c();var bd={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};a();c();var Sd={...je,showTimeToMineRowInPendingTransactionDetail:!0};a();c();var Cd={...je};a();c();var wd={...je};a();c();var Td={...je};a();c();var xd={...je};a();c();var Ad={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};a();c();var Ed={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var fg=new xn({[he.Solana]:Ad,[he.Ethereum]:Sd,[he.Polygon]:xd,[he.Monad]:Td,[he.Base]:yd,[he.Arbitrum]:gd,[he.Bitcoin]:bd,[he.Sui]:Ed,[he.Hypercore]:Cd,[he.Hyperevm]:wd}),Id=Tn(fg);a();c();a();c();a();c();a();c();var kd=I(R(),1);var vd=new WeakMap;function Rd(t,e){let r=iu(e),o=hg(r);for(let[i,s]of t)(!o.has(i)||e?.dangerouslyForceHydrate)&&(o.add(i),r.set(i,s))}n(Rd,"useHydrateAtoms");var hg=n(t=>{let e=vd.get(t);return e||(e=new WeakSet,vd.set(t,e)),e},"getHydratedSet");var Ld=I(R());a();c();var Dd=I(R());a();c();var gg=10,yg="/history/v2",zo=class extends Error{static{n(this,"ActivityItemsFetchCacheBustError")}message="406: Cache bust!"},Wn=class extends Error{static{n(this,"ActivityItemsFetchResponseMalformed")}message="Server response malformed."},Vs=class extends Error{static{n(this,"ActivityItemsFetchServerError")}},$s=class extends Error{static{n(this,"ActivityItemsFetchClientError")}},Od=p.object({next:p.union([p.null(),p.string()]),results:p.array(Qn)}),Pd=n(async t=>{let e=await se.api().retry(3,2e3).post(`${yg}`,t);if(e.status===406)throw new zo;if(e.status>=400&&e.status<500)throw new $s(`FetchActivityItem: Status code: ${e.status}`);if(e.status>=500)throw new Vs(`FetchActivityItem: Status code: ${e.status}`);return e.data},"_fetch"),_d=n(t=>!Array.isArray(t.results)||typeof t.next!="string"&&t.next!==null,"isResponseMalformed"),zs=n(async t=>{let e=await Pd(t);if(_d(e))throw new Wn;for(;e.results?.length<gg&&e.next;){if(_d(e))throw new Wn;let r=await Pd({next:e.next,isSpam:t.isSpam});e.next=r.next,e.results=[...e.results,...r.results]}try{return Od.parse(e)}catch(r){let o=r,i=[],s=o.issues;for(let d=0;d<s.length;++d){let m=s[d].path;if(m[0]!=="results")throw Z.captureError(o,te.History),o;let f=m[1];if(typeof f!="number")throw Z.captureError(o,te.History),o;i.push(f)}i.sort(function(d,m){return m-d});let l=i.map(d=>e.results[d]).map(d=>d.interactionData?.transactionType||""),u=[];for(let d=0;d<i.length;++d){let m=i[d],f=e.results[m],y={timestamp:f?.timestamp,owner:f?.owner,id:f?.id,chainMeta:f?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{Qn.parse(y),e.results[m]=y,u.push(m)}catch{}}for(let d=0;d<i.length;++d){let m=i[d];u.indexOf(m)===-1&&e.results.splice(m,1)}i.length&&console.error(`Removed history items, ${l.join(",")}`);try{return Od.parse(e)}catch(d){let m=d;throw Z.captureError(m,te.History),m}}},"fetchActivityItems");var bg=3e5,Ho="fetch-infinite-activity-items",Bd=n(({accounts:t,isSpam:e})=>[Ho,t,e],"infiniteActivityItemsQueryKey"),Sg=n((t,e)=>{t.removeQueries({queryKey:e})},"bustCache"),Hs=n(({accounts:t,isSpam:e})=>{let r=Ce();(0,Dd.useEffect)(()=>()=>{r.cancelQueries({queryKey:[Ho],exact:!1}).catch(s=>{Z.addBreadcrumb(te.History,"[useFetchInfiniteActivityItems] Failed to cancel queries",qt.Error,{error:String(s)})})},[r]);let o=Bd({accounts:t,isSpam:e});return Zc({queryKey:o,queryFn:n(async({pageParam:s})=>{try{let l;s&&s!==""?l=await zs({next:s,isSpam:e}):l=await zs({accounts:t||[],isSpam:e});let u=l.results.map(d=>(d.interactionData.transactionType==="TOKEN_SEND"&&d.interactionData.balanceChanges.sort(Cg(t)),d));return{...l,results:u}}catch(l){throw l instanceof zo&&Sg(r,o),Z.captureError(l,te.History),l}},"queryFn"),getNextPageParam:n(s=>s?.next,"getNextPageParam"),staleTime:bg,retry:!1,enabled:!!t?.length&&t.every(s=>!B.isLocalNetworkID(s.chainId)),initialPageParam:""})},"useFetchInfiniteActivityItems");function Cg(t){return(e,r)=>{let o=Md(e,t),i=Md(r,t);return o?-1:i?1:0}}n(Cg,"balanceChangeSort");function Md(t,e){let r=t.to.split("/address:")[1],o=t.from.split("/address:")[1];return e.some(i=>i.address.toLowerCase()===r.toLowerCase()||i.address.toLowerCase()===o.toLowerCase())}n(Md,"findRelevantTransfers");var wg=n(({fungible:t,isSpam:e=!1})=>{let{data:r=rl,status:o}=ul(),i=r.isDeveloperMode,s=js(t),{data:l}=Qr({address:t?.data.walletAddress,networkID:t?.data.chain.id}),u=(0,Ld.useMemo)(()=>Us(l?[l]:[],t?.data.chain.id,s),[l,t?.data.chain.id,s]),d=Hs({accounts:u,isSpam:e}),m=d.isPending||o==="pending";return{activityItemsData:d,isLoadingHistory:m,isDeveloperMode:i}},"useFungibleActivityByFungible");a();c();a();c();var Gs=I(Fh(),1);function Yn(t){let e=[oo.MasterEditionV1,oo.MasterEditionV2],r=Kn.safeParse(t);return r.success&&e.includes(r.data)}n(Yn,"isMasterEdition");var Ks=Gs.Buffer.from("metadata"),Tg=Gs.Buffer.from("edition"),qs=Bo.toBuffer();function vA(t){let[e]=j.PublicKey.findProgramAddressSync([Ks,qs,t],Bo);return e}n(vA,"getMetadataPDA");function Fd(t){let[e]=j.PublicKey.findProgramAddressSync([Ks,qs,t,Tg],Bo);return e}n(Fd,"getMasterEditionPDA");function kA(t){let[e]=j.PublicKey.findProgramAddressSync([Ks,qs,t],Bo);return e}n(kA,"getCollectionMetadataPDA");var xg="CollectibleEdition";function Ag(t,e){return be({queryKey:[xg,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new j.PublicKey(t).toBytes()),o=Fd(r),{Edition:i}=await Il();try{let s=await i.fromAccountAddress(e,o),l=Kn.safeParse(s.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${s.key}`);return{key:l.data,isMasterEdition:Yn(s.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}n(Ag,"useCollectibleEdition");a();c();function Ie(t){return t?.tokenAccount!==void 0}n(Ie,"isSolanaCollectibleChainData");function xt(t){return t?.contract!==void 0}n(xt,"isEvmCollectibleChainData");function er(t){return t!==void 0&&"firstCreatedTransactionHash"in t}n(er,"isBitcoinCollectibleChainData");function Nd(t){return t!==void 0&&"objectId"in t}n(Nd,"isSuiCollectibleChainData");function Ud(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}n(Ud,"isBitcoinOrdinalCollectibleChainData");a();c();var st=I(R(),1);a();c();a();c();var Ze="collectibles",Qs=[Ze,"collectibleBids"],ae={collections:n(t=>[Ze,"collections",{addresses:t.map(No)}],"collections"),hiddenCollections:n(t=>[Ze,"hiddenCollections",t],"hiddenCollections"),unhiddenCollections:n(t=>[Ze,"unhiddenCollections",t],"unhiddenCollections"),visibilityOverrides:n(t=>[Ze,"visibilityOverrides",t],"visibilityOverrides"),pinnedCollections:n(t=>[Ze,"pinnedCollections",t],"pinnedCollections"),topCollections:n(t=>[Ze,"topCollections",{addresses:t.map(No)}],"topCollections"),optimisticUpdates:n(()=>[Ze,"optimisticUpdates"],"optimisticUpdates"),collectibleBids:n(t=>[...Qs,t],"collectibleBids"),collectibleMintGasEstimation:n(t=>[Ze,"mintNFTGasEstimation",t],"collectibleMintGasEstimation"),collectibleSellSteps:n(t=>[Ze,"collectibleSellSteps",t],"collectibleSellSteps"),createMintTransaction:n(t=>[Ze,"createMintTransaction",t],"createMintTransaction"),transferTransaction:n(t=>[Ze,"transferTransaction",t],"transferTransaction")};var Xn=n((t,e)=>{t.invalidateQueries({queryKey:Qs}),t.invalidateQueries({predicate:n(({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId,"predicate")})},"invalidateBidsAndSellSteps");a();c();var Eg=20;function io(t,e){let r=ae.optimisticUpdates(),o=t.getQueryData(r)??[];t.setQueryData(r,[...o,e])}n(io,"pushOptimisticUpdate");async function jd(t,e){let r=ae.optimisticUpdates(),o=await t.getQueryState(r);if(o){let i=e??Date.now(),s=o.dataUpdatedAt,l=G({seconds:Eg});return i-s>l?(t.removeQueries({queryKey:r}),[]):o?.data??[]}else return[]}n(jd,"getOptimisticUpdates");function Vd(t,e){let r=e.reduce((o,i)=>{let{id:s,amount:l}=i,u=new q(l);return o[s]=(o[s]??new q(0)).plus(u),o},{});for(let o of t)o.items=o.items.reduce((i,s)=>{let l=s.id,u=r[l];if(u){let d=new q(s.balance??0);return d.minus(u).isGreaterThan(0)?i.concat({...s,balance:d.minus(u).toString()}):i}else return i.concat(s)},[]);return t=t.filter(o=>o.items.length>0),t}n(Vd,"applyOptimisticUpdates");var Ig=n(()=>{let{data:t}=bt();return(0,st.useMemo)(()=>{let e=t?.identifier??"",r=t?.type===In.Ledger,o=t?.addresses??[],i=o.find(Hc),s=i?.networkID,l=i?.address??"",u=_l(s),d=Pl(u);return{accountIdentifier:e,chainAddresses:o,chainId:s,solanaPublicKey:l,isLedger:r,cluster:u,connection:d}},[t])},"useAccountMetadata"),vg=n((t,e)=>{let[r,o]=(0,st.useState)(void 0);return(0,st.useEffect)(()=>{n(async()=>{if(!t)return;let l=t.find(f=>f.type==="transaction")?.data?.transaction;if(!l)return;let u=is(l,"base64"),d=await Vl(e,[u.message]),m=$c(d.value);o(m)},"processEncodedTx")()},[t,e]),r},"useSolanaGasEstimation"),kg=n(async(t,e,r,o,i,s)=>{if(!s)throw new Error("Bid summary is required");let{collectionName:l,marketplace:u,receiveAmount:d,currencySymbol:m}=s,f={topRight:{text:`+${d} ${m}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:Pn(u)}},{data:y,chainId:w,type:S}=e,{transaction:b}=y,C=is(b,"base64"),T={ownerAddress:r.solanaPublicKey,networkID:w,data:{signature:""},type:Mn.Sell,display:{summary:f}},{accountIdentifier:x,solanaPublicKey:A,connection:E}=r,P=new j.PublicKey(A),D=await zl({accountIdentifier:x,feePayer:P,transaction:C,pendingTransactionInput:T,connection:E,accountSigner:o,storage:i,opts:{skipPreflight:!0}});return{type:S,data:D}},"executeTransactionStep"),Rg="Steps are required",Og="These steps are not from the same bid",Jn=class extends Error{static{n(this,"StepsRequiredError")}message=Rg},Zn=class extends Error{static{n(this,"StepsFromDifferentBidError")}message=Og},Pg=n((t,e,r,o)=>{let i=Kr(),s=Q(),l=Ce(),u=qr(),[d,m]=(0,st.useState)("idle"),[f,y]=(0,st.useState)(null),[w,S]=(0,st.useState)(null),{t:b}=N(),C=Ig(),{chainId:T,connection:x,chainAddresses:A,isLedger:E}=C,P=T&&B.isSolanaNetworkID(T)?T:Cn.Solana.Mainnet,D=vg(e,P);(0,st.useEffect)(n(function(){d==="loading"&&Xn(l,r)},"invalidateQueriesOnLoading"),[d,l,r]),(0,st.useEffect)(n(function(){d==="success"&&r&&io(l,{id:r.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[d,l,A,r]);let re=n(()=>{m("idle"),y(null),S(null)},"reset"),F=o&&r?.receiveAmount?r.receiveAmount*o:void 0;return{executeSellSolanaSteps:n(async()=>{try{if(t&&t!==r?.orderId)throw new Zn;if(!Array.isArray(e)||e.length===0)throw new Jn;m("loading");for await(let Y of e){let Ke=await kg(b,Y,C,u,i,r);S(Ke.data),await $l({connection:x,signature:Ke.data})}m("success"),s.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:F}})}catch(Y){let Ke=Y?.message??"";(!(Y instanceof Jn)||!(Y instanceof Zn))&&(Z.captureError(Y,te.Collectibles),s.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:F,errorMessage:Ke}})),m("error"),y(Y)}},"executeSellSolanaSteps"),reset:re,gas:D,error:f,result:w,status:d,isLedger:E}},"useInstantSellExecuteSolanaSteps");a();c();var vE=n(t=>`${t/100}%`,"bpsToPercent"),$d=n((t,e)=>t*e/100/100,"bpsToValue");a();c();var Qd=I(cs(),1),co=I(R(),1);a();c();a();c();var tr=n((t,e,r,o)=>{(!e||e>=400&&e<500)&&(Z.addBreadcrumb(r,t.message,qt.Info,o),Z.captureError(t,te.Collectibles))},"captureClientError");a();c();var ei;(function(t){t[t.Always=1/0]="Always",t[t.Short=G({days:1})]="Short",t[t.Medium=G({days:3})]="Medium",t[t.Long=G({days:7})]="Long"})(ei||(ei={}));var rr;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=G({minutes:1})]="Short",t[t.Medium=G({minutes:2.5})]="Medium",t[t.Long=G({minutes:5})]="Long",t[t.Never=1/0]="Never"})(rr||(rr={}));var so;(function(t){t[t.Shortest=G({seconds:10})]="Shortest",t[t.Shorter=G({seconds:30})]="Shorter",t[t.Short=G({minutes:1})]="Short",t[t.Medium=G({minutes:2.5})]="Medium",t[t.Long=G({minutes:5})]="Long",t[t.Longer=G({minutes:7.5})]="Longer",t[t.Longest=G({minutes:10})]="Longest"})(so||(so={}));var _g=p.object({caip19:p.string(),name:p.string(),symbol:p.string()}),Mg=p.object({bps:p.number(),kind:p.union([p.literal("marketplace"),p.literal("royalty")]),recipient:p.string().optional()}),Dg=p.object({amount:p.number(),feeBreakdown:p.array(Mg),netAmount:p.number(),token:_g,totalFeeBps:p.number()}),Bg=p.object({name:p.string(),logo:p.string(),url:p.string().optional()}),Lg=p.object({id:p.string(),expiration:p.string().optional(),price:Dg,source:Bg}),Fg=p.object({bids:p.array(Lg)}),zd=new Tt("Failed to fetch collectible bids."),Ng="collectible-instant-sell-bids",Ug=n(async t=>{if(!t.address)throw zd;try{let e=await se.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=Fg.parse(e.data);return r}catch(e){if(Qt(e)){let r=e.response?.status;tr(e,r,Ng)}throw zd}},"getCollectibleBids"),Hd=n(({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return be({enabled:r,staleTime:rr.Short,refetchInterval:so.Shortest,queryKey:ae.collectibleBids(t),async queryFn(){return Ug(t)}})},"useCollectibleBids"),Gd=n(t=>{let e=t?.chainData,r=t?.chain.id??null,o=xt(e),i=Ie(e),s=o?{tokenId:e.id}:{},l=i?{contractType:e.standard}:{},u=o?e.contract.toLowerCase():i?e.mint:null;return{chainId:r,address:u,resourceType:"address",...s,...l}},"createBidAsset");a();c();var jg=I(R(),1);var Se=p.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Vg=p.enum(["/execute/auth-signature/v1","/order/v3"]),At=p.enum(["transaction","signature","post","refetch"]),$g=p.enum(["eip712","eip191"]),zg=p.object({domain:p.any(),types:p.any(),value:p.any()}),Hg=p.object({message:p.string()}),Gg=p.object({from:p.string(),to:p.string(),data:p.string()}),Kg=p.object({endpoint:Vg,body:p.object({id:p.string(),kind:p.string()})}),qg=p.object({action:Se,chainId:Sn,type:p.literal(At.enum.signature),data:p.object({signatureKind:$g,signatureData:p.union([Hg,zg]),postData:Kg})}),Qg=p.object({chainId:Sn,action:Se,data:Gg,type:p.literal(At.enum.transaction)}),Wg=p.object({chainId:Sn,action:Se,type:p.literal(At.enum.refetch),data:p.object({resource:p.string()})}),Yg=p.union([qg,Qg,Wg]),Xg=p.object({action:Se,chainId:jc,type:p.literal(At.enum.transaction),data:p.object({transaction:p.string()})}),Jg=p.union([Yg,Xg]),Zg=p.object({steps:p.array(Jg),orderId:p.string().optional()}),ey=new Tt("Failed to fetch collectible sell steps."),ty="collectible-instant-sell-steps",ry=n(async t=>{try{let e=await se.api().validateStatus(!0).post("/collectibles/v1/sell",t);return Zg.parse(e.data)}catch(e){if(Qt(e)){let r=e.response?.status;if(tr(e,r,ty),e.response?.data?.code){let{code:o}=e.response.data;throw{code:o}}if(r)throw e}throw ey}},"getCollectibleSellSteps"),Kd=n(({sellAsset:t})=>{let e=t.details.orderId!==void 0;return be({enabled:e,queryKey:ae.collectibleSellSteps(t),staleTime:rr.Never,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:n((r,o)=>o.code?!1:r<3,"retry"),async queryFn(){return ry(t)}})},"useCollectibleSellSteps");var qd=n((t,e,r)=>{let o=r?.chainData,i=xt(o),s=Ie(o),l=r?.owner,u=i?l?.toLowerCase():l,d=e?.id,m=e?.source?.name,f=s?{minPrice:e?.price?.netAmount,tokenAccount:o.tokenAccount}:{};return{details:{asset:t,owner:u,orderId:d,marketplace:m,...f}}},"createSellAsset");a();c();Le.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var ao=n((t,e)=>new Le(t).div(On(e)).toNumber(),"amountToBalance");var oy={steps:[],orderId:""},ny=n(({collectible:t})=>{let{t:e}=N(),r=(0,co.useMemo)(()=>Gd(t),[t]),{data:o=[],isPending:i,isError:s}=Hd({bidAsset:r,isEnabled:!0}),l=(0,co.useMemo)(()=>o.length>0?o[0]:void 0,[o]),u=(0,co.useMemo)(()=>qd(r,l,t),[r,l,t]),{data:d=oy,isPending:m,isError:f,refetch:y,error:w}=Kd({sellAsset:u}),S=(0,co.useMemo)(()=>l&&t?Wd({t:e,bid:l,collectible:t}):void 0,[e,l,t]),b=(0,co.useMemo)(()=>f?Number.isInteger(w.code):!1,[f,w]);return{bid:l,bidSummary:S,isLoadingBids:i,isErrorBids:s,sellSteps:d,isLoadingSellSteps:m,isErrorSellSteps:f,refetchSellSteps:y,sellStepsError:w,isSellErrorCode:b}},"useInstantSell"),iy=n(({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,"calculatePNL"),sy=n(({offerAmount:t,collectionFloor:e})=>t-e,"calculateFloorDifference"),ay=n(t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,Qd.default)(t).format(e);return`${t>0?"+":""}${r}`},"getFloorDifferencePercentage"),cy=n(t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return ao(e,o)}},"parseCollectionFloor"),ly=n(t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return ao(e,o)}},"parseLastSale"),uy=n(t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large},"getCollectibleImagePreview"),lo;(function(t){t.BLUR="Blur"})(lo||(lo={}));var Wd=n(({bid:t,collectible:e,t:r})=>{let{lastSalePrice:o,media:i,name:s,collection:l}=e,{name:u,logo:d}=t.source,{amount:m,netAmount:f,feeBreakdown:y,token:w,totalFeeBps:S}=t.price,{symbol:b,caip19:C}=w,T=0,x=f,A=l.id,E=e.id,P=ly(o),D=b.slice(0,6),re=e.chain.symbol,F=cy(l.floorPrice),$=F?sy({offerAmount:m,collectionFloor:F}):void 0,Y=$?ay($):void 0;return{bidTokenSymbol:D,caip19:C,collectionId:A,collectibleId:E,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:re,collectionFloor:F,collectibleImage:uy(i),collectibleName:s??r("collectiblesUnknownCollectible"),collectionName:l.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name===lo.BLUR?re:D,fees:y,floorDifference:$,floorDifferencePercent:Y,lastSale:P,marketplace:u,marketplaceLogoURL:d,offerAmount:m,offerAmountFormatted:Rn(m),phantomFeePercentage:T,pnl:iy({lastSale:P,receiveAmount:x}),receiveAmount:x,receiveAmountFormatted:Rn(x),totalFeeBps:S}},"parseBidSummary"),dy=n(({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let o=$d(e,r)+t.toNumber();return{raw:o,formatted:Rn(o)}},"formatEstimatedFees");a();c();var Yd=new Map([[Se.enum["nft-approval"],8e4],[Se.enum["blur-swap"],42e3],[Se.enum.sale,39e4],["default",42e4]]),py=n((t,e,r,o)=>{let i=t===lo.BLUR,s=r.filter(C=>C.type==="transaction").map(({action:C})=>({action:C}));if(s.some(({action:C})=>C===Se.enum["nft-approval"])||(s=[...s,{action:Se.enum["nft-approval"]}]),i){let C=s.some(({action:x})=>x===Se.enum.sale),T=s.some(({action:x})=>x===Se.enum["blur-swap"]);C||(s=[...s,{action:Se.enum.sale}]),T||(s=[...s,{action:Se.enum["blur-swap"]}])}let u=s?.reduce((C,{action:T})=>{let x=Yd.get(T)??Yd.get("default");return C+(x??0)},0),d=new q(u),{status:m,data:f}=du({gasLimit:d,networkID:e,transactionSpeed:Yr.standard}),{data:y}=pu(e,f),w=Ol(f),S=Number(w?.replace(/[^\d.]/g,"")??0),b=o?o.isGreaterThan(S):!1;return{gasEvm:S,gasEstimation:f,gasEstimationStatus:m,ethFeeUI:w,gasEstimationPrice:y,hasEnoughGas:b}},"useInstantSellEvmGasEstimation");a();c();var Mt=I(R(),1);var my=n(()=>{let{data:t}=bt();return(0,Mt.useMemo)(()=>{let e=t?.type,r=t?.name??"",o=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type===In.Ledger,accountName:r,accountType:e,chainAddresses:o,accountIdentifier:i}},[t])},"useAccountMetadata"),fy=n(({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:o,accountSigner:i,storage:s,includeCallPayload:l})=>({accountSigner:i,accountIdentifier:o,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:Mn.Sell,display:{summary:r}},storage:s}),"buildArgs"),hy=n(async(t,e,r,o,i,s,l)=>{try{if(!r)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:u,chainId:d,action:m}=e,{collectionName:f,marketplace:y,receiveAmount:w,currencySymbol:S,collectibleChainSymbol:b,bidTokenSymbol:C}=l,T=Pn(y),x={};m==="nft-approval"&&(x={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:f})},bottomLeft:{text:T}}),m==="sale"&&(x={topRight:{text:`+${w} ${S}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${f}`},bottomLeft:{text:T}}),m==="blur-swap"&&(x={topRight:{text:`+${w} ${b}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${w} ${C}`},bottomLeft:{text:T}});let A=Hr.parse({type:zr.eip1559,to:u.to,from:u.from,data:u.data,chainId:B.getEVMNetworkIDValue(d),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),E=fy({storage:o,accountSigner:i,pendingActivityRows:x,includeCallPayload:!1,networkID:d,unsignedTransaction:A,accountIdentifier:s.accountIdentifier}),P=await Ll(E);return{type:e.type,data:P}}catch(u){return{type:e.type,error:u}}},"executeTransactionStep"),gy=n(async(t,e,r)=>{try{let{chainId:o,data:i}=t,{signatureData:s,signatureKind:l,postData:u}=i;if(l==="eip191"&&"message"in s){let d=await e.sign(r.accountIdentifier,{signingType:"message",chainType:bn.EVM,message:s.message});if(d.status==="success")return await se.api().post("/collectibles/v1/submit-signature",{chainId:o,signature:d.signature,postData:u}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(o){return{type:t.type,error:o}}},"executeSignatureStep"),yy=n(async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:o}=await e();return{type:t.type,data:o?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},"executeRefetchSteps"),by=[Se.enum.auth,Se.enum["nft-approval"],Se.enum.sale],Sy="Steps are required",Cy="These steps are not from the same bid",ti=class extends Error{static{n(this,"StepsRequiredError")}message=Sy},ri=class extends Error{static{n(this,"StepsFromDifferentBidError")}message=Cy},wy=n((t,e,r,o,i,s,l)=>{let u=Kr(),d=Q(),m=Ce(),f=qr(),[y,w]=(0,Mt.useState)("idle"),[S,b]=(0,Mt.useState)(null),[C,T]=(0,Mt.useState)(null),{t:x}=N(),A=my(),{chainAddresses:E,isLedger:P}=A;(0,Mt.useEffect)(n(function(){y==="loading"&&Xn(m,i)},"invalidateQueriesOnLoading"),[y,m,i]),(0,Mt.useEffect)(n(function(){y==="success"&&i&&io(m,{id:i.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[y,m,E,i]);let D=n(()=>{w("idle"),b(null),T(null)},"reset"),re=l&&i?.receiveAmount?i.receiveAmount*l:void 0,F=n(async($,Y=new Map)=>{let Ke=$??e;try{if(t&&t!==""&&t!==i?.orderId)throw new ri;if(!Array.isArray(Ke)||Ke.length===0)throw new ti;w("loading");for await(let Pe of Ke){let{action:qe}=Pe,hn=Y.get(qe)==="success",rs=qe===Se.enum.sale,gn=qe===Se.enum.refetch,yn=by.some(pe=>pe===qe);if(hn)continue;gn||Y.set(qe,"loading");let os=n(async pe=>{switch(pe.type){case At.enum.transaction:return await hy(x,pe,r,u,f,A,i);case At.enum.signature:return await gy(pe,f,A);case At.enum.refetch:return await yy(pe,o)}},"handleStep"),{type:Ht,data:Po,error:X}=await os(Pe);if(yn&&X)throw X;if(Po&&(gn||Y.set(qe,"success"),Ht===At.enum.transaction&&rs&&T(Po),Ht===At.enum.refetch))return await al(500),await F(Po,Y)}w("success"),d.capture("collectibleSellSuccess",{data:{bidSummary:i,usdSaleValue:re}})}catch(Pe){let qe=Pe?.message??"";(!(Pe instanceof ti)||!(Pe instanceof ri))&&(Z.captureError(Pe,te.Collectibles),d.capture("collectibleSellFailure",{data:{bidSummary:i,usdSaleValue:re,errorMessage:qe}})),w("error"),b(Pe)}},"executeSellEvmSteps");return{executeSellEvmSteps:F,reset:D,error:S,result:C,status:y,isLedger:P}},"useInstantSellExecuteEvmSteps");a();c();var Ty=.01,xy=n(t=>{let{fungible:e}=yu({key:ou(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(Ty):!1}},"useInstantSellSolanaGasEstimation");a();c();var nr=I(R(),1);a();c();var Ws=I(R(),1);a();c();a();c();var Xd=n(t=>{let e=!1;return{collectibles:t.reduce((o,i)=>{let s=ys.safeParse(i);return s.success?o.push(s.data):e=!0,o},[]),containsParseFailure:e}},"parseCollectiblesResponse");var Ay="collectibles",Ey=new Error("Failed to fetch collectibles for addresses");async function Jd(t){let e="/collectibles/v1";try{let o=(await se.api().post(e,{addresses:t})).data,i=!!o.isTrimmed;if(!o.collectibles)throw Ey;let{collectibles:s,containsParseFailure:l}=Xd(o.collectibles);return l&&Z.captureError(new Error("collectibles failed to parse some items"),te.Collectibles),{allCollectibles:s,isTrimmed:i}}catch(r){if(Qt(r)){let o=r.response?.status;tr(r,o,Ay)}throw r}}n(Jd,"getCollectibles");a();c();a();c();var ep=n(t=>{let e=[];for(let[r,o]of t){o.sort((s,l)=>{let u=Mo((s.name??"").toLowerCase()),d=Mo((l.name??"").toLowerCase());if(u<d)return-1;if(u>d)return 1;let m=Zd(s),f=Zd(l);return m<f?-1:m>f?1:0});let[i]=o;i&&e.push({..."externalUrl"in i?{externalUrl:i.externalUrl}:void 0,...i.collection,items:o})}return e.sort((r,o)=>{if(r.items.length>o.items.length)return-1;if(o.items.length>r.items.length)return 1;let i=Mo((r.name??r.id??"").toLowerCase()),s=Mo((o.name??o.id??"").toLowerCase());return i<s?-1:i>s?1:0})},"sortCollections");function Zd(t){let e=t.chainData;return Ie(e)?e.tokenAccount:xt(e)?e.id:(er(e),t.id)}n(Zd,"extractChainDataSortKey");function tp(t){let e=new Map;for(let r of t){let o=r.collection.id,i=e.get(o)??[];i.push(r),e.set(o,i)}return ep(e)}n(tp,"mapCollectiblesToCollections");var rp=n(({addresses:t,queryOptions:e={staleTime:rr.Short,refetchInterval:so.Long,enabled:!0},select:r})=>{let o=Ce(),i=ae.collections(t),s=t.length!==0&&t.every(l=>!B.isLocalNetworkID(l.networkID));return be({enabled:s&&e.enabled,queryKey:i,gcTime:ei.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[u]=await Promise.allSettled([Jd(l)]);if(u.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:d,isTrimmed:m}=u.status==="fulfilled"?u.value:{allCollectibles:[],isTrimmed:!1},f=tp(d),y=await jd(o),w=Vd(f,y);return{items:w,nrOfItems:w.reduce((S,b)=>S+b.items.length,0),isTrimmed:m}},select:r})},"useCollectionsQuery"),xr=n(t=>rp({...t,select:(0,Ws.useCallback)(e=>e.items,[])}),"useCollections"),Iy=n(t=>rp({...t,select:(0,Ws.useCallback)(r=>r.isTrimmed,[])}).data??!1,"useCollectionsAreTrimmed");a();c();var Oe=I(R(),1);a();c();var Er=I(R(),1);a();c();var sp=I(R(),1);a();c();var ip=I(R(),1);a();c();var me;(function(t){t.AccountIdToVisibilitySettings="accountIdToCollectibleVisibilitySettings",t.HiddenCollections="hiddenCollections",t.PinnedCollections="pinnedCollections",t.UnhiddenCollections="unhiddenCollections"})(me||(me={}));var op=2,vy=p.object({version:p.literal(op),value:p.record(p.array(p.object({id:p.string(),status:p.nativeEnum(oe)})))}),ky=n((t,e)=>{let r=e,o=t;return r||o||null},"visibilityOverridesResolver"),Ry=p.record(p.array(p.string())),np=n((t,e)=>{let r=e,o=t;return r||o||null},"pinnedCollectionsResolver"),Oy=n(t=>{let e=t[me.HiddenCollections],r=t[me.UnhiddenCollections];if(!e&&!r)return null;let o={};return e&&Object.entries(e).forEach(([i,s])=>{o[i]||(o[i]=[]),s.forEach(l=>{o[i].push({id:l,status:oe.Hidden})})}),r&&Object.entries(r).forEach(([i,s])=>{o[i]||(o[i]=[]);let l=new Set(o[i].map(u=>u.id));s.forEach(u=>{l.has(u)||o[i].push({id:u,status:oe.Visible})})}),{version:op,value:o}},"migrateVisibilityOverrides"),Py=n(t=>t[me.PinnedCollections]??null,"migratePinnedCollections"),[_y,oi,ni]=Wc("collectibles",[{key:me.AccountIdToVisibilitySettings,type:"object",validator:vy,nullable:!0,resolver:ky,updateOn:"idle"},{key:me.PinnedCollections,type:"object",validator:Ry,nullable:!0,resolver:np,updateOn:"idle"}]),Xv=[{legacyKeys:[me.HiddenCollections,me.UnhiddenCollections],targetSchema:"collectibles",targetKey:me.AccountIdToVisibilitySettings,migrate:Oy},{legacyKeys:[me.PinnedCollections],targetSchema:"collectibles",targetKey:me.PinnedCollections,migrate:Py}],ii=n((...t)=>Qc(_y,...t),"useCollectiblesStorage");var Jv={...Yc(me.PinnedCollections,["collectibles","pinnedCollections"],np)};var My=2e3,uo=class extends Tt{static{n(this,"UseSetCollectionVisibilityError")}constructor(e){super(e),this.name="UseSetCollectionVisibilityError"}};function Dy(t,e,r){let o=Object.values(t.value).reduce((s,l)=>s+l.length,0),i=r.filter(({id:s,visibility:l})=>l!==null&&!t.value[e]?.some(u=>u.id===s));if(i.length>0&&o+i.length>My){let s=i.some(l=>l.visibility===oe.Hidden||l.visibility===oe.HiddenSpam);throw new uo(s?"Too many ids hidden":"Too many ids unhidden")}}n(Dy,"checkVisibilityOverrideLimit");function By(t,e){let r=new Map(t.map(o=>[o.id,o]));for(let{id:o,visibility:i}of e)i===null?r.delete(o):r.set(o,{id:o,status:i});return Array.from(r.values())}n(By,"applyMutationsToMap");function Ly(t,e){for(let{id:r,visibility:o}of t)o!==null&&e.capture(o.includes("hidden")?"collectionHidden":"collectionUnhidden",{data:{id:r}})}n(Ly,"captureVisibilityAnalytics");function si(t){let e=Q(),r=Ce();return(0,ip.useCallback)(async(o,i)=>{let s=i?.checkLimit??!1;if(!t)return;let l=await ni(me.AccountIdToVisibilitySettings)??{version:2,value:{}};s&&Dy(l,t,o);let u=l.value[t]??[],d=By(u,o),m={...l.value,[t]:d};await oi(me.AccountIdToVisibilitySettings)({version:2,value:m}),Ly(o,e),await Promise.allSettled([r.invalidateQueries({queryKey:ae.visibilityOverrides(t)}),r.invalidateQueries({queryKey:ae.hiddenCollections(t)}),r.invalidateQueries({queryKey:ae.unhiddenCollections(t)})])},[t,e,r])}n(si,"useSetCollectionVisibility");function Ar(t){let e=si(t);return(0,sp.useCallback)(async r=>{let o=r.map(({id:i,visibility:s})=>({id:i,visibility:s}));await e(o,{checkLimit:!1})},[e])}n(Ar,"useSetVisibilityOverrides");a();c();var ap=I(R(),1);function Re(t){let e=ii(me.AccountIdToVisibilitySettings);return{data:(0,ap.useMemo)(()=>{if(!t)return new Map;let i=e?.value?.[t]??[];return new Map(i.map(s=>[s.id,s]))},[t,e]),isPending:!!t&&e===void 0}}n(Re,"useVisibilityOverrides");async function ai({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:i,onSuccess:s,onError:l}){if(!o)return;let u=t.collection.id||t.id,d=e.get(u)?.status;try{let m=lp(i,t.collection);await r([{id:u,visibility:m}]),await s({collectible:t,desiredVisibility:i,previousVisibility:d,updatedVisibility:m})}catch(m){await l(m,{collectible:t,desiredVisibility:i})}}n(ai,"handleChangeVisibilityForCollectible");async function cp({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:i,onSuccess:s,onError:l}){if(!o)return;let u=t.id,d=e.get(u)?.status;try{let m=lp(i,t);await r([{id:u,visibility:m}]),s&&await s({collection:t,desiredVisibility:i,previousVisibility:d,updatedVisibility:m})}catch(m){l&&await l(m,{collection:t,desiredVisibility:i})}}n(cp,"handleChangeVisibilityForCollection");function lp(t,e){let{spamStatus:r}=e,o=ql({minimum:ge.NotVerified,spamStatus:r});switch(t){case oe.HiddenSpam:if(o)return oe.HiddenSpam;if(r===ge.PossibleSpam||r===ge.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case oe.VisibleNotSpam:if(o)return null;if(r===ge.PossibleSpam||r===ge.Spam)return oe.VisibleNotSpam;throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case oe.Hidden:if(o)return oe.Hidden;if(r===ge.PossibleSpam||r===ge.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case oe.Visible:if(o)return null;if(r===ge.PossibleSpam||r===ge.Spam)return oe.Visible;throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}n(lp,"calculateNewVisibility");function or(t){return{networkId:t.chain.id,chainId:B.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}n(or,"computeCollectibleAnalyticsPayload");function up({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await ai({collectible:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.HiddenSpam,onSuccess:r,onError:e})},[o,i,t,e,r])}n(up,"useMarkAsSpam");function dp({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await ai({collectible:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.VisibleNotSpam,onSuccess:r,onError:e})},[o,i,t,e,r])}n(dp,"useMarkAsNotSpam");function pp({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await ai({collectible:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.Hidden,onSuccess:r,onError:e})},[o,i,t,e,r])}n(pp,"useMarkAsHidden");function mp({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await ai({collectible:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.Visible,onSuccess:r,onError:e})},[o,i,t,e,r])}n(mp,"useMarkAsVisible");function fp({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await cp({collection:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.Hidden,onSuccess:r,onError:e})},[o,i,t,e,r])}n(fp,"useMarkCollectionAsHidden");function hp({accountId:t,onError:e,onSuccess:r}){let{data:o}=Re(t),i=Ar(t);return(0,Er.useCallback)(async s=>{await cp({collection:s,visibilityOverrides:o,setVisibilityOverrides:i,accountId:t,desiredVisibility:oe.Visible,onSuccess:r,onError:e})},[o,i,t,e,r])}n(hp,"useMarkCollectionAsVisible");a();c();var Ys=I(R(),1);var gp=n(({toast:t,accountId:e})=>{let{t:r}=N(),o=Q(),i=(0,Ys.useCallback)(({collectible:l,updatedVisibility:u})=>{u!==null&&o.capture("collectionHidden",{data:or(l)}),t&&t.success(r("collectionHideSuccess"))},[r,t,o]),s=(0,Ys.useCallback)((l,u)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return pp({accountId:e,onSuccess:i,onError:s})},"useHideCollectible");a();c();var Xs=I(R(),1);var yp=n(({toast:t,accountId:e})=>{let{t:r}=N(),o=Q(),i=(0,Xs.useCallback)(({collectible:l,updatedVisibility:u})=>{u!==null&&o.capture("collectionUnhidden",{data:or(l)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,o]),s=(0,Xs.useCallback)((l,u)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return mp({accountId:e,onSuccess:i,onError:s})},"useUnhideCollectible");function Fy({accountId:t,collectible:e,toast:r}){let o=gp({accountId:t,toast:r}),i=(0,Oe.useCallback)(()=>{if(e)return o(e)},[o,e]),s=yp({accountId:t,toast:r}),l=(0,Oe.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=Re(t),d=(0,Oe.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),m=(0,Oe.useMemo)(()=>e?jn(d,{spamStatus:e.collection.spamStatus}):!1,[e,d]),f=(0,Oe.useCallback)(()=>m?l():i(),[m,i,l]);return(0,Oe.useMemo)(()=>({isHidden:m,onHideCollectible:i,onUnhideCollectible:l,onToggleHide:f}),[i,f,l,m])}n(Fy,"useCollectiblesHideUnhide");function Ny(t){let{data:e,isPending:r}=Re(t),o=(0,Oe.useCallback)(l=>{if(!l)return!1;let u=l.collection.id||l.id;return ps(e,{spamStatus:l.collection.spamStatus,key:u})},[e]),i=(0,Oe.useCallback)(l=>{if(!l)return ge.NotVerified;let u=l.collection.id||l.id;return ds(e,{spamStatus:l.collection.spamStatus,key:u})},[e]),s=(0,Oe.useCallback)(l=>Uo(i(l)),[i]);return(0,Oe.useMemo)(()=>({getIsHidden:o,getSpamStatus:i,getIsSpam:s,isLoading:r}),[o,i,s,r])}n(Ny,"useGetCollectibleVisibilityStatus");function bp(t){let{data:e,isPending:r}=Re(t),o=(0,Oe.useCallback)(l=>{if(!l)return!1;let u=l.id;return ps(e,{spamStatus:l.spamStatus,key:u})},[e]),i=(0,Oe.useCallback)(l=>{if(!l)return ge.NotVerified;let u=l.id;return ds(e,{spamStatus:l.spamStatus,key:u})},[e]),s=(0,Oe.useCallback)(l=>Uo(i(l)),[i]);return(0,Oe.useMemo)(()=>({getIsHidden:o,getSpamStatus:i,getIsSpam:s,isLoading:r}),[o,i,s,r])}n(bp,"useGetCollectionVisibilityStatus");function Sp(t){let e=bp(t),r=fp({accountId:t}),o=hp({accountId:t});return(0,Oe.useMemo)(()=>({...e,hideCollection:r,unhideCollection:o}),[e,r,o])}n(Sp,"useCollectionVisibilityOverrides");a();c();var Cp=I(R(),1);var Uy=n(t=>t.reduce((e,r)=>({...e,[r]:1}),{}),"convertIdArrayToObj");function Js({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o}){let i=[],s=[],l=[],u=[],d=Uy(e),m={};for(let y of t)o(y)&&r(y)?u.push(y):r(y)?s.push(y):d[y.id]?m[y.id]=y:o(y)?l.push(y):i.push(y);let f=[];for(let y of e)m[y]&&f.push(m[y]);return{collections:[...f,...i,...l],hiddenCollections:s,spamCollections:u}}n(Js,"orderedCollections");var jy=n(({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o})=>(0,Cp.useMemo)(()=>Js({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:o}),[t,r,o,e]),"useOrderedCollections");a();c();var ci=I(R(),1);var Zs={location:0,distance:50,threshold:.3},iR={...Zs,keys:["name"]},sR={...Zs,keys:["name"]},aR={...Zs,keys:["name"]},Go=n((t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(o=>o.startsWith(r)||r.startsWith(o)&&e.toLowerCase().includes(r)).includes(!0)},"filterByWordPrefix");var wp=n((t,e)=>(0,ci.useMemo)(()=>({collections:t.filter(o=>Go(e,o.name||o.items[0].name))}),[e,t]),"useSearchCollections"),Vy=n((t,e,r,o)=>{let i=(0,ci.useMemo)(()=>t.flatMap(s=>s.items),[t]);return(0,ci.useMemo)(()=>{let s=t.filter(m=>Go(o,m.name)),l=i.filter(m=>Go(o,m.name)),u=e.filter(m=>Go(o,m.name)),d=r.filter(m=>Go(o,m.name));return{collections:s,collectibles:l,hiddenCollections:u,spamCollections:d}},[o,i,t,e,r])},"useSearchCollectiblesStrict");var $y=G({seconds:10}),zy=G({seconds:5});function Hy({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:o=[],isLoading:i}=xr({addresses:r,queryOptions:{staleTime:zy,refetchInterval:$y}}),[s,l]=(0,nr.useState)(""),u=kn(s)??"",d=(0,nr.useCallback)(E=>l(typeof E=="string"?E:E.currentTarget.value),[l]),{getIsHidden:m,getIsSpam:f,getSpamStatus:y,hideCollection:w,unhideCollection:S,isLoading:b}=Sp(e),C=(0,nr.useMemo)(()=>{let{collections:E,hiddenCollections:P,spamCollections:D}=Js({allCollections:o,getIsHidden:m,getIsSpam:f});return[...E,...P,...D]},[o]),T=wp(C,u),x=(0,nr.useCallback)(({item:E,status:P})=>P==="show"?S(E):w(E),[S,w]);return{viewState:(0,nr.useMemo)(()=>({accountId:e,listItems:u?T.collections:C,searchQuery:s,debouncedSearchQuery:u,handleSearch:d,getIsHidden:m,getIsSpam:f,getSpamStatus:y,onToggleHidden:x}),[e,T.collections,s,d,C,x,m,f,y,u]),viewStateLoading:b||i}}n(Hy,"useManageCollectionsVisibilityViewState");a();c();var ea=I(Uh());a();c();var li={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new Le(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},Tp=class extends Error{static{n(this,"SendFungibleFlowError")}constructor(e){super(e),this.name="SendFungibleFlowError"}};var xp={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:li,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Gy=St((t,e)=>({...(0,ea.default)(xp),resetSendSlice:n(()=>{let r=(0,ea.default)(xp);r.sendSessionId=ll(),t(r)},"resetSendSlice"),setAnalyticsRecipient:n(r=>{t({analyticsRecipient:r})},"setAnalyticsRecipient"),setSendFungibleKey:n((r,o,i)=>{t({fungibleKey:r,splTokenAccount:o,encodedCaip19:i})},"setSendFungibleKey"),setSendFormValues:n(r=>{t({sendFormValues:r})},"setSendFormValues"),setInputAmount:n(r=>{let o=e();t({sendFormValues:{...o.sendFormValues,inputAmount:r}})},"setInputAmount"),setShouldShowFiatValues:n(r=>{t({shouldShowFiatValues:r})},"setShouldShowFiatValues"),setRetryArgs:n(r=>{t({retryArgs:r})},"setRetryArgs"),setGasEstimation:n(r=>{t({gasEstimation:r})},"setGasEstimation")}));a();c();var Ap={collectible:void 0,sendFormValues:li,shouldRequireAmount:!1},ta=St(t=>({...Ap,resetSendSlice:n(()=>{t({...Ap})},"resetSendSlice"),setSendCollectible:n(e=>{t({collectible:e})},"setSendCollectible"),setSendFormValues:n(e=>{t({sendFormValues:e})},"setSendFormValues"),setShouldRequireAmount:n(e=>{t({shouldRequireAmount:e})},"setShouldRequireAmount")}));a();c();a();c();var ve=I(jh(),1);var Ky="token-account-min-balances",Ep=ve.struct([ve.blob(32,"mint"),ve.blob(32,"owner"),ve.nu64("amount"),ve.blob(93)]),QR=ve.struct([ve.blob(44),ve.u8("decimals"),ve.blob(37)]),qy=ve.struct([ve.blob(679)]),Qy=ve.struct([ve.u8("edition"),ve.blob(281)]),Wy=n(async t=>t.getMinimumBalanceForRentExemption(Ep.span).then(q),"getTokenAccountCostAsync"),Yy=n(async t=>q(await t.getMinimumBalanceForRentExemption(qy.span)+await t.getMinimumBalanceForRentExemption(Qy.span)+await t.getMinimumBalanceForRentExemption(Ep.span)),"getMplTokenAccountCostAsync");function Xy({tokenEdition:t,connection:e}){return be({queryKey:[Ky,{tokenEdition:t}],queryFn:n(async()=>e?t===null||!Yn(t)?Wy(e):Yy(e):q(0),"queryFn")})}n(Xy,"useTokenAccountMinBalance");a();c();var Ip=I(R(),1);var ra=n((t,e,r=!1,o)=>(0,Ip.useMemo)(()=>{if(t)return ui({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:o??"medium",mediaTypeOverride:e})},[t,e,r,o]),"useCollectibleMediaURI"),ui=n(({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:o})=>{let i=o??t.type;if((i==="image"||i==="other")&&t.previews?.[r]){let l=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${l}`}return t[i]?.url},"parseCollectibleMediaURI");a();c();a();c();var vp={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},kp=n(t=>({...vp,resetBurnCollectible:n(()=>t({...vp}),"resetBurnCollectible"),setBurnCollectibleTx:n(e=>t({burnCollectibleTx:e}),"setBurnCollectibleTx"),setBurnCollectibleTxFee:n(e=>t({burnCollectibleTxFee:e}),"setBurnCollectibleTxFee")}),"createBurnCollectibleSlice");a();c();var Rp={multichainSellCollectible:void 0},Op=n(t=>({...Rp,resetMultichainSellCollectible:n(()=>t({...Rp}),"resetMultichainSellCollectible"),setMultichainSellCollectible:n(e=>t({multichainSellCollectible:e}),"setMultichainSellCollectible")}),"createMultichainSellCollectibleSlice");a();c();var Pp={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},_p=n(t=>({...Pp,reset:n(()=>t({...Pp}),"reset"),setListCollectible:n(e=>t({listCollectible:e}),"setListCollectible"),setListPrice:n(e=>t({listCollectiblePrice:e}),"setListPrice"),setEditListPrice:n(e=>t({editListCollectiblePrice:e}),"setEditListPrice"),setUnlistCollectible:n(e=>t({unlistCollectible:e}),"setUnlistCollectible"),setTransactionURL:n(e=>t({transactionURL:e}),"setTransactionURL")}),"createListCollectibleSlice");a();c();var Mp={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},Dp=n(t=>({...Mp,reset:n(()=>t({...Mp}),"reset"),setMultichainListCollectible:n(e=>t({multichainListCollectible:e}),"setMultichainListCollectible"),setMultichainListPrice:n(e=>t({multichainListCollectiblePrice:e}),"setMultichainListPrice"),setEditMultichainListPrice:n(e=>t({editMultichainListCollectiblePrice:e}),"setEditMultichainListPrice"),setUnlistMultichainCollectible:n(e=>t({unlistMultichainCollectible:e}),"setUnlistMultichainCollectible"),setMultichainTransactionURL:n(e=>t({multichainTransactionURL:e}),"setMultichainTransactionURL")}),"createMultichainListCollectibleSlice");var Jy=St((t,e)=>({..._p(t,e),...kp(t,e),...Dp(t,e),...Op(t,e)}));a();c();a();c();var Zy=500,Bp=ae.collections([])[1],eb=[Bp,ae.hiddenCollections("")[1],ae.unhiddenCollections("")[1],ae.pinnedCollections("")[1]],oa=n(t=>{let e=String(t.queryKey[1]);return e===Bp?t.state.data?.nrOfItems<=Zy:eb.includes(e)},"collectiblesShouldDehydrateQueryPredicate");a();c();var zp=I(R(),1);a();c();a();c();a();c();var Lp={sendSuccessCondition:Ue.SUBMISSION,collectibleDetailPrecision:7};a();c();var ir={sendSuccessCondition:Ue.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var Fp={sendSuccessCondition:Ue.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var Np={sendSuccessCondition:Ue.CONFIRMATION,collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var tb=new xn({[he.Solana]:Fp,[he.Ethereum]:ir,[he.Polygon]:ir,[he.Base]:ir,[he.Monad]:ir,[he.Arbitrum]:ir,[he.Bitcoin]:Lp,[he.Sui]:Np,[he.Hypercore]:ir,[he.Hyperevm]:ir}),Ir=Tn(tb);a();c();var Vp=I(R(),1);a();c();var Up=I(cs(),1);var jp=n(({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Up.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}},"formatTrait");var $p=n(t=>(0,Vp.useMemo)(()=>t?t.attributes.map(({trait_type:e,value:r,display_type:o})=>({type:e,value:jp({value:r,type:o})})):[],[t]),"useCollectibleTraits");function rb(t){let{chain:e,owner:r}=t||{},o=e?.id,{data:i}=Qr({address:r,networkID:o});hu(i);let s=$p(t),l=o?B.getChainID(o):void 0,u=l?qc(l):void 0,{data:d}=cu({query:u?{data:u}:void 0});return{ctaBanner:(0,zp.useMemo)(()=>{if(!(!t||!d||!l))return Ir.get(l).collectibleDetailCtaBanner?.(t,d.price)},[l,t,d]),traits:s}}n(rb,"useCollectibleDetailViewState");a();c();a();c();a();c();a();c();var Hp=I(zc(),1),Gp=I(zc(),1),Kp=I(Nh(),1);var qp=n(({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:o},feerate:i,utxoHash:s,utxoIndex:l})=>{let u={transactionHash:s,index:l,value:t,isSafeToSend:!1,owner:e},d=[u],m=[{address:r,value:parseFloat(u.value),script:(0,Kp.toOutputScript)(r)}],f=Dl(Kc(Cn.Bitcoin.Mainnet,e),o,m,i,d),y=new Gp.Psbt({network:Hp.networks.bitcoin});if(f.type==="success"){let{inputs:w,outputs:S}=f;y.addInputs(w.map(b=>Bl(b,e,!0))),y.addOutputs(S)}return[y,y.data.inputs.map((w,S)=>({address:e,signingIndexes:[S]})),f.vb]},"createOrdinalsTransaction");function Qp({chain:t,owner:e,chainData:r},{recipient:o,transactionSpeed:i=Yr.standard},{utxoState:s,transactionSpeedsToUnitCost:l}){let u,d,m;if(!e)throw new Error("Owner is required");let f=t.id,y=l[i],w=r,S=y,b=Math.round(S?Rl(S.btcPerKilobyte).toNumber():kl);if(Ud(w)){let{outputValue:C,utxoHash:T,utxoIndex:x}=w;[u,d,m]=qp({value:C,senderAddress:e,recipient:o,utxoState:s,feerate:b,utxoHash:T,utxoIndex:x})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:f,psbt:u,vb:m,psbtChain:void 0,inputsToSign:d}}n(Qp,"createBitcoinTransferTransaction");a();c();a();c();var ob=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],Wp=new Error("Error populating ERC721 transaction data."),Yp=n(async t=>{let{sender:e,networkID:r,destination:o,contractAddress:i,tokenID:s}=t,l=Bn(r,i,ob,e),u;try{let m=await l.populateTransaction.safeTransferFrom(e,o,new q(s).toString(10));if(m.data)u=m.data;else throw Wp}catch{throw Wp}return Hr.parse({type:zr.eip1559,from:e,to:i,chainId:B.getEVMNetworkIDValue(r),data:u})},"createErc721TransferTransaction");a();c();var nb=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],Xp=new Error("Error populating ERC1155 transaction data."),Jp=n(async t=>{let{sender:e,networkID:r,destination:o,contractAddress:i,tokenID:s,value:l}=t,u=Bn(r,i,nb,e),d;try{let f=await u.populateTransaction.safeTransferFrom(e,o,new q(s).toString(10),l.toString(10),[]);if(f.data)d=f.data;else throw Xp}catch{throw Xp}return Hr.parse({type:zr.eip1559,from:e,to:i,chainId:B.getEVMNetworkIDValue(r),data:d})},"createErc1155TransferTransaction");async function Zp({chain:t,chainData:e,owner:r},{recipient:o,amountAsset:i}){let s=e,l=t.id,u;if(ib(s)){let{contract:d,id:m}=s;u=await Yp({networkID:l,sender:r??"",destination:o,contractAddress:d,tokenID:m})}else if(sb(s)){let{contract:d,id:m}=s;u=await Jp({networkID:l,sender:r??"",destination:o,contractAddress:d,tokenID:m,value:i??"1"})}else throw new Error(`Unsupported EVM collectible type: ${s.standard}`);return{networkID:l,unsignedTransaction:u}}n(Zp,"createEvmTransferTransaction");function ib(t){return t.standard===jo.ERC721}n(ib,"isErc721Collectible");function sb(t){return t.standard===jo.ERC1155}n(sb,"isErc1155Collectible");a();c();a();c();a();c();var di=class extends Error{static{n(this,"CompressionProofError")}constructor(e){super(e),this.name="ProofError"}};async function em({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",o;try{o=await se.api().post(r,{chainId:t,address:e})}catch{let i=new di(`Failed to fetch proof for ${e} on network ${t}.`);throw Z.captureError(i,te.Collectibles),i}if(o.status!==200){let i=new di(`Failed to fetch proof for ${e} on network ${t}.`);throw Z.captureError(i,te.Collectibles),i}return await o.data}n(em,"getCompressionProof");async function tm({networkID:t,mint:e,recipient:r}){let o=new j.Transaction,i=await em({networkID:t,mintAddress:e});return o.add(await El({...i,destination:r})),o}n(tm,"createCompressedTokenTransferTransaction");a();c();async function rm({networkID:t,destination:e,mint:r,senderAddress:o}){let{createComputeBudgetIx:i,createOCTferIX:s,getOCPMintState:l}=await Dn(),u=yr(t),d=new j.PublicKey(r),m=await l(d,u);if(!m)throw new Error("Mint state not found for OCP transfer");Gt()&&console.log("This is a Magic Eden Open Creator Protocol Token");let f=new j.Transaction;f.add(i());let{destinationAddress:y}=await Un({solanaConnection:u,destination:new j.PublicKey(e),mint:d,programId:Fo}),w=new j.PublicKey(o.address),{initAccountIX:S,transferIX:b}=await s({senderAddress:w,destinationAddress:y,mintAddress:d,mintState:m,connection:u});return S&&f.add(S),f.add(b),f}n(rm,"createOcpTokenTransferTransaction");a();c();async function om({networkID:t,senderAddress:e,senderAccount:r,destination:o,mint:i}){let s=yr(t),l=new j.PublicKey(i),{destinationAddress:u,destinationAccount:d}=await Un({solanaConnection:s,destination:new j.PublicKey(o),mint:l,programId:Fo}),{createPNFTTransferIX:m}=await Dn(),f=new j.Transaction,y=new j.PublicKey(e.address),w=new j.PublicKey(r),S=d;if(!S){let[b,C]=await Nl(y,u,l,Fo);f.add(Fl({account:u,owner:j.SystemProgram.programId})),f.add(b),S=C}return f.add(await m({senderAddress:y,tokenAccount:w,destinationAddress:u,destinationAccount:S,mintAddress:l,connection:s})),f}n(om,"createProgrammableNftTransferTransaction");async function nm(t,e){let{chain:r,owner:o,decimals:i="0"}=t,s=parseFloat(i),{solana:l}=e,{memo:u,references:d}=l,m=r.id,f=yr(m),y={networkID:t.chain.id,addressType:bn.Solana,address:t.owner??""};if(!Ie(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let w;if(ab(t))w=await tm({networkID:m,mint:t.chainData.mint,recipient:e.recipient});else if(cb(t))w=await om({networkID:m,senderAddress:y,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await lb(t))w=await rm({networkID:m,destination:e.recipient,mint:t.chainData.mint,senderAddress:y});else if(ub(t)){let S=tu(t),b=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();w=await jl({networkID:m,destination:e.recipient,mint:t.chainData.mint,senderAddress:y,senderAccount:t.chainData.tokenAccount,decimals:s,programId:t.chainData.programId,amount:b,references:d?.map(C=>C.toString())??[],memo:u??"",transferHookProgramId:S,connection:f})}else throw new Error("Unsupported transferSPLSolana args");return u&&w.add(Ul({memoText:u})),w.feePayer=new j.PublicKey(o??""),w=await Ml(w,{connection:f}),w.recentBlockhash=(await f.getLatestBlockhash("confirmed")).blockhash,{networkID:m,transaction:[w]}}n(nm,"createSolanaTransferTransaction");function ab(t){return Ie(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}n(ab,"isCompressedTokenCollectible");function cb(t){return Ie(t.chainData)?"standard"in t.chainData&&(t.chainData.standard===br.ProgrammableNonFungible||t.chainData.standard===br.ProgrammableNonFungibleEdition):!1}n(cb,"isProgrammableNftCollectible");async function lb(t){let{chainData:e}=t;if(!Ie(e))return!1;let{mint:r}=e,o=yr(t.chain.id);return await vl(new j.PublicKey(r),o)!==null}n(lb,"isOcpTokenCollectible");function ub(t){return Ie(t.chainData)}n(ub,"isDefaultSplTokenCollectible");a();c();a();c();a();c();a();c();var im="1.21.2",sm="1.43.0";a();c();var db={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},pi=class extends Error{static{n(this,"SuiHTTPTransportError")}},po=class extends pi{static{n(this,"JsonRpcError")}constructor(e,r){super(e),this.code=r,this.type=db[r]??"ServerError"}},mi=class extends pi{static{n(this,"SuiHTTPStatusError")}constructor(e,r,o){super(e),this.status=r,this.statusText=o}};a();c();var am=n(t=>{throw TypeError(t)},"__typeError"),ia=n((t,e,r)=>e.has(t)||am("Cannot "+r),"__accessCheck"),ye=n((t,e,r)=>(ia(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),vr=n((t,e,r)=>e.has(t)?am("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),mo=n((t,e,r,o)=>(ia(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),"__privateSet"),cm=n((t,e,r)=>(ia(t,e,"access private method"),r),"__privateMethod"),pb=n((t,e,r,o)=>({set _(i){mo(t,e,i,r)},get _(){return ye(t,e,o)}}),"__privateWrapper"),kr,Ko,Dt,Rr,qo,fo,fi,lm,um;function mb(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}n(mb,"getWebsocketUrl");var fb={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},hi=class{static{n(this,"WebsocketClient")}constructor(e,r={}){if(vr(this,fi),vr(this,kr,0),vr(this,Ko,0),vr(this,Dt,null),vr(this,Rr,null),vr(this,qo,new Set),vr(this,fo,new Map),this.endpoint=e,this.options={...fb,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=mb(this.endpoint))}async makeRequest(e,r){let o=await cm(this,fi,lm).call(this);return new Promise((i,s)=>{mo(this,kr,ye(this,kr)+1),ye(this,fo).set(ye(this,kr),{resolve:i,reject:s,timeout:setTimeout(()=>{ye(this,fo).delete(ye(this,kr)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),o.send(JSON.stringify({jsonrpc:"2.0",id:ye(this,kr),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new po(i.message,i.code);return s})}async subscribe(e){let r=new na(e);return ye(this,qo).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};kr=new WeakMap;Ko=new WeakMap;Dt=new WeakMap;Rr=new WeakMap;qo=new WeakMap;fo=new WeakMap;fi=new WeakSet;lm=n(function(){return ye(this,Rr)?ye(this,Rr):(mo(this,Rr,new Promise(t=>{ye(this,Dt)?.close(),mo(this,Dt,new this.options.WebSocketConstructor(this.endpoint)),ye(this,Dt).addEventListener("open",()=>{mo(this,Ko,0),t(ye(this,Dt))}),ye(this,Dt).addEventListener("close",()=>{pb(this,Ko)._++,ye(this,Ko)<=this.options.maxReconnects&&setTimeout(()=>{cm(this,fi,um).call(this)},this.options.reconnectTimeout)}),ye(this,Dt).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(o){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:o}));return}if("id"in r&&r.id!=null&&ye(this,fo).has(r.id)){let{resolve:o,timeout:i}=ye(this,fo).get(r.id);clearTimeout(i),o(r)}else if("params"in r){let{params:o}=r;ye(this,qo).forEach(i=>{i.subscriptionId===o.subscription&&o.subscription===i.subscriptionId&&i.onMessage(o.result)})}})})),ye(this,Rr))},"setupWebSocket_fn");um=n(async function(){return ye(this,Dt)?.close(),mo(this,Rr,null),Promise.allSettled([...ye(this,qo)].map(t=>t.subscribe(this)))},"reconnect_fn");var na=class{static{n(this,"RpcSubscription")}constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var dm=n(t=>{throw TypeError(t)},"__typeError"),ca=n((t,e,r)=>e.has(t)||dm("Cannot "+r),"__accessCheck"),et=n((t,e,r)=>(ca(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),gi=n((t,e,r)=>e.has(t)?dm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),sa=n((t,e,r,o)=>(ca(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),"__privateSet"),hb=n((t,e,r)=>(ca(t,e,"access private method"),r),"__privateMethod"),Qo,at,Wo,aa,pm,yi=class{static{n(this,"SuiHTTPTransport")}constructor(e){gi(this,aa),gi(this,Qo,0),gi(this,at),gi(this,Wo),sa(this,at,e)}fetch(e,r){let o=et(this,at).fetch??fetch;if(!o)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return o(e,r)}async request(e){sa(this,Qo,et(this,Qo)+1);let r=await this.fetch(et(this,at).rpc?.url??et(this,at).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":im,"Client-Target-Api-Version":sm,"Client-Request-Method":e.method,...et(this,at).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:et(this,Qo),method:e.method,params:e.params})});if(!r.ok)throw new mi(`Unexpected status code: ${r.status}`,r.status,r.statusText);let o=await r.json();if("error"in o&&o.error!=null)throw new po(o.error.message,o.error.code);return o.result}async subscribe(e){let r=await hb(this,aa,pm).call(this).subscribe(e);return async()=>!!await r()}};Qo=new WeakMap;at=new WeakMap;Wo=new WeakMap;aa=new WeakSet;pm=n(function(){if(!et(this,Wo)){let t=et(this,at).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");sa(this,Wo,new hi(et(this,at).websocket?.url??et(this,at).url,{WebSocketConstructor:t,...et(this,at).websocket}))}return et(this,Wo)},"getWebsocketClient_fn");a();c();a();c();a();c();a();c();a();c();function gb(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let m=0;m<e.length;m++)e[m]=255;for(let m=0;m<t.length;m++){let f=t.charAt(m),y=f.charCodeAt(0);if(e[y]!==255)throw new TypeError(f+" is ambiguous");e[y]=m}let r=t.length,o=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function l(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";let f=0,y=0,w=0,S=m.length;for(;w!==S&&m[w]===0;)w++,f++;let b=(S-w)*s+1>>>0,C=new Uint8Array(b);for(;w!==S;){let A=m[w],E=0;for(let P=b-1;(A!==0||E<y)&&P!==-1;P--,E++)A+=256*C[P]>>>0,C[P]=A%r>>>0,A=A/r>>>0;if(A!==0)throw new Error("Non-zero carry");y=E,w++}let T=b-y;for(;T!==b&&C[T]===0;)T++;let x=o.repeat(f);for(;T<b;++T)x+=t.charAt(C[T]);return x}n(l,"encode");function u(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;let f=0,y=0,w=0;for(;m[f]===o;)y++,f++;let S=(m.length-f)*i+1>>>0,b=new Uint8Array(S);for(;m[f];){let A=e[m.charCodeAt(f)];if(A===255)return;let E=0;for(let P=S-1;(A!==0||E<w)&&P!==-1;P--,E++)A+=r*b[P]>>>0,b[P]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=E,f++}let C=S-w;for(;C!==S&&b[C]===0;)C++;let T=new Uint8Array(y+(S-C)),x=y;for(;C!==S;)T[x++]=b[C++];return T}n(u,"decodeUnsafe");function d(m){let f=u(m);if(f)return f;throw new Error("Non-base"+r+" character")}return n(d,"decode"),{encode:l,decodeUnsafe:u,decode:d}}n(gb,"base");var mm=gb;var yb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",la=mm(yb);var Bt=n(t=>la.encode(t),"toBase58"),ct=n(t=>la.decode(t),"fromBase58");a();c();function De(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}n(De,"fromBase64");var ua=8192;function de(t){if(t.length<ua)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=ua){let o=t.slice(r,r+ua);e+=String.fromCharCode(...o)}return btoa(e)}n(de,"toBase64");a();c();a();c();function ho(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,o=r.match(/[0-9a-fA-F]{2}/g)?.map(i=>parseInt(i,16))??[];if(o.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(o)}n(ho,"fromHex");function Et(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}n(Et,"toHex");a();c();a();c();function Or(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}n(Or,"ulebEncode");function fm(t){let e=0,r=0,o=0;for(;;){let i=t[o];if(o+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:o}}n(fm,"ulebDecode");var bi=class{static{n(this,"BcsReader")}constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),o=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+o).toString(10)}read128(){let e=BigInt(this.read64()),o=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+o).toString(10)}read256(){let e=BigInt(this.read128()),o=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+o).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,o=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),o}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:o,length:i}=fm(r);return this.shift(i),o}readVec(e){let r=this.readULEB(),o=[];for(let i=0;i<r;i++)o.push(e(this,i,r));return o}};a();c();a();c();function da(t,e){switch(e){case"base58":return Bt(t);case"base64":return de(t);case"hex":return Et(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}n(da,"encodeStr");function Si(t,e=["<",">"]){let[r,o]=e,i=[],s="",l=0;for(let u=0;u<t.length;u++){let d=t[u];if(d===r&&l++,d===o&&l--,l===0&&d===","){i.push(s.trim()),s="";continue}s+=d}return i.push(s.trim()),i}n(Si,"splitGenericParameters");var Ci=class{static{n(this,"BcsWriter")}constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:o=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=o,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let o=Math.min(this.maxSize,this.size+this.allocateSize);if(r>o)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=o;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return pa(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return pa(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return pa(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Or(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((o,i)=>r(this,o,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return da(this.toBytes(),e)}};function pa(t,e){let r=new Uint8Array(e),o=0;for(;t>0;)r[o]=Number(t%BigInt(256)),t=t/BigInt(256),o+=1;return r}n(pa,"toLittleEndian");var hm=n(t=>{throw TypeError(t)},"__typeError"),gm=n((t,e,r)=>e.has(t)||hm("Cannot "+r),"__accessCheck"),lt=n((t,e,r)=>(gm(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Ti=n((t,e,r)=>e.has(t)?hm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),xi=n((t,e,r,o)=>(gm(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),"__privateSet"),go,Yo,wi,sr,bb=class ym{static{n(this,"_BcsType")}constructor(e){Ti(this,go),Ti(this,Yo),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),xi(this,go,e.write),xi(this,Yo,e.serialize??((r,o)=>{let i=new Ci({initialSize:this.serializedSize(r)??void 0,...o});return lt(this,go).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),lt(this,go).call(this,e,r)}serialize(e,r){return this.validate(e),new Ai(this,lt(this,Yo).call(this,e,r))}parse(e){let r=new bi(e);return this.read(r)}fromHex(e){return this.parse(ho(e))}fromBase58(e){return this.parse(ct(e))}fromBase64(e){return this.parse(De(e))}transform({name:e,input:r,output:o,validate:i}){return new ym({name:e??this.name,read:n(s=>o?o(this.read(s)):this.read(s),"read"),write:n((s,l)=>lt(this,go).call(this,r?r(s):s,l),"write"),serializedSize:n(s=>this.serializedSize(r?r(s):s),"serializedSize"),serialize:n((s,l)=>lt(this,Yo).call(this,r?r(s):s,l),"serialize"),validate:n(s=>{i?.(s),this.validate(r?r(s):s)},"validate")})}};go=new WeakMap;Yo=new WeakMap;var tt=bb,bm=Symbol.for("@mysten/serialized-bcs");function yo(t){return!!t&&typeof t=="object"&&t[bm]===!0}n(yo,"isSerializedBcs");var Ai=class{static{n(this,"SerializedBcs")}constructor(e,r){Ti(this,wi),Ti(this,sr),xi(this,wi,e),xi(this,sr,r)}get[bm](){return!0}toBytes(){return lt(this,sr)}toHex(){return Et(lt(this,sr))}toBase64(){return de(lt(this,sr))}toBase58(){return Bt(lt(this,sr))}parse(){return lt(this,wi).parse(lt(this,sr))}};wi=new WeakMap;sr=new WeakMap;function Xo({size:t,...e}){return new tt({...e,serializedSize:n(()=>t,"serializedSize")})}n(Xo,"fixedSizeBcsType");function Ei({readMethod:t,writeMethod:e,...r}){return Xo({...r,read:n(o=>o[t](),"read"),write:n((o,i)=>i[e](o),"write"),validate:n(o=>{if(o<0||o>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${o}. Expected value in range 0-${r.maxValue}`);r.validate?.(o)},"validate")})}n(Ei,"uIntBcsType");function Ii({readMethod:t,writeMethod:e,...r}){return Xo({...r,read:n(o=>o[t](),"read"),write:n((o,i)=>i[e](BigInt(o)),"write"),validate:n(o=>{let i=BigInt(o);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)},"validate")})}n(Ii,"bigUIntBcsType");function Sm({serialize:t,...e}){let r=new tt({...e,serialize:t,write:n((o,i)=>{for(let s of r.serialize(o).toBytes())i.write8(s)},"write")});return r}n(Sm,"dynamicSizeBcsType");function Cm({toBytes:t,fromBytes:e,...r}){return new tt({...r,read:n(o=>{let i=o.readULEB(),s=o.readBytes(i);return e(s)},"read"),write:n((o,i)=>{let s=t(o);i.writeULEB(s.length);for(let l=0;l<s.length;l++)i.write8(s[l])},"write"),serialize:n(o=>{let i=t(o),s=Or(i.length),l=new Uint8Array(s.length+i.length);return l.set(s,0),l.set(i,s.length),l},"serialize"),validate:n(o=>{if(typeof o!="string")throw new TypeError(`Invalid ${r.name} value: ${o}. Expected string`);r.validate?.(o)},"validate")})}n(Cm,"stringLikeBcsType");function wm(t){let e=null;function r(){return e||(e=t()),e}return n(r,"getType"),new tt({name:"lazy",read:n(o=>r().read(o),"read"),serializedSize:n(o=>r().serializedSize(o),"serializedSize"),write:n((o,i)=>r().write(o,i),"write"),serialize:n((o,i)=>r().serialize(o,i).toBytes(),"serialize")})}n(wm,"lazyBcsType");a();c();var h={u8(t){return Ei({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Ei({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Ei({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Ii({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Ii({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Ii({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Xo({name:"bool",size:1,read:n(e=>e.read8()===1,"read"),write:n((e,r)=>r.write8(e?1:0),"write"),...t,validate:n(e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)},"validate")})},uleb128(t){return Sm({name:"uleb128",read:n(e=>e.readULEB(),"read"),serialize:n(e=>Uint8Array.from(Or(e)),"serialize"),...t})},bytes(t,e){return Xo({name:`bytes[${t}]`,size:t,read:n(r=>r.readBytes(t),"read"),write:n((r,o)=>{let i=new Uint8Array(r);for(let s=0;s<t;s++)o.write8(i[s]??0)},"write"),...e,validate:n(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)},"validate")})},byteVector(t){return new tt({name:"bytesVector",read:n(e=>{let r=e.readULEB();return e.readBytes(r)},"read"),write:n((e,r)=>{let o=new Uint8Array(e);r.writeULEB(o.length);for(let i=0;i<o.length;i++)r.write8(o[i]??0)},"write"),...t,serializedSize:n(e=>{let r="length"in e?e.length:null;return r==null?null:Or(r).length+r},"serializedSize"),validate:n(e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)},"validate")})},string(t){return Cm({name:"string",toBytes:n(e=>new TextEncoder().encode(e),"toBytes"),fromBytes:n(e=>new TextDecoder().decode(e),"fromBytes"),...t})},fixedArray(t,e,r){return new tt({name:`${e.name}[${t}]`,read:n(o=>{let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(o);return i},"read"),write:n((o,i)=>{for(let s of o)e.write(s,i)},"write"),...r,validate:n(o=>{if(r?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t)throw new TypeError(`Expected array of length ${t}, found ${o.length}`)},"validate")})},option(t){return h.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:n(e=>e==null?{None:!0}:{Some:e},"input"),output:n(e=>e.$kind==="Some"?e.Some:null,"output")})},vector(t,e){return new tt({name:`vector<${t.name}>`,read:n(r=>{let o=r.readULEB(),i=new Array(o);for(let s=0;s<o;s++)i[s]=t.read(r);return i},"read"),write:n((r,o)=>{o.writeULEB(r.length);for(let i of r)t.write(i,o)},"write"),...e,validate:n(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)},"validate")})},tuple(t,e){return new tt({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:n(r=>{let o=0;for(let i=0;i<t.length;i++){let s=t[i].serializedSize(r[i]);if(s==null)return null;o+=s}return o},"serializedSize"),read:n(r=>{let o=[];for(let i of t)o.push(i.read(r));return o},"read"),write:n((r,o)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],o)},"write"),...e,validate:n(r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)},"validate")})},struct(t,e,r){let o=Object.entries(e);return new tt({name:t,serializedSize:n(i=>{let s=0;for(let[l,u]of o){let d=u.serializedSize(i[l]);if(d==null)return null;s+=d}return s},"serializedSize"),read:n(i=>{let s={};for(let[l,u]of o)s[l]=u.read(i);return s},"read"),write:n((i,s)=>{for(let[l,u]of o)u.write(i[l],s)},"write"),...r,validate:n(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)},"validate")})},enum(t,e,r){let o=Object.entries(e);return new tt({name:t,read:n(i=>{let s=i.readULEB(),l=o[s];if(!l)throw new TypeError(`Unknown value ${s} for enum ${t}`);let[u,d]=l;return{[u]:d?.read(i)??!0,$kind:u}},"read"),write:n((i,s)=>{let[l,u]=Object.entries(i).filter(([d])=>Object.hasOwn(e,d))[0];for(let d=0;d<o.length;d++){let[m,f]=o[d];if(m===l){s.writeULEB(d),f?.write(u,s);return}}},"write"),...r,validate:n(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let s=Object.keys(i).filter(u=>i[u]!==void 0&&Object.hasOwn(e,u));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);let[l]=s;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)},"validate")})},map(t,e){return h.vector(h.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n(r=>[...r.entries()],"input"),output:n(r=>{let o=new Map;for(let[i,s]of r)o.set(i,s);return o},"output")})},lazy(t){return wm(t)}};a();c();a();c();a();c();a();c();a();c();var Sb=32;function vi(t){try{return ct(t).length===Sb}catch{return!1}}n(vi,"isValidTransactionDigest");var Jo=32;function We(t){return Cb(t)&&wb(t)===Jo}n(We,"isValidSuiAddress");function bo(t){return We(t)}n(bo,"isValidSuiObjectId");function U(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Jo*2,"0")}`}n(U,"normalizeSuiAddress");function Ve(t,e=!1){return U(t,e)}n(Ve,"normalizeSuiObjectId");function Cb(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}n(Cb,"isHex");function wb(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}n(wb,"getHexByteLength");a();c();var Tb=/^vector<(.+)>$/,xb=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Lt=class t{static{n(this,"TypeTagSerializer")}static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let o=e.match(Tb);if(o)return{vector:t.parseFromStr(o[1],r)};let i=e.match(xb);if(i)return{struct:{address:r?U(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Si(e).map(o=>t.parseFromStr(o,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,o=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${o?`<${o}>`:""}`}throw new Error("Invalid TypeTag")}};function Ab(t){return h.u64({name:"unsafe_u64",...t}).transform({input:n(e=>e,"input"),output:n(e=>Number(e),"output")})}n(Ab,"unsafe_u64");function Eb(t){return h.enum("Option",{None:null,Some:t})}n(Eb,"optionEnum");var ie=h.bytes(Jo).transform({validate:n(t=>{let e=typeof t=="string"?t:Et(t);if(!e||!We(U(e)))throw new Error(`Invalid Sui address ${e}`)},"validate"),input:n(t=>typeof t=="string"?ho(U(t)):t,"input"),output:n(t=>U(Et(t)),"output")}),Ye=h.vector(h.u8()).transform({name:"ObjectDigest",input:n(t=>ct(t),"input"),output:n(t=>Bt(new Uint8Array(t)),"output"),validate:n(t=>{if(ct(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),$e=h.struct("SuiObjectRef",{objectId:ie,version:h.u64(),digest:Ye}),ma=h.struct("SharedObjectRef",{objectId:ie,initialSharedVersion:h.u64(),mutable:h.bool()}),fa=h.enum("ObjectArg",{ImmOrOwnedObject:$e,SharedObject:ma,Receiving:$e}),ha=h.enum("CallArg",{Pure:h.struct("Pure",{bytes:h.vector(h.u8()).transform({input:n(t=>typeof t=="string"?De(t):t,"input"),output:n(t=>de(new Uint8Array(t)),"output")})}),Object:fa}),ga=h.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:h.lazy(()=>ga),struct:h.lazy(()=>Ta),u16:null,u32:null,u256:null}),ki=ga.transform({input:n(t=>typeof t=="string"?Lt.parseFromStr(t,!0):t,"input"),output:n(t=>Lt.tagToString(t),"output")}),ut=h.enum("Argument",{GasCoin:null,Input:h.u16(),Result:h.u16(),NestedResult:h.tuple([h.u16(),h.u16()])}),ya=h.struct("ProgrammableMoveCall",{package:ie,module:h.string(),function:h.string(),typeArguments:h.vector(ki),arguments:h.vector(ut)}),ba=h.enum("Command",{MoveCall:ya,TransferObjects:h.struct("TransferObjects",{objects:h.vector(ut),address:ut}),SplitCoins:h.struct("SplitCoins",{coin:ut,amounts:h.vector(ut)}),MergeCoins:h.struct("MergeCoins",{destination:ut,sources:h.vector(ut)}),Publish:h.struct("Publish",{modules:h.vector(h.vector(h.u8()).transform({input:n(t=>typeof t=="string"?De(t):t,"input"),output:n(t=>de(new Uint8Array(t)),"output")})),dependencies:h.vector(ie)}),MakeMoveVec:h.struct("MakeMoveVec",{type:Eb(ki).transform({input:n(t=>t===null?{None:!0}:{Some:t},"input"),output:n(t=>t.Some??null,"output")}),elements:h.vector(ut)}),Upgrade:h.struct("Upgrade",{modules:h.vector(h.vector(h.u8()).transform({input:n(t=>typeof t=="string"?De(t):t,"input"),output:n(t=>de(new Uint8Array(t)),"output")})),dependencies:h.vector(ie),package:ie,ticket:ut})}),Sa=h.struct("ProgrammableTransaction",{inputs:h.vector(ha),commands:h.vector(ba)}),Ca=h.enum("TransactionKind",{ProgrammableTransaction:Sa,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),wa=h.enum("TransactionExpiration",{None:null,Epoch:Ab()}),Ta=h.struct("StructTag",{address:ie,module:h.string(),name:h.string(),typeParams:h.vector(ga)}),xa=h.struct("GasData",{payment:h.vector($e),owner:ie,price:h.u64(),budget:h.u64()}),Aa=h.struct("TransactionDataV1",{kind:Ca,sender:ie,gasData:xa,expiration:wa}),Ea=h.enum("TransactionData",{V1:Aa}),Ia=h.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),va=h.enum("IntentVersion",{V0:null}),ka=h.enum("AppId",{Sui:null}),Ra=h.struct("Intent",{scope:Ia,version:va,appId:ka});function Oa(t){return h.struct(`IntentMessage<${t.name}>`,{intent:Ra,value:t})}n(Oa,"IntentMessage");var Pa=h.enum("CompressedSignature",{ED25519:h.fixedArray(64,h.u8()),Secp256k1:h.fixedArray(64,h.u8()),Secp256r1:h.fixedArray(64,h.u8()),ZkLogin:h.vector(h.u8())}),_a=h.enum("PublicKey",{ED25519:h.fixedArray(32,h.u8()),Secp256k1:h.fixedArray(33,h.u8()),Secp256r1:h.fixedArray(33,h.u8()),ZkLogin:h.vector(h.u8())}),Ma=h.struct("MultiSigPkMap",{pubKey:_a,weight:h.u8()}),Da=h.struct("MultiSigPublicKey",{pk_map:h.vector(Ma),threshold:h.u16()}),Tm=h.struct("MultiSig",{sigs:h.vector(Pa),bitmap:h.u16(),multisig_pk:Da}),Ib=h.vector(h.u8()).transform({input:n(t=>typeof t=="string"?De(t):t,"input"),output:n(t=>de(new Uint8Array(t)),"output")}),Ba=h.struct("SenderSignedTransaction",{intentMessage:Oa(Ea),txSignatures:h.vector(Ib)}),xm=h.vector(Ba,{name:"SenderSignedData"}),Am=h.struct("PasskeyAuthenticator",{authenticatorData:h.vector(h.u8()),clientDataJson:h.string(),userSignature:h.vector(h.u8())});a();c();var vb=h.enum("PackageUpgradeError",{UnableToFetchPackage:h.struct("UnableToFetchPackage",{packageId:ie}),NotAPackage:h.struct("NotAPackage",{objectId:ie}),IncompatibleUpgrade:null,DigestDoesNotMatch:h.struct("DigestDoesNotMatch",{digest:h.vector(h.u8())}),UnknownUpgradePolicy:h.struct("UnknownUpgradePolicy",{policy:h.u8()}),PackageIDDoesNotMatch:h.struct("PackageIDDoesNotMatch",{packageId:ie,ticketId:ie})}),kb=h.struct("ModuleId",{address:ie,name:h.string()}),Em=h.struct("MoveLocation",{module:kb,function:h.u16(),instruction:h.u16(),functionName:h.option(h.string())}),Rb=h.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:h.struct("IndexOutOfBounds",{idx:h.u16()}),SecondaryIndexOutOfBounds:h.struct("SecondaryIndexOutOfBounds",{resultIdx:h.u16(),secondaryIdx:h.u16()}),InvalidResultArity:h.struct("InvalidResultArity",{resultIdx:h.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Ob=h.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Pb=h.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:h.struct("MoveObjectTooBig",{objectSize:h.u64(),maxObjectSize:h.u64()}),MovePackageTooBig:h.struct("MovePackageTooBig",{objectSize:h.u64(),maxObjectSize:h.u64()}),CircularObjectOwnership:h.struct("CircularObjectOwnership",{object:ie}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:h.option(Em),MoveAbort:h.tuple([Em,h.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:h.struct("CommandArgumentError",{argIdx:h.u16(),kind:Rb}),TypeArgumentError:h.struct("TypeArgumentError",{argumentIdx:h.u16(),kind:Ob}),UnusedValueWithoutDrop:h.struct("UnusedValueWithoutDrop",{resultIdx:h.u16(),secondaryIdx:h.u16()}),InvalidPublicFunctionReturnType:h.struct("InvalidPublicFunctionReturnType",{idx:h.u16()}),InvalidTransferObject:null,EffectsTooLarge:h.struct("EffectsTooLarge",{currentSize:h.u64(),maxSize:h.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:h.struct("PackageUpgradeError",{upgradeError:vb}),WrittenObjectsTooLarge:h.struct("WrittenObjectsTooLarge",{currentSize:h.u64(),maxSize:h.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:h.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:h.vector(ie)}),AddressDeniedForCoin:h.struct("AddressDeniedForCoin",{address:ie,coinType:h.string()}),CoinTypeGlobalPause:h.struct("CoinTypeGlobalPause",{coinType:h.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Im=h.enum("ExecutionStatus",{Success:null,Failed:h.struct("ExecutionFailed",{error:Pb,command:h.option(h.u64())})}),vm=h.struct("GasCostSummary",{computationCost:h.u64(),storageCost:h.u64(),storageRebate:h.u64(),nonRefundableStorageFee:h.u64()}),So=h.enum("Owner",{AddressOwner:ie,ObjectOwner:ie,Shared:h.struct("Shared",{initialSharedVersion:h.u64()}),Immutable:null}),_b=h.struct("TransactionEffectsV1",{status:Im,executedEpoch:h.u64(),gasUsed:vm,modifiedAtVersions:h.vector(h.tuple([ie,h.u64()])),sharedObjects:h.vector($e),transactionDigest:Ye,created:h.vector(h.tuple([$e,So])),mutated:h.vector(h.tuple([$e,So])),unwrapped:h.vector(h.tuple([$e,So])),deleted:h.vector($e),unwrappedThenDeleted:h.vector($e),wrapped:h.vector($e),gasObject:h.tuple([$e,So]),eventsDigest:h.option(Ye),dependencies:h.vector(Ye)}),La=h.tuple([h.u64(),Ye]),Mb=h.enum("ObjectIn",{NotExist:null,Exist:h.tuple([La,So])}),Db=h.enum("ObjectOut",{NotExist:null,ObjectWrite:h.tuple([Ye,So]),PackageWrite:La}),Bb=h.enum("IDOperation",{None:null,Created:null,Deleted:null}),Lb=h.struct("EffectsObjectChange",{inputState:Mb,outputState:Db,idOperation:Bb}),Fb=h.enum("UnchangedSharedKind",{ReadOnlyRoot:La,MutateDeleted:h.u64(),ReadDeleted:h.u64(),Cancelled:h.u64(),PerEpochConfig:null}),Nb=h.struct("TransactionEffectsV2",{status:Im,executedEpoch:h.u64(),gasUsed:vm,transactionDigest:Ye,gasObjectIndex:h.option(h.u32()),eventsDigest:h.option(Ye),dependencies:h.vector(Ye),lamportVersion:h.u64(),changedObjects:h.vector(h.tuple([ie,Lb])),unchangedSharedObjects:h.vector(h.tuple([ie,Fb])),auxDataDigest:h.option(Ye)}),km=h.enum("TransactionEffects",{V1:_b,V2:Nb});a();c();function Co(t){switch(t){case"u8":return h.u8();case"u16":return h.u16();case"u32":return h.u32();case"u64":return h.u64();case"u128":return h.u128();case"u256":return h.u256();case"bool":return h.bool();case"string":return h.string();case"id":case"address":return ie}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,o]=e.slice(1);return r==="vector"?h.vector(Co(o)):h.option(Co(o))}throw new Error(`Invalid Pure type name: ${t}`)}n(Co,"pureBcsSchemaFromTypeName");var V={...h,U8:h.u8(),U16:h.u16(),U32:h.u32(),U64:h.u64(),U128:h.u128(),U256:h.u256(),ULEB128:h.uleb128(),Bool:h.bool(),String:h.string(),Address:ie,AppId:ka,Argument:ut,CallArg:ha,CompressedSignature:Pa,GasData:xa,Intent:Ra,IntentMessage:Oa,IntentScope:Ia,IntentVersion:va,MultiSig:Tm,MultiSigPkMap:Ma,MultiSigPublicKey:Da,ObjectArg:fa,ObjectDigest:Ye,ProgrammableMoveCall:ya,ProgrammableTransaction:Sa,PublicKey:_a,SenderSignedData:xm,SenderSignedTransaction:Ba,SharedObjectRef:ma,StructTag:Ta,SuiObjectRef:$e,Command:ba,TransactionData:Ea,TransactionDataV1:Aa,TransactionExpiration:wa,TransactionKind:Ca,TypeTag:ki,TransactionEffects:km,PasskeyAuthenticator:Am};a();c();a();c();var Ub=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,jb=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Rm(t,e="at"){let r=t.toLowerCase(),o;if(r.includes("@")){if(!Ub.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[i,s]=r.split("@");o=[...i?i.split("."):[],s]}else{if(!jb.test(r))throw new Error(`Invalid SuiNS name ${t}`);o=r.split(".").slice(0,-1)}return e==="dot"?`${o.join(".")}.sui`:`${o.slice(0,-1).join(".")}@${o[o.length-1]}`}n(Rm,"normalizeSuiNSName");a();c();var Vb=BigInt(1e9),Fa="0x1",Ri="0x2";var $b=Ve("0x6");var Na=`${Ri}::sui::SUI`,zb=Ve("0x5");a();c();a();c();a();c();a();c();function Hb(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}n(Hb,"isBytes");function Pi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}n(Pi,"anumber");function _i(t,...e){if(!Hb(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}n(_i,"abytes");function Ua(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}n(Ua,"aexists");function Om(t,e){_i(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}n(Om,"aoutput");function Zo(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}n(Zo,"u32");function Mi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}n(Mi,"clean");var Pm=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _m(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}n(_m,"byteSwap");var It=Pm?t=>t:t=>_m(t);function Gb(t){for(let e=0;e<t.length;e++)t[e]=_m(t[e]);return t}n(Gb,"byteSwap32");var Pr=Pm?t=>t:Gb;function Kb(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}n(Kb,"utf8ToBytes");function wo(t){return typeof t=="string"&&(t=Kb(t)),_i(t),t}n(wo,"toBytes");var Oi=class{static{n(this,"Hash")}};function Mm(t){let e=n((o,i)=>t(i).update(wo(o)).digest(),"hashC"),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=o=>t(o),e}n(Mm,"createOptHasher");var Dm=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);a();c();var Di=BigInt(4294967295),Bm=BigInt(32);function Lm(t,e=!1){return e?{h:Number(t&Di),l:Number(t>>Bm&Di)}:{h:Number(t>>Bm&Di)|0,l:Number(t&Di)|0}}n(Lm,"fromBig");var ja=n((t,e,r)=>t>>>r|e<<32-r,"rotrSH"),Va=n((t,e,r)=>t<<32-r|e>>>r,"rotrSL"),Fm=n((t,e,r)=>t<<64-r|e>>>r-32,"rotrBH"),Nm=n((t,e,r)=>t>>>r-32|e<<64-r,"rotrBL"),Um=n((t,e)=>e,"rotr32H"),jm=n((t,e)=>t,"rotr32L");function $a(t,e,r,o){let i=(e>>>0)+(o>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}n($a,"add");var za=n((t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),"add3L"),Ha=n((t,e,r,o)=>e+r+o+(t/2**32|0)|0,"add3H");var Te=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),k=new Uint32Array(32);function ar(t,e,r,o,i,s){let l=i[s],u=i[s+1],d=k[2*t],m=k[2*t+1],f=k[2*e],y=k[2*e+1],w=k[2*r],S=k[2*r+1],b=k[2*o],C=k[2*o+1],T=za(d,f,l);m=Ha(T,m,y,u),d=T|0,{Dh:C,Dl:b}={Dh:C^m,Dl:b^d},{Dh:C,Dl:b}={Dh:Um(C,b),Dl:jm(C,b)},{h:S,l:w}=$a(S,w,C,b),{Bh:y,Bl:f}={Bh:y^S,Bl:f^w},{Bh:y,Bl:f}={Bh:ja(y,f,24),Bl:Va(y,f,24)},k[2*t]=d,k[2*t+1]=m,k[2*e]=f,k[2*e+1]=y,k[2*r]=w,k[2*r+1]=S,k[2*o]=b,k[2*o+1]=C}n(ar,"G1b");function cr(t,e,r,o,i,s){let l=i[s],u=i[s+1],d=k[2*t],m=k[2*t+1],f=k[2*e],y=k[2*e+1],w=k[2*r],S=k[2*r+1],b=k[2*o],C=k[2*o+1],T=za(d,f,l);m=Ha(T,m,y,u),d=T|0,{Dh:C,Dl:b}={Dh:C^m,Dl:b^d},{Dh:C,Dl:b}={Dh:ja(C,b,16),Dl:Va(C,b,16)},{h:S,l:w}=$a(S,w,C,b),{Bh:y,Bl:f}={Bh:y^S,Bl:f^w},{Bh:y,Bl:f}={Bh:Fm(y,f,63),Bl:Nm(y,f,63)},k[2*t]=d,k[2*t+1]=m,k[2*e]=f,k[2*e+1]=y,k[2*r]=w,k[2*r+1]=S,k[2*o]=b,k[2*o+1]=C}n(cr,"G2b");function Qb(t,e={},r,o,i){if(Pi(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");let{key:s,salt:l,personalization:u}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(l!==void 0&&l.length!==o)throw new Error("salt must be undefined or "+o);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}n(Qb,"checkBlake2Opts");var Ga=class extends Oi{static{n(this,"BLAKE2")}constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Pi(e),Pi(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Zo(this.buffer)}update(e){Ua(this),e=wo(e),_i(e);let{blockLen:r,buffer:o,buffer32:i}=this,s=e.length,l=e.byteOffset,u=e.buffer;for(let d=0;d<s;){this.pos===r&&(Pr(i),this.compress(i,0,!1),Pr(i),this.pos=0);let m=Math.min(r-this.pos,s-d),f=l+d;if(m===r&&!(f%4)&&d+m<s){let y=new Uint32Array(u,f,Math.floor((s-d)/4));Pr(y);for(let w=0;d+r<s;w+=i.length,d+=r)this.length+=r,this.compress(y,w,!1);Pr(y);continue}o.set(e.subarray(d,d+m),this.pos),this.pos+=m,this.length+=m,d+=m}return this}digestInto(e){Ua(this),Om(e,this);let{pos:r,buffer32:o}=this;this.finished=!0,Mi(this.buffer.subarray(r)),Pr(o),this.compress(o,0,!0),Pr(o);let i=Zo(e);this.get().forEach((s,l)=>i[l]=It(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){let{buffer:r,length:o,finished:i,destroyed:s,outputLen:l,pos:u}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=o,e.pos=u,e.outputLen=l,e}clone(){return this._cloneInto()}},Bi=class extends Ga{static{n(this,"BLAKE2b")}constructor(e={}){let r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Te[0]|0,this.v0h=Te[1]|0,this.v1l=Te[2]|0,this.v1h=Te[3]|0,this.v2l=Te[4]|0,this.v2h=Te[5]|0,this.v3l=Te[6]|0,this.v3h=Te[7]|0,this.v4l=Te[8]|0,this.v4h=Te[9]|0,this.v5l=Te[10]|0,this.v5h=Te[11]|0,this.v6l=Te[12]|0,this.v6h=Te[13]|0,this.v7l=Te[14]|0,this.v7h=Te[15]|0,Qb(r,e,64,16,16);let{key:o,personalization:i,salt:s}=e,l=0;if(o!==void 0&&(o=wo(o),l=o.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,s!==void 0){s=wo(s);let u=Zo(s);this.v4l^=It(u[0]),this.v4h^=It(u[1]),this.v5l^=It(u[2]),this.v5h^=It(u[3])}if(i!==void 0){i=wo(i);let u=Zo(i);this.v6l^=It(u[0]),this.v6h^=It(u[1]),this.v7l^=It(u[2]),this.v7h^=It(u[3])}if(o!==void 0){let u=new Uint8Array(this.blockLen);u.set(o),this.update(u)}}get(){let{v0l:e,v0h:r,v1l:o,v1h:i,v2l:s,v2h:l,v3l:u,v3h:d,v4l:m,v4h:f,v5l:y,v5h:w,v6l:S,v6h:b,v7l:C,v7h:T}=this;return[e,r,o,i,s,l,u,d,m,f,y,w,S,b,C,T]}set(e,r,o,i,s,l,u,d,m,f,y,w,S,b,C,T){this.v0l=e|0,this.v0h=r|0,this.v1l=o|0,this.v1h=i|0,this.v2l=s|0,this.v2h=l|0,this.v3l=u|0,this.v3h=d|0,this.v4l=m|0,this.v4h=f|0,this.v5l=y|0,this.v5h=w|0,this.v6l=S|0,this.v6h=b|0,this.v7l=C|0,this.v7h=T|0}compress(e,r,o){this.get().forEach((d,m)=>k[m]=d),k.set(Te,16);let{h:i,l:s}=Lm(BigInt(this.length));k[24]=Te[8]^s,k[25]=Te[9]^i,o&&(k[28]=~k[28],k[29]=~k[29]);let l=0,u=Dm;for(let d=0;d<12;d++)ar(0,4,8,12,e,r+2*u[l++]),cr(0,4,8,12,e,r+2*u[l++]),ar(1,5,9,13,e,r+2*u[l++]),cr(1,5,9,13,e,r+2*u[l++]),ar(2,6,10,14,e,r+2*u[l++]),cr(2,6,10,14,e,r+2*u[l++]),ar(3,7,11,15,e,r+2*u[l++]),cr(3,7,11,15,e,r+2*u[l++]),ar(0,5,10,15,e,r+2*u[l++]),cr(0,5,10,15,e,r+2*u[l++]),ar(1,6,11,12,e,r+2*u[l++]),cr(1,6,11,12,e,r+2*u[l++]),ar(2,7,8,13,e,r+2*u[l++]),cr(2,7,8,13,e,r+2*u[l++]),ar(3,4,9,14,e,r+2*u[l++]),cr(3,4,9,14,e,r+2*u[l++]);this.v0l^=k[0]^k[16],this.v0h^=k[1]^k[17],this.v1l^=k[2]^k[18],this.v1h^=k[3]^k[19],this.v2l^=k[4]^k[20],this.v2h^=k[5]^k[21],this.v3l^=k[6]^k[22],this.v3h^=k[7]^k[23],this.v4l^=k[8]^k[24],this.v4h^=k[9]^k[25],this.v5l^=k[10]^k[26],this.v5h^=k[11]^k[27],this.v6l^=k[12]^k[28],this.v6h^=k[13]^k[29],this.v7l^=k[14]^k[30],this.v7h^=k[15]^k[31],Mi(k)}destroy(){this.destroyed=!0,Mi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Vm=Mm(t=>new Bi(t));var $m=Vm;var Wb="object",Yb="ID",Xb="ascii",Jb="String",Zb="string",eS="String",tS="option",rS="Option";function zm(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&U(e.package)===U("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}n(zm,"isTxContext");function Li(t){if(typeof t=="string")switch(t){case"address":return V.Address;case"bool":return V.Bool;case"u8":return V.U8;case"u16":return V.U16;case"u32":return V.U32;case"u64":return V.U64;case"u128":return V.U128;case"u256":return V.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return V.vector(V.U8).transform({input:n(r=>typeof r=="string"?new TextEncoder().encode(r):r,"input"),output:n(r=>r,"output")});let e=Li(t.vector);return e?V.vector(e):null}if("datatype"in t){let e=U(t.datatype.package);if(e===U(Fa)){if(t.datatype.module===Xb&&t.datatype.type===Jb)return V.String;if(t.datatype.module===Zb&&t.datatype.type===eS)return V.String;if(t.datatype.module===tS&&t.datatype.type===rS){let r=Li(t.datatype.typeParameters[0]);return r?V.vector(r):null}}if(e===U(Ri)&&t.datatype.module===Wb&&t.datatype.type===Yb)return V.Address}return null}n(Li,"getPureBcsSchema");function Hm(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:en(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:en(t.MutableReference)}:{ref:null,body:en(t)}}n(Hm,"normalizedTypeToMoveTypeSignature");function en(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:en(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(en)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}n(en,"normalizedTypeToMoveTypeSignatureBody");a();c();function oS(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?de(t):t.toBase64()}}}n(oS,"Pure");var dt={Pure:oS,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:U(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:U(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:U(t)}}}}};a();c();a();c();function ur(t){let e=Object.entries(t).map(([r,o])=>v({[r]:o}));return ee(we(e),Ln(r=>({...r,$kind:Object.keys(r)[0]})))}n(ur,"safeEnum");var _r=ee(L(),Ln(t=>U(t)),Xr(We)),Fe=_r,lr=L(),Be=ee(we([L(),ee(le(),ue())]),Xr(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),pt=v({objectId:_r,version:Be,digest:L()}),ce=ee(we([v({GasCoin:M(!0)}),v({Input:ee(le(),ue()),type:Ee(M("pure"))}),v({Input:ee(le(),ue()),type:Ee(M("object"))}),v({Result:ee(le(),ue())}),v({NestedResult:Fn([ee(le(),ue()),ee(le(),ue())])})]),Ln(t=>({...t,$kind:Object.keys(t)[0]}))),nS=v({budget:W(Be),price:W(Be),owner:W(_r),payment:W(_(pt))}),g0=v({address:L(),module:L(),name:L(),typeParams:_(L())}),Ka=we([M("address"),M("bool"),M("u8"),M("u16"),M("u32"),M("u64"),M("u128"),M("u256"),v({vector:Zr(()=>Ka)}),v({datatype:v({package:L(),module:L(),type:L(),typeParameters:_(Zr(()=>Ka))})}),v({typeParameter:ee(le(),ue())})]),iS=v({ref:W(we([M("&"),M("&mut")])),body:Ka}),sS=v({package:Fe,module:L(),function:L(),typeArguments:_(L()),arguments:_(ce),_argumentTypes:Ee(W(_(iS)))}),aS=v({name:L(),inputs:eo(L(),we([ce,_(ce)])),data:eo(L(),Pt())}),cS=ur({MoveCall:sS,TransferObjects:v({objects:_(ce),address:ce}),SplitCoins:v({coin:ce,amounts:_(ce)}),MergeCoins:v({destination:ce,sources:_(ce)}),Publish:v({modules:_(lr),dependencies:_(Fe)}),MakeMoveVec:v({type:W(L()),elements:_(ce)}),Upgrade:v({modules:_(lr),dependencies:_(Fe),package:Fe,ticket:ce}),$Intent:aS}),Gm=ur({ImmOrOwnedObject:pt,SharedObject:v({objectId:Fe,initialSharedVersion:Be,mutable:Jr()}),Receiving:pt}),lS=ur({Object:Gm,Pure:v({bytes:lr}),UnresolvedPure:v({value:Pt()}),UnresolvedObject:v({objectId:Fe,version:Ee(W(Be)),digest:Ee(W(L())),initialSharedVersion:Ee(W(Be))})}),qa=ur({Object:Gm,Pure:v({bytes:lr})}),Qa=ur({None:M(!0),Epoch:Be}),To=v({version:M(2),sender:Xt(_r),expiration:Xt(Qa),gasData:nS,inputs:_(lS),commands:_(cS)});var dr={MoveCall(t){let[e,r="",o=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:o,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>ne(ce,r)),address:ne(ce,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:ne(ce,t),amounts:e.map(r=>ne(ce,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:ne(ce,t),sources:e.map(r=>ne(ce,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:de(new Uint8Array(r))),dependencies:e.map(r=>Ve(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:o}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:de(new Uint8Array(i))),dependencies:e.map(i=>Ve(i)),package:r,ticket:ne(ce,o)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>ne(ce,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([o,i])=>[o,Array.isArray(i)?i.map(s=>ne(ce,s)):ne(ce,i)])),data:r}}}};a();c();a();c();var Wa=v({digest:L(),objectId:L(),version:we([ee(le(),ue()),L(),us()])}),uS=ur({ImmOrOwned:Wa,Shared:v({objectId:Fe,initialSharedVersion:Be,mutable:Jr()}),Receiving:Wa}),Km=ur({Object:uS,Pure:_(ee(le(),ue()))}),Qm=we([v({kind:M("Input"),index:ee(le(),ue()),value:Pt(),type:Ee(M("object"))}),v({kind:M("Input"),index:ee(le(),ue()),value:Pt(),type:M("pure")})]),dS=we([v({Epoch:ee(le(),ue())}),v({None:W(M(!0))})]),qm=ee(we([le(),L(),us()]),Xr(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Ya=we([v({bool:W(M(!0))}),v({u8:W(M(!0))}),v({u64:W(M(!0))}),v({u128:W(M(!0))}),v({address:W(M(!0))}),v({signer:W(M(!0))}),v({vector:Zr(()=>Ya)}),v({struct:Zr(()=>pS)}),v({u16:W(M(!0))}),v({u32:W(M(!0))}),v({u256:W(M(!0))})]),pS=v({address:L(),module:L(),name:L(),typeParams:_(Ya)}),mS=v({budget:Ee(qm),price:Ee(qm),payment:Ee(_(Wa)),owner:Ee(L())}),fS=[Qm,v({kind:M("GasCoin")}),v({kind:M("Result"),index:ee(le(),ue())}),v({kind:M("NestedResult"),index:ee(le(),ue()),resultIndex:ee(le(),ue())})],Ut=we([...fS]),hS=v({kind:M("MoveCall"),target:ee(L(),Xr(t=>t.split("::").length===3)),typeArguments:_(L()),arguments:_(Ut)}),gS=v({kind:M("TransferObjects"),objects:_(Ut),address:Ut}),yS=v({kind:M("SplitCoins"),coin:Ut,amounts:_(Ut)}),bS=v({kind:M("MergeCoins"),destination:Ut,sources:_(Ut)}),SS=v({kind:M("MakeMoveVec"),type:we([v({Some:Ya}),v({None:W(M(!0))})]),objects:_(Ut)}),CS=v({kind:M("Publish"),modules:_(_(ee(le(),ue()))),dependencies:_(L())}),wS=v({kind:M("Upgrade"),modules:_(_(ee(le(),ue()))),dependencies:_(L()),packageId:L(),ticket:Ut}),TS=[hS,gS,yS,bS,CS,wS,SS],xS=we([...TS]),_0=v({version:M(1),sender:Ee(L()),expiration:Xt(dS),gasConfig:mS,inputs:_(Qm),transactions:_(xS)});function Xa(t){let e=t.inputs.map((r,o)=>{if(r.Object)return{kind:"Input",index:o,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(De(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:Lt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(o=>Ft(o,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:Ft(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(o=>Ft(o,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(o=>Ft(o,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(o=>Array.from(De(o))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:Ft(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(o=>Ft(o,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(o=>Ft(o,e)),address:Ft(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(o=>Array.from(De(o))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:Ft(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}n(Xa,"serializeV1TransactionData");function Ft(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}n(Ft,"convertTransactionArgument");function Wm(t){return ne(To,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Lo(Km,e.value)){let r=ne(Km,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:de(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?Lt.tagToString(e.type.Some):null,elements:e.objects.map(r=>Nt(r))}};case"MergeCoins":return{MergeCoins:{destination:Nt(e.destination),sources:e.sources.map(r=>Nt(r))}};case"MoveCall":{let[r,o,i]=e.target.split("::");return{MoveCall:{package:r,module:o,function:i,typeArguments:e.typeArguments,arguments:e.arguments.map(s=>Nt(s))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>de(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:Nt(e.coin),amounts:e.amounts.map(r=>Nt(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>Nt(r)),address:Nt(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>de(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:Nt(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}n(Wm,"transactionDataFromV1");function Nt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}n(Nt,"parseV1TransactionArgument");a();c();function tn(t){return we(Object.entries(t).map(([e,r])=>v({[e]:r})))}n(tn,"enumUnion");var mt=tn({GasCoin:M(!0),Input:ee(le(),ue()),Result:ee(le(),ue()),NestedResult:Fn([ee(le(),ue()),ee(le(),ue())])}),AS=v({budget:W(Be),price:W(Be),owner:W(_r),payment:W(_(pt))}),ES=v({package:Fe,module:L(),function:L(),typeArguments:_(L()),arguments:_(mt)}),IS=v({name:L(),inputs:eo(L(),we([mt,_(mt)])),data:eo(L(),Pt())}),vS=tn({MoveCall:ES,TransferObjects:v({objects:_(mt),address:mt}),SplitCoins:v({coin:mt,amounts:_(mt)}),MergeCoins:v({destination:mt,sources:_(mt)}),Publish:v({modules:_(lr),dependencies:_(Fe)}),MakeMoveVec:v({type:W(L()),elements:_(mt)}),Upgrade:v({modules:_(lr),dependencies:_(Fe),package:Fe,ticket:mt}),$Intent:IS}),kS=tn({ImmOrOwnedObject:pt,SharedObject:v({objectId:Fe,initialSharedVersion:Be,mutable:Jr()}),Receiving:pt}),RS=tn({Object:kS,Pure:v({bytes:lr}),UnresolvedPure:v({value:Pt()}),UnresolvedObject:v({objectId:Fe,version:Ee(W(Be)),digest:Ee(W(L())),initialSharedVersion:Ee(W(Be))})}),OS=tn({None:M(!0),Epoch:Be}),Ym=v({version:M(2),sender:Xt(_r),expiration:Xt(OS),gasData:AS,inputs:_(RS),commands:_(vS)});a();c();var PS=50,_S=1000n,MS=5e10;async function Jm(t,e,r){return await NS(t,e),await FS(t,e),e.onlyTransactionKind||(await DS(t,e),await BS(t,e),await LS(t,e)),await US(t),await r()}n(Jm,"resolveTransactionData");async function DS(t,e){t.gasConfig.price||(t.gasConfig.price=String(await rn(e).getReferenceGasPrice()))}n(DS,"setGasPrice");async function BS(t,e){if(t.gasConfig.budget)return;let r=await rn(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(MS),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let o=_S*BigInt(t.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+o,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}n(BS,"setGasBudget");async function LS(t,e){if(!t.gasConfig.payment){let o=(await rn(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Na})).data.filter(i=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?i.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!o.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=o.map(i=>ne(pt,i))}}n(LS,"setGasPayment");async function FS(t,e){let r=t.inputs.filter(f=>f.UnresolvedObject&&!(f.UnresolvedObject.version||f.UnresolvedObject?.initialSharedVersion)),o=[...new Set(r.map(f=>Ve(f.UnresolvedObject.objectId)))],i=o.length?zS(o,PS):[],s=(await Promise.all(i.map(f=>rn(e).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat(),l=new Map(o.map((f,y)=>[f,s[y]])),u=Array.from(l).filter(([f,y])=>y.error).map(([f,y])=>JSON.stringify(y.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);let d=s.map(f=>{if(f.error||!f.data)throw new Error(`Failed to fetch object: ${f.error}`);let y=f.data.owner,w=y&&typeof y=="object"&&"Shared"in y?y.Shared.initial_shared_version:null;return{objectId:f.data.objectId,digest:f.data.digest,version:f.data.version,initialSharedVersion:w}}),m=new Map(o.map((f,y)=>[f,d[y]]));for(let[f,y]of t.inputs.entries()){if(!y.UnresolvedObject)continue;let w,S=U(y.UnresolvedObject.objectId),b=m.get(S);y.UnresolvedObject.initialSharedVersion??b?.initialSharedVersion?w=dt.SharedObjectRef({objectId:S,initialSharedVersion:y.UnresolvedObject.initialSharedVersion||b?.initialSharedVersion,mutable:jS(t,f)}):VS(t,f)&&(w=dt.ReceivingRef({objectId:S,digest:y.UnresolvedObject.digest??b?.digest,version:y.UnresolvedObject.version??b?.version})),t.inputs[t.inputs.indexOf(y)]=w??dt.ObjectRef({objectId:S,digest:y.UnresolvedObject.digest??b?.digest,version:y.UnresolvedObject.version??b?.version})}}n(FS,"resolveObjectReferences");async function NS(t,e){let{inputs:r,commands:o}=t,i=[],s=new Set;o.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(f=>f.$kind==="Input"?t.inputs[f.Input]:null).some(f=>f?.UnresolvedPure||f?.UnresolvedObject)){let f=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;s.add(f),i.push(u.MoveCall)}}switch(u.$kind){case"SplitCoins":u.SplitCoins.amounts.forEach(d=>{Xm(d,V.U64,t)});break;case"TransferObjects":Xm(u.TransferObjects.address,V.Address,t);break}});let l=new Map;if(s.size>0){let u=rn(e);await Promise.all([...s].map(async d=>{let[m,f,y]=d.split("::"),w=await u.getNormalizedMoveFunction({package:m,module:f,function:y});l.set(d,w.parameters.map(S=>Hm(S)))}))}i.length&&await Promise.all(i.map(async u=>{let d=l.get(`${u.package}::${u.module}::${u.function}`);if(!d)return;let f=d.length>0&&zm(d.at(-1))?d.slice(0,d.length-1):d;u._argumentTypes=f})),o.forEach(u=>{if(!u.MoveCall)return;let d=u.MoveCall,m=`${d.package}::${d.module}::${d.function}`,f=d._argumentTypes;if(f){if(f.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${m}`);f.forEach((y,w)=>{let S=d.arguments[w];if(S.$kind!=="Input")return;let b=r[S.Input];if(!b.UnresolvedPure&&!b.UnresolvedObject)return;let C=b.UnresolvedPure?.value??b.UnresolvedObject?.objectId,T=Li(y.body);if(T){S.type="pure",r[r.indexOf(b)]=dt.Pure(T.serialize(C));return}if(typeof C!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(C,null,2)}`);S.type="object";let x=b.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:C}}:b;r[S.Input]=x})}})}n(NS,"normalizeInputs");function US(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}n(US,"validate");function Xm(t,e,r){if(t.$kind!=="Input")return;let o=r.inputs[t.Input];o.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=dt.Pure(e.serialize(o.UnresolvedPure.value)))}n(Xm,"normalizeRawArgument");function jS(t,e){let r=!1;return t.getInputUses(e,(o,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(o);r=i.MoveCall._argumentTypes[s].ref!=="&"||r}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(r=!0)}),r}n(jS,"isUsedAsMutable");function VS(t,e){let r=!1;return t.getInputUses(e,(o,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(o);r=$S(i.MoveCall._argumentTypes[s])||r}}),r}n(VS,"isUsedAsReceiving");function $S(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}n($S,"isReceivingType");function rn(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}n(rn,"getClient");function zS(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,o)=>t.slice(o*e,o*e+e))}n(zS,"chunk");a();c();function Zm(t){function e(r){return t(r)}return n(e,"object"),e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:o})=>i=>i.moveCall({typeArguments:[r],target:`0x1::option::${o===null?"none":"some"}`,arguments:o===null?[]:[i.object(o)]}),e}n(Zm,"createObjectMethods");a();c();function ef(t){function e(r,o){if(typeof r=="string")return t(Co(r).serialize(o));if(r instanceof Uint8Array||yo(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return n(e,"pure"),e.u8=r=>t(V.U8.serialize(r)),e.u16=r=>t(V.U16.serialize(r)),e.u32=r=>t(V.U32.serialize(r)),e.u64=r=>t(V.U64.serialize(r)),e.u128=r=>t(V.U128.serialize(r)),e.u256=r=>t(V.U256.serialize(r)),e.bool=r=>t(V.Bool.serialize(r)),e.string=r=>t(V.String.serialize(r)),e.address=r=>t(V.Address.serialize(r)),e.id=e.address,e.vector=(r,o)=>t(V.vector(Co(r)).serialize(o)),e.option=(r,o)=>t(V.option(Co(r)).serialize(o)),e}n(ef,"createPure");a();c();a();c();function tf(t,e){let r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),o=new Uint8Array(r.length+e.length);return o.set(r),o.set(e,r.length),$m(o,{dkLen:32})}n(tf,"hashTypedData");function rf(t){return U(t).replace("0x","")}n(rf,"prepareSuiAddress");var pr=class t{static{n(this,"TransactionDataBuilder")}constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let o=V.TransactionKind.parse(e).ProgrammableTransaction;if(!o)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:o.inputs,commands:o.commands})}static fromBytes(e){let o=V.TransactionData.parse(e)?.V1,i=o.kind.ProgrammableTransaction;if(!o||!i)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:o.sender,expiration:o.expiration,gasData:o.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new t(ne(To,e)):new t(ne(To,Wm(e)))}static getDigestFromBytes(e){let r=tf("TransactionData",e);return Bt(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:o}={}){let i=this.inputs,s=this.commands,l={ProgrammableTransaction:{inputs:i,commands:s}};if(o)return V.TransactionKind.serialize(l,{maxSize:e}).toBytes();let u=r?.expiration??this.expiration,d=r?.sender??this.sender,m={...this.gasData,...r?.gasConfig,...r?.gasData};if(!d)throw new Error("Missing transaction sender");if(!m.budget)throw new Error("Missing gas budget");if(!m.payment)throw new Error("Missing gas payment");if(!m.price)throw new Error("Missing gas price");let f={sender:rf(d),expiration:u||{None:!0},gasData:{payment:m.payment,owner:rf(this.gasData.owner??d),price:BigInt(m.price),budget:BigInt(m.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return V.TransactionData.serialize({V1:f},{maxSize:e}).toBytes()}addInput(e,r){let o=this.inputs.length;return this.inputs.push(r),{Input:o,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((o,i)=>(o.$kind==="Input"&&o.Input===e&&r(o,i),o))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>e(i,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>e(i,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>e(i,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>e(i,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>e(i,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let o=r.$Intent.inputs;r.$Intent.inputs={};for(let[i,s]of Object.entries(o))r.$Intent.inputs[i]=Array.isArray(s)?s.map(l=>e(l,r)):e(s,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let o=r.length-1;this.commands.splice(e,1,...r),o!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=o);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=o);break}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return ne(To,this)}};a();c();function Ja(t){if(typeof t=="string")return U(t);if(t.Object)return t.Object.ImmOrOwnedObject?U(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?U(t.Object.Receiving.objectId):U(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return U(t.UnresolvedObject.objectId)}n(Ja,"getIdFromCallArg");var sf=n(t=>{throw TypeError(t)},"__typeError"),rc=n((t,e,r)=>e.has(t)||sf("Cannot "+r),"__accessCheck"),H=n((t,e,r)=>(rc(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),on=n((t,e,r)=>e.has(t)?sf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Mr=n((t,e,r,o)=>(rc(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),"__privateSet"),jt=n((t,e,r)=>(rc(t,e,"access private method"),r),"__privateMethod"),sn,an,Dr,K,ft,Fi,oc,ec,nc;function of(t,e=1/0){let r={$kind:"Result",Result:t},o=[],i=n(s=>o[s]??(o[s]={$kind:"NestedResult",NestedResult:[t,s]}),"nestedResultFor");return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,l){if(l in s)return Reflect.get(s,l);if(l===Symbol.iterator)return function*(){let d=0;for(;d<e;)yield i(d),d++};if(typeof l=="symbol")return;let u=parseInt(l,10);if(!(Number.isNaN(u)||u<0))return i(u)}})}n(of,"createTransactionResult");var af=Symbol.for("@mysten/transaction");function Ni(t){return!!t&&typeof t=="object"&&t[af]===!0}n(Ni,"isTransaction");var nf={buildPlugins:new Map,serializationPlugins:new Map},Za=Symbol.for("@mysten/transaction/registry");function nn(){try{let t=globalThis;return t[Za]||(t[Za]=nf),t[Za]}catch{return nf}}n(nn,"getGlobalPluginRegistry");var HS=class tc{static{n(this,"_Transaction")}constructor(){on(this,ft),on(this,sn),on(this,an),on(this,Dr,new Map),on(this,K),this.object=Zm(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Lo(ce,r))return r;let o=Ja(r),i=H(this,K).inputs.find(s=>o===Ja(s));return i?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||r.Object.SharedObject.mutable),i?{$kind:"Input",Input:H(this,K).inputs.indexOf(i),type:"object"}:H(this,K).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:U(r)}}:r)});let e=nn();Mr(this,K,new pr),Mr(this,an,[...e.buildPlugins.values()]),Mr(this,sn,[...e.serializationPlugins.values()])}static fromKind(e){let r=new tc;return Mr(r,K,pr.fromKindBytes(typeof e=="string"?De(e):e)),r}static from(e){let r=new tc;return Ni(e)?Mr(r,K,new pr(e.getData())):typeof e!="string"||!e.startsWith("{")?Mr(r,K,pr.fromBytes(typeof e=="string"?De(e):e)):Mr(r,K,pr.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){nn().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){nn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){nn().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){nn().buildPlugins.delete(e)}addSerializationPlugin(e){H(this,sn).push(e)}addBuildPlugin(e){H(this,an).push(e)}addIntentResolver(e,r){if(H(this,Dr).has(e)&&H(this,Dr).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);H(this,Dr).set(e,r)}setSender(e){H(this,K).sender=e}setSenderIfNotSet(e){H(this,K).sender||(H(this,K).sender=e)}setExpiration(e){H(this,K).expiration=e?ne(Qa,e):null}setGasPrice(e){H(this,K).gasConfig.price=String(e)}setGasBudget(e){H(this,K).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){H(this,K).gasData.budget==null&&(H(this,K).gasConfig.budget=String(e))}setGasOwner(e){H(this,K).gasConfig.owner=e}setGasPayment(e){H(this,K).gasConfig.payment=e.map(r=>ne(pt,r))}get blockData(){return Xa(H(this,K).snapshot())}getData(){return H(this,K).snapshot()}get[af](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ef(e=>yo(e)?H(this,K).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):H(this,K).addInput("pure",Lo(qa,e)?ne(qa,e):e instanceof Uint8Array?dt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(dt.ObjectRef(...e))}receivingRef(...e){return this.object(dt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(dt.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=H(this,K).commands.push(e);return of(r-1)}splitCoins(e,r){let o=dr.SplitCoins(typeof e=="string"?this.object(e):jt(this,ft,oc).call(this,e),r.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):jt(this,ft,Fi).call(this,s))),i=H(this,K).commands.push(o);return of(i-1,r.length)}mergeCoins(e,r){return this.add(dr.MergeCoins(this.object(e),r.map(o=>this.object(o))))}publish({modules:e,dependencies:r}){return this.add(dr.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:o,ticket:i}){return this.add(dr.Upgrade({modules:e,dependencies:r,package:o,ticket:this.object(i)}))}moveCall({arguments:e,...r}){return this.add(dr.MoveCall({...r,arguments:e?.map(o=>jt(this,ft,Fi).call(this,o))}))}transferObjects(e,r){return this.add(dr.TransferObjects(e.map(o=>this.object(o)),typeof r=="string"?this.pure.address(r):jt(this,ft,Fi).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(dr.MakeMoveVec({type:e,elements:r.map(o=>this.object(o))}))}serialize(){return JSON.stringify(Xa(H(this,K).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(ne(Ym,H(this,K).snapshot()),(r,o)=>typeof o=="bigint"?o.toString():o,2)}async sign(e){let{signer:r,...o}=e,i=await this.build(o);return r.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await jt(this,ft,ec).call(this,e),H(this,K).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await jt(this,ft,ec).call(this,e),H(this,K).getDigest()}async prepareForSerialization(e){let r=new Set;for(let i of H(this,K).commands)i.$Intent&&r.add(i.$Intent.name);let o=[...H(this,sn)];for(let i of r)if(!e.supportedIntents?.includes(i)){if(!H(this,Dr).has(i))throw new Error(`Missing intent resolver for ${i}`);o.push(H(this,Dr).get(i))}await jt(this,ft,nc).call(this,o,e)}};sn=new WeakMap;an=new WeakMap;Dr=new WeakMap;K=new WeakMap;ft=new WeakSet;Fi=n(function(t){return yo(t)?this.pure(t):jt(this,ft,oc).call(this,t)},"normalizeTransactionArgument_fn");oc=n(function(t){return typeof t=="function"?ne(ce,t(this)):ne(ce,t)},"resolveArgument_fn");ec=n(async function(t){if(!t.onlyTransactionKind&&!H(this,K).sender)throw new Error("Missing transaction sender");await jt(this,ft,nc).call(this,[...H(this,an),Jm],t)},"prepareBuild_fn");nc=n(async function(t,e){let r=n(o=>{if(o>=t.length)return()=>{};let i=t[o];return async()=>{let s=r(o+1),l=!1,u=!1;if(await i(H(this,K),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${o}`);l=!0,await s(),u=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${o}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${o}`)}},"createNext");await r(0)()},"runPlugins_fn");var ic=HS;var GS=Symbol.for("@mysten/SuiClient");var cn=class{static{n(this,"SuiClient")}get[GS](){return!0}constructor(e){this.transport=e.transport??new yi({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!bo(Ve(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(o=>{if(!o||!bo(Ve(o)))throw new Error(`Invalid Sui Object id ${o}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!vi(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(o=>{if(!vi(o))throw new Error(`Invalid Transaction digest ${o}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:o,requestType:i}){let s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:de(e),Array.isArray(r)?r:[r],o]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:r,...o}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));let{signature:s,bytes:l}=await r.signTransaction(i);return this.executeTransactionBlock({transactionBlock:l,signature:s,...o})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!We(U(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!bo(Ve(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(Ni(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=de(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=de(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:de(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!bo(Ve(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=ct(e.digest);return Et(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:o,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:i,nextCursor:o,data:s.map(l=>Rm(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:o=2*1e3,...i}){let s=AbortSignal.timeout(r),l=new Promise((u,d)=>{s.addEventListener("abort",()=>d(s.reason))});for(l.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(d=>setTimeout(d,o)),l])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var cf=n(async({chain:t,owner:e,chainData:r},{recipient:o})=>{let i=t.id,{objectId:s}=r,l=B.getRpcProxyUrl(i);if(!s)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let u=new cn({url:l}),d=new ic;d.setSender(e),d.transferObjects([s],o);let m=await d.build({client:u});return{networkID:i,transaction:m}},"createSuiTransferTransaction");async function lf(t,e,r){let{chain:o}=t,i=o.id;return B.isSolanaNetworkID(i)?nm(t,e):B.isEVMNetworkID(i)?Zp(t,e):B.isSuiNetworkID(i)?cf(t,e):B.isBitcoinNetworkID(i)?Qp(t,e,r):Fc(i)}n(lf,"createTransferTransaction");var KS="collectible-transfer-tx",qS=G({seconds:30});function QS(t){return t&&!t.isNaN()}n(QS,"isValidAmountFn");function WS(t){let{collectible:e,sendFormValues:r}=t??{},{chain:o,owner:i}=e??{},{id:s}=o??{},{recipient:l,amountAsset:u}=r??{},d=gu(l,s)??"",m=u?.isNaN()?void 0:u,f=QS(m),{data:y}=Qr({address:i,networkID:s}),{data:w}=fu(y),{data:S}=uu({networkID:s,enableFallback:!0}),b=YS(s,S,w,y),C=b?.sendContextRequired?b.sendContext:void 0;return be({staleTime:qS,enabled:f&&!!e&&!!t&&!!b,queryKey:ae.transferTransaction({collectible:e,sendFormValues:r,sendContext:C}),async queryFn(){try{if(!e||!r||!b)throw new Error("Missing required data to construct fungible transfer transaction");return await lf(e,{...r,recipient:d},C)}catch(T){if(Qt(T)){let x=T.response?.status;tr(T,x,KS)}throw T}}})}n(WS,"useCollectibleTransferTransaction");function YS(t,e,r,o){if(t)return B.isBitcoinNetworkID(t)?!e||!r||!o?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:o}}:{sendContextRequired:!1}}n(YS,"createSendContext");a();c();var uf=I(R(),1);function sc(t){let e=ii(me.PinnedCollections);return{data:(0,uf.useMemo)(()=>t?e?.[t]??[]:[],[t,e]),isPending:!!t&&e===void 0}}n(sc,"usePinnedCollections");a();c();var df=I(R(),1);function pf(t){let{data:e,isPending:r}=Re(t);return{data:(0,df.useMemo)(()=>t?Array.from(e.values()).filter(i=>jn(i,{spamStatus:ge.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}n(pf,"useHiddenCollections");a();c();var mf=I(R(),1);var XS=n(t=>{let e=Ce();return(0,mf.useCallback)(()=>e.invalidateQueries({queryKey:ae.collections(t)}),[e,t])},"useInvalidateCollectibles");a();c();var ff=I(R(),1);var JS=2e3,Ui=class extends Tt{static{n(this,"UsePinCollectionError")}constructor(e){super(e),this.name="UsePinCollectionError"}};function hf(t){let e=Ce();return(0,ff.useCallback)(async({collectionId:r,pinned:o})=>{if(!t)return;let i=await ni(me.PinnedCollections)??{},s=i[t]??[];if(o){if(Object.values(i).reduce((d,m)=>d+m.length,0)+1>JS)throw new Ui("Pinned limit reached");i[t]=Array.from(new Set([...s,r]))}else{let u=s.indexOf(r);if(u===-1)throw new Ui("Collection not previously pinned");let d=[...s];d.splice(u,1),i[t]=d}await oi(me.PinnedCollections)(i),await e.invalidateQueries({queryKey:ae.pinnedCollections(t)})},[t,e])}n(hf,"usePinCollection");a();c();var gf=I(R(),1);var ZS=n(t=>{let e=Ce();return(0,gf.useCallback)(()=>e.refetchQueries({queryKey:ae.collections(t)}),[e,t])},"useRefetchCollectibles");a();c();a();c();var eC=new Error("Failed to report event for collectible");async function yf(t){try{let e=await se.api().post("/collectibles/v1/events",{events:t});if(!Je(e))throw new Error}catch{throw eC}}n(yf,"reportCollectibleEvent");function tC(){return An({async mutationFn({event:t}){try{await yf([t])}catch{}}})}n(tC,"useReportCollectibleEvent");a();c();function rC(){let{data:t}=dl(),e=Kr(),r=Ce(),o=mu(),i=qr();return An({mutationFn:n(async({multichainTransaction:l,pendingTransactionInput:u,senderAddress:d,optimisticUpdate:m,gasEstimation:f})=>{if(!t)throw new Error("No account identifier found");let{networkID:y}=l,w=await Nn.get(y).onBeforeSend({multichainTransaction:l,gasEstimation:f}),S=await Gl({accountIdentifier:t,accountSigner:i,multichainTransaction:w,networkID:y,pendingTransactionInput:u,senderAddress:d,storage:e,utxoManager:o});return m&&io(r,m),Hl(y,S)},"mutationFn"),onError(l){l instanceof Error&&Z.captureError(l,te.Collectibles)}})}n(rC,"useTransferCollectible");a();c();var bf=I(R(),1);function Sf(t){let{data:e,isPending:r}=Re(t);return{data:(0,bf.useMemo)(()=>t?Array.from(e.values()).filter(i=>Wl(i,{spamStatus:ge.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}n(Sf,"useUnhiddenCollections");a();c();var Cf=I(R(),1);var ac=class extends uo{static{n(this,"UseUnhideCollectionError")}constructor(e){super(e),this.name="UseUnhideCollectionError"}};function wf(t){let e=si(t);return(0,Cf.useCallback)(async({collectionId:r})=>{try{await e([{id:r,visibility:oe.Visible}],{checkLimit:!0})}catch(o){throw o instanceof uo?new ac(o.message):o}},[e])}n(wf,"useUnhideCollection");a();c();var Tf=I(R(),1);var oC=n(({id:t,addresses:e})=>{let{data:r,isSuccess:o}=xr({addresses:e});return(0,Tf.useMemo)(()=>{let i={isSuccess:o,data:void 0};for(let s of r??[])for(let l of s.items)if(l.id===t)return{...i,data:l};return i},[t,r,o])},"useCollectible");a();c();var Br=I(R(),1);a();c();var cc=I(R(),1);var xf=n(({toast:t,accountId:e})=>{let{t:r}=N(),o=Q(),i=(0,cc.useCallback)(({collectible:l,previousVisibility:u,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsNotSpam",{data:or(l)}),t.success(u===oe.Visible?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,o]),s=(0,cc.useCallback)((l,u)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return dp({accountId:e,onSuccess:i,onError:s})},"useReportNotSpam");a();c();var lc=I(R(),1);var Af=n(({toast:t,accountId:e})=>{let{t:r}=N(),o=Q(),i=(0,lc.useCallback)(({collectible:l,previousVisibility:u,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsSpam",{data:or(l)}),t.success(u===oe.Hidden?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,o]),s=(0,lc.useCallback)((l,u)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return up({accountId:e,onSuccess:i,onError:s})},"useReportSpam");function nC({accountId:t,collectible:e,toast:r}){let o=Af({collectible:e,accountId:t,toast:r}),i=(0,Br.useCallback)(()=>{if(e)return o(e)},[o,e]),s=xf({collectible:e,accountId:t,toast:r}),l=(0,Br.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=Re(t),d=(0,Br.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),m=(0,Br.useMemo)(()=>e?Ql(d,{spamStatus:e.collection.spamStatus}):ge.NotVerified,[e,d]),f=Uo(m);return(0,Br.useMemo)(()=>({isSpam:f,spamStatus:m,onReportSpam:f?void 0:i,onReportNotSpam:f?l:void 0}),[m,f,i,l])}n(nC,"useCollectiblesReportSpam");a();c();var Ef=I(cs(),1),If=I(R(),1);a();c();var ji=n((t,e)=>{let r=new Le(t);if(r.isZero())return"0";let o=On(-e);return r.abs().lt(o)?r.isPositive()?`<${o.toFixed()}`:`-<${o.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})},"formatValue");var iC=n(t=>{let{t:e}=N();return(0,If.useMemo)(()=>{let r=[];if(!t)return r;let o=t?.chain.id,i=Ir.get(o).collectibleDetailPrecision;t.collection.name&&r.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let s,l;if(t.collection.floorPrice){let{price:m,token:f}=t.collection.floorPrice;if(f&&f.decimals&&f.symbol){let{decimals:y,symbol:w}=f,S=ao(m,y);r.push({topLeft:e("collectiblesFloorPrice"),topRight:`${ji(S,i)} ${w}`}),s=S,l=w}}let u,d;if(t.lastSalePrice){let{price:m,token:f}=t.lastSalePrice;if(f&&f.decimals&&(f.symbol||f.name)){let{decimals:y,symbol:w,name:S}=f,b=ao(m,y);r.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${ji(b,i)} ${w??S}`}),u=b,d=w}}if(s&&u&&l===d){let m=s-u;r.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${ji(m,i)} ${d}`,color:m>0?"spotPositive":m===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&r.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,Ef.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&r.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:B.getNetworkName(t.chain.id)}),Gt()&&r.push({topLeft:"Standard",topRight:sC(t)}),eu(t)&&r.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),r},[t,e])},"useCollectibleTableRows");function sC(t){let e=t.chainData;if(Ie(e))return e.standard;if(xt(e))return e.standard;if(er(e))return"Ordinals"}n(sC,"getStandard");a();c();var vf=I(R(),1);var aC=n(({id:t,addresses:e})=>{let{data:r}=xr({addresses:e});return(0,vf.useMemo)(()=>(r??[]).find(o=>o.id===t),[t,r])},"useCollection");a();c();var kf=I(R(),1);var Rf=n((t,e,r,o)=>(0,kf.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!o,[t,e,r,o]),"useIsCollectionHidden");a();c();var Of=I(R(),1);var uc=n((t,e)=>(0,Of.useMemo)(()=>e?t.includes(e):!1,[e,t]),"useIsCollectionPinned");a();c();var ln=I(R(),1);a();c();var Pf=I(R(),1);var _f=n(({accountId:t,collectionId:e,isPinned:r,pinMessages:o,pinCollection:i,toast:s,sendAnalyticEvent:l,unhideCollection:u,isHidden:d})=>(0,Pf.useCallback)(()=>{(async()=>{if(!e||!t){s.error(r?o.unpinFail:o.pinFail);return}try{await i({collectionId:e,pinned:!r}),d&&!r&&await u({collectionId:e}),s.success(r?o.unpinSuccess:o.pinSuccess),l&&l(r?"collectionUnpinned":"collectionPinned")}catch{s.error(r?o.unpinFail:o.pinFail)}})()},[e,t,r,o,i,s,l,u,d]),"usePinCollectionToggle");var cC=n(({collectionId:t,isSpam:e,accountId:r,networkId:o,toast:i})=>{let{t:s}=N(),l=Q(),u=wf(r),{data:d=[]}=pf(r),{data:m=[]}=Sf(r),f=Rf(d,m,t??"",!!e),y=hf(r),{data:w}=sc(r),S=uc(w,t??""),b=(0,ln.useMemo)(()=>({pinSuccess:s("collectionPinSuccess"),pinFail:s("collectionPinFail"),unpinSuccess:s("collectionUnpinSuccess"),unpinFail:s("collectionUnpinFail")}),[s]),C=(0,ln.useCallback)(x=>{o&&l.capture(x,{data:{networkId:o,chainId:B.getChainID(o)}})},[l,o]),T=_f({accountId:r,collectionId:t,isPinned:S,pinMessages:b,pinCollection:y,toast:i,sendAnalyticEvent:C,unhideCollection:u,isHidden:f});return(0,ln.useMemo)(()=>({isPinned:S,onTogglePin:T}),[S,T])},"usePinCollectionProps");a();c();var un=I(R(),1);var vt;(function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.LOADING="LOADING"})(vt||(vt={}));var lC=n(({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:o})=>{let i=Ir.get(t).sendSuccessCondition,s=(0,un.useMemo)(()=>e?vt.ERROR:i===Ue.SUBMISSION&&o||i===Ue.CONFIRMATION&&r?vt.SUCCESS:vt.LOADING,[r,e,o,i]),l=i===Ue.CONFIRMATION?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",u=(0,un.useMemo)(()=>{switch(s){case vt.LOADING:return O.t("sendStatusLoadingTitle");case vt.ERROR:return O.t("sendStatusErrorTitle");case vt.SUCCESS:return O.t(l)}},[s,l]),{isError:d,isSuccess:m}=(0,un.useMemo)(()=>({isError:s===vt.ERROR,isSuccess:s===vt.SUCCESS}),[s]),{transactionSpeed:f=Yr.standard}=ta(w=>w.sendFormValues),y=(0,un.useMemo)(()=>{let w=Nn.get(t).transactionSpeedDescription(f);return w?O.t(w):""},[t,f]);return{title:u,isError:d,isSuccess:m,sendSuccessCondition:i,estimatedTime:y}},"useSendCollectibleStatusViewState");a();c();var uC=n(t=>{let e=t?.media,r=e?.type||"image",o=r==="image",i=ra(e,r,!1,"small"),s=e?.previews?.small||e?.previews?.medium||e?.previews?.large;return o?i:s},"useCollectiblePreviewUri");a();c();var Mf=I(R(),1);var dC=!1,pC="small",mC="image",fC=n(t=>(0,Mf.useMemo)(()=>Df(t),[t]),"useCollectionMediaUri"),Df=n((t,e=pC)=>{if(!t)return;let{media:r,collection:o}=t,i=dC,s=mC;return r?ui({collectibleMedia:r,isImageAnimationEnabled:i,previewSize:e,mediaTypeOverride:s}):o.imageUrl},"parseCollectionMediaUri");a();c();var Bf=I(R(),1);var Lf=n(t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},"findFirstImageCollectible"),hC=n(t=>(0,Bf.useMemo)(()=>{if(t)return Lf(t)??t.items[0]},[t]),"useCollectionCollectible");a();c();var Ff=I(R(),1);var gC=n(t=>(0,Ff.useMemo)(()=>{if(!(!t||t.items.length===0))return Nf(t)},[t]),"useCollectionItemsCount"),Nf=n(t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:o="",chainData:i}]=e;if(Ie(i)&&i.standard===br.SemiFungible){let s=parseInt(o,10);return isNaN(s)?1:s}}return r},"parseCollectionItemsCount");a();c();var Uf=I(R(),1);var yC=n(t=>(0,Uf.useMemo)(()=>t.filter(e=>{let r=e?.media;return r?r.type==="image"?!0:!!(r.previews?.small||r.previews?.medium||r.previews?.large):!1}),[t]),"useOnlyImageCollectibles");a();c();var jf=I(R(),1);var bC=n((t,e)=>(0,jf.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,o=e.explorers[r]??Sl.get(r).defaultExplorer,i,s;if(Ie(t.chainData))s="address",i=t.chainData.mint;else if(xt(t.chainData))if(t.chainData.contract)t.chainData.id?(s="nft",i=[t.chainData.contract,t.chainData.id]):(s="token",i=t.chainData.contract);else return;else{if(er(t.chainData))return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};if(Nd(t.chainData))s="nft",i=t.chainData.objectId??"";else return}if(!i)return;let l=wl({networkID:r,endpoint:s,explorerType:o,param:i});if(l)return{name:Cl[o],url:l}},[t,e]),"useCollectibleExplorer");a();c();var Vf=I(R(),1);var SC=n(t=>(0,Vf.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:o}=r.media.image;return e.has(o)?!1:(e.add(o),!0)})},[t]),"useDedupeCollectibles");a();c();var $f=I(R(),1);var CC=n(t=>{let{t:e}=N();return(0,$f.useMemo)(()=>{let o=[];if(!t)return;let i=t.chainData;if(er(i)){let{outputValue:s,satNumber:l,satName:u,inscriptionId:d,inscriptionNumber:m,protocolName:f,createdAt:y}=i,w=e("collectibleDetailOrdinalInfo"),S;return s&&(S=parseFloat(s).toLocaleString("en-US")),S&&o.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}),l&&o.push({topLeft:e("collectibleDetailSatNumber"),topRight:l}),u&&o.push({topLeft:e("collectibleDetailSatName"),topRight:u}),d&&o.push({topLeft:e("collectibleDetailInscriptionId"),topRight:cl(d,5,3)}),m&&o.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:m}),f&&o.push({topLeft:e("collectibleDetailStandard"),topRight:f?.toUpperCase()}),y&&o.push({topLeft:e("collectibleDetailCreated"),topRight:wC(new Date(y))}),{label:w,items:o.filter(ol)}}},[t,e])},"useCollectibleChainSpecificInfoSection");function wC(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}n(wC,"formatDate");a();c();var Hf=I(R(),1);var Lr=n(()=>{},"noop"),zf=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function TC(t){let{amountToBurn:e=0,explorerName:r,isBurnable:o,isHidden:i,isPinned:s,isSpam:l,onBurnToken:u,onReportNotSpam:d,onReportSpam:m,onSaveToLibrary:f,onSend:y,onSetAsAvatar:w,onToggleHide:S,onTogglePin:b,onViewOnExplorer:C,shortcuts:T,shouldDisplaySend:x,shouldDisplayShortcuts:A}=t,{t:E}=N();return(0,Hf.useMemo)(()=>{let D=[];if(x&&D.push({text:E("commandSend"),type:"send",onClick:y??Lr}),f&&D.push({text:E("assetDetailSavePhoto"),singleWordAltText:E("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:f??Lr}),w&&!l&&D.push({text:E("collectibleDetailSetAsAvatar"),singleWordAltText:E("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:w??Lr}),b){let F=E(s?"assetDetailUnpinCollection":"assetDetailPinCollection"),$=E(s?"commandUnpin":"commandPin"),Y=s?"unpin":"pin";D.push({text:F,singleWordAltText:$,type:Y,menuOnly:!0,onClick:b??Lr})}if(S){let F=E(i?"assetDetailUnhideCollection":"assetDetailHideCollection"),$=E(i?"commandUnhide":"commandHide"),Y=i?"unhide":"hide";D.push({text:F,singleWordAltText:$,type:Y,menuOnly:!0,onClick:S??Lr})}if(d){let F=E("collectiblesReportAsNotSpam");D.push({text:F,type:"reportAsNotSpam",singleWordAltText:E("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:d})}if(m){let F=E("collectiblesReportAsSpam");D.push({text:F,type:"reportAsSpam",singleWordAltText:E("commandReport"),menuOnly:!0,isDestructive:!0,onClick:m})}if(o){let F=E(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");D.push({text:F,singleWordAltText:E("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:u??Lr})}return!!C&&!!r&&D.push({text:E("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:E("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:C??Lr}),D.sort((F,$)=>(zf.get(F.type)??100)-(zf.get($.type)??100)),{actions:ru(D,4),shortcuts:A?T:[]}},[e,r,o,i,s,l,u,d,m,f,y,w,S,b,C,T,x,A,E])}n(TC,"useCollectibleCTABar");a();c();var jr=I(Ae(),1);a();c();var zi=I(R(),1);a();c();var dc={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]};var pc=30,xC=6,mc=3e4,fc=5,hc=["100","500","1000"];a();c();a();c();var xo="@phantom/fiat-ramp",dn=`${xo}:fungibles`,AC=`${xo}:payment-methods`,EC=`${xo}:providers`,IC=`${xo}:recommended-quote`,vC=`${xo}:status`,kC=`${xo}:completed`,mr={fiatRampTokens(t,e,r){return[dn,t,e,r]},fiatRampPaymentMethods(t,e,r){return[AC,t,e,r]},fiatRampProviders(t,e,r){return[EC,t,e,r]},fiatRampRecommendedQuote(t,e,r){return[IC,t,e,r]},fiatRampStatus(t,e,r){return[vC,t,e,r]},fiatRampCompleted(t,e,r){return[kC,t,e,r]}};a();c();a();c();a();c();var RC=p.object({name:p.string().nullish().default(null),symbol:p.string().nullish().default(null),decimals:p.number(),caip19:wn,logoURI:p.string().nullish().default(null)}),OC=p.object({token:RC,addressType:Nc.optional()}),yc=p.object({id:p.string(),name:p.string(),tag:p.string(),logo:p.string(),integratorId:p.string().optional(),quote:p.object({displaySourceAmount:p.string(),displayDestinationAmount:p.string(),displayFee:p.string()}).optional()}),Fr;(function(t){t.CARD="CARD",t.MOBILE_WALLET="MOBILE_WALLET",t.BANK_TRANSFER="BANK_TRANSFER",t.EXCHANGE="EXCHANGE",t.LOCAL="LOCAL"})(Fr||(Fr={}));var bc=p.object({id:p.string(),type:p.nativeEnum(Fr),name:p.string(),estimatedArrival:p.string(),assets:p.object({icon:p.string(),roundIcon:p.string()}),description:p.string().optional()}),v2=p.object({groups:p.array(p.object({groupName:p.string(),tokens:p.array(OC)}))}),k2=p.object({paymentMethods:p.array(bc),provider:yc.optional()}),R2=p.object({providers:p.array(yc),paymentMethod:bc,token:wn}),O2=p.object({provider:yc,paymentMethod:bc,location:p.object({countryCode:p.string(),subdivision:p.string().optional()}).optional(),token:wn.optional(),tokenAmount:p.string().optional(),fiatAmount:p.string().optional(),fiatCurrencyCode:p.string().optional(),minPurchaseAmount:p.string().optional(),maxPurchaseAmount:p.string().optional(),quickSelectDenominations:p.array(p.string()).optional()}),P2=p.object({url:p.string(),sessionId:p.string()}),gc;(function(t){t.PENDING="PENDING",t.COMPLETED="COMPLETED",t.FAILED="FAILED"})(gc||(gc={}));var _2=p.object({status:p.nativeEnum(gc),tokenAmount:p.number().optional(),fiatCurrencyCode:p.string().optional(),usdFiatAmount:p.number().optional(),usdFiatFeeAmount:p.number().optional(),fiatFeeAmount:p.number().optional(),cryptoTransactionId:p.string().optional(),createdAt:p.date().optional(),updatedAt:p.date().optional()}),ze=class extends Error{static{n(this,"FiatRampError")}constructor(e){super(e),this.name="FiatRampError"}};var Gf=new ze("Failed to get FiatRampPaymentMethods"),Kf=n(async(t,e,r)=>{try{let o=await se.api().headers(t).bearer(r).post("/fiat_ramp/v2/onramp/payment_methods",e);if(!Je(o))throw Gf;return o.data}catch{throw Gf}},"getPaymentMethods");var PC=G({days:7}),_C=G({hours:1}),pn=n((t,e,r,o)=>{let i={"x-client-platform":t,"x-client-app-version":e,"x-client-locale":r},{data:s}=Wt(),l=s?.userID,u=s?.accessToken;return be({queryKey:mr.fiatRampPaymentMethods(i,o,l),queryFn:n(()=>Kf(i,o,u),"queryFn"),gcTime:PC,staleTime:_C})},"useFiatRampPaymentMethods");a();c();a();c();var qf=new ze("Failed to get FiatRampProviders"),Qf=n(async(t,e,r)=>{try{let o=await se.api().headers(t).bearer(r).post("/fiat_ramp/v2/onramp/providers",e);if(!Je(o))throw qf;return o.data}catch{throw qf}},"getProviders");var MC=G({seconds:pc}),DC=G({hours:1}),Sc=n((t,e,r,o)=>{let i={"x-client-platform":t,"x-client-app-version":e,"x-client-locale":r},{data:s}=Wt(),l=s?.userID,u=s?.accessToken;return be({queryKey:mr.fiatRampProviders(i,o,l),queryFn:n(()=>Qf(i,o,u),"queryFn"),gcTime:DC,staleTime:MC,enabled:!!o.destinationAddress})},"useFiatRampProviders");a();c();a();c();var Wf=new ze("Failed to get FiatRampRecommendedQuote"),Yf=n(async(t,e,r)=>{try{let o=await se.api().headers(t).bearer(r).post("/fiat_ramp/v2/onramp/recommended_quote",e);if(!Je(o))throw Wf;return o.data}catch{throw Wf}},"getRecommendedQuote");var BC=G({days:7}),LC=G({hours:1}),Vi=n((t,e,r,o,i=!0)=>{let s={"x-client-platform":t,"x-client-app-version":e,"x-client-locale":r},{data:l}=Wt(),u=l?.userID,d=l?.accessToken;return be({queryKey:mr.fiatRampRecommendedQuote(s,o,u),queryFn:n(()=>Yf(s,o,d),"queryFn"),gcTime:BC,staleTime:LC,enabled:i})},"useFiatRampRecommendedQuote");a();c();a();c();var Xf=new ze("Failed to get FiatRampTokens"),Jf=n(async(t,e,r)=>{try{let o=await se.api().headers(t).bearer(r).post("/fiat_ramp/v2/onramp/tokens",e);if(!Je(o))throw Xf;return o.data}catch{throw Xf}},"getSupportedFiatRampTokens");a();c();var $i=n(t=>t.sort((e,r)=>B.compareNetworkID(e.token.caip19.chainId,r.token.caip19.chainId)),"sortFiatTokens");var FC=G({days:7}),NC=G({hours:1}),Ao=n((t,e,r,o=!0,i)=>{let{data:s}=bt(),l=Array.from(new Set(s?.addresses?.map(S=>S.networkID))),u=Array.from(new Set(s?.addresses?.map(S=>S.addressType))),d={chainIDs:l},m={"x-client-platform":t,"x-client-app-version":e,"x-client-locale":r},{data:f}=Wt(),y=f?.userID,w=f?.accessToken;return be({queryKey:mr.fiatRampTokens(m,d,y),queryFn:n(()=>Jf(m,d,w),"queryFn"),gcTime:FC,staleTime:NC,enabled:o&&l.length>0,select:n(S=>{let b={...S,groups:S.groups.map(C=>({...C,tokens:$i(C.tokens.filter(T=>T.addressType?u.includes(T.addressType):!0))}))};return i?i(b):b},"select")})},"useFiatRampGroupedTokens");a();c();a();c();var Zf=n(t=>{let e=t?.groups.flatMap(r=>r.tokens)??[];return $i(e)},"flattenAndSortTokens");var Eo=n((t,e,r,o=!0)=>Ao(t,e,r,o,Zf),"useAllFiatRampTokens");a();c();var Vt={onClose:n(()=>{},"onClose"),context:"modal",fungible:void 0,purchaseAmount:"0",purchaseType:"currency",isPurchaseAmountValid:!1,error:void 0,redirectErrorMessage:void 0,ownerPublicKey:"",price:0,minPurchaseAmountUsd:fc,maxPurchaseAmountUsd:mc,quickSelectDenominations:hc,paymentMethod:void 0,provider:void 0,checkoutQuoteType:"recommended",redirectURL:void 0,stripePaymentMethod:void 0,achSettlementOption:void 0},He=St(t=>({...Vt,setState:n(e=>t(r=>({...r,...e})),"setState"),reset:n(()=>{t(Vt)},"reset")}));var eh=n(({platform:t,version:e,onClosePress:r,onNextPress:o})=>{let i=Q(),{i18n:s}=N(),l=s.language,{setState:u}=He(),{data:d}=bt(),m=Array.from(new Set(d?.addresses?.map(F=>F.addressType))),{data:f=[]}=Eo(t,e,l),{data:y,isPending:w,isFetching:S,isError:b}=Ao(t,e,l),C=y?.groups??[],T=w||S||b,[x,A]=(0,zi.useState)(""),E=kn(x)??"",P=x.length>0,D=il(f,E,dc),re=(0,zi.useCallback)(({tokenWithMetadata:F,ownerPublicKey:$})=>{let{token:Y}=F,{name:Ke,symbol:Pe,caip19:qe}=Y,{chainId:Oo}=qe;i.capture("fiatOnrampFungibleSelected",{data:{networkId:Oo,chainId:B.getChainID(Oo),asset:{name:Ke,symbol:Pe,type:"fungible"}}}),u({...Vt,onClose:r,ownerPublicKey:$,fungible:F.token,paymentMethod:void 0,provider:void 0}),o()},[i,r,o,u]);return{enabledAddressTypes:m,groupedTokens:C,isLoading:T,isSearching:P,searchedTokens:D,searchTerm:x,selectedAccount:d,onClosePress:r,onTokenPress:re,setSearchTerm:A}},"useFiatRampSelectFungible");a();c();var Ge=I(Ae(),1);a();c();var Ur=I(Ae(),1),ih=I(R(),1);a();c();var Cc=I(Ae(),1);var wc=n(({marginBottom:t=0})=>{let{t:e}=N(),{data:[r]}=tl(["enable-buy-flow-warning"]);return r?(0,Cc.jsx)(z,{marginBottom:t,children:(0,Cc.jsx)(yl,{level:"4-error",children:e("buyFlowHealthWarning")})}):null},"BuyFlowWarning");a();c();var fr=I(Ae(),1);a();c();var $t=I(Ae(),1);var Io=I(R(),1);a();c();var ht=I(Ae(),1);var rh=I(R(),1);var Hi=48,Tc=rh.default.memo(({networkId:t,logoURI:e,type:r})=>{let o=UC({disableBadge:!1,tokenType:r,chain:B.getChainID(t)});return(0,ht.jsxs)(z,{size:Hi,position:"relative",children:[e?(0,ht.jsx)(Ot,{src:e,height:Hi,width:Hi,borderRadius:"circle",fallback:(0,ht.jsx)(th,{})}):(0,ht.jsx)(th,{}),o?(0,ht.jsx)(jC,{networkId:t}):null]})}),th=n(()=>(0,ht.jsx)(z,{alignItems:"center",justifyContent:"center",size:Hi,backgroundColor:"areaBase",borderRadius:"circle",children:(0,ht.jsx)(Yt.Coin,{size:"50%",color:"borderBase"})}),"TokenImageFallback"),UC=n(({disableBadge:t,tokenType:e,chain:r})=>t?!1:to.get(r).alwaysShowNetworkBadge?!0:!Jl(e),"showNetworkBadge"),jC=n(({networkId:t})=>(0,ht.jsx)(z,{right:"-2",bottom:"-2",position:"absolute",borderColor:"elementBase",borderStyle:"solid",borderWidth:2,style:{borderRadius:9},children:(0,ht.jsx)(Lu,{networkID:t,size:18})}),"ChainBadge");a();c();var Nr=I(Ae(),1);var oh=n(({image:t,name:e,symbol:r,onPress:o})=>(0,Nr.jsx)(z,{backgroundColor:"elementBase",borderRadius:"base",padding:16,onPress:o,children:(0,Nr.jsxs)(z,{gap:12,children:[t,(0,Nr.jsxs)(z,{gap:4,alignItems:"flex-start",children:[(0,Nr.jsx)(_e,{children:e}),(0,Nr.jsx)(_e,{color:"textDiminished",children:r})]})]})}),"TokenCard");var mn=Io.default.memo(({enabledAddressTypes:t,selectedAccount:e,tokenWithMetadata:r,type:o,onPress:i})=>{let{token:s,addressType:l}=r,{caip19:u,logoURI:d,name:m,symbol:f}=s,{chainId:y}=u,w=Zl(u),{t:S}=N(),b=m??S("assetDetailUnknownToken"),C=(0,Io.useMemo)(()=>{let x=e?.addresses.find(A=>l?A.addressType===l&&A.networkID===y:A.networkID===y)?.address??"";return B.isEVMNetworkID(y)?x.toLowerCase():x},[e,l,y]),T=(0,Io.useCallback)(()=>{i({tokenWithMetadata:r,ownerPublicKey:C})},[i,r,C]);return l&&!t.includes(l)?(0,$t.jsx)($t.Fragment,{}):o==="card"?(0,$t.jsx)(oh,{onPress:T,image:(0,$t.jsx)(Tc,{logoURI:d,networkId:u.chainId,type:w}),name:b,symbol:f}):(0,$t.jsx)(_n,{onPress:T,start:(0,$t.jsx)(Tc,{logoURI:d,networkId:u.chainId,type:w}),topLeft:{text:b,after:(0,$t.jsx)(Fu,{networkID:u.chainId,address:C})},bottomLeft:f})});var nh=n(({enabledAddressTypes:t,group:e,groupIndex:r,selectedAccount:o,onTokenPress:i})=>{let s=r===0;return(0,fr.jsxs)(z,{marginTop:s?8:24,children:[(0,fr.jsx)(_e,{font:Lc?"bodyMedium":"title3Semibold",color:"textDiminished",marginBottom:8,children:e.groupName}),(0,fr.jsx)(z,{flexWrap:"wrap",direction:"row",gap:s?0:"list",children:e.tokens.map((l,u)=>{let{token:d,addressType:m}=l,f=`${d.symbol}-${d.caip19.chainId}-${u}`;return m&&!t.includes(m)?null:s?(0,fr.jsx)(z,{flexBasis:"50%",paddingLeft:u%2===0?0:4,paddingRight:u%2===0?4:0,paddingBottom:u>=e.tokens.length-2?0:8,children:(0,fr.jsx)(mn,{enabledAddressTypes:t,selectedAccount:o,tokenWithMetadata:e.tokens[u],type:"card",onPress:i})},f):(0,fr.jsx)(mn,{tokenWithMetadata:e.tokens[u],enabledAddressTypes:t,selectedAccount:o,type:"row",onPress:i},f)})})]},e.groupName)},"FiatRampTokenGroup");var sh=ih.default.memo(({groupedTokens:t,enabledAddressTypes:e,selectedAccount:r,onTokenPress:o})=>(0,Ur.jsxs)(Ur.Fragment,{children:[(0,Ur.jsx)(wc,{marginBottom:16}),t.map((i,s)=>(0,Ur.jsx)(nh,{enabledAddressTypes:e,group:i,groupIndex:s,onTokenPress:o,selectedAccount:r},i.groupName))]}));a();c();var vo=I(Ae(),1);var ah=I(R(),1);var ch=ah.default.memo(({enabledAddressTypes:t,searchedTokens:e,selectedAccount:r,onTokenPress:o})=>(0,vo.jsx)(vo.Fragment,{children:e.map((i,s)=>(0,vo.jsx)(z,{marginBottom:8,children:(0,vo.jsx)(mn,{enabledAddressTypes:t,selectedAccount:r,tokenWithMetadata:i,type:"row",onPress:o})},`${i.token.symbol}-${i.token.caip19.chainId}-${s}`))}));var lh=n(t=>{let{isLoading:e,isSearching:r,searchedTokens:o,selectedAccount:i,enabledAddressTypes:s,onTokenPress:l,groupedTokens:u}=t;return(0,Ge.jsx)(Ge.Fragment,{children:e?(0,Ge.jsx)(VC,{}):r?(0,Ge.jsx)(Ge.Fragment,{children:o.length>0?(0,Ge.jsx)(ch,{searchedTokens:o,selectedAccount:i,enabledAddressTypes:s,onTokenPress:l}):(0,Ge.jsx)($C,{})}):(0,Ge.jsx)(sh,{enabledAddressTypes:s,groupedTokens:u,selectedAccount:i,onTokenPress:l})})},"FiatRampFungiblesCore"),VC=n(()=>(0,Ge.jsx)(z,{gap:"list",paddingTop:"screen",children:[...Array(3)].map((t,e)=>(0,Ge.jsx)(Wr,{topRight:!1,bottomRight:!1},e))}),"FiatRampTokensLoading"),$C=n(()=>{let{t}=N();return(0,Ge.jsx)(z,{flex:1,alignItems:"center",justifyContent:"center",children:(0,Ge.jsx)(_e,{font:"body",color:"textDiminished",align:"center",children:t("noBuyOptionsAvailableInCountry")})})},"FiatRampTokensEmpty");var uh={container:ls({display:"flex",flexDirection:"column",height:"100%"}),listContainer:ls({overflow:"auto",minHeight:0,paddingTop:16,paddingBottom:80})},dh=n(({platform:t,navigateToForm:e,onBackPress:r})=>{let{t:o}=N(),i=eh({platform:t,version:ot,onClosePress:r,onNextPress:e});return(0,jr.jsxs)(z,{flex:1,className:uh.container,children:[(0,jr.jsx)(gl,{id:"search",label:"Search",showLabel:!1,placeholder:o("assetListSearch"),setValue:i.setSearchTerm,value:i.searchTerm||"",children:(0,jr.jsx)(Yt.Search,{size:16,color:"textDiminished"})}),(0,jr.jsx)(z,{flex:1,className:uh.listContainer,children:(0,jr.jsx)(lh,{...i})})]})},"FiatRampFungibles");a();c();a();c();var hh=I(Ae(),1);a();c();var ke=I(Ae(),1);var Gi=I(R(),1);a();c();var ko=I(Ae());var ph=n(({platform:t,navigateToAllProviders:e})=>{let{t:r}=N(),o=He(),{provider:i,fungible:s}=o,{currencyCode:l}=Ne(),{data:u}=pn(t,ot,O.language,{token:s?.caip19,fiatCurrencyCode:l,providerId:i?.id}),d=u?.provider||i;return(0,ko.jsxs)(z,{onPress:e,direction:"row",alignItems:"center",justifyContent:"flex-start",gap:4,children:[d?.logo&&(0,ko.jsx)(Ot,{borderRadius:6,width:20,height:20,src:d?.logo}),(0,ko.jsx)(_e,{font:"captionSemibold",color:"textBase",children:d?.name||r("fiatRampChangeProviderTitle")}),(0,ko.jsx)(Yt.ChevronDown,{size:16})]})},"FiatRampSelectedProvider");a();c();var zt=I(Ae(),1);var mh=I(R(),1);var xc=n(({assets:t,type:e,name:r,onClick:o,estimatedArrival:i})=>{let s=(0,mh.useMemo)(()=>{let l=(0,zt.jsx)(z,{borderRadius:"circle",size:48,alignItems:"center",justifyContent:"center",backgroundColor:"black",children:(0,zt.jsx)(Ot,{width:28,height:28,src:t.icon})});switch(e){case Fr.CARD:return(0,zt.jsx)(Do,{icon:"CreditCard",size:48,backgroundColor:"black",color:"white"});case Fr.BANK_TRANSFER:return(0,zt.jsx)(Do,{icon:"Bank",size:48,backgroundColor:"black",color:"white"});case Fr.MOBILE_WALLET:return r.toLowerCase().includes("apple")?(0,zt.jsx)(Do,{icon:"LogoApplePay",size:48,backgroundColor:"black",color:"white"}):r.toLowerCase().includes("google")?(0,zt.jsx)(Do,{icon:"LogoGooglePay",size:48,backgroundColor:"black",color:"white"}):l;default:return l}},[t.icon,r,e]);return(0,zt.jsx)(bl,{rows:[{type:"base",start:s,topLeft:{text:r,font:"title3Semibold"},bottomLeft:{before:(0,zt.jsx)(Yt.Clock,{color:"textDiminished",size:14}),text:i},onPress:o}]})},"FiatRampPaymentMethodRow");var zC=["ios","android"],fh=n(({platform:t,navigateToAllProviders:e,navigateToForm:r})=>{let{t:o}=N(),i=Q(),s=He(),l=He(A=>A.setState),{provider:u,fungible:d}=s,{currencyCode:m}=Ne(),{data:f,isFetching:y,isPending:w}=pn(t,ot,O.language,{token:d?.caip19,fiatCurrencyCode:m,providerId:u?.id}),{provider:S,paymentMethods:b}=f??{},C=S||u,T=(0,Gi.useCallback)(A=>{l({paymentMethod:A,provider:C,checkoutQuoteType:"selected"}),i.capture("fiatOnrampPaymentMethodSelected",{data:{paymentMethodId:A.id}}),r()},[i,r,C,l]),x=(0,Gi.useMemo)(()=>y||w?(0,ke.jsx)(ke.Fragment,{children:[...Array(3)].map((A,E)=>(0,ke.jsx)(Wr,{topRight:!1,bottomRight:!1},E))}):b?.length===0?(0,ke.jsx)(HC,{}):(0,ke.jsx)(ke.Fragment,{children:b?.map(A=>(0,ke.jsx)(xc,{onClick:n(()=>T(A),"onClick"),...A},A.id))}),[y,w,T,b]);return(0,ke.jsxs)(z,{gap:12,children:[!zC.includes(t)&&(0,ke.jsxs)(z,{direction:"row",alignItems:"center",gap:16,justifyContent:"space-between",children:[(0,ke.jsx)(_e,{font:"title1Semibold",color:"textBase",children:o("fiatRampPaymentMethodsTitle")}),(0,ke.jsx)(ph,{platform:t,navigateToAllProviders:e})]}),(0,ke.jsx)(_e,{font:"label",color:"textDiminished",children:o("buyThirdPartyScreenPaymentMethodDescription")}),(0,ke.jsx)(z,{gap:8,children:x})]})},"FiatRampPaymentMethodsCore"),HC=n(()=>{let{t}=N();return(0,ke.jsx)(z,{flex:1,alignItems:"center",justifyContent:"center",children:(0,ke.jsx)(_e,{font:"body",color:"textDiminished",align:"center",children:t("buyThirdPartyScreenPaymentMethodEmptyState")})})},"FiatRampPaymentMethodsEmpty");var gh=n(({platform:t,navigateToAllProviders:e,navigateToForm:r})=>(0,hh.jsx)(fh,{platform:t,navigateToAllProviders:e,navigateToForm:r}),"FiatRampPaymentMethods");a();c();var Sh=I(Ae(),1);a();c();var yh=I(R(),1),rt=I(Ae(),1);var Ki=I(R(),1);var bh=n(({platform:t,navigateToPaymentMethods:e})=>{let{t:r}=N(),o=Q(),i=En("enable-fiat-ramp-provider-quotes"),s=He(),l=He(E=>E.setState),{paymentMethod:u,purchaseType:d,purchaseAmount:m,fungible:f,ownerPublicKey:y}=s,{currencyCode:w}=Ne(),{data:S,isFetching:b,isPending:C}=Sc(t,ot,O.language,{...d==="currency"?{fiatAmount:m}:{tokenAmount:m},token:f?.caip19,fiatCurrencyCode:w,destinationAddress:y&&f?{address:y,chainId:f?.caip19.chainId,resourceType:Kt.address}:void 0}),T=S?.paymentMethod||u,x=(0,Ki.useCallback)(E=>{o.capture("fiatOnrampProviderSelected",{data:{chainId:S?.token?.chainId,providerId:E.id,paymentMethodId:T?.id,destinationAmount:E.quote?.displayDestinationAmount,sourceAmount:E.quote?.displaySourceAmount,asset:S?.token,tag:E.tag,integratorId:E.integratorId}});let P;try{P=S?.token?Gr(S.token):void 0}catch{P=void 0}Z.addBreadcrumb(te.OnRamp,"Onramp provider selected",qt.Info,{providerId:E.id,providerName:E.name,paymentMethodId:T?.id??null,purchaseAmount:m??null,purchaseType:d,fiatCurrencyCode:w,chainId:S?.token?.chainId??null,tokenCaip19:P??null,tokenSymbol:f?.symbol??null,tag:E.tag??null}),l({provider:E,paymentMethod:T,checkoutQuoteType:"selected"}),e?.()},[o,w,f?.symbol,e,S?.token,m,d,T,l]),A=(0,Ki.useMemo)(()=>S?.providers.map((E,P)=>{let D=E.id===s.provider?.id;return i?{type:"base",start:(0,rt.jsx)(Ot,{width:48,height:48,borderRadius:6,src:E.logo}),topLeft:E.name,topRight:{text:E.quote?.displayDestinationAmount,color:"textBase"},bottomRight:E.quote?.displaySourceAmount?{text:`~${E.quote.displaySourceAmount}`}:void 0,bottomLeft:E.tag&&{text:E.tag,color:P===0?"spotPositive":"textDiminished"},onPress:n(()=>x(E),"onPress")}:{type:"radio",active:D,start:(0,rt.jsx)(Ot,{width:24,height:24,borderRadius:6,src:E.logo}),topLeft:E.name,topRight:E.tag,onPress:n(()=>x(E),"onPress")}})??[],[s.provider?.id,i,x,S?.providers]);return(0,rt.jsxs)(z,{gap:16,children:[(0,rt.jsx)(_e,{font:"label",color:"textDiminished",children:r("buyThirdPartyScreenProvidersDescription")}),(0,rt.jsx)(z,{gap:8,children:b||C?(0,rt.jsx)(KC,{}):S?.providers.length===0?(0,rt.jsx)(GC,{}):A.map(E=>(0,yh.createElement)(_n,{...E,key:E.topLeft}))})]})},"FiatRampProvidersCore"),GC=n(()=>{let{t}=N();return(0,rt.jsx)(z,{flex:1,alignItems:"center",justifyContent:"center",children:(0,rt.jsx)(_e,{font:"body",color:"textDiminished",align:"center",children:t("buyThirdPartyScreenProvidersEmptyState")})})},"FiatRampProvidersEmpty"),KC=n(()=>[...Array(3)].map((t,e)=>(0,rt.jsx)(Wr,{topRight:!1,bottomRight:!1},e)),"LoadingTable");var Ch=n(({platform:t,navigateToPaymentMethods:e})=>(0,Sh.jsx)(bh,{platform:t,navigateToPaymentMethods:e}),"FiatRampProviders");a();c();a();c();a();c();var Vr=I(R(),1);a();c();var qi=I(R(),1);var Ac=n(({clientPlatform:t,appVersion:e,locale:r,caip19:o,addressType:i,enabled:s=!0,destinationAddress:l})=>{let{data:u,isLoading:d,isError:m,isFetched:f}=bt(),{data:y=[],isLoading:w,isError:S,isFetched:b}=Eo(t,e,r,s),C=(0,qi.useMemo)(()=>{if(o)return y.find(x=>{try{let A=Gr(x.token.caip19);return i&&B.getChainName(ss(o).chainId)===B.bitcoin.name?A===o&&"addressType"in x&&x.addressType===i:A===o}catch{return!1}})},[i,o,y]),T=(0,qi.useMemo)(()=>{if(!C)return"";if(l)return l;let x=u?.addresses.find(A=>C?.addressType?A.addressType===C.addressType&&A.networkID===C?.token.caip19.chainId:A.networkID===C?.token.caip19.chainId)?.address??"";return C?.token.caip19.chainId&&B.isEVMNetworkID(C.token.caip19.chainId)&&(x=x.toLowerCase()),x},[l,u?.addresses,C]);return(0,qi.useMemo)(()=>({tokenToBuy:C,destinationAddress:T,isLoading:d||w,isError:m||S,isFetched:f&&b}),[T,S,m,b,f,w,d,C])},"useFiatRampTokenMetadataFromCaip19");var wh=n(({caip19:t,amount:e,clientPlatform:r,redirectURL:o,addressType:i,destinationAddress:s,provider:l,paymentMethod:u,navigateToFiatRampForm:d,onClose:m,captureAnalyticsEvent:f,native:y})=>{let w=Q(),{setState:S}=He(),{tokenToBuy:b,destinationAddress:C,isLoading:T,isError:x,isFetched:A}=Ac({clientPlatform:r,appVersion:ot,locale:O.language,caip19:t,addressType:i,destinationAddress:s}),E=(0,Vr.useMemo)(()=>{if(b)return{token:b?.token.caip19,providerId:l,paymentMethodId:u,destinationAddress:{address:C,chainId:b?.token.caip19?.chainId,resourceType:Kt.address}}},[b,l,u,C]),{data:P,isLoading:D}=Vi(r,ot,O.language,E??{},!!E&&!!l&&!!u),re=(0,Vr.useMemo)(()=>t?D?!1:!!b&&!!C:!0,[t,D,C,b]),F=(0,Vr.useCallback)(()=>{!t||!b||!C||S({...Vt,onClose:m??(()=>{}),ownerPublicKey:C,fungible:b?.token,purchaseAmount:e??Vt.purchaseAmount,redirectURL:o,provider:P?.provider,paymentMethod:P?.paymentMethod})},[t,b,C,S,m,e,o,P?.provider,P?.paymentMethod]),$=(0,Vr.useCallback)(()=>{if(!t){w.capture("fiatOnrampInitiated",{data:{native:!!y}}),f?.(),d?.();return}!b||!C||(F(),w.capture("fiatOnrampInitiated",{data:{native:!!y}}),f?.(),d?.())},[w,y,t,f,C,d,F,b]);return(0,Vr.useMemo)(()=>({canBuy:re,openBuy:$,saturateState:F,resolvedDestinationAddress:C,token:b,isLoading:T,isError:x,isFetched:A}),[re,C,x,A,T,$,F,b])},"useBuyFlowForToken");a();c();var qC=new ze("Failed to get FiatRampProviderUrl"),QC=n(async(t,e,r,o,i)=>{try{let s={"x-client-platform":t,"x-client-app-version":e,"x-client-locale":r},l=await se.api().headers(s).bearer(i).post("/fiat_ramp/v2/onramp/provider_url",o);if(!Je(l))throw new ze(l.data.message);return l.data}catch(s){throw s instanceof ze?s:qC}},"getProviderUrl");a();c();var Qi=I(R());var WC=["enable","reject"],YC=n(({continueSwap:t,dismiss:e})=>{let r=Q(),{setSlippageSetting:o}=Cu(),i=(0,Qi.useCallback)(l=>{switch(e(),l){case"enable":r.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),o({type:fs.Auto}),ku();break;case"reject":r.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),o({type:fs.Fixed}),t();break}},[t,e,o,r]),s=(0,Qi.useMemo)(()=>WC.map(l=>({label:O.t(l==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:l==="enable"?"primary":"secondary",onPress:n(()=>i(l),"onPress")})),[i]);return{title:O.t("swapSlippageOptInTitle"),description:O.t("swapSlippageOptInSubtitle"),learnMoreText:O.t("commandLearnMore"),learnMoreUrl:Pu,options:s}},"useAutoSlippageOptInProps");a();c();var xh=I(R());a();c();var Ro=I(R());var XC=q(1);function Th(t,e,r){let o=Q(),[i,s]=(0,Ro.useState)(!1),l=(0,Ro.useCallback)(async()=>{await o.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:i?"buy token":"sell token"}}),s(!i)},[o,i]),u=wt(m=>m.sellFungible),d=wt(m=>m.buyFungible);return(0,Ro.useMemo)(()=>{let m=!1,f="";if(e&&r){let y=d?.data,w=u?.data;if(y&&w){let{buyAmount:S,sellAmount:b}=r,C=gr(S,y.decimals),T=gr(b,w.decimals),x=C.dividedBy(T),A=`1 ${w.symbol} \u2248 ${ms(x)} ${y.symbol}`,E=`1 ${y.symbol} \u2248 ${ms(XC.dividedBy(x))} ${w.symbol}`;m=q(r.buyAmount).isEqualTo(t),f=i?E:A}}return{isBestRate:m,rate:f,flip:l}},[t,r,i,e,u,d,l])}n(Th,"useExchangeRate");var JC=n(({selectProvider:t})=>{let{currentQuote:e,quoteResponse:r}=wu(),{currencySymbol:o,fromUsd:i}=Ne(),s=e?.buyAmount??"",l=Th(s,r,e),u=Eu(Tu(e)),d=e?.baseProvider.name??"";return{details:(0,xh.useMemo)(()=>e?zn(e)?ew({quote:e,selectProvider:t,exchangeRate:l,currencySymbol:o,fromUsd:i}):ZC({provider:d,sources:u,exchangeRate:l,selectProvider:t}):[],[e,d,u,l,t,o,i]),footnote:O.t("swapProviderPricingFootnote")}},"useSwapPricing"),ZC=n(({provider:t,sources:e,exchangeRate:r,selectProvider:o})=>[{label:O.t("swapProviderPricingProvider"),value:t,icon:"chevron-right",onPress:o},{label:O.t("swapProviderPricingMarket"),value:e},{label:O.t("swapProviderPricingPrice"),value:r.rate,icon:"swap",onPress:r.flip}],"getStandardRows"),ew=n(({quote:t,selectProvider:e,exchangeRate:r,currencySymbol:o,fromUsd:i})=>{let s=t.baseProvider.name,l=Hn(t).toString(),u=$n(Gn(t));return[{label:O.t("swapProviderPricingProvider"),value:s,icon:"chevron-right",onPress:e},{label:O.t("swapProviderPricingPrice"),value:r.rate,icon:"swap",onPress:r.flip},{label:O.t("swapProviderPricingFees"),value:`${o}${i(Number(l),2)} ${O.t("swapProvidersFee")}`},{label:O.t("swapProviderPricingTime"),value:u}]},"getBridgeRows");a();c();a();c();var Ah=I(R());var Eh=n(()=>{let{data:t,isFetched:e}=Iu(),{data:r,isFetched:o}=vu();return(0,Ah.useMemo)(()=>{if(!e||!o||!t&&!r)return;let i={};return t&&(i.priorityFee=new Le(t)),r&&(i.tip=new Le(r)),i},[e,o,t,r])},"useSwapModeSettings");a();c();var Ih=I(R());var tw=n(({goToAssetSelect:t})=>{let{setSearchQuery:e}=wt();return(0,Ih.useCallback)(r=>{r==="buy"&&e(""),t(r)},[t,e])},"useOnSwapAssetSelect");a();c();var Xe=I(R());a();c();a();c();var Wi=class{static{n(this,"StandardProviderRowStrategy")}getRow({quote:e,buyToken:r}){let o=`${ro(gr(e.buyAmount,r.decimals),to.get(r.networkId).formDisplayPrecision)} ${r.symbol}`;return{type:"standard",key:e.baseProvider.id,logoUri:e.baseProvider.logoUri,topLeft:{text:e.baseProvider.name},topRight:{text:o,color:"textDiminished"}}}getAutoRow(){return{type:"standard",key:Sr,topLeft:{text:O.t("selectSwapProviderAutoLabel")},topRight:{text:O.t("selectSwapProviderAutoDescription"),color:"textDiminished"}}}},Ec=class extends Wi{static{n(this,"BridgeProviderRowStrategy")}getRow(e){let{quote:r,currencySymbol:o,fromUsd:i}=e;if(!zn(r))throw new Error("Quote is not a bridge quote");let s=super.getRow(e),l=$n(Gn(r)),u=Hn(r).toString();return{...s,type:"bridge",bottomLeft:{text:l},bottomRight:{text:`${o}${i(Number(u),2)} ${O.t("swapProvidersFee")}`}}}getAutoRow(){return{type:"bridge",key:Sr,topLeft:{text:O.t("selectSwapProviderAutoLabel")},topRight:{text:O.t("selectSwapProviderAutoDescription"),color:"textDiminished"},bottomLeft:{text:O.t("selectSwapProviderAutoTBD")},bottomRight:{text:O.t("selectSwapProviderAutoTBD")}}}},Ic=new Wi,vc=new Ec;var Yi=n(({quoteResponse:t,buyToken:e,currencySymbol:r,setSelectedProvider:o,fromUsd:i})=>{let s=t.type==="xchain",l=s?vc.getAutoRow():Ic.getAutoRow(),u={...l,onPress:n(()=>o(l.key),"onPress")},d=t.quotes.reduce((m,f)=>{let w=(s?vc:Ic).getRow({quote:f,buyToken:e,currencySymbol:r,fromUsd:i});return[...m,{...w,onPress:n(()=>o(f.baseProvider.id),"onPress")}]},[]);return[u,...d]},"getSwapProviderRows");var rw=1e3,vh=n(t=>t==="firstQuoteReceived"||t==="quoteProcessed","isQuoteStateValid"),ow=n(({dismiss:t})=>{let{fromUsd:e,currencySymbol:r}=Ne(),o=Q(),i=Zt(),s=Cr(T=>T.setPreferredProvider),l=Cr(T=>T.setIsSaving),u=Cr(T=>T.preferredProvider),[d,m]=(0,Xe.useState)(u??Sr),[f,y]=(0,Xe.useState)(i.getQuoteProcessorState());(0,Xe.useEffect)(()=>{let T=i.subscribeQuoteProcessor({onStateChange(x,A){y(A)}});return()=>T()},[i]);let w=(0,Xe.useRef)(vh(f.type));(0,Xe.useEffect)(()=>{vh(f.type)?w.current=!0:w.current&&(Cr.getState().isSaving||t())},[f.type,t]);let S=(0,Xe.useMemo)(()=>{if(f.type!=="firstQuoteReceived"&&f.type!=="quoteProcessed")return[];let{response:T,input:x}=f,{buy:A}=x;return Yi({quoteResponse:T,buyToken:{networkId:A.data.chain.id,decimals:A.data.decimals,symbol:A.data.symbol??""},currencySymbol:r,setSelectedProvider:m,fromUsd:e})},[f,r,e]),b=(0,Xe.useCallback)(()=>{let T=d===Sr?void 0:d;l(!0),s(T),o.capture("swapperProviderSelected",{data:{provider:T}}),t(),setTimeout(()=>l(!1),rw)},[d,s,l,t,o]),C=(0,Xe.useMemo)(()=>[{theme:"secondary",disabled:!1,label:O.t("commandCancel"),onPress:t},{theme:"primary",disabled:d===(u??Sr),label:O.t("commandApply"),onPress:b}],[b,t,d,u]);return{selectedProvider:d,rows:S,buttons:C}},"useSelectPreferredProvider");a();c();var $r=I(R());var nw=n(({dismiss:t})=>{let{fromUsd:e,currencySymbol:r}=Ne(),o=Q(),i=wt(b=>b.quoteResponse),s=wt(b=>b.buyFungible),l=wt(b=>b.selectedBaseProvider),u=wt(b=>b.setSelectedBaseProvider),d=Cr(b=>b.setPreferredProvider),[m,f]=(0,$r.useState)(l),y=(0,$r.useMemo)(()=>!i||!s?[]:Yi({quoteResponse:i,buyToken:{networkId:s.data.chain.id,decimals:s.data.decimals,symbol:s.data.symbol??""},currencySymbol:r,setSelectedProvider:f,fromUsd:e}),[i,s,r,e,f]),w=(0,$r.useCallback)(()=>{u(m),d(m),o.capture("swapperProviderSelected",{data:{provider:m}}),t()},[m,u,d,t,o]),S=(0,$r.useMemo)(()=>[{background:"element",disabled:!1,label:O.t("commandCancel"),onPress:t},{background:"spot",disabled:m===l,label:O.t("commandApply"),onPress:w}],[w,t,m,l]);return{selectedProvider:m,rows:y,buttons:S}},"useSelectSwapProvider");a();c();var hr=I(R());var fn=St(t=>({isInitializeComplete:!0,swapMode:void 0,setSwapMode:n(e=>t({swapMode:e,isInitializeComplete:!1}),"setSwapMode"),setIsInitializeComplete:n(e=>t({isInitializeComplete:e}),"setIsInitializeComplete")})),iw=fn.getState().setSwapMode,sw=n(()=>fn(t=>t.isInitializeComplete===!1),"useInitializingClassicSwapMode"),aw=n(()=>{let t=Zt(),e=pl(),r=Ou(),o=(0,hr.useMemo)(()=>e.find(m=>r.includes(m))??Uc.Mainnet,[e,r]),i=fn(m=>m.swapMode),s=fn(m=>m.setSwapMode),l=fn(m=>m.setIsInitializeComplete);(0,hr.useEffect)(()=>t.subscribeToken({onStateChange:n(m=>{m.type==="initializeCompleted"&&l(!0)},"onStateChange")}),[t,l]);let u=(0,hr.useCallback)(m=>!m||r.length===0?!1:r.includes(xu(m)),[r]),d=(0,hr.useMemo)(()=>({type:"swap",network:o,takerCaip19:void 0,takerDestinationCaip19:void 0}),[o]);return(0,hr.useEffect)(()=>{u(i)||s(d)},[d,r,i,s,u]),u(i)?i:d},"useClassicSwapMode");a();c();var fe=I(R());a();c();var kc=class{static{n(this,"NoPriceCurrencyDenominationSwitchSupportRule")}isSupported(e,r,o,i,s){switch(e){case"sell":return!!(o&&s);case"buy":return!1}}},Rc=class{static{n(this,"BuyNotSupportedCurrencyDenominationSwitchSupportRule")}isSupported(e){return e!=="buy"}};function kh(){return[new kc,new Rc]}n(kh,"getCurrencyDenominationSwitchSupportRules");a();c();function Xi(t,e,r,o){if(r==="sell")return o.includes("insufficientBalance");let i=t?.sellAmount,s=e.find(l=>l.percentage===1)?.amount.toString();return!!i&&!!s&&new Le(i).gt(s)}n(Xi,"hasInsufficientSellBalance");var cw=n(t=>{let{tokenState:e,quotedAmounts:r,quoteProcessorState:o,sellPercentages:i,inputErrors:s,setAmount:l}=t,[u,d]=(0,fe.useState)(void 0),[m,f]=(0,fe.useState)(""),[y,w]=(0,fe.useState)("crypto"),[S,b]=(0,fe.useState)("sell"),C=(0,fe.useRef)(!1),{currencySymbol:T,toUsd:x,fromUsd:A,formatLocalizedPrice:E}=Ne(),P=xl(),{balanceDisplayStrategy:D}=Ru(),re=Au(),F=Eh(),$=Zt(),Y=(0,fe.useCallback)((X,pe,xe,gt)=>{if(d(void 0),X===""){f(X),l({amount:"0",denomination:gt??y,perspective:pe,tokenStateOverride:xe});return}let Rt=sl(X);bw(Rt)&&(f(Rt),l({amount:y==="fiat"?String(x(Rt)):Rt,denomination:gt??y,perspective:pe,tokenStateOverride:xe}))},[y,f,l,x]),Ke=(0,fe.useCallback)((X,pe)=>{S==="buy"&&b("sell"),d(X);let xe=X.getAmountForDenomination(y),gt=y==="fiat"?A(xe.toString()):xe.toString();f(Sw(q(gt),y,pe)),l({amount:xe.toString(),denomination:y,perspective:"sell"})},[d,S,y,l,A]),Pe=(0,fe.useCallback)(()=>{$.switchTokens()},[$]),qe=(0,fe.useCallback)(X=>{let pe=hw({perspective:S,currencyDenomination:y,quotedAmounts:r,fromUsd:A});pe&&Y(pe.toString(),S,X)},[y,S,Y,r,A]);(0,fe.useEffect)(()=>$.subscribeToken({onStateChange:n((X,pe,xe)=>{X.type==="switchTokens"&&(qe(xe),C.current=!0,$.refreshPair({swapMode:X.mode,cashAddresses:re,settings:F})),X.type==="changeToken"&&(C.current=!0,$.refreshPair({swapMode:X.mode,cashAddresses:re,settings:F}))},"onStateChange")}),[$,qe,re,F]),(0,fe.useEffect)(()=>{C.current&&(C.current=!1,Y(m,S))},[i]);let Oo=(0,fe.useCallback)(()=>{let X=y==="crypto"?"fiat":"crypto";if(w(X),!!r)switch(X){case"crypto":let pe=Pc(S,r);f(pe.toString());break;case"fiat":let xe=Oc(S,r)?.toFixed(2)??"0",gt=A(xe);f(String(gt));break}},[y,S,r,A]),hn=(0,fe.useMemo)(()=>kh(),[]),{sellAsset:rs,buyAsset:gn}=Rh(e),yn=Mu({sellAsset:rs,buyAsset:gn,currencyDenomination:y}),os=(0,fe.useMemo)(()=>fw(["sell","buy"],X=>lw({perspective:X,tokenState:e,quoteProcessorState:o,currencyDenomination:y,currentPerspective:S,inputAmount:m,inputErrors:s,isBalanceHidden:P,balanceDisplayStrategy:D,sellPercentages:i,currencyDenominationSupportRules:hn,isBuyAmountEditable:yn,quotedAmounts:r,currencySymbol:T,fromUsd:A,formatLocalizedPrice:E})),[y,m,s,P,D,i,S,o,r,e,hn,yn,T,A,E]),Ht=(0,fe.useCallback)(()=>{Y("",S)},[Y,S]);(0,fe.useEffect)(()=>{let X=$.subscribeToken({onStateChange(pe,xe,gt){!Jt(xe)||!Jt(gt)||pe.type==="changeToken"&&xe.sellToken.data.tokenAddress!==gt.sellToken.data.tokenAddress&&Ht()}});return()=>X()},[$,Ht]),(0,fe.useEffect)(()=>$.subscribeAccountChange({onAccountChange:n(X=>{Ht(),$.stopQuoteProcessor();let pe=$.getTokenState(),xe=X.addresses[0];Jt(pe)&&xe&&$.initializeSwap({swapMode:{type:"swap",network:xe.networkID,takerCaip19:void 0,takerDestinationCaip19:void 0},cashAddresses:re,settings:F})},"onAccountChange")}),[$,Ht,re,F]);let Po=(0,fe.useCallback)(X=>{if(b(X),!r||!Jt(e))return;let{sellAsset:pe,buyAsset:xe}=Rh(e);if(!(X==="sell"?pe:xe))return;let Rt,ns;switch(y){case"crypto":Rt=Pc(X,r).toString(),ns=Rt;break;case"fiat":let Bc=Oc(X,r)?.toFixed(2)??"0";Rt=String(A(Bc)),ns=Bc;break}f(Rt),l({amount:ns,denomination:y,perspective:X})},[y,r,e,A,f,l]);return{inputAmount:m,tokens:os,currencyDenomination:y,inputPerspective:S,tokenState:e,quotedAmounts:r,quoteProcessorState:o,inputErrors:s,currentSellPercentage:u,sellPercentages:i,switchTokens:Pe,setInputAmount:Y,switchCurrencyDenomination:Oo,setSellPercentage:Ke,clearInput:Ht,setInputPerspective:Po,setCurrencyDenomination:w}},"useClassicSwapperAssets");function lw({perspective:t,tokenState:e,quoteProcessorState:r,currencyDenomination:o,currentPerspective:i,inputAmount:s,inputErrors:l,isBalanceHidden:u,balanceDisplayStrategy:d,sellPercentages:m,currencyDenominationSupportRules:f,isBuyAmountEditable:y,quotedAmounts:w,currencySymbol:S,fromUsd:b,formatLocalizedPrice:C}){if(!Jt(e))return;let T=pw(t,w),x=mw(t,i,e,s,w),A=o==="crypto"?T:q(b(x)).toFixed(2),E=yw(s);t===i?A=s:E.gt(0)||(A="");let P=f.every(Pe=>Pe.isSupported(t,e.sellToken,e.sellTokenPrice?.usd,e.buyToken,e.buyTokenPrice?.usd)),D=t==="sell"?e.sellToken:e.buyToken,re=o==="crypto"?C(q(b(x)).toNumber()):dw(T,D),F=m.find(Pe=>Pe.percentage===1)?.amount.toString(),$=t==="sell"?F:void 0,Y=uw(w,m,i,l);return{perspective:t,fungible:D,balance:gw(D,d,u,$),amount:A,secondaryAmount:E.gt(0)?re:"",isAmountLoading:r.type==="starting"&&t!==i,isSecondaryAmountLoading:r.type==="starting",hasAmountWarning:Y,isAmountEditable:t==="sell"?!0:y,supportsCurrencyDenominationSwitching:P,amountPrefix:o==="fiat"?S:void 0,percentages:t==="sell"?m:[],warnings:t==="buy"?e.warnings:[]}}n(lw,"createSwapperAsset");function uw(t,e,r,o){return Xi(t,e,r,o)?!0:o.length>0}n(uw,"hasInputAmountWarning");function dw(t,e){let r=to.get(e.data.chain.id).formDisplayPrecision;return`${ro(q(t),r)} ${e.data.symbol??""}`}n(dw,"formatSecondaryAmount");function pw(t,e){return e?Pc(t,e).toString():"0"}n(pw,"parseCyrptoAmount");function mw(t,e,r,o,i){if(i)return Oc(t,i)?.toString()??"0";{if(t!==e||!Jt(r))return"0";let s=t==="sell"?r.sellTokenPrice:r.buyTokenPrice;return s?.usd?q(o).times(s.usd).toString():"0"}}n(mw,"parseFiatAmount");function Oc(t,e){switch(t){case"sell":return e?.sellAmountUsd;case"buy":return e?.buyAmountUsd}}n(Oc,"getQuotedUsdAmount");function Pc(t,e){switch(t){case"sell":return e.sellAmount;case"buy":return e.buyAmount}}n(Pc,"getQuotedCryptoAmount");function fw(t,e){return t.reduce((r,o,i)=>{let s=e(o,i,t);return s!=null&&r.push(s),r},[])}n(fw,"compactMap");function hw({perspective:t,currencyDenomination:e,quotedAmounts:r,fromUsd:o}){if(r)switch(t){case"sell":return e==="crypto"?r.buyAmount:r.buyAmountUsd?q(o(r.buyAmountUsd.toString(),2)):void 0;case"buy":return e==="crypto"?r.sellAmount:r.sellAmountUsd?q(o(r.sellAmountUsd.toString(),2)):void 0}}n(hw,"getOppositeQuotedAmount");function gw(t,e,r,o){let i=o?q(o):t.data?.balance;if(!(!i||r))return nu(t)?hl(i):e.format(i,t.data?.symbol??"")}n(gw,"parseBalance");function yw(t){return t==null?q(0):t===""?q(0):q(t)}n(yw,"normalizeInputAmount");function bw(t){try{let e=q(t);return e.isFinite()?!e.isNegative():!1}catch{return!1}}n(bw,"isValidAmount");function Rh(t){return Jt(t)?{sellAsset:t.sellToken,buyAsset:t.buyToken}:{sellAsset:void 0,buyAsset:void 0}}n(Rh,"getTokens");var Sw=n((t,e,r)=>e==="fiat"?t.gte(.01)?t.decimalPlaces(2).toString():t.decimalPlaces(5,q.ROUND_UP).toString():t.decimalPlaces(r.data.decimals).toString(),"truncateDisplayAmount");a();c();var Mh=I(R());a();c();var _c=I(R());a();c();var es=I(R());a();c();a();c();var Ji=class{static{n(this,"GaslessSwapInterceptor")}gaslessSwapFeeResult;insufficientFundsInterceptor;constructor(e,r){this.gaslessSwapFeeResult=e,this.insufficientFundsInterceptor=r}intercept(e){return this.gaslessSwapFeeResult.success?"continue":this.insufficientFundsInterceptor.intercept(e)}};a();c();var Zi=class{static{n(this,"InsufficientFundsInterceptor")}intercept({hasInsufficientFunds:e,showInsufficientFunds:r}){return e?(r(),"interrupt"):"continue"}};var Oh=n(t=>{let e=new Zi,r=Cw(t);return r?[new Ji(r,e)]:[e]},"getExecuteSwapInterceptors"),Cw=n(t=>{if(t.type!=="firstQuoteReceived"&&t.type!=="quoteProcessed")return;let e=t.quote;if(Su(e))return e.gaslessSwapFeeResult},"getGaslessSwapFeeResult");var Ph=n(t=>{let e=(0,es.useMemo)(()=>Oh(t),[t]);return{executeSwapInterceptors:(0,es.useCallback)(o=>{for(let i of e){let s=i.intercept(o);if(s==="interrupt")return s}return"continue"},[e])}},"useExecuteSwapInterceptors");var _h=n(({performSwap:t,goToInsufficientFunds:e,tokenState:r,quoteProcessorState:o})=>{let i=En("enable-swapper-fresh-balance-check"),{checkBalance:s}=Du({tokenState:r,quoteProcessorState:o,enableFreshBalanceCheck:i}),{executeSwapInterceptors:l}=Ph(o),u=(0,_c.useCallback)(async()=>{let m=await s(),f=n(()=>{m.insufficientFundsArgs&&e(m.insufficientFundsArgs,m.analyticsFields)},"showInsufficientFunds");l({hasInsufficientFunds:m.hasInsufficientFunds,showInsufficientFunds:f})==="continue"&&t()},[s,l,e,t]);return{swap:(0,_c.useCallback)(()=>{u().catch(m=>{Z.captureError(m instanceof Error?m:new Error(String(m)),te.Swapper)})},[u])}},"useExecuteSwapAction");var Mc=class{static{n(this,"ClassicExecuteSwapStateListener")}resetSwapper;constructor(e){this.resetSwapper=e}onStateChange(e,r,o,i){e.type===hs.ExecuteSwapStarted&&this.resetSwapper()}},Dc=class{static{n(this,"UpdateBalancesExecuteSwapStateListener")}swapper;constructor(e){this.swapper=e}onStateChange(e,r,o,i){let{sell:s,quote:l}=o.executingQuote;if(e.type===hs.TransactionConfirmed){let u=s.data.balance?new Le(s.data.balance):void 0;if(!u)return;let d=new Le(l.sellAmount).shiftedBy(-s.data.decimals),m=u.minus(d);this.swapper.updateBalances({sellTokenBalance:m,sellTokenCaip19:Gr(Vn(s))})}}},ww=n(({swapMode:t,quotedAmounts:e,tokenState:r,inputErrors:o,quoteProcessorState:i,currentPerspective:s,sellPercentages:l,showActivity:u,showFungibleDetails:d,showBuyFungibleScreen:m,retryAndNavigateToSwapper:f,resetSwapper:y,goToInsufficientFunds:w,preprocessor:S})=>{let b=Zt(),C=Bu(),T=(0,Mh.useCallback)(()=>{C({showFungibleDetails:d,showBuyFungibleScreen:m,showRetrySwap:f,showActivity:u,swapMode:t,executeSwapStateListeners:[new Mc(y),new Dc(b)],quotedAmounts:e,uiContext:"swapperClassic",preprocessor:S})},[C,d,m,f,t,y,e,b,S,u]),{swap:x}=_h({performSwap:T,goToInsufficientFunds:w,tokenState:r,quoteProcessorState:i});return{buttonState:Tw(r,o,e,i,s,l),swap:x}},"useClassicSwapperButton"),Tw=n((t,e,r,o,i,s)=>t.type!=="pair"?{type:"untradable",label:""}:o.type==="error"?o.quoteError?.name==="TokenizedStocksUnavailableForJurisdiction"?{type:"untradable",label:O.t("localizedErrorTokenizedStocksUnavailableForJurisdiction")}:{type:"untradable",label:O.t("swapNoQuotesFound")}:Xi(r,s,i,e)?{type:"insufficientBalance",label:O.t("swapReviewInsufficientBalance")}:o.type!=="quoteProcessed"?{type:"loading",label:O.t("swapReviewFlowActionButtonPrimary")}:r?{type:"tradable",label:O.t("swapReviewFlowActionButtonPrimary")}:{type:"untradable",label:O.t("swapReviewFlowActionButtonPrimary")},"parseTradeButtonState");a();c();a();c();var kt=n(()=>!0,"defaultShouldDehydrateQueryPredicate"),Dh={auth:kt,tokens:kt,prices:lu,collectibles:oa,currency:Tl,staking:Nu,swapper:_u,transferFungibleLoggingContext:kt,user:ml,[Al]:kt,[fl]:kt,[dn]:kt,[Uu]:kt,[Ho]:kt,[bu]:kt,"test-debug-query":Gt,perps:kt},Bh=n(t=>{if(t.queryKey.length===0)return!1;let e=String(t.queryKey[0]);return t.state.status!=="success"?!1:Dh[e]?Dh[e](t):!1},"shouldDehydrateQuery");var ts=I(Ae(),1),Lh=new Jc({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),xw=Xc({underlyingStorage:new Kl,throttleMs:1e3,enableDebugLogs:Gt()}),Aw=n(({children:t})=>(Rd([[au,Lh]]),t),"HydrateAtoms"),wH=n(t=>(0,ts.jsx)(el,{client:Lh,persistOptions:{persister:xw,dehydrateOptions:{shouldDehydrateQuery:Bh},buster:Ew,maxAge:1/0},children:(0,ts.jsx)(su,{children:(0,ts.jsx)(Aw,{children:t.children})})}),"QueryProvider"),Ew="25.2.0";export{qh as a,Vu as b,Ue as c,Xv as d,Jv as e,Me as f,Hs as g,Tr as h,Fs as i,cg as j,lg as k,ug as l,hd as m,wg as n,mg as o,Id as p,Yn as q,vA as r,Fd as s,kA as t,Ag as u,rb as v,Ie as w,xt as x,er as y,Nd as z,em as A,WS as B,xr as C,Iy as D,Og as E,Pg as F,vE as G,$d as H,Fy as I,Ny as J,bp as K,jy as L,sc as M,XS as N,ZS as O,tC as P,rC as Q,oC as R,nC as S,iC as T,aC as U,uc as V,ny as W,dy as X,py as Y,wy as Z,xy as _,Vy as $,Hy as aa,cC as ba,Tp as ca,Gy as da,ta as ea,lC as fa,Xy as ga,ra as ha,uC as ia,fC as ja,hC as ka,gC as la,yC as ma,bC as na,SC as oa,CC as pa,TC as qa,Jy as ra,xC as sa,mc as ta,fc as ua,hc as va,He as wa,Vi as xa,wh as ya,dh as za,gh as Aa,Ch as Ba,QC as Ca,YC as Da,tw as Ea,ow as Fa,nw as Ga,JC as Ha,sw as Ia,aw as Ja,cw as Ka,ww as La,Bh as Ma,Lh as Na,wH as Oa};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-KWNEQJE2.js.map
