import{c as et,d as rt}from"./chunk-FY37LKD2.js";import{e as Z,f as tt}from"./chunk-RHCYAVA3.js";import{c as ot}from"./chunk-3ZRYSYYB.js";import{f as I}from"./chunk-GA7OWDUC.js";import{b as T}from"./chunk-EOII3ZM4.js";import{i as l}from"./chunk-4GL3WODX.js";import{a as V}from"./chunk-QQJPKFTO.js";import{Na as q,e as U}from"./chunk-KWNEQJE2.js";import{e as P,f as C}from"./chunk-HGG2EQ5O.js";import{Fa as B,Ga as j,Ha as H,Ja as p,La as W,Ta as Q,Za as X,d as v,g as c,l as $}from"./chunk-IOXJCRJI.js";import{a as J,g as z}from"./chunk-56GZZQJU.js";import{a as K}from"./chunk-ZGQB4B3Z.js";import{a as x}from"./chunk-OJPBMZQC.js";import{d as Y,da as G,qa as F}from"./chunk-FLYQWZR6.js";import{R as w,Sb as N,Ua as D,Z as E}from"./chunk-F236ETGH.js";import{yc as M}from"./chunk-QF7OLC35.js";import{Ed as k,Ic as L,Sd as R,gd as O}from"./chunk-LPV5DSV2.js";import{L as dt,T as h,l as b}from"./chunk-JYKVQ4NC.js";import{a as s,g as ut,i as a,n}from"./chunk-TSHWMJEM.js";a();n();var ft={...R,...U,...C,...v,...M},St=s(async()=>({status:await tt()?"done":"not-done"}),"isOnboardingDone"),at=O.getInstance({storage:V,keyRegistry:ft,authRepository:l,queryClient:q,isOnboardingDone:St});l.subscribe(E.User,async()=>{at.hydrateIfNeeded()});l.subscribe(E.LoggedOut,async()=>{at.clear()});a();n();a();n();a();n();var Et=c(e=>{let t=Object.fromEntries(Object.entries(e(p).data?.updates??{}).map(([o,r])=>[o,{name:r.name,quantity:r.totalQuantity/10**r.decimals,timestamp:r.timestamp}]));return{errors:e(et),walletCaip19:e(B),totalValue:e(ot),portfolioValueStatus:e(X).status,balanceUpdatesStatus:e(p).status,balancesStatus:e(j).status,balancesFromUnixTimestamp:Math.floor(e(H)/1e3),updatesFromUnixTimestamp:(e(p).data?.lastTimestamp??0)/1e6,updates:t,hasNextPage:e(W),fungibleTokens:e(Q).map(o=>o.encodedCaip19)}}),nt=Et;var st=c(e=>({...e(nt),visibleTokens:e(rt).map(t=>t.encodedCaip19)}));var i=ut(dt(),1);a();n();var u=class{static{s(this,"DeprecatedLocalStorage")}async get(t){let o=null;try{if(o=self.localStorage.getItem(t),typeof o!="string")return null;try{return JSON.parse(o)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${t}"`),o}}catch(r){let m=`[DeprecatedLocalStorage.get] Error getting key (${t}): ${r}`;throw new Error(m)}}async getAll(t){try{let o={};t=t||Object.keys(self.localStorage);for(let r of t)o[r]=await this.get(r);return o}catch(o){let r=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${t}): ${o}`;throw new Error(r)}}async remove(t){let o=`[DeprecatedLocalStorage.remove] Error removing key(s) (${t}): Method not implemented`;throw new Error(o)}async set(t,o){let r=`[DeprecatedLocalStorage.set] Error setting key (${t}): Method not implemented`;throw new Error(r)}async setAll(t){let r=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(t)}): Method not implemented`;throw new Error(r)}subscribe(t){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(t){let o=`[DeprecatedLocalStorage.update] Error updating key(s) (${t}): Method not implemented`;throw new Error(o)}};var Tt=new x,At=new u,_t=[...D,...I,P,w,"i18nextLng"],Oo=s(()=>{let{data:e,isFetching:t}=N(),{data:o,isFetching:r}=F(),{data:m,isFetching:it}=k([{key:"Local Storage",storage:Tt},{key:"Deprecated Local Storage",storage:At}],_t),{data:A}=G(),_=Z(),[y]=$(st),d=(0,i.useCallback)(async()=>{let{version:f}=chrome.runtime.getManifest(),S=await K.getDeviceId(),gt=await _();return{"App Version":f,"Platform Information":J,"Display Language":Y(h.language),"Phantom Auth":gt,"Device Id":S,Portfolio:y,"Auto Lock Timer(ms)":A,...e,...o,...m}},[y,e,o,m,_,A]),mt=t||r||it,ct=(0,i.useCallback)(async f=>{f?.preventDefault();let S=await d();await L.downloadLog(S)},[d]),pt=(0,i.useCallback)(()=>{T({url:z})},[]),lt=(0,i.useCallback)(()=>{T({url:b})},[]);return{appState:d,isFetching:mt,goCreateTicket:pt,goSupportDesk:lt,downloadLogs:ct}},"useDownloadLogs");export{at as a,Oo as b};
//# sourceMappingURL=chunk-M65HNOJE.js.map
