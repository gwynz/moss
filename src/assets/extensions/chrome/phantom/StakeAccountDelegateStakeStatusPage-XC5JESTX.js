import{a as J}from"./chunk-3YKALUMV.js";import{a as p}from"./chunk-5S2LR6TU.js";import{c as U}from"./chunk-UN5DVVHZ.js";import{e as Y,f as q,g as G}from"./chunk-KYC3TN2Q.js";import"./chunk-RKISZW47.js";import"./chunk-IAL2BZAA.js";import"./chunk-M6UNEOVM.js";import"./chunk-DQLUBVF4.js";import"./chunk-IP6N33CZ.js";import"./chunk-S2IXR5HZ.js";import"./chunk-EOII3ZM4.js";import{b as D}from"./chunk-KUVQSLSD.js";import"./chunk-H3HVEJML.js";import{_a as A}from"./chunk-NDIBTKLE.js";import"./chunk-6JMEWALM.js";import"./chunk-KWNEQJE2.js";import{N as V,_ as Q}from"./chunk-HGG2EQ5O.js";import"./chunk-PQUTVVRL.js";import"./chunk-IOXJCRJI.js";import{b as _}from"./chunk-XGLSOW44.js";import"./chunk-56GZZQJU.js";import"./chunk-QLEUWUCH.js";import"./chunk-OJPBMZQC.js";import"./chunk-FLYQWZR6.js";import"./chunk-CYENH7PC.js";import{Fb as H,p as z}from"./chunk-F236ETGH.js";import{Va as F,Wa as M,p as K,q as B}from"./chunk-QF7OLC35.js";import{A as N,D as v,Kb as b,Wa as u}from"./chunk-LPV5DSV2.js";import"./chunk-NEE4FZIK.js";import"./chunk-BYU664DD.js";import{Ba as f,L as oe,M as R,Y as O}from"./chunk-JYKVQ4NC.js";import"./chunk-U7OZEJ4F.js";import"./chunk-ZRGHR2IN.js";import{a as C,g as T,i as P,n as I}from"./chunk-TSHWMJEM.js";P();I();var i=T(oe(),1);var e=T(R(),1),ne=C(n=>{let s={stakePubkey:n.stakeAccountPubkey,votePubkey:n.voteAccountPubkey,onClose:n.onClose},{t}=O(),{delegateStake:c,onDeny:r,needsLedgerApproval:k,txHash:a,confirmationStatus:l,isError:d,error:S}=ae(s);if(k)return(0,e.jsx)(q,{ledgerAction:c,cancel:r});if(d){let o=S,g=o?.message,m=Y(o),y=o?.message.includes(B),E=o?.message.includes(K);return m?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:c,onCancelClick:r}):y||E?(0,e.jsx)(J,{onCancelClick:r}):(0,e.jsxs)(D,{icon:"error",title:t("stakeAccountDelegateStakeStakingFailed"),onClose:r,showButton:!!a,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:g??t("stakeAccountDelegateStakeStakingFailedDescription")}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]})}return l==="confirmed"||l==="finalized"?(0,e.jsxs)(D,{icon:"success",title:t("stakeAccountDelegateStakeSolStaked"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDelegateStakeSolStakedDescriptionInterpolated",children:["Your SOL will begin earning rewards",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes active."]})}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]}):(0,e.jsxs)(D,{icon:"loading",title:t("stakeAccountDelegateStakeStakingSol"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDelegateStakeStakingSolDescription")}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]})},"StakeAccountDelegateStakeStatusPage"),Te=ne,ae=C(({onClose:n,...s})=>{let{data:t,isSuccess:c}=H(),{accountIdentifier:r,isLedgerAccount:k,solanaChainAddress:a,solanaPublicKey:l,connection:d,networkID:S}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>b.isSolanaNetworkID(te.networkID)),$=new u.PublicKey(w?.address??""),j=t?.type===z.Ledger,x=w?.networkID,ee=F(M(x));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:x}},[t]),o=U(d),g=(0,i.useCallback)(()=>{o.mutate({...s,accountIdentifier:r,senderAddress:a,stakePubkey:new u.PublicKey(s.stakePubkey),authorizedPubkey:l,votePubkey:new u.PublicKey(s.votePubkey)})},[r,s,o,a,l]),m=V(),y=(0,i.useCallback)(()=>{m.denied({chainType:N.Solana,chainName:v.Solana,networkId:b.getSolanaNetworkIDValue(S),type:"delegate"}),n()},[S,n,m]);(0,i.useEffect)(()=>{if(c){if(!t||!a)throw new Error("Selected account undefined when trying to perform stake transaction.");k||g()}},[c]);let L=o.data?.id,h=Q(d,2e3,L),W=k&&(o.isIdle||o.isPending),X=h.data?.value?.confirmationStatus;return{delegateStake:g,onDeny:y,needsLedgerApproval:W,txHash:L,confirmationStatus:X,isError:o.isError||h.isError,error:o.error||h.error}},"useDelegateStakeOnMount");export{ne as StakeAccountDelegateStakeStatusPage,Te as default};
//# sourceMappingURL=StakeAccountDelegateStakeStatusPage-XC5JESTX.js.map
