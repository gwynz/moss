LavaPack.loadBundle([[5688,{"../errors":5685,"./_stream_duplex":5686,"./internal/streams/async_iterator":5691,"./internal/streams/buffer_list":5692,"./internal/streams/destroy":5693,"./internal/streams/from":5695,"./internal/streams/state":5697,"./internal/streams/stream":5698,_process:5490,buffer:4474,events:4770,inherits:5016,"string_decoder/":6066,util:4426},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=E,E.ReadableState=C;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),s=e("buffer").Buffer,a=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var u,d,h,f=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,w=m.ERR_METHOD_NOT_IMPLEMENTED,k=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,o);var v=p.errorOrDestroy,_=["error","close","destroy","pause","resume"];function C(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=e("string_decoder/").StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function E(t){if(r=r||e("./_stream_duplex"),!(this instanceof E))return new E(t);var n=this instanceof r;this._readableState=new C(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function S(e,t,n,r,i){l("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?I(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,c);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),o)v(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)c.endEmitted?v(e,new k):T(e,c,t,!0);else if(c.ended)v(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?T(e,c,t,!1):P(e,c)):T(e,c,t,!1)}else r||(c.reading=!1,P(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&I(e)),P(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},E.prototype.unshift=function(e){return S(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){u||(u=e("string_decoder/").StringDecoder);var n=new u(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(O,e))}function O(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function P(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(x,e,t))}function x(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){l("readable nexttick read 0"),e.read(0)}function j(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function $(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(D,t,e))}function D(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}E.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):I(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(n,t))),null===(r=e>0?$(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},E.prototype._read=function(e){v(this,new w("_read()"))},E.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,l("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:m;function a(t,n){l("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",h),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",u);var d=!1;function h(t){l("ondata");var n=e.write(t);l("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!d&&(l("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function f(t){l("onerror",t),m(),e.removeListener("error",f),0===i(e,"error")&&v(e,t)}function p(){e.removeListener("finish",g),m()}function g(){l("onfinish"),e.removeListener("close",p),m()}function m(){l("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),o.flowing||(l("pipe resume"),r.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?I(this):i.reading||n.nextTick(R,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(N,this),r},E.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(N,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))}),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<_.length;o++)e.on(_[o],this.emit.bind(this,_[o]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=$,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(E,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[5689,{"../errors":5685,"./_stream_duplex":5686,inherits:5016},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=u;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,n){h(e,t,n)})}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new i("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[569,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"TokensController"))return console.warn("newState.TokensController is not present"),e;const t=e.TokensController;if(!(0,i.isObject)(t)){var n,r;return null===(n=global.sentry)||void 0===n||null===(r=n.captureException)||void 0===r||r.call(n,new Error(`Migration ${o}: TokensController is type '${typeof t}', expected object.`)),e}(0,i.hasProperty)(t,"tokens")&&delete t.tokens;(0,i.hasProperty)(t,"detectedTokens")&&delete t.detectedTokens;(0,i.hasProperty)(t,"ignoredTokens")&&delete t.ignoredTokens;return e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils");const o=n.version=163}}},{package:"$root$",file:"app/scripts/migrations/163.ts"}],[5690,{"../errors":5685,"./_stream_duplex":5686,"./internal/streams/destroy":5693,"./internal/streams/state":5697,"./internal/streams/stream":5698,_process:5490,buffer:4474,inherits:5016,"util-deprecate":6130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=E,E.WritableState=C;var o={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),a=e("buffer").Buffer,l=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,k=h.ERR_UNKNOWN_ENCODING,v=u.errorOrDestroy;function _(){}function C(t,o,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=o instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(O,e,t),e._writableState.errorEmitted=!0,v(e,i)):(o(i),e._writableState.errorEmitted=!0,v(e,i),O(e,t))}(e,r,i,t,o);else{var s=M(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),i?n.nextTick(T,e,r,s,o):T(e,r,s,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function E(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!c.call(E,this))return new E(t);this._writableState=new C(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function S(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,S(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(S(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(n){t.pendingcb--,n&&v(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)})}function O(e,t){var r=M(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(E,s),C.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(C.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===E&&(e&&e._writableState instanceof C)}})):c=function(e){return e instanceof this},E.prototype.pipe=function(){v(this,new m)},E.prototype.write=function(e,t,r){var i,o=this._writableState,s=!1,c=!o.objectMode&&(i=e,a.isBuffer(i)||i instanceof l);return c&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=_),o.ending?function(e,t){var r=new w;v(e,r),n.nextTick(t,r)}(this,r):(c||function(e,t,r,i){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new f("chunk",["string","Buffer"],r)),!o||(v(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var l=t.objectMode?1:r.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,l,r,i,o);return c}(this,o,c,e,t,r)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=u.destroy,E.prototype._undestroy=u.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[5691,{"./end-of-stream":5694,_process:5490},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[s]=null,e[a]=null,t(f(n,!1)))}}function g(e){n.nextTick(p,e)}var m=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[l]?r(e[l]):t(f(undefined,!0))})});var r,i=this[u];if(i)r=new Promise(function(e,t){return function(n,r){e.then(function(){t[c]?n(f(undefined,!0)):t[d](n,r)},r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(f(o,!1));r=new Promise(this[d])}return this[u]=r,r}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){e?n(e):t(f(undefined,!0))})})}),r),m);t.exports=function(e){var t,n=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[u]=null,n[s]=null,n[a]=null,e(f(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[u]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[u]=null,n[s]=null,n[a]=null,t(e)),void(n[l]=e)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[a]=null,r(f(undefined,!0))),n[c]=!0}),e.on("readable",g.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[5692,{buffer:4474,util:4426},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=e("buffer").Buffer,c=e("util").inspect,u=c&&c.custom||"inspect";function d(e,t,n){l.prototype.copy.call(e,t,n)}t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t=l.allocUnsafe(e>>>0),n=this.head,r=0;n;)d(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[5693,{_process:5490},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[5694,{"../../../errors":5685},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[5695,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[5696,{"../../../errors":5685,"./end-of-stream":5694},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new o("streams");var h=n.map(function(t,i){var o=i<n.length-1;return function(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",function(){a=!0}),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},function(e){if(e)return o(e);a=!0,o()});var l=!1;return function(e){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}(t,o,i>0,function(e){u||(u=e),e&&h.forEach(l),o||(h.forEach(l),d(u))})});return n.reduce(c)}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[5697,{"../../../errors":5685},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[5698,{events:4770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[5699,{"./lib/_stream_duplex.js":5686,"./lib/_stream_passthrough.js":5687,"./lib/_stream_readable.js":5688,"./lib/_stream_transform.js":5689,"./lib/_stream_writable.js":5690,"./lib/internal/streams/end-of-stream.js":5694,"./lib/internal/streams/pipeline.js":5696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/readable-browser.js"}],[57,{"../../../../shared/modules/environment":6319,"@metamask/gator-permissions-controller":2350,"@metamask/snaps-utils":3382},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GatorPermissionsControllerInit=void 0;var r=e("@metamask/gator-permissions-controller"),i=e("@metamask/snaps-utils"),o=e("../../../../shared/modules/environment");const s=()=>{const e="npm:@metamask/gator-permissions-snap";if(e!==undefined)try{(0,i.assertIsValidSnapId)(e)}catch(e){throw new Error("GATOR_PERMISSIONS_PROVIDER_SNAP_ID must be set to a valid snap id",{cause:e})}const t={isGatorPermissionsEnabled:(0,o.getEnabledAdvancedPermissions)().length>0};return e&&(t.gatorPermissionsProviderSnapId=e),t};n.GatorPermissionsControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=new r.GatorPermissionsController({messenger:e,state:{...s(),...t.GatorPermissionsController}});return{controller:n,api:{fetchAndUpdateGatorPermissions:n.fetchAndUpdateGatorPermissions.bind(n),addPendingRevocation:n.addPendingRevocation.bind(n),submitDirectRevocation:n.submitDirectRevocation.bind(n)}}}}}},{package:"$root$",file:"app/scripts/controller-init/gator-permissions/gator-permissions-controller-init.ts"}],[570,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,i.hasProperty)(e,"PermissionController")){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${o}: PermissionController not found.`)),e}if(!(0,i.hasProperty)(e,"NetworkController")){var r,l;return null===(r=global.sentry)||void 0===r||null===(l=r.captureException)||void 0===l||l.call(r,new Error(`Migration ${o}: NetworkController not found.`)),e}const c=e.PermissionController,u=e.NetworkController;if(!(0,i.isObject)(c)){var d,h;return null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error(`Migration ${o}: PermissionController is type '${typeof c}', expected object.`)),e}if(!(0,i.isObject)(u)){var f,p;return null===(f=global.sentry)||void 0===f||null===(p=f.captureException)||void 0===p||p.call(f,new Error(`Migration ${o}: NetworkController is type '${typeof u}', expected object.`)),e}if(!(0,i.hasProperty)(u,"networkConfigurationsByChainId")){var g,m;return null===(g=global.sentry)||void 0===g||null===(m=g.captureException)||void 0===m||m.call(g,new Error(`Migration ${o}: NetworkController.networkConfigurationsByChainId not found.`)),e}const{networkConfigurationsByChainId:b}=u;if(!(0,i.isObject)(b)){var y,w;return null===(y=global.sentry)||void 0===y||null===(w=y.captureException)||void 0===w||w.call(y,new Error(`Migration ${o}: NetworkController.networkConfigurationsByChainId is type '${typeof b}', expected object.`)),e}const k=Object.keys(b).map(e=>`eip155:${parseInt(e,16)}`);if(!(0,i.hasProperty)(c,"subjects"))return e;const{subjects:v}=c;if(!(0,i.isObject)(v)){var _,C;return null===(_=global.sentry)||void 0===_||null===(C=_.captureException)||void 0===C||C.call(_,new Error(`Migration ${o}: PermissionController.subjects is type '${typeof v}', expected object.`)),e}for(const e of Object.keys(v)){const t=v[e];if(!(0,i.isObject)(t))continue;if(!(0,i.hasProperty)(t,"permissions")||!(0,i.isObject)(t.permissions))continue;const{permissions:n}=t;if(!(0,i.hasProperty)(n,a))continue;const r=n[a];if((0,i.isObject)(r)&&((0,i.hasProperty)(r,"caveats")&&Array.isArray(r.caveats)))for(const e of r.caveats){if(!(0,i.isObject)(e)||e.type!==s)continue;if(!(0,i.hasProperty)(e,"value")||!(0,i.isObject)(e.value))continue;const t=e.value;if((0,i.isObject)(t.requiredScopes))for(const e of Object.keys(t.requiredScopes))!e.startsWith("wallet:")&&e.startsWith("eip155:")&&(k.includes(e)||delete t.requiredScopes[e]);if((0,i.isObject)(t.optionalScopes))for(const e of Object.keys(t.optionalScopes))!e.startsWith("wallet:")&&e.startsWith("eip155:")&&(k.includes(e)||delete t.optionalScopes[e])}}return e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils");const o=n.version=164,s="authorizedScopes",a="endowment:caip25"}}},{package:"$root$",file:"app/scripts/migrations/164.ts"}],[571,{"@metamask/snaps-rpc-methods":3209,"@metamask/snaps-utils":3382,"@metamask/utils":3554,"cron-parser":4579,lodash:5239,luxon:5250},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExecutionDate=u,n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=c,t.data=function(e){if(!(0,i.hasProperty)(e,"CronjobController")||!(0,i.isObject)(e.CronjobController))return console.warn(`Skipping migration ${c}: \`CronjobController\` state not found or is not an object.`),e;if(!(0,i.hasProperty)(e,"PermissionController")||!(0,i.isObject)(e.PermissionController))return console.warn(new Error(`Skipping migration ${c}: \`PermissionController\` state not found or is not an object.`)),e;const t=e.CronjobController,n=e.PermissionController,r=Object.fromEntries(Object.values(n.subjects).filter(e=>(0,a.isSnapId)(e.origin)&&e.permissions[l.SnapEndowments.Cronjob]).flatMap(e=>{const{caveats:n}=e.permissions[l.SnapEndowments.Cronjob];if(!Array.isArray(n))return[];const r=n.find(e=>e.type===a.SnapCaveatType.SnapCronjob);if(!(null!=r&&r.value&&(0,i.isPlainObject)(r.value)&&(0,i.hasProperty)(r.value,"jobs")&&Array.isArray(r.value.jobs)))return[];return r.value.jobs.map(({expression:n,request:r},i)=>{var o;const a=`${e.origin}-${i}`,{lastRun:l}=(null===(o=t.jobs)||void 0===o?void 0:o[a])??{lastRun:0},c=(0,s.parseExpression)(n),d=c.hasPrev()&&c.prev().getTime()>l?c.prev().toISOString():u(n);return{id:`cronjob-${e.origin}-${i}`,recurring:!0,schedule:n,scheduledAt:(new Date).toISOString(),snapId:e.origin,date:d,request:r}})}).map(e=>[e.id,e])),o=Object.fromEntries(Object.entries(t.events??{}).map(([e,t])=>[e,{...t,recurring:!1,schedule:t.date}]));return t.events={...o,...r},delete t.jobs,e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils"),o=e("luxon"),s=e("cron-parser"),a=e("@metamask/snaps-utils"),l=e("@metamask/snaps-rpc-methods");const c=n.version=165;function u(e){const t=o.DateTime.fromISO(e,{setZone:!0});if(t.isValid){const e=Date.now(),n=t.toUTC().startOf("second");if(n.toMillis()<e)throw new Error("Cannot schedule an event in the past.");return n.toISO({suppressMilliseconds:!0})}try{const t=(0,s.parseExpression)(e,{utc:!0}).next(),n=o.DateTime.fromJSDate(t.toDate());return(0,i.assert)(n.isValid),n.toUTC().toISO()}catch{throw new Error(`Unable to parse "${e}" as ISO 8601 date, ISO 8601 duration, or cron expression.`)}}}}},{package:"$root$",file:"app/scripts/migrations/165.ts"}],[572,{"../../../shared/constants/network":6194,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBaseNetworkConfiguration=a,n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"NetworkController"))return console.warn(`Migration ${s}: NetworkController not found.`),e;const t=e.NetworkController;if(!(0,i.isObject)(t)){var n,r;return null===(n=global.sentry)||void 0===n||null===(r=n.captureException)||void 0===r||r.call(n,new Error(`Migration ${s}: NetworkController is not an object: ${typeof t}`)),e}if(!(0,i.hasProperty)(t,"networkConfigurationsByChainId")){var l,c;return null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`Migration ${s}: NetworkController missing property networkConfigurationsByChainId.`)),e}if(!(0,i.isObject)(t.networkConfigurationsByChainId)){var u,d;return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error(`Migration ${s}: NetworkController.networkConfigurationsByChainId is not an object: ${typeof t.networkConfigurationsByChainId}.`)),e}if(t.networkConfigurationsByChainId[o.CHAIN_IDS.BASE])return e;return t.networkConfigurationsByChainId[o.CHAIN_IDS.BASE]=a(),e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils"),o=e("../../../shared/constants/network");const s=n.version=166;function a(){return{blockExplorerUrls:[],chainId:"0x2105",defaultRpcEndpointIndex:0,name:"Base Mainnet",nativeCurrency:"ETH",rpcEndpoints:[{failoverUrls:(0,o.getFailoverUrlsForInfuraNetwork)("base-mainnet"),networkClientId:"base-mainnet",type:"infura",url:"https://base-mainnet.infura.io/v3/{infuraProjectId}"}]}}}}},{package:"$root$",file:"app/scripts/migrations/166.ts"}],[573,{"../../../shared/lib/manifestFlags":6280,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=s,t.data=function(e){var t;if(!(0,i.hasProperty)(e,"UserStorageController"))return console.warn("newState.UserStorageController is not present"),e;const n=e.UserStorageController;if(!(0,i.isObject)(n)){var r,a;return null===(r=global.sentry)||void 0===r||null===(a=r.captureException)||void 0===a||a.call(r,new Error(`Migration ${s}: UserStorageController is type '${typeof n}', expected object.`)),e}(0,i.hasProperty)(n,"isBackupAndSyncEnabled")&&(n.isBackupAndSyncEnabled=!0);(0,i.hasProperty)(n,"isAccountSyncingEnabled")&&(n.isAccountSyncingEnabled=!0);null!==(t=(0,o.getManifestFlags)().testing)&&void 0!==t&&t.disableSync&&(n.isBackupAndSyncEnabled=!1,n.isAccountSyncingEnabled=!1,n.isProfileSyncingEnabled=!1,n.isContactSyncingEnabled=!1);return e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils"),o=e("../../../shared/lib/manifestFlags");const s=n.version=167}}},{package:"$root$",file:"app/scripts/migrations/167.ts"}],[574,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){(0,r.hasProperty)(e,"PermissionLogController")&&(0,r.isObject)(e.PermissionLogController)&&(0,r.hasProperty)(e.PermissionLogController,"permissionActivityLog")?delete e.PermissionLogController.permissionActivityLog:console.warn(`Migration ${o}: 'PermissionLogController.permissionActivityLog' state not found, skipping migration.`)}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash");const o=n.version=168.1}}},{package:"$root$",file:"app/scripts/migrations/168.1.ts"}],[575,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.PreferencesController,n=null==t?void 0:t.preferences;n&&(n.smartAccountOptIn=!1)}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=168}}},{package:"$root$",file:"app/scripts/migrations/168.ts"}],[576,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.PreferencesController,n=null==e?void 0:e.AppStateController;null!=t&&t.preferences&&null!=n&&n.upgradeSplashPageAcknowledgedForAccounts&&(t.preferences.smartAccountOptInForAccounts=null==n?void 0:n.upgradeSplashPageAcknowledgedForAccounts);null!=n&&n.upgradeSplashPageAcknowledgedForAccounts&&(null==n||delete n.upgradeSplashPageAcknowledgedForAccounts)}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=169}}},{package:"$root$",file:"app/scripts/migrations/169.ts"}],[577,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){var t;const n=null==e?void 0:e.PreferencesController;null!=n&&null!==(t=n.preferences)&&void 0!==t&&t.smartAccountOptInForAccounts&&delete n.preferences.smartAccountOptInForAccounts}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=170.1}}},{package:"$root$",file:"app/scripts/migrations/170.1.ts"}],[578,{"../../../shared/constants/network":6194,"@metamask/network-controller":2751,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,o.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"networkConfigurationsByChainId")&&(0,r.isObject)(e.NetworkController.networkConfigurationsByChainId)){const{networkConfigurationsByChainId:t}=e.NetworkController;if(!Object.entries(t).filter(([e])=>![...s.infuraChainIdsTestNets,s.CHAIN_IDS.LINEA_MAINNET].includes(e)).some(([,e])=>{var t;if(!(0,r.isObject)(e)||!Array.isArray(e.rpcEndpoints)||"number"!=typeof e.defaultRpcEndpointIndex)return!1;const n=null==e||null===(t=e.rpcEndpoints)||void 0===t?void 0:t[null==e?void 0:e.defaultRpcEndpointIndex];if(!(0,r.isObject)(n)||"string"!=typeof n.url)return!1;try{const e=new URL(n.url).host;return n.type===i.RpcEndpointType.Infura||s.allowedInfuraHosts.includes(e)}catch{return!1}}))return e;const n=t[l];if((0,r.isObject)(n)){const{rpcEndpoints:i}=n;if(Array.isArray(i)){const o=i.findIndex(e=>(0,r.isObject)(e)&&"https://bsc-dataseed.binance.org/"===e.url);if(-1!==o)return i[o]={...i[o],url:`https://bsc-mainnet.infura.io/v3/${s.infuraProjectId}`},t[l]={...n,rpcEndpoints:i},{...e,NetworkController:{...e.NetworkController,networkConfigurationsByChainId:t}}}}}return e}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("@metamask/network-controller"),o=e("lodash"),s=e("../../../shared/constants/network");const a=n.version=170.2,l="0x38"}}},{package:"$root$",file:"app/scripts/migrations/170.2.ts"}],[579,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.PreferencesController;null==t||delete t.disabledUpgradeAccountsByChain,null==t||delete t.accountUpgradeDisabledChains}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=170}}},{package:"$root$",file:"app/scripts/migrations/170.ts"}],[58,{"../../../../shared/modules/authentication":6310,"@metamask/profile-sync-controller/auth":2921,"@metamask/profile-sync-controller/sdk":2944},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AuthenticationControllerInit=void 0;var r=e("@metamask/profile-sync-controller/auth"),i=e("@metamask/profile-sync-controller/sdk"),o=e("../../../../shared/modules/authentication");n.AuthenticationControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const s=(0,o.loadAuthenticationConfig)();return{controller:new r.Controller({messenger:e,state:n.AuthenticationController,metametrics:{getMetaMetricsId:t.call.bind(t,"MetaMetricsController:getMetaMetricsId"),agent:i.Platform.EXTENSION},config:{env:s}})}}}}},{package:"$root$",file:"app/scripts/controller-init/identity/authentication-controller-init.ts"}],[580,{"@metamask/bridge-controller":1527,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!a(e,"NetworkOrderController","state"))return e;const t=e.NetworkOrderController;if(!a(e,"PreferencesController","state"))return e;const n=e.PreferencesController;if(!a(n,"preferences","PreferencesController"))return e;const{preferences:r}=n;if(!(0,i.hasProperty)(r,"tokenNetworkFilter"))return e;const{tokenNetworkFilter:l}=r;if(!(0,i.isObject)(l)){var c,u;return null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error(`Migration ${s}: tokenNetworkFilter is type '${typeof l}', expected object.`)),e}if(0===Object.keys(l).length)return e;const{MultichainNetworkController:d}=e;if(!(0,i.isObject)(d)){var h,f;return null===(h=global.sentry)||void 0===h||null===(f=h.captureException)||void 0===f||f.call(h,new Error),e}const{selectedMultichainNetworkChainId:p}=d;if(!p||"string"!=typeof p){var g,m;return null===(g=global.sentry)||void 0===g||null===(m=g.captureException)||void 0===m||m.call(g,new Error(`Migration ${s}: selectedMultichainNetworkChainId is type '${typeof p}', expected string.`)),e}const b=function(e){const t=(0,o.formatChainIdToCaip)(Object.keys(e)[0]),{namespace:n}=(0,i.parseCaipChainId)(t),r={[n]:{...e}};return r}(l),y=function(e){const t=(0,o.formatChainIdToCaip)(e),{namespace:n}=(0,i.parseCaipChainId)(t),r={[n]:{[e]:!0}};return r}(p);return t.enabledNetworkMap={...b,...y},e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils"),o=e("@metamask/bridge-controller");const s=n.version=171;function a(e,t,n){return!!(0,i.hasProperty)(e,t)&&(!!(0,i.isObject)(e[t])||(null===(r=global.sentry)||void 0===r||null===(o=r.captureException)||void 0===o||o.call(r,new Error(`Migration ${s}: ${t} is type '${typeof e[t]}', expected object in ${n}.`)),!1));var r,o}}}},{package:"$root$",file:"app/scripts/migrations/171.ts"}],[581,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.MetaMetricsController;t&&!t.tracesBeforeMetricsOptIn&&(t.tracesBeforeMetricsOptIn=[])}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=172}}},{package:"$root$",file:"app/scripts/migrations/172.ts"}],[582,{"../../../shared/constants/network":6194,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,function(e){const t=o.CHAIN_IDS.SEI;(0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.isObject)(e.NetworkController.networkConfigurationsByChainId)&&(0,r.hasProperty)(e.NetworkController.networkConfigurationsByChainId,t)&&(0,r.isObject)(e.NetworkController.networkConfigurationsByChainId[t])&&(0,r.hasProperty)(e.NetworkController.networkConfigurationsByChainId[t],"name")&&"Sei Network"===e.NetworkController.networkConfigurationsByChainId[t].name&&(e.NetworkController.networkConfigurationsByChainId[t].name="Sei Mainnet")}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/constants/network");const s=n.version=173}}},{package:"$root$",file:"app/scripts/migrations/173.ts"}],[583,{"../../../shared/lib/sentry":6292,"@metamask/bridge-controller":1527,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,o.cloneDeep)(e);return t.meta.version=a,t.data=function(e){const t=null==e?void 0:e.BridgeStatusController;if(!(0,i.isObject)(t))return e;const{txHistory:n}=t;if(!(0,i.isObject)(n))return e;try{return Object.entries(n).forEach(([e,t])=>{var i,o;const s=(0,r.isSolanaChainId)(null===(i=t.status)||void 0===i||null===(i=i.srcChain)||void 0===i?void 0:i.chainId),a=null===(o=t.status)||void 0===o||null===(o=o.srcChain)||void 0===o?void 0:o.txHash;s&&a&&a!==e&&(n[a]={...t,txMetaId:a},delete n[e])}),e}catch(t){return(0,s.captureException)(new Error(`Migration ${a}: Failed to update bridge txHistory for solana to use txHash as key and txMetaId. Error: ${t.message}`)),e}}(t.data),t},n.version=void 0;var r=e("@metamask/bridge-controller"),i=e("@metamask/utils"),o=e("lodash"),s=e("../../../shared/lib/sentry");const a=n.version=174}}},{package:"$root$",file:"app/scripts/migrations/174.ts"}],[584,{"../../../shared/constants/network":6194,"../../../shared/lib/sentry":6292,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){try{const t="0x9da",n=e.NetworkController;if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(n)&&(0,r.hasProperty)(n,"networkConfigurationsByChainId")&&(0,r.isObject)(n.networkConfigurationsByChainId))for(const e of Object.values(n.networkConfigurationsByChainId))!(0,r.isObject)(e)||e.chainId!==o.CHAIN_IDS.FRAX&&e.chainId!==t||(0,r.hasProperty)(e,"nativeCurrency")&&(e.nativeCurrency="FRAX");return e}catch(t){return(0,s.captureException)(new Error(`Migration ${a}: Failed to update native currency for FRAX network configuration. Error: ${t.message}`)),e}}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/constants/network"),s=e("../../../shared/lib/sentry");const a=n.version=175}}},{package:"$root$",file:"app/scripts/migrations/175.ts"}],[585,{"../../../shared/lib/sentry":6292,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){try{const t=e.AppStateController;return(0,r.hasProperty)(e,"AppStateController")&&(0,r.isObject)(t)&&(0,r.hasProperty)(t,"addressSecurityAlertResponses")&&(0,r.isObject)(t.addressSecurityAlertResponses)&&(t.addressSecurityAlertResponses={}),e}catch(t){return(0,o.captureException)(new Error(`Migration ${s}: Failed to clear addressSecurityAlertResponses cache. Error: ${t.message}`)),e}}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/lib/sentry");const s=n.version=176.1}}},{package:"$root$",file:"app/scripts/migrations/176.1.ts"}],[586,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,r.hasProperty)(e,"MultichainTransactionsController")||!(0,r.isObject)(e.MultichainTransactionsController))return console.warn("Skipping migration. MultichainTransactionsController state not found."),e;const t=e.MultichainTransactionsController;if(!(0,r.hasProperty)(t,"nonEvmTransactions")||!(0,r.isObject)(t.nonEvmTransactions)){var n,i;return null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("Invalid nonEvmTransactions state: "+typeof t.nonEvmTransactions)),e}const{nonEvmTransactions:o}=t,l={};for(const[e,t]of Object.entries(o)){if(!a(t))throw new Error(`Invalid transaction state entry for account ${e}: expected TransactionStateEntry, got ${typeof t}`);l[e]={[s]:{transactions:t.transactions,next:t.next,lastUpdated:t.lastUpdated}}}t.nonEvmTransactions=l}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash");const o=n.version=176,s="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp";function a(e){return"object"==typeof e&&null!==e&&(0,r.hasProperty)(e,"transactions")&&(0,r.hasProperty)(e,"next")&&(0,r.hasProperty)(e,"lastUpdated")&&Array.isArray(e.transactions)&&("string"==typeof e.next||null===e.next)&&"number"==typeof e.lastUpdated}}}},{package:"$root$",file:"app/scripts/migrations/176.ts"}],[587,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,r.hasProperty)(e,"UserStorageController")||!(0,r.isObject)(e.UserStorageController)){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error("Invalid UserStorageController state: "+typeof e.UserStorageController)),e}(0,r.hasProperty)(e.UserStorageController,"hasAccountSyncingSyncedAtLeastOnce")&&delete e.UserStorageController.hasAccountSyncingSyncedAtLeastOnce;(0,r.hasProperty)(e.UserStorageController,"isAccountSyncingReadyToBeDispatched")&&delete e.UserStorageController.isAccountSyncingReadyToBeDispatched;(0,r.hasProperty)(e.UserStorageController,"isAccountSyncingInProgress")&&delete e.UserStorageController.isAccountSyncingInProgress}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash");const o=n.version=177}}},{package:"$root$",file:"app/scripts/migrations/177.ts"}],[588,{"../../../shared/constants/network":6194,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CHAINS_TO_RENAME=void 0,n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,function(e){if(!((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"networkConfigurationsByChainId")&&(0,r.isObject)(e.NetworkController.networkConfigurationsByChainId)))return;for(const t of a){const n=e.NetworkController.networkConfigurationsByChainId;if(!(0,r.hasProperty)(n,t.id))continue;const i=n[t.id];(0,r.isObject)(i)&&(0,r.hasProperty)(i,"name")&&i.name===t.fromName&&(i.name=t.toName)}}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/constants/network");const s=n.version=178,a=n.CHAINS_TO_RENAME=[{id:o.CHAIN_IDS.MAINNET,fromName:"Ethereum Mainnet",toName:"Ethereum"},{id:o.CHAIN_IDS.LINEA_MAINNET,fromName:"Linea Mainnet",toName:"Linea"},{id:o.CHAIN_IDS.BASE,fromName:"Base Mainnet",toName:"Base"},{id:o.CHAIN_IDS.ARBITRUM,fromName:"Arbitrum One",toName:"Arbitrum"},{id:o.CHAIN_IDS.AVALANCHE,fromName:"Avalanche Network C-Chain",toName:"Avalanche"},{id:o.CHAIN_IDS.BSC,fromName:"Binance Smart Chain",toName:"BNB Chain"},{id:o.CHAIN_IDS.OPTIMISM,fromName:"OP Mainnet",toName:"OP"},{id:o.CHAIN_IDS.POLYGON,fromName:"Polygon Mainnet",toName:"Polygon"},{id:o.CHAIN_IDS.SEI,fromName:"Sei Mainnet",toName:"Sei"},{id:o.CHAIN_IDS.ZKSYNC_ERA,fromName:"zkSync Era Mainnet",toName:"zkSync Era"}]}}},{package:"$root$",file:"app/scripts/migrations/178.ts"}],[589,{"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,function(e){if((0,r.hasProperty)(e,"PhishingController")&&(0,r.isObject)(e.PhishingController)){const t=e.PhishingController;(0,r.hasProperty)(t,"urlScanCache")&&(t.urlScanCache={})}}(t.data),t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash");const o=n.version=179}}},{package:"$root$",file:"app/scripts/migrations/179.ts"}],[59,{"../../../../shared/constants/metametrics":6190,"../../../../shared/lib/sentry":6292,"../../../../shared/lib/trace":6299,"../../../../shared/modules/authentication":6310,"@metamask/profile-sync-controller/user-storage":2931},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UserStorageControllerInit=void 0;var r=e("@metamask/profile-sync-controller/user-storage"),i=e("../../../../shared/constants/metametrics"),o=e("../../../../shared/lib/trace"),s=e("../../../../shared/lib/sentry"),a=e("../../../../shared/modules/authentication");n.UserStorageControllerInit=e=>{const t=(0,a.loadAuthenticationConfig)(),{controllerMessenger:n,initMessenger:l,persistedState:c}=e;return{controller:new r.Controller({messenger:n,state:c.UserStorageController,trace:o.trace,config:{env:t,contactSyncing:{onContactUpdated:e=>{l.call("MetaMetricsController:trackEvent",{category:i.MetaMetricsEventCategory.BackupAndSync,event:i.MetaMetricsEventName.ProfileActivityUpdated,properties:{profile_id:e,feature_name:"Backup And Sync",action:"Contacts Sync Contact Updated"}})},onContactDeleted:e=>{l.call("MetaMetricsController:trackEvent",{category:i.MetaMetricsEventCategory.BackupAndSync,event:i.MetaMetricsEventName.ProfileActivityUpdated,properties:{profile_id:e,feature_name:"Backup And Sync",action:"Contacts Sync Contact Deleted"}})},onContactSyncErroneousSituation:(e,t,n)=>{(0,s.captureException)(new Error(`Contact sync - ${t}`),n),l.call("MetaMetricsController:trackEvent",{category:i.MetaMetricsEventCategory.BackupAndSync,event:i.MetaMetricsEventName.ProfileActivityUpdated,properties:{profile_id:e,feature_name:"Backup And Sync",action:"Contacts Sync Erroneous Situation",additional_description:t}})}}}})}}}}},{package:"$root$",file:"app/scripts/controller-init/identity/user-storage-controller-init.ts"}],[590,{"../../../shared/constants/network":6194,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBaseNetworkConfiguration=a,n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"NetworkController"))return console.warn(`Migration ${s}: NetworkController not found.`),e;const t=e.NetworkController;if(!(0,i.isObject)(t)){var n,r;return null===(n=global.sentry)||void 0===n||null===(r=n.captureException)||void 0===r||r.call(n,new Error(`Migration ${s}: NetworkController is not an object: ${typeof t}`)),e}if(!(0,i.hasProperty)(t,"networkConfigurationsByChainId")){var l,c;return null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`Migration ${s}: NetworkController missing property networkConfigurationsByChainId.`)),e}if(!(0,i.isObject)(t.networkConfigurationsByChainId)){var u,d;return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error(`Migration ${s}: NetworkController.networkConfigurationsByChainId is not an object: ${typeof t.networkConfigurationsByChainId}.`)),e}const h=t.networkConfigurationsByChainId[o.CHAIN_IDS.BASE];if(h&&(0,i.isObject)(h)){if((0,i.hasProperty)(h,"rpcEndpoints")&&Array.isArray(h.rpcEndpoints)&&h.rpcEndpoints.some(e=>(0,i.isObject)(e)&&(0,i.hasProperty)(e,"networkClientId")&&(0,i.hasProperty)(e,"type")&&"base-mainnet"===e.networkClientId&&"infura"===e.type))return e;const n=a(),r={...h,rpcEndpoints:[...Array.isArray(h.rpcEndpoints)?h.rpcEndpoints:[],...n.rpcEndpoints]};t.networkConfigurationsByChainId[o.CHAIN_IDS.BASE]=r}else t.networkConfigurationsByChainId[o.CHAIN_IDS.BASE]=a();return e}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("@metamask/utils"),o=e("../../../shared/constants/network");const s=n.version=180;function a(){return{blockExplorerUrls:[],chainId:"0x2105",defaultRpcEndpointIndex:0,name:"Base",nativeCurrency:"ETH",rpcEndpoints:[{failoverUrls:(0,o.getFailoverUrlsForInfuraNetwork)("base-mainnet"),networkClientId:"base-mainnet",type:"infura",url:"https://base-mainnet.infura.io/v3/{infuraProjectId}"}]}}}}},{package:"$root$",file:"app/scripts/migrations/180.ts"}],[591,{lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.PreferencesController;t&&delete t.showIncomingTransactions}(t.data),t},n.version=void 0;var r=e("lodash");const i=n.version=181}}},{package:"$root$",file:"app/scripts/migrations/181.ts"}],[592,{"../../../shared/constants/network":6194,"@metamask/utils":3554,lodash:5239,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,function(e){if(!(0,o.hasProperty)(e,"NetworkController"))return console.warn(`Migration ${a}: NetworkController not found.`),e;const t=e.NetworkController;if(!(0,o.isObject)(t)){var n,r;return null===(n=global.sentry)||void 0===n||null===(r=n.captureException)||void 0===r||r.call(n,new Error(`Migration ${a}: NetworkController is not an object: ${typeof t}`)),e}if(!(0,o.hasProperty)(t,"networkConfigurationsByChainId")){var l,c;return null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`Migration ${a}: NetworkController missing property networkConfigurationsByChainId.`)),e}if(!(0,o.isObject)(t.networkConfigurationsByChainId)){var u,d;return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error(`Migration ${a}: NetworkController.networkConfigurationsByChainId is not an object: ${typeof t.networkConfigurationsByChainId}.`)),e}const h=t.networkConfigurationsByChainId,f=[s.CHAIN_IDS.ARBITRUM,s.CHAIN_IDS.BSC,s.CHAIN_IDS.POLYGON,s.CHAIN_IDS.OPTIMISM,s.CHAIN_IDS.SEI];s.FEATURED_RPCS.forEach(e=>{if(!f.includes(e.chainId))return;const{chainId:t}=e;if(h[t])return;const n={chainId:e.chainId,name:e.name,nativeCurrency:e.nativeCurrency,rpcEndpoints:e.rpcEndpoints.map(e=>({url:e.url,failoverUrls:e.failoverUrls||[],type:e.type,networkClientId:(0,i.v4)()})),defaultRpcEndpointIndex:e.defaultRpcEndpointIndex,blockExplorerUrls:e.blockExplorerUrls||[],defaultBlockExplorerUrlIndex:e.defaultBlockExplorerUrlIndex||0};h[t]=n})}(t.data),t},n.version=void 0;var r=e("lodash"),i=e("uuid"),o=e("@metamask/utils"),s=e("../../../shared/constants/network");const a=n.version=182}}},{package:"$root$",file:"app/scripts/migrations/182.ts"}],[593,{"../../../shared/lib/sentry":6292,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);t.meta.version=s;try{!function(e){if(!(0,r.hasProperty)(e,"CurrencyController"))return console.warn(`Migration ${s}: CurrencyController not found.`),e;const t=e.CurrencyController;if(!(0,r.isObject)(t))return(0,o.captureException)(new Error(`Migration ${s}: CurrencyController is not an object: ${typeof t}`)),e;if(!(0,r.hasProperty)(t,"currencyRates"))return console.warn(`Migration ${s}: currencyRates not found in CurrencyController.`),e;const{currencyRates:n}=t;if(!(0,r.isObject)(n))return(0,o.captureException)(new Error(`Migration ${s}: currencyRates is not an object: ${typeof n}`)),e;Object.keys(n).forEach(e=>{const t=n[e];if((0,r.isObject)(t)){if((0,r.hasProperty)(t,"conversionRate")){const{conversionRate:e}=t;if("number"==typeof e){var i;((null===(i=e.toString().split(".")[1])||void 0===i?void 0:i.length)||0)>9&&(t.conversionRate=a(e))}}if((0,r.hasProperty)(t,"usdConversionRate")){const{usdConversionRate:e}=t;if("number"==typeof e){var o;((null===(o=e.toString().split(".")[1])||void 0===o?void 0:o.length)||0)>9&&(t.usdConversionRate=a(e))}}}})}(t.data)}catch(n){console.error(n);const i=new Error(`Migration #${s}: ${(0,r.getErrorMessage)(n)}`);(0,o.captureException)(i),t.data=e.data}return t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/lib/sentry");const s=n.version=183.1;function a(e,t=9){return Number(e.toFixed(t))}}}},{package:"$root$",file:"app/scripts/migrations/183.1.ts"}],[594,{"../../../shared/constants/network":6194,"../../../shared/lib/sentry":6292,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);t.meta.version=a;try{!function(e){if(!(0,r.hasProperty)(e,"NetworkController"))return console.warn(`Migration ${a}: NetworkController not found.`),e;const t=e.NetworkController;if(!(0,r.isObject)(t)){var n,i;return null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error(`Migration ${a}: NetworkController is not an object: ${typeof t}`)),e}if(!(0,r.hasProperty)(t,"networkConfigurationsByChainId")){var o,s;return null===(o=global.sentry)||void 0===o||null===(s=o.captureException)||void 0===s||s.call(o,new Error(`Migration ${a}: NetworkController missing property networkConfigurationsByChainId.`)),e}if(!(0,r.isObject)(t.networkConfigurationsByChainId)){var c,u;return null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error(`Migration ${a}: NetworkController.networkConfigurationsByChainId is not an object: ${typeof t.networkConfigurationsByChainId}.`)),e}const{networkConfigurationsByChainId:d}=t,h=d[l];if(!h)return e;if(!(0,r.isObject)(h)||!(0,r.hasProperty)(h,"rpcEndpoints")||!Array.isArray(h.rpcEndpoints)){var f,p;return null===(f=global.sentry)||void 0===f||null===(p=f.captureException)||void 0===p||p.call(f,new Error(`Migration ${a}: Sei network configuration has invalid rpcEndpoints.`)),e}h.rpcEndpoints=h.rpcEndpoints.map(e=>{if(!(0,r.isObject)(e)||!(0,r.hasProperty)(e,"url")||"string"!=typeof e.url)return e;if((0,r.hasProperty)(e,"failoverUrls")&&Array.isArray(e.failoverUrls)&&e.failoverUrls.length>0)return e;const t="https://snowy-winter-research.sei-pacific.quiknode.pro/c5f06f57de4befe1faf9c57bce961fddd5d8bb3b/";return t?{...e,failoverUrls:[t]}:e})}(t.data)}catch(n){console.error(n);const i=new Error(`Migration #${a}: ${(0,r.getErrorMessage)(n)}`);(0,o.captureException)(i),t.data=e.data}return t},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("../../../shared/lib/sentry"),s=e("../../../shared/constants/network");const a=n.version=183,l=s.CHAIN_IDS.SEI}}},{package:"$root$",file:"app/scripts/migrations/183.ts"}],[595,{"../../../shared/lib/sentry":6292,"@metamask/network-controller":2751,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MEGAETH_TESTNET_V2_CONFIG=n.MEGAETH_TESTNET_V1_CHAIN_ID=void 0,n.migrate=async function(e){const t=(0,o.cloneDeep)(e);t.meta.version=a;try{!function(e){if(!(0,r.hasProperty)(e,"NetworkController"))return(0,s.captureException)(new Error(`Migration ${a}: NetworkController not found.`)),e;const t=e.NetworkController;if(!(0,r.isObject)(t))return(0,s.captureException)(new Error(`Migration ${a}: NetworkController is not an object: ${typeof t}`)),e;if(!(0,r.hasProperty)(t,"networkConfigurationsByChainId"))return(0,s.captureException)(new Error(`Migration ${a}: NetworkController missing property networkConfigurationsByChainId.`)),e;if(!(0,r.isObject)(t.networkConfigurationsByChainId))return(0,s.captureException)(new Error(`Migration ${a}: NetworkController.networkConfigurationsByChainId is not an object: ${typeof t.networkConfigurationsByChainId}.`)),e;if(!(0,r.hasProperty)(e,"NetworkEnablementController"))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController not found.`)),e;const n=e.NetworkEnablementController;if(!(0,r.isObject)(n))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController is not an object: ${typeof n}`)),e;if(!(0,r.hasProperty)(n,"enabledNetworkMap"))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController missing property enabledNetworkMap.`)),e;if(!(0,r.isObject)(n.enabledNetworkMap))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController.enabledNetworkMap is not an object: ${typeof n.enabledNetworkMap}.`)),e;if(!(0,r.hasProperty)(n.enabledNetworkMap,r.KnownCaipNamespace.Eip155))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController.enabledNetworkMap missing property Eip155.`)),e;if(!(0,r.isObject)(n.enabledNetworkMap[r.KnownCaipNamespace.Eip155]))return(0,s.captureException)(new Error(`Migration ${a}: NetworkEnablementController.enabledNetworkMap[Eip155] is not an object: ${typeof n.enabledNetworkMap[r.KnownCaipNamespace.Eip155]}.`)),e;const{networkConfigurationsByChainId:o}=t,{enabledNetworkMap:{[r.KnownCaipNamespace.Eip155]:u}}=n;if((0,r.hasProperty)(o,c.chainId)){const e=o[c.chainId];e.name=c.name,e.nativeCurrency=c.nativeCurrency;e.rpcEndpoints.find(e=>e.url===c.rpcEndpoints[0].url)||(e.rpcEndpoints.push({failoverUrls:[],networkClientId:c.rpcEndpoints[0].networkClientId,type:i.RpcEndpointType.Custom,url:c.rpcEndpoints[0].url}),e.defaultRpcEndpointIndex=e.rpcEndpoints.length-1);e.blockExplorerUrls.find(e=>e===c.blockExplorerUrls[0])||(e.blockExplorerUrls.push(c.blockExplorerUrls[0]),e.defaultBlockExplorerUrlIndex=e.blockExplorerUrls.length-1)}else o[c.chainId]=c;(0,r.hasProperty)(u,c.chainId)||(u[c.chainId]=!1);const d=o[l];(0,r.hasProperty)(t,"selectedNetworkClientId")&&"string"==typeof t.selectedNetworkClientId&&d&&(0,r.isObject)(d)&&(0,r.hasProperty)(d,"rpcEndpoints")&&Array.isArray(d.rpcEndpoints)&&d.rpcEndpoints.some(e=>e.networkClientId===t.selectedNetworkClientId)&&(t.selectedNetworkClientId="mainnet",u["0x1"]=!0);(0,r.hasProperty)(u,l)&&delete u[l];o[l]&&delete o[l]}(t.data)}catch(n){console.error(n);const i=new Error(`Migration #${a}: ${(0,r.getErrorMessage)(n)}`);(0,s.captureException)(i),t.data=e.data}return t},n.version=void 0;var r=e("@metamask/utils"),i=e("@metamask/network-controller"),o=e("lodash"),s=e("../../../shared/lib/sentry");const a=n.version=184,l=n.MEGAETH_TESTNET_V1_CHAIN_ID="0x18c6",c=n.MEGAETH_TESTNET_V2_CONFIG={chainId:"0x18c7",name:"MegaETH Testnet",nativeCurrency:"MegaETH",blockExplorerUrls:["https://megaeth-testnet-v2.blockscout.com"],defaultRpcEndpointIndex:0,defaultBlockExplorerUrlIndex:0,rpcEndpoints:[{failoverUrls:[],networkClientId:"megaeth-testnet-v2",type:i.RpcEndpointType.Custom,url:"https://timothy.megaeth.com/rpc"}]}}}},{package:"$root$",file:"app/scripts/migrations/184.ts"}],[596,{localforage:5094,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e){const t=(0,i.cloneDeep)(e);t.meta.version=s;try{const e=(await o.default.keys()).filter(e=>e.startsWith("cachedFetch:https://price.api.cx.metamask.io/v1/chains/"));await Promise.all(e.map(e=>o.default.removeItem(e))),console.log(`Migration #${s}: Cleaned up ${e.length} cache entries for historical price API`)}catch(e){console.warn(`Migration #${s}: Could not access localforage:`,e)}return t},n.version=void 0;var r,i=e("lodash"),o=(r=e("localforage"))&&r.__esModule?r:{default:r};const s=n.version=185}}},{package:"$root$",file:"app/scripts/migrations/185.ts"}],[597,{"../../../shared/lib/sentry":6292,"@metamask/network-controller":2751,"@metamask/utils":3554,lodash:5239,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MEGAETH_TESTNET_V2_CONFIG=n.MEGAETH_TESTNET_V1_CHAIN_ID=void 0,n.migrate=async function(e,t){e.meta.version=l;const n=(0,o.cloneDeep)(e),i=new Set;try{!function(e,t){const n=function(e){if(!(0,r.hasProperty)(e,"NetworkController"))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing NetworkController`)),undefined;const t=e.NetworkController;if(!function(e){if(!(0,r.isObject)(e))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: NetworkController state is not an object: '${typeof e}'`)),!1;if(!(0,r.hasProperty)(e,"networkConfigurationsByChainId"))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing networkConfigurationsByChainId property`)),!1;if(!function(e){return(0,r.isObject)(e)&&Object.entries(e).every(([e])=>"string"==typeof e&&(0,r.isHexString)(e))}(e.networkConfigurationsByChainId))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: networkConfigurationsByChainId is not a valid Record<Hex, unknown>`)),!1;if(!(0,r.hasProperty)(e,"selectedNetworkClientId"))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing selectedNetworkClientId property`)),!1;if("string"!=typeof e.selectedNetworkClientId)return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: selectedNetworkClientId is not a string: '${typeof e.selectedNetworkClientId}'`)),!1;return!0}(t))return undefined;return t}(e);if(n===undefined)return console.warn(`Migration ${l}: Missing or invalid NetworkController state, skip the migration`),e;t.add("NetworkController");const{networkConfigurationsByChainId:i,selectedNetworkClientId:o}=n;if((0,r.hasProperty)(i,u.chainId)){const t=i[u.chainId];if(!d(t))return console.warn(`Migration ${l}: Invalid MegaETH Testnet v2 network configuration, skip the migration`),e;!function(e){e.name=u.name,e.nativeCurrency=u.nativeCurrency;const t=e.rpcEndpoints.find(e=>e.url===u.rpcEndpoints[0].url);t||(e.rpcEndpoints.push({failoverUrls:[],networkClientId:(0,s.v4)(),type:"custom",url:u.rpcEndpoints[0].url}),e.defaultRpcEndpointIndex=e.rpcEndpoints.length-1);const n=e.blockExplorerUrls.find(e=>e===u.blockExplorerUrls[0]);n||(e.blockExplorerUrls.push(u.blockExplorerUrls[0]),e.defaultBlockExplorerUrlIndex=e.blockExplorerUrls.length-1)}(t)}else n.networkConfigurationsByChainId[u.chainId]=u;("megaeth-testnet"===o||function(e,t,n){if(!(0,r.hasProperty)(n,e))return!1;const i=n[e];return d(i)&&i.rpcEndpoints.some(e=>e.networkClientId===t)}(c,o,i))&&(n.selectedNetworkClientId="mainnet");const h=function(e){if(!(0,r.hasProperty)(e,"NetworkEnablementController"))return undefined;const t=e.NetworkEnablementController;if(!function(e){if(!(0,r.isObject)(e))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkEnablementController state: '${typeof e}'`)),!1;if(!(0,r.hasProperty)(e,"enabledNetworkMap"))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkEnablementController state: missing property enabledNetworkMap.`)),!1;if(!(0,r.isObject)(e.enabledNetworkMap))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkEnablementController state: NetworkEnablementController.enabledNetworkMap is not an object: ${typeof e.enabledNetworkMap}.`)),!1;if(!(0,r.hasProperty)(e.enabledNetworkMap,r.KnownCaipNamespace.Eip155))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkEnablementController state: NetworkEnablementController.enabledNetworkMap missing property Eip155.`)),!1;if(!f(e.enabledNetworkMap[r.KnownCaipNamespace.Eip155]))return(0,a.captureException)(new Error(`Migration ${l}: Invalid NetworkEnablementController state: NetworkEnablementController.enabledNetworkMap[Eip155] is not a valid enabledNetworkMap.`)),!1;return!0}(t))return undefined;return t}(e);if(h===undefined)console.warn(`Migration ${l}: Missing or invalid NetworkEnablementController state, skip the NetworkEnablementController migration`);else{t.add("NetworkEnablementController");const e=h.enabledNetworkMap[r.KnownCaipNamespace.Eip155];(0,r.hasProperty)(e,u.chainId)||(h.enabledNetworkMap[r.KnownCaipNamespace.Eip155][u.chainId]=!1);const i=(0,r.hasProperty)(e,c),o=i&&!0===e[c];!function(e){if((0,r.isObject)(e)){let t=0;const n=Object.values(e);for(const e of n)if(f(e)&&(t+=Object.values(e).filter(Boolean).length),t>1)return!0}return!1}(h.enabledNetworkMap)&&o&&(h.enabledNetworkMap[r.KnownCaipNamespace.Eip155]["0x1"]=!0,n.selectedNetworkClientId="mainnet"),i&&delete h.enabledNetworkMap[r.KnownCaipNamespace.Eip155][c]}(0,r.hasProperty)(i,c)&&delete n.networkConfigurationsByChainId[c]}(n.data,i),e.data=n.data,i.forEach(e=>t.add(e))}catch(e){console.error(e);const t=new Error(`Migration #${l}: ${(0,r.getErrorMessage)(e)}`);(0,a.captureException)(t)}},n.version=void 0;var r=e("@metamask/utils"),i=e("@metamask/network-controller"),o=e("lodash"),s=e("uuid"),a=e("../../../shared/lib/sentry");const l=n.version=186,c=n.MEGAETH_TESTNET_V1_CHAIN_ID="0x18c6",u=n.MEGAETH_TESTNET_V2_CONFIG={chainId:"0x18c7",name:"MegaETH Testnet",nativeCurrency:"MegaETH",blockExplorerUrls:["https://megaeth-testnet-v2.blockscout.com"],defaultRpcEndpointIndex:0,defaultBlockExplorerUrlIndex:0,rpcEndpoints:[{failoverUrls:[],networkClientId:"megaeth-testnet-v2",type:i.RpcEndpointType.Custom,url:"https://carrot.megaeth.com/rpc"}]};function d(e){return(0,r.isObject)(e)&&(0,r.hasProperty)(e,"chainId")&&"string"==typeof e.chainId&&(0,r.isHexString)(e.chainId)&&(0,r.hasProperty)(e,"rpcEndpoints")&&Array.isArray(e.rpcEndpoints)&&e.rpcEndpoints.every(h)&&(0,r.hasProperty)(e,"name")&&"string"==typeof e.name&&(0,r.hasProperty)(e,"nativeCurrency")&&"string"==typeof e.nativeCurrency&&(0,r.hasProperty)(e,"blockExplorerUrls")&&Array.isArray(e.blockExplorerUrls)&&e.blockExplorerUrls.every(e=>"string"==typeof e)&&(0,r.hasProperty)(e,"defaultRpcEndpointIndex")&&"number"==typeof e.defaultRpcEndpointIndex&&(!(0,r.hasProperty)(e,"defaultBlockExplorerUrlIndex")||(0,r.hasProperty)(e,"defaultBlockExplorerUrlIndex")&&"number"==typeof e.defaultBlockExplorerUrlIndex)}function h(e){return(0,r.isObject)(e)&&(0,r.hasProperty)(e,"networkClientId")&&"string"==typeof e.networkClientId&&(0,r.hasProperty)(e,"url")&&"string"==typeof e.url}function f(e){return(0,r.isObject)(e)&&Object.entries(e).every(([e,t])=>"string"==typeof e&&"boolean"==typeof t)}}}},{package:"$root$",file:"app/scripts/migrations/186.ts"}],[598,{"../../../shared/lib/sentry":6292,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e,t){e.meta.version=o;try{(function(e){if(!(0,r.hasProperty)(e,"TransactionController")){var t,n;return null===(t=global.sentry)||void 0===t||null===(n=t.captureException)||void 0===n||n.call(t,new Error(`Migration ${o}: state.TransactionController is not defined`)),!1}const i=e.TransactionController;if(!(0,r.isObject)(i)){var s,a;return null===(s=global.sentry)||void 0===s||null===(a=s.captureException)||void 0===a||a.call(s,new Error(`Migration ${o}: typeof state.TransactionController is ${typeof i}`)),!1}if(!(0,r.hasProperty)(i,"transactions"))return console.warn(`Migration ${o}: state.TransactionController.transactions not found, skipping.`),!1;if(!Array.isArray(i.transactions)){var l,c;return null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`Migration ${o}: state.TransactionController.transactions is not an array: ${typeof i.transactions}`)),!1}return i.transactions=i.transactions.map(e=>{if(!(0,r.isObject)(e))return e;const t={...e};return delete t.history,delete t.sendFlowHistory,t}),!0})(e.data)&&t.add("TransactionController")}catch(e){console.error(e);const t=new Error(`Migration #${o} failed: ${(0,r.getErrorMessage)(e)}`);(0,i.captureException)(t)}},n.version=void 0;var r=e("@metamask/utils"),i=e("../../../shared/lib/sentry");const o=n.version=187}}},{package:"$root$",file:"app/scripts/migrations/187.ts"}],[599,{"../../../shared/constants/network":6194,"../../../shared/lib/sentry":6292,"@metamask/network-controller":2751,"@metamask/utils":3554,_process:5490,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e,n){e.meta.version=l;try{a=e.data,(0,i.hasProperty)(a,"NetworkController")&&(0,i.isObject)(a.NetworkController)&&(0,i.hasProperty)(a.NetworkController,"networkConfigurationsByChainId")&&(0,i.isObject)(a.NetworkController.networkConfigurationsByChainId)&&(!function(e){const{networkConfigurationsByChainId:n}=e.NetworkController,a=n[c];if(!a)return;if(u=a,!((0,i.isObject)(u)&&(0,i.hasProperty)(u,"rpcEndpoints")&&Array.isArray(u.rpcEndpoints)))return void(0,s.captureException)(new Error(`Migration ${l}: Monad network configuration has invalid rpcEndpoints structure.`));var u;a.rpcEndpoints=a.rpcEndpoints.map(e=>{if(!function(e){return(0,i.isObject)(e)&&(0,i.hasProperty)(e,"url")&&"string"==typeof e.url&&(!(0,i.hasProperty)(e,"failoverUrls")||(0,i.hasProperty)(e,"failoverUrls")&&Array.isArray(e.failoverUrls)&&e.failoverUrls.every(e=>"string"==typeof e))}(e))return e;if(e.failoverUrls&&Array.isArray(e.failoverUrls)&&e.failoverUrls.length>0)return e;if(!function(e){if(e.type===r.RpcEndpointType.Infura)return!0;const n=/^https:\/\/(.+?)\.infura\.io\/v3\//u,i=e.url.match(n);if(!i)return!1;{const n=`https://${i[1]}.infura.io/v3/${(0,o.escapeRegExp)(t.env.INFURA_PROJECT_ID)}`;return e.url.startsWith(n)}return!0}(e))return e;const n="https://icy-attentive-sky.monad-mainnet.quiknode.pro/a7e9228229f88a7c30b3f12c1c534de7fb89a879/";return n?{...e,failoverUrls:[n]}:e})}(e.data),n.add("NetworkController"))}catch(e){console.error(e);const t=new Error(`Migration #${l}: ${(0,i.getErrorMessage)(e)}`);throw(0,s.captureException)(t),t}var a},n.version=void 0;var r=e("@metamask/network-controller"),i=e("@metamask/utils"),o=e("lodash"),s=e("../../../shared/lib/sentry"),a=e("../../../shared/constants/network");const l=n.version=188,c=a.CHAIN_IDS.MONAD}).call(this)}).call(this,e("_process"))}}},{package:"$root$",file:"app/scripts/migrations/188.ts"}],[60,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGlobalChainId=function(e){const t=e.call("NetworkController:getState").selectedNetworkClientId,{chainId:n}=e.call("NetworkController:getNetworkClientById",t).configuration;return n}}}},{package:"$root$",file:"app/scripts/controller-init/init-utils.ts"}],[600,{"../../../shared/constants/network":6194,"../../../shared/lib/sentry":6292,"@metamask/utils":3554,lodash:5239,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MEGAETH_MAINNET_CHAIN_ID=void 0,n.migrate=async function(e,t){e.meta.version=l;const n=(0,i.cloneDeep)(e),d=new Set;try{!function(e,t){const n=function(e){if(!(0,r.hasProperty)(e,"NetworkController"))return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing NetworkController`)),undefined;const t=e.NetworkController;if(!function(e){if(!(0,r.isObject)(e))return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: NetworkController state is not an object: '${typeof e}'`)),!1;if(!(0,r.hasProperty)(e,"networkConfigurationsByChainId"))return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing networkConfigurationsByChainId property`)),!1;if(!function(e){return(0,r.isObject)(e)&&Object.entries(e).every(([e])=>"string"==typeof e&&(0,r.isHexString)(e))}(e.networkConfigurationsByChainId))return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: networkConfigurationsByChainId is not a valid Record<Hex, unknown>`)),!1;if(!(0,r.hasProperty)(e,"selectedNetworkClientId"))return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: missing selectedNetworkClientId property`)),!1;if("string"!=typeof e.selectedNetworkClientId)return(0,s.captureException)(new Error(`Migration ${l}: Invalid NetworkController state: selectedNetworkClientId is not a string: '${typeof e.selectedNetworkClientId}'`)),!1;return!0}(t))return undefined;return t}(e);if(n===undefined)return e;const{networkConfigurationsByChainId:i}=n;if((0,r.hasProperty)(i,c)){const n=i[c];if(d=n,!((0,r.isObject)(d)&&(0,r.hasProperty)(d,"chainId")&&"string"==typeof d.chainId&&(0,r.isHexString)(d.chainId)&&(0,r.hasProperty)(d,"rpcEndpoints")&&Array.isArray(d.rpcEndpoints)&&d.rpcEndpoints.every(u)&&(0,r.hasProperty)(d,"name")&&"string"==typeof d.name&&(0,r.hasProperty)(d,"nativeCurrency")&&"string"==typeof d.nativeCurrency&&(0,r.hasProperty)(d,"blockExplorerUrls")&&Array.isArray(d.blockExplorerUrls)&&d.blockExplorerUrls.every(e=>"string"==typeof e)&&(0,r.hasProperty)(d,"defaultRpcEndpointIndex")&&"number"==typeof d.defaultRpcEndpointIndex&&(!(0,r.hasProperty)(d,"defaultBlockExplorerUrlIndex")||(0,r.hasProperty)(d,"defaultBlockExplorerUrlIndex")&&"number"==typeof d.defaultBlockExplorerUrlIndex)))return console.warn(`Migration ${l}: Invalid MegaETH Mainnet network configuration, skip the migration`),e;!function(e){if(a.infuraProjectId){const t=`https://megaeth-mainnet.infura.io/v3/${a.infuraProjectId}`;e.rpcEndpoints.find(e=>e.url===t)||(e.rpcEndpoints.push({failoverUrls:[],networkClientId:(0,o.v4)(),type:"custom",url:t}),e.defaultRpcEndpointIndex=e.rpcEndpoints.length-1)}else(0,s.captureException)(new Error(`Migration ${l}: Infura project ID is not set, skip the MegaETH RPC part of the migration`));const t="https://megaeth.blockscout.com",n=e.blockExplorerUrls.find(e=>e.includes(t));n||(e.blockExplorerUrls.push(t),e.defaultBlockExplorerUrlIndex=e.blockExplorerUrls.length-1)}(n),t.add("NetworkController")}var d}(n.data,d),e.data=n.data,d.forEach(e=>t.add(e))}catch(e){console.error(e);const t=new Error(`Migration #${l}: ${(0,r.getErrorMessage)(e)}`);(0,s.captureException)(t)}},n.version=void 0;var r=e("@metamask/utils"),i=e("lodash"),o=e("uuid"),s=e("../../../shared/lib/sentry"),a=e("../../../shared/constants/network");const l=n.version=189,c=n.MEGAETH_MAINNET_CHAIN_ID="0x10e6";function u(e){return(0,r.isObject)(e)&&(0,r.hasProperty)(e,"networkClientId")&&"string"==typeof e.networkClientId&&(0,r.hasProperty)(e,"url")&&"string"==typeof e.url}}}},{package:"$root$",file:"app/scripts/migrations/189.ts"}],[601,{"webextension-polyfill":6163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e,t){e.meta.version=o;const n=e.data.TokenListController;if(null==n||!n.tokensChainsCache)return;const r=n.tokensChainsCache,s=Object.keys(r);if(0===s.length)return;try{const e=await i.default.storage.local.get(s.map(c)),a=s.filter(t=>!(c(t)in e));if(0===a.length)console.log(`Migration #${o}: All ${s.length} chain(s) already migrated to StorageService`);else{const e={};for(const t of a){e[c(t)]=r[t]}await i.default.storage.local.set(e),console.log(`Migration #${o}: Migrated ${a.length} chain(s) from TokenListController state to StorageService`)}n.tokensChainsCache={},t.add("TokenListController")}catch(e){console.error(`Migration #${o}: Failed to migrate tokensChainsCache to StorageService:`,e),n.tokensChainsCache={},t.add("TokenListController")}},n.version=void 0;var r,i=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r};const o=n.version=190,s="storageService:",a="TokenListController",l="tokensChainsCache";function c(e){return`${s}${a}:${l}:${e}`}}}},{package:"$root$",file:"app/scripts/migrations/190.ts"}],[602,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e,t){e.meta.version=i;const n=e.data;if(!(0,r.hasProperty)(n,"TokenListController"))return;const o=n.TokenListController;if(!(0,r.isObject)(o))return;(0,r.hasProperty)(o,"preventPollingOnNetworkRestart")&&(delete o.preventPollingOnNetworkRestart,t.add("TokenListController"))},n.version=void 0;var r=e("@metamask/utils");const i=n.version=191}}},{package:"$root$",file:"app/scripts/migrations/191.ts"}],[603,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.migrate=async function(e,t){e.meta.version=i,function(e,t){if(!(0,r.hasProperty)(e,"firstTimeInfo"))return;const{firstTimeInfo:n}=e;if(!(0,r.isObject)(n)||!(0,r.hasProperty)(n,"version")||"string"!=typeof n.version||!(0,r.hasProperty)(n,"date")||"number"!=typeof n.date)return delete e.firstTimeInfo,void t.add("firstTimeInfo");(0,r.hasProperty)(e,"AppMetadataController")||(e.AppMetadataController={});const i=e.AppMetadataController;if(!(0,r.isObject)(i))return delete e.firstTimeInfo,void t.add("firstTimeInfo");i.firstTimeInfo={version:n.version,date:n.date},delete e.firstTimeInfo,t.add("AppMetadataController"),t.add("firstTimeInfo")}(e.data,t)},n.version=void 0;var r=e("@metamask/utils");const i=n.version=192}}},{package:"$root$",file:"app/scripts/migrations/192.ts"}],[604,{"@metamask/transaction-controller":3473,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return function(o){const s=(0,r.cloneDeep)(o);s.meta.version=e;try{const e=function(e,t,n){const r=e,{TransactionController:o}=r;if(o&&o.transactions){const{transactions:e}=o;r.TransactionController.transactions=e.map(e=>t(e)?(e.status=i.TransactionStatus.failed,e.err={message:n,note:`Tx automatically failed by migration because ${n}`},e):e)}return r}(s.data,n,t);s.data=e}catch(t){console.warn(`MetaMask Migration #${e}${t.stack}`)}return Promise.resolve(s)}};var r=e("lodash"),i=e("@metamask/transaction-controller")}}},{package:"$root$",file:"app/scripts/migrations/fail-tx.js"}],[605,{"./002":382,"./003":383,"./004":384,"./005":385,"./006":386,"./007":387,"./008":388,"./009":389,"./010":390,"./011":391,"./012":392,"./013":393,"./014":394,"./015":395,"./016":396,"./017":397,"./018":398,"./019":399,"./020":400,"./021":401,"./022":402,"./023":403,"./024":404,"./025":405,"./026":406,"./027":407,"./028":408,"./029":409,"./030":410,"./031":411,"./032":412,"./033":413,"./034":414,"./035":415,"./036":416,"./037":417,"./038":418,"./039":419,"./040":420,"./041":421,"./042":422,"./043":423,"./044":424,"./045":425,"./046":426,"./047":427,"./048":428,"./049":429,"./050":430,"./051":431,"./052":432,"./053":433,"./054":434,"./055":435,"./056":436,"./057":437,"./058":438,"./059":439,"./060":440,"./061":441,"./062":442,"./063":443,"./064":444,"./065":445,"./066":446,"./067":447,"./068":448,"./069":449,"./070":450,"./071":451,"./072":452,"./073":453,"./074":454,"./075":455,"./076":456,"./077":461,"./078":462,"./079":463,"./080":464,"./081":465,"./082":466,"./083":467,"./084":468,"./085":469,"./086":470,"./087":471,"./088":472,"./089":473,"./090":474,"./091":475,"./092":479,"./092.1":476,"./092.2":477,"./092.3":478,"./093":480,"./094":481,"./095":482,"./096":483,"./097":484,"./098":485,"./099":486,"./100":487,"./101":488,"./102":489,"./103":490,"./104":491,"./105":492,"./106":493,"./107":494,"./108":495,"./109":496,"./110":497,"./111":498,"./112":499,"./113":500,"./114":501,"./115":502,"./116":503,"./117":504,"./118":505,"./119":506,"./120":512,"./120.1":507,"./120.2":508,"./120.4":509,"./120.5":510,"./120.6":511,"./121":515,"./121.1":513,"./121.2":514,"./122":516,"./123":517,"./124":518,"./125":520,"./125.1":519,"./126":522,"./126.1":521,"./127":523,"./128":524,"./129":525,"./130":526,"./131":528,"./131.1":527,"./132":529,"./133":532,"./133.1":530,"./133.2":531,"./134":534,"./134.1":533,"./135":535,"./136":536,"./137":537,"./138":538,"./139":539,"./140":540,"./141":541,"./142":542,"./143":544,"./143.1":543,"./144":545,"./145":546,"./146":548,"./146.1":547,"./147":549,"./148":550,"./149":551,"./150":552,"./151":553,"./152":556,"./152.1":554,"./152.2":555,"./153":557,"./154":558,"./155":559,"./156":561,"./156.1":560,"./157":562,"./158":563,"./159":564,"./160":565,"./161":567,"./161.1":566,"./162":568,"./163":569,"./164":570,"./165":571,"./166":572,"./167":573,"./168":575,"./168.1":574,"./169":576,"./170":579,"./170.1":577,"./170.2":578,"./171":580,"./172":581,"./173":582,"./174":583,"./175":584,"./176":586,"./176.1":585,"./177":587,"./178":588,"./179":589,"./180":590,"./181":591,"./182":592,"./183":594,"./183.1":593,"./184":595,"./185":596,"./186":597,"./187":598,"./188":599,"./189":600,"./190":601,"./191":602,"./192":603},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r=[e("./002").default,e("./003").default,e("./004").default,e("./005").default,e("./006").default,e("./007").default,e("./008").default,e("./009").default,e("./010").default,e("./011").default,e("./012").default,e("./013").default,e("./014").default,e("./015").default,e("./016").default,e("./017").default,e("./018").default,e("./019").default,e("./020").default,e("./021").default,e("./022").default,e("./023").default,e("./024").default,e("./025").default,e("./026").default,e("./027").default,e("./028").default,e("./029").default,e("./030").default,e("./031").default,e("./032").default,e("./033").default,e("./034").default,e("./035").default,e("./036").default,e("./037").default,e("./038").default,e("./039").default,e("./040").default,e("./041").default,e("./042").default,e("./043").default,e("./044").default,e("./045").default,e("./046").default,e("./047").default,e("./048").default,e("./049").default,e("./050").default,e("./051").default,e("./052").default,e("./053").default,e("./054").default,e("./055").default,e("./056").default,e("./057").default,e("./058").default,e("./059").default,e("./060").default,e("./061").default,e("./062").default,e("./063").default,e("./064").default,e("./065").default,e("./066").default,e("./067").default,e("./068").default,e("./069").default,e("./070").default,e("./071").default,e("./072").default,e("./073").default,e("./074").default,e("./075").default,e("./076").default,e("./077").default,e("./078"),e("./079").default,e("./080").default,e("./081"),e("./082"),e("./083"),e("./084"),e("./085"),e("./086"),e("./087"),e("./088"),e("./089"),e("./090"),e("./091"),e("./092"),e("./092.1"),e("./092.2"),e("./092.3"),e("./093"),e("./094"),e("./095"),e("./096"),e("./097"),e("./098"),e("./099"),e("./100"),e("./101"),e("./102"),e("./103"),e("./104"),e("./105"),e("./106"),e("./107"),e("./108"),e("./109"),e("./110"),e("./111"),e("./112"),e("./113"),e("./114"),e("./115"),e("./116"),e("./117"),e("./118"),e("./119"),e("./120"),e("./120.1"),e("./120.2"),e("./120.4"),e("./120.5"),e("./120.6"),e("./121"),e("./121.1"),e("./121.2"),e("./122"),e("./123"),e("./124"),e("./125"),e("./125.1"),e("./126"),e("./126.1"),e("./127"),e("./128"),e("./129"),e("./130"),e("./131"),e("./131.1"),e("./132"),e("./133"),e("./133.1"),e("./133.2"),e("./134"),e("./134.1"),e("./135"),e("./136"),e("./137"),e("./138"),e("./139"),e("./140"),e("./141"),e("./142"),e("./143"),e("./143.1"),e("./144"),e("./145"),e("./146"),e("./146.1"),e("./147"),e("./148"),e("./149"),e("./150"),e("./151"),e("./152"),e("./152.1"),e("./152.2"),e("./153"),e("./154"),e("./155"),e("./156"),e("./156.1"),e("./157"),e("./158"),e("./159"),e("./160"),e("./161"),e("./161.1"),e("./162"),e("./163"),e("./164"),e("./165"),e("./166"),e("./167"),e("./168"),e("./168.1"),e("./169"),e("./170"),e("./170.1"),e("./170.2"),e("./171"),e("./172"),e("./173"),e("./174"),e("./175"),e("./176"),e("./176.1"),e("./177"),e("./178"),e("./179"),e("./180"),e("./181"),e("./182"),e("./183"),e("./183.1"),e("./184"),e("./185"),e("./186"),e("./187"),e("./188"),e("./189"),e("./190"),e("./191"),e("./192")];n.default=r}}},{package:"$root$",file:"app/scripts/migrations/index.js"}],[606,{"../../shared/constants/offscreen-communication":6196,"../../shared/lib/sentry":6292},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addOffscreenConnectivityListener=function(e){const{chrome:t}=globalThis;if(!t.offscreen)return;t.runtime.onMessage.addListener(t=>{t&&t.target===i.OffscreenCommunicationTarget.extensionMain&&t.event===i.OffscreenCommunicationEvents.connectivityChange&&e(t.isOnline)})},n.createOffscreen=async function(){const{chrome:e}=globalThis;if(!e.offscreen)return;let t;const n=new Promise(n=>{t=r=>{r.target===i.OffscreenCommunicationTarget.extensionMain&&r.isBooted&&(e.runtime.onMessage.removeListener(t),n())},e.runtime.onMessage.addListener(t)});try{const t=await async function(){const{chrome:e,clients:t}=globalThis;if("getContexts"in e.runtime){return(await e.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"]})).length>0}const n=await t.matchAll(),r=e.runtime.getURL("offscreen.html");return n.some(e=>e.url===r)}();t&&(console.debug("Found existing offscreen document, closing."),await e.offscreen.closeDocument()),await e.offscreen.createDocument({url:"./offscreen.html",reasons:["IFRAME_SCRIPTING"],justification:"Used for Hardware Wallet and Snaps scripts to communicate with the extension."})}catch(n){return t&&e.runtime.onMessage.removeListener(t),void(0,r.captureException)(n)}const o=new Promise(e=>{setTimeout(e,i.OFFSCREEN_LOAD_TIMEOUT)});await Promise.race([n,o]),console.debug("Offscreen iframe loaded")};var r=e("../../shared/lib/sentry"),i=e("../../shared/constants/offscreen-communication")}}},{package:"$root$",file:"app/scripts/offscreen.js"}],[6065,{events:4770,"fast-fifo":4784,"queue-tick":5564},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{EventEmitter:r}=e("events"),i=new Error("Stream was destroyed"),o=new Error("Premature close"),s=e("queue-tick"),a=e("fast-fifo"),l=134217727,c=1^l,u=2^l,d=64,h=128,f=256,p=1024,g=2048,m=4096,b=8192,y=16384,w=32768,k=16^l,v=768^l,_=134184959,C=32^l,E=2<<17,S=4<<17,T=8<<17,A=16<<17,M=32<<17,I=64<<17,O=128<<17,P=256<<17,x=512<<17,N=100532223,R=133693439,j=117440511,L=131088,$=134086639,B=4210688,D=14,U=15,F=4210702,H=16809984,q=16809999,V=1179648,W=1179663,G=Symbol.asyncIterator||Symbol("asyncIterator");class z{constructor(e,{highWaterMark:t=16384,map:n=null,mapWritable:r,byteLength:i,byteLengthWritable:o}={}){this.stream=e,this.queue=new a,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||i||pe,this.map=r||n,this.afterWrite=ee.bind(this),this.afterUpdateNextTick=re.bind(this)}get ended(){return 0!==(this.stream._duplexState&M)}push(e){return null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=T,!0):(this.stream._duplexState|=3145728,!1)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),0===this.buffered&&(this.stream._duplexState&=133169151),e}end(e){"function"==typeof e?this.stream.once("finish",e):e!==undefined&&null!==e&&this.push(e),this.stream._duplexState=(this.stream._duplexState|x)&R}autoBatch(e,t){const n=[],r=this.stream;for(n.push(e);(r._duplexState&W)===V;)n.push(r._writableState.shift());if(0!==(r._duplexState&U))return t(null);r._writev(n,t)}update(){const e=this.stream;e._duplexState|=E;do{for(;(e._duplexState&W)===T;){const t=this.shift();e._duplexState|=33685504,e._write(t,this.afterWrite)}655360&e._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());e._duplexState&=133955583}updateNonPrimary(){const e=this.stream;if((72482831&e._duplexState)===x)return e._duplexState=67108863&e._duplexState|131072,void e._final(Z.bind(this));4!==(e._duplexState&D)?1===(e._duplexState&q)&&(e._duplexState=(e._duplexState|L)&c,e._open(ie.bind(this))):0===(e._duplexState&H)&&(e._duplexState|=L,e._destroy(Q.bind(this)))}continueUpdate(){return 0!==(this.stream._duplexState&O)&&(this.stream._duplexState&=j,!0)}updateCallback(){(17563663&this.stream._duplexState)===S?this.update():this.updateNextTick()}updateNextTick(){0===(this.stream._duplexState&O)&&(this.stream._duplexState|=O,0===(this.stream._duplexState&E)&&s(this.afterUpdateNextTick))}}class K{constructor(e,{highWaterMark:t=16384,map:n=null,mapReadable:r,byteLength:i,byteLengthReadable:o}={}){this.stream=e,this.queue=new a,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=o||i||pe,this.map=r||n,this.pipeTo=null,this.afterRead=te.bind(this),this.afterUpdateNextTick=ne.bind(this)}get ended(){return 0!==(this.stream._duplexState&y)}pipe(e,t){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof t&&(t=null),this.stream._duplexState|=512,this.pipeTo=e,this.pipeline=new J(this.stream,e,t),t&&this.stream.on("error",ge),fe(e))e._writableState.pipeline=this.pipeline,t&&e.on("error",ge),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{const t=this.pipeline.done.bind(this.pipeline,e),n=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",t),e.on("close",n),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",X.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){const t=this.stream;return null===e?(this.highWaterMark=0,t._duplexState=134152127&t._duplexState|1024,!1):(null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),t._duplexState=134152191&t._duplexState|128,this.buffered<this.highWaterMark)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),0===this.buffered&&(this.stream._duplexState&=134209407),e}unshift(e){const t=[null!==this.map?this.map(e):e];for(;this.buffered>0;)t.push(this.shift());for(let e=0;e<t.length-1;e++){const n=t[e];this.buffered+=this.byteLength(n),this.queue.push(n)}this.push(t[t.length-1])}read(){const e=this.stream;if((16527&e._duplexState)===h){const t=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=v),0!==(e._duplexState&g)&&e.emit("data",t),t}return null}drain(){const e=this.stream;for(;(16527&e._duplexState)===h&&768&e._duplexState;){const t=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=v),0!==(e._duplexState&g)&&e.emit("data",t)}}update(){const e=this.stream;e._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&!(82975&e._duplexState);)e._duplexState|=65552,e._read(this.afterRead),this.drain();4224==(12431&e._duplexState)&&(e._duplexState|=b,e.emit("readable")),80&e._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());e._duplexState&=C}updateNonPrimary(){const e=this.stream;(1167&e._duplexState)===p&&(e._duplexState=134216703&e._duplexState|16384,e.emit("end"),(e._duplexState&F)===B&&(e._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!==(e._duplexState&D)?1===(e._duplexState&q)&&(e._duplexState=(e._duplexState|L)&c,e._open(ie.bind(this))):0===(e._duplexState&H)&&(e._duplexState|=L,e._destroy(Q.bind(this)))}continueUpdate(){return 0!==(this.stream._duplexState&w)&&(this.stream._duplexState&=_,!0)}updateCallback(){(32879&this.stream._duplexState)===d?this.update():this.updateNextTick()}updateNextTick(){0===(this.stream._duplexState&w)&&(this.stream._duplexState|=w,32&this.stream._duplexState||s(this.afterUpdateNextTick))}}class Y{constructor(e){this.data=null,this.afterTransform=oe.bind(e),this.afterFinal=null}}class J{constructor(e,t,n){this.from=e,this.to=t,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,t){t&&(this.error=t),e!==this.to||(this.to=null,null===this.from)?e!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0===(e._duplexState&y)&&this.to.destroy(this.error||new Error("Readable stream closed before ending")):0!==(this.from._duplexState&y)&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function X(){this.stream._duplexState|=512,this.updateCallback()}function Z(e){const t=this.stream;e&&t.destroy(e),0===(t._duplexState&D)&&(t._duplexState|=M,t.emit("finish")),(t._duplexState&F)===B&&(t._duplexState|=4),t._duplexState&=N,0===(t._duplexState&E)?this.update():this.updateNextTick()}function Q(e){const t=this.stream;e||this.error===i||(e=this.error),e&&t.emit("error",e),t._duplexState|=8,t.emit("close");const n=t._readableState,r=t._writableState;if(null!==n&&null!==n.pipeline&&n.pipeline.done(t,e),null!==r){for(;null!==r.drains&&r.drains.length>0;)r.drains.shift().resolve(!1);null!==r.pipeline&&r.pipeline.done(t,e)}}function ee(e){const t=this.stream;e&&t.destroy(e),t._duplexState&=N,null!==this.drains&&function(e){for(let t=0;t<e.length;t++)0===--e[t].writes&&(e.shift().resolve(!0),t--)}(this.drains),(3276815&t._duplexState)===A&&(t._duplexState&=132120575,(t._duplexState&I)===I&&t.emit("drain")),this.updateCallback()}function te(e){e&&this.stream.destroy(e),this.stream._duplexState&=k,this.updateCallback()}function ne(){32&this.stream._duplexState||(this.stream._duplexState&=_,this.update())}function re(){0===(this.stream._duplexState&E)&&(this.stream._duplexState&=j,this.update())}function ie(e){const t=this.stream;e&&t.destroy(e),4&t._duplexState||(17423&t._duplexState||(t._duplexState|=d),71303183&t._duplexState||(t._duplexState|=S),t.emit("open")),t._duplexState&=$,null!==t._writableState&&t._writableState.updateCallback(),null!==t._readableState&&t._readableState.updateCallback()}function oe(e,t){t!==undefined&&null!==t&&this.push(t),this._writableState.afterWrite(e)}class se extends r{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",me.bind(this)))}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return null!==this._readableState||undefined}get writable(){return null!==this._writableState||undefined}get destroyed(){return!!(8&this._duplexState)}get destroying(){return 0!==(this._duplexState&D)}destroy(e){0===(this._duplexState&D)&&(e||(e=i),this._duplexState=133693375&this._duplexState|4,null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=e),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=2,this._predestroy(),this._duplexState&=u,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick())}on(e,t){return null!==this._readableState&&("data"===e&&(this._duplexState|=2304,this._readableState.updateNextTick()),"readable"===e&&(this._duplexState|=m,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===e&&(this._duplexState|=I,this._writableState.updateNextTick()),super.on(e,t)}}class ae extends se{constructor(e){super(e),this._duplexState|=4194305,this._readableState=new K(this,e),e&&(e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick())}_read(e){e(null)}pipe(e,t){return this._readableState.updateNextTick(),this._readableState.pipe(e,t),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTick(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTick(),this._readableState.unshift(e)}resume(){return this._duplexState|=f,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=134217471,this}static _fromAsyncIterator(e,t){let n;const r=new ae({...t,read(t){e.next().then(i).then(t.bind(null,null)).catch(t)},predestroy(){n=e.return()},destroy(e){if(!n)return e(null);n.then(e.bind(null,null)).catch(e)}});return r;function i(e){e.done?r.push(null):r.push(e.value)}}static from(e,t){if(fe(n=e)&&n.readable)return e;var n;if(e[G])return this._fromAsyncIterator(e[G](),t);Array.isArray(e)||(e=e===undefined?[]:[e]);let r=0;return new ae({...t,read(t){this.push(r===e.length?null:e[r++]),t(null)}})}static isBackpressured(e){return!!(17422&e._duplexState)||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return 0===(e._duplexState&f)}[G](){const e=this;let t=null,n=null,r=null;return this.on("error",e=>{t=e}),this.on("readable",function(){null!==n&&o(e.read())}),this.on("close",function(){null!==n&&o(null)}),{[G](){return this},next:()=>new Promise(function(t,i){n=t,r=i;const s=e.read();null!==s?o(s):8&e._duplexState&&o(null)}),return:()=>s(null),throw:e=>s(e)};function o(o){null!==r&&(t?r(t):null===o&&0===(e._duplexState&y)?r(i):n({value:o,done:null===o}),r=n=null)}function s(t){return e.destroy(t),new Promise((n,r)=>{if(8&e._duplexState)return n({value:undefined,done:!0});e.once("close",function(){t?r(t):n({value:undefined,done:!0})})})}}}class le extends ae{constructor(e){super(e),this._duplexState=1,this._writableState=new z(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}}class ce extends le{constructor(e){super(e),this._transformState=new Y(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,t){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(null!==this._transformState.data){const t=this._transformState.data;this._transformState.data=null,e(null),this._transform(t,this._transformState.afterTransform)}else e(null)}_transform(e,t){t(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(ue.bind(this))}}function ue(e,t){const n=this._transformState.afterFinal;if(e)return n(e);null!==t&&t!==undefined&&this.push(t),this.push(null),n(null)}function de(e,...t){const n=Array.isArray(e)?[...e,...t]:[e,...t],r=n.length&&"function"==typeof n[n.length-1]?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let i=n[0],s=null,a=null;for(let e=1;e<n.length;e++)s=n[e],fe(i)?i.pipe(s,c):(l(i,!0,e>1,c),i.pipe(s)),i=s;if(r){let e=!1;const t=fe(s)||!(!s._writableState||!s._writableState.autoDestroy);s.on("error",e=>{null===a&&(a=e)}),s.on("finish",()=>{e=!0,t||r(a)}),t&&s.on("close",()=>r(a||(e?null:o)))}return s;function l(e,t,n,r){e.on("error",r),e.on("close",function(){if(t&&e._readableState&&!e._readableState.ended)return r(o);if(n&&e._writableState&&!e._writableState.ended)return r(o)})}function c(e){if(e&&!a){a=e;for(const t of n)t.destroy(e)}}}function he(e){return!!e._readableState||!!e._writableState}function fe(e){return"number"==typeof e._duplexState&&he(e)}function pe(e){return function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.byteLength}(e)?e.byteLength:1024}function ge(){}function me(){this.destroy(new Error("Stream aborted."))}t.exports={pipeline:de,pipelinePromise:function(...e){return new Promise((t,n)=>de(...e,e=>{if(e)return n(e);t()}))},isStream:he,isStreamx:fe,getStreamError:function(e){const t=e._readableState&&e._readableState.error||e._writableState&&e._writableState.error;return t===i?null:t},Stream:se,Writable:class extends se{constructor(e){super(e),this._duplexState|=16385,this._writableState=new z(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}static isBackpressured(e){return!!(73400334&e._duplexState)}static drained(e){if(e.destroyed)return Promise.resolve(!1);const t=e._writableState,n=t.queue.length+(e._duplexState&P?1:0);return 0===n?Promise.resolve(!0):(null===t.drains&&(t.drains=[]),new Promise(e=>{t.drains.push({writes:n,resolve:e})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Readable:ae,Duplex:le,Transform:ce,PassThrough:class extends ce{}}}}},{package:"@metamask/snaps-controllers>tar-stream>streamx",file:"node_modules/streamx/index.js"}],[607,{"../../shared/constants/app":6175,"./lib/util":380,loglevel:5247,timers:4476},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.onUpdate=function(e,n,r,a){const{appStateController:l}=e,{lastUpdatedFromVersion:c}=l.state,u=(0,s.getPlatform)()===o.PLATFORM_FIREFOX;if(i.default.debug("[onUpdate]: Update installation detected"),i.default.info(`[onUpdate]: Updated from version ${r}`),i.default.info(`[onUpdate]: Recorded last updated from version: ${c}`),i.default.info(`[onUpdate]: isFirefox: ${u}`),i.default.info(`[onUpdate]: Current version: ${n.getVersion()}`),r===c)return;const d=Date.now();l.setLastUpdatedAt(d),l.setLastUpdatedFromVersion(r),u||(i.default.info(`[onUpdate]: Requesting "safe reload" after update to ${n.getVersion()}`),t(a))};var r,i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../shared/constants/app"),s=e("./lib/util")}).call(this)}).call(this,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/on-update.ts"}],[6070,{fs:4426},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{t.exports=e("fs").constants||r}catch{t.exports=r}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/constants.js"}],[6071,{"./headers":6072,b4a:4351,"fast-fifo":4784,streamx:6065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Writable:r,Readable:i,getStreamError:o}=e("streamx"),s=e("fast-fifo"),a=e("b4a"),l=e("./headers"),c=a.alloc(0);class u{constructor(){this.buffered=0,this.shifted=0,this.queue=new s,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return 0===this._buffered?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(0===e)return c;let t=this._next(e);if(e===t.byteLength)return t;const n=[t];for(;(e-=t.byteLength)>0;)t=this._next(e),n.push(t);return a.concat(n)}_next(e){const t=this.queue.peek(),n=t.byteLength-this._offset;if(e>=n){const e=this._offset?t.subarray(this._offset,t.byteLength):t;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,e}return this.buffered-=e,this.shifted+=e,t.subarray(this._offset,this._offset+=e)}}class d extends i{constructor(e,t,n){super(),this.header=t,this.offset=n,this._parent=e}_read(e){0===this.header.size&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(o(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=p(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}}class h extends r{constructor(e){super(e),e||(e={}),this._buffer=new u,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=f,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e)return this.destroy(e),void this._continueWrite(e);this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=l.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),0===this._header.size||"directory"===this._header.type?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=l.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=l.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=l.decodePax(e);break;case"pax-header":this._pax=null===this._paxGlobal?l.decodePax(e):Object.assign({},this._paxGlobal,l.decodePax(e))}}_consumeLongHeader(){this._longHeader=!1,this._missing=p(this._header.size);const e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(e){return this._continueWrite(e),!1}return!0}_consumeStream(){const e=this._buffer.shiftFirst(this._missing);if(null===e)return!1;this._missing-=e.byteLength;const t=this._stream.push(e);return 0===this._missing?(this._stream.push(null),t&&this._stream._detach(),t&&!1===this._locked):t}_createStream(){return new d(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(null!==this._stream){if(!1===this._consumeStream())return;continue}if(!0===this._longHeader){if(this._missing>this._buffer.buffered)break;if(!1===this._consumeLongHeader())return!1;continue}const e=this._buffer.shiftFirst(this._missing);null!==e&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(null!==this._stream||!1===this._consumeHeader())return}this._continueWrite(null)}_continueWrite(e){const t=this._callback;this._callback=f,t(e)}_write(e,t){this._callback=t,this._buffer.push(e),this._update()}_final(e){this._finished=0===this._missing&&0===this._buffer.buffered,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(o(this)),e(null)}[Symbol.asyncIterator](){let e=null,t=null,n=null,r=null,i=null;const o=this;return this.on("entry",function(e,o,s){i=s,o.on("error",f),t?(t({value:o,done:!1}),t=n=null):r=o}),this.on("error",t=>{e=t}),this.on("close",function(){if(s(e),!t)return;e?n(e):t({value:undefined,done:!0});t=n=null}),{[Symbol.asyncIterator](){return this},next:()=>new Promise(a),return:()=>l(null),throw:e=>l(e)};function s(e){if(!i)return;const t=i;i=null,t(e)}function a(i,a){return e?a(e):r?(i({value:r,done:!1}),void(r=null)):(t=i,n=a,s(null),void(o._finished&&t&&(t({value:undefined,done:!0}),t=n=null)))}function l(e){return o.destroy(e),s(e),new Promise((t,n)=>{if(o.destroyed)return t({value:undefined,done:!0});o.once("close",function(){e?n(e):t({value:undefined,done:!0})})})}}}function f(){}function p(e){return(e&=511)&&512-e}t.exports=function(e){return new h(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/extract.js"}],[6072,{b4a:4351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("b4a"),i="0".charCodeAt(0),o=r.from([117,115,116,97,114,0]),s=r.from([i,i]),a=r.from([117,115,116,97,114,32]),l=r.from([32,0]),c=257,u=263;function d(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r}function h(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}function f(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "}function p(e,t,n){if(128&(e=e.subarray(t,t+n))[t=0])return function(e){let t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}const n=[];let r;for(r=e.length-1;r>0;r--){const i=e[r];t?n.push(i):n.push(255-i)}let i=0;const o=n.length;for(r=0;r<o;r++)i+=n[r]*Math.pow(256,r);return t?i:-1*i}(e);{for(;t<e.length&&32===e[t];)t++;const n=(i=d(e,32,t,e.length),o=e.length,s=e.length,"number"!=typeof i?s:(i=~~i)>=o?o:i>=0||(i+=o)>=0?i:0);for(;t<n&&0===e[t];)t++;return n===t?0:parseInt(r.toString(e.subarray(t,n)),8)}var i,o,s}function g(e,t,n,i){return r.toString(e.subarray(t,d(e,0,t,t+n)),i)}function m(e){const t=r.byteLength(e);let n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e}n.decodeLongPath=function(e,t){return g(e,0,e.length,t)},n.encodePax=function(e){let t="";e.name&&(t+=m(" path="+e.name+"\n")),e.linkname&&(t+=m(" linkpath="+e.linkname+"\n"));const n=e.pax;if(n)for(const e in n)t+=m(" "+e+"="+n[e]+"\n");return r.from(t)},n.decodePax=function(e){const t={};for(;e.length;){let n=0;for(;n<e.length&&32!==e[n];)n++;const i=parseInt(r.toString(e.subarray(0,n)),10);if(!i)return t;const o=r.toString(e.subarray(n+1,i-1)),s=o.indexOf("=");if(-1===s)return t;t[o.slice(0,s)]=o.slice(s+1),e=e.subarray(i)}return t},n.encode=function(e){const t=r.alloc(512);let n=e.name,a="";if(5===e.typeflag&&"/"!==n[n.length-1]&&(n+="/"),r.byteLength(n)!==n.length)return null;for(;r.byteLength(n)>100;){const e=n.indexOf("/");if(-1===e)return null;a+=a?"/"+n.slice(0,e):n.slice(0,e),n=n.slice(e+1)}return r.byteLength(n)>100||r.byteLength(a)>155||e.linkname&&r.byteLength(e.linkname)>100?null:(r.write(t,n),r.write(t,f(4095&e.mode,6),100),r.write(t,f(e.uid,6),108),r.write(t,f(e.gid,6),116),function(e,t,n){e.toString(8).length>11?function(e,t,n){t[n]=128;for(let r=11;r>0;r--)t[n+r]=255&e,e=Math.floor(e/256)}(e,t,n):r.write(t,f(e,11),n)}(e.size,t,124),r.write(t,f(e.mtime.getTime()/1e3|0,11),136),t[156]=i+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&r.write(t,e.linkname,157),r.copy(o,t,c),r.copy(s,t,263),e.uname&&r.write(t,e.uname,265),e.gname&&r.write(t,e.gname,297),r.write(t,f(e.devmajor||0,6),329),r.write(t,f(e.devminor||0,6),337),a&&r.write(t,a,345),r.write(t,f(h(t),6),148),t)},n.decode=function(e,t,n){let s=0===e[156]?0:e[156]-i,d=g(e,0,100,t);const f=p(e,100,8),m=p(e,108,8),b=p(e,116,8),y=p(e,124,12),w=p(e,136,12),k=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(s),v=0===e[157]?null:g(e,157,100,t),_=g(e,265,32),C=g(e,297,32),E=p(e,329,8),S=p(e,337,8),T=h(e);if(256===T)return null;if(T!==p(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(function(e){return r.equals(o,e.subarray(c,263))}(e))e[345]&&(d=g(e,345,155,t)+"/"+d);else if(function(e){return r.equals(a,e.subarray(c,263))&&r.equals(l,e.subarray(u,265))}(e));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===s&&d&&"/"===d[d.length-1]&&(s=5),{name:d,mode:f,uid:m,gid:b,size:y,mtime:new Date(1e3*w),type:k,linkname:v,uname:_,gname:C,devmajor:E,devminor:S,pax:null}}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/headers.js"}],[6073,{"./extract":6071,"./pack":6074},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){n.extract=e("./extract"),n.pack=e("./pack")}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/index.js"}],[6074,{"./constants":6070,"./headers":6072,b4a:4351,streamx:6065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Readable:r,Writable:i,getStreamError:o}=e("streamx"),s=e("b4a"),a=e("./constants"),l=e("./headers"),c=s.alloc(1024);class u extends i{constructor(e,t,n){super({mapWritable:p,eagerOpen:!0}),this.written=0,this.header=t,this._callback=n,this._linkname=null,this._isLinkname="symlink"===t.type&&!t.linkname,this._isVoid="file"!==t.type&&"contiguous-file"!==t.type,this._finished=!1,this._pack=e,this._openCallback=null,null===this._pack._stream?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(null===this._callback)return;const t=this._callback;this._callback=null,t(e)}_continueOpen(){null===this._pack._stream&&(this._pack._stream=this);const e=this._openCallback;if(this._openCallback=null,null!==e){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,t){return this._isLinkname?(this._linkname=this._linkname?s.concat([this._linkname,e]):e,t(null)):this._isVoid?e.byteLength>0?t(new Error("No body allowed for this entry")):t():(this.written+=e.byteLength,this._pack.push(e)?t():void(this._pack._drain=t))}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?s.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),f(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return o(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}}class d extends r{constructor(e){super(e),this._drain=h,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,t,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");"function"==typeof t&&(n=t,t=null),n||(n=h),e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&a.S_IFMT){case a.S_IFBLK:return"block-device";case a.S_IFCHR:return"character-device";case a.S_IFDIR:return"directory";case a.S_IFIFO:return"fifo";case a.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?493:420),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=s.from(t));const r=new u(this,e,n);return s.isBuffer(t)?(e.size=t.byteLength,r.write(t),r.end(),r):(r._isVoid,r)}finalize(){this._stream||this._pending.length>0?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(c),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){const t=l.encode(e);if(t)return void this.push(t)}this._encodePax(e)}_encodePax(e){const t=l.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(l.encode(n)),this.push(t),f(this,t.byteLength),n.size=e.size,n.type=e.type,this.push(l.encode(n))}_doDrain(){const e=this._drain;this._drain=h,e()}_predestroy(){const e=o(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){const t=this._pending.shift();t.destroy(e),t._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}}function h(){}function f(e,t){(t&=511)&&e.push(c.subarray(0,512-t))}function p(e){return s.isBuffer(e)?e:s.from(e)}t.exports=function(e){return new d(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/pack.js"}],[6078,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[609,{"../../../shared/modules/fetch-with-timeout":6322,"@metamask/utils":3554,cockatiel:4534},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RETRIES=n.MAX_CONSECUTIVE_FAILURES=n.DataDeletionService=void 0;var r,i=e("@metamask/utils"),o=e("cockatiel"),s=(r=e("../../../shared/modules/fetch-with-timeout"))&&r.__esModule?r:{default:r};function a(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function l(e,t){return e.get(u(e,t))}function c(e,t,n){return e.set(u(e,t),n),n}function u(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const d=n.RETRIES=3,h=n.MAX_CONSECUTIVE_FAILURES=3*(1+d);function f(e){return function(e){return(0,i.isObject)(e)&&(0,i.hasProperty)(e,"statusCode")&&"number"==typeof e.statusCode}(e)&&e.statusCode>=500}function p({circuitBreakDuration:e,degradedThreshold:t,maximumConsecutiveFailures:n,onBreak:r,onDegraded:i,retries:s}){const a=(0,o.retry)(o.handleAll.orWhenResult(f),{maxAttempts:s,backoff:new o.ExponentialBackoff}),l=(0,o.circuitBreaker)(o.handleAll,{halfOpenAfter:e,breaker:new o.ConsecutiveBreaker(n)});return r&&l.onBreak(r),i&&(a.onGiveUp(()=>{l.state===o.CircuitState.Closed&&i()}),a.onSuccess(({duration:e})=>{l.state===o.CircuitState.Closed&&e>t&&i()})),(0,o.wrap)(a,l)}var g=new WeakMap,m=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap;n.DataDeletionService=class{constructor({analyticsDataDeletionEndpoint:e="https://proxy.api.cx.metamask.io/segment/v1",analyticsDataDeletionSourceId:t="mytXhbDHVobxqatxZKaZQX",circuitBreakDuration:n=18e5,degradedThreshold:r=5e3,onBreak:i,onDegraded:o,timeout:l}={}){if(a(this,g,void 0),a(this,m,void 0),a(this,b,void 0),a(this,y,void 0),a(this,w,void 0),!e)throw new Error("Missing ANALYTICS_DATA_DELETION_ENDPOINT");if(!t)throw new Error("Missing ANALYTICS_DATA_DELETION_SOURCE_ID");c(w,this,(0,s.default)(l)),c(g,this,e),c(m,this,t),c(y,this,p({circuitBreakDuration:n,degradedThreshold:r,maximumConsecutiveFailures:h,onBreak:i,onDegraded:o,retries:d})),c(b,this,p({circuitBreakDuration:n,degradedThreshold:r,maximumConsecutiveFailures:h,onBreak:i,onDegraded:o,retries:d}))}async createDataDeletionRegulationTask(e){const t=await l(y,this).execute(()=>l(w,this).call(this,`${l(g,this)}/regulations/sources/${l(m,this)}`,{method:"POST",headers:{"Content-Type":"application/vnd.segment.v1+json"},body:JSON.stringify({regulationType:"DELETE_ONLY",subjectType:"USER_ID",subjectIds:[e]})}));if(!t.ok)throw new Error(`Fetch failed with status '${t.status}' for request`);return(await t.json()).data.regulateId}async fetchDeletionRegulationStatus(e){const t=await l(b,this).execute(()=>l(w,this).call(this,`${l(g,this)}/regulations/${e}`,{method:"GET",headers:{"Content-Type":"application/vnd.segment.v1+json"}}));if(!t.ok)throw new Error(`Fetch failed with status '${t.status}' for request`);return(await t.json()).data.regulation.overallStatus}}}}},{package:"$root$",file:"app/scripts/services/data-deletion-service.ts"}],[6092,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,i,o,s=void 0,a=(r=Object.prototype.toString,i=Object.prototype.hasOwnProperty,{Class:function(e){return r.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return i.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return 0|e},ToUint32:function(e){return e>>>0}}),l=Math.LN2,c=Math.abs,u=Math.floor,d=Math.log,h=Math.min,f=Math.pow,p=Math.round;function g(e){if(m&&o){var t,n=m(e);for(t=0;t<n.length;t+=1)o(e,n[t],{value:e[n[t]],writable:!1,enumerable:!1,configurable:!1})}}o=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,n){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return a.HasProperty(n,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,n.get),a.HasProperty(n,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,n.set),a.HasProperty(n,"value")&&(e[t]=n.value),e};var m=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,n=[];for(t in e)a.HasOwnProperty(e,t)&&n.push(t);return n};function b(e,t){var n=32-t;return e<<n>>n}function y(e,t){var n=32-t;return e<<n>>>n}function w(e){return[255&e]}function k(e){return b(e[0],8)}function v(e){return[255&e]}function _(e){return y(e[0],8)}function C(e){return[(e=p(Number(e)))<0?0:e>255?255:255&e]}function E(e){return[e>>8&255,255&e]}function S(e){return b(e[0]<<8|e[1],16)}function T(e){return[e>>8&255,255&e]}function A(e){return y(e[0]<<8|e[1],16)}function M(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function I(e){return b(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function O(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function P(e){return y(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function x(e,t,n){var r,i,o,s,a,p,g,m=(1<<t-1)-1;function b(e){var t=u(e),n=e-t;return n<.5?t:n>.5||t%2?t+1:t}for(e!=e?(i=(1<<t)-1,o=f(2,n-1),r=0):e===Infinity||e===-Infinity?(i=(1<<t)-1,o=0,r=e<0?1:0):0===e?(i=0,o=0,r=1/e===-Infinity?1:0):(r=e<0,(e=c(e))>=f(2,1-m)?(i=h(u(d(e)/l),1023),(o=b(e/f(2,i)*f(2,n)))/f(2,n)>=2&&(i+=1,o=1),i>m?(i=(1<<t)-1,o=0):(i+=m,o-=f(2,n))):(i=0,o=b(e/f(2,1-m-n)))),a=[],s=n;s;s-=1)a.push(o%2?1:0),o=u(o/2);for(s=t;s;s-=1)a.push(i%2?1:0),i=u(i/2);for(a.push(r?1:0),a.reverse(),p=a.join(""),g=[];p.length;)g.push(parseInt(p.substring(0,8),2)),p=p.substring(8);return g}function N(e,t,n){var r,i,o,s,a,l,c,u,d=[];for(r=e.length;r;r-=1)for(o=e[r-1],i=8;i;i-=1)d.push(o%2?1:0),o>>=1;return d.reverse(),s=d.join(""),a=(1<<t-1)-1,l=parseInt(s.substring(0,1),2)?-1:1,c=parseInt(s.substring(1,1+t),2),u=parseInt(s.substring(1+t),2),c===(1<<t)-1?0!==u?NaN:l*Infinity:c>0?l*f(2,c-a)*(1+u/f(2,n)):0!==u?l*f(2,-(a-1))*(u/f(2,n)):l<0?-0:0}function R(e){return N(e,11,52)}function j(e){return x(e,11,52)}function L(e){return N(e,8,23)}function $(e){return x(e,8,23)}!function(){var e=function(e){if((e=a.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;g(this)};n.ArrayBuffer=n.ArrayBuffer||e;var t=function(){};function r(n,r,i){var l;return l=function(t,n,r){var i,s,c,u;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===l)for(i=arguments[0],this.length=i.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,c=0;c<this.length;c+=1)this._setter(c,i._getter(c));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===a.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===a.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=a.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=a.ToUint32(r),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(s=arguments[0],this.length=a.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,c=0;c<this.length;c+=1)u=s[c],this._setter(c,Number(u));else{if(this.length=a.ToInt32(arguments[0]),r<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=l,g(this),function(e){if(o){if(e.length>1e5)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)n(t)}function n(t){o(e,t,{get:function(){return e._getter(t)},set:function(n){e._setter(t,n)},enumerable:!0,configurable:!1})}}(this)},l.prototype=new t,l.prototype.BYTES_PER_ELEMENT=n,l.prototype._pack=r,l.prototype._unpack=i,l.BYTES_PER_ELEMENT=n,l.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=a.ToUint32(e))>=this.length)return s;var t,n,r=[];for(t=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,n+=1)r.push(this.buffer._bytes[n]);return this._unpack(r)},l.prototype.get=l.prototype._getter,l.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=a.ToUint32(e))>=this.length)return s;var n,r,i=this._pack(t);for(n=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)this.buffer._bytes[r]=i[n]},l.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var n,r,i,o,s,l,c,u,d,h;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(n=arguments[0],(i=a.ToUint32(arguments[1]))+n.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(u=this.byteOffset+i*this.BYTES_PER_ELEMENT,d=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(h=[],s=0,l=n.byteOffset;s<d;s+=1,l+=1)h[s]=n.buffer._bytes[l];for(s=0,c=u;s<d;s+=1,c+=1)this.buffer._bytes[c]=h[s]}else for(s=0,l=n.byteOffset,c=u;s<d;s+=1,l+=1,c+=1)this.buffer._bytes[c]=n.buffer._bytes[l]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(r=arguments[0],o=a.ToUint32(r.length),(i=a.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(s=0;s<o;s+=1)l=r[s],this._setter(i+s,Number(l))}},l.prototype.subarray=function(e,t){function n(e,t,n){return e<t?t:e>n?n:e}e=a.ToInt32(e),t=a.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},l}var i=r(1,w,k),l=r(1,v,_),c=r(1,C,_),u=r(2,E,S),d=r(2,T,A),h=r(4,M,I),f=r(4,O,P),p=r(4,$,L),m=r(8,j,R);n.Int8Array=n.Int8Array||i,n.Uint8Array=n.Uint8Array||l,n.Uint8ClampedArray=n.Uint8ClampedArray||c,n.Int16Array=n.Int16Array||u,n.Uint16Array=n.Uint16Array||d,n.Int32Array=n.Int32Array||h,n.Uint32Array=n.Uint32Array||f,n.Float32Array=n.Float32Array||p,n.Float64Array=n.Float64Array||m}(),function(){function e(e,t){return a.IsCallable(e.get)?e.get(t):e[t]}var t,r=(t=new n.Uint16Array([4660]),18===e(new n.Uint8Array(t.buffer),0)),i=function(e,t,r){if(0===arguments.length)e=new n.ArrayBuffer(0);else if(!(e instanceof n.ArrayBuffer||"ArrayBuffer"===a.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new n.ArrayBuffer(0),this.byteOffset=a.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:a.ToUint32(r),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");g(this)};function o(t){return function(i,o){if((i=a.ToUint32(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");i+=this.byteOffset;var s,l=new n.Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT),c=[];for(s=0;s<t.BYTES_PER_ELEMENT;s+=1)c.push(e(l,s));return Boolean(o)===Boolean(r)&&c.reverse(),e(new t(new n.Uint8Array(c).buffer),0)}}function s(t){return function(i,o,s){if((i=a.ToUint32(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var l,c=new t([o]),u=new n.Uint8Array(c.buffer),d=[];for(l=0;l<t.BYTES_PER_ELEMENT;l+=1)d.push(e(u,l));Boolean(s)===Boolean(r)&&d.reverse(),new n.Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT).set(d)}}i.prototype.getUint8=o(n.Uint8Array),i.prototype.getInt8=o(n.Int8Array),i.prototype.getUint16=o(n.Uint16Array),i.prototype.getInt16=o(n.Int16Array),i.prototype.getUint32=o(n.Uint32Array),i.prototype.getInt32=o(n.Int32Array),i.prototype.getFloat32=o(n.Float32Array),i.prototype.getFloat64=o(n.Float64Array),i.prototype.setUint8=s(n.Uint8Array),i.prototype.setInt8=s(n.Int8Array),i.prototype.setUint16=s(n.Uint16Array),i.prototype.setInt16=s(n.Int16Array),i.prototype.setUint32=s(n.Uint32Array),i.prototype.setInt32=s(n.Int32Array),i.prototype.setFloat32=s(n.Float32Array),i.prototype.setFloat64=s(n.Float64Array),n.DataView=n.DataView||i}()}}},{package:"browserify>concat-stream>typedarray",file:"node_modules/typedarray/index.js"}],[61,{"../../controllers/institutional-snap/InstitutionalSnapController":232},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InstitutionalSnapControllerInit=void 0;var r=e("../../controllers/institutional-snap/InstitutionalSnapController");n.InstitutionalSnapControllerInit=e=>({controller:new r.InstitutionalSnapController({messenger:e.controllerMessenger}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/institutional-snap/institutional-snap-controller-init.ts"}],[610,{"./base-login-handler":611,"./utils":617,"@metamask/seedless-onboarding-controller":3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppleLoginHandler=void 0;var r=e("@metamask/seedless-onboarding-controller"),i=e("./base-login-handler"),o=e("./utils");function s(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var c=new WeakMap;class u extends i.BaseLoginHandler{constructor(e){super(e),a(this,"OAUTH_SERVER_URL",void 0),s(this,c,["name","email"]),a(this,"serverRedirectUri",void 0),this.serverRedirectUri=`${e.authServerUrl}/api/v1/oauth/callback`,this.OAUTH_SERVER_URL=`${e.authServerUrl}/api/v1/oauth/initiate`}get authConnection(){return r.AuthConnection.Apple}get scope(){return l(c,this)}async getAuthUrl(){const e=new URL(this.OAUTH_SERVER_URL),t=this.options.webAuthenticator.getRedirectURL(),n=this.generateNonce(),{challenge:r}=await this.generateCodeVerifierChallenge();return e.searchParams.set("client_id",this.options.oAuthClientId),e.searchParams.set("response_type","code"),e.searchParams.set("redirect_uri",t),e.searchParams.set("response_mode","form_post"),e.searchParams.set("prompt",this.prompt),e.searchParams.set("state",JSON.stringify({client_redirect_back_uri:this.options.webAuthenticator.getRedirectURL(),nonce:n,code_challenge:r})),e.searchParams.set("scope",l(c,this).join(" ")),Promise.resolve(e.toString())}async getAuthIdToken(){const e=this.generateAuthTokenRequestData();return await this.requestVerifyAuthToken(e)}generateAuthTokenRequestData(){const{web3AuthNetwork:e}=this.options,t={code_verifier:this.codeVerifier,client_id:this.options.oAuthClientId,redirect_uri:this.serverRedirectUri,login_provider:this.authConnection,network:e,access_type:"offline"};return JSON.stringify(t)}async requestVerifyAuthToken(e){const t=await fetch(`${this.options.authServerUrl}/api/v1/oauth/callback/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});return await t.json()}async getUserInfo(e){const t=(0,o.decodeIdToken)(e),n=JSON.parse(t);return{email:n.email,sub:n.sub}}}n.AppleLoginHandler=u}}},{package:"$root$",file:"app/scripts/services/oauth/apple-login-handler.ts"}],[611,{"../../../../shared/modules/error":6320},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseLoginHandler=void 0;var r=e("../../../../shared/modules/error");function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.BaseLoginHandler=class{constructor(e){i(this,"options",void 0),i(this,"codeVerifier",void 0),i(this,"nonce",void 0),i(this,"prompt","select_account"),i(this,"CODE_CHALLENGE_METHOD","S256"),i(this,"AUTH_SERVER_TOKEN_PATH","/api/v1/oauth/token"),i(this,"AUTH_SERVER_REVOKE_PATH","/api/v2/oauth/revoke"),i(this,"AUTH_SERVER_RENEW_REFRESH_PATH","/api/v2/oauth/renew_refresh_token"),this.options=e}validateState(e){const t=new URL(e).searchParams.get("state");if("string"!=typeof t)throw new Error(r.OAuthErrorMessages.INVALID_OAUTH_STATE_ERROR);if(JSON.parse(t).nonce!==this.nonce)throw new Error(r.OAuthErrorMessages.INVALID_OAUTH_STATE_ERROR)}async refreshAuthToken(e){const{web3AuthNetwork:t}=this.options,n={client_id:this.options.oAuthClientId,login_provider:this.authConnection,network:t,refresh_token:e,grant_type:"refresh_token"};return await this.requestAuthToken(JSON.stringify(n))}async revokeRefreshToken(e){const t={revoke_token:e};if(!(await fetch(`${this.options.authServerUrl}${this.AUTH_SERVER_REVOKE_PATH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Failed to revoke refresh token")}async renewRefreshToken(e){const t={revoke_token:e},n=await fetch(`${this.options.authServerUrl}${this.AUTH_SERVER_RENEW_REFRESH_PATH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to renew refresh token");const r=await n.json();return{refresh_token:r.refresh_token,revoke_token:r.revoke_token}}async requestAuthToken(e){const t=await fetch(`${this.options.authServerUrl}${this.AUTH_SERVER_TOKEN_PATH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!t.ok)throw new Error("Failed to get auth token");return await t.json()}generateNonce(){return this.nonce=this.options.webAuthenticator.generateNonce(),this.nonce}async generateCodeVerifierChallenge(){const{codeVerifier:e,challenge:t}=await this.options.webAuthenticator.generateCodeVerifierAndChallenge();return this.codeVerifier=e,{codeVerifier:e,challenge:t}}}}}},{package:"$root$",file:"app/scripts/services/oauth/base-login-handler.ts"}],[612,{"../../../../development/build/constants":623,"@metamask/seedless-onboarding-controller":3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OauthConfigMap=n.BuildTypeEnv=void 0,n.isDevOrTestBuild=a,n.loadOAuthConfig=function(){let e=o.DevMain;e=a()?o.DevMain:l()||c()?o.ProdMain:o.UatMain;return s[e]};var r=e("@metamask/seedless-onboarding-controller"),i=e("../../../../development/build/constants");let o=n.BuildTypeEnv=function(e){return e.DevMain="DevMain",e.DevFlask="DevFlask",e.UatMain="UatMain",e.UatFlask="UatFlask",e.ProdMain="ProdMain",e.ProdFlask="ProdFlask",e.Beta="Beta",e}({});const s=n.OauthConfigMap={[o.DevMain]:{googleAuthConnectionId:"mm-google-dev-extension",appleAuthConnectionId:"mm-apple-dev-common",googleGroupedAuthConnectionId:"mm-google-dev",appleGroupedAuthConnectionId:"mm-apple-dev",authServerUrl:"https://auth-service.dev-api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Devnet},[o.DevFlask]:{googleAuthConnectionId:"mm-google-flask-dev-extension",appleAuthConnectionId:"mm-apple-flask-dev-common",googleGroupedAuthConnectionId:"mm-google-flask-dev",appleGroupedAuthConnectionId:"mm-apple-flask-dev",authServerUrl:"https://auth-service.dev-api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Devnet},[o.UatMain]:{googleAuthConnectionId:"mm-google-uat-extension",appleAuthConnectionId:"mm-apple-uat-common",googleGroupedAuthConnectionId:"mm-google-uat",appleGroupedAuthConnectionId:"mm-apple-uat",authServerUrl:"https://auth-service.uat-api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Mainnet},[o.UatFlask]:{googleAuthConnectionId:"mm-google-flask-uat-extension",appleAuthConnectionId:"mm-apple-flask-uat-common",googleGroupedAuthConnectionId:"mm-google-flask-uat",appleGroupedAuthConnectionId:"mm-apple-flask-uat",authServerUrl:"https://auth-service.uat-api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Mainnet},[o.ProdMain]:{googleAuthConnectionId:"mm-google-main-extension",appleAuthConnectionId:"mm-apple-main-common",googleGroupedAuthConnectionId:"mm-google-main",appleGroupedAuthConnectionId:"mm-apple-main",authServerUrl:"https://auth-service.api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Mainnet},[o.ProdFlask]:{googleAuthConnectionId:"mm-google-flask-main-extension",appleAuthConnectionId:"mm-apple-flask-main-common",googleGroupedAuthConnectionId:"mm-google-flask-main",appleGroupedAuthConnectionId:"mm-apple-flask-main",authServerUrl:"https://auth-service.api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Mainnet},[o.Beta]:{googleAuthConnectionId:"mm-google-main-extension",appleAuthConnectionId:"mm-apple-main-common",googleGroupedAuthConnectionId:"mm-google-main",appleGroupedAuthConnectionId:"mm-apple-main",authServerUrl:"https://auth-service.api.cx.metamask.io",web3AuthNetwork:r.Web3AuthNetwork.Mainnet}};function a(){return"production"===i.ENVIRONMENT.DEVELOPMENT||"production"===i.ENVIRONMENT.TESTING}function l(){return"production"===i.ENVIRONMENT.PRODUCTION}function c(){return"production"===i.ENVIRONMENT.RELEASE_CANDIDATE}}}},{package:"$root$",file:"app/scripts/services/oauth/config.ts"}],[613,{"./apple-login-handler":610,"./google-login-handler":614,"@metamask/seedless-onboarding-controller":3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createLoginHandler=function(e,t,n){const s={web3AuthNetwork:t.web3AuthNetwork,authServerUrl:t.authServerUrl,webAuthenticator:n};switch(e){case r.AuthConnection.Google:return new o.GoogleLoginHandler({...s,oAuthClientId:t.googleClientId});case r.AuthConnection.Apple:return new i.AppleLoginHandler({...s,oAuthClientId:t.appleClientId});default:throw new Error(`Invalid social login provider: ${e}`)}};var r=e("@metamask/seedless-onboarding-controller"),i=e("./apple-login-handler"),o=e("./google-login-handler")}}},{package:"$root$",file:"app/scripts/services/oauth/create-login-handler.ts"}],[614,{"./base-login-handler":611,"./utils":617,"@metamask/seedless-onboarding-controller":3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GoogleLoginHandler=void 0;var r=e("@metamask/seedless-onboarding-controller"),i=e("./base-login-handler"),o=e("./utils");function s(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var c=new WeakMap;class u extends i.BaseLoginHandler{constructor(...e){super(...e),a(this,"OAUTH_SERVER_URL","https://accounts.google.com/o/oauth2/v2/auth"),s(this,c,["openid","profile","email"])}get authConnection(){return r.AuthConnection.Google}get scope(){return l(c,this)}async getAuthUrl(){const e=new URL(this.OAUTH_SERVER_URL),t=this.generateNonce(),{challenge:n}=await this.generateCodeVerifierChallenge(),r=this.options.webAuthenticator.getRedirectURL();return e.searchParams.set("client_id",this.options.oAuthClientId),e.searchParams.set("response_type","code"),e.searchParams.set("scope",l(c,this).join(" ")),e.searchParams.set("code_challenge_method",this.CODE_CHALLENGE_METHOD),e.searchParams.set("code_challenge",n),e.searchParams.set("state",JSON.stringify({nonce:t})),e.searchParams.set("redirect_uri",r),e.searchParams.set("prompt",this.prompt),e.toString()}async getAuthIdToken(e){const t=this.generateAuthTokenRequestData(e);return await this.requestAuthToken(t)}generateAuthTokenRequestData(e){const{web3AuthNetwork:t}=this.options,n=this.options.webAuthenticator.getRedirectURL(),r={code:e,client_id:this.options.oAuthClientId,redirect_uri:n,login_provider:this.authConnection,network:t,code_verifier:this.codeVerifier,access_type:"offline"};return JSON.stringify(r)}async getUserInfo(e){const t=(0,o.decodeIdToken)(e),n=JSON.parse(t);return{email:n.email,sub:n.sub}}}n.GoogleLoginHandler=u}}},{package:"$root$",file:"app/scripts/services/oauth/google-login-handler.ts"}],[615,{"../../../../shared/constants/metametrics":6190,"../../../../shared/constants/onboarding":6197,"../../../../shared/lib/trace":6299,"../../../../shared/modules/browser-runtime.utils":6312,"../../../../shared/modules/error":6320,"./config":612,"./create-login-handler":613,"./types":616,"@metamask/seedless-onboarding-controller":3046,loglevel:5247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=e("@metamask/seedless-onboarding-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("../../../../shared/modules/error"),a=e("../../../../shared/modules/browser-runtime.utils"),l=e("../../../../shared/lib/trace"),c=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/onboarding"),d=e("./create-login-handler"),h=e("./types"),f=e("./config");function p(e,t,n){g(e,t),t.set(e,n)}function g(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return e.get(w(e,t))}function y(e,t,n){return e.set(w(e,t),n),n}function w(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const k="/api/v1/oauth/marketing_opt_in_status";var v=new WeakMap,_=new WeakMap,C=new WeakMap,E=new WeakMap,S=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakMap,I=new WeakSet;function O(e,t){if(Boolean(b(M,this).call(this)))b(T,this).call(this,e,t);else{const t={...e,actionId:`${Date.now()+Math.random()}`};b(A,this).call(this,t)}}function P(){try{const e=b(v,this).call("OnboardingController:getState");return e.firstTimeFlowType===u.FirstTimeFlowType.socialImport&&!e.completedOnboarding}catch(e){return o.default.error("Error checking rehydration flow:",e),null}}async function x(e,t){const n=await e.getAuthUrl(),r=w(I,this,P).call(this);let i=!1,o=null;try{var a;null===(a=b(E,this))||void 0===a||a.call(this,{name:l.TraceName.OnboardingOAuthProviderLogin,op:l.TraceOperation.OnboardingSecurityOp}),o=await new Promise((t,r)=>{b(C,this).launchWebAuthFlow({interactive:!0,url:n},n=>{try{if(n)try{e.validateState(n),t(n)}catch(e){r(e)}else{const e=w(I,this,L).call(this);if(e)return void r(e);r(new Error(s.OAuthErrorMessages.NO_REDIRECT_URL_FOUND_ERROR))}}catch(e){r(e)}})}),i=!0}catch(e){const n=(0,s.isUserCancelledLoginError)(e);var u,d;if(w(I,this,O).call(this,{event:c.MetaMetricsEventName.SocialLoginFailed,category:c.MetaMetricsEventCategory.Onboarding,properties:{account_type:`${c.MetaMetricsEventAccountType.Default}_${t}`,is_rehydration:null===r?"unknown":String(r),failure_type:n?"user_cancelled":"error",error_category:"provider_login"}}),!n)null===(u=(d=b(v,this)).captureException)||void 0===u||u.call(d,(0,s.createSentryError)(l.TraceName.OnboardingOAuthProviderLoginError,e));throw e}finally{var h;null===(h=b(S,this))||void 0===h||h.call(this,{name:l.TraceName.OnboardingOAuthProviderLogin,data:{success:i}})}let f=!1;try{var p;null===(p=b(E,this))||void 0===p||p.call(this,{name:l.TraceName.OnboardingOAuthBYOAServerGetAuthTokens,op:l.TraceOperation.OnboardingSecurityOp});const t=await w(I,this,N).call(this,e,o);return f=!0,t}catch(e){var g,m;throw w(I,this,O).call(this,{event:c.MetaMetricsEventName.SocialLoginFailed,category:c.MetaMetricsEventCategory.Onboarding,properties:{account_type:`${c.MetaMetricsEventAccountType.Default}_${t}`,is_rehydration:null===r?"unknown":String(r),failure_type:"error",error_category:"get_auth_tokens"}}),null===(g=(m=b(v,this)).captureException)||void 0===g||g.call(m,(0,s.createSentryError)(`OAuth2 token exchange failed for ${t}`,e)),e}finally{var y;null===(y=b(S,this))||void 0===y||y.call(this,{name:l.TraceName.OnboardingOAuthBYOAServerGetAuthTokens,data:{success:f}})}}async function N(e,t){const{authConnection:n}=e,r=n===i.AuthConnection.Google?w(I,this,j).call(this,t):null;return await w(I,this,R).call(this,e,r)}async function R(e,t){let n="",r="";e.authConnection===i.AuthConnection.Google?(n=b(_,this).googleAuthConnectionId,r=b(_,this).googleGroupedAuthConnectionId):e.authConnection===i.AuthConnection.Apple&&(n=b(_,this).appleAuthConnectionId,r=b(_,this).appleGroupedAuthConnectionId);const o=await e.getAuthIdToken(t),s=o.id_token,a=await e.getUserInfo(s);return{authConnectionId:n,groupedAuthConnectionId:r,userId:a.sub||a.email,idTokens:[s],authConnection:e.authConnection,socialLoginEmail:a.email,refreshToken:o.refresh_token,revokeToken:o.revoke_token,accessToken:o.access_token,metadataAccessToken:o.metadata_access_token}}function j(e){return new URL(e).searchParams.get("code")}function L(){const e=(0,a.checkForLastError)();return(0,s.isUserCancelledLoginError)(e)?e:undefined}n.default=class{constructor({messenger:e,env:t,webAuthenticator:n,bufferedTrace:r,bufferedEndTrace:i,trackEvent:o,addEventBeforeMetricsOptIn:s,getParticipateInMetaMetrics:a}){!function(e,t){g(e,t),t.add(e)}(this,I),m(this,"name",h.SERVICE_NAME),m(this,"state",null),p(this,v,void 0),p(this,_,void 0),p(this,C,void 0),p(this,E,void 0),p(this,S,void 0),p(this,T,void 0),p(this,A,void 0),p(this,M,void 0),y(v,this,e);const l=(0,f.loadOAuthConfig)();y(_,this,{...t,...l}),y(C,this,n),y(E,this,r),y(S,this,i),y(T,this,o),y(A,this,s),y(M,this,a),b(v,this).registerActionHandler(`${h.SERVICE_NAME}:startOAuthLogin`,this.startOAuthLogin.bind(this)),b(v,this).registerActionHandler(`${h.SERVICE_NAME}:getNewRefreshToken`,this.getNewRefreshToken.bind(this)),b(v,this).registerActionHandler(`${h.SERVICE_NAME}:revokeRefreshToken`,this.revokeRefreshToken.bind(this)),b(v,this).registerActionHandler(`${h.SERVICE_NAME}:renewRefreshToken`,this.renewRefreshToken.bind(this))}async startOAuthLogin(e){const t=(0,d.createLoginHandler)(e,b(_,this),b(C,this));return await w(I,this,x).call(this,t,e)}async getNewRefreshToken(e){const{connection:t,refreshToken:n}=e,r=(0,d.createLoginHandler)(t,b(_,this),b(C,this)),i=await r.refreshAuthToken(n);return{idTokens:[i.id_token],accessToken:i.access_token,metadataAccessToken:i.metadata_access_token}}async renewRefreshToken(e){const{connection:t,revokeToken:n}=e,r=(0,d.createLoginHandler)(t,b(_,this),b(C,this)),i=await r.renewRefreshToken(n);return{newRefreshToken:i.refresh_token,newRevokeToken:i.revoke_token}}async revokeRefreshToken(e){const{connection:t,revokeToken:n}=e,r=(0,d.createLoginHandler)(t,b(_,this),b(C,this));await r.revokeRefreshToken(n)}async setMarketingConsent(e){try{const t=b(v,this).call("SeedlessOnboardingController:getState"),{accessToken:n}=t;if(!n)throw new Error("No access token found");const r={opt_in_status:e},i=await fetch(`${b(_,this).authServerUrl}${k}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(r)});if(!i.ok)throw new Error("Failed to post marketing opt in status");return i.ok}catch(e){var t,n;throw o.default.error("Failed to post marketing opt in status",e),null===(t=(n=b(v,this)).captureException)||void 0===t||t.call(n,(0,s.createSentryError)("Failed to post marketing opt in status",e)),e}}async getMarketingConsent(){try{const e=b(v,this).call("SeedlessOnboardingController:getState"),{accessToken:t}=e;if(!t)throw new Error("No access token found");const n=await fetch(`${b(_,this).authServerUrl}${k}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Failed to get marketing opt in status");const r=await n.json();return Boolean((null==r?void 0:r.is_opt_in)??!1)}catch(n){var e,t;return o.default.error("Failed to get marketing opt in status",n),null===(e=(t=b(v,this)).captureException)||void 0===e||e.call(t,(0,s.createSentryError)("Failed to get marketing opt in status",n)),!1}}}}}},{package:"$root$",file:"app/scripts/services/oauth/oauth-service.ts"}],[6151,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n){var o,s=0,a=0,l=n=n||0,c=t.length;do{if(l>=c||a>49)throw e.bytes=0,new RangeError("Could not decode varint");o=t[l++],s+=a<28?(o&i)<<a:(o&i)*Math.pow(2,a),a+=7}while(o>=r);return e.bytes=l-n,s};var r=128,i=127}}},{package:"sass-embedded>varint",file:"node_modules/varint/decode.js"}],[6152,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n,s){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var a=s=s||0;for(;t>=o;)n[s++]=255&t|r,t/=128;for(;t&i;)n[s++]=255&t|r,t>>>=7;return n[s]=0|t,e.bytes=s-a+1,n};var r=128,i=-128,o=Math.pow(2,31)}}},{package:"sass-embedded>varint",file:"node_modules/varint/encode.js"}],[6153,{"./decode.js":6151,"./encode.js":6152,"./length.js":6154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"sass-embedded>varint",file:"node_modules/varint/index.js"}],[6154,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Math.pow(2,7),i=Math.pow(2,14),o=Math.pow(2,21),s=Math.pow(2,28),a=Math.pow(2,35),l=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<r?1:e<i?2:e<o?3:e<s?4:e<a?5:e<l?6:e<c?7:e<u?8:e<d?9:10}}}},{package:"sass-embedded>varint",file:"node_modules/varint/length.js"}],[616,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SERVICE_NAME=void 0;n.SERVICE_NAME="OAuthService"}}},{package:"$root$",file:"app/scripts/services/oauth/types.ts"}],[6162,{util:6133},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){n.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,n.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[6164,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.WHATWGFetch={})}(this,function(e){var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function p(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,o=f(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=p(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=u(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),d(e)},h.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},h.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),d(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(e,n){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,o=(n=n||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,n.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new h(n.headers)),this.method=(r=n.method||this.method||"GET",i=r.toUpperCase(),y.indexOf(i)>-1?i:r),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal||function(){if("AbortController"in t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==n.cache&&"no-cache"!==n.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function k(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var _=[301,302,303,307,308];v.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(n,r){return new Promise(function(o,a){var l=new w(n,r);if(l.signal&&l.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var d=new XMLHttpRequest;function f(){d.abort()}if(d.onload=function(){var e,t,n={statusText:d.statusText,headers:(e=d.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(e){console.warn("Response "+e.message)}}}),t)};0===l.url.indexOf("file://")&&(d.status<200||d.status>599)?n.status=200:n.status=d.status,n.url="responseURL"in d?d.responseURL:n.headers.get("X-Request-URL");var r="response"in d?d.response:d.responseText;setTimeout(function(){o(new v(r,n))},0)},d.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},d.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request timed out"))},0)},d.onabort=function(){setTimeout(function(){a(new e.DOMException("Aborted","AbortError"))},0)},d.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?d.withCredentials=!0:"omit"===l.credentials&&(d.withCredentials=!1),"responseType"in d&&(i?d.responseType="blob":s&&(d.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof h||t.Headers&&r.headers instanceof t.Headers)){var p=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){p.push(c(e)),d.setRequestHeader(e,u(r.headers[e]))}),l.headers.forEach(function(e,t){-1===p.indexOf(t)&&d.setRequestHeader(t,e)})}else l.headers.forEach(function(e,t){d.setRequestHeader(t,e)});l.signal&&(l.signal.addEventListener("abort",f),d.onreadystatechange=function(){4===d.readyState&&l.signal.removeEventListener("abort",f)}),d.send(void 0===l._bodyInit?null:l._bodyInit)})}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=h,t.Request=w,t.Response=v),e.Headers=h,e.Request=w,e.Response=v,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})})}}},{package:"@open-rpc/test-coverage>isomorphic-fetch>whatwg-fetch",file:"node_modules/whatwg-fetch/dist/fetch.umd.js"}],[617,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){const t=e.length,n=4-t%4;if(4===n)return e;const r=t+n;return e.padEnd(r,"=")}function i(e){return e.replace(/\+/gu,"-").replace(/\//gu,"_").replace(/[=]+$/u,"")}function o(e){return e.replace(/-/gu,"+").replace(/_/gu,"/").replace(/[=]/gu,"")}function s(e){const t=o(e),n=atob(t),r=Uint8Array.from(n,e=>e.charCodeAt(0));return(new TextDecoder).decode(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.applyUrlSafeReplacementsToBase64String=i,n.base64urlencode=function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return i(btoa(t))},n.convertUrlSafeBase64StringToBase64String=o,n.decodeBase64WithSafeUrlReplacements=s,n.decodeIdToken=function(e){const[,t]=e.split(".");return s(o(r(t)))},n.padBase64String=r}}},{package:"$root$",file:"app/scripts/services/oauth/utils.ts"}],[6172,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=n.AUTO_LOCK_TIMEOUT_ALARM=void 0;n.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM",n.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[6179,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DefiReferralPartner=n.DEFI_REFERRAL_PARTNERS=void 0,n.getPartnerByOrigin=function(e){return Object.values(i).find(t=>e===t.origin)};let r=n.DefiReferralPartner=function(e){return e.Hyperliquid="hyperliquid",e}({});const i=n.DEFI_REFERRAL_PARTNERS={[r.Hyperliquid]:{id:r.Hyperliquid,name:"Hyperliquid",origin:"https://app.hyperliquid.xyz",referralUrl:"https://app.hyperliquid.xyz/join/MMREFCSI",learnMoreUrl:"https://hyperliquid.gitbook.io/hyperliquid-docs/referrals",approvalType:"hyperliquid_referral_consent"}}}}},{package:"$root$",file:"shared/constants/defi-referrals.ts"}],[618,{"./utils":617,"webextension-polyfill":6163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIdentityAPI=l,n.webAuthenticatorFactory=function(){0;return{launchWebAuthFlow:c,generateCodeVerifierAndChallenge:s,generateNonce:a,getRedirectURL:u}};var r,i=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r},o=e("./utils");async function s(){const e=new Uint8Array(32);crypto.getRandomValues(e);const t=(0,o.base64urlencode)(e),n=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(t));return{codeVerifier:t,challenge:(0,o.base64urlencode)(n)}}function a(){return crypto.randomUUID()}function l(){var e;return null!==(e=chrome)&&void 0!==e&&e.identity&&"getRedirectURL"in chrome.identity&&"launchWebAuthFlow"in chrome.identity?chrome.identity:i.default.identity}async function c(e,t){return l().launchWebAuthFlow(e,t)}function u(){return l().getRedirectURL()}}}},{package:"$root$",file:"app/scripts/services/oauth/web-authenticator-factory.ts"}],[6181,{"@metamask/keyring-api":2510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ETH_EOA_METHODS=n.ETH_4337_METHODS=void 0;var r=e("@metamask/keyring-api");n.ETH_EOA_METHODS=[r.EthMethod.PersonalSign,r.EthMethod.SignTransaction,r.EthMethod.SignTypedDataV1,r.EthMethod.SignTypedDataV3,r.EthMethod.SignTypedDataV4],n.ETH_4337_METHODS=[r.EthMethod.PrepareUserOperation,r.EthMethod.PatchUserOperation,r.EthMethod.SignUserOperation]}}},{package:"$root$",file:"shared/constants/eth-methods.ts"}],[6188,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_EVENT=void 0;n.LOG_EVENT={VERSION_UPDATE:"Extension version update"}}}},{package:"$root$",file:"shared/constants/logs.ts"}],[6189,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EXTENSION_MESSAGES=void 0;n.EXTENSION_MESSAGES={READY:"METAMASK_EXTENSION_READY"}}}},{package:"$root$",file:"shared/constants/messages.ts"}],[619,{"../../../../shared/constants/metametrics":6190,"../../../../shared/constants/time":6211,"../../../../shared/lib/sentry":6292,"../../../../shared/lib/shield":6293,"../../../../shared/modules/error":6320,"../../../../shared/modules/selectors":6333,"../../../../shared/modules/shield":6342,"../../../../shared/modules/shield/metrics":6343,"../../../../ui/pages/swaps/swaps.util":8554,"../../lib/transaction/sentinel-api":372,"./types":620,"@metamask/controller-utils":1639,"@metamask/keyring-controller":2537,"@metamask/subscription-controller":3411,"@metamask/transaction-controller":3473,"@metamask/utils":3554,loglevel:5247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionService=void 0;var r,i=e("@metamask/subscription-controller"),o=e("@metamask/transaction-controller"),s=(r=e("loglevel"))&&r.__esModule?r:{default:r},a=e("@metamask/keyring-controller"),l=e("@metamask/utils"),c=e("@metamask/controller-utils"),u=e("../../lib/transaction/sentinel-api"),d=e("../../../../shared/modules/selectors"),h=e("../../../../ui/pages/swaps/swaps.util"),f=e("../../../../shared/modules/shield/metrics"),p=e("../../../../shared/constants/metametrics"),g=e("../../../../shared/constants/time"),m=e("../../../../shared/lib/shield"),b=e("../../../../shared/modules/shield"),y=e("../../../../shared/lib/sentry"),w=e("../../../../shared/modules/error"),k=e("./types");function v(e,t,n){_(e,t),t.set(e,n)}function _(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return e.get(T(e,t))}function S(e,t,n){return e.set(T(e,t),n),n}function T(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const A=5*g.SECOND,M=60*g.SECOND;var I=new WeakMap,O=new WeakMap,P=new WeakMap,x=new WeakMap,N=new WeakSet;async function R(e){const t=await E(O,this).openTab({url:e.url});await new Promise((n,r)=>{let i=!1,o=!1;const s=(n,r)=>{var s,a;n===t.id&&(null!==(s=r.url)&&void 0!==s&&s.startsWith(e.cancelUrl)?(o=!0,E(O,this).closeTab(n)):null!==(a=r.url)&&void 0!==a&&a.startsWith(e.successUrl)&&(i=!0,E(O,this).closeTab(n)))};E(O,this).addTabUpdatedListener(s);const a=e=>{const l=()=>{E(O,this).removeTabUpdatedListener(s),E(O,this).removeTabRemovedListener(a)};e===t.id&&(l(),i?n():r(o?new Error(b.SHIELD_ERROR.stripePaymentCancelled):new Error(b.SHIELD_ERROR.tabActionFailed)))};E(O,this).addTabRemovedListener(a)})}async function j(e=A,t=M){const n=Date.now();for(;Date.now()-n<t;){const t=await E(I,this).call("SubscriptionController:getSubscriptions");if((0,m.getIsShieldSubscriptionActive)(t)||(0,m.getIsShieldSubscriptionPaused)(t))return t;await new Promise(t=>setTimeout(t,e))}throw new Error(b.SHIELD_ERROR.subscriptionPollingTimedOut)}async function L(e){const{isGasFeeSponsored:t,chainId:n}=e,r=await(0,u.isSendBundleSupported)(n),o=Boolean(t&&r),a=await T(N,this,G).call(this),l=(0,m.getIsShieldSubscriptionActive)(a??[]);try{l||T(N,this,q).call(this,"started",a,e,{has_sufficient_crypto_balance:!0});const t=await T(N,this,U).call(this);await E(I,this).call("SubscriptionController:submitShieldSubscriptionCryptoApproval",e,o,t),a&&l?T(N,this,V).call(this,"succeeded",a,e):T(N,this,q).call(this,"completed",a,e,{gas_sponsored:o||!1})}catch(t){s.default.error("Error on Shield subscription approval transaction",t);const n=t instanceof Error?t.message:"Unknown error";throw a&&l?T(N,this,V).call(this,"failed",a,e,{error:n}):T(N,this,q).call(this,"failed",a,e,{error:n}),E(I,this).call("SubscriptionController:clearLastSelectedPaymentMethod",i.PRODUCT_TYPES.SHIELD),E(x,this).call(this,(0,w.createSentryError)("Error on Shield subscription approval transaction",t)),t}}async function $(e){const t={metamask:{...await T(N,this,B).call(this),...E(I,this).call("AccountsController:getState"),...E(I,this).call("PreferencesController:getState"),...E(I,this).call("SmartTransactionsController:getState"),...E(I,this).call("NetworkController:getState"),...E(I,this).call("RemoteFeatureFlagController:getState")}},n=(0,d.getIsSmartTransaction)(t,e);return await(0,u.isSendBundleSupported)(e)&&n}async function B(){const e=E(I,this).call("SwapsController:getState"),{swapsFeatureFlags:t}=e.swapsState;try{if(!t||0===Object.keys(t).length){const t=await(0,h.fetchSwapsFeatureFlags)();return t?{...e,swapsState:{...e.swapsState,swapsFeatureFlags:t}}:e}}catch(t){return s.default.error("Failed to fetch swaps feature flags",t),e}return e}function D(){const{internalAccounts:e}=E(I,this).call("AccountsController:getState"),t=e.accounts[e.selectedAccount],n=E(I,this).call("KeyringController:getState").keyrings.filter(e=>e.type===a.KeyringTypes.hd);return(0,f.getUserAccountTypeAndCategory)(t,n)}async function U(){try{const e=await E(I,this).call("RewardsController:getSeasonMetadata","current"),{startDate:t,endDate:n}=e,r=Date.now();if(r<t||r>n)return undefined;const i=await T(N,this,F).call(this);if(!i)return undefined;return await E(I,this).call("RewardsController:getHasAccountOptedIn",i)?i:undefined}catch(e){return s.default.warn("Failed to get reward season metadata",e),undefined}}async function F(){try{const e=E(I,this).call("KeyringController:getState").keyrings.find(e=>e.type===a.KeyringTypes.hd);if(!e)return undefined;const{internalAccounts:t}=E(I,this).call("AccountsController:getState"),n=Object.values(t.accounts).find(t=>{var n;const r=null===(n=t.options)||void 0===n?void 0:n.entropySource;return"string"==typeof r&&(0,c.isEqualCaseInsensitive)(r,e.metadata.id)});if(!n)return undefined;const{namespace:r,reference:i}=(0,l.parseCaipChainId)(n.scopes[0]);return(0,l.toCaipAccountId)(r,i,n.address)}catch(e){return s.default.warn("[getPrimaryCaipAccountId] Failed to get primary CAIP account ID",e),undefined}}function H(e){try{if(!e.type)return;const t=[o.TransactionType.simpleSend,o.TransactionType.tokenMethodTransfer,o.TransactionType.swap,o.TransactionType.swapAndSend].includes(e.type),{pendingShieldCohort:n,shieldSubscriptionMetricsProps:r}=E(I,this).call("AppStateController:getState");t&&!n&&(E(I,this).call("AppStateController:setPendingShieldCohort",i.COHORT_NAMES.POST_TX,e.type),E(I,this).call("MetaMetricsController:trackEvent",{event:p.MetaMetricsEventName.ShieldEligibilityCohortAssigned,category:p.MetaMetricsEventCategory.Shield,properties:{...T(N,this,D).call(this),multi_chain_balance_category:(0,f.getUserBalanceCategory)((null==r?void 0:r.userBalanceInUSD)??0),assigned_cohort:i.COHORT_NAMES.POST_TX}}))}catch(e){s.default.error("Failed to assign post tx cohort",e),E(x,this).call(this,(0,w.createSentryError)("Failed to assign post tx cohort",e))}}function q(e,t,n,r){if(n&&n.type!==o.TransactionType.shieldSubscriptionApprove)return;const i=E(I,this).call("SubscriptionController:getState"),s=E(I,this).call("AppStateController:getState"),{defaultSubscriptionPaymentOptions:a,shieldSubscriptionMetricsProps:l}=s,c=T(N,this,D).call(this),u=(0,f.getSubscriptionRequestTrackingProps)(i,t||i.lastSubscription,a,l,n);E(I,this).call("MetaMetricsController:trackEvent",{event:p.MetaMetricsEventName.ShieldSubscriptionRequest,category:p.MetaMetricsEventCategory.Shield,properties:{...c,...u,...r,status:e}})}function V(e,t,n,r){if(n&&n.type!==o.TransactionType.shieldSubscriptionApprove)return;const i=E(I,this).call("SubscriptionController:getState"),s=T(N,this,D).call(this),a=(0,f.formatCaptureShieldPaymentMethodChangeEventProps)(i,t,n);E(I,this).call("MetaMetricsController:trackEvent",{event:p.MetaMetricsEventName.ShieldPaymentMethodChange,category:p.MetaMetricsEventCategory.Shield,properties:{...s,...a,...r,status:e}})}function W(e,t){const n=T(N,this,D).call(this),{shieldSubscriptionMetricsProps:r}=E(I,this).call("AppStateController:getState"),i=t??(null==r?void 0:r.rewardPoints);i&&E(I,this).call("MetaMetricsController:trackEvent",{event:p.MetaMetricsEventName.ShieldOptInRewards,category:p.MetaMetricsEventCategory.Shield,properties:{...n,multi_chain_balance_category:(0,f.getUserBalanceCategory)((null==r?void 0:r.userBalanceInUSD)??0),rewards_point:i,rewards_opt_in_type:e}})}async function G(){const e=await E(I,this).call("SubscriptionController:getSubscriptions");return(0,m.getShieldSubscription)(e)}function z(e){return`${e}?cancel=true`}n.SubscriptionService=class{constructor({messenger:e,platform:t,webAuthenticator:n,captureException:r=y.captureException}){!function(e,t){_(e,t),t.add(e)}(this,N),C(this,"name",k.SERVICE_NAME),C(this,"state",null),v(this,I,void 0),v(this,O,void 0),v(this,P,void 0),v(this,x,void 0),S(I,this,e),S(O,this,t),S(P,this,n),S(x,this,r),E(I,this).registerActionHandler(`${k.SERVICE_NAME}:submitSubscriptionSponsorshipIntent`,this.submitSubscriptionSponsorshipIntent.bind(this))}async updateSubscriptionCardPaymentMethod(e,t){try{const{paymentType:n}=e;if(n!==i.PAYMENT_TYPES.byCard)throw new Error("Only card payment type is supported");const r=E(P,this).getRedirectURL(),o=T(N,this,z).call(this,r),{redirectUrl:s}=await E(I,this).call("SubscriptionController:updatePaymentMethod",{...e,successUrl:r,cancelUrl:o});try{await T(N,this,R).call(this,{url:s,successUrl:r,cancelUrl:o})}catch(e){if(!(e instanceof Error&&e.message.includes(b.SHIELD_ERROR.tabActionFailed)))throw e}t||E(O,this).openExtensionInBrowser("/settings/transaction-shield");return await E(I,this).call("SubscriptionController:getSubscriptions")}catch(e){throw E(x,this).call(this,(0,w.createSentryError)("Failed to update subscription card payment method",e)),e}}async updateSubscriptionCryptoPaymentMethod(e){try{const{paymentType:t}=e;if(t!==i.PAYMENT_TYPES.byCrypto)throw new Error("Only crypto payment type is supported");await E(I,this).call("SubscriptionController:updatePaymentMethod",e);return await E(I,this).call("SubscriptionController:getSubscriptions")}catch(e){throw E(x,this).call(this,(0,w.createSentryError)("Failed to update subscription crypto payment method",e)),e}}async startSubscriptionWithCard(e,t,n,r){const o=await T(N,this,G).call(this);try{const i=E(P,this).getRedirectURL(),s=T(N,this,z).call(this,i),a=await T(N,this,U).call(this),{checkoutSessionUrl:l}=await E(I,this).call("SubscriptionController:startShieldSubscriptionWithCard",{...e,successUrl:i,cancelUrl:s,rewardAccountId:a});await T(N,this,R).call(this,{url:l,successUrl:i,cancelUrl:s}),t||E(O,this).openExtensionInBrowser("/settings/transaction-shield?waitForSubscriptionCreation=true");const c=await T(N,this,j).call(this,n,r);return T(N,this,q).call(this,"completed",o),a&&T(N,this,W).call(this,"create_new_subscription"),c}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw T(N,this,q).call(this,"failed",o,undefined,{error:t}),E(I,this).call("SubscriptionController:clearLastSelectedPaymentMethod",i.PRODUCT_TYPES.SHIELD),t.toLocaleLowerCase().includes("already exists")&&await E(I,this).call("SubscriptionController:getSubscriptions"),E(x,this).call(this,(0,w.createSentryError)("Failed to start subscription with card",e)),e}}async handlePostTransaction(e){T(N,this,H).call(this,e),e.type===o.TransactionType.shieldSubscriptionApprove&&await T(N,this,L).call(this,e)}async submitSubscriptionSponsorshipIntent(e){const{chainId:t,type:n,txParams:r,actionId:a,id:l}=e;if(n!==o.TransactionType.shieldSubscriptionApprove)return;const c=E(I,this).call("TransactionController:getTransactions")||[];if(null==c?void 0:c.find(e=>a&&e.actionId===a||e.id===l))return;if(await T(N,this,$).call(this,t))try{await E(I,this).call("SubscriptionController:submitSponsorshipIntents",{chainId:t,address:r.from,products:[i.PRODUCT_TYPES.SHIELD]})}catch(e){s.default.error("Failed to submit sponsorship intent",e),E(x,this).call(this,(0,w.createSentryError)("Failed to submit sponsorship intent",e))}}async linkRewardToExistingSubscription(e,t){try{const n=await T(N,this,U).call(this);if(!n)return;await E(I,this).call("SubscriptionController:linkRewards",{subscriptionId:e,rewardAccountId:n}),n&&t&&T(N,this,W).call(this,"link_existing_subscription",t)}catch(e){s.default.error("Failed to link reward to existing subscription",e),E(x,this).call(this,(0,w.createSentryError)("Failed to link reward to existing subscription",e))}}}}}},{package:"$root$",file:"app/scripts/services/subscription/subscription-service.ts"}],[62,{"../../../shared/modules/mv3.utils":6327,"../lib/encryptor-factory":288,"../lib/hardware-keyring-builder-factory":296,"../lib/offscreen-bridge/lattice-offscreen-keyring":306,"../lib/offscreen-bridge/ledger-offscreen-bridge":307,"../lib/offscreen-bridge/trezor-offscreen-bridge":308,"../lib/qr-keyring-builder-factory":316,"@metamask/eth-ledger-bridge-keyring":2119,"@metamask/eth-qr-keyring":2128,"@metamask/eth-trezor-keyring":2316,"@metamask/keyring-controller":2537,"eth-lattice-keyring":4679},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyringControllerInit=void 0;var r,i=e("@metamask/keyring-controller"),o=e("@metamask/eth-qr-keyring"),s=(r=e("eth-lattice-keyring"))&&r.__esModule?r:{default:r},a=e("@metamask/eth-trezor-keyring"),l=e("@metamask/eth-ledger-bridge-keyring"),c=e("../lib/hardware-keyring-builder-factory"),u=e("../../../shared/modules/mv3.utils"),d=e("../lib/qr-keyring-builder-factory"),h=e("../lib/encryptor-factory"),f=e("../lib/offscreen-bridge/trezor-offscreen-bridge"),p=e("../lib/offscreen-bridge/ledger-offscreen-bridge"),g=e("../lib/offscreen-bridge/lattice-offscreen-keyring");n.KeyringControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n,keyringOverrides:r,encryptor:m,getController:b})=>{const y=[(0,d.qrKeyringBuilderFactory)((null==r?void 0:r.qr)||o.QrKeyring,(null==r?void 0:r.qrBridge)||o.QrKeyringScannerBridge,{requestScan:async e=>n.call("AppStateController:requestQrCodeScan",e)})];!1===u.isManifestV3?y.push((0,i.keyringBuilderFactory)((null==r?void 0:r.lattice)||s.default),(0,c.hardwareKeyringBuilderFactory)(a.TrezorKeyring,(null==r?void 0:r.trezorBridge)||a.TrezorConnectBridge),(0,c.hardwareKeyringBuilderFactory)(a.OneKeyKeyring,(null==r?void 0:r.oneKey)||a.TrezorConnectBridge),(0,c.hardwareKeyringBuilderFactory)(l.LedgerKeyring,(null==r?void 0:r.ledgerBridge)||l.LedgerIframeBridge)):y.push((0,c.hardwareKeyringBuilderFactory)(a.TrezorKeyring,(null==r?void 0:r.trezorBridge)||f.TrezorOffscreenBridge),(0,c.hardwareKeyringBuilderFactory)(a.OneKeyKeyring,(null==r?void 0:r.oneKey)||f.TrezorOffscreenBridge),(0,c.hardwareKeyringBuilderFactory)(l.LedgerKeyring,(null==r?void 0:r.ledgerBridge)||p.LedgerOffscreenBridge),(0,i.keyringBuilderFactory)(g.LatticeKeyringOffscreen));const w=b("SnapKeyringBuilder");y.push(w);return{controller:new i.KeyringController({state:t.KeyringController,messenger:e,keyringBuilders:y,encryptor:m||(0,h.encryptorFactory)(6e5)})}}}}},{package:"$root$",file:"app/scripts/controller-init/keyring-controller-init.ts"}],[620,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SERVICE_NAME=void 0;n.SERVICE_NAME="SubscriptionService"}}},{package:"$root$",file:"app/scripts/services/subscription/types.ts"}],[6200,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PRICE_API_CURRENCIES=void 0;n.PRICE_API_CURRENCIES=["aud","hkd","sgd","idr","inr","nzd","php","btc","cad","eur","gbp","jpy","ltc","rub","uah","usd","xlm","xrp","sek","aed","ars","bch","bnb","brl","clp","cny","czk","dkk","chf","dot","eos","eth","gel","huf","ils","krw","mxn","myr","ngn","nok","pln","thb","try","zar"]}}},{package:"$root$",file:"shared/constants/price-api-currencies.ts"}],[6249,{"@metamask/abi-utils":1236,"@metamask/delegation-core":1652,buffer:4474,"ethereumjs-util":4728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaveatArrayPacketHash=n.createCaveat=void 0;var r=e("@metamask/abi-utils"),i=e("ethereumjs-util"),o=e("@metamask/delegation-core");const s=e=>{const n=(0,r.encode)(["bytes32","address","bytes32"],[o.CAVEAT_TYPEHASH,e.enforcer,(0,i.keccak)((0,i.toBuffer)(e.terms))]);return(0,i.keccak)(t.from(n))};n.getCaveatArrayPacketHash=e=>{let n=t.from([]);for(const i of e){const e=s(i);n=t.from((0,r.encode)(["bytes","bytes32"],[n,e],!0))}return(0,i.keccak)(n)};n.createCaveat=(e,t,n="0x")=>({enforcer:e,terms:t,args:n})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"shared/lib/delegation/caveat.ts"}],[6264,{"@metamask/delegation-deployments":1653},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PREFERRED_VERSION=void 0,n.getDeleGatorEnvironment=function(e,t=i){var n;const o=null===(n=r.DELEGATOR_CONTRACTS[t])||void 0===n?void 0:n[e];if(!o)throw new Error(`No contracts found for version ${t} chain ${e}`);return{EIP7702StatelessDeleGatorImpl:o.EIP7702StatelessDeleGatorImpl,DelegationManager:o.DelegationManager,EntryPoint:o.EntryPoint,SimpleFactory:o.SimpleFactory,implementations:{MultiSigDeleGatorImpl:o.MultiSigDeleGatorImpl,HybridDeleGatorImpl:o.HybridDeleGatorImpl},caveatEnforcers:{AllowedCalldataEnforcer:o.AllowedCalldataEnforcer,AllowedMethodsEnforcer:o.AllowedMethodsEnforcer,AllowedTargetsEnforcer:o.AllowedTargetsEnforcer,ArgsEqualityCheckEnforcer:o.ArgsEqualityCheckEnforcer,BlockNumberEnforcer:o.BlockNumberEnforcer,DeployedEnforcer:o.DeployedEnforcer,ERC20BalanceChangeEnforcer:o.ERC20BalanceChangeEnforcer,ERC20BalanceGteEnforcer:o.ERC20BalanceGteEnforcer,ERC20TransferAmountEnforcer:o.ERC20TransferAmountEnforcer,ERC20StreamingEnforcer:o.ERC20StreamingEnforcer,ERC721BalanceChangeEnforcer:o.ERC721BalanceChangeEnforcer,ERC721BalanceGteEnforcer:o.ERC721BalanceGteEnforcer,ERC721TransferEnforcer:o.ERC721TransferEnforcer,ERC1155BalanceChangeEnforcer:o.ERC1155BalanceChangeEnforcer,ERC1155BalanceGteEnforcer:o.ERC1155BalanceGteEnforcer,IdEnforcer:o.IdEnforcer,LimitedCallsEnforcer:o.LimitedCallsEnforcer,NonceEnforcer:o.NonceEnforcer,TimestampEnforcer:o.TimestampEnforcer,ValueLteEnforcer:o.ValueLteEnforcer,MultiTokenPeriodEnforcer:o.MultiTokenPeriodEnforcer,NativeTokenTransferAmountEnforcer:o.NativeTokenTransferAmountEnforcer,NativeBalanceChangeEnforcer:o.NativeBalanceChangeEnforcer,NativeBalanceGteEnforcer:o.NativeBalanceGteEnforcer,NativeTokenStreamingEnforcer:o.NativeTokenStreamingEnforcer,NativeTokenPaymentEnforcer:o.NativeTokenPaymentEnforcer,OwnershipTransferEnforcer:o.OwnershipTransferEnforcer,RedeemerEnforcer:o.RedeemerEnforcer,SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",ERC20PeriodTransferEnforcer:o.ERC20PeriodTransferEnforcer,NativeTokenPeriodTransferEnforcer:o.NativeTokenPeriodTransferEnforcer,ExactCalldataBatchEnforcer:o.ExactCalldataBatchEnforcer,ExactCalldataEnforcer:o.ExactCalldataEnforcer,ExactExecutionEnforcer:o.ExactExecutionEnforcer,ExactExecutionBatchEnforcer:o.ExactExecutionBatchEnforcer}}};var r=e("@metamask/delegation-deployments");const i=n.PREFERRED_VERSION="1.3.0"}}},{package:"$root$",file:"shared/lib/delegation/environment.ts"}],[6266,{"./caveat":6249,"./caveatBuilder":6258,"./delegation":6263,"./environment":6264,"./execution":6265},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ANY_BENEFICIARY",{enumerable:!0,get:function(){return i.ANY_BENEFICIARY}}),Object.defineProperty(n,"BATCH_DEFAULT_MODE",{enumerable:!0,get:function(){return o.BATCH_DEFAULT_MODE}}),Object.defineProperty(n,"BATCH_TRY_MODE",{enumerable:!0,get:function(){return o.BATCH_TRY_MODE}}),Object.defineProperty(n,"ROOT_AUTHORITY",{enumerable:!0,get:function(){return i.ROOT_AUTHORITY}}),Object.defineProperty(n,"SINGLE_DEFAULT_MODE",{enumerable:!0,get:function(){return o.SINGLE_DEFAULT_MODE}}),Object.defineProperty(n,"SINGLE_TRY_MODE",{enumerable:!0,get:function(){return o.SINGLE_TRY_MODE}}),Object.defineProperty(n,"createCaveat",{enumerable:!0,get:function(){return s.createCaveat}}),Object.defineProperty(n,"createCaveatBuilder",{enumerable:!0,get:function(){return a.createCaveatBuilder}}),Object.defineProperty(n,"createDelegation",{enumerable:!0,get:function(){return i.createDelegation}}),Object.defineProperty(n,"createExecution",{enumerable:!0,get:function(){return o.createExecution}}),Object.defineProperty(n,"createOpenDelegation",{enumerable:!0,get:function(){return i.createOpenDelegation}}),Object.defineProperty(n,"encodeBatchExecution",{enumerable:!0,get:function(){return o.encodeBatchExecution}}),Object.defineProperty(n,"encodeDelegation",{enumerable:!0,get:function(){return i.encodeDelegation}}),Object.defineProperty(n,"encodeExecutionCalldata",{enumerable:!0,get:function(){return o.encodeExecutionCalldata}}),Object.defineProperty(n,"encodeExecutionCalldatas",{enumerable:!0,get:function(){return o.encodeExecutionCalldatas}}),Object.defineProperty(n,"encodePermissionContexts",{enumerable:!0,get:function(){return i.encodePermissionContexts}}),Object.defineProperty(n,"encodeSingleExecution",{enumerable:!0,get:function(){return o.encodeSingleExecution}}),Object.defineProperty(n,"getDeleGatorEnvironment",{enumerable:!0,get:function(){return r.getDeleGatorEnvironment}}),Object.defineProperty(n,"getDelegationHashOffchain",{enumerable:!0,get:function(){return i.getDelegationHashOffchain}}),Object.defineProperty(n,"toDelegationStruct",{enumerable:!0,get:function(){return i.toDelegationStruct}});var r=e("./environment"),i=e("./delegation"),o=e("./execution"),s=e("./caveat"),a=e("./caveatBuilder")}}},{package:"$root$",file:"shared/lib/delegation/index.ts"}],[6268,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkEip7702Support=function(e){const t=Boolean(e&&(!e.delegationAddress||e.isSupported));return{isSupported:t,upgradeContractAddress:t?(null==e?void 0:e.upgradeContractAddress)??null:null,delegationAddress:t?(null==e?void 0:e.delegationAddress)??null:null}},n.findAtomicBatchSupportForChain=function(e,t){return e.find(e=>e.chainId.toLowerCase()===t.toLowerCase())}}}},{package:"$root$",file:"shared/lib/eip7702-support-utils.ts"}],[6298,{"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/metamask-eth-abis":2597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchERC1155Balance=async function(e,t,n,s){if(!t||!n)return null;const a=new o.Web3Provider(s),l=new i.Contract(e,r.abiERC1155,a),c=l?l.balanceOf(t,n):Promise.resolve();return await c},n.fetchTokenBalance=async function(e,t,n){const s=new o.Web3Provider(n),a=new i.Contract(e,r.abiERC20,s),l=a?a.balanceOf(t):Promise.resolve();return await l},n.getTokenIdParam=function(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())};var r=e("@metamask/metamask-eth-abis"),i=e("@ethersproject/contracts"),o=e("@ethersproject/providers")}}},{package:"$root$",file:"shared/lib/token-util.ts"}],[63,{"../../../shared/constants/logs":6188,"@metamask/logging-controller":2579},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LoggingControllerInit=void 0;var r=e("@metamask/logging-controller"),i=e("../../../shared/constants/logs");n.LoggingControllerInit=({controllerMessenger:e,persistedState:t,extension:n})=>{const o=new r.LoggingController({messenger:e,state:t.LoggingController});return n.runtime.onInstalled.addListener(e=>{"update"===e.reason&&o.add({type:r.LogType.GenericLog,data:{event:i.LOG_EVENT.VERSION_UPDATE,previousVersion:e.previousVersion,version:"13.18.1"}})}),{controller:o}}}}},{package:"$root$",file:"app/scripts/controller-init/logging-controller-init.ts"}],[6307,{"../constants/metametrics":6190,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasNonZeroTokenBalance=n.hasNonZeroMultichainBalance=n.getWalletFundsObtainedEventProperties=n.getMidnightISOTimestamp=n.getAmountBucket=n.AmountBucket=void 0;var r=e("@metamask/utils"),i=e("../constants/metametrics");const o=n.AmountBucket={Low:"<$100",Medium:"$100-1000",High:">$1000"},s=e=>{const t=Number(e);return t<100?o.Low:t<=1e3?o.Medium:o.High};n.getAmountBucket=s;const a=()=>{const e=new Date;return e.setHours(0,0,0,0),e.toISOString()};n.getMidnightISOTimestamp=a;n.hasNonZeroTokenBalance=(e={})=>{for(const t of Object.values(e))for(const e of Object.values(t||{}))for(const t of Object.values(e||{}))if((0,r.hexToNumber)(t||"0x0")>0)return!0;return!1};n.hasNonZeroMultichainBalance=(e={})=>{for(const t of Object.values(e))for(const e of Object.values(t||{}))if(null!=e&&e.amount&&"0"!==e.amount)return!0;return!1};n.getWalletFundsObtainedEventProperties=({chainId:e,amountUsd:t})=>({event:i.MetaMetricsEventName.WalletFundsObtained,timestamp:a(),properties:{chain_id_caip:(0,r.toCaipChainId)(r.KnownCaipNamespace.Eip155,e.toString()),funding_amount_usd:s(t)}})}}},{package:"$root$",file:"shared/lib/wallet-funds-obtained-metric.ts"}],[6309,{"@metamask/profile-sync-controller/sdk":2944},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isForceAuthMatchBuild=i,n.loadAuthenticationConfig=function(){if(!i())return r.Env.PRD;0;return r.Env.PRD};var r=e("@metamask/profile-sync-controller/sdk");function i(){var e;return"true"===(null===(e=!1)?void 0:e.toString())}}}},{package:"$root$",file:"shared/modules/authentication/config.ts"}],[6310,{"./config":6309},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./config");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})}}},{package:"$root$",file:"shared/modules/authentication/index.ts"}],[6313,{"@metamask/utils":3554,"readable-stream":5677},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCaipStream=n.CaipStream=void 0;var r=e("@metamask/utils"),i=e("readable-stream");function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Duplex{constructor(e){super({objectMode:!0}),o(this,"parent",void 0),this.parent=e}_read(){return undefined}_write(e,t,n){this.parent.push({type:"caip-348",data:e}),n()}}class a extends i.Duplex{constructor(){super({objectMode:!0}),o(this,"substream",void 0),this.substream=new s(this)}_read(){return undefined}_write(e,t,n){(0,r.isObject)(e)&&"caip-348"===e.type&&this.substream.push(e.data),n()}}n.CaipStream=a;n.createCaipStream=e=>{var t,n;const r=new a,o=()=>{r.substream.destroyed||r.substream.writableEnded||r.substream.end()};return null===(t=e.once)||void 0===t||t.call(e,"close",o),null===(n=e.once)||void 0===n||n.call(e,"end",o),(0,i.pipeline)(e,r,e,e=>{r.substream.destroy(),e&&"Premature close"!==e.message&&console.error("MetaMask CAIP stream error:",e)}),r.substream}}}},{package:"$root$",file:"shared/modules/caip-stream.ts"}],[6326,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSmartTransactionMetricsProperties=void 0;n.getSmartTransactionMetricsProperties=(e,t)=>{var n;const r=e.getIsSmartTransaction(t.chainId),i={is_smart_transaction:r};if(!r)return i;i.gas_included=null===(n=t.swapMetaData)||void 0===n?void 0:n.gas_included;const o=e.getSmartTransactionByMinedTxHash(t.hash),s=null==o?void 0:o.statusMetadata;return s?(i.smart_transaction_timed_out=s.timedOut,i.smart_transaction_proxied=s.proxied,i):i}}}},{package:"$root$",file:"shared/modules/metametrics.ts"}],[6349,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitizeMessageRecursively=function e(t,n,r){const i={},o=n[r];if(!o)return t;for(const r of o){const{name:o,type:s}=r;t[o]!==undefined&&(n[s]?i[o]=e(t[o],n,s):i[o]=t[o])}return i}}}},{package:"$root$",file:"shared/modules/typed-signature.ts"}],[6350,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UI_NOTIFICATIONS=void 0;n.UI_NOTIFICATIONS={}}}},{package:"$root$",file:"shared/notifications/index.ts"}],[64,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountOrderControllerMessenger=function(e){return new r.Messenger({namespace:"AccountOrderController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/account-order-controller-messenger.ts"}],[65,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountTrackerControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AccountTrackerControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState","PreferencesController:getState"],events:["NetworkController:networkDidChange"]}),t},n.getAccountTrackerControllerMessenger=function(e){const t=new r.Messenger({namespace:"AccountTrackerController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","AccountsController:listAccounts","NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState","KeyringController:getState"],events:["AccountsController:selectedEvmAccountChange","TransactionController:transactionConfirmed","TransactionController:unapprovedTransactionAdded","NetworkController:networkAdded","KeyringController:lock","KeyringController:unlock"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/account-tracker-controller-messenger.ts"}],[659,{buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer");t.exports=class{constructor(e,t,n,i){this.name=e,this.code=t,this.codeBuf=r.from(this.code),this.alphabet=i,this.engine=n(i)}encode(e){return this.engine.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.engine.decode(e)}}}}},{package:"@ensdomains/content-hash>multihashes>multibase",file:"node_modules/@ensdomains/content-hash/node_modules/multibase/src/base.js"}],[66,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountsControllerMessenger=function(e){const t=new r.Messenger({namespace:"AccountsController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","KeyringController:getKeyringsByType"],events:["SnapController:stateChange","KeyringController:stateChange","SnapKeyring:accountAssetListUpdated","SnapKeyring:accountBalancesUpdated","SnapKeyring:accountTransactionsUpdated","MultichainNetworkController:networkDidChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts-controller-messenger.ts"}],[660,{"./base.js":659,"./rfc4648":662,"./util":663,"base-x":4358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("base-x"),i=e("./base.js"),o=e("./rfc4648"),{decodeText:s,encodeText:a}=e("./util"),l=[["identity","\0",()=>({encode:s,decode:a}),""],["base2","0",o(1),"01"],["base8","7",o(3),"01234567"],["base10","9",r,"0123456789"],["base16","f",o(4),"0123456789abcdef"],["base16upper","F",o(4),"0123456789ABCDEF"],["base32hex","v",o(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",o(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",o(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",o(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",o(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",o(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",o(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",o(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",o(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",r,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",r,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",r,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",r,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],c=l.reduce((e,t)=>(e[t[0]]=new i(t[0],t[1],t[2],t[3]),e),{}),u=l.reduce((e,t)=>(e[t[1]]=c[t[0]],e),{});t.exports={names:c,codes:u}}}},{package:"@ensdomains/content-hash>multihashes>multibase",file:"node_modules/@ensdomains/content-hash/node_modules/multibase/src/constants.js"}],[661,{"./constants":660,"./util":663,buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),i=e("./constants"),{decodeText:o,asBuffer:s}=e("./util");function a(e){if(i.names[e])return i.names[e];if(i.codes[e])return i.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(n=t.exports=function(e,t){if(!t)throw new Error("requires an encoded buffer");const{name:n,codeBuf:i}=a(e);!function(e,t){const n=a(e);n.decode(o(t))}(n,t);const s=r.alloc(i.length+t.length);return s.set(i,0),s.set(t,i.length),s}).encode=function(e,t){const n=a(e);return r.concat([n.codeBuf,r.from(n.encode(t))])},n.decode=function(e){ArrayBuffer.isView(e)&&(e=o(e));const t=e[0];["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase());const n=a(e[0]);return s(n.decode(e.substring(1)))},n.isEncoded=function(e){if(e instanceof Uint8Array&&(e=o(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(e){return!1}},n.encoding=a,n.encodingFromData=function(e){return e instanceof Uint8Array&&(e=o(e)),a(e[0])},n.names=Object.freeze(i.names),n.codes=Object.freeze(i.codes)}}},{package:"@ensdomains/content-hash>multihashes>multibase",file:"node_modules/@ensdomains/content-hash/node_modules/multibase/src/index.js"}],[662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e=>t=>({encode:n=>((e,t,n)=>{const r="="===t[t.length-1],i=(1<<n)-1;let o="",s=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],s+=8;s>n;)s-=n,o+=t[i&a>>s];if(s&&(o+=t[i&a<<n-s]),r)for(;o.length*n&7;)o+="=";return o})(n,t,e),decode:n=>((e,t,n)=>{const r={};for(let e=0;e<t.length;++e)r[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let s=0,a=0,l=0;for(let t=0;t<i;++t){const i=r[e[t]];if(i===undefined)throw new SyntaxError("Invalid character "+e[t]);a=a<<n|i,s+=n,s>=8&&(s-=8,o[l++]=255&a>>s)}if(s>=n||255&a<<8-s)throw new SyntaxError("Unexpected end of data");return o})(n,t,e)})}}},{package:"@ensdomains/content-hash>multihashes>multibase",file:"node_modules/@ensdomains/content-hash/node_modules/multibase/src/rfc4648.js"}],[663,{buffer:4474,"web-encoding":6162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),{TextEncoder:i,TextDecoder:o}=e("web-encoding"),s=new o,a=new i;t.exports={decodeText:e=>s.decode(e),encodeText:e=>a.encode(e),asBuffer:({buffer:e,byteLength:t,byteOffset:n})=>r.from(e,n,t)}}}},{package:"@ensdomains/content-hash>multihashes>multibase",file:"node_modules/@ensdomains/content-hash/node_modules/multibase/src/util.js"}],[664,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});t.exports={names:r}}}},{package:"@ensdomains/content-hash>multihashes",file:"node_modules/@ensdomains/content-hash/node_modules/multihashes/src/constants.js"}],[665,{"./constants":664,buffer:4474,multibase:661,varint:668,"web-encoding":6162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),i=e("multibase"),o=e("varint"),{names:s}=e("./constants"),{TextDecoder:a}=e("web-encoding"),l=new a,c={};for(const e in s)c[s[e]]=e;function u(e){n.decode(e)}n.names=s,n.codes=Object.freeze(c),n.toHexString=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return(r.isBuffer(e)?e:r.from(e.buffer,e.byteOffset,e.byteLength)).toString("hex")},n.fromHexString=function(e){return r.from(e,"hex")},n.toB58String=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return l.decode(i.encode("base58btc",e)).slice(1)},n.fromB58String=function(e){const t=e instanceof Uint8Array?l.decode(e):e;return i.decode("z"+t)},n.decode=function(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");let t=r.isBuffer(e)?e:r.from(e.buffer,e.byteOffset,e.byteLength);if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const i=o.decode(t);if(!n.isValidCode(i))throw new Error(`multihash unknown function code: 0x${i.toString(16)}`);t=t.slice(o.decode.bytes);const s=o.decode(t);if(s<0)throw new Error(`multihash invalid length: ${s}`);if(t=t.slice(o.decode.bytes),t.length!==s)throw new Error(`multihash length inconsistent: 0x${t.toString("hex")}`);return{code:i,name:c[i],length:s,digest:t}},n.encode=function(e,t,i){if(!e||t===undefined)throw new Error("multihash encode requires at least two args: digest, code");const s=n.coerceCode(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==i&&(i=e.length),i&&e.length!==i)throw new Error("digest length should be equal to specified length.");const a=o.encode(s),l=o.encode(i),c=r.alloc(a.length+l.length+e.length);return c.set(a,0),c.set(l,a.length),c.set(e,a.length+l.length),c},n.coerceCode=function(e){let t=e;if("string"==typeof e){if(s[e]===undefined)throw new Error(`Unrecognized hash function named: ${e}`);t=s[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(c[t]===undefined&&!n.isAppCode(t))throw new Error(`Unrecognized function code: ${t}`);return t},n.isAppCode=function(e){return e>0&&e<16},n.isValidCode=function(e){return!!n.isAppCode(e)||!!c[e]},n.validate=u,n.prefix=function(e){return u(e),r.from(e.buffer,e.byteOffset,2)}}}},{package:"@ensdomains/content-hash>multihashes",file:"node_modules/@ensdomains/content-hash/node_modules/multihashes/src/index.js"}],[666,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n){var o,s=0,a=0,l=n=n||0,c=t.length;do{if(l>=c)throw e.bytes=0,new RangeError("Could not decode varint");o=t[l++],s+=a<28?(o&i)<<a:(o&i)*Math.pow(2,a),a+=7}while(o>=r);return e.bytes=l-n,s};var r=128,i=127}}},{package:"@ensdomains/content-hash>multihashes>varint",file:"node_modules/@ensdomains/content-hash/node_modules/varint/decode.js"}],[667,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n,s){n=n||[];var a=s=s||0;for(;t>=o;)n[s++]=255&t|r,t/=128;for(;t&i;)n[s++]=255&t|r,t>>>=7;return n[s]=0|t,e.bytes=s-a+1,n};var r=128,i=-128,o=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>multihashes>varint",file:"node_modules/@ensdomains/content-hash/node_modules/varint/encode.js"}],[668,{"./decode.js":666,"./encode.js":667,"./length.js":669},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>multihashes>varint",file:"node_modules/@ensdomains/content-hash/node_modules/varint/index.js"}],[669,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Math.pow(2,7),i=Math.pow(2,14),o=Math.pow(2,21),s=Math.pow(2,28),a=Math.pow(2,35),l=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<r?1:e<i?2:e<o?3:e<s?4:e<a?5:e<l?6:e<c?7:e<u?8:e<d?9:10}}}},{package:"@ensdomains/content-hash>multihashes>varint",file:"node_modules/@ensdomains/content-hash/node_modules/varint/length.js"}],[67,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountTreeControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AccountTreeControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","AccountsController:getAccount","AccountOrderController:getState"],events:[]}),t},n.getAccountTreeControllerMessenger=function(e){const t=new r.Messenger({namespace:"AccountTreeController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:selectedAccountChange","UserStorageController:stateChange","MultichainAccountService:walletStatusChange"],actions:["AccountsController:listMultichainAccounts","AccountsController:getAccount","AccountsController:getSelectedMultichainAccount","AccountsController:setSelectedAccount","UserStorageController:getState","UserStorageController:performGetStorage","UserStorageController:performGetStorageAllFeatureEntries","UserStorageController:performSetStorage","UserStorageController:performBatchSetStorage","AuthenticationController:getSessionProfile","MultichainAccountService:createMultichainAccountGroup","SnapController:get","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts/account-tree-controller-messenger.ts"}],[670,{cids:4505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("cids");n.cidForWeb=e=>{let t=new r(e);0===t.version&&(t=t.toV1());let n=t.toString("base32");if(n.length>63){const e=t.toString("base36");if(e.length<=63)return e;throw new TypeError("CID is longer than DNS limit of 63 characters and is not compatible with public gateways")}return n};n.cidV0ToV1Base32=e=>{let t=new r(e);return 0===t.version&&(t=t.toV1()),t.toString("base32")}}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/helpers.js"}],[671,{"./helpers":670,"./profiles":672,multicodec:5402,multihashes:665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("multicodec"),i=e("multihashes"),{hexStringToBuffer:o,profiles:s}=e("./profiles"),{cidForWeb:a,cidV0ToV1Base32:l}=e("./helpers");t.exports={helpers:{cidForWeb:a,cidV0ToV1Base32:l},decode:function(e){const t=o(e),n=r.getCodec(t),i=r.rmPrefix(t);let a=s[n];return a||(a=s.default),a.decode(i)},fromIpfs:function(e){return this.encode("ipfs-ns",e)},fromSkylink:function(e){return this.encode("skynet-ns",e)},fromSwarm:function(e){return this.encode("swarm-ns",e)},fromArweave:function(e){return this.encode("arweave-ns",e)},encode:function(e,t){let n=s[e];n||(n=s.default);const o=n.encode(t);return i.toHexString(r.addPrefix(e,o))},getCodec:function(e){let t=o(e);return r.getCodec(t)}}}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/index.js"}],[672,{buffer:4474,cids:4505,"js-base64":5051,multihashes:665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){const r=e("cids"),i=e("multihashes"),o=e("js-base64"),s=e=>{let t=e.slice(0,2),n=e.slice(2),r="";return r="0x"===t?n:e,i.fromHexString(r)},a=e=>{try{const{multihash:t}=e;if(t.length<38){const e=i.decode(t);if("identity"===e.name&&e.length<36)return!1}return!0}catch(e){return!1}},l={skynet:e=>o.toUint8Array(e),swarm:e=>{const t=i.encode(s(e),"keccak-256");return new r(1,"swarm-manifest",t).bytes},ipfs:e=>new r(e).toV1().bytes,ipns:e=>{const t=new r(e);if(!a(t))throw Error("ipns-ns allows only valid cryptographic libp2p-key identifiers, try using ED25519 pubkey instead");return new r(1,"libp2p-key",t.multihash).bytes},utf8:e=>t.from(e,"utf8"),arweave:e=>o.toUint8Array(e)},c={hexMultiHash:e=>{const t=new r(e);return i.decode(t.multihash).digest.toString("hex")},ipfs:e=>{const t=new r(e).toV1();return t.toString("libp2p-key"===t.codec?"base36":"base32")},ipns:e=>{const t=new r(e).toV1();return a(t)?t.toString("base36"):(console.warn("[ensdomains/content-hash] use of non-cryptographic identifiers in ipns-ns is deprecated and will be removed, migrate to ED25519 libp2p-key"),String(i.decode(new r(e).multihash).digest))},utf8:e=>e.toString("utf8"),base64:e=>o.fromUint8Array(e,!0)},u={"skynet-ns":{encode:l.skynet,decode:c.base64},"swarm-ns":{encode:l.swarm,decode:c.hexMultiHash},"ipfs-ns":{encode:l.ipfs,decode:c.ipfs},"ipns-ns":{encode:l.ipns,decode:c.ipns},"arweave-ns":{encode:l.arweave,decode:c.base64},default:{encode:l.utf8,decode:c.utf8}};n.hexStringToBuffer=s,n.profiles=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/profiles.js"}],[68,{"./account-tree-controller-messenger":67,"./institutional-snap-controller-messenger":69,"./multichain-account-service-messenger":70,"./snap-keyring-builder-messenger":71},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAccountTreeControllerInitMessenger",{enumerable:!0,get:function(){return r.getAccountTreeControllerInitMessenger}}),Object.defineProperty(n,"getAccountTreeControllerMessenger",{enumerable:!0,get:function(){return r.getAccountTreeControllerMessenger}}),Object.defineProperty(n,"getInstitutionalSnapControllerMessenger",{enumerable:!0,get:function(){return o.getInstitutionalSnapControllerMessenger}}),Object.defineProperty(n,"getMultichainAccountServiceInitMessenger",{enumerable:!0,get:function(){return i.getMultichainAccountServiceInitMessenger}}),Object.defineProperty(n,"getMultichainAccountServiceMessenger",{enumerable:!0,get:function(){return i.getMultichainAccountServiceMessenger}}),Object.defineProperty(n,"getSnapKeyringBuilderInitMessenger",{enumerable:!0,get:function(){return s.getSnapKeyringBuilderInitMessenger}}),Object.defineProperty(n,"getSnapKeyringBuilderMessenger",{enumerable:!0,get:function(){return s.getSnapKeyringBuilderMessenger}});var r=e("./account-tree-controller-messenger"),i=e("./multichain-account-service-messenger"),o=e("./institutional-snap-controller-messenger"),s=e("./snap-keyring-builder-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts/index.ts"}],[69,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getInstitutionalSnapControllerMessenger=function(e){const t=new r.Messenger({namespace:"InstitutionalSnapController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccountByAddress","SnapController:handleRequest","TransactionController:updateCustodialTransaction"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts/institutional-snap-controller-messenger.ts"}],[70,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAccountServiceInitMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAccountServiceInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState","RemoteFeatureFlagController:getState"],events:["PreferencesController:stateChange"]}),t},n.getMultichainAccountServiceMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAccountService",parent:e});return e.delegate({messenger:t,events:["KeyringController:stateChange","SnapController:stateChange","AccountsController:accountAdded","AccountsController:accountRemoved","RemoteFeatureFlagController:stateChange"],actions:["AccountsController:listMultichainAccounts","AccountsController:getAccountByAddress","AccountsController:getAccount","SnapController:getState","SnapController:handleRequest","KeyringController:getState","KeyringController:withKeyring","KeyringController:addNewKeyring","KeyringController:getKeyringsByType","NetworkController:getNetworkClientById","NetworkController:findNetworkClientIdByChainId"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts/multichain-account-service-messenger.ts"}],[71,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapKeyringBuilderInitMessenger=function(e){const t=new r.Messenger({namespace:"SnapKeyringInit",parent:e});return e.delegate({messenger:t,actions:["AccountsController:updateAccounts","KeyringController:persistAllKeyrings","MetaMetricsController:trackEvent"]}),t},n.getSnapKeyringBuilderMessenger=function(e){const t=new r.Messenger({namespace:"SnapKeyring",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","ApprovalController:startFlow","ApprovalController:endFlow","ApprovalController:showSuccess","ApprovalController:showError","PhishingController:testOrigin","PhishingController:maybeUpdateState","KeyringController:getAccounts","AccountsController:setSelectedAccount","AccountsController:getAccountByAddress","AccountsController:setAccountName","AccountsController:listMultichainAccounts","SnapController:handleRequest","SnapController:get","SnapController:isMinimumPlatformVersion","PreferencesController:getState","RemoteFeatureFlagController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/accounts/snap-keyring-builder-messenger.ts"}],[72,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAddressBookControllerMessenger=function(e){return new r.Messenger({namespace:"AddressBookController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/address-book-controller-messenger.ts"}],[73,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAlertControllerMessenger=function(e){const t=new r.Messenger({namespace:"AlertController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount"],events:["AccountsController:selectedAccountChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/alert-controller-messenger.ts"}],[74,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAnnouncementControllerMessenger=function(e){return new r.Messenger({namespace:"AnnouncementController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/announcement-controller-messenger.ts"}],[75,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAppMetadataControllerMessenger=function(e){return new r.Messenger({namespace:"AppMetadataController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/app-metadata-controller-messenger.ts"}],[76,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAppStateControllerMessenger=function(e){const t=new r.Messenger({namespace:"AppStateController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:acceptRequest","KeyringController:getState","PreferencesController:getState","ProfileMetricsController:skipInitialDelay"],events:["KeyringController:unlock","PreferencesController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/app-state-controller-messenger.ts"}],[77,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalControllerMessenger=function(e){return new r.Messenger({namespace:"ApprovalController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/approval-controller-messenger.ts"}],[78,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetsContractControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AssetsContractControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState"],events:[]}),t},n.getAssetsContractControllerMessenger=function(e){const t=new r.Messenger({namespace:"AssetsContractController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getNetworkConfigurationByNetworkClientId","NetworkController:getSelectedNetworkClient","NetworkController:getState"],events:["PreferencesController:stateChange","NetworkController:networkDidChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/assets-contract-controller-messenger.ts"}],[79,{"./assets-contract-controller-messenger":78,"./network-enablement-controller-messenger":80,"./network-order-controller-messenger":81,"./nft-controller-messenger":82,"./nft-detection-controller-messenger":83,"./token-rates-controller-messenger":84},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAssetsContractControllerInitMessenger",{enumerable:!0,get:function(){return s.getAssetsContractControllerInitMessenger}}),Object.defineProperty(n,"getAssetsContractControllerMessenger",{enumerable:!0,get:function(){return s.getAssetsContractControllerMessenger}}),Object.defineProperty(n,"getNetworkEnablementControllerInitMessenger",{enumerable:!0,get:function(){return l.getNetworkEnablementControllerInitMessenger}}),Object.defineProperty(n,"getNetworkEnablementControllerMessenger",{enumerable:!0,get:function(){return l.getNetworkEnablementControllerMessenger}}),Object.defineProperty(n,"getNetworkOrderControllerMessenger",{enumerable:!0,get:function(){return a.getNetworkOrderControllerMessenger}}),Object.defineProperty(n,"getNftControllerInitMessenger",{enumerable:!0,get:function(){return i.getNftControllerInitMessenger}}),Object.defineProperty(n,"getNftControllerMessenger",{enumerable:!0,get:function(){return i.getNftControllerMessenger}}),Object.defineProperty(n,"getNftDetectionControllerMessenger",{enumerable:!0,get:function(){return o.getNftDetectionControllerMessenger}}),Object.defineProperty(n,"getTokenRatesControllerInitMessenger",{enumerable:!0,get:function(){return r.getTokenRatesControllerInitMessenger}}),Object.defineProperty(n,"getTokenRatesControllerMessenger",{enumerable:!0,get:function(){return r.getTokenRatesControllerMessenger}});var r=e("./token-rates-controller-messenger"),i=e("./nft-controller-messenger"),o=e("./nft-detection-controller-messenger"),s=e("./assets-contract-controller-messenger"),a=e("./network-order-controller-messenger"),l=e("./network-enablement-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/index.ts"}],[80,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNetworkEnablementControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NetworkEnablementControllerInit",parent:e});return e.delegate({messenger:t,actions:["AccountTreeController:getAccountsFromSelectedAccountGroup"],events:["AccountsController:selectedAccountChange","AccountTreeController:selectedAccountGroupChange"]}),t},n.getNetworkEnablementControllerMessenger=function(e){const t=new r.Messenger({namespace:"NetworkEnablementController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getState","MultichainNetworkController:getState"],events:["NetworkController:networkAdded","NetworkController:networkRemoved","NetworkController:stateChange","TransactionController:transactionSubmitted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/network-enablement-controller-messenger.ts"}],[81,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNetworkOrderControllerMessenger=function(e){const t=new r.Messenger({namespace:"NetworkOrderController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","NetworkController:networkRemoved"],actions:["NetworkController:getState","NetworkController:setActiveNetwork"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/network-order-controller-messenger.ts"}],[82,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNftControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NftControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getNftControllerMessenger=function(e){const t=new r.Messenger({namespace:"NftController",parent:e});return e.delegate({messenger:t,events:["PreferencesController:stateChange","AccountsController:selectedEvmAccountChange"],actions:["ApprovalController:addRequest","NetworkController:getNetworkClientById","AccountsController:getSelectedAccount","AccountsController:getAccount","AssetsContractController:getERC721AssetName","AssetsContractController:getERC721AssetSymbol","AssetsContractController:getERC721TokenURI","AssetsContractController:getERC721OwnerOf","AssetsContractController:getERC1155BalanceOf","AssetsContractController:getERC1155TokenURI","NetworkController:findNetworkClientIdByChainId","PhishingController:bulkScanUrls"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/nft-controller-messenger.ts"}],[83,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNftDetectionControllerMessenger=function(e){const t=new r.Messenger({namespace:"NftDetectionController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","PreferencesController:stateChange"],actions:["ApprovalController:addRequest","NetworkController:getState","NetworkController:getNetworkClientById","AccountsController:getSelectedAccount","NetworkController:findNetworkClientIdByChainId","PhishingController:bulkScanUrls"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/nft-detection-controller-messenger.ts"}],[84,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenRatesControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenRatesControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"],events:["PreferencesController:stateChange"]}),t},n.getTokenRatesControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenRatesController",parent:e});return e.delegate({messenger:t,actions:["TokensController:getState","NetworkController:getState","NetworkEnablementController:getState"],events:["TokensController:stateChange","NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/assets/token-rates-controller-messenger.ts"}],[85,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBridgeControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"BridgeControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getBridgeControllerMessenger=function(e){const t=new r.Messenger({namespace:"BridgeController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccountByAddress","SnapController:handleRequest","NetworkController:getNetworkClientById","NetworkController:findNetworkClientIdByChainId","TokenRatesController:getState","MultichainAssetsRatesController:getState","RemoteFeatureFlagController:getState","CurrencyRateController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/bridge-controller-messenger.ts"}],[86,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBridgeStatusControllerMessenger=function(e){const t=new r.Messenger({namespace:"BridgeStatusController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccountByAddress","NetworkController:getNetworkClientById","NetworkController:findNetworkClientIdByChainId","NetworkController:getState","BridgeController:trackUnifiedSwapBridgeEvent","BridgeController:stopPollingForQuotes","GasFeeController:getState","SnapController:handleRequest","TransactionController:getState","RemoteFeatureFlagController:getState"],events:["MultichainTransactionsController:transactionConfirmed","TransactionController:transactionFailed","TransactionController:transactionConfirmed"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/bridge-status-controller-messenger.ts"}],[87,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getClaimsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"ClaimsControllerInit",parent:e});return e.delegate({messenger:t,events:[],actions:[]}),t},n.getClaimsControllerMessenger=function(e){const t=new r.Messenger({namespace:"ClaimsController",parent:e});return e.delegate({messenger:t,actions:["ClaimsService:fetchClaimsConfigurations","ClaimsService:getClaimsApiUrl","ClaimsService:getRequestHeaders","ClaimsService:generateMessageForClaimSignature","ClaimsService:getClaims","KeyringController:signPersonalMessage"],events:[]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/claims/claims-controller-messenger.ts"}],[876,{"@firebase/component":877,"@firebase/logger":879,"@firebase/util":882,idb:5008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"FirebaseError",{enumerable:!0,get:function(){return o.FirebaseError}}),n._DEFAULT_ENTRY_NAME=n.SDK_VERSION=void 0,n._addComponent=H,n._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},n._apps=void 0,n._clearComponents=function(){F.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n._components=void 0,n._getProvider=V,n._isFirebaseApp=W,n._isFirebaseServerApp=function(e){return e.settings!==undefined},n._registerComponent=q,n._removeServiceInstance=function(e,t,n=$){V(e,t).clearInstance(n)},n._serverApps=void 0,n.deleteApp=X,n.getApp=function(e=$){const t=D.get(e);if(!t&&e===$&&(0,o.getDefaultAppConfig)())return J();if(!t)throw z.create("no-app",{appName:e});return t},n.getApps=function(){return Array.from(D.values())},n.initializeApp=J,n.initializeServerApp=function(e,t){if((0,o.isBrowser)()&&!(0,o.isWebWorker)())throw z.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===undefined&&(t.automaticDataCollectionEnabled=!1);let n;n=W(e)?e.options:e;const i=Object.assign(Object.assign({},t),n);i.releaseOnDeref!==undefined&&delete i.releaseOnDeref;if(t.releaseOnDeref!==undefined&&"undefined"==typeof FinalizationRegistry)throw z.create("finalization-registry-not-supported",{});const s=""+(l=JSON.stringify(i),[...l].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0)),a=U.get(s);var l;if(a)return a.incRefCount(t.releaseOnDeref),a;const c=new r.ComponentContainer(s);for(const e of F.values())c.addComponent(e);const u=new Y(n,t,s,c);return U.set(s,u),u},n.onLog=function(e,t){if(null!==e&&"function"!=typeof e)throw z.create("invalid-log-argument");(0,i.setUserLogHandler)(e,t)},n.registerVersion=Z,n.setLogLevel=function(e){(0,i.setLogLevel)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var r=e("@firebase/component"),i=e("@firebase/logger"),o=e("@firebase/util"),s=e("idb");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",c="0.10.18",u=new i.Logger("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",f="@firebase/analytics",p="@firebase/app-check-compat",g="@firebase/app-check",m="@firebase/auth",b="@firebase/auth-compat",y="@firebase/database",w="@firebase/data-connect",k="@firebase/database-compat",v="@firebase/functions",_="@firebase/functions-compat",C="@firebase/installations",E="@firebase/installations-compat",S="@firebase/messaging",T="@firebase/messaging-compat",A="@firebase/performance",M="@firebase/performance-compat",I="@firebase/remote-config",O="@firebase/remote-config-compat",P="@firebase/storage",x="@firebase/storage-compat",N="@firebase/firestore",R="@firebase/vertexai",j="@firebase/firestore-compat",L="firebase",$=n._DEFAULT_ENTRY_NAME="[DEFAULT]",B={[l]:"fire-core",[d]:"fire-core-compat",[f]:"fire-analytics",[h]:"fire-analytics-compat",[g]:"fire-app-check",[p]:"fire-app-check-compat",[m]:"fire-auth",[b]:"fire-auth-compat",[y]:"fire-rtdb",[w]:"fire-data-connect",[k]:"fire-rtdb-compat",[v]:"fire-fn",[_]:"fire-fn-compat",[C]:"fire-iid",[E]:"fire-iid-compat",[S]:"fire-fcm",[T]:"fire-fcm-compat",[A]:"fire-perf",[M]:"fire-perf-compat",[I]:"fire-rc",[O]:"fire-rc-compat",[P]:"fire-gcs",[x]:"fire-gcs-compat",[N]:"fire-fst",[j]:"fire-fst-compat",[R]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},D=n._apps=new Map,U=n._serverApps=new Map,F=n._components=new Map;function H(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function q(e){const t=e.name;if(F.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;F.set(t,e);for(const t of D.values())H(t,e);for(const t of U.values())H(t,e);return!0}function V(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e){return e.options!==undefined}const G={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},z=new o.ErrorFactory("app","Firebase",G);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class K{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw z.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y extends K{constructor(e,t,n,r){const i=t.automaticDataCollectionEnabled!==undefined&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(e.apiKey!==undefined)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=undefined,t.releaseOnDeref=undefined,Z(l,c,"serverapp")}toJSON(){return undefined}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==undefined&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){X(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw z.create("server-app-deleted")}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.SDK_VERSION="11.2.0";function J(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:$,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw z.create("bad-app-name",{appName:String(s)});if(n||(n=(0,o.getDefaultAppConfig)()),!n)throw z.create("no-options");const a=D.get(s);if(a){if((0,o.deepEqual)(n,a.options)&&(0,o.deepEqual)(i,a.config))return a;throw z.create("duplicate-app",{appName:s})}const l=new r.ComponentContainer(s);for(const e of F.values())l.addComponent(e);const c=new K(n,i,l);return D.set(s,c),c}async function X(e){let t=!1;const n=e.name;if(D.has(n))t=!0,D.delete(n);else if(U.has(n)){e.decRefCount()<=0&&(U.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Z(e,t,n){var i;let o=null!==(i=B[e])&&void 0!==i?i:e;n&&(o+=`-${n}`);const s=o.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${o}" with version "${t}":`];return s&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}q(new r.Component(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}const Q="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=(0,s.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Q)}catch(e){console.warn(e)}}}).catch(e=>{throw z.create("idb-open",{originalErrorMessage:e.message})})),ee}async function ne(e,t){try{const n=(await te()).transaction(Q,"readwrite"),r=n.objectStore(Q);await r.put(t,re(e)),await n.done}catch(e){if(e instanceof o.FirebaseError)u.warn(e.message);else{const t=z.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});u.warn(t.message)}}}function re(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oe();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(e){u.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=oe(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ae(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ae(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return u.warn(e),""}}}function oe(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.isIndexedDBAvailable)()&&(0,o.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await te()).transaction(Q),n=await t.objectStore(Q).get(re(e));return await t.done,n}catch(e){if(e instanceof o.FirebaseError)u.warn(e.message);else{const t=z.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});u.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ae(e){return(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;le="",q(new r.Component("platform-logger",e=>new a(e),"PRIVATE")),q(new r.Component("heartbeat",e=>new ie(e),"PRIVATE")),Z(l,c,le),Z(l,c,"esm2017"),Z("fire-js","")}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app",file:"node_modules/@firebase/app/dist/esm/index.esm2017.js"}],[877,{"@firebase/util":882},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Provider=n.ComponentContainer=n.Component=void 0;var r=e("@firebase/util");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.Component=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const i="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===i?undefined:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=i){return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}n.Provider=o;n.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app>@firebase/component",file:"node_modules/@firebase/component/dist/esm/index.esm2017.js"}],[878,{"@firebase/app":876,"@firebase/component":877,"@firebase/util":882,idb:5008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.deleteInstallations=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e){const{appConfig:t}=e,n=await F(t,e=>e&&0===e.registrationStatus?undefined:e);if(n){if(1===n.registrationStatus)throw g.create("delete-pending-registration");if(2===n.registrationStatus){if(!navigator.onLine)throw g.create("app-offline");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
await async function(e,t){const n=function(e,{fid:t}){return`${b(e)}/${t}`}(e,t),r=v(e,t),i={method:"DELETE",headers:r},o=await _(()=>fetch(n,i));if(!o.ok)throw await w("Delete Installation",o)}(t,n),await U(t)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.getId=J,n.getInstallations=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e=(0,r.getApp)()){return(0,r._getProvider)(e,"installations").getImmediate()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.getToken=X,n.onIdChange=function(e,t){const{appConfig:n}=e;return function(e,t){x();const n=A(e);let r=M.get(n);r||(r=new Set,M.set(n,r));r.add(t)}(n,t),()=>{!function(e,t){const n=A(e),r=M.get(n);if(!r)return;r.delete(t),0===r.size&&M.delete(n);N()}(n,t)}};var r=e("@firebase/app"),i=e("@firebase/component"),o=e("@firebase/util"),s=e("idb");const a="@firebase/installations",l="0.6.12",c=1e4,u=`w:${l}`,d="FIS_v2",h="https://firebaseinstallations.googleapis.com/v1",f=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},g=new o.ErrorFactory("installations","Installations",p);function m(e){return e instanceof o.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b({projectId:e}){return`${h}/projects/${e}/installations`}function y(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function w(e,t){const n=(await t.json()).error;return g.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function k({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function v(e,{refreshToken:t}){const n=k(e);return n.append("Authorization",function(e){return`${d} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),n}async function _(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function C(e){return new Promise(t=>{setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const E=/^[cdef][\w-]{21}$/,S="";function T(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return E.test(t)?t:S}catch(e){return S}}function A(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=new Map;function I(e,t){const n=A(e);O(n,t),function(e,t){const n=x();n&&n.postMessage({key:e,fid:t});N()}(n,t)}function O(e,t){const n=M.get(e);if(n)for(const e of n)e(t)}let P=null;function x(){return!P&&"BroadcastChannel"in self&&(P=new BroadcastChannel("[Firebase] FID Change"),P.onmessage=e=>{O(e.data.key,e.data.fid)}),P}function N(){0===M.size&&P&&(P.close(),P=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R="firebase-installations-database",j=1,L="firebase-installations-store";let $=null;function B(){return $||($=(0,s.openDB)(R,j,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(L)}})),$}async function D(e,t){const n=A(e),r=(await B()).transaction(L,"readwrite"),i=r.objectStore(L),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||I(e,t.fid),t}async function U(e){const t=A(e),n=(await B()).transaction(L,"readwrite");await n.objectStore(L).delete(t),await n.done}async function F(e,t){const n=A(e),r=(await B()).transaction(L,"readwrite"),i=r.objectStore(L),o=await i.get(n),s=t(o);return s===undefined?await i.delete(n):await i.put(s,n),await r.done,!s||o&&o.fid===s.fid||I(e,s.fid),s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(e){let t;const n=await F(e.appConfig,n=>{const r=function(e){const t=e||{fid:T(),registrationStatus:0};return W(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=b(e),i=k(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const s={fid:n,authVersion:d,appId:e.appId,sdkVersion:u},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await _(()=>fetch(r,a));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:y(e.authToken)}}throw await w("Create Installation",l)}(e,t);return D(e.appConfig,n)}catch(n){throw m(n)&&409===n.customData.serverCode?await U(e.appConfig):await D(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:q(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===S?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function q(e){let t=await V(e.appConfig);for(;1===t.registrationStatus;)await C(100),t=await V(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await H(e);return n||t}return t}function V(e){return F(e,e=>{if(!e)throw g.create("installation-not-found");return W(e)})}function W(e){return 1===(t=e).registrationStatus&&t.registrationTime+c<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function G({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${b(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,n),i=v(e,n),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const s={installation:{sdkVersion:u,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await _(()=>fetch(r,a));if(l.ok){return y(await l.json())}throw await w("Generate Auth Token",l)}async function z(e,t=!1){let n;const r=await F(e.appConfig,r=>{if(!Y(r))throw g.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+f}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await K(e.appConfig);for(;1===n.authToken.requestStatus;)await C(100),n=await K(e.appConfig);const r=n.authToken;return 0===r.requestStatus?z(e,t):r}(e,t),r;{if(!navigator.onLine)throw g.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await G(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await D(e.appConfig,r),n}catch(n){if(!m(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await D(e.appConfig,n)}else await U(e.appConfig);throw n}}(e,t),t}});return n?await n:r.authToken}function K(e){return F(e,e=>{if(!Y(e))throw g.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+c<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})}function Y(e){return e!==undefined&&2===e.registrationStatus}async function J(e){const t=e,{installationEntry:n,registrationPromise:r}=await H(t);return r?r.catch(console.error):z(t).catch(console.error),n.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await H(e);t&&await t}(n);return(await z(n,t)).token}function Z(e){return g.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q="installations",ee=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Z("App Configuration");if(!e.name)throw Z("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Z(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},te=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r._getProvider)(t,Q).getImmediate();return{getId:()=>J(n),getToken:e=>X(n,e)}};(0,r._registerComponent)(new i.Component(Q,ee,"PUBLIC")),(0,r._registerComponent)(new i.Component("installations-internal",te,"PRIVATE")),(0,r.registerVersion)(a,l),(0,r.registerVersion)(a,l,"esm2017")}}},{package:"@metamask/notification-services-controller>firebase>@firebase/installations",file:"node_modules/@firebase/installations/dist/esm/index.esm2017.js"}],[879,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=[];var i;n.LogLevel=void 0,(i=n.LogLevel||(n.LogLevel={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";const o={debug:n.LogLevel.DEBUG,verbose:n.LogLevel.VERBOSE,info:n.LogLevel.INFO,warn:n.LogLevel.WARN,error:n.LogLevel.ERROR,silent:n.LogLevel.SILENT},s=n.LogLevel.INFO,a={[n.LogLevel.DEBUG]:"log",[n.LogLevel.VERBOSE]:"log",[n.LogLevel.INFO]:"info",[n.LogLevel.WARN]:"warn",[n.LogLevel.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};n.Logger=class{constructor(e){this.name=e,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n.LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.LogLevel.DEBUG,...e),this._logHandler(this,n.LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.LogLevel.VERBOSE,...e),this._logHandler(this,n.LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.LogLevel.INFO,...e),this._logHandler(this,n.LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.LogLevel.WARN,...e),this._logHandler(this,n.LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.LogLevel.ERROR,...e),this._logHandler(this,n.LogLevel.ERROR,...e)}},n.setLogLevel=function(e){r.forEach(t=>{t.setLogLevel(e)})},n.setUserLogHandler=function(e,t){for(const i of r){let r=null;t&&t.level&&(r=o[t.level]),i.userLogHandler=null===e?null:(t,i,...o)=>{const s=o.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(null!=r?r:t.logLevel)&&e({level:n.LogLevel[i].toLowerCase(),message:s,args:o,type:t.name})}}}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app>@firebase/logger",file:"node_modules/@firebase/logger/dist/index.cjs.js"}],[88,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getClaimsServiceInitMessenger=function(e){return new r.Messenger({namespace:"ClaimsServiceInit",parent:e})},n.getClaimsServiceMessenger=function(e){const t=new r.Messenger({namespace:"ClaimsService",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"],events:[]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/claims/claims-service-messenger.ts"}]],[],{});