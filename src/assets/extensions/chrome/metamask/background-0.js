LavaPack.loadBundle([[10,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=n.COOKIE_ID_MARKETING_WHITELIST=void 0;const r=n.COOKIE_ID_MARKETING_WHITELIST=["https://metamask.io","https://learn.metamask.io","https://mmi-support.zendesk.com","https://community.metamask.io","https://support.metamask.io"];n.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=r.map(e=>new URL(e).origin)}}},{package:"$root$",file:"app/scripts/constants/marketing-site-whitelist.ts"}],[100,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEncryptionPublicKeyControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"EncryptionPublicKeyControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getEncryptionPublicKey","MetaMetricsController:trackEvent"]}),t},n.getEncryptionPublicKeyControllerMessenger=function(e){const t=new r.Messenger({namespace:"EncryptionPublicKeyController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest"],events:["EncryptionPublicKeyManager:stateChange","EncryptionPublicKeyManager:unapprovedMessage"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/encryption-public-key-controller-messenger.ts"}],[101,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEncryptionPublicKeyManagerMessenger=function(e){return new r.Messenger({namespace:"EncryptionPublicKeyManager",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/encryption-public-key-manager-messenger.ts"}],[102,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEnsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"EnsControllerInit",parent:e});return e.delegate({messenger:t,events:["NetworkController:networkDidChange"]}),t},n.getEnsControllerMessenger=function(e){const t=new r.Messenger({namespace:"EnsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ens-controller-messenger.ts"}],[103,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getErrorReportingServiceMessenger=function(e){return new r.Messenger({namespace:"ErrorReportingService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/error-reporting-service-messenger.ts"}],[104,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGasFeeControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"GasFeeControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"],events:["NetworkController:networkDidChange"]}),t},n.getGasFeeControllerMessenger=function(e){const t=new r.Messenger({namespace:"GasFeeController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getState"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gas-fee-controller-messenger.ts"}],[105,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGatorPermissionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"GatorPermissionsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:has"],events:["TransactionController:transactionApproved","TransactionController:transactionRejected","TransactionController:transactionConfirmed","TransactionController:transactionFailed","TransactionController:transactionDropped"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gator-permissions/gator-permissions-controller-messenger.ts"}],[106,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAuthenticationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId"]}),t},n.getAuthenticationControllerMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest"],events:["KeyringController:lock","KeyringController:unlock"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/authentication-controller-messenger.ts"}],[107,{"./authentication-controller-messenger":106,"./user-storage-controller-messenger":108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAuthenticationControllerInitMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerInitMessenger}}),Object.defineProperty(n,"getAuthenticationControllerMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerMessenger}}),Object.defineProperty(n,"getUserStorageControllerMessenger",{enumerable:!0,get:function(){return s.getUserStorageControllerMessenger}});var r=e("./authentication-controller-messenger"),s=e("./user-storage-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/index.ts"}],[108,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserStorageControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getUserStorageControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest","AuthenticationController:getBearerToken","AuthenticationController:getSessionProfile","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","AddressBookController:list","AddressBookController:set","AddressBookController:delete"],events:["KeyringController:lock","KeyringController:unlock","AddressBookController:contactUpdated","AddressBookController:contactDeleted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/user-storage-controller-messenger.ts"}],[109,{"./account-order-controller-messenger":64,"./account-tracker-controller-messenger":65,"./accounts":68,"./accounts-controller-messenger":66,"./accounts/institutional-snap-controller-messenger":69,"./address-book-controller-messenger":72,"./alert-controller-messenger":73,"./announcement-controller-messenger":74,"./app-metadata-controller-messenger":75,"./app-state-controller-messenger":76,"./approval-controller-messenger":77,"./assets":79,"./bridge-controller-messenger":85,"./bridge-status-controller-messenger":86,"./claims/claims-controller-messenger":87,"./claims/claims-service-messenger":88,"./connectivity":90,"./core-backend":93,"./currency-rate-controller-messenger":94,"./decrypt-message-controller-messenger":95,"./decrypt-message-manager-messenger":96,"./defi-positions":98,"./defi-positions/defi-positions-controller-messenger":97,"./delegation/delegation-controller-messenger":99,"./encryption-public-key-controller-messenger":100,"./encryption-public-key-manager-messenger":101,"./ens-controller-messenger":102,"./error-reporting-service-messenger":103,"./gas-fee-controller-messenger":104,"./gator-permissions/gator-permissions-controller-messenger":105,"./identity":107,"./identity/user-storage-controller-messenger":108,"./keyring-controller-messenger":110,"./logging-controller-messenger":111,"./metametrics-controller-messenger":112,"./metametrics-data-deletion-controller-messenger":113,"./multichain":114,"./name-controller-messenger":120,"./network-controller-messenger":121,"./notifications":122,"./onboarding-controller-messenger":125,"./permission-controller-messenger":126,"./permission-log-controller-messenger":127,"./phishing-controller-messenger":128,"./ppom-controller-messenger":129,"./preferences-controller-messenger":130,"./profile-metrics-controller-messenger":131,"./profile-metrics-service-messenger":132,"./rates-controller-messenger":133,"./remote-feature-flag-controller-messenger":134,"./reward-data-service-messenger":135,"./rewards-controller-messenger":136,"./seedless-onboarding":137,"./selected-network-controller-messenger":140,"./shield/shield-controller-messenger":141,"./signature-controller-messenger":142,"./smart-transactions-controller-messenger":143,"./snaps":146,"./static-assets-controller-messenger":155,"./storage-service-messenger":156,"./subject-metadata-controller-messenger":157,"./subscription":158,"./subscription/subscription-service-messenger":160,"./swaps-controller-messenger":161,"./token-balances-controller-messenger":162,"./token-detection-controller-messenger":163,"./token-list-controller-messenger":164,"./tokens-controller-messenger":165,"./transaction-controller-messenger":166,"./transaction-pay-controller-messenger":167,"./user-operation-controller-messenger":168,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CONTROLLER_MESSENGERS=void 0,Object.defineProperty(n,"getAccountOrderControllerMessenger",{enumerable:!0,get:function(){return Z.getAccountOrderControllerMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerInitMessenger",{enumerable:!0,get:function(){return j.getAccountTrackerControllerInitMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerMessenger",{enumerable:!0,get:function(){return j.getAccountTrackerControllerMessenger}}),Object.defineProperty(n,"getAccountsControllerMessenger",{enumerable:!0,get:function(){return ee.getAccountsControllerMessenger}}),Object.defineProperty(n,"getAddressBookControllerMessenger",{enumerable:!0,get:function(){return le.getAddressBookControllerMessenger}}),Object.defineProperty(n,"getAlertControllerMessenger",{enumerable:!0,get:function(){return ne.getAlertControllerMessenger}}),Object.defineProperty(n,"getAnnouncementControllerMessenger",{enumerable:!0,get:function(){return J.getAnnouncementControllerMessenger}}),Object.defineProperty(n,"getAppMetadataControllerMessenger",{enumerable:!0,get:function(){return oe.getAppMetadataControllerMessenger}}),Object.defineProperty(n,"getAppStateControllerMessenger",{enumerable:!0,get:function(){return W.getAppStateControllerMessenger}}),Object.defineProperty(n,"getApprovalControllerMessenger",{enumerable:!0,get:function(){return ae.getApprovalControllerMessenger}}),Object.defineProperty(n,"getBridgeControllerInitMessenger",{enumerable:!0,get:function(){return G.getBridgeControllerInitMessenger}}),Object.defineProperty(n,"getBridgeControllerMessenger",{enumerable:!0,get:function(){return G.getBridgeControllerMessenger}}),Object.defineProperty(n,"getBridgeStatusControllerMessenger",{enumerable:!0,get:function(){return q.getBridgeStatusControllerMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerInitMessenger",{enumerable:!0,get:function(){return R.getCurrencyRateControllerInitMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerMessenger",{enumerable:!0,get:function(){return R.getCurrencyRateControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerInitMessenger",{enumerable:!0,get:function(){return ue.getDecryptMessageControllerInitMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerMessenger",{enumerable:!0,get:function(){return ue.getDecryptMessageControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageManagerMessenger",{enumerable:!0,get:function(){return ce.getDecryptMessageManagerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerInitMessenger",{enumerable:!0,get:function(){return de.getEncryptionPublicKeyControllerInitMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerMessenger",{enumerable:!0,get:function(){return de.getEncryptionPublicKeyControllerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyManagerMessenger",{enumerable:!0,get:function(){return pe.getEncryptionPublicKeyManagerMessenger}}),Object.defineProperty(n,"getEnsControllerInitMessenger",{enumerable:!0,get:function(){return O.getEnsControllerInitMessenger}}),Object.defineProperty(n,"getEnsControllerMessenger",{enumerable:!0,get:function(){return O.getEnsControllerMessenger}}),Object.defineProperty(n,"getErrorReportingServiceMessenger",{enumerable:!0,get:function(){return ie.getErrorReportingServiceMessenger}}),Object.defineProperty(n,"getGasFeeControllerInitMessenger",{enumerable:!0,get:function(){return B.getGasFeeControllerInitMessenger}}),Object.defineProperty(n,"getGasFeeControllerMessenger",{enumerable:!0,get:function(){return B.getGasFeeControllerMessenger}}),Object.defineProperty(n,"getKeyringControllerInitMessenger",{enumerable:!0,get:function(){return Y.getKeyringControllerInitMessenger}}),Object.defineProperty(n,"getKeyringControllerMessenger",{enumerable:!0,get:function(){return Y.getKeyringControllerMessenger}}),Object.defineProperty(n,"getLoggingControllerMessenger",{enumerable:!0,get:function(){return se.getLoggingControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsControllerMessenger",{enumerable:!0,get:function(){return k.getMetaMetricsControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsDataDeletionControllerMessenger",{enumerable:!0,get:function(){return re.getMetaMetricsDataDeletionControllerMessenger}}),Object.defineProperty(n,"getNameControllerInitMessenger",{enumerable:!0,get:function(){return D.getNameControllerInitMessenger}}),Object.defineProperty(n,"getNameControllerMessenger",{enumerable:!0,get:function(){return D.getNameControllerMessenger}}),Object.defineProperty(n,"getNetworkControllerInitMessenger",{enumerable:!0,get:function(){return z.getNetworkControllerInitMessenger}}),Object.defineProperty(n,"getNetworkControllerMessenger",{enumerable:!0,get:function(){return z.getNetworkControllerMessenger}}),Object.defineProperty(n,"getOnboardingControllerMessenger",{enumerable:!0,get:function(){return F.getOnboardingControllerMessenger}}),Object.defineProperty(n,"getPermissionControllerInitMessenger",{enumerable:!0,get:function(){return K.getPermissionControllerInitMessenger}}),Object.defineProperty(n,"getPermissionControllerMessenger",{enumerable:!0,get:function(){return K.getPermissionControllerMessenger}}),Object.defineProperty(n,"getPermissionLogControllerMessenger",{enumerable:!0,get:function(){return Q.getPermissionLogControllerMessenger}}),Object.defineProperty(n,"getPhishingControllerMessenger",{enumerable:!0,get:function(){return te.getPhishingControllerMessenger}}),Object.defineProperty(n,"getPreferencesControllerMessenger",{enumerable:!0,get:function(){return $.getPreferencesControllerMessenger}}),Object.defineProperty(n,"getProfileMetricsControllerMessenger",{enumerable:!0,get:function(){return Se.getProfileMetricsControllerMessenger}}),Object.defineProperty(n,"getProfileMetricsServiceMessenger",{enumerable:!0,get:function(){return we.getProfileMetricsServiceMessenger}}),Object.defineProperty(n,"getRatesControllerMessenger",{enumerable:!0,get:function(){return P.getRatesControllerMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerInitMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerInitMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerMessenger",{enumerable:!0,get:function(){return x.getRemoteFeatureFlagControllerMessenger}}),Object.defineProperty(n,"getRewardsControllerMessenger",{enumerable:!0,get:function(){return U.getRewardsControllerMessenger}}),Object.defineProperty(n,"getSelectedNetworkControllerMessenger",{enumerable:!0,get:function(){return L.getSelectedNetworkControllerMessenger}}),Object.defineProperty(n,"getSignatureControllerInitMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerInitMessenger}}),Object.defineProperty(n,"getSignatureControllerMessenger",{enumerable:!0,get:function(){return ge.getSignatureControllerMessenger}}),Object.defineProperty(n,"getStaticAssetsControllerInitMessenger",{enumerable:!0,get:function(){return N.getStaticAssetsControllerInitMessenger}}),Object.defineProperty(n,"getStaticAssetsControllerMessenger",{enumerable:!0,get:function(){return N.getStaticAssetsControllerMessenger}}),Object.defineProperty(n,"getStorageServiceMessenger",{enumerable:!0,get:function(){return Ie.getStorageServiceMessenger}}),Object.defineProperty(n,"getSubjectMetadataControllerMessenger",{enumerable:!0,get:function(){return V.getSubjectMetadataControllerMessenger}}),Object.defineProperty(n,"getSwapsControllerInitMessenger",{enumerable:!0,get:function(){return H.getSwapsControllerInitMessenger}}),Object.defineProperty(n,"getSwapsControllerMessenger",{enumerable:!0,get:function(){return H.getSwapsControllerMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerInitMessenger",{enumerable:!0,get:function(){return M.getTokenBalancesControllerInitMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerMessenger",{enumerable:!0,get:function(){return M.getTokenBalancesControllerMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerInitMessenger",{enumerable:!0,get:function(){return y.getTokenDetectionControllerInitMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerMessenger",{enumerable:!0,get:function(){return y.getTokenDetectionControllerMessenger}}),Object.defineProperty(n,"getTokenListControllerInitMessenger",{enumerable:!0,get:function(){return v.getTokenListControllerInitMessenger}}),Object.defineProperty(n,"getTokenListControllerMessenger",{enumerable:!0,get:function(){return v.getTokenListControllerMessenger}}),Object.defineProperty(n,"getTokensControllerInitMessenger",{enumerable:!0,get:function(){return _.getTokensControllerInitMessenger}}),Object.defineProperty(n,"getTokensControllerMessenger",{enumerable:!0,get:function(){return _.getTokensControllerMessenger}}),Object.defineProperty(n,"getTransactionPayControllerInitMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerInitMessenger}}),Object.defineProperty(n,"getTransactionPayControllerMessenger",{enumerable:!0,get:function(){return a.getTransactionPayControllerMessenger}}),Object.defineProperty(n,"getUserOperationControllerInitMessenger",{enumerable:!0,get:function(){return me.getUserOperationControllerInitMessenger}}),Object.defineProperty(n,"getUserOperationControllerMessenger",{enumerable:!0,get:function(){return me.getUserOperationControllerMessenger}});var r=e("lodash"),s=e("./ppom-controller-messenger"),o=e("./snaps"),i=e("./transaction-controller-messenger"),a=e("./transaction-pay-controller-messenger"),l=e("./core-backend"),c=e("./multichain"),u=e("./accounts/institutional-snap-controller-messenger"),d=e("./identity"),p=e("./assets"),g=e("./notifications"),m=e("./defi-positions"),h=e("./defi-positions/defi-positions-controller-messenger"),f=e("./delegation/delegation-controller-messenger"),C=e("./accounts"),S=e("./seedless-onboarding"),w=e("./smart-transactions-controller-messenger"),I=e("./shield/shield-controller-messenger"),b=e("./subscription"),T=e("./connectivity"),E=e("./gator-permissions/gator-permissions-controller-messenger"),k=e("./metametrics-controller-messenger"),A=e("./identity/user-storage-controller-messenger"),v=e("./token-list-controller-messenger"),y=e("./token-detection-controller-messenger"),_=e("./tokens-controller-messenger"),M=e("./token-balances-controller-messenger"),N=e("./static-assets-controller-messenger"),P=e("./rates-controller-messenger"),R=e("./currency-rate-controller-messenger"),O=e("./ens-controller-messenger"),D=e("./name-controller-messenger"),B=e("./gas-fee-controller-messenger"),L=e("./selected-network-controller-messenger"),j=e("./account-tracker-controller-messenger"),F=e("./onboarding-controller-messenger"),x=e("./remote-feature-flag-controller-messenger"),U=e("./rewards-controller-messenger"),H=e("./swaps-controller-messenger"),G=e("./bridge-controller-messenger"),q=e("./bridge-status-controller-messenger"),$=e("./preferences-controller-messenger"),W=e("./app-state-controller-messenger"),K=e("./permission-controller-messenger"),V=e("./subject-metadata-controller-messenger"),Y=e("./keyring-controller-messenger"),Q=e("./permission-log-controller-messenger"),z=e("./network-controller-messenger"),X=e("./subscription/subscription-service-messenger"),J=e("./announcement-controller-messenger"),Z=e("./account-order-controller-messenger"),ee=e("./accounts-controller-messenger"),te=e("./phishing-controller-messenger"),ne=e("./alert-controller-messenger"),re=e("./metametrics-data-deletion-controller-messenger"),se=e("./logging-controller-messenger"),oe=e("./app-metadata-controller-messenger"),ie=e("./error-reporting-service-messenger"),ae=e("./approval-controller-messenger"),le=e("./address-book-controller-messenger"),ce=e("./decrypt-message-manager-messenger"),ue=e("./decrypt-message-controller-messenger"),de=e("./encryption-public-key-controller-messenger"),pe=e("./encryption-public-key-manager-messenger"),ge=e("./signature-controller-messenger"),me=e("./user-operation-controller-messenger"),he=e("./reward-data-service-messenger"),fe=e("./claims/claims-controller-messenger"),Ce=e("./claims/claims-service-messenger"),Se=e("./profile-metrics-controller-messenger"),we=e("./profile-metrics-service-messenger"),Ie=e("./storage-service-messenger");n.CONTROLLER_MESSENGERS={AccountOrderController:{getMessenger:Z.getAccountOrderControllerMessenger,getInitMessenger:r.noop},AccountTrackerController:{getMessenger:j.getAccountTrackerControllerMessenger,getInitMessenger:j.getAccountTrackerControllerInitMessenger},AccountsController:{getMessenger:ee.getAccountsControllerMessenger,getInitMessenger:r.noop},AddressBookController:{getMessenger:le.getAddressBookControllerMessenger,getInitMessenger:r.noop},AlertController:{getMessenger:ne.getAlertControllerMessenger,getInitMessenger:r.noop},AnnouncementController:{getMessenger:J.getAnnouncementControllerMessenger,getInitMessenger:r.noop},AppMetadataController:{getMessenger:oe.getAppMetadataControllerMessenger,getInitMessenger:r.noop},ApprovalController:{getMessenger:ae.getApprovalControllerMessenger,getInitMessenger:r.noop},AppStateController:{getMessenger:W.getAppStateControllerMessenger,getInitMessenger:r.noop},AuthenticationController:{getMessenger:d.getAuthenticationControllerMessenger,getInitMessenger:d.getAuthenticationControllerInitMessenger},BridgeController:{getMessenger:G.getBridgeControllerMessenger,getInitMessenger:G.getBridgeControllerInitMessenger},BridgeStatusController:{getMessenger:q.getBridgeStatusControllerMessenger,getInitMessenger:r.noop},ConnectivityController:{getMessenger:T.getConnectivityControllerMessenger,getInitMessenger:r.noop},ClaimsController:{getMessenger:fe.getClaimsControllerMessenger,getInitMessenger:fe.getClaimsControllerInitMessenger},ClaimsService:{getMessenger:Ce.getClaimsServiceMessenger,getInitMessenger:r.noop},CronjobController:{getMessenger:o.getCronjobControllerMessenger,getInitMessenger:r.noop},CurrencyRateController:{getMessenger:R.getCurrencyRateControllerMessenger,getInitMessenger:R.getCurrencyRateControllerInitMessenger},DecryptMessageController:{getMessenger:ue.getDecryptMessageControllerMessenger,getInitMessenger:ue.getDecryptMessageControllerInitMessenger},DecryptMessageManager:{getMessenger:ce.getDecryptMessageManagerMessenger,getInitMessenger:r.noop},DeFiPositionsController:{getMessenger:m.getDeFiPositionsControllerMessenger,getInitMessenger:h.getDeFiPositionsControllerInitMessenger},DelegationController:{getMessenger:f.getDelegationControllerMessenger,getInitMessenger:f.getDelegationControllerInitMessenger},EncryptionPublicKeyController:{getMessenger:de.getEncryptionPublicKeyControllerMessenger,getInitMessenger:de.getEncryptionPublicKeyControllerInitMessenger},EncryptionPublicKeyManager:{getMessenger:pe.getEncryptionPublicKeyManagerMessenger,getInitMessenger:r.noop},EnsController:{getMessenger:O.getEnsControllerMessenger,getInitMessenger:O.getEnsControllerInitMessenger},ErrorReportingService:{getMessenger:ie.getErrorReportingServiceMessenger,getInitMessenger:r.noop},StorageService:{getMessenger:Ie.getStorageServiceMessenger,getInitMessenger:r.noop},ExecutionService:{getMessenger:o.getExecutionServiceMessenger,getInitMessenger:r.noop},GasFeeController:{getMessenger:B.getGasFeeControllerMessenger,getInitMessenger:B.getGasFeeControllerInitMessenger},GatorPermissionsController:{getMessenger:E.getGatorPermissionsControllerMessenger,getInitMessenger:r.noop},InstitutionalSnapController:{getMessenger:u.getInstitutionalSnapControllerMessenger,getInitMessenger:r.noop},KeyringController:{getMessenger:Y.getKeyringControllerMessenger,getInitMessenger:Y.getKeyringControllerInitMessenger},LoggingController:{getMessenger:se.getLoggingControllerMessenger,getInitMessenger:r.noop},MetaMetricsController:{getMessenger:k.getMetaMetricsControllerMessenger,getInitMessenger:r.noop},MetaMetricsDataDeletionController:{getMessenger:re.getMetaMetricsDataDeletionControllerMessenger,getInitMessenger:r.noop},MultichainAssetsController:{getMessenger:c.getMultichainAssetsControllerMessenger,getInitMessenger:r.noop},MultichainAssetsRatesController:{getMessenger:c.getMultichainAssetsRatesControllerMessenger,getInitMessenger:r.noop},MultichainBalancesController:{getMessenger:c.getMultichainBalancesControllerMessenger,getInitMessenger:r.noop},MultichainTransactionsController:{getMessenger:c.getMultichainTransactionsControllerMessenger,getInitMessenger:r.noop},MultichainNetworkController:{getMessenger:c.getMultichainNetworkControllerMessenger,getInitMessenger:r.noop},MultichainRouter:{getMessenger:o.getMultichainRouterMessenger,getInitMessenger:r.noop},NameController:{getMessenger:D.getNameControllerMessenger,getInitMessenger:D.getNameControllerInitMessenger},NetworkController:{getMessenger:z.getNetworkControllerMessenger,getInitMessenger:z.getNetworkControllerInitMessenger},NotificationServicesController:{getMessenger:g.getNotificationServicesControllerMessenger,getInitMessenger:r.noop},NotificationServicesPushController:{getMessenger:g.getNotificationServicesPushControllerMessenger,getInitMessenger:g.getNotificationServicesPushControllerInitMessenger},OAuthService:{getMessenger:S.getOAuthServiceMessenger,getInitMessenger:r.noop},OnboardingController:{getMessenger:F.getOnboardingControllerMessenger,getInitMessenger:r.noop},PermissionController:{getMessenger:K.getPermissionControllerMessenger,getInitMessenger:K.getPermissionControllerInitMessenger},PermissionLogController:{getMessenger:Q.getPermissionLogControllerMessenger,getInitMessenger:r.noop},PhishingController:{getMessenger:te.getPhishingControllerMessenger,getInitMessenger:r.noop},RateLimitController:{getMessenger:o.getRateLimitControllerMessenger,getInitMessenger:o.getRateLimitControllerInitMessenger},RatesController:{getMessenger:P.getRatesControllerMessenger,getInitMessenger:r.noop},RemoteFeatureFlagController:{getMessenger:x.getRemoteFeatureFlagControllerMessenger,getInitMessenger:x.getRemoteFeatureFlagControllerInitMessenger},SeedlessOnboardingController:{getMessenger:S.getSeedlessOnboardingControllerMessenger,getInitMessenger:S.getSeedlessOnboardingControllerInitMessenger},SelectedNetworkController:{getMessenger:L.getSelectedNetworkControllerMessenger,getInitMessenger:r.noop},ShieldController:{getMessenger:I.getShieldControllerMessenger,getInitMessenger:I.getShieldControllerInitMessenger},SignatureController:{getMessenger:ge.getSignatureControllerMessenger,getInitMessenger:ge.getSignatureControllerInitMessenger},SnapsNameProvider:{getMessenger:o.getSnapsNameProviderMessenger,getInitMessenger:r.noop},SnapsRegistry:{getMessenger:o.getSnapsRegistryMessenger,getInitMessenger:r.noop},SnapController:{getMessenger:o.getSnapControllerMessenger,getInitMessenger:o.getSnapControllerInitMessenger},SnapInsightsController:{getMessenger:o.getSnapInsightsControllerMessenger,getInitMessenger:r.noop},SnapInterfaceController:{getMessenger:o.getSnapInterfaceControllerMessenger,getInitMessenger:r.noop},SnapKeyringBuilder:{getMessenger:C.getSnapKeyringBuilderMessenger,getInitMessenger:C.getSnapKeyringBuilderInitMessenger},StaticAssetsController:{getMessenger:N.getStaticAssetsControllerMessenger,getInitMessenger:N.getStaticAssetsControllerInitMessenger},SubjectMetadataController:{getMessenger:V.getSubjectMetadataControllerMessenger,getInitMessenger:r.noop},SubscriptionController:{getMessenger:b.getSubscriptionControllerMessenger,getInitMessenger:b.getSubscriptionControllerInitMessenger},SubscriptionService:{getMessenger:X.getSubscriptionServiceMessenger,getInitMessenger:r.noop},RewardsDataService:{getMessenger:he.getRewardsDataServiceMessenger,getInitMessenger:r.noop},RewardsController:{getMessenger:U.getRewardsControllerMessenger,getInitMessenger:U.getRewardsControllerInitMessenger},SwapsController:{getMessenger:H.getSwapsControllerMessenger,getInitMessenger:H.getSwapsControllerInitMessenger},PPOMController:{getMessenger:s.getPPOMControllerMessenger,getInitMessenger:s.getPPOMControllerInitMessenger},PreferencesController:{getMessenger:$.getPreferencesControllerMessenger,getInitMessenger:r.noop},TokenBalancesController:{getMessenger:M.getTokenBalancesControllerMessenger,getInitMessenger:M.getTokenBalancesControllerInitMessenger},TokenDetectionController:{getMessenger:y.getTokenDetectionControllerMessenger,getInitMessenger:y.getTokenDetectionControllerInitMessenger},TokenListController:{getMessenger:v.getTokenListControllerMessenger,getInitMessenger:v.getTokenListControllerInitMessenger},TokensController:{getMessenger:_.getTokensControllerMessenger,getInitMessenger:_.getTokensControllerInitMessenger},TransactionController:{getMessenger:i.getTransactionControllerMessenger,getInitMessenger:i.getTransactionControllerInitMessenger},TransactionPayController:{getMessenger:a.getTransactionPayControllerMessenger,getInitMessenger:a.getTransactionPayControllerInitMessenger},UserOperationController:{getMessenger:me.getUserOperationControllerMessenger,getInitMessenger:me.getUserOperationControllerInitMessenger},UserStorageController:{getMessenger:d.getUserStorageControllerMessenger,getInitMessenger:A.getUserStorageControllerInitMessenger},TokenRatesController:{getMessenger:p.getTokenRatesControllerMessenger,getInitMessenger:p.getTokenRatesControllerInitMessenger},NftController:{getMessenger:p.getNftControllerMessenger,getInitMessenger:p.getNftControllerInitMessenger},NftDetectionController:{getMessenger:p.getNftDetectionControllerMessenger,getInitMessenger:r.noop},AssetsContractController:{getMessenger:p.getAssetsContractControllerMessenger,getInitMessenger:p.getAssetsContractControllerInitMessenger},AccountTreeController:{getMessenger:C.getAccountTreeControllerMessenger,getInitMessenger:C.getAccountTreeControllerInitMessenger},WebSocketService:{getMessenger:o.getWebSocketServiceMessenger,getInitMessenger:r.noop},BackendWebSocketService:{getMessenger:l.getBackendWebSocketServiceMessenger,getInitMessenger:l.getBackendWebSocketServiceInitMessenger},AccountActivityService:{getMessenger:l.getAccountActivityServiceMessenger,getInitMessenger:r.noop},SmartTransactionsController:{getMessenger:w.getSmartTransactionsControllerMessenger,getInitMessenger:w.getSmartTransactionsControllerInitMessenger},MultichainAccountService:{getMessenger:C.getMultichainAccountServiceMessenger,getInitMessenger:C.getMultichainAccountServiceInitMessenger},NetworkOrderController:{getMessenger:p.getNetworkOrderControllerMessenger,getInitMessenger:r.noop},NetworkEnablementController:{getMessenger:p.getNetworkEnablementControllerMessenger,getInitMessenger:p.getNetworkEnablementControllerInitMessenger},ProfileMetricsController:{getMessenger:Se.getProfileMetricsControllerMessenger,getInitMessenger:r.noop},ProfileMetricsService:{getMessenger:we.getProfileMetricsServiceMessenger,getInitMessenger:r.noop}}}}},{package:"$root$",file:"app/scripts/controller-init/messengers/index.ts"}],[110,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getKeyringControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"KeyringControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:requestQrCodeScan"],events:[]}),t},n.getKeyringControllerMessenger=function(e){return new r.Messenger({namespace:"KeyringController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/keyring-controller-messenger.ts"}],[111,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getLoggingControllerMessenger=function(e){return new r.Messenger({namespace:"LoggingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/logging-controller-messenger.ts"}],[112,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange","NetworkController:networkDidChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-controller-messenger.ts"}],[113,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsDataDeletionControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsDataDeletionController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-data-deletion-controller-messenger.ts"}],[114,{"./multichain-assets-controller-messenger":115,"./multichain-assets-rates-controller-messenger":116,"./multichain-balances-controller-messenger":117,"./multichain-network-controller-messenger":118,"./multichain-transactions-controller-messenger":119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getMultichainAssetsControllerMessenger",{enumerable:!0,get:function(){return r.getMultichainAssetsControllerMessenger}}),Object.defineProperty(n,"getMultichainAssetsRatesControllerMessenger",{enumerable:!0,get:function(){return s.getMultichainAssetsRatesControllerMessenger}}),Object.defineProperty(n,"getMultichainBalancesControllerMessenger",{enumerable:!0,get:function(){return o.getMultichainBalancesControllerMessenger}}),Object.defineProperty(n,"getMultichainNetworkControllerMessenger",{enumerable:!0,get:function(){return a.getMultichainNetworkControllerMessenger}}),Object.defineProperty(n,"getMultichainTransactionsControllerMessenger",{enumerable:!0,get:function(){return i.getMultichainTransactionsControllerMessenger}});var r=e("./multichain-assets-controller-messenger"),s=e("./multichain-assets-rates-controller-messenger"),o=e("./multichain-balances-controller-messenger"),i=e("./multichain-transactions-controller-messenger"),a=e("./multichain-network-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/index.ts"}],[115,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountAssetListUpdated"],actions:["PermissionController:getPermissions","SnapController:handleRequest","SnapController:getAll","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-controller-messenger.ts"}],[116,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsRatesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsRatesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","KeyringController:lock","KeyringController:unlock","CurrencyRateController:stateChange","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","CurrencyRateController:getState","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-rates-controller-messenger.ts"}],[117,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainBalancesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountBalancesUpdated","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","MultichainAssetsController:getState","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-balances-controller-messenger.ts"}],[118,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:setActiveNetwork","NetworkController:getState","NetworkController:removeNetwork","NetworkController:findNetworkClientIdByChainId","NetworkController:getSelectedChainId","AccountsController:listMultichainAccounts"],events:["AccountsController:selectedAccountChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-network-controller-messenger.ts"}],[119,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainTransactionsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountTransactionsUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-transactions-controller-messenger.ts"}],[12,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u;Object.defineProperty(n,"__esModule",{value:!0}),n.PREINSTALLED_SNAPS_URLS=void 0;n.PREINSTALLED_SNAPS_URLS=[new URL("/snaps/permissions-kernel-snap.json",(null===(r=self.document)||void 0===r?void 0:r.baseURI)||self.location.href),new URL("/snaps/gator-permissions-snap.json",(null===(s=self.document)||void 0===s?void 0:s.baseURI)||self.location.href),new URL("/snaps/message-signing-snap.json",(null===(o=self.document)||void 0===o?void 0:o.baseURI)||self.location.href),new URL("/snaps/ens-resolver-snap.json",(null===(i=self.document)||void 0===i?void 0:i.baseURI)||self.location.href),new URL("/snaps/institutional-wallet-snap.json",(null===(a=self.document)||void 0===a?void 0:a.baseURI)||self.location.href),new URL("/snaps/bitcoin-wallet-snap.json",(null===(l=self.document)||void 0===l?void 0:l.baseURI)||self.location.href),new URL("/snaps/solana-wallet-snap.json",(null===(c=self.document)||void 0===c?void 0:c.baseURI)||self.location.href),new URL("/snaps/tron-wallet-snap.json",(null===(u=self.document)||void 0===u?void 0:u.baseURI)||self.location.href)]}}},{package:"$root$",file:"app/scripts/constants/snaps.ts"}],[120,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNameControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NameControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t},n.getNameControllerMessenger=function(e){return new r.Messenger({namespace:"NameController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/name-controller-messenger.ts"}],[121,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNetworkControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NetworkControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","MetaMetricsController:trackEvent","RemoteFeatureFlagController:getState"],events:["NetworkController:rpcEndpointUnavailable","NetworkController:rpcEndpointDegraded","RemoteFeatureFlagController:stateChange"]}),t},n.getNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"NetworkController",parent:e});return e.delegate({messenger:t,actions:["ConnectivityController:getState"],events:[]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/network-controller-messenger.ts"}],[122,{"./notification-services-controller-messenger":123,"./notification-services-push-controller-messenger":124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getNotificationServicesControllerMessenger",{enumerable:!0,get:function(){return r.getNotificationServicesControllerMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerInitMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerInitMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerMessenger}});var r=e("./notification-services-controller-messenger"),s=e("./notification-services-push-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/index.ts"}],[123,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","AuthenticationController:getBearerToken","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","NotificationServicesPushController:enablePushNotifications","NotificationServicesPushController:disablePushNotifications","NotificationServicesPushController:subscribeToPushNotifications"],events:["KeyringController:stateChange","KeyringController:lock","KeyringController:unlock","NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-controller-messenger.ts"}],[124,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesPushControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"],events:["NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:pushNotificationClicked"]}),t},n.getNotificationServicesPushControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushController",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-push-controller-messenger.ts"}],[125,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"OnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/onboarding-controller-messenger.ts"}],[126,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PermissionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:getUnlockPromise","AccountsController:listAccounts","CurrencyRateController:getState","KeyringController:getKeyringsByType","KeyringController:withKeyring","MultichainRouter:isSupportedScope","MultichainRouter:getSupportedAccounts","NetworkController:findNetworkClientIdByChainId","PhishingController:maybeUpdateState","PhishingController:testOrigin","PreferencesController:getState","RateLimitController:call","SnapController:clearSnapState","SnapController:get","SnapController:getSnapState","SnapController:handleRequest","SnapController:updateSnapState","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t},n.getPermissionControllerMessenger=function(e){const t=new r.Messenger({namespace:"PermissionController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:hasRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-controller-messenger.ts"}],[127,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionLogControllerMessenger=function(e){return new r.Messenger({namespace:"PermissionLogController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-log-controller-messenger.ts"}],[128,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPhishingControllerMessenger=function(e){const t=new r.Messenger({namespace:"PhishingController",parent:e});return e.delegate({messenger:t,events:["TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/phishing-controller-messenger.ts"}],[129,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPPOMControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PPOMControllerInit",parent:e});return e.delegate({messenger:t,events:["PreferencesController:stateChange"],actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getPPOMControllerMessenger=function(e){const t=new r.Messenger({namespace:"PPOMController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","NetworkController:networkDidChange"],actions:["NetworkController:getNetworkClientById"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ppom-controller-messenger.ts"}],[13,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PHISHING_WARNING_PAGE=n.PHISHING_STREAM=n.PHISHING_SAFELIST=n.METAMASK_INPAGE=n.METAMASK_EIP_1193_PROVIDER=n.METAMASK_COOKIE_HANDLER=n.METAMASK_CAIP_MULTICHAIN_PROVIDER=n.LEGACY_PUBLIC_CONFIG=n.LEGACY_PROVIDER=n.LEGACY_INPAGE=n.LEGACY_CONTENT_SCRIPT=n.CONTENT_SCRIPT=void 0;n.CONTENT_SCRIPT="metamask-contentscript",n.METAMASK_INPAGE="metamask-inpage",n.PHISHING_WARNING_PAGE="metamask-phishing-warning-page",n.METAMASK_COOKIE_HANDLER="metamask-cookie-handler",n.METAMASK_EIP_1193_PROVIDER="metamask-provider",n.METAMASK_CAIP_MULTICHAIN_PROVIDER="metamask-multichain-provider",n.PHISHING_SAFELIST="metamask-phishing-safelist",n.PHISHING_STREAM="phishing",n.LEGACY_CONTENT_SCRIPT="contentscript",n.LEGACY_INPAGE="inpage",n.LEGACY_PROVIDER="provider",n.LEGACY_PUBLIC_CONFIG="publicConfig"}}},{package:"$root$",file:"app/scripts/constants/stream.ts"}],[130,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPreferencesControllerMessenger=function(e){const t=new r.Messenger({namespace:"PreferencesController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:setSelectedAccount","AccountsController:getSelectedAccount","AccountsController:getAccountByAddress","AccountsController:setAccountName","NetworkController:getState"],events:["AccountsController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/preferences-controller-messenger.ts"}],[131,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProfileMetricsControllerMessenger=function(e){const t=new r.Messenger({namespace:"ProfileMetricsController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ProfileMetricsService:submitMetrics"],events:["AccountsController:accountAdded","AccountsController:accountRemoved","KeyringController:lock","KeyringController:unlock","TransactionController:transactionSubmitted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-controller-messenger.ts"}],[132,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProfileMetricsServiceMessenger=function(e){const t=new r.Messenger({namespace:"ProfileMetricsService",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/profile-metrics-service-messenger.ts"}],[133,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRatesControllerMessenger=function(e){return new r.Messenger({namespace:"RatesController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rates-controller-messenger.ts"}],[134,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRemoteFeatureFlagControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RemoteFeatureFlagControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","PreferencesController:getState","OnboardingController:getState"],events:["PreferencesController:stateChange","OnboardingController:stateChange"]}),t},n.getRemoteFeatureFlagControllerMessenger=function(e){return new r.Messenger({namespace:"RemoteFeatureFlagController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/remote-feature-flag-controller-messenger.ts"}],[135,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsDataServiceMessenger=function(e){const t=new r.Messenger({namespace:"RewardsDataService",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/reward-data-service-messenger.ts"}],[1353,{"@metamask/base-controller":1520,"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=n.controllerName=n.AddressType=void 0;const i=e("@metamask/base-controller"),a=e("@metamask/controller-utils");var l;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(l||(n.AddressType=l={})),n.controllerName="AddressBookController";const c={addressBook:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};n.getDefaultAddressBookControllerState=()=>({addressBook:{}});class u extends i.BaseController{constructor({messenger:e,state:t}){const i={...(0,n.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:c,name:n.controllerName,state:i}),r.add(this),o(this,r,"m",s).call(this)}list(){const{addressBook:e}=this.state;return Object.keys(e).reduce((t,n)=>{const r=n;return[...t,...Object.values(e[r])]},[])}clear(){this.update(e=>{e.addressBook={}})}delete(e,t){if(t=(0,a.toChecksumHexAddress)(t),!([e,t].every(e=>(0,a.isSafeDynamicKey)(e))&&(0,a.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t]))return!1;const n={...this.state.addressBook[e][t]};return this.update(n=>{const r=n.addressBook[e];r?.[t]&&(delete r[t],0===Object.keys(r).length&&delete n.addressBook[e])}),"*"!==String(e)&&this.messenger.publish("AddressBookController:contactDeleted",n),!0}set(e,t,n=(0,a.toHex)(1),r="",s){if(e=(0,a.toChecksumHexAddress)(e),!(0,a.isValidHexAddress)(e))return!1;const o={address:e,chainId:n,isEns:!1,memo:r,name:t,addressType:s,lastUpdatedAt:Date.now()},i=(0,a.normalizeEnsName)(t);return i&&(o.name=i,o.isEns=!0),this.update(t=>{t.addressBook={...this.state.addressBook,[n]:{...this.state.addressBook[n],[e]:o}}}),"*"!==String(n)&&this.messenger.publish("AddressBookController:contactUpdated",o),!0}}n.AddressBookController=u,r=new WeakSet,s=function(){this.messenger.registerActionHandler(`${n.controllerName}:list`,this.list.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:set`,this.set.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:delete`,this.delete.bind(this))},n.default=u}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1354,{"./AddressBookController.cjs":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=void 0;var r=e("./AddressBookController.cjs");Object.defineProperty(n,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return r.getDefaultAddressBookControllerState}}),Object.defineProperty(n,"AddressBookController",{enumerable:!0,get:function(){return r.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1355,{"@metamask/base-controller":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;const i=e("@metamask/base-controller"),a={announcements:{}},l={announcements:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class c extends i.BaseController{constructor({messenger:e,state:t,allAnnouncements:n}){const i={...a,...t};super({messenger:e,metadata:l,name:"AnnouncementController",state:i}),r.add(this),o(this,r,"m",s).call(this,n)}resetViewed(){this.update(({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1})}updateViewed(e){this.update(({announcements:t})=>{for(const n of Object.keys(e).map(Number))t[n].isShown=e[n]})}}n.AnnouncementController=c,r=new WeakSet,s=function(e){this.update(t=>{Object.values(e).forEach(e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}})})}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1356,{"./AnnouncementController.cjs":1355},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;var r=e("./AnnouncementController.cjs");Object.defineProperty(n,"AnnouncementController",{enumerable:!0,get:function(){return r.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[136,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RewardsControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState","PreferencesController:getState"]}),t},n.getRewardsControllerMessenger=function(e){const t=new r.Messenger({namespace:s,parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedMultichainAccount","AccountTreeController:getAccountsFromSelectedAccountGroup","AccountsController:listMultichainAccounts","KeyringController:signPersonalMessage","RewardsDataService:login","RewardsDataService:estimatePoints","RewardsDataService:getSeasonStatus","RewardsDataService:fetchGeoLocation","RewardsDataService:mobileOptin","RewardsDataService:validateReferralCode","RewardsDataService:mobileJoin","RewardsDataService:getOptInStatus","RewardsDataService:getSeasonMetadata","RewardsDataService:getDiscoverSeasons","SnapController:handleRequest"],events:["AccountTreeController:selectedAccountGroupChange","KeyringController:unlock"]}),t};var r=e("@metamask/messenger");const s="RewardsController"}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rewards-controller-messenger.ts"}],[137,{"./oauth-service-messenger":138,"./seedless-onboarding-controller-messenger":139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getOAuthServiceMessenger",{enumerable:!0,get:function(){return r.getOAuthServiceMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerInitMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerInitMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerMessenger}});var r=e("./oauth-service-messenger"),s=e("./seedless-onboarding-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/index.ts"}],[138,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOAuthServiceMessenger=function(e){const t=new r.Messenger({namespace:"OAuthService",parent:e});return e.delegate({messenger:t,actions:["SeedlessOnboardingController:getState","OnboardingController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/oauth-service-messenger.ts"}],[139,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSeedlessOnboardingControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SeedlessOnboardingControllerInit",parent:e});return e.delegate({messenger:t,actions:["OAuthService:getNewRefreshToken","OAuthService:revokeRefreshToken","OAuthService:renewRefreshToken"]}),t},n.getSeedlessOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"SeedlessOnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/seedless-onboarding-controller-messenger.ts"}],[14,{"../controllers/account-order":224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderControllerInit=void 0;var r=e("../controllers/account-order");n.AccountOrderControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountOrderController({messenger:e,state:t.AccountOrderController})})}}},{package:"$root$",file:"app/scripts/controller-init/account-order-controller-init.ts"}],[140,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"SelectedNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","NetworkController:getSelectedNetworkClient","PermissionController:hasPermissions","PermissionController:getSubjectNames"],events:["NetworkController:stateChange","PermissionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/selected-network-controller-messenger.ts"}],[141,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getShieldControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"ShieldControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getShieldControllerMessenger=function(e){const t=new r.Messenger({namespace:"ShieldController",parent:e});return e.delegate({messenger:t,events:["SignatureController:stateChange","TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/shield/shield-controller-messenger.ts"}],[142,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSignatureControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SignatureControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getSignatureControllerMessenger=function(e){const t=new r.Messenger({namespace:"SignatureController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ApprovalController:addRequest","KeyringController:signMessage","KeyringController:signPersonalMessage","KeyringController:signTypedMessage","LoggingController:add","NetworkController:getNetworkClientById","GatorPermissionsController:decodePermissionFromPermissionContextForOrigin"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/signature-controller-messenger.ts"}],[143,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSmartTransactionsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getSmartTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsController",parent:e});return e.delegate({messenger:t,actions:["ErrorReportingService:captureException","NetworkController:getNetworkClientById","NetworkController:getState","RemoteFeatureFlagController:getState","TransactionController:getNonceLock","TransactionController:getTransactions","TransactionController:updateTransaction"],events:["NetworkController:stateChange","RemoteFeatureFlagController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/smart-transactions-controller-messenger.ts"}],[144,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCronjobControllerMessenger=function(e){const t=new r.Messenger({namespace:"CronjobController",parent:e});return e.delegate({messenger:t,events:["SnapController:snapInstalled","SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapEnabled","SnapController:snapDisabled"],actions:["PermissionController:getPermissions","SnapController:handleRequest"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/cronjob-controller-messenger.ts"}],[145,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExecutionServiceMessenger=function(e){return new r.Messenger({namespace:"ExecutionService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/execution-service-messenger.ts"}],[146,{"./cronjob-controller-messenger":144,"./execution-service-messenger":145,"./multichain-router-messenger":147,"./rate-limit-controller-messenger":148,"./snap-controller-messenger":149,"./snap-insights-controller-messenger":150,"./snap-interface-controller-messenger":151,"./snaps-name-provider-messenger":152,"./snaps-registry-messenger":153,"./websocket-service-messenger":154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getCronjobControllerMessenger",{enumerable:!0,get:function(){return r.getCronjobControllerMessenger}}),Object.defineProperty(n,"getExecutionServiceMessenger",{enumerable:!0,get:function(){return s.getExecutionServiceMessenger}}),Object.defineProperty(n,"getMultichainRouterMessenger",{enumerable:!0,get:function(){return o.getMultichainRouterMessenger}}),Object.defineProperty(n,"getRateLimitControllerInitMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerInitMessenger}}),Object.defineProperty(n,"getRateLimitControllerMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerMessenger}}),Object.defineProperty(n,"getSnapControllerInitMessenger",{enumerable:!0,get:function(){return a.getSnapControllerInitMessenger}}),Object.defineProperty(n,"getSnapControllerMessenger",{enumerable:!0,get:function(){return a.getSnapControllerMessenger}}),Object.defineProperty(n,"getSnapInsightsControllerMessenger",{enumerable:!0,get:function(){return l.getSnapInsightsControllerMessenger}}),Object.defineProperty(n,"getSnapInterfaceControllerMessenger",{enumerable:!0,get:function(){return c.getSnapInterfaceControllerMessenger}}),Object.defineProperty(n,"getSnapsNameProviderMessenger",{enumerable:!0,get:function(){return u.getSnapsNameProviderMessenger}}),Object.defineProperty(n,"getSnapsRegistryMessenger",{enumerable:!0,get:function(){return d.getSnapsRegistryMessenger}}),Object.defineProperty(n,"getWebSocketServiceMessenger",{enumerable:!0,get:function(){return p.getWebSocketServiceMessenger}});var r=e("./cronjob-controller-messenger"),s=e("./execution-service-messenger"),o=e("./multichain-router-messenger"),i=e("./rate-limit-controller-messenger"),a=e("./snap-controller-messenger"),l=e("./snap-insights-controller-messenger"),c=e("./snap-interface-controller-messenger"),u=e("./snaps-name-provider-messenger"),d=e("./snaps-registry-messenger"),p=e("./websocket-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/index.ts"}],[147,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainRouterMessenger=function(e){const t=new r.Messenger({namespace:"MultichainRouter",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:handleRequest","PermissionController:getPermissions","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/multichain-router-messenger.ts"}],[148,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRateLimitControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RateLimitController",parent:e});return e.delegate({messenger:t,actions:["SubjectMetadataController:getState","NotificationServicesController:updateMetamaskNotificationsList"]}),t},n.getRateLimitControllerMessenger=function(e){return new r.Messenger({namespace:"RateLimitController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/rate-limit-controller-messenger.ts"}],[149,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SnapControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getKeyringsByType","PreferencesController:getState","MetaMetricsController:trackEvent","SnapController:setClientActive","OnboardingController:getState"],events:["KeyringController:lock","KeyringController:unlock","OnboardingController:stateChange"]}),t},n.getSnapControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapController",parent:e});return e.delegate({messenger:t,events:["ExecutionService:unhandledError","ExecutionService:outboundRequest","ExecutionService:outboundResponse","KeyringController:lock"],actions:["PermissionController:getEndowments","PermissionController:getPermissions","PermissionController:hasPermission","PermissionController:hasPermissions","PermissionController:requestPermissions","PermissionController:revokeAllPermissions","PermissionController:revokePermissions","PermissionController:revokePermissionForAllSubjects","PermissionController:getSubjectNames","PermissionController:updateCaveat","ApprovalController:addRequest","ApprovalController:updateRequestState","PermissionController:grantPermissions","SubjectMetadataController:getSubjectMetadata","SubjectMetadataController:addSubjectMetadata","ExecutionService:executeSnap","ExecutionService:terminateSnap","ExecutionService:terminateAllSnaps","ExecutionService:handleRpcRequest","NetworkController:getNetworkClientById","SelectedNetworkController:getNetworkClientIdForDomain","SnapsRegistry:get","SnapsRegistry:getMetadata","SnapsRegistry:update","SnapsRegistry:resolveVersion","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-controller-messenger.ts"}],[15,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerControllerInit=void 0;var r=e("@metamask/assets-controllers");n.AccountTrackerControllerInit=({controllerMessenger:e,initMessenger:t,getController:n})=>{const s=()=>n("OnboardingController");return{persistedStateKey:null,memStateKey:null,controller:new r.AccountTrackerController({messenger:e,getStakedBalanceForChain:(e,t)=>n("AssetsContractController").getStakedBalanceForChain(e,t),includeStakedAssets:!1,allowExternalServices:()=>{const{useExternalServices:e}=t.call("PreferencesController:getState");return e},accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},fetchingEnabled:()=>s().state.completedOnboarding,isOnboarded:()=>{const{completedOnboarding:e}=s().state;return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/account-tracker-controller-init.ts"}],[150,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInsightsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInsightsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:getAll","PermissionController:getPermissions","SnapInterfaceController:deleteInterface"],events:["TransactionController:unapprovedTransactionAdded","TransactionController:transactionStatusUpdated","SignatureController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-insights-controller-messenger.ts"}],[151,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInterfaceControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInterfaceController",parent:e});return e.delegate({messenger:t,actions:["PhishingController:maybeUpdateState","PhishingController:testOrigin","ApprovalController:hasRequest","ApprovalController:acceptRequest","SnapController:get","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount","AccountsController:getAccountByAddress","AccountsController:listMultichainAccounts","PermissionController:hasPermission"],events:["NotificationServicesController:notificationsListUpdated"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-interface-controller-messenger.ts"}],[152,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsNameProviderMessenger=function(e){const t=new r.Messenger({namespace:"SnapsNameProvider",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:get","SnapController:handleRequest","PermissionController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-name-provider-messenger.ts"}],[153,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsRegistryMessenger=function(e){return new r.Messenger({namespace:"SnapsRegistry",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-registry-messenger.ts"}],[154,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getWebSocketServiceMessenger=function(e){const t=new r.Messenger({namespace:"WebSocketService",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest"],events:["SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapInstalled"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/websocket-service-messenger.ts"}],[155,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getStaticAssetsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"StaticAssetsControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState"]}),t},n.getStaticAssetsControllerMessenger=function(e){const t=new r.Messenger({namespace:"StaticAssetsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:findNetworkClientIdByChainId","TokensController:getState","TokensController:addTokens"],events:[]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/static-assets-controller-messenger.ts"}],[1554,{"./constants.cjs":1555,"./types.cjs":1557,"./utils/bridge-status.cjs":1558,"./utils/gas.cjs":1559,"./utils/metrics.cjs":1560,"./utils/transaction.cjs":1563,"@metamask/bridge-controller":1571,"@metamask/controller-utils":1639,"@metamask/polling-controller":2889,"@metamask/transaction-controller":3473,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f,C,S,w,I,b,T,E,k,A,v,y,_,M,N,P=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},R=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeStatusController=void 0;const O=e("@metamask/bridge-controller"),D=e("@metamask/controller-utils"),B=e("@metamask/polling-controller"),L=e("@metamask/transaction-controller"),j=e("@metamask/utils"),F=e("./constants.cjs"),x=e("./types.cjs"),U=e("./utils/bridge-status.cjs"),H=e("./utils/gas.cjs"),G=e("./utils/metrics.cjs"),q=e("./utils/transaction.cjs"),$={txHistory:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};class W extends((0,B.StaticIntervalPollingController)()){constructor({messenger:e,state:t,clientId:n,fetchFn:B,addTransactionFn:W,addTransactionBatchFn:K,updateTransactionFn:V,estimateGasFeeFn:Y,config:Q,traceFn:z}){super({name:F.BRIDGE_STATUS_CONTROLLER_NAME,metadata:$,messenger:e,state:{...F.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE,...t}}),r.add(this),s.set(this,{}),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),g.set(this,({id:e})=>{const t=this.state.txHistory[e]?e:Object.keys(this.state.txHistory).find(t=>this.state.txHistory[t].approvalTxId===e);t&&this.update(e=>{e.txHistory[t].status.status=O.StatusTypes.FAILED})}),this.resetState=()=>{this.update(e=>{e.txHistory=F.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE.txHistory})},this.wipeBridgeStatus=({address:e,ignoreNetwork:t})=>{if(t)this.update(e=>{e.txHistory=F.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE.txHistory});else{const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState"),n=this.messenger.call("NetworkController:getNetworkClientById",t).configuration.chainId;R(this,T,"f").call(this,e,n)}},this.restartPollingForFailedAttempts=e=>{const{txMetaId:t,txHash:n}=e;if(!t&&!n)throw new Error("Either txMetaId or txHash must be provided");let r;if(t?this.state.txHistory[t]&&(r=t):n&&(r=Object.keys(this.state.txHistory).find(e=>this.state.txHistory[e].status.srcChain.txHash===n)),!r)throw new Error("No bridge transaction history found for "+(t?`txMetaId: ${t}`:`txHash: ${n}`));const o=this.state.txHistory[r];this.update(e=>{r&&(e.txHistory[r].attempts=undefined)});if((0,O.isCrossChain)(o.quote.srcChainId,o.quote.destChainId)){R(this,s,"f")[r]||R(this,f,"f").call(this,r)}},this.getBridgeHistoryItemByTxMetaId=e=>this.state.txHistory[e],m.set(this,()=>{const{txHistory:e}=this.state;Object.values(e).filter(e=>e.status.status===O.StatusTypes.PENDING||e.status.status===O.StatusTypes.UNKNOWN).filter(e=>!R(this,s,"f")[e.txMetaId]).filter(e=>(0,O.isCrossChain)(e.quote.srcChainId,e.quote.destChainId)).forEach(e=>{const t=e.txMetaId;(0,U.shouldSkipFetchDueToFetchFailures)(e.attempts)||R(this,f,"f").call(this,t)})}),h.set(this,e=>{const{bridgeTxMeta:t,statusRequest:n,quoteResponse:r,startTime:s,slippagePercentage:o,initialDestAssetBalance:i,targetContractAddress:a,approvalTxId:l,isStxEnabled:c,accountAddress:u}=e,d={txMetaId:t.id,batchId:t.batchId,quote:r.quote,startTime:s,estimatedProcessingTimeInSeconds:r.estimatedProcessingTimeInSeconds,slippagePercentage:o,pricingData:{amountSent:r.sentAmount?.amount??"0",amountSentInUsd:r.sentAmount?.usd??undefined,quotedGasInUsd:r.gasFee?.effective?.usd??undefined,quotedReturnInUsd:r.toTokenAmount?.usd??undefined,quotedGasAmount:r.gasFee?.effective?.amount??undefined},initialDestAssetBalance:i,targetContractAddress:a,account:u,status:{status:O.StatusTypes.PENDING,srcChain:{chainId:n.srcChainId,txHash:n.srcTxHash}},hasApprovalTx:Boolean(r.approval),approvalTxId:l,isStxEnabled:c??!1,featureId:r.featureId};this.update(e=>{e.txHistory[t.id]=d})}),f.set(this,e=>{const t=R(this,s,"f")[e];t&&this.stopPollingByPollingToken(t);const n=this.state.txHistory[e];if(!n)return;const{quote:r}=n;(0,O.isCrossChain)(r.srcChainId,r.destChainId)&&(R(this,s,"f")[e]=this.startPolling({bridgeTxMetaId:e}))}),this.startPollingForBridgeTxStatus=e=>{const{bridgeTxMeta:t}=e;R(this,h,"f").call(this,e),R(this,f,"f").call(this,t.id)},this._executePoll=async e=>{await R(this,w,"f").call(this,e)},S.set(this,e=>{const{attempts:t}=this.state.txHistory[e],n=t?{counter:t.counter+1,lastAttemptTime:Date.now()}:{counter:1,lastAttemptTime:Date.now()},r=R(this,s,"f")[e];n.counter>=F.MAX_ATTEMPTS&&r&&(this.stopPollingByPollingToken(r),delete R(this,s,"f")[e]),this.update(t=>{t.txHistory[e].attempts=n})}),w.set(this,async({bridgeTxMetaId:e})=>{const{txHistory:t}=this.state;if(!(0,U.shouldSkipFetchDueToFetchFailures)(t[e]?.attempts))try{const n=t[e],r=R(this,I,"f").call(this,e);if(!r)return;R(this,b,"f").call(this,e,r);const l=(0,U.getStatusRequestWithSrcTxHash)(n.quote,r),{status:c,validationFailures:u}=await(0,U.fetchBridgeTxStatus)(l,R(this,o,"f"),R(this,i,"f"),R(this,a,"f").customBridgeApiBaseUrl);if(u.length>0)throw R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.StatusValidationFailed,e,{failures:u}),new Error(`Bridge status validation failed: ${u.join(", ")}`);const d={...n,status:c,completionTime:c.status===O.StatusTypes.COMPLETE||c.status===O.StatusTypes.FAILED?Date.now():undefined,attempts:undefined};this.update(t=>{t.txHistory[e]=d});const p=R(this,s,"f")[e];if((c.status===O.StatusTypes.COMPLETE||c.status===O.StatusTypes.FAILED)&&p){if(this.stopPollingByPollingToken(p),delete R(this,s,"f")[e],n.featureId)return;c.status===O.StatusTypes.COMPLETE&&(R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Completed,e),this.messenger.publish("BridgeStatusController:destinationTransactionCompleted",n.quote.destAsset.assetId)),c.status===O.StatusTypes.FAILED&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Failed,e)}}catch(t){console.warn("Failed to fetch bridge tx status",t),R(this,S,"f").call(this,e)}}),I.set(this,e=>{const{txHistory:t}=this.state,n=t[e].status.srcChain.txHash;if(n)return n;const r=this.messenger.call("TransactionController:getState").transactions.find(t=>t.id===e);return r?.hash}),b.set(this,(e,t)=>{const{txHistory:n}=this.state;n[e].status.srcChain.txHash||this.update(n=>{n.txHistory[e].status.srcChain.txHash=t})}),T.set(this,(e,t)=>{const n=Object.keys(this.state.txHistory).filter(n=>{const r=this.state.txHistory[n],s=(0,j.numberToHex)(r.quote.srcChainId);return r.account===e&&s===t});n.forEach(e=>{R(this,s,"f")[e]&&this.stopPollingByPollingToken(R(this,s,"f")[e])}),this.update(e=>{e.txHistory=n.reduce((e,t)=>(delete e[t],e),e.txHistory)})}),E.set(this,async(e,t,n)=>{if(!n.metadata?.snap?.id)throw new Error("Failed to submit cross-chain swap transaction: undefined snap id");const r=(0,q.getClientRequest)(e,t.quote.srcChainId,n),s=await this.messenger.call("SnapController:handleRequest",r),o={...t,trade:e};return(0,q.handleNonEvmTxResponse)(s,o,n)}),k.set(this,async e=>{const t=await e,n=this.messenger.call("TransactionController:getState").transactions.find(e=>e.hash===t);if(!n)throw new Error("Failed to submit cross-chain swap tx: txMeta for txHash was not found");return n}),A.set(this,async(e,t,n,r,s)=>{if(n){const o=async()=>{await R(this,y,"f").call(this,r);const o=await R(this,v,"f").call(this,{transactionType:e?L.TransactionType.bridgeApproval:L.TransactionType.swapApproval,trade:n,requireApproval:s});return await(0,q.handleApprovalDelay)(t),o};return await R(this,p,"f").call(this,{name:e?F.TraceName.BridgeTransactionApprovalCompleted:F.TraceName.SwapTransactionApprovalCompleted,data:{srcChainId:(0,O.formatChainIdToCaip)(t),stxEnabled:!1}},o)}return undefined}),v.set(this,async({transactionType:e,trade:t,requireApproval:n=!1,txFee:r})=>{const s=(0,q.generateActionId)().toString();if(!this.messenger.call("AccountsController:getAccountByAddress",t.from))throw new Error("Failed to submit cross-chain swap transaction: unknown account in trade data");const o=(0,O.formatChainIdToHex)(t.chainId),i=this.messenger.call("NetworkController:findNetworkClientIdByChainId",o),a={actionId:s,networkClientId:i,requireApproval:n,type:e,origin:"metamask"},c={...t,chainId:o,gasLimit:t.gasLimit?.toString(),gas:t.gasLimit?.toString()},u={...c,...await R(this,_,"f").call(this,c,i,o,r)},{result:d}=await R(this,l,"f").call(this,u,a);return await R(this,k,"f").call(this,d)}),y.set(this,async e=>{e&&await R(this,v,"f").call(this,{transactionType:L.TransactionType.bridgeApproval,trade:e})}),_.set(this,async(e,t,n,r)=>{const s=(0,D.toHex)(e.gas??0);if(r)return{maxFeePerGas:(0,D.toHex)(r.maxFeePerGas??0),maxPriorityFeePerGas:(0,D.toHex)(r.maxPriorityFeePerGas??0),gas:s};const{gasFeeEstimates:o}=this.messenger.call("GasFeeController:getState"),{estimates:i}=await R(this,d,"f").call(this,{transactionParams:e,chainId:n,networkClientId:t}),{maxFeePerGas:a,maxPriorityFeePerGas:l}=(0,H.getTxGasEstimates)({networkGasFeeEstimates:o,txGasFeeEstimates:i});return{maxFeePerGas:a,maxPriorityFeePerGas:l,gas:s}}),M.set(this,async e=>{const t=await(0,q.getAddTransactionBatchParams)({messenger:this.messenger,estimateGasFeeFn:R(this,d,"f"),...e}),n={[L.TransactionType.bridgeApproval]:t.transactions.find(({type:e})=>e===L.TransactionType.bridgeApproval)?.params.data,[L.TransactionType.swapApproval]:t.transactions.find(({type:e})=>e===L.TransactionType.swapApproval)?.params.data,[L.TransactionType.bridge]:t.transactions.find(({type:e})=>e===L.TransactionType.bridge)?.params.data,[L.TransactionType.swap]:t.transactions.find(({type:e})=>e===L.TransactionType.swap)?.params.data},{batchId:r}=await R(this,c,"f").call(this,t),{approvalMeta:s,tradeMeta:o}=(0,q.findAndUpdateTransactionsInBatch)({messenger:this.messenger,updateTransactionFn:R(this,u,"f"),batchId:r,txDataByType:n});if(!o)throw new Error("Failed to update cross-chain swap transaction batch: tradeMeta not found");return{approvalMeta:s,tradeMeta:o}}),this.submitTx=async(e,t,n,s)=>{this.messenger.call("BridgeController:stopPollingForQuotes",O.AbortReason.TransactionSubmitted,t.featureId?undefined:s);const i=R(this,r,"m",C).call(this,e);if(!i)throw new Error("Failed to submit cross-chain swap transaction: undefined multichain account");const a=(0,O.isHardwareWallet)(i),l=(0,G.getPreConfirmationPropertiesFromQuote)(t,n,a);let c,u;!t.featureId&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Submitted,undefined,l);const d=Date.now(),g=(0,O.isCrossChain)(t.quote.srcChainId,t.quote.destChainId);if((0,O.isNonEvmChainId)(t.quote.srcChainId)){if(t.approval&&(0,O.isTronTrade)(t.approval)){const e=await R(this,p,"f").call(this,{name:g?F.TraceName.BridgeTransactionApprovalCompleted:F.TraceName.SwapTransactionApprovalCompleted,data:{srcChainId:(0,O.formatChainIdToCaip)(t.quote.srcChainId),stxEnabled:!1}},async()=>{try{return t.approval&&(0,O.isTronTrade)(t.approval)?await R(this,E,"f").call(this,t.approval,t,i):undefined}catch(e){throw!t.featureId&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Failed,undefined,{error_message:e?.message,...l}),e}});u=e?.id,await(0,q.handleApprovalDelay)(t.quote.srcChainId)}c=await R(this,p,"f").call(this,{name:g?F.TraceName.BridgeTransactionCompleted:F.TraceName.SwapTransactionCompleted,data:{srcChainId:(0,O.formatChainIdToCaip)(t.quote.srcChainId),stxEnabled:!1}},async()=>{try{if(!(0,O.isTronTrade)(t.trade)&&!(0,O.isBitcoinTrade)(t.trade)&&"string"!=typeof t.trade)throw new Error("Failed to submit cross-chain swap transaction: trade is not a non-EVM transaction");return await R(this,E,"f").call(this,t.trade,t,i)}catch(e){throw!t.featureId&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Failed,c?.id,{error_message:e?.message,...l}),e}})}else{const e=R(this,o,"f")===x.BridgeClientId.MOBILE&&a;c=await R(this,p,"f").call(this,{name:g?F.TraceName.BridgeTransactionCompleted:F.TraceName.SwapTransactionCompleted,data:{srcChainId:(0,O.formatChainIdToCaip)(t.quote.srcChainId),stxEnabled:n}},async()=>{if(!(0,O.isEvmTxData)(t.trade))throw new Error("Failed to submit cross-chain swap transaction: trade is not an EVM transaction");if(n||t.quote.gasIncluded7702){const{tradeMeta:n,approvalMeta:r}=await R(this,M,"f").call(this,{isBridgeTx:g,resetApproval:t.resetApproval,approval:t.approval&&(0,O.isEvmTxData)(t.approval)?t.approval:undefined,trade:t.trade,quoteResponse:t,requireApproval:e});return u=r?.id,n}const r=await R(this,A,"f").call(this,g,t.quote.srcChainId,t.approval&&(0,O.isEvmTxData)(t.approval)?t.approval:undefined,t.resetApproval,e);return u=r?.id,await(0,q.handleMobileHardwareWalletDelay)(e),await R(this,v,"f").call(this,{transactionType:g?L.TransactionType.bridge:L.TransactionType.swap,trade:t.trade,requireApproval:e,txFee:t.quote.gasIncluded?t.quote.feeData.txFee:undefined})})}try{R(this,h,"f").call(this,{accountAddress:i.address,bridgeTxMeta:c,statusRequest:{...(0,q.getStatusRequestParams)(t),srcTxHash:c.hash},quoteResponse:t,slippagePercentage:0,isStxEnabled:n,startTime:d,approvalTxId:u}),(0,O.isNonEvmChainId)(t.quote.srcChainId)&&(R(this,f,"f").call(this,c.id),g||R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Completed,c.id))}catch{}return c},N.set(this,(e,t,n)=>{const r={action_type:O.MetricsActionType.SWAPBRIDGE_V1,...n??{}};if(!t)return void this.messenger.call("BridgeController:trackUnifiedSwapBridgeEvent",e,r);const s=this.state.txHistory[t];if(!s)return void this.messenger.call("BridgeController:trackUnifiedSwapBridgeEvent",e,n??{});const o=(0,G.getRequestParamFromHistory)(s);if(e===O.UnifiedSwapBridgeEventName.StatusValidationFailed){const{chain_id_source:t,chain_id_destination:n,token_address_source:i,token_address_destination:a}=o;return void this.messenger.call("BridgeController:trackUnifiedSwapBridgeEvent",e,{...r,chain_id_source:t,chain_id_destination:n,token_address_source:i,token_address_destination:a,refresh_count:s.attempts?.counter??0})}if(s.featureId)return;const i=this.messenger.call("AccountsController:getAccountByAddress",s.account),{transactions:a}=this.messenger.call("TransactionController:getState"),l=a?.find(({id:e})=>e===t),c=a?.find(({id:e})=>e===s.approvalTxId),u={...r,...o,...(0,G.getRequestMetadataFromHistory)(s,i),...(0,G.getTradeDataFromHistory)(s),...(0,G.getTxStatusesFromHistory)(s),...(0,G.getFinalizedTxProperties)(s,l,c),...(0,G.getPriceImpactFromQuote)(s.quote)};this.messenger.call("BridgeController:trackUnifiedSwapBridgeEvent",e,u)}),P(this,o,n,"f"),P(this,i,B,"f"),P(this,l,W,"f"),P(this,c,K,"f"),P(this,u,V,"f"),P(this,d,Y,"f"),P(this,a,{customBridgeApiBaseUrl:Q?.customBridgeApiBaseUrl??F.BRIDGE_PROD_API_BASE_URL},"f"),P(this,p,z??((e,t)=>t?.()),"f"),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:startPollingForBridgeTxStatus`,this.startPollingForBridgeTxStatus.bind(this)),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:wipeBridgeStatus`,this.wipeBridgeStatus.bind(this)),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:resetState`,this.resetState.bind(this)),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:submitTx`,this.submitTx.bind(this)),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:restartPollingForFailedAttempts`,this.restartPollingForFailedAttempts.bind(this)),this.messenger.registerActionHandler(`${F.BRIDGE_STATUS_CONTROLLER_NAME}:getBridgeHistoryItemByTxMetaId`,this.getBridgeHistoryItemByTxMetaId.bind(this)),this.setIntervalLength(F.REFRESH_INTERVAL_MS),this.messenger.subscribe("TransactionController:transactionFailed",({transactionMeta:e})=>{const{type:t,status:n,id:r}=e;t&&[L.TransactionType.bridge,L.TransactionType.swap,L.TransactionType.bridgeApproval,L.TransactionType.swapApproval].includes(t)&&[L.TransactionStatus.failed,L.TransactionStatus.dropped,L.TransactionStatus.rejected].includes(n)&&(R(this,g,"f").call(this,e),n!==L.TransactionStatus.rejected&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Failed,r,(0,G.getEVMTxPropertiesFromTransactionMeta)(e)))}),this.messenger.subscribe("TransactionController:transactionConfirmed",e=>{const{type:t,id:n,chainId:r}=e;t===L.TransactionType.swap&&R(this,N,"f").call(this,O.UnifiedSwapBridgeEventName.Completed,n),t!==L.TransactionType.bridge||(0,O.isNonEvmChainId)(r)||R(this,f,"f").call(this,n)}),R(this,m,"f").call(this)}}n.BridgeStatusController=W,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,b=new WeakMap,T=new WeakMap,E=new WeakMap,k=new WeakMap,A=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,M=new WeakMap,N=new WeakMap,r=new WeakSet,C=function(e){return this.messenger.call("AccountsController:getAccountByAddress",e)}}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/bridge-status-controller.cjs"}],[1555,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.TraceName=n.APPROVAL_DELAY_MS=n.BRIDGE_PROD_API_BASE_URL=n.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE=n.BRIDGE_STATUS_CONTROLLER_NAME=n.MAX_ATTEMPTS=n.REFRESH_INTERVAL_MS=void 0,n.REFRESH_INTERVAL_MS=1e4,n.MAX_ATTEMPTS=7,n.BRIDGE_STATUS_CONTROLLER_NAME="BridgeStatusController",n.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE={txHistory:{}},n.BRIDGE_PROD_API_BASE_URL="https://bridge.api.cx.metamask.io",n.APPROVAL_DELAY_MS=5e3,function(e){e.BridgeTransactionApprovalCompleted="Bridge Transaction Approval Completed",e.BridgeTransactionCompleted="Bridge Transaction Completed",e.SwapTransactionApprovalCompleted="Swap Transaction Approval Completed",e.SwapTransactionCompleted="Swap Transaction Completed"}(r||(n.TraceName=r={}))}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/constants.cjs"}],[1556,{"./bridge-status-controller.cjs":1554,"./constants.cjs":1555,"./types.cjs":1557,"./utils/transaction.cjs":1563},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTxMetaFields=n.BridgeStatusController=n.BridgeStatusAction=n.BridgeId=n.MAX_ATTEMPTS=n.BRIDGE_STATUS_CONTROLLER_NAME=n.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE=n.REFRESH_INTERVAL_MS=void 0;var r=e("./constants.cjs");Object.defineProperty(n,"REFRESH_INTERVAL_MS",{enumerable:!0,get:function(){return r.REFRESH_INTERVAL_MS}}),Object.defineProperty(n,"DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE",{enumerable:!0,get:function(){return r.DEFAULT_BRIDGE_STATUS_CONTROLLER_STATE}}),Object.defineProperty(n,"BRIDGE_STATUS_CONTROLLER_NAME",{enumerable:!0,get:function(){return r.BRIDGE_STATUS_CONTROLLER_NAME}}),Object.defineProperty(n,"MAX_ATTEMPTS",{enumerable:!0,get:function(){return r.MAX_ATTEMPTS}});var s=e("./types.cjs");Object.defineProperty(n,"BridgeId",{enumerable:!0,get:function(){return s.BridgeId}}),Object.defineProperty(n,"BridgeStatusAction",{enumerable:!0,get:function(){return s.BridgeStatusAction}});var o=e("./bridge-status-controller.cjs");Object.defineProperty(n,"BridgeStatusController",{enumerable:!0,get:function(){return o.BridgeStatusController}});var i=e("./utils/transaction.cjs");Object.defineProperty(n,"getTxMetaFields",{enumerable:!0,get:function(){return i.getTxMetaFields}})}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/index.cjs"}],[1557,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o;Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeStatusAction=n.BridgeId=n.BridgeClientId=void 0,function(e){e.EXTENSION="extension",e.MOBILE="mobile"}(r||(n.BridgeClientId=r={})),function(e){e.HOP="hop",e.CELER="celer",e.CELERCIRCLE="celercircle",e.CONNEXT="connext",e.POLYGON="polygon",e.AVALANCHE="avalanche",e.MULTICHAIN="multichain",e.AXELAR="axelar",e.ACROSS="across",e.STARGATE="stargate",e.RELAY="relay",e.MAYAN="mayan"}(s||(n.BridgeId=s={})),function(e){e.START_POLLING_FOR_BRIDGE_TX_STATUS="startPollingForBridgeTxStatus",e.WIPE_BRIDGE_STATUS="wipeBridgeStatus",e.GET_STATE="getState",e.RESET_STATE="resetState",e.SUBMIT_TX="submitTx",e.RESTART_POLLING_FOR_FAILED_ATTEMPTS="restartPollingForFailedAttempts",e.GET_BRIDGE_HISTORY_ITEM_BY_TX_META_ID="getBridgeHistoryItemByTxMetaId"}(o||(n.BridgeStatusAction=o={}))}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/types.cjs"}],[1558,{"../constants.cjs":1555,"./validators.cjs":1564,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shouldSkipFetchDueToFetchFailures=n.getStatusRequestWithSrcTxHash=n.fetchBridgeTxStatus=n.getStatusRequestDto=n.getBridgeStatusUrl=n.getClientIdHeader=void 0;const r=e("@metamask/superstruct"),s=e("./validators.cjs"),o=e("../constants.cjs");n.getClientIdHeader=e=>({"X-Client-Id":e});n.getBridgeStatusUrl=e=>`${e}/getTxStatus`;n.getStatusRequestDto=e=>{const{quote:t,...n}=e;return{...Object.fromEntries(Object.entries(n).map(([e,t])=>[e,t.toString()])),...t?.requestId?{requestId:t.requestId}:{}}};n.fetchBridgeTxStatus=async(e,t,o,i)=>{const a=(0,n.getStatusRequestDto)(e),l=new URLSearchParams(a),c=`${(0,n.getBridgeStatusUrl)(i)}?${l.toString()}`,u=await o(c,{headers:(0,n.getClientIdHeader)(t)}),d=[];try{(0,s.validateBridgeStatusResponse)(u)}catch(t){t instanceof r.StructError&&t.failures().forEach(({branch:t,path:n})=>{const r=t?.[0]?.quote?.bridgeId||t?.[0]?.quote?.bridges?.[0]||u?.bridge||e.bridge||e.bridgeId||"unknown",s=n?.join(".")||"unknown";d.push([r,s].join("|"))})}return{status:u,validationFailures:d}};n.getStatusRequestWithSrcTxHash=(e,t)=>{const{bridgeId:n,bridges:r,srcChainId:s,destChainId:o,refuel:i}=e;return{bridgeId:n,srcTxHash:t,bridge:r[0],srcChainId:s,destChainId:o,quote:e,refuel:Boolean(i)}};n.shouldSkipFetchDueToFetchFailures=e=>{if(e){const t=o.REFRESH_INTERVAL_MS*Math.pow(2,e.counter-1);if(Date.now()-e.lastAttemptTime<t)return!0}return!1}}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/bridge-status.cjs"}],[1559,{"@metamask/controller-utils":1639,"bignumber.js":1606},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calcActualGasUsed=n.calculateGasFees=n.getTxGasEstimates=void 0;const r=e("@metamask/controller-utils"),s=e("bignumber.js");n.getTxGasEstimates=({txGasFeeEstimates:e,networkGasFeeEstimates:t})=>{const{estimatedBaseFee:n="0"}=t;return((e,t)=>{const{maxFeePerGas:n,maxPriorityFeePerGas:r}=e?.high??{};return{baseAndPriorityFeePerGas:r?new s.BigNumber(t,10).times(10**9).plus(r,16):undefined,maxFeePerGas:n,maxPriorityFeePerGas:r}})(e,n)};n.calculateGasFees=async(e,t,s,{chainId:o,gasLimit:i,...a},l,c,u)=>{if(!e)return{};if(u)return{...u,gas:i?.toString()};const d={...a,gas:i?.toString(),data:a.data,to:a.to,value:a.value},{gasFeeEstimates:p}=t.call("GasFeeController:getState"),{estimates:g}=await s({transactionParams:d,chainId:c,networkClientId:l}),{maxFeePerGas:m,maxPriorityFeePerGas:h}=(0,n.getTxGasEstimates)({networkGasFeeEstimates:p,txGasFeeEstimates:g});return{maxFeePerGas:m,maxPriorityFeePerGas:h,gas:(0,r.toHex)(d.gas??0)}};const o=(e,t)=>e&&t?new s.BigNumber(e,16).times(new s.BigNumber(t,16)):null;n.calcActualGasUsed=({pricingData:e},t,n)=>{const r=e?.quotedGasInUsd&&e?.quotedGasAmount?new s.BigNumber(e?.quotedGasInUsd).div(e.quotedGasAmount):null,i=o(t?.gasUsed,t?.effectiveGasPrice)?.plus(o(n?.gasUsed,n?.effectiveGasPrice)??0),a=i?.div(new s.BigNumber(10).pow(18)).toString(10);return i&&a?{amount:i.toString(10),usd:r?.multipliedBy(a).toString(10)??null}:null}}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/gas.cjs"}],[156,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getStorageServiceMessenger=function(e){return new r.Messenger({namespace:"StorageService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/storage-service-messenger.ts"}],[1560,{"./gas.cjs":1559,"./swap-received-amount.cjs":1562,"@metamask/bridge-controller":1571,"@metamask/transaction-controller":3473,"bignumber.js":1606},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEVMTxPropertiesFromTransactionMeta=n.getRequestMetadataFromHistory=n.getTradeDataFromHistory=n.getPreConfirmationPropertiesFromQuote=n.getPriceImpactFromQuote=n.getTradeDataFromQuote=n.getRequestParamFromHistory=n.getFinalizedTxProperties=n.getTxStatusesFromHistory=void 0;const r=e("@metamask/bridge-controller"),s=e("@metamask/transaction-controller"),o=e("bignumber.js"),i=e("./gas.cjs"),a=e("./swap-received-amount.cjs");n.getTxStatusesFromHistory=({status:e,hasApprovalTx:t,approvalTxId:n,quote:s})=>{const o=e.srcChain.txHash?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING,i=e.destChain?.txHash?e.status:r.StatusTypes.PENDING,a=(0,r.formatChainIdToHex)(s.srcChainId),l=(0,r.isEthUsdt)(a,s.srcAsset.address),c=e.srcChain.txHash?r.StatusTypes.COMPLETE:undefined,u=e.srcChain.txHash?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING;return{allowance_reset_transaction:l?c:undefined,approval_transaction:t||n?u:undefined,source_transaction:o,destination_transaction:e.status===r.StatusTypes.FAILED?r.StatusTypes.FAILED:i}};n.getFinalizedTxProperties=(e,t,n)=>{const r=n?.submittedTime??t?.submittedTime??e.startTime,l=t?.type===s.TransactionType.swap?t?.time:e.completionTime,c=(0,i.calcActualGasUsed)(e,t?.txReceipt,n?.txReceipt),u=t?.type===s.TransactionType.swap?(0,a.getActualSwapReceivedAmount)(e,c,t):(0,a.getActualBridgeReceivedAmount)(e),d=e.pricingData?.quotedGasAmount&&c?.amount?new o.BigNumber(e.pricingData.quotedGasAmount).multipliedBy(new o.BigNumber(10).pow(18)).div(c.amount).toNumber():0,p=e.pricingData?.quotedReturnInUsd&&u?.usd?new o.BigNumber(e.pricingData.quotedReturnInUsd).div(u.usd).toNumber():0;return{actual_time_minutes:l&&r?(l-r)/6e4:0,usd_actual_return:Number(u?.usd??0),usd_actual_gas:c?.usd??0,quote_vs_execution_ratio:p,quoted_vs_used_gas_ratio:d}};n.getRequestParamFromHistory=e=>({chain_id_source:(0,r.formatChainIdToCaip)(e.quote.srcChainId),token_symbol_source:e.quote.srcAsset.symbol,token_address_source:e.quote.srcAsset.assetId,chain_id_destination:(0,r.formatChainIdToCaip)(e.quote.destChainId),token_symbol_destination:e.quote.destAsset.symbol,token_address_destination:e.quote.destAsset.assetId});n.getTradeDataFromQuote=e=>({usd_quoted_gas:Number(e.gasFee?.effective?.usd??0),gas_included:e.quote.gasIncluded??!1,gas_included_7702:e.quote.gasIncluded7702??!1,provider:(0,r.formatProviderLabel)(e.quote),quoted_time_minutes:Number(e.estimatedProcessingTimeInSeconds/60),usd_quoted_return:Number(e.adjustedReturn?.usd??0)});n.getPriceImpactFromQuote=e=>({price_impact:Number(e.priceData?.priceImpact??"0")});n.getPreConfirmationPropertiesFromQuote=(e,t,s)=>{const{quote:o}=e;return{...(0,n.getPriceImpactFromQuote)(o),...(0,n.getTradeDataFromQuote)(e),chain_id_source:(0,r.formatChainIdToCaip)(o.srcChainId),token_symbol_source:o.srcAsset.symbol,chain_id_destination:(0,r.formatChainIdToCaip)(o.destChainId),token_symbol_destination:o.destAsset.symbol,is_hardware_wallet:s,swap_type:(0,r.getSwapType)(e.quote.srcChainId,e.quote.destChainId),usd_amount_source:Number(e.sentAmount?.usd??0),stx_enabled:t,action_type:r.MetricsActionType.SWAPBRIDGE_V1,custom_slippage:!1}};n.getTradeDataFromHistory=e=>({usd_quoted_gas:Number(e.pricingData?.quotedGasInUsd??0),gas_included:e.quote.gasIncluded??!1,gas_included_7702:e.quote.gasIncluded7702??!1,provider:(0,r.formatProviderLabel)(e.quote),quoted_time_minutes:Number(e.estimatedProcessingTimeInSeconds/60),usd_quoted_return:Number(e.pricingData?.quotedReturnInUsd??0)});n.getRequestMetadataFromHistory=(e,t)=>{const{quote:n,slippagePercentage:s,isStxEnabled:o}=e;return{slippage_limit:s,custom_slippage:(0,r.isCustomSlippage)(s),usd_amount_source:Number(e.pricingData?.amountSentInUsd??0),swap_type:(0,r.getSwapType)(n.srcChainId,n.destChainId),is_hardware_wallet:(0,r.isHardwareWallet)(t),stx_enabled:o??!1,security_warnings:[]}};n.getEVMTxPropertiesFromTransactionMeta=e=>({source_transaction:[s.TransactionStatus.failed,s.TransactionStatus.dropped,s.TransactionStatus.rejected].includes(e.status)?r.StatusTypes.FAILED:r.StatusTypes.COMPLETE,error_message:e.error?.message??"",chain_id_source:(0,r.formatChainIdToCaip)(e.chainId),chain_id_destination:(0,r.formatChainIdToCaip)(e.chainId),token_symbol_source:e.sourceTokenSymbol??"",token_symbol_destination:e.destinationTokenSymbol??"",usd_amount_source:100,stx_enabled:!1,token_address_source:(0,r.formatAddressToAssetId)(e.sourceTokenAddress??"",e.chainId)??"",token_address_destination:(0,r.formatAddressToAssetId)(e.destinationTokenAddress??"",e.chainId)??"",custom_slippage:!1,is_hardware_wallet:!1,swap_type:e.type&&[s.TransactionType.swap,s.TransactionType.swapApproval].includes(e.type)?r.MetricsSwapType.SINGLE:r.MetricsSwapType.CROSSCHAIN,security_warnings:[],price_impact:0,usd_quoted_gas:0,gas_included:!1,gas_included_7702:!1,quoted_time_minutes:0,usd_quoted_return:0,provider:"",actual_time_minutes:0,quote_vs_execution_ratio:0,quoted_vs_used_gas_ratio:0,usd_actual_return:0,usd_actual_gas:0,action_type:r.MetricsActionType.SWAPBRIDGE_V1})}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/metrics.cjs"}],[1561,{uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createClientTransactionRequest=void 0;const r=e("uuid");n.createClientTransactionRequest=(e,t,n,s,o)=>({snapId:e,origin:"metamask",handler:"onClientRequest",request:{id:(0,r.v4)(),jsonrpc:"2.0",method:"signAndSendTransaction",params:{transaction:t,scope:n,accountId:s,...o&&{options:o}}}})}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/snaps.cjs"}],[1562,{"@metamask/bridge-controller":1571,"bignumber.js":1606},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getActualBridgeReceivedAmount=n.getActualSwapReceivedAmount=void 0;const r=e("@metamask/bridge-controller"),s=e("bignumber.js");n.getActualSwapReceivedAmount=(e,t,n)=>{const{pricingData:o}=e,i=e.quote.destTokenAmount;if(!n?.txReceipt)return null;const a=(0,r.isNativeAddress)(e.quote.destAsset.address)?((e,t,n)=>{const{preTxBalance:r,postTxBalance:o}=n;return r&&o&&r!==o?t&&o&&r?new s.BigNumber(o,16).minus(r,16).minus(t.amount).div(10**e.quote.destAsset.decimals):null:new s.BigNumber(e.quote.destTokenAmount).div(new s.BigNumber(10).pow(e.quote.destAsset.decimals)).toString(10)})(e,t,n):((e,t)=>{const{txReceipt:n}=t;if(!n?.logs||"0x0"===n.status)return null;const{account:r,quote:o}=e,i=n.logs.find(e=>{const t=e.topics?.[0]?.startsWith("0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"),n=e.address?.toLowerCase()===o.destAsset.address?.toLowerCase(),s=e.topics?.[2]&&(e.topics[2]===r||e.topics[2].match(r?.slice(2)));return t&&n&&s});return i?.data?new s.BigNumber(i.data,16).div(new s.BigNumber(10).pow(o.destAsset.decimals)):null})(e,n),l=o?.quotedReturnInUsd&&i?new s.BigNumber(o.quotedReturnInUsd).div(i).multipliedBy(10**e.quote.destAsset.decimals):null;return{amount:a,usd:a&&l?l.multipliedBy(a):null}};n.getActualBridgeReceivedAmount=e=>{const{quote:t,pricingData:n,status:r}=e,o=n?.quotedReturnInUsd?new s.BigNumber(n.quotedReturnInUsd).div(t.destTokenAmount):null,i=r.destChain?.amount;return i&&o?{amount:i,usd:o.multipliedBy(i).toString(10)}:null}}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/swap-received-amount.cjs"}],[1563,{"../constants.cjs":1555,"./gas.cjs":1559,"./snaps.cjs":1561,"@metamask/bridge-controller":1571,"@metamask/controller-utils":1639,"@metamask/transaction-controller":3473,"@metamask/utils":3554,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAndUpdateTransactionsInBatch=n.getAddTransactionBatchParams=n.toBatchTxParams=n.getClientRequest=n.handleMobileHardwareWalletDelay=n.handleApprovalDelay=n.handleNonEvmTxResponse=n.getTxMetaFields=n.getStatusRequestParams=n.generateActionId=void 0;const r=e("@metamask/bridge-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/transaction-controller"),i=e("@metamask/utils"),a=e("uuid"),l=e("./gas.cjs"),c=e("./snaps.cjs"),u=e("../constants.cjs");n.generateActionId=()=>(Date.now()+Math.random()).toString();n.getStatusRequestParams=e=>({bridgeId:e.quote.bridgeId,bridge:e.quote.bridges[0],srcChainId:e.quote.srcChainId,destChainId:e.quote.destChainId,quote:e.quote,refuel:Boolean(e.quote.refuel)});n.getTxMetaFields=(e,t)=>{let n;try{n=(0,r.formatChainIdToHex)(e.quote.destChainId)}catch{n="0x1"}return{destinationChainId:n,sourceTokenAmount:e.quote.srcTokenAmount,sourceTokenSymbol:e.quote.srcAsset.symbol,sourceTokenDecimals:e.quote.srcAsset.decimals,sourceTokenAddress:e.quote.srcAsset.address,destinationTokenAmount:e.quote.destTokenAmount,destinationTokenSymbol:e.quote.destAsset.symbol,destinationTokenDecimals:e.quote.destAsset.decimals,destinationTokenAddress:e.quote.destAsset.address,approvalTxId:t,swapTokenValue:e.sentAmount.amount}};n.handleNonEvmTxResponse=(e,t,s)=>{const i=s.address,l=s.metadata.snap?.id;let c;"string"==typeof e?c=e:e&&"object"==typeof e&&("transactionId"in e&&e.transactionId?c=e.transactionId:"result"in e&&e.result&&"object"==typeof e.result?c=e.result.signature||e.result.txid||e.result.hash||e.result.txHash:"signature"in e&&e.signature&&"string"==typeof e.signature&&(c=e.signature));const u=(0,r.isCrossChain)(t.quote.srcChainId,t.quote.destChainId);let d;try{d=(0,r.formatChainIdToHex)(t.quote.srcChainId)}catch{d="0x1"}const p=(0,r.extractTradeData)(t.trade);return{...(0,n.getTxMetaFields)(t),time:Date.now(),id:c??(0,a.v4)(),chainId:d,networkClientId:l??d,txParams:{from:i,data:p},type:u?o.TransactionType.bridge:o.TransactionType.swap,status:o.TransactionStatus.submitted,hash:c,origin:l,isSolana:!0,isBridgeTx:u}};n.handleApprovalDelay=async e=>{if([r.ChainId.LINEA,r.ChainId.BASE].includes(e)){(0,i.createProjectLogger)("bridge")("Delaying submitting bridge tx to make Linea and Base confirmation more likely");const e=new Promise(e=>setTimeout(e,u.APPROVAL_DELAY_MS));await e}};n.handleMobileHardwareWalletDelay=async e=>{if(e){const e=new Promise(e=>setTimeout(e,1e3));await e}};n.getClientRequest=(e,t,n)=>{const s=(0,r.formatChainIdToCaip)(t),o=(0,r.extractTradeData)(e),i=(0,r.isTronTrade)(e)?{visible:e.visible,type:e.raw_data?.contract?.[0]?.type}:undefined;return(0,c.createClientTransactionRequest)(n.metadata.snap?.id,o,s,n.id,i)};n.toBatchTxParams=(e,{chainId:t,gasLimit:n,...r},{maxFeePerGas:o,maxPriorityFeePerGas:i,gas:a})=>{const l={...r,data:r.data,to:r.to,value:r.value};return e?{...l,gas:(0,s.toHex)(a??0),maxFeePerGas:(0,s.toHex)(o??0),maxPriorityFeePerGas:(0,s.toHex)(i??0)}:l};n.getAddTransactionBatchParams=async({messenger:e,isBridgeTx:t,approval:s,resetApproval:i,trade:a,quoteResponse:{quote:{feeData:{txFee:c},gasIncluded:u,gasIncluded7702:d,gasSponsored:p},sentAmount:g,toTokenAmount:m},requireApproval:h=!1,estimateGasFeeFn:f})=>{const C=u||d;if(!e.call("AccountsController:getAccountByAddress",a.from))throw new Error("Failed to submit cross-chain swap batch transaction: unknown account in trade data");const S=(0,r.formatChainIdToHex)(a.chainId),w=e.call("NetworkController:findNetworkClientIdByChainId",S),I=!0!==d,b=[];if(i){const r=await(0,l.calculateGasFees)(I,e,f,i,w,S,C?c:undefined);b.push({type:t?o.TransactionType.bridgeApproval:o.TransactionType.swapApproval,params:(0,n.toBatchTxParams)(I,i,r)})}if(s){const r=await(0,l.calculateGasFees)(I,e,f,s,w,S,C?c:undefined);b.push({type:t?o.TransactionType.bridgeApproval:o.TransactionType.swapApproval,params:(0,n.toBatchTxParams)(I,s,r)})}const T=await(0,l.calculateGasFees)(I,e,f,a,w,S,C?c:undefined);b.push({type:t?o.TransactionType.bridge:o.TransactionType.swap,params:(0,n.toBatchTxParams)(I,a,T),assetsFiatValues:{sending:g?.valueInCurrency?.toString(),receiving:m?.valueInCurrency?.toString()}});return{disable7702:I,isGasFeeIncluded:Boolean(d),isGasFeeSponsored:Boolean(p),networkClientId:w,requireApproval:h,origin:"metamask",from:a.from,transactions:b}};n.findAndUpdateTransactionsInBatch=({messenger:e,updateTransactionFn:t,batchId:n,txDataByType:r})=>{const s=e.call("TransactionController:getState").transactions,i={approvalMeta:undefined,tradeMeta:undefined};return Object.entries(r).forEach(([e,r])=>{const a=s.find(t=>{if(t.batchId!==n)return!1;if(Array.isArray(t.txParams.authorizationList)&&t.txParams.authorizationList.length>0||Boolean(t.delegationAddress)){if(e===o.TransactionType.swap&&t.type===o.TransactionType.batch)return!0;if(e===o.TransactionType.swapApproval&&t.txParams.data===r)return!0}return t.txParams.data===r});if(a){const n={...a,type:e};t(n,`Update tx type to ${e}`),i[[o.TransactionType.bridgeApproval,o.TransactionType.swapApproval].includes(e)?"approvalMeta":"tradeMeta"]=n}}),i}}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/transaction.cjs"}],[1564,{"@metamask/bridge-controller":1571,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateBridgeStatusResponse=n.StatusResponseSchema=void 0;const r=e("@metamask/bridge-controller"),s=e("@metamask/superstruct"),o=(0,s.number)(),i=(0,s.type)({}),a=(0,s.type)({chainId:o,txHash:(0,s.optional)((0,s.string)()),amount:(0,s.optional)((0,s.string)()),token:(0,s.optional)((0,s.union)([i,r.BridgeAssetSchema]))}),l=(0,s.type)({chainId:o,txHash:(0,s.optional)((0,s.string)()),amount:(0,s.optional)((0,s.string)()),token:(0,s.optional)((0,s.union)([i,r.BridgeAssetSchema]))}),c=(0,s.type)({});n.StatusResponseSchema=(0,s.type)({status:(0,s.enums)(Object.values(r.StatusTypes)),srcChain:a,destChain:(0,s.optional)(l),bridge:(0,s.optional)((0,s.string)()),isExpectedToken:(0,s.optional)((0,s.boolean)()),isUnrecognizedRouterAddress:(0,s.optional)((0,s.boolean)()),refuel:(0,s.optional)(c)});n.validateBridgeStatusResponse=e=>((0,s.assert)(e,n.StatusResponseSchema),!0)}}},{package:"@metamask/bridge-status-controller",file:"node_modules/@metamask/bridge-status-controller/dist/utils/validators.cjs"}],[1565,{"./constants/bridge.cjs":1566,"./constants/chains.cjs":1567,"./constants/swaps.cjs":1568,"./constants/traces.cjs":1570,"./selectors.cjs":1572,"./types.cjs":1573,"./utils/assets.cjs":1574,"./utils/balance.cjs":1575,"./utils/bridge.cjs":1576,"./utils/caip-formatters.cjs":1577,"./utils/feature-flags.cjs":1578,"./utils/fetch.cjs":1580,"./utils/metrics/constants.cjs":1581,"./utils/metrics/properties.cjs":1582,"./utils/quote-fees.cjs":1583,"./utils/quote.cjs":1584,"./utils/snaps.cjs":1586,"@ethersproject/bignumber":777,"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/metamask-eth-abis":2597,"@metamask/polling-controller":2889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f,C,S,w,I,b,T,E,k,A,v,y,_=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},M=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeController=void 0;const N=e("@ethersproject/bignumber"),P=e("@ethersproject/contracts"),R=e("@ethersproject/providers"),O=e("@metamask/metamask-eth-abis"),D=e("@metamask/polling-controller"),B=e("./constants/bridge.cjs"),L=e("./constants/chains.cjs"),j=e("./constants/swaps.cjs"),F=e("./constants/traces.cjs"),x=e("./selectors.cjs"),U=e("./types.cjs"),H=e("./utils/assets.cjs"),G=e("./utils/balance.cjs"),q=e("./utils/bridge.cjs"),$=e("./utils/caip-formatters.cjs"),W=e("./utils/feature-flags.cjs"),K=e("./utils/fetch.cjs"),V=e("./utils/metrics/constants.cjs"),Y=e("./utils/metrics/properties.cjs"),Q=e("./utils/quote.cjs"),z=e("./utils/quote-fees.cjs"),X=e("./utils/snaps.cjs"),J={quoteRequest:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotes:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesInitialLoadTime:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesLastFetched:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesLoadingStatus:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quoteFetchError:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesRefreshCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},assetExchangeRates:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},minimumBalanceForRentExemptionInLamports:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class Z extends((0,D.StaticIntervalPollingController)()){constructor({messenger:e,state:t,clientId:n,clientVersion:D,getLayer1GasFee:Z,fetchFn:ee,config:te,trackMetaMetricsFn:ne,traceFn:re}){super({name:B.BRIDGE_CONTROLLER_NAME,metadata:J,messenger:e,state:{...(0,q.getDefaultBridgeControllerState)(),...t}}),r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),this._executePoll=async e=>{await M(this,S,"f").call(this,e)},this.updateBridgeQuoteRequestParams=async(e,t)=>{M(this,v,"f").call(this,e),this.resetState(V.AbortReason.QuoteRequestUpdated);const n={...B.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest,...e};if(this.update(e=>{e.quoteRequest=n}),await M(this,h,"f").call(this,n).catch(e=>console.warn("Failed to fetch asset exchange rates",e)),(0,Q.isValidQuoteRequest)(n)){_(this,o,Date.now(),"f");const s=(0,q.isNonEvmChainId)(n.srcChainId),i=s?undefined:M(this,r,"m",T).call(this,(0,$.formatChainIdToHex)(n.srcChainId))?.configuration;let a,l=Boolean(e.resetApproval);s?a=e.insufficientBal:i?.rpcUrl?.includes("tenderly")?a=!0:(this.update(e=>{e.quotesLoadingStatus=U.RequestStatus.LOADING}),l=await M(this,C,"f").call(this,n),a=e.insufficientBal??await M(this,f,"f").call(this,n)),this.setChainIntervalLength(),this.startPolling({updatedQuoteRequest:{...n,insufficientBal:a,resetApproval:l},context:t})}},this.fetchQuotes=async(e,t=null,n=null)=>{const s=(0,W.getBridgeFeatureFlags)(this.messenger),o=n?s.quoteRequestOverrides?.[n]:undefined,u=await M(this,C,"f").call(this,e),{quotes:d,validationFailures:m}=await(0,K.fetchBridgeQuotes)(o?{...e,...o,resetApproval:u}:{...e,resetApproval:u},t,M(this,i,"f"),M(this,c,"f"),M(this,p,"f").customBridgeApiBaseUrl??B.BRIDGE_PROD_API_BASE_URL,n,M(this,a,"f"));M(this,g,"f").call(this,m);const h=await(0,z.appendFeesToQuotes)(d,this.messenger,M(this,l,"f"),M(this,r,"m",b).call(this,e.walletAddress));return(0,Q.sortQuotes)(h,n)},g.set(this,e=>{0!==e.length&&this.trackUnifiedSwapBridgeEvent(V.UnifiedSwapBridgeEventName.QuotesValidationFailed,{failures:e})}),m.set(this,()=>({...this.messenger.call("MultichainAssetsRatesController:getState"),...this.messenger.call("CurrencyRateController:getState"),...this.messenger.call("TokenRatesController:getState"),...this.state})),h.set(this,async({srcChainId:e,srcTokenAddress:t,destChainId:n,destTokenAddress:r})=>{const o=new Set([]),l=M(this,m,"f").call(this);t&&e&&!(0,x.selectIsAssetExchangeRateInState)(l,e,t)&&(0,H.getAssetIdsForToken)(t,e).forEach(e=>o.add(e)),r&&n&&!(0,x.selectIsAssetExchangeRateInState)(l,n,r)&&(0,H.getAssetIdsForToken)(r,n).forEach(e=>o.add(e));const u=this.messenger.call("CurrencyRateController:getState").currentCurrency;if(0===o.size)return;const d=await(0,K.fetchAssetPrices)({assetIds:o,currencies:new Set([u]),clientId:M(this,i,"f"),clientVersion:M(this,a,"f"),fetchFn:M(this,c,"f"),signal:M(this,s,"f")?.signal}),p=(0,H.toExchangeRates)(u,d);this.update(e=>{e.assetExchangeRates={...e.assetExchangeRates,...p}})}),f.set(this,async e=>{try{const t=(0,$.formatChainIdToHex)(e.srcChainId),n=M(this,r,"m",T).call(this,t)?.provider,s=(0,$.formatAddressToCaipReference)(e.srcTokenAddress);return!(n&&s&&e.srcTokenAmount&&t&&await(0,G.hasSufficientBalance)(n,e.walletAddress,s,e.srcTokenAmount,t))}catch(e){return console.warn("Failed to set insufficientBal",e),!0}}),C.set(this,async e=>{if((0,q.isNonEvmChainId)(e.srcChainId))return!1;try{const t=(0,$.formatAddressToCaipReference)(e.srcTokenAddress);if((0,q.isEthUsdt)(e.srcChainId,t)){const n=N.BigNumber.from(await M(this,y,"f").call(this,e.walletAddress,t,e.destChainId));return n.lt(e.srcTokenAmount)&&n.gt(0)}return!1}catch(e){return console.warn("Failed to set resetApproval",e),!0}}),this.stopPollingForQuotes=(e,t)=>{this.stopAllPolling(),this.state.quotesLoadingStatus===U.RequestStatus.LOADING&&t&&this.trackUnifiedSwapBridgeEvent(V.UnifiedSwapBridgeEventName.QuotesReceived,t),M(this,s,"f")?.abort(e)},this.resetState=(e=V.AbortReason.ResetState)=>{this.stopPollingForQuotes(e),this.update(e=>{e.quoteRequest=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest,e.quotesInitialLoadTime=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesInitialLoadTime,e.quotes=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes,e.quotesLastFetched=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLastFetched,e.quotesLoadingStatus=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLoadingStatus,e.quoteFetchError=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteFetchError,e.quotesRefreshCount=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesRefreshCount,e.assetExchangeRates=B.DEFAULT_BRIDGE_CONTROLLER_STATE.assetExchangeRates,e.minimumBalanceForRentExemptionInLamports=B.DEFAULT_BRIDGE_CONTROLLER_STATE.minimumBalanceForRentExemptionInLamports})},this.setChainIntervalLength=()=>{const{state:e}=this,{srcChainId:t}=e.quoteRequest,n=(0,W.getBridgeFeatureFlags)(this.messenger),r=t?n.chains[(0,$.formatChainIdToCaip)(t)]?.refreshRate:undefined,s=n.refreshRate;this.setIntervalLength(r??s)},S.set(this,async({updatedQuoteRequest:e,context:t})=>{M(this,s,"f")?.abort("New quote request"),_(this,s,new AbortController,"f"),this.trackUnifiedSwapBridgeEvent(V.UnifiedSwapBridgeEventName.QuotesRequested,t);const{sse:n,maxRefreshCount:i}=(0,W.getBridgeFeatureFlags)(this.messenger),l=n?.enabled&&(0,W.hasMinimumRequiredVersion)(M(this,a,"f"),n.minimumVersion);this.update(t=>{t.quoteRequest=e,t.quoteFetchError=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteFetchError,t.quotesLastFetched=Date.now(),t.quotesLoadingStatus=U.RequestStatus.LOADING});try{await M(this,d,"f").call(this,{name:(0,q.isCrossChain)(e.srcChainId,e.destChainId)?F.TraceName.BridgeQuotesFetched:F.TraceName.SwapQuotesFetched,data:{srcChainId:(0,$.formatChainIdToCaip)(e.srcChainId),destChainId:(0,$.formatChainIdToCaip)(e.destChainId)}},async()=>{const t=M(this,r,"m",b).call(this,e.walletAddress);if(M(this,I,"f").call(this,e.srcChainId,t?.metadata?.snap?.id),l)return void await M(this,w,"f").call(this,e,t);const n=await this.fetchQuotes(e,M(this,s,"f")?.signal);this.update(e=>{e.quotesRefreshCount===B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesRefreshCount&&M(this,o,"f")&&(e.quotesInitialLoadTime=Date.now()-M(this,o,"f")),e.quotes=n,e.quotesLoadingStatus=U.RequestStatus.FETCHED})})}catch(e){if(this.update(e=>{e.quotes=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes}),e.toString().includes("AbortError")||e.toString().includes("FetchRequestCanceledException")||[V.AbortReason.ResetState,V.AbortReason.NewQuoteRequest,V.AbortReason.QuoteRequestUpdated,V.AbortReason.TransactionSubmitted].includes(e))return;this.update(t=>{let n;try{n=e?.message??e.toString()}catch{}finally{t.quoteFetchError=n??"Unknown error"}t.quotesLoadingStatus=U.RequestStatus.ERROR}),this.trackUnifiedSwapBridgeEvent(V.UnifiedSwapBridgeEventName.QuotesError,t),console.log(`Failed to ${l?"stream":"fetch"} bridge quotes`,e)}this.update(e=>{e.quotesRefreshCount+=1}),(e.insufficientBal||!e.insufficientBal&&this.state.quotesRefreshCount>=i)&&this.stopAllPolling()}),w.set(this,async(e,t)=>{let n=0;const r=new Set;await(0,K.fetchBridgeQuoteStream)(M(this,c,"f"),e,M(this,s,"f")?.signal,M(this,i,"f"),M(this,p,"f").customBridgeApiBaseUrl??B.BRIDGE_PROD_API_BASE_URL,{onValidationFailure:M(this,g,"f"),onValidQuoteReceived:async e=>{const s=(async()=>{const r=await(0,z.appendFeesToQuotes)([e],this.messenger,M(this,l,"f"),t);r.length>0&&(n+=1),this.update(e=>{1===n&&(e.quotes=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes,!e.quotesInitialLoadTime&&M(this,o,"f")&&(e.quotesInitialLoadTime=Date.now()-M(this,o,"f"))),e.quotes=[...e.quotes,...r]})})();r.add(s),s.catch(e=>{console.error("Error appending fees to quote",e)}).finally(()=>{r.delete(s)}),await s},onClose:async()=>{await Promise.allSettled(Array.from(r)),this.update(e=>{0===n&&(e.quotes=B.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes),e.quotesLoadingStatus=U.RequestStatus.FETCHED})}},M(this,a,"f"))}),I.set(this,async(e,t)=>{if(!(0,q.isSolanaChainId)(e)||!t)return;const n=await(0,X.getMinimumBalanceForRentExemptionInLamports)(t,this.messenger);this.update(e=>{e.minimumBalanceForRentExemptionInLamports=n})}),E.set(this,()=>({slippage_limit:this.state.quoteRequest.slippage,swap_type:(0,Y.getSwapTypeFromQuote)(this.state.quoteRequest),custom_slippage:(0,Y.isCustomSlippage)(this.state.quoteRequest.slippage)})),k.set(this,()=>({quotes_count:this.state.quotes.length,quotes_list:this.state.quotes.map(({quote:e})=>(0,Y.formatProviderLabel)(e)),initial_load_time_all_quotes:this.state.quotesInitialLoadTime??0})),A.set(this,(e,t)=>{const n={...t,action_type:V.MetricsActionType.SWAPBRIDGE_V1};switch(e){case V.UnifiedSwapBridgeEventName.ButtonClicked:case V.UnifiedSwapBridgeEventName.PageViewed:return{...(0,Y.getRequestParams)(this.state.quoteRequest),...n};case V.UnifiedSwapBridgeEventName.QuotesValidationFailed:return{...(0,Y.getRequestParams)(this.state.quoteRequest),refresh_count:this.state.quotesRefreshCount,...n};case V.UnifiedSwapBridgeEventName.QuotesReceived:return{...(0,Y.getRequestParams)(this.state.quoteRequest),...M(this,E,"f").call(this),...M(this,k,"f").call(this),is_hardware_wallet:(0,Y.isHardwareWallet)(M(this,r,"m",b).call(this)),refresh_count:this.state.quotesRefreshCount,...n};case V.UnifiedSwapBridgeEventName.QuotesRequested:return{...(0,Y.getRequestParams)(this.state.quoteRequest),...M(this,E,"f").call(this),is_hardware_wallet:(0,Y.isHardwareWallet)(M(this,r,"m",b).call(this)),has_sufficient_funds:!this.state.quoteRequest.insufficientBal,...n};case V.UnifiedSwapBridgeEventName.QuotesError:return{...(0,Y.getRequestParams)(this.state.quoteRequest),...M(this,E,"f").call(this),is_hardware_wallet:(0,Y.isHardwareWallet)(M(this,r,"m",b).call(this)),error_message:this.state.quoteFetchError,has_sufficient_funds:!this.state.quoteRequest.insufficientBal,...n};case V.UnifiedSwapBridgeEventName.AllQuotesOpened:case V.UnifiedSwapBridgeEventName.AllQuotesSorted:case V.UnifiedSwapBridgeEventName.QuoteSelected:return{...(0,Y.getRequestParams)(this.state.quoteRequest),...M(this,E,"f").call(this),...M(this,k,"f").call(this),is_hardware_wallet:(0,Y.isHardwareWallet)(M(this,r,"m",b).call(this)),...n};case V.UnifiedSwapBridgeEventName.Failed:return{...n,...(0,Y.getRequestParams)(this.state.quoteRequest),...M(this,E,"f").call(this),...M(this,k,"f").call(this),...t};case V.UnifiedSwapBridgeEventName.AssetDetailTooltipClicked:return n;case V.UnifiedSwapBridgeEventName.Submitted:case V.UnifiedSwapBridgeEventName.Completed:return t;case V.UnifiedSwapBridgeEventName.InputChanged:default:return n}}),v.set(this,e=>{Object.entries(e).forEach(([t,n])=>{const r=Y.toInputChangedPropertyKey[t],s=Y.toInputChangedPropertyValue[t]?.(e);r&&s!==undefined&&n!==this.state.quoteRequest[t]&&this.trackUnifiedSwapBridgeEvent(V.UnifiedSwapBridgeEventName.InputChanged,{input:r,input_value:s})})}),this.trackUnifiedSwapBridgeEvent=(e,t)=>{try{const n=M(this,A,"f").call(this,e,t);M(this,u,"f").call(this,e,n)}catch(t){console.error(`Error tracking cross-chain swaps MetaMetrics event ${e}`,t)}},y.set(this,async(e,t,n)=>{const s=M(this,r,"m",T).call(this,L.CHAIN_IDS.MAINNET),o=s?.provider;if(!o)throw new Error("No provider found");const i=new R.Web3Provider(o),a=new P.Contract(t,O.abiERC20,i),l=(0,q.isCrossChain)(L.CHAIN_IDS.MAINNET,n)?B.METABRIDGE_ETHEREUM_ADDRESS:j.SWAPS_CONTRACT_ADDRESSES[L.CHAIN_IDS.MAINNET];return(await a.allowance(e,l)).toString()}),this.setIntervalLength(B.REFRESH_INTERVAL_MS),_(this,s,new AbortController,"f"),_(this,l,Z,"f"),_(this,i,n,"f"),_(this,a,D,"f"),_(this,c,ee,"f"),_(this,u,ne,"f"),_(this,p,te??{},"f"),_(this,d,re??((e,t)=>t?.()),"f"),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:setChainIntervalLength`,this.setChainIntervalLength.bind(this)),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:updateBridgeQuoteRequestParams`,this.updateBridgeQuoteRequestParams.bind(this)),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:resetState`,this.resetState.bind(this)),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:trackUnifiedSwapBridgeEvent`,this.trackUnifiedSwapBridgeEvent.bind(this)),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:stopPollingForQuotes`,this.stopPollingForQuotes.bind(this)),this.messenger.registerActionHandler(`${B.BRIDGE_CONTROLLER_NAME}:fetchQuotes`,this.fetchQuotes.bind(this))}}n.BridgeController=Z,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,C=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,E=new WeakMap,k=new WeakMap,A=new WeakMap,v=new WeakMap,y=new WeakMap,r=new WeakSet,b=function(e){const t=e??this.state.quoteRequest.walletAddress;if(!t)throw new Error("Account address is required");return this.messenger.call("AccountsController:getAccountByAddress",t)},T=function(e){const t=this.messenger.call("NetworkController:findNetworkClientIdByChainId",e);if(!t)throw new Error(`No network client found for chainId: ${e}`);return this.messenger.call("NetworkController:getNetworkClientById",t)}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/bridge-controller.cjs"}],[1566,{"./chains.cjs":1567,"@ethersproject/constants":783,"@metamask/keyring-api":2510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METABRIDGE_CHAIN_TO_ADDRESS_MAP=n.DEFAULT_BRIDGE_CONTROLLER_STATE=n.DEFAULT_FEATURE_FLAG_CONFIG=n.BRIDGE_CONTROLLER_NAME=n.DEFAULT_MAX_REFRESH_COUNT=n.REFRESH_INTERVAL_MS=n.BRIDGE_MM_FEE_RATE=n.BRIDGE_PREFERRED_GAS_ESTIMATE=n.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=n.BRIDGE_QUOTE_MAX_ETA_SECONDS=n.METABRIDGE_ETHEREUM_ADDRESS=n.ETH_USDT_ADDRESS=n.BridgeClientId=n.BRIDGE_PROD_API_BASE_URL=n.BRIDGE_DEV_API_BASE_URL=n.ALLOWED_BRIDGE_CHAIN_IDS=void 0;const r=e("@ethersproject/constants"),s=e("@metamask/keyring-api"),o=e("./chains.cjs");var i;n.ALLOWED_BRIDGE_CHAIN_IDS=[o.CHAIN_IDS.MAINNET,o.CHAIN_IDS.BSC,o.CHAIN_IDS.POLYGON,o.CHAIN_IDS.ZKSYNC_ERA,o.CHAIN_IDS.AVALANCHE,o.CHAIN_IDS.OPTIMISM,o.CHAIN_IDS.ARBITRUM,o.CHAIN_IDS.LINEA_MAINNET,o.CHAIN_IDS.BASE,o.CHAIN_IDS.SEI,o.CHAIN_IDS.MONAD,s.SolScope.Mainnet,s.BtcScope.Mainnet,s.TrxScope.Mainnet],n.BRIDGE_DEV_API_BASE_URL="https://bridge.dev-api.cx.metamask.io",n.BRIDGE_PROD_API_BASE_URL="https://bridge.api.cx.metamask.io",function(e){e.EXTENSION="extension",e.MOBILE="mobile"}(i||(n.BridgeClientId=i={})),n.ETH_USDT_ADDRESS="0xdac17f958d2ee523a2206206994597c13d831ec7",n.METABRIDGE_ETHEREUM_ADDRESS="0x0439e60F02a8900a951603950d8D4527f400C3f1",n.BRIDGE_QUOTE_MAX_ETA_SECONDS=3600,n.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=.5,n.BRIDGE_PREFERRED_GAS_ESTIMATE="medium",n.BRIDGE_MM_FEE_RATE=.875,n.REFRESH_INTERVAL_MS=3e4,n.DEFAULT_MAX_REFRESH_COUNT=5,n.BRIDGE_CONTROLLER_NAME="BridgeController",n.DEFAULT_FEATURE_FLAG_CONFIG={minimumVersion:"0.0.0",refreshRate:n.REFRESH_INTERVAL_MS,maxRefreshCount:n.DEFAULT_MAX_REFRESH_COUNT,support:!1,chains:{}},n.DEFAULT_BRIDGE_CONTROLLER_STATE={quoteRequest:{srcTokenAddress:r.AddressZero},quotesInitialLoadTime:null,quotes:[],quotesLastFetched:null,quotesLoadingStatus:null,quoteFetchError:null,quotesRefreshCount:0,assetExchangeRates:{},minimumBalanceForRentExemptionInLamports:"0"},n.METABRIDGE_CHAIN_TO_ADDRESS_MAP={[o.CHAIN_IDS.MAINNET]:n.METABRIDGE_ETHEREUM_ADDRESS}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/constants/bridge.cjs"}],[1567,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NETWORK_TO_NAME_MAP=n.MONAD_DISPLAY_NAME=n.SEI_DISPLAY_NAME=n.MODE_DISPLAY_NAME=n.MODE_SEPOLIA_DISPLAY_NAME=n.SONEIUM_DISPLAY_NAME=n.INK_DISPLAY_NAME=n.INK_SEPOLIA_DISPLAY_NAME=n.LISK_SEPOLIA_DISPLAY_NAME=n.LISK_DISPLAY_NAME=n.METACHAIN_ONE_DISPLAY_NAME=n.BERACHAIN_DISPLAY_NAME=n.OP_BNB_DISPLAY_NAME=n.SCROLL_SEPOLIA_DISPLAY_NAME=n.SCROLL_DISPLAY_NAME=n.MOONRIVER_DISPLAY_NAME=n.MOONBEAM_DISPLAY_NAME=n.POLYGON_ZKEVM_DISPLAY_NAME=n.CRONOS_DISPLAY_NAME=n.AURORA_DISPLAY_NAME=n.BASE_DISPLAY_NAME=n.ZK_SYNC_ERA_DISPLAY_NAME=n.GNOSIS_DISPLAY_NAME=n.CELO_DISPLAY_NAME=n.PALM_DISPLAY_NAME=n.HARMONY_DISPLAY_NAME=n.FANTOM_DISPLAY_NAME=n.OPTIMISM_DISPLAY_NAME=n.BNB_DISPLAY_NAME=n.ARBITRUM_DISPLAY_NAME=n.AVALANCHE_DISPLAY_NAME=n.POLYGON_DISPLAY_NAME=n.BSC_DISPLAY_NAME=n.LOCALHOST_DISPLAY_NAME=n.LINEA_MAINNET_DISPLAY_NAME=n.LINEA_SEPOLIA_DISPLAY_NAME=n.LINEA_GOERLI_DISPLAY_NAME=n.SEPOLIA_DISPLAY_NAME=n.GOERLI_DISPLAY_NAME=n.MAINNET_DISPLAY_NAME=n.NETWORK_TYPES=n.CHAIN_IDS=void 0,n.CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",LOCALHOST:"0x539",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0xaa37dc",OPTIMISM_GOERLI:"0x1a4",BASE:"0x2105",BASE_TESTNET:"0x14a33",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",CELO:"0xa4ec",ARBITRUM:"0xa4b1",HARMONY:"0x63564c40",PALM:"0x2a15c308d",SEPOLIA:"0xaa36a7",HOLESKY:"0x4268",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",AMOY:"0x13882",BASE_SEPOLIA:"0x14a34",BLAST_SEPOLIA:"0xa0c71fd",OPTIMISM_SEPOLIA:"0xaa37dc",PALM_TESTNET:"0x2a15c3083",CELO_TESTNET:"0xaef3",ZK_SYNC_ERA_TESTNET:"0x12c",MANTA_SEPOLIA:"0x138b",UNICHAIN_SEPOLIA:"0x515",LINEA_MAINNET:"0xe708",AURORA:"0x4e454152",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",CRONOS:"0x19",GNOSIS:"0x64",ZKSYNC_ERA:"0x144",TEST_ETH:"0x539",ARBITRUM_GOERLI:"0x66eed",BLAST:"0x13e31",FILECOIN:"0x13a",POLYGON_ZKEVM:"0x44d",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f",WETHIO:"0x4e",CHZ:"0x15b38",NUMBERS:"0x290b",SEI:"0x531",APE_TESTNET:"0x8157",APE_MAINNET:"0x8173",BERACHAIN:"0x138d5",METACHAIN_ONE:"0x1b6e6",ARBITRUM_SEPOLIA:"0x66eee",NEAR:"0x18d",NEAR_TESTNET:"0x18e",B3:"0x208d",B3_TESTNET:"0x7c9",GRAVITY_ALPHA_MAINNET:"0x659",GRAVITY_ALPHA_TESTNET_SEPOLIA:"0x34c1",LISK:"0x46f",LISK_SEPOLIA:"0x106a",INK_SEPOLIA:"0xba5eD",INK:"0xdef1",MODE_SEPOLIA:"0x397",MODE:"0x868b",MONAD:"0x8f"},n.NETWORK_TYPES={GOERLI:"goerli",LOCALHOST:"localhost",MAINNET:"mainnet",SEPOLIA:"sepolia",LINEA_GOERLI:"linea-goerli",LINEA_SEPOLIA:"linea-sepolia",LINEA_MAINNET:"linea-mainnet"},n.MAINNET_DISPLAY_NAME="Ethereum Mainnet",n.GOERLI_DISPLAY_NAME="Goerli",n.SEPOLIA_DISPLAY_NAME="Sepolia",n.LINEA_GOERLI_DISPLAY_NAME="Linea Goerli",n.LINEA_SEPOLIA_DISPLAY_NAME="Linea Sepolia",n.LINEA_MAINNET_DISPLAY_NAME="Linea Mainnet",n.LOCALHOST_DISPLAY_NAME="Localhost 8545",n.BSC_DISPLAY_NAME="Binance Smart Chain",n.POLYGON_DISPLAY_NAME="Polygon",n.AVALANCHE_DISPLAY_NAME="Avalanche Network C-Chain",n.ARBITRUM_DISPLAY_NAME="Arbitrum One",n.BNB_DISPLAY_NAME="BNB Chain",n.OPTIMISM_DISPLAY_NAME="OP Mainnet",n.FANTOM_DISPLAY_NAME="Fantom Opera",n.HARMONY_DISPLAY_NAME="Harmony Mainnet Shard 0",n.PALM_DISPLAY_NAME="Palm",n.CELO_DISPLAY_NAME="Celo Mainnet",n.GNOSIS_DISPLAY_NAME="Gnosis",n.ZK_SYNC_ERA_DISPLAY_NAME="zkSync Era Mainnet",n.BASE_DISPLAY_NAME="Base Mainnet",n.AURORA_DISPLAY_NAME="Aurora Mainnet",n.CRONOS_DISPLAY_NAME="Cronos",n.POLYGON_ZKEVM_DISPLAY_NAME="Polygon zkEVM",n.MOONBEAM_DISPLAY_NAME="Moonbeam",n.MOONRIVER_DISPLAY_NAME="Moonriver",n.SCROLL_DISPLAY_NAME="Scroll",n.SCROLL_SEPOLIA_DISPLAY_NAME="Scroll Sepolia",n.OP_BNB_DISPLAY_NAME="opBNB",n.BERACHAIN_DISPLAY_NAME="Berachain Artio",n.METACHAIN_ONE_DISPLAY_NAME="Metachain One Mainnet",n.LISK_DISPLAY_NAME="Lisk",n.LISK_SEPOLIA_DISPLAY_NAME="Lisk Sepolia",n.INK_SEPOLIA_DISPLAY_NAME="Ink Sepolia",n.INK_DISPLAY_NAME="Ink Mainnet",n.SONEIUM_DISPLAY_NAME="Soneium Mainnet",n.MODE_SEPOLIA_DISPLAY_NAME="Mode Sepolia",n.MODE_DISPLAY_NAME="Mode Mainnet",n.SEI_DISPLAY_NAME="Sei Network",n.MONAD_DISPLAY_NAME="Monad",n.NETWORK_TO_NAME_MAP={[n.NETWORK_TYPES.GOERLI]:n.GOERLI_DISPLAY_NAME,[n.NETWORK_TYPES.MAINNET]:n.MAINNET_DISPLAY_NAME,[n.NETWORK_TYPES.LINEA_GOERLI]:n.LINEA_GOERLI_DISPLAY_NAME,[n.NETWORK_TYPES.LINEA_SEPOLIA]:n.LINEA_SEPOLIA_DISPLAY_NAME,[n.NETWORK_TYPES.LINEA_MAINNET]:n.LINEA_MAINNET_DISPLAY_NAME,[n.NETWORK_TYPES.LOCALHOST]:n.LOCALHOST_DISPLAY_NAME,[n.NETWORK_TYPES.SEPOLIA]:n.SEPOLIA_DISPLAY_NAME,[n.CHAIN_IDS.ARBITRUM]:n.ARBITRUM_DISPLAY_NAME,[n.CHAIN_IDS.AVALANCHE]:n.AVALANCHE_DISPLAY_NAME,[n.CHAIN_IDS.BSC]:n.BSC_DISPLAY_NAME,[n.CHAIN_IDS.BASE]:n.BASE_DISPLAY_NAME,[n.CHAIN_IDS.GOERLI]:n.GOERLI_DISPLAY_NAME,[n.CHAIN_IDS.MAINNET]:n.MAINNET_DISPLAY_NAME,[n.CHAIN_IDS.LINEA_GOERLI]:n.LINEA_GOERLI_DISPLAY_NAME,[n.CHAIN_IDS.LINEA_MAINNET]:n.LINEA_MAINNET_DISPLAY_NAME,[n.CHAIN_IDS.LINEA_SEPOLIA]:n.LINEA_SEPOLIA_DISPLAY_NAME,[n.CHAIN_IDS.LOCALHOST]:n.LOCALHOST_DISPLAY_NAME,[n.CHAIN_IDS.OPTIMISM]:n.OPTIMISM_DISPLAY_NAME,[n.CHAIN_IDS.POLYGON]:n.POLYGON_DISPLAY_NAME,[n.CHAIN_IDS.SCROLL]:n.SCROLL_DISPLAY_NAME,[n.CHAIN_IDS.SCROLL_SEPOLIA]:n.SCROLL_SEPOLIA_DISPLAY_NAME,[n.CHAIN_IDS.SEPOLIA]:n.SEPOLIA_DISPLAY_NAME,[n.CHAIN_IDS.OPBNB]:n.OP_BNB_DISPLAY_NAME,[n.CHAIN_IDS.ZKSYNC_ERA]:n.ZK_SYNC_ERA_DISPLAY_NAME,[n.CHAIN_IDS.BERACHAIN]:n.BERACHAIN_DISPLAY_NAME,[n.CHAIN_IDS.METACHAIN_ONE]:n.METACHAIN_ONE_DISPLAY_NAME,[n.CHAIN_IDS.LISK]:n.LISK_DISPLAY_NAME,[n.CHAIN_IDS.LISK_SEPOLIA]:n.LISK_SEPOLIA_DISPLAY_NAME,[n.CHAIN_IDS.SEI]:n.SEI_DISPLAY_NAME,[n.CHAIN_IDS.MONAD]:n.MONAD_DISPLAY_NAME}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/constants/chains.cjs"}],[1568,{"./chains.cjs":1567},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ALLOWED_CONTRACT_ADDRESSES=n.SWAPS_WRAPPED_TOKENS_ADDRESSES=n.SWAPS_CONTRACT_ADDRESSES=n.SWAPS_API_V2_BASE_URL=void 0;const r=e("./chains.cjs");n.SWAPS_API_V2_BASE_URL="https://swap.api.cx.metamask.io";const s="0x881d40237659c251811cec9c364ef91dc08d300c";n.SWAPS_CONTRACT_ADDRESSES={[r.CHAIN_IDS.MAINNET]:s,[r.CHAIN_IDS.LOCALHOST]:s,[r.CHAIN_IDS.BSC]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[r.CHAIN_IDS.POLYGON]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[r.CHAIN_IDS.AVALANCHE]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[r.CHAIN_IDS.ARBITRUM]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[r.CHAIN_IDS.OPTIMISM]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[r.CHAIN_IDS.ZKSYNC_ERA]:"0xf504c1fe13d14df615e66dcd0abf39e60c697f34",[r.CHAIN_IDS.LINEA_MAINNET]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[r.CHAIN_IDS.BASE]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[r.CHAIN_IDS.SEI]:"0x962287c9d5B8a682389E61edAE90ec882325d08b"};const o="0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2";n.SWAPS_WRAPPED_TOKENS_ADDRESSES={[r.CHAIN_IDS.MAINNET]:o,[r.CHAIN_IDS.LOCALHOST]:o,[r.CHAIN_IDS.BSC]:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",[r.CHAIN_IDS.POLYGON]:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",[r.CHAIN_IDS.AVALANCHE]:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",[r.CHAIN_IDS.ARBITRUM]:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",[r.CHAIN_IDS.OPTIMISM]:"0x4200000000000000000000000000000000000006",[r.CHAIN_IDS.ZKSYNC_ERA]:"0x5AEa5775959fBC2557Cc8789bC1bf90A239D9a91",[r.CHAIN_IDS.LINEA_MAINNET]:"0xe5D7C2a44FfDDf6b295A15c148167daaAf5Cf34f",[r.CHAIN_IDS.BASE]:"0x4200000000000000000000000000000000000006",[r.CHAIN_IDS.SEI]:"0xe30fedd158a2e3b13e9badaeabafc5516e95e8c7"},n.ALLOWED_CONTRACT_ADDRESSES={[r.CHAIN_IDS.MAINNET]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.MAINNET],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.MAINNET]],[r.CHAIN_IDS.LOCALHOST]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.LOCALHOST],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.LOCALHOST]],[r.CHAIN_IDS.BSC]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.BSC],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.BSC]],[r.CHAIN_IDS.POLYGON]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.POLYGON],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.POLYGON]],[r.CHAIN_IDS.AVALANCHE]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.AVALANCHE],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.AVALANCHE]],[r.CHAIN_IDS.ARBITRUM]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.ARBITRUM],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.ARBITRUM]],[r.CHAIN_IDS.OPTIMISM]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.OPTIMISM],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.OPTIMISM]],[r.CHAIN_IDS.ZKSYNC_ERA]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.ZKSYNC_ERA],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.ZKSYNC_ERA]],[r.CHAIN_IDS.LINEA_MAINNET]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.LINEA_MAINNET],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.LINEA_MAINNET]],[r.CHAIN_IDS.BASE]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.BASE],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.BASE]],[r.CHAIN_IDS.SEI]:[n.SWAPS_CONTRACT_ADDRESSES[r.CHAIN_IDS.SEI],n.SWAPS_WRAPPED_TOKENS_ADDRESSES[r.CHAIN_IDS.SEI]]}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/constants/swaps.cjs"}],[1569,{"./chains.cjs":1567,"@metamask/keyring-api":2510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SYMBOL_TO_SLIP44_MAP=n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=n.DEFAULT_TOKEN_ADDRESS=void 0;const r=e("@metamask/keyring-api"),s=e("./chains.cjs");n.DEFAULT_TOKEN_ADDRESS="0x0000000000000000000000000000000000000000";const o="AVAX",i="BNB",a="ETH",l="POL",c="TESTETH",u="SOL",d="SEI",p="BTC",g="TRX",m="MON",h={symbol:a,name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},f={symbol:i,name:"Binance Coin",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},C={symbol:l,name:"Polygon",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},S={symbol:o,name:"Avalanche",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},w={symbol:c,name:"Test Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},I={symbol:a,name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},b={symbol:a,name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},T={...h},E={...h},k={...h},A={...h},v={...h},y={symbol:u,name:"Solana",address:n.DEFAULT_TOKEN_ADDRESS,decimals:9,iconUrl:""},_={symbol:p,name:"Bitcoin",address:n.DEFAULT_TOKEN_ADDRESS,decimals:8,iconUrl:""},M={symbol:d,name:"Sei",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},N={symbol:g,name:"Tron",address:n.DEFAULT_TOKEN_ADDRESS,decimals:6,iconUrl:""},P={symbol:m,name:"Mon",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""};n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP={[s.CHAIN_IDS.MAINNET]:h,[s.CHAIN_IDS.LOCALHOST]:w,[s.CHAIN_IDS.BSC]:f,[s.CHAIN_IDS.POLYGON]:C,[s.CHAIN_IDS.GOERLI]:I,[s.CHAIN_IDS.SEPOLIA]:b,[s.CHAIN_IDS.AVALANCHE]:S,[s.CHAIN_IDS.OPTIMISM]:E,[s.CHAIN_IDS.ARBITRUM]:T,[s.CHAIN_IDS.ZKSYNC_ERA]:k,[s.CHAIN_IDS.LINEA_MAINNET]:A,[s.CHAIN_IDS.BASE]:v,[s.CHAIN_IDS.SEI]:M,[s.CHAIN_IDS.MONAD]:P,[r.SolScope.Mainnet]:y,[r.SolScope.Devnet]:y,[r.BtcScope.Mainnet]:_,[r.TrxScope.Mainnet]:N},n.SYMBOL_TO_SLIP44_MAP={SOL:"slip44:501",BTC:"slip44:0",ETH:"slip44:60",POL:"slip44:966",BNB:"slip44:714",AVAX:"slip44:9000",TESTETH:"slip44:60",SEI:"slip44:19000118",TRX:"slip44:195",MON:"slip44:268435779"}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/constants/tokens.cjs"}],[157,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubjectMetadataControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubjectMetadataController",parent:e});return e.delegate({messenger:t,actions:["PermissionController:hasPermissions"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subject-metadata-controller-messenger.ts"}],[1570,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.TraceName=void 0,function(e){e.BridgeQuotesFetched="Bridge Quotes Fetched",e.SwapQuotesFetched="Swap Quotes Fetched"}(r||(n.TraceName=r={}))}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/constants/traces.cjs"}],[1571,{"./bridge-controller.cjs":1565,"./constants/bridge.cjs":1566,"./constants/swaps.cjs":1568,"./constants/tokens.cjs":1569,"./selectors.cjs":1572,"./types.cjs":1573,"./utils/balance.cjs":1575,"./utils/bridge.cjs":1576,"./utils/caip-formatters.cjs":1577,"./utils/feature-flags.cjs":1578,"./utils/fetch.cjs":1580,"./utils/metrics/constants.cjs":1581,"./utils/metrics/properties.cjs":1582,"./utils/quote.cjs":1584,"./utils/slippage.cjs":1585,"./utils/swaps.cjs":1587,"./utils/trade-utils.cjs":1588,"./utils/validators.cjs":1589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidQuoteRequest=n.isCrossChain=n.getDefaultBridgeControllerState=n.getNativeAssetForChainId=n.isNonEvmChainId=n.isBitcoinChainId=n.isSolanaChainId=n.isNativeAddress=n.isEthUsdt=n.MetricsSwapType=n.MetricsActionType=n.ALLOWED_CONTRACT_ADDRESSES=n.SWAPS_WRAPPED_TOKENS_ADDRESSES=n.SWAPS_CONTRACT_ADDRESSES=n.SWAPS_API_V2_BASE_URL=n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=n.BRIDGE_PROD_API_BASE_URL=n.BRIDGE_DEV_API_BASE_URL=n.METABRIDGE_CHAIN_TO_ADDRESS_MAP=n.DEFAULT_BRIDGE_CONTROLLER_STATE=n.DEFAULT_MAX_REFRESH_COUNT=n.REFRESH_INTERVAL_MS=n.BRIDGE_MM_FEE_RATE=n.BRIDGE_PREFERRED_GAS_ESTIMATE=n.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=n.BRIDGE_QUOTE_MAX_ETA_SECONDS=n.BRIDGE_CONTROLLER_NAME=n.BridgeClientId=n.ALLOWED_BRIDGE_CHAIN_IDS=n.FeatureId=n.BridgeAssetSchema=n.ActionTypes=n.FeeType=n.BridgeBackgroundAction=n.BridgeUserAction=n.RequestStatus=n.ChainId=n.SortOrder=n.AssetType=n.StatusTypes=n.AbortReason=n.getQuotesReceivedProperties=n.isCustomSlippage=n.isHardwareWallet=n.getSwapType=n.getRequestParams=n.formatProviderLabel=n.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY=n.UnifiedSwapBridgeEventName=n.BridgeController=void 0,n.fetchTokens=n.getSwapsContractAddress=n.isValidSwapsContractAddress=n.BRIDGE_DEFAULT_SLIPPAGE=n.getBridgeFeatureFlags=n.DEFAULT_FEATURE_FLAG_CONFIG=n.selectMinimumBalanceForRentExemptionInSOL=n.selectBridgeFeatureFlags=n.selectIsQuoteExpired=n.selectExchangeRateByChainIdAndAddress=n.selectDefaultSlippagePercentage=n.selectBridgeQuotes=n.isEvmTxData=n.isTronTrade=n.isBitcoinTrade=n.extractTradeData=n.formatAddressToAssetId=n.formatAddressToCaipReference=n.formatChainIdToHex=n.formatChainIdToCaip=n.getClientHeaders=n.fetchBridgeTokens=n.calcLatestSrcBalance=n.calcSlippagePercentage=n.formatEtaInMinutes=void 0;var r=e("./bridge-controller.cjs");Object.defineProperty(n,"BridgeController",{enumerable:!0,get:function(){return r.BridgeController}});var s=e("./utils/metrics/constants.cjs");Object.defineProperty(n,"UnifiedSwapBridgeEventName",{enumerable:!0,get:function(){return s.UnifiedSwapBridgeEventName}}),Object.defineProperty(n,"UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY",{enumerable:!0,get:function(){return s.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY}});var o=e("./utils/metrics/properties.cjs");Object.defineProperty(n,"formatProviderLabel",{enumerable:!0,get:function(){return o.formatProviderLabel}}),Object.defineProperty(n,"getRequestParams",{enumerable:!0,get:function(){return o.getRequestParams}}),Object.defineProperty(n,"getSwapType",{enumerable:!0,get:function(){return o.getSwapType}}),Object.defineProperty(n,"isHardwareWallet",{enumerable:!0,get:function(){return o.isHardwareWallet}}),Object.defineProperty(n,"isCustomSlippage",{enumerable:!0,get:function(){return o.isCustomSlippage}}),Object.defineProperty(n,"getQuotesReceivedProperties",{enumerable:!0,get:function(){return o.getQuotesReceivedProperties}});var i=e("./utils/metrics/constants.cjs");Object.defineProperty(n,"AbortReason",{enumerable:!0,get:function(){return i.AbortReason}});var a=e("./types.cjs");Object.defineProperty(n,"StatusTypes",{enumerable:!0,get:function(){return a.StatusTypes}});var l=e("./types.cjs");Object.defineProperty(n,"AssetType",{enumerable:!0,get:function(){return l.AssetType}}),Object.defineProperty(n,"SortOrder",{enumerable:!0,get:function(){return l.SortOrder}}),Object.defineProperty(n,"ChainId",{enumerable:!0,get:function(){return l.ChainId}}),Object.defineProperty(n,"RequestStatus",{enumerable:!0,get:function(){return l.RequestStatus}}),Object.defineProperty(n,"BridgeUserAction",{enumerable:!0,get:function(){return l.BridgeUserAction}}),Object.defineProperty(n,"BridgeBackgroundAction",{enumerable:!0,get:function(){return l.BridgeBackgroundAction}});var c=e("./utils/validators.cjs");Object.defineProperty(n,"FeeType",{enumerable:!0,get:function(){return c.FeeType}}),Object.defineProperty(n,"ActionTypes",{enumerable:!0,get:function(){return c.ActionTypes}}),Object.defineProperty(n,"BridgeAssetSchema",{enumerable:!0,get:function(){return c.BridgeAssetSchema}}),Object.defineProperty(n,"FeatureId",{enumerable:!0,get:function(){return c.FeatureId}});var u=e("./constants/bridge.cjs");Object.defineProperty(n,"ALLOWED_BRIDGE_CHAIN_IDS",{enumerable:!0,get:function(){return u.ALLOWED_BRIDGE_CHAIN_IDS}}),Object.defineProperty(n,"BridgeClientId",{enumerable:!0,get:function(){return u.BridgeClientId}}),Object.defineProperty(n,"BRIDGE_CONTROLLER_NAME",{enumerable:!0,get:function(){return u.BRIDGE_CONTROLLER_NAME}}),Object.defineProperty(n,"BRIDGE_QUOTE_MAX_ETA_SECONDS",{enumerable:!0,get:function(){return u.BRIDGE_QUOTE_MAX_ETA_SECONDS}}),Object.defineProperty(n,"BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE",{enumerable:!0,get:function(){return u.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE}}),Object.defineProperty(n,"BRIDGE_PREFERRED_GAS_ESTIMATE",{enumerable:!0,get:function(){return u.BRIDGE_PREFERRED_GAS_ESTIMATE}}),Object.defineProperty(n,"BRIDGE_MM_FEE_RATE",{enumerable:!0,get:function(){return u.BRIDGE_MM_FEE_RATE}}),Object.defineProperty(n,"REFRESH_INTERVAL_MS",{enumerable:!0,get:function(){return u.REFRESH_INTERVAL_MS}}),Object.defineProperty(n,"DEFAULT_MAX_REFRESH_COUNT",{enumerable:!0,get:function(){return u.DEFAULT_MAX_REFRESH_COUNT}}),Object.defineProperty(n,"DEFAULT_BRIDGE_CONTROLLER_STATE",{enumerable:!0,get:function(){return u.DEFAULT_BRIDGE_CONTROLLER_STATE}}),Object.defineProperty(n,"METABRIDGE_CHAIN_TO_ADDRESS_MAP",{enumerable:!0,get:function(){return u.METABRIDGE_CHAIN_TO_ADDRESS_MAP}}),Object.defineProperty(n,"BRIDGE_DEV_API_BASE_URL",{enumerable:!0,get:function(){return u.BRIDGE_DEV_API_BASE_URL}}),Object.defineProperty(n,"BRIDGE_PROD_API_BASE_URL",{enumerable:!0,get:function(){return u.BRIDGE_PROD_API_BASE_URL}});var d=e("./constants/tokens.cjs");Object.defineProperty(n,"SWAPS_CHAINID_DEFAULT_TOKEN_MAP",{enumerable:!0,get:function(){return d.SWAPS_CHAINID_DEFAULT_TOKEN_MAP}});var p=e("./constants/swaps.cjs");Object.defineProperty(n,"SWAPS_API_V2_BASE_URL",{enumerable:!0,get:function(){return p.SWAPS_API_V2_BASE_URL}}),Object.defineProperty(n,"SWAPS_CONTRACT_ADDRESSES",{enumerable:!0,get:function(){return p.SWAPS_CONTRACT_ADDRESSES}}),Object.defineProperty(n,"SWAPS_WRAPPED_TOKENS_ADDRESSES",{enumerable:!0,get:function(){return p.SWAPS_WRAPPED_TOKENS_ADDRESSES}}),Object.defineProperty(n,"ALLOWED_CONTRACT_ADDRESSES",{enumerable:!0,get:function(){return p.ALLOWED_CONTRACT_ADDRESSES}});var g=e("./utils/metrics/constants.cjs");Object.defineProperty(n,"MetricsActionType",{enumerable:!0,get:function(){return g.MetricsActionType}}),Object.defineProperty(n,"MetricsSwapType",{enumerable:!0,get:function(){return g.MetricsSwapType}});var m=e("./utils/bridge.cjs");Object.defineProperty(n,"isEthUsdt",{enumerable:!0,get:function(){return m.isEthUsdt}}),Object.defineProperty(n,"isNativeAddress",{enumerable:!0,get:function(){return m.isNativeAddress}}),Object.defineProperty(n,"isSolanaChainId",{enumerable:!0,get:function(){return m.isSolanaChainId}}),Object.defineProperty(n,"isBitcoinChainId",{enumerable:!0,get:function(){return m.isBitcoinChainId}}),Object.defineProperty(n,"isNonEvmChainId",{enumerable:!0,get:function(){return m.isNonEvmChainId}}),Object.defineProperty(n,"getNativeAssetForChainId",{enumerable:!0,get:function(){return m.getNativeAssetForChainId}}),Object.defineProperty(n,"getDefaultBridgeControllerState",{enumerable:!0,get:function(){return m.getDefaultBridgeControllerState}}),Object.defineProperty(n,"isCrossChain",{enumerable:!0,get:function(){return m.isCrossChain}});var h=e("./utils/quote.cjs");Object.defineProperty(n,"isValidQuoteRequest",{enumerable:!0,get:function(){return h.isValidQuoteRequest}}),Object.defineProperty(n,"formatEtaInMinutes",{enumerable:!0,get:function(){return h.formatEtaInMinutes}}),Object.defineProperty(n,"calcSlippagePercentage",{enumerable:!0,get:function(){return h.calcSlippagePercentage}});var f=e("./utils/balance.cjs");Object.defineProperty(n,"calcLatestSrcBalance",{enumerable:!0,get:function(){return f.calcLatestSrcBalance}});var C=e("./utils/fetch.cjs");Object.defineProperty(n,"fetchBridgeTokens",{enumerable:!0,get:function(){return C.fetchBridgeTokens}}),Object.defineProperty(n,"getClientHeaders",{enumerable:!0,get:function(){return C.getClientHeaders}});var S=e("./utils/caip-formatters.cjs");Object.defineProperty(n,"formatChainIdToCaip",{enumerable:!0,get:function(){return S.formatChainIdToCaip}}),Object.defineProperty(n,"formatChainIdToHex",{enumerable:!0,get:function(){return S.formatChainIdToHex}}),Object.defineProperty(n,"formatAddressToCaipReference",{enumerable:!0,get:function(){return S.formatAddressToCaipReference}}),Object.defineProperty(n,"formatAddressToAssetId",{enumerable:!0,get:function(){return S.formatAddressToAssetId}});var w=e("./utils/trade-utils.cjs");Object.defineProperty(n,"extractTradeData",{enumerable:!0,get:function(){return w.extractTradeData}}),Object.defineProperty(n,"isBitcoinTrade",{enumerable:!0,get:function(){return w.isBitcoinTrade}}),Object.defineProperty(n,"isTronTrade",{enumerable:!0,get:function(){return w.isTronTrade}}),Object.defineProperty(n,"isEvmTxData",{enumerable:!0,get:function(){return w.isEvmTxData}});var I=e("./selectors.cjs");Object.defineProperty(n,"selectBridgeQuotes",{enumerable:!0,get:function(){return I.selectBridgeQuotes}}),Object.defineProperty(n,"selectDefaultSlippagePercentage",{enumerable:!0,get:function(){return I.selectDefaultSlippagePercentage}}),Object.defineProperty(n,"selectExchangeRateByChainIdAndAddress",{enumerable:!0,get:function(){return I.selectExchangeRateByChainIdAndAddress}}),Object.defineProperty(n,"selectIsQuoteExpired",{enumerable:!0,get:function(){return I.selectIsQuoteExpired}}),Object.defineProperty(n,"selectBridgeFeatureFlags",{enumerable:!0,get:function(){return I.selectBridgeFeatureFlags}}),Object.defineProperty(n,"selectMinimumBalanceForRentExemptionInSOL",{enumerable:!0,get:function(){return I.selectMinimumBalanceForRentExemptionInSOL}});var b=e("./constants/bridge.cjs");Object.defineProperty(n,"DEFAULT_FEATURE_FLAG_CONFIG",{enumerable:!0,get:function(){return b.DEFAULT_FEATURE_FLAG_CONFIG}});var T=e("./utils/feature-flags.cjs");Object.defineProperty(n,"getBridgeFeatureFlags",{enumerable:!0,get:function(){return T.getBridgeFeatureFlags}});var E=e("./utils/slippage.cjs");Object.defineProperty(n,"BRIDGE_DEFAULT_SLIPPAGE",{enumerable:!0,get:function(){return E.BRIDGE_DEFAULT_SLIPPAGE}});var k=e("./utils/swaps.cjs");Object.defineProperty(n,"isValidSwapsContractAddress",{enumerable:!0,get:function(){return k.isValidSwapsContractAddress}}),Object.defineProperty(n,"getSwapsContractAddress",{enumerable:!0,get:function(){return k.getSwapsContractAddress}}),Object.defineProperty(n,"fetchTokens",{enumerable:!0,get:function(){return k.fetchTokens}})}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/index.cjs"}],[1572,{"./constants/bridge.cjs":1566,"./types.cjs":1573,"./utils/bridge.cjs":1576,"./utils/caip-formatters.cjs":1577,"./utils/feature-flags.cjs":1578,"./utils/quote.cjs":1584,"./utils/slippage.cjs":1585,"@ethersproject/constants":783,"@metamask/utils":3554,"bignumber.js":1606,lodash:5239,reselect:5709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectDefaultSlippagePercentage=n.selectMinimumBalanceForRentExemptionInSOL=n.selectBridgeQuotes=n.selectIsQuoteExpired=n.selectIsAssetExchangeRateInState=n.selectExchangeRateByChainIdAndAddress=n.selectBridgeFeatureFlags=void 0;const r=e("@ethersproject/constants"),s=e("@metamask/utils"),o=e("bignumber.js"),i=e("lodash"),a=e("reselect"),l=e("./constants/bridge.cjs"),c=e("./types.cjs"),u=e("./utils/bridge.cjs"),d=e("./utils/caip-formatters.cjs"),p=e("./utils/feature-flags.cjs"),g=e("./utils/quote.cjs"),m=e("./utils/slippage.cjs"),h=a.createStructuredSelector.withTypes(),f=a.createSelector.withTypes(),C=a.createSelector.withTypes();n.selectBridgeFeatureFlags=C([e=>e.remoteFeatureFlags.bridgeConfig],e=>(0,p.processFeatureFlags)(e));const S=(e,t,n)=>{if(!t||!n)return{};const r=(0,d.formatAddressToAssetId)(n,t);if(!r)return{};const{assetExchangeRates:i,currencyRates:a,marketData:l,conversionRates:c}=e,p=i?.[r]??i?.[r.toLowerCase()];if(p?.exchangeRate)return p;if((0,u.isNonEvmChainId)(t)){const e=c?.[r];return e?{exchangeRate:e.rate,usdExchangeRate:undefined}:{}}if((0,u.isNativeAddress)(n)){const{symbol:e}=(0,u.getNativeAssetForChainId)(t),n=a?.[e];return n?{exchangeRate:n?.conversionRate?.toString(),usdExchangeRate:n?.usdConversionRate?.toString()}:{}}if(!(0,u.isNonEvmChainId)(t)){const e=l?.[(0,d.formatChainIdToHex)(t)],r=(0,s.isStrictHexString)(n)?e?.[n]:null,i=r?a[r?.currency]:undefined;if(r&&i)return{exchangeRate:new o.BigNumber(r.price).multipliedBy(i.conversionRate??0).toString(),usdExchangeRate:new o.BigNumber(r.price).multipliedBy(i.usdConversionRate??0).toString()}}return{}};n.selectExchangeRateByChainIdAndAddress=(e,t,n)=>S(e,t,n);n.selectIsAssetExchangeRateInState=(...e)=>Boolean(S(...e)?.exchangeRate)&&Boolean(S(...e)?.usdExchangeRate);const w=f([({quotes:e})=>e,h({estimatedBaseFeeInDecGwei:({gasFeeEstimates:e})=>e?.estimatedBaseFee,feePerGasInDecGwei:({gasFeeEstimates:e})=>e?.[l.BRIDGE_PREFERRED_GAS_ESTIMATE]?.suggestedMaxFeePerGas,maxFeePerGasInDecGwei:({gasFeeEstimates:e})=>e?.high?.suggestedMaxFeePerGas}),f([e=>e,({quoteRequest:{srcChainId:e}})=>e,({quoteRequest:{srcTokenAddress:e}})=>e],n.selectExchangeRateByChainIdAndAddress),f([e=>e,({quoteRequest:{destChainId:e}})=>e,({quoteRequest:{destTokenAddress:e}})=>e],n.selectExchangeRateByChainIdAndAddress),f([e=>e,({quoteRequest:{srcChainId:e}})=>e],(e,t)=>(0,n.selectExchangeRateByChainIdAndAddress)(e,t,r.AddressZero))],(e,t,n,r,s)=>e.map(e=>{const o=(0,g.calcSentAmount)(e.quote,n),i=(0,g.calcToAmount)(e.quote.destTokenAmount,e.quote.destAsset,r),a=(0,g.calcToAmount)(e.quote.minDestTokenAmount,e.quote.destAsset,r),l=(0,g.calcIncludedTxFees)(e.quote,n,r);let c,d,p,m;(0,u.isEvmQuoteResponse)(e)?(p=(0,g.calcRelayerFee)(e,s),m=(0,g.calcEstimatedAndMaxTotalGasFee)({bridgeQuote:e,...t,...s}),c=(0,g.calcTotalEstimatedNetworkFee)(m,p),d=(0,g.calcTotalMaxNetworkFee)(m,p)):(c=(0,g.calcNonEvmTotalNetworkFee)(e,s),m={effective:c,total:c,max:c},d=c);const h=(0,g.calcAdjustedReturn)(i,c,e.quote),f=(0,g.calcCost)(h,o);return{...e,sentAmount:o,toTokenAmount:i,minToTokenAmount:a,swapRate:(0,g.calcSwapRate)(o.amount,i.amount),totalNetworkFee:c,totalMaxNetworkFee:d,gasFee:m,adjustedReturn:h,cost:f,includedTxFees:l}})),I=f([w,(e,{sortOrder:t})=>t],(e,t)=>t===c.SortOrder.ETA_ASC?(0,i.orderBy)(e,e=>e.estimatedProcessingTimeInSeconds,"asc"):(0,i.orderBy)(e,({cost:e})=>e.valueInCurrency?Number(e.valueInCurrency):0,"asc")),b=f([I],e=>e.length>0?e[0]:null),T=f([b,(e,{selectedQuote:t})=>t],(e,t)=>t??e),E=f([n.selectBridgeFeatureFlags,e=>e.quoteRequest.insufficientBal,e=>e.quotesRefreshCount],(e,t,n)=>!t&&e.maxRefreshCount>n),k=f([n.selectBridgeFeatureFlags,e=>e.quoteRequest.srcChainId],(e,t)=>(t?e.chains[(0,d.formatChainIdToCaip)(t)]?.refreshRate:e.refreshRate)??e.refreshRate);n.selectIsQuoteExpired=f([E,({quotesLastFetched:e})=>e,k,(e,t,n)=>n],(e,t,n,r)=>Boolean(!e&&t&&r-t>n)),n.selectBridgeQuotes=h({sortedQuotes:I,recommendedQuote:b,activeQuote:T,quotesLastFetchedMs:e=>e.quotesLastFetched,isLoading:e=>e.quotesLoadingStatus===c.RequestStatus.LOADING,quoteFetchError:e=>e.quoteFetchError,quotesRefreshCount:e=>e.quotesRefreshCount,quotesInitialLoadTimeMs:e=>e.quotesInitialLoadTime,isQuoteGoingToRefresh:E});n.selectMinimumBalanceForRentExemptionInSOL=e=>new o.BigNumber(e.minimumBalanceForRentExemptionInLamports??0).div(10**9).toString(),n.selectDefaultSlippagePercentage=f([e=>(0,n.selectBridgeFeatureFlags)(e).chains,(e,t)=>t.srcTokenAddress,(e,t)=>t.destTokenAddress,(e,t)=>t.srcChainId?(0,d.formatChainIdToCaip)(t.srcChainId):undefined,(e,t)=>t.destChainId?(0,d.formatChainIdToCaip)(t.destChainId):undefined],(e,t,n,r,s)=>(0,m.getDefaultSlippagePercentage)({srcTokenAddress:t,destTokenAddress:n,srcChainId:r,destChainId:s},r?e[r]?.stablecoins:undefined,s?e[s]?.stablecoins:undefined))}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/selectors.cjs"}],[1573,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c;Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeBackgroundAction=n.BridgeUserAction=n.RequestStatus=n.ChainId=n.StatusTypes=n.SortOrder=n.AssetType=void 0,function(e){e.native="NATIVE",e.token="TOKEN",e.NFT="NFT",e.unknown="UNKNOWN"}(r||(n.AssetType=r={})),function(e){e.COST_ASC="cost_ascending",e.ETA_ASC="time_descending"}(s||(n.SortOrder=s={})),function(e){e.UNKNOWN="UNKNOWN",e.FAILED="FAILED",e.PENDING="PENDING",e.COMPLETE="COMPLETE"}(o||(n.StatusTypes=o={})),function(e){e[e.ETH=1]="ETH",e[e.OPTIMISM=10]="OPTIMISM",e[e.BSC=56]="BSC",e[e.POLYGON=137]="POLYGON",e[e.ZKSYNC=324]="ZKSYNC",e[e.BASE=8453]="BASE",e[e.ARBITRUM=42161]="ARBITRUM",e[e.AVALANCHE=43114]="AVALANCHE",e[e.LINEA=59144]="LINEA",e[e.SOLANA=0x416edef1601be]="SOLANA",e[e.BTC=20000000000001]="BTC",e[e.TRON=728126428]="TRON",e[e.SEI=1329]="SEI",e[e.MONAD=143]="MONAD"}(i||(n.ChainId=i={})),function(e){e[e.LOADING=0]="LOADING",e[e.FETCHED=1]="FETCHED",e[e.ERROR=2]="ERROR"}(a||(n.RequestStatus=a={})),function(e){e.SELECT_DEST_NETWORK="selectDestNetwork",e.UPDATE_QUOTE_PARAMS="updateBridgeQuoteRequestParams"}(l||(n.BridgeUserAction=l={})),function(e){e.SET_CHAIN_INTERVAL_LENGTH="setChainIntervalLength",e.RESET_STATE="resetState",e.TRACK_METAMETRICS_EVENT="trackUnifiedSwapBridgeEvent",e.STOP_POLLING_FOR_QUOTES="stopPollingForQuotes",e.FETCH_QUOTES="fetchQuotes"}(c||(n.BridgeBackgroundAction=c={}))}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/types.cjs"}],[1574,{"./bridge.cjs":1576,"./caip-formatters.cjs":1577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toExchangeRates=n.getAssetIdsForToken=void 0;const r=e("./bridge.cjs"),s=e("./caip-formatters.cjs");n.getAssetIdsForToken=(e,t)=>{const n=[],o=(0,s.formatAddressToAssetId)(e,t);return o&&(n.push(o),(0,r.getNativeAssetForChainId)(t)?.assetId&&n.push((0,r.getNativeAssetForChainId)(t).assetId)),n};n.toExchangeRates=(e,t)=>Object.entries(t).reduce((t,[n,r])=>(r&&(t[n]={exchangeRate:r[e],usdExchangeRate:r.usd}),t),{})}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/assets.cjs"}],[1575,{"./bridge.cjs":1576,"@ethersproject/address":770,"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/metamask-eth-abis":2597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasSufficientBalance=n.calcLatestSrcBalance=n.fetchTokenBalance=void 0;const r=e("@ethersproject/address"),s=e("@ethersproject/contracts"),o=e("@ethersproject/providers"),i=e("@metamask/metamask-eth-abis"),a=e("./bridge.cjs");n.fetchTokenBalance=async(e,t,n)=>{const r=new o.Web3Provider(n),a=new s.Contract(e,i.abiERC20,r),l="function"==typeof a?.balanceOf?a.balanceOf(t):Promise.resolve(undefined);return await l};n.calcLatestSrcBalance=async(e,t,s,i)=>{if(s&&i){if((0,a.isNativeAddress)(s)){const n=new o.Web3Provider(e);return await n.getBalance((0,r.getAddress)(t))}return await(0,n.fetchTokenBalance)(s,t,e)}return undefined};n.hasSufficientBalance=async(e,t,r,s,o)=>{const i=await(0,n.calcLatestSrcBalance)(e,t,r,o);return!!i&&i.gte(s)}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/balance.cjs"}],[1576,{"../constants/bridge.cjs":1566,"../constants/chains.cjs":1567,"../constants/swaps.cjs":1568,"../constants/tokens.cjs":1569,"../types.cjs":1573,"./caip-formatters.cjs":1577,"@ethersproject/constants":783,"@ethersproject/contracts":786,"@metamask/keyring-api":2510,"@metamask/metamask-eth-abis":2597,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEvmQuoteResponse=n.isNonEvmChainId=n.isTronChainId=n.isBitcoinChainId=n.isSolanaChainId=n.isNativeAddress=n.isSwapsDefaultTokenSymbol=n.isSwapsDefaultTokenAddress=n.sumHexes=n.isEthUsdt=n.getEthUsdtResetData=n.getNativeAssetForChainId=n.getDefaultBridgeControllerState=n.isCrossChain=void 0;const r=e("@ethersproject/constants"),s=e("@ethersproject/contracts"),o=e("@metamask/keyring-api"),i=e("@metamask/metamask-eth-abis"),a=e("@metamask/utils"),l=e("./caip-formatters.cjs"),c=e("../constants/bridge.cjs"),u=e("../constants/chains.cjs"),d=e("../constants/swaps.cjs"),p=e("../constants/tokens.cjs"),g=e("../types.cjs");n.isCrossChain=(e,t)=>{try{return!!t&&(0,l.formatChainIdToCaip)(e)!==(0,l.formatChainIdToCaip)(t)}catch{return!1}};n.getDefaultBridgeControllerState=()=>c.DEFAULT_BRIDGE_CONTROLLER_STATE;const m=(e,t)=>`${(0,l.formatChainIdToCaip)(e)}/${p.SYMBOL_TO_SLIP44_MAP[t]}`;n.getNativeAssetForChainId=e=>{const t=(0,l.formatChainIdToCaip)(e),n=p.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[(0,l.formatChainIdToCaip)(e)]??p.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[(0,l.formatChainIdToHex)(e)];if(!n)throw new Error(`No XChain Swaps native asset found for chainId: ${e}`);return{...n,chainId:(0,l.formatChainIdToDec)(e),assetId:m(t,n.symbol)}};n.getEthUsdtResetData=e=>{const t=(0,n.isCrossChain)(u.CHAIN_IDS.MAINNET,e)?c.METABRIDGE_ETHEREUM_ADDRESS:d.SWAPS_CONTRACT_ADDRESSES[u.CHAIN_IDS.MAINNET];return new s.Contract(c.ETH_USDT_ADDRESS,i.abiERC20).interface.encodeFunctionData("approve",[t,"0"])};n.isEthUsdt=(e,t)=>(0,l.formatChainIdToDec)(e)===g.ChainId.ETH&&t.toLowerCase()===c.ETH_USDT_ADDRESS.toLowerCase();n.sumHexes=(...e)=>{if(0===e.length)return"0x0";return`0x${e.reduce((e,t)=>e+BigInt(t),BigInt(0)).toString(16)}`};n.isSwapsDefaultTokenAddress=(e,t)=>!(!e||!t)&&e===(0,n.getNativeAssetForChainId)(t)?.address;n.isSwapsDefaultTokenSymbol=(e,t)=>!(!e||!t)&&e===(0,n.getNativeAssetForChainId)(t)?.symbol;n.isNativeAddress=e=>e===r.AddressZero||""===e||!e||!(0,a.isStrictHexString)(e)&&Object.values(p.SYMBOL_TO_SLIP44_MAP).some(t=>e.includes(t)||t.endsWith(e));n.isSolanaChainId=e=>(0,a.isCaipChainId)(e)?e===o.SolScope.Mainnet.toString():e.toString()===g.ChainId.SOLANA.toString();n.isBitcoinChainId=e=>(0,a.isCaipChainId)(e)?e===o.BtcScope.Mainnet.toString():e.toString()===g.ChainId.BTC.toString();n.isTronChainId=e=>(0,a.isCaipChainId)(e)?e===o.TrxScope.Mainnet.toString():e.toString()===g.ChainId.TRON.toString();n.isNonEvmChainId=e=>(0,n.isSolanaChainId)(e)||(0,n.isBitcoinChainId)(e)||(0,n.isTronChainId)(e);n.isEvmQuoteResponse=e=>!(0,n.isNonEvmChainId)(e.quote.srcChainId)}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/bridge.cjs"}],[1577,{"../types.cjs":1573,"./bridge.cjs":1576,"@ethersproject/address":770,"@ethersproject/constants":783,"@metamask/controller-utils":1639,"@metamask/keyring-api":2510,"@metamask/multichain-network-controller":1594,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAddressToAssetId=n.formatAddressToCaipReference=n.formatChainIdToHex=n.formatChainIdToDec=n.formatChainIdToCaip=void 0;const r=e("@ethersproject/address"),s=e("@ethersproject/constants"),o=e("@metamask/controller-utils"),i=e("@metamask/keyring-api"),a=e("@metamask/multichain-network-controller"),l=e("@metamask/utils"),c=e("./bridge.cjs"),u=e("../types.cjs");n.formatChainIdToCaip=e=>(0,l.isCaipChainId)(e)?e:(0,l.isStrictHexString)(e)?(0,a.toEvmCaipChainId)(e):(0,c.isSolanaChainId)(e)?i.SolScope.Mainnet:(0,c.isBitcoinChainId)(e)?i.BtcScope.Mainnet:(0,c.isTronChainId)(e)?i.TrxScope.Mainnet:(0,a.toEvmCaipChainId)((0,l.numberToHex)(Number(e)));n.formatChainIdToDec=e=>(0,l.isStrictHexString)(e)?(0,o.convertHexToDecimal)(e):e===i.SolScope.Mainnet?u.ChainId.SOLANA:e===i.BtcScope.Mainnet?u.ChainId.BTC:e===i.TrxScope.Mainnet?u.ChainId.TRON:(0,l.isCaipChainId)(e)?Number(e.split(":").at(-1)):"string"==typeof e?parseInt(e,10):e;n.formatChainIdToHex=e=>{if((0,l.isStrictHexString)(e))return e;if("number"==typeof e||parseInt(e,10))return(0,l.numberToHex)(Number(e));if((0,l.isCaipChainId)(e)){const{reference:t}=(0,l.parseCaipChainId)(e);if((0,l.isCaipReference)(t)&&!isNaN(Number(t)))return(0,l.numberToHex)(Number(t))}throw new Error(`Invalid cross-chain swaps chainId: ${e}`)};n.formatAddressToCaipReference=e=>{if((0,l.isStrictHexString)(e))return(0,r.getAddress)(e);if((0,c.isNativeAddress)(e))return s.AddressZero;const t=e.split(":").at(-1);if(!t)throw new Error("Invalid address");return t};n.formatAddressToAssetId=(e,t)=>(0,l.isCaipAssetType)(e)?e:(0,c.isNativeAddress)(e)?(0,c.getNativeAssetForChainId)(t).assetId:t===i.SolScope.Mainnet?l.CaipAssetTypeStruct.create(`${t}/token:${e}`):(0,l.isStrictHexString)(e)?l.CaipAssetTypeStruct.create(`${(0,n.formatChainIdToCaip)(t)}/erc20:${e}`):undefined}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/caip-formatters.cjs"}],[1578,{"../constants/bridge.cjs":1566,"./caip-formatters.cjs":1577,"./validators.cjs":1589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasMinimumRequiredVersion=n.getBridgeFeatureFlags=n.processFeatureFlags=n.formatFeatureFlags=void 0;const r=e("./caip-formatters.cjs"),s=e("./validators.cjs"),o=e("../constants/bridge.cjs");n.formatFeatureFlags=e=>{return{...e,chains:(t=e.chains,Object.entries(t).reduce((e,[t,n])=>({...e,[(0,r.formatChainIdToCaip)(t)]:n}),{}))};var t};n.processFeatureFlags=e=>(0,s.validateFeatureFlagsResponse)(e)?(0,n.formatFeatureFlags)(e):o.DEFAULT_FEATURE_FLAG_CONFIG,n.getBridgeFeatureFlags=function(e){const t=e.call("RemoteFeatureFlagController:getState"),r=t?.remoteFeatureFlags?.bridgeConfigV2,s=t?.remoteFeatureFlags?.bridgeConfig;return(0,n.processFeatureFlags)(r||s)};n.hasMinimumRequiredVersion=(e,t)=>{const[n,r,s]=e.split(".").map(Number),[o,i,a]=t.split(".").map(Number);return n>o||(n===o&&r>i||n===o&&r===i&&s>=a)}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/feature-flags.cjs"}],[1579,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchServerEvents=void 0;n.fetchServerEvents=async(e,{onMessage:t,onError:n,onClose:r,fetchFn:s,...o})=>{let i;try{const n=await s(e,o);if(!n.ok||!n.body)throw new Error(`${n.status}`);i=n.body.getReader();const a=new TextDecoder("utf-8");let l="";for(;;){const{done:e,value:n}=await i.read();if(e)break;l+=a.decode(n,{stream:!0});const r=l.split("\n\n");l=r.pop()||"";for(const e of r){const n=e.split("\n");let r;const s=[];for(const e of n)e.startsWith("event:")?r=e.slice(6).trim():e.startsWith("data:")&&s.push(e.slice(5).trim());if("error"===r)throw new Error(`Bridge-api error: ${s.join("\n")}`);if(s.length>0){const e=JSON.parse(s.join("\n"));await t(e,r)}}}await(r?.())}catch(e){n?.(e)}finally{try{await(i?.cancel())}catch(e){console.error("Error cleaning up stream reader",e)}}}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/fetch-server-events.cjs"}],[158,{"./subscription-controller-messenger":159,"./subscription-service-messenger":160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getSubscriptionControllerInitMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerInitMessenger}}),Object.defineProperty(n,"getSubscriptionControllerMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerMessenger}}),Object.defineProperty(n,"getSubscriptionServiceMessenger",{enumerable:!0,get:function(){return s.getSubscriptionServiceMessenger}});var r=e("./subscription-controller-messenger"),s=e("./subscription-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/index.ts"}],[1580,{"./bridge.cjs":1576,"./caip-formatters.cjs":1577,"./fetch-server-events.cjs":1579,"./trade-utils.cjs":1588,"./validators.cjs":1589,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchBridgeQuoteStream=n.fetchAssetPrices=n.fetchBridgeQuotes=n.fetchBridgeTokens=n.getClientHeaders=void 0;const r=e("@metamask/superstruct"),s=e("./bridge.cjs"),o=e("./caip-formatters.cjs"),i=e("./fetch-server-events.cjs"),a=e("./trade-utils.cjs"),l=e("./validators.cjs");n.getClientHeaders=(e,t)=>({"X-Client-Id":e,...t?{"Client-Version":t}:{}}),n.fetchBridgeTokens=async function(e,t,r,s,i){const a=`${s}/getTokens?chainId=${(0,o.formatChainIdToDec)(e)}`,c=await r(a,{headers:(0,n.getClientHeaders)(t,i)}),u={};return c.forEach(e=>{(0,l.validateSwapsTokenObject)(e)&&(u[e.address]=e)}),u};const c=e=>{const t=e.destWalletAddress??e.walletAddress,n={walletAddress:(0,o.formatAddressToCaipReference)(e.walletAddress),destWalletAddress:(0,o.formatAddressToCaipReference)(t),srcChainId:(0,o.formatChainIdToDec)(e.srcChainId),destChainId:(0,o.formatChainIdToDec)(e.destChainId),srcTokenAddress:(0,o.formatAddressToCaipReference)(e.srcTokenAddress),destTokenAddress:(0,o.formatAddressToCaipReference)(e.destTokenAddress),srcTokenAmount:e.srcTokenAmount,insufficientBal:Boolean(e.insufficientBal),resetApproval:Boolean(e.resetApproval),gasIncluded:Boolean(e.gasIncluded),gasIncluded7702:Boolean(e.gasIncluded7702)};e.slippage!==undefined&&(n.slippage=e.slippage),e.fee!==undefined&&(n.fee=e.fee),e.aggIds&&e.aggIds.length>0&&(n.aggIds=e.aggIds),e.bridgeIds&&e.bridgeIds.length>0&&(n.bridgeIds=e.bridgeIds);const r=new URLSearchParams;return Object.entries(n).forEach(([e,t])=>{r.append(e,t.toString())}),r};n.fetchBridgeQuotes=async function(e,t,o,i,u,d,p){const g=`${u}/getQuote?${c(e)}`,m=await i(g,{headers:(0,n.getClientHeaders)(o,p),signal:t}),h=new Set([]),f=m.filter(e=>{try{return(0,l.validateQuoteResponse)(e)}catch(t){return t instanceof r.StructError&&t.failures().forEach(({branch:t,path:n})=>{const r=t?.[0]?.quote?.bridgeId||t?.[0]?.quote?.bridges?.[0]||e?.quote?.bridgeId||e?.quote?.bridges?.[0]||"unknown",s=n?.join(".")||"unknown";h.add([r,s].join("|"))}),!1}}).map(t=>({...t,featureId:d??undefined,resetApproval:e.resetApproval&&t.approval&&(0,a.isEvmTxData)(t.approval)?{...t.approval,data:(0,s.getEthUsdtResetData)(e.destChainId)}:undefined})),C=Array.from(h);return h.size>0&&console.warn("Quote validation failed",C),{quotes:f,validationFailures:C}};n.fetchAssetPrices=async e=>{const{currencies:t,...r}=e,s=await Promise.allSettled(Array.from(t).map(async e=>await(async e=>{const{currency:t,assetIds:r,clientId:s,clientVersion:o,fetchFn:i,signal:a}=e,l=Array.from(r).filter(Boolean);if(0===l.length)return{};const c=`https://price.api.cx.metamask.io/v3/spot-prices?${new URLSearchParams({assetIds:l.filter(Boolean).join(","),vsCurrency:t})}`,u=await i(c,{headers:(0,n.getClientHeaders)(s,o),signal:a});return u&&"object"==typeof u?Object.entries(u).reduce((e,[n,r])=>r?(e[n]||(e[n]={}),r[t]&&(e[n][t]=r[t].toString()),e):e,{}):{}})({...r,currency:e}))).then(e=>e.reduce((e,t)=>("fulfilled"===t.status&&Object.entries(t.value).forEach(([t,n])=>{e[t]||(e[t]={}),Object.entries(n).forEach(([n,r])=>{e[t][n]=r})}),e),{}));return s},n.fetchBridgeQuoteStream=async function(e,t,o,u,d,p,g){const m=`${d}/getQuoteStream?${c(t)}`;await(0,i.fetchServerEvents)(m,{headers:{...(0,n.getClientHeaders)(u,g),"Content-Type":"text/event-stream"},signal:o,onMessage:async e=>{const n=new Set([]);try{if((0,l.validateQuoteResponse)(e))return await p.onValidQuoteReceived({...e,resetApproval:t.resetApproval&&e.approval&&(0,a.isEvmTxData)(e.approval)?{...e.approval,data:(0,s.getEthUsdtResetData)(t.destChainId)}:undefined})}catch(t){t instanceof r.StructError&&t.failures().forEach(({branch:t,path:r})=>{const s=t?.[0]?.quote?.bridgeId||t?.[0]?.quote?.bridges?.[0]||e?.quote?.bridgeId||e?.quote?.bridges?.[0]||"unknown",o=r?.join(".")||"unknown";n.add([s,o].join("|"))});const s=Array.from(n);if(n.size>0)return console.warn("Quote validation failed",s),p.onValidationFailure(s);throw t}return undefined},onError:e=>{throw e},onClose:async()=>{await p.onClose()},fetchFn:e})}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/fetch.cjs"}],[1581,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a;Object.defineProperty(n,"__esModule",{value:!0}),n.MetricsSwapType=n.MetricsActionType=n.MetaMetricsSwapsEventSource=n.AbortReason=n.UnifiedSwapBridgeEventName=n.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY=void 0,n.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY="Unified SwapBridge",function(e){e.ButtonClicked="Unified SwapBridge Button Clicked",e.PageViewed="Unified SwapBridge Page Viewed",e.InputChanged="Unified SwapBridge Input Changed",e.InputSourceDestinationSwitched="Unified SwapBridge Source Destination Switched",e.QuotesRequested="Unified SwapBridge Quotes Requested",e.QuotesReceived="Unified SwapBridge Quotes Received",e.QuotesError="Unified SwapBridge Quotes Error",e.Submitted="Unified SwapBridge Submitted",e.Completed="Unified SwapBridge Completed",e.Failed="Unified SwapBridge Failed",e.AllQuotesOpened="Unified SwapBridge All Quotes Opened",e.AllQuotesSorted="Unified SwapBridge All Quotes Sorted",e.QuoteSelected="Unified SwapBridge Quote Selected",e.AssetDetailTooltipClicked="Unified SwapBridge Asset Detail Tooltip Clicked",e.QuotesValidationFailed="Unified SwapBridge Quotes Failed Validation",e.StatusValidationFailed="Unified SwapBridge Status Failed Validation"}(r||(n.UnifiedSwapBridgeEventName=r={})),function(e){e.NewQuoteRequest="New Quote Request",e.QuoteRequestUpdated="Quote Request Updated",e.ResetState="Reset controller state",e.TransactionSubmitted="Transaction submitted"}(s||(n.AbortReason=s={})),function(e){e.MainView="Main View",e.TokenView="Token View"}(o||(n.MetaMetricsSwapsEventSource=o={})),function(e){e.CROSSCHAIN_V1="crosschain-v1",e.SWAPBRIDGE_V1="swapbridge-v1"}(i||(n.MetricsActionType=i={})),function(e){e.SINGLE="single_chain",e.CROSSCHAIN="crosschain"}(a||(n.MetricsSwapType=a={}))}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/metrics/constants.cjs"}],[1582,{"../../constants/bridge.cjs":1566,"../../types.cjs":1573,"../bridge.cjs":1576,"../caip-formatters.cjs":1577,"./constants.cjs":1581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getQuotesReceivedProperties=n.isCustomSlippage=n.isHardwareWallet=n.getRequestParams=n.formatProviderLabel=n.getSwapTypeFromQuote=n.getSwapType=n.toInputChangedPropertyValue=n.toInputChangedPropertyKey=void 0;const r=e("./constants.cjs"),s=e("../../constants/bridge.cjs"),o=e("../../types.cjs"),i=e("../bridge.cjs"),a=e("../caip-formatters.cjs");n.toInputChangedPropertyKey={srcTokenAddress:"token_source",destTokenAddress:"token_destination",srcChainId:"chain_source",destChainId:"chain_destination",slippage:"slippage"},n.toInputChangedPropertyValue={srcTokenAddress:({srcTokenAddress:e,srcChainId:t})=>t?(0,a.formatAddressToAssetId)(e??"",t):undefined,destTokenAddress:({destTokenAddress:e,destChainId:t})=>t?(0,a.formatAddressToAssetId)(e??"",t):undefined,srcChainId:({srcChainId:e})=>e?(0,a.formatChainIdToCaip)(e):undefined,destChainId:({destChainId:e})=>e?(0,a.formatChainIdToCaip)(e):undefined,slippage:({slippage:e})=>e?Number(e):e};n.getSwapType=(e,t)=>e&&!(0,i.isCrossChain)(e,t??e)?r.MetricsSwapType.SINGLE:r.MetricsSwapType.CROSSCHAIN;n.getSwapTypeFromQuote=e=>(0,n.getSwapType)(e.srcChainId,e.destChainId);n.formatProviderLabel=({bridgeId:e,bridges:t})=>`${e}_${t[0]}`;n.getRequestParams=({srcChainId:e,destChainId:t,srcTokenAddress:n,destTokenAddress:r})=>{const s=(0,a.formatChainIdToCaip)(e??o.ChainId.ETH);return{chain_id_source:s,chain_id_destination:t?(0,a.formatChainIdToCaip)(t):null,token_address_source:n?(0,a.formatAddressToAssetId)(n,s)??(0,i.getNativeAssetForChainId)(s)?.assetId??null:(0,i.getNativeAssetForChainId)(s)?.assetId??null,token_address_destination:r?(0,a.formatAddressToAssetId)(r,t??s)??null:null}};n.isHardwareWallet=e=>e?.metadata?.keyring.type?.includes("Hardware")??!1;n.isCustomSlippage=e=>e!==s.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest.slippage;n.getQuotesReceivedProperties=(e,t=[],r=!0,s)=>{const o=e?(0,n.formatProviderLabel)(e.quote):"_";return{can_submit:r,gas_included:Boolean(e?.quote?.gasIncluded),gas_included_7702:Boolean(e?.quote?.gasIncluded7702),quoted_time_minutes:e?.estimatedProcessingTimeInSeconds?e.estimatedProcessingTimeInSeconds/60:0,usd_quoted_gas:Number(e?.gasFee?.effective?.usd??0),usd_quoted_return:Number(e?.toTokenAmount?.usd??0),best_quote_provider:s?(0,n.formatProviderLabel)(s.quote):o,provider:o,warnings:t,price_impact:Number(e?.quote.priceData?.priceImpact??0)}}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/metrics/properties.cjs"}],[1583,{"../constants/chains.cjs":1567,"./bridge.cjs":1576,"./caip-formatters.cjs":1577,"./snaps.cjs":1586,"./trade-utils.cjs":1588,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.appendFeesToQuotes=void 0;const r=e("@metamask/utils"),s=e("./bridge.cjs"),o=e("./caip-formatters.cjs"),i=e("./snaps.cjs"),a=e("./trade-utils.cjs"),l=e("../constants/chains.cjs");n.appendFeesToQuotes=async(e,t,n,c)=>{const u=await(async(e,t)=>{if(e.some(({quote:e})=>{const t=(0,o.formatChainIdToCaip)(e.srcChainId);return![l.CHAIN_IDS.OPTIMISM,l.CHAIN_IDS.BASE].map(o.formatChainIdToCaip).includes(t)}))return undefined;const n=Promise.allSettled(e.map(async e=>{const{quote:n,trade:o,approval:i}=e,a=(0,r.numberToHex)(n.srcChainId),l=e=>({from:e.from,to:e.to,value:e.value,data:e.data,gasLimit:e.gasLimit?.toString()}),c=i?await t({transactionParams:l(i),chainId:a}):"0x0",u=await t({transactionParams:l(o),chainId:a});return c===undefined||u===undefined?undefined:{...e,l1GasFeesInHexWei:(0,s.sumHexes)(c,u)}}));return(await n).reduce((e,t)=>("fulfilled"===t.status&&t.value?e.push(t.value):"rejected"===t.status&&console.error("Error calculating L1 gas fees for quote",t.reason),e),[])})(e,n),d=await(async(e,t,n)=>{if(e.some(({quote:{srcChainId:e}})=>!(0,s.isNonEvmChainId)(e)))return undefined;const r=Promise.allSettled(e.map(async e=>{const{trade:r,quote:s}=e;if(!n?.metadata?.snap?.id||!r)return e;try{const l=(0,o.formatChainIdToCaip)(s.srcChainId),c=(0,a.extractTradeData)(r),u=(0,a.isTronTrade)(r)?{visible:r.visible,type:r.raw_data?.contract?.[0]?.type,feeLimit:r.raw_data?.fee_limit}:undefined,d=await t.call("SnapController:handleRequest",(0,i.computeFeeRequest)(n?.metadata?.snap?.id,c,n?.id,l,u)),p=d?.find(e=>"base"===e.type)||d?.find(e=>"priority"===e.type)||d?.[0],g=p?.asset?.amount||"0";return{...e,nonEvmFeesInNative:g}}catch(t){return console.error(`Failed to compute non-EVM fees for quote ${s.requestId}:`,t),{...e,nonEvmFeesInNative:undefined}}}));return(await r).reduce((e,t)=>("fulfilled"===t.status&&t.value&&e.push(t.value),e),[])})(e,t,c);return u??d??e}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/quote-fees.cjs"}],[1584,{"./bridge.cjs":1576,"./validators.cjs":1589,"@metamask/controller-utils":1639,"bignumber.js":1606},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sortQuotes=n.formatEtaInMinutes=n.calcSlippagePercentage=n.calcCost=n.calcSwapRate=n.calcAdjustedReturn=n.calcIncludedTxFees=n.calcTotalMaxNetworkFee=n.calcTotalEstimatedNetworkFee=n.calcEstimatedAndMaxTotalGasFee=n.calcRelayerFee=n.calcSentAmount=n.calcToAmount=n.calcNonEvmTotalNetworkFee=n.getQuoteIdentifier=n.isValidQuoteRequest=void 0;const r=e("@metamask/controller-utils"),s=e("bignumber.js"),o=e("./bridge.cjs"),i=e("./validators.cjs");n.isValidQuoteRequest=(e,t=!0)=>{const n=["srcTokenAddress","destTokenAddress","srcChainId","destChainId","walletAddress"];if(t&&n.push("srcTokenAmount"),e.destChainId&&e.srcChainId&&e.destChainId!==e.srcChainId&&((0,o.isNonEvmChainId)(e.destChainId)||(0,o.isNonEvmChainId)(e.srcChainId))&&(n.push("destWalletAddress"),!e.destWalletAddress))return!1;const r=[];return e.slippage!==undefined&&r.push("slippage"),n.every(t=>t in e&&"string"==typeof e[t]&&e[t]!==undefined&&""!==e[t]&&null!==e[t])&&r.every(t=>t in e&&"number"==typeof e[t]&&e[t]!==undefined&&!isNaN(Number(e[t]))&&null!==e[t])&&(!t||Boolean((e.srcTokenAmount??"").match(/^[1-9]\d*$/u)))};n.getQuoteIdentifier=e=>`${e.bridgeId}-${e.bridges[0]}-${e.steps.length}`;const a=(e,t)=>{const n=new s.BigNumber(10).pow(t??0);return new s.BigNumber(e).div(n)};n.calcNonEvmTotalNetworkFee=(e,{exchangeRate:t,usdExchangeRate:n})=>{const{nonEvmFeesInNative:r}=e,o=new s.BigNumber(r??"0");return{amount:o.toString(),valueInCurrency:t?o.times(t).toString():null,usd:n?o.times(n).toString():null}};n.calcToAmount=(e,t,{exchangeRate:n,usdExchangeRate:r})=>{const s=a(e,t.decimals);return{amount:s.toString(),valueInCurrency:n?s.times(n).toString():null,usd:r?s.times(r).toString():null}};n.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:n},{exchangeRate:r,usdExchangeRate:o})=>{const i=Object.values(n).filter(e=>e&&e.amount&&e.asset?.assetId===t.assetId).reduce((e,{amount:t})=>e.plus(t),new s.BigNumber(e)),l=a(i,t.decimals);return{amount:l.toString(),valueInCurrency:r?l.times(r).toString():null,usd:o?l.times(o).toString():null}};n.calcRelayerFee=(e,{exchangeRate:t,usdExchangeRate:i})=>{const{quote:l,trade:c}=e,u=new s.BigNumber((0,r.convertHexToDecimal)(c.value||"0x0"));let d=a(u,18);if((0,o.isNativeAddress)(l.srcAsset.address)){const e=(0,n.calcSentAmount)(l,{exchangeRate:t,usdExchangeRate:i}).amount;d=d.minus(e)}return{amount:d,valueInCurrency:t?d.times(t):null,usd:i?d.times(i):null}};const l=({approvalGasLimit:e,resetApprovalGasLimit:t,tradeGasLimit:n,l1GasFeesInHexWei:o,feePerGasInDecGwei:i,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:l})=>{const c=new s.BigNumber(n?.toString()??"0").plus(e?.toString()??"0").plus(t?.toString()??"0"),u=(0,r.weiHexToGweiDec)((0,r.toHex)(o??"0")),d=c.times(i).plus(u).times(new s.BigNumber(10).pow(-9)),p=a?d.times(a.toString()):null,g=l?d.times(l.toString()):null;return{amount:d.toString(),valueInCurrency:p?.toString()??null,usd:g?.toString()??null}};n.calcEstimatedAndMaxTotalGasFee=({bridgeQuote:{approval:e,trade:t,l1GasFeesInHexWei:n,resetApproval:r},estimatedBaseFeeInDecGwei:s,maxFeePerGasInDecGwei:o,feePerGasInDecGwei:i,exchangeRate:a,usdExchangeRate:c})=>{const{amount:u,valueInCurrency:d,usd:p}=l({approvalGasLimit:e?.effectiveGas??e?.gasLimit,resetApprovalGasLimit:r?.effectiveGas??r?.gasLimit,tradeGasLimit:t?.effectiveGas??t?.gasLimit,l1GasFeesInHexWei:n,feePerGasInDecGwei:i,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:c}),{amount:g,valueInCurrency:m,usd:h}=l({approvalGasLimit:e?.gasLimit,resetApprovalGasLimit:r?.gasLimit,tradeGasLimit:t?.gasLimit,l1GasFeesInHexWei:n,feePerGasInDecGwei:i,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:c}),{amount:f,valueInCurrency:C,usd:S}=l({approvalGasLimit:e?.gasLimit,resetApprovalGasLimit:r?.gasLimit,tradeGasLimit:t?.gasLimit,l1GasFeesInHexWei:n,feePerGasInDecGwei:o,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:c});return{effective:{amount:u,valueInCurrency:d,usd:p},total:{amount:g,valueInCurrency:m,usd:h},max:{amount:f,valueInCurrency:C,usd:S}}};n.calcTotalEstimatedNetworkFee=({total:e},t)=>({amount:new s.BigNumber(e?.amount??"0").plus(t.amount).toString(),valueInCurrency:e?.valueInCurrency?new s.BigNumber(e.valueInCurrency).plus(t.valueInCurrency||"0").toString():null,usd:e?.usd?new s.BigNumber(e.usd).plus(t.usd||"0").toString():null});n.calcTotalMaxNetworkFee=(e,t)=>({amount:new s.BigNumber(e.max.amount).plus(t.amount).toString(),valueInCurrency:e.max.valueInCurrency?new s.BigNumber(e.max.valueInCurrency).plus(t.valueInCurrency||"0").toString():null,usd:e.max.usd?new s.BigNumber(e.max.usd).plus(t.usd||"0").toString():null});n.calcIncludedTxFees=({gasIncluded:e,gasIncluded7702:t,srcAsset:n,feeData:{txFee:r}},s,o)=>{if(!r||!e&&!t)return null;const{exchangeRate:i,usdExchangeRate:l}=r.asset.assetId===n.assetId?s:o,c=a(r.amount,r.asset.decimals);return{amount:c.toString(),valueInCurrency:i?c.times(i).toString():null,usd:l?c.times(l).toString():null}};n.calcAdjustedReturn=(e,t,{feeData:{txFee:n},destAsset:{assetId:r}})=>n?.asset?.assetId===r?{valueInCurrency:e.valueInCurrency,usd:e.usd}:{valueInCurrency:e.valueInCurrency&&t.valueInCurrency?new s.BigNumber(e.valueInCurrency).minus(t.valueInCurrency).toString():null,usd:e.usd&&t.usd?new s.BigNumber(e.usd).minus(t.usd).toString():null};n.calcSwapRate=(e,t)=>new s.BigNumber(t).div(e).toString();n.calcCost=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?new s.BigNumber(t.valueInCurrency).minus(e.valueInCurrency).toString():null,usd:e.usd&&t.usd?new s.BigNumber(t.usd).minus(e.usd).toString():null});n.calcSlippagePercentage=(e,t)=>{const r=(0,n.calcCost)(e,t);return r.valueInCurrency&&t.valueInCurrency?new s.BigNumber(r.valueInCurrency).div(t.valueInCurrency).times(100).abs().toString():r.usd&&t.usd?new s.BigNumber(r.usd).div(t.usd).times(100).abs().toString():null};n.formatEtaInMinutes=e=>e<60?"< 1":(e/60).toFixed();n.sortQuotes=(e,t)=>t===i.FeatureId.PERPS?e.sort((e,t)=>e.estimatedProcessingTimeInSeconds-t.estimatedProcessingTimeInSeconds):e}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/quote.cjs"}],[1585,{"./bridge.cjs":1576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultSlippagePercentage=n.BRIDGE_DEFAULT_SLIPPAGE=void 0;const r=e("./bridge.cjs");n.BRIDGE_DEFAULT_SLIPPAGE=.5;const s=undefined;n.getDefaultSlippagePercentage=({srcTokenAddress:e,destTokenAddress:t,srcChainId:o,destChainId:i},a,l)=>!o||(0,r.isCrossChain)(o,i)?n.BRIDGE_DEFAULT_SLIPPAGE:(0,r.isSolanaChainId)(o)?s:e&&t&&a?.map(e=>e.toLowerCase()).includes(e.toLowerCase())&&(l??a)?.map(e=>e.toLowerCase()).includes(t.toLowerCase())?.5:2}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/slippage.cjs"}],[1586,{"../constants/bridge.cjs":1566,"@metamask/keyring-api":2510,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.computeFeeRequest=n.getMinimumBalanceForRentExemptionInLamports=n.getMinimumBalanceForRentExemptionRequest=void 0;const r=e("@metamask/keyring-api"),s=e("uuid"),o=e("../constants/bridge.cjs");n.getMinimumBalanceForRentExemptionRequest=e=>({snapId:e,origin:"metamask",handler:"onProtocolRequest",request:{method:" ",jsonrpc:"2.0",params:{scope:r.SolScope.Mainnet,request:{id:(0,s.v4)(),jsonrpc:"2.0",method:"getMinimumBalanceForRentExemption",params:[0,{commitment:"confirmed"}]}}}});n.getMinimumBalanceForRentExemptionInLamports=async(e,t)=>String(await t.call("SnapController:handleRequest",(0,n.getMinimumBalanceForRentExemptionRequest)(e)).catch(e=>(console.error("Error setting minimum balance for rent exemption",e),o.DEFAULT_BRIDGE_CONTROLLER_STATE.minimumBalanceForRentExemptionInLamports)));n.computeFeeRequest=(e,t,n,r,o)=>({snapId:e,origin:"metamask",handler:"onClientRequest",request:{id:(0,s.v4)(),jsonrpc:"2.0",method:"computeFee",params:{transaction:t,accountId:n,scope:r,...o&&{options:o}}}})}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/snaps.cjs"}],[1587,{"../constants/chains.cjs":1567,"../constants/swaps.cjs":1568,"../constants/tokens.cjs":1569,"./caip-formatters.cjs":1577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchTokens=n.DEV_BASE_URL=n.API_BASE_URL=n.getSwapsContractAddress=n.isValidSwapsContractAddress=void 0;const r=e("./caip-formatters.cjs"),s=e("../constants/chains.cjs"),o=e("../constants/swaps.cjs"),i=e("../constants/tokens.cjs");function a(e){return e?{"X-Client-Id":e}:undefined}n.isValidSwapsContractAddress=function(e,t){return!(!t||!o.ALLOWED_CONTRACT_ADDRESSES[e])&&o.ALLOWED_CONTRACT_ADDRESSES[e].some(e=>t.toLowerCase()===e.toLowerCase())},n.getSwapsContractAddress=function(e){return o.SWAPS_CONTRACT_ADDRESSES[e]},n.API_BASE_URL="https://swap.api.cx.metamask.io",n.DEV_BASE_URL="https://swap.dev-api.cx.metamask.io",n.fetchTokens=async function(e,t,o){const[l,c]=e===s.CHAIN_IDS.LOCALHOST?[s.CHAIN_IDS.MAINNET,n.DEV_BASE_URL]:[e,n.API_BASE_URL],u=`${c}/networks/${(0,r.formatChainIdToDec)(l)}/tokens`,d=(await t(u,{headers:a(o)})).filter(e=>e.address!==i.DEFAULT_TOKEN_ADDRESS),p=i.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e];return d.push(p),d}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/swaps.cjs"}],[1588,{buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.extractTradeData=n.isTronTrade=n.isBitcoinTrade=n.isEvmTxData=void 0;n.isEvmTxData=e=>"object"==typeof e&&null!==e&&"data"in e&&"chainId"in e&&"to"in e;n.isBitcoinTrade=e=>"object"==typeof e&&null!==e&&"unsignedPsbtBase64"in e;n.isTronTrade=e=>"object"==typeof e&&null!==e&&"raw_data_hex"in e;n.extractTradeData=t=>(0,n.isBitcoinTrade)(t)?t.unsignedPsbtBase64:(0,n.isTronTrade)(t)?e.from(t.raw_data_hex,"hex").toString("base64"):"string"==typeof t?t:(0,n.isEvmTxData)(t)?t.data:""}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/trade-utils.cjs"}],[1589,{"@metamask/controller-utils":1639,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateQuoteResponse=n.QuoteResponseSchema=n.TronTradeDataSchema=n.BitcoinTradeDataSchema=n.TxDataSchema=n.QuoteSchema=n.StepSchema=n.ProtocolSchema=n.FeeDataSchema=n.validateSwapsTokenObject=n.validateFeatureFlagsResponse=n.PlatformConfigSchema=n.PriceImpactThresholdSchema=n.ChainConfigurationSchema=n.BridgeAssetSchema=n.truthyString=n.ActionTypes=n.FeatureId=n.FeeType=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/superstruct"),o=e("@metamask/utils");var i,a,l;!function(e){e.METABRIDGE="metabridge",e.REFUEL="refuel",e.TX_FEE="txFee"}(i||(n.FeeType=i={})),function(e){e.PERPS="perps"}(a||(n.FeatureId=a={})),function(e){e.BRIDGE="bridge",e.SWAP="swap",e.REFUEL="refuel"}(l||(n.ActionTypes=l={}));const c=(0,s.define)("HexAddress",e=>(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})),u=(0,s.define)("HexString",e=>(0,o.isStrictHexString)(e)),d=(0,s.define)("VersionString",e=>"string"==typeof e&&/^(\d+\.*){2}\d+$/u.test(e)&&3===e.split(".").length);n.truthyString=e=>Boolean(e?.length);const p=(0,s.pattern)((0,s.string)(),/^\d+$/u),g=(0,s.number)();n.BridgeAssetSchema=(0,s.type)({chainId:g,address:(0,s.string)(),assetId:o.CaipAssetTypeStruct,symbol:(0,s.string)(),name:(0,s.string)(),decimals:(0,s.number)(),icon:(0,s.optional)((0,s.nullable)((0,s.string)())),iconUrl:(0,s.optional)((0,s.nullable)((0,s.string)()))});const m=(0,s.type)({standard:(0,s.record)((0,s.string)(),(0,s.string)()),other:(0,s.record)((0,s.string)(),(0,s.string)())});n.ChainConfigurationSchema=(0,s.type)({isActiveSrc:(0,s.boolean)(),isActiveDest:(0,s.boolean)(),refreshRate:(0,s.optional)((0,s.number)()),topAssets:(0,s.optional)((0,s.array)((0,s.string)())),stablecoins:(0,s.optional)((0,s.array)((0,s.string)())),isUnifiedUIEnabled:(0,s.optional)((0,s.boolean)()),isSingleSwapBridgeButtonEnabled:(0,s.optional)((0,s.boolean)()),isGaslessSwapEnabled:(0,s.optional)((0,s.boolean)()),noFeeAssets:(0,s.optional)((0,s.array)((0,s.string)())),defaultPairs:(0,s.optional)(m)}),n.PriceImpactThresholdSchema=(0,s.type)({gasless:(0,s.number)(),normal:(0,s.number)()});const h=(0,s.type)({aggIds:(0,s.optional)((0,s.array)((0,s.string)())),bridgeIds:(0,s.optional)((0,s.array)((0,s.string)())),fee:(0,s.optional)((0,s.number)())}),f=(0,s.enums)(Object.values(a));n.PlatformConfigSchema=(0,s.type)({priceImpactThreshold:(0,s.optional)(n.PriceImpactThresholdSchema),quoteRequestOverrides:(0,s.optional)((0,s.record)(f,(0,s.optional)(h))),minimumVersion:(0,s.string)(),refreshRate:(0,s.number)(),maxRefreshCount:(0,s.number)(),support:(0,s.boolean)(),chains:(0,s.record)((0,s.string)(),n.ChainConfigurationSchema),bip44DefaultPairs:(0,s.optional)((0,s.record)((0,s.string)(),(0,s.optional)(m))),sse:(0,s.optional)((0,s.type)({enabled:(0,s.boolean)(),minimumVersion:d}))});n.validateFeatureFlagsResponse=e=>(0,s.is)(e,n.PlatformConfigSchema);n.validateSwapsTokenObject=e=>(0,s.is)(e,n.BridgeAssetSchema),n.FeeDataSchema=(0,s.type)({amount:p,asset:n.BridgeAssetSchema}),n.ProtocolSchema=(0,s.type)({name:(0,s.string)(),displayName:(0,s.optional)((0,s.string)()),icon:(0,s.optional)((0,s.string)())}),n.StepSchema=(0,s.type)({action:(0,s.enums)(Object.values(l)),srcChainId:g,destChainId:(0,s.optional)(g),srcAsset:n.BridgeAssetSchema,destAsset:n.BridgeAssetSchema,srcAmount:(0,s.string)(),destAmount:(0,s.string)(),protocol:n.ProtocolSchema});const C=n.StepSchema;n.QuoteSchema=(0,s.type)({requestId:(0,s.string)(),srcChainId:g,srcAsset:n.BridgeAssetSchema,srcTokenAmount:(0,s.string)(),destChainId:g,destAsset:n.BridgeAssetSchema,destTokenAmount:(0,s.string)(),minDestTokenAmount:(0,s.string)(),feeData:(0,s.type)({[i.METABRIDGE]:n.FeeDataSchema,[i.TX_FEE]:(0,s.optional)((0,s.intersection)([n.FeeDataSchema,(0,s.type)({maxFeePerGas:(0,s.string)(),maxPriorityFeePerGas:(0,s.string)()})]))}),gasIncluded:(0,s.optional)((0,s.boolean)()),gasIncluded7702:(0,s.optional)((0,s.boolean)()),bridgeId:(0,s.string)(),bridges:(0,s.array)((0,s.string)()),steps:(0,s.array)(n.StepSchema),refuel:(0,s.optional)(C),priceData:(0,s.optional)((0,s.type)({totalFromAmountUsd:(0,s.optional)((0,s.string)()),totalToAmountUsd:(0,s.optional)((0,s.string)()),priceImpact:(0,s.optional)((0,s.string)()),totalFeeAmountUsd:(0,s.optional)((0,s.string)())})),gasSponsored:(0,s.optional)((0,s.boolean)())}),n.TxDataSchema=(0,s.type)({chainId:(0,s.number)(),to:c,from:c,value:u,data:u,gasLimit:(0,s.nullable)((0,s.number)()),effectiveGas:(0,s.optional)((0,s.number)())}),n.BitcoinTradeDataSchema=(0,s.type)({unsignedPsbtBase64:(0,s.string)(),inputsToSign:(0,s.nullable)((0,s.array)((0,s.type)({})))}),n.TronTradeDataSchema=(0,s.type)({raw_data_hex:(0,s.string)(),visible:(0,s.optional)((0,s.boolean)()),raw_data:(0,s.optional)((0,s.nullable)((0,s.type)({contract:(0,s.optional)((0,s.array)((0,s.type)({type:(0,s.optional)((0,s.string)())})))})))}),n.QuoteResponseSchema=(0,s.type)({quote:n.QuoteSchema,estimatedProcessingTimeInSeconds:(0,s.number)(),approval:(0,s.optional)((0,s.union)([n.TxDataSchema,n.TronTradeDataSchema])),trade:(0,s.union)([n.TxDataSchema,n.BitcoinTradeDataSchema,n.TronTradeDataSchema,(0,s.string)()])});n.validateQuoteResponse=e=>((0,s.assert)(e,n.QuoteResponseSchema),!0)}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/bridge-controller/dist/utils/validators.cjs"}],[159,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getSubscriptionControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionController",parent:e});return e.delegate({messenger:t,events:["AuthenticationController:stateChange"],actions:["AuthenticationController:getBearerToken","AuthenticationController:performSignOut"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-controller-messenger.ts"}],[1590,{"../api/accounts-api.cjs":1592,"../constants.cjs":1593,"../types.cjs":1595,"../utils.cjs":1596,"@metamask/base-controller":1520,"@metamask/keyring-api":2510,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkController=void 0;const m=e("@metamask/base-controller"),h=e("@metamask/keyring-api"),f=e("@metamask/utils"),C=e("../api/accounts-api.cjs"),S=e("../constants.cjs"),w=e("../types.cjs"),I=e("../utils.cjs");class b extends m.BaseController{constructor({messenger:e,state:t,networkService:n}){super({messenger:e,name:w.MULTICHAIN_NETWORK_CONTROLLER_NAME,metadata:S.MULTICHAIN_NETWORK_CONTROLLER_METADATA,state:{...(0,S.getDefaultMultichainNetworkControllerState)(),...t,multichainNetworkConfigurationsByChainId:S.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS}}),r.add(this),s.set(this,void 0),p(this,s,n,"f"),g(this,r,"m",u).call(this),g(this,r,"m",d).call(this)}async setActiveNetwork(e){if((0,f.isCaipChainId)(e)){if(!(0,I.checkIfSupportedCaipChainId)(e))throw new Error(`Unsupported Caip chain ID: ${String(e)}`);return g(this,r,"m",i).call(this,e)}return await g(this,r,"m",o).call(this,e)}async getNetworksWithTransactionActivityByAccounts(){const e=this.messenger.call("AccountsController:listMultichainAccounts").filter(e=>(0,h.isEvmAccountType)(e.type));if(!e||0===e.length)return this.state.networksWithTransactionActivity;const t=e.map(e=>(0,C.toAllowedCaipAccountIds)(e)).flat(),n=await g(this,s,"f").fetchNetworkActivity(t),r=(0,C.toActiveNetworksByAddress)(n);return this.update(e=>{e.networksWithTransactionActivity=r}),this.state.networksWithTransactionActivity}async removeNetwork(e){return(0,I.isEvmCaipChainId)(e)?await g(this,r,"m",a).call(this,e):g(this,r,"m",l).call(this,e)}}n.MultichainNetworkController=b,s=new WeakMap,r=new WeakSet,o=async function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState"),n=!this.state.isEvmSelected,r=e!==t;(n||r)&&(n&&this.update(e=>{e.isEvmSelected=!0}),r&&await this.messenger.call("NetworkController:setActiveNetwork",e),(n||r)&&this.messenger.publish("MultichainNetworkController:networkDidChange",e))},i=function(e){(e!==this.state.selectedMultichainNetworkChainId||this.state.isEvmSelected)&&(this.update(t=>{t.selectedMultichainNetworkChainId=e,t.isEvmSelected=!1}),this.messenger.publish("MultichainNetworkController:networkDidChange",e))},a=async function(e){const t=(0,I.convertEvmCaipToHexChainId)(e);if(this.messenger.call("NetworkController:getSelectedChainId")===t){if(this.state.isEvmSelected)throw new Error("Cannot remove the currently selected network");const e="0x1",t=this.messenger.call("NetworkController:findNetworkClientIdByChainId",e);await this.messenger.call("NetworkController:setActiveNetwork",t)}this.messenger.call("NetworkController:removeNetwork",t)},l=function(e){throw new Error("Removal of non-EVM networks is not supported")},c=function(e){const{type:t,scopes:n}=e;if((0,h.isEvmAccountType)(t)){if(this.state.isEvmSelected)return;return void this.update(e=>{e.isEvmSelected=!0})}if(n.includes(this.state.selectedMultichainNetworkChainId))return void this.update(e=>{e.isEvmSelected=!1});const r=(0,I.getChainIdForNonEvm)(n);this.update(e=>{e.selectedMultichainNetworkChainId=r,e.isEvmSelected=!1})},u=function(){this.messenger.subscribe("AccountsController:selectedAccountChange",e=>g(this,r,"m",c).call(this,e))},d=function(){this.messenger.registerActionHandler("MultichainNetworkController:setActiveNetwork",this.setActiveNetwork.bind(this)),this.messenger.registerActionHandler("MultichainNetworkController:getNetworksWithTransactionActivityByAccounts",this.getNetworksWithTransactionActivityByAccounts.bind(this))}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/MultichainNetworkController/MultichainNetworkController.cjs"}],[1591,{"../api/accounts-api.cjs":1592,"@metamask/superstruct":3415,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkService=void 0;const c=e("@metamask/superstruct"),u=e("lodash"),d=e("../api/accounts-api.cjs");n.MultichainNetworkService=class{constructor({fetch:e,batchSize:t}){r.add(this),s.set(this,void 0),o.set(this,void 0),a(this,s,e,"f"),a(this,o,t??20,"f")}async fetchNetworkActivity(e){if(0===e.length)return{activeNetworks:[]};if(e.length<=l(this,o,"f"))return l(this,r,"m",i).call(this,e);const t=(0,u.chunk)(e,l(this,o,"f"));return{activeNetworks:(await Promise.all(t.map(e=>l(this,r,"m",i).call(this,e)))).flatMap(e=>e.activeNetworks)}}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=async function(e){try{const t=(0,d.buildActiveNetworksUrl)(e),n=await l(this,s,"f").call(this,t.toString(),{method:"GET",headers:{[d.MULTICHAIN_ACCOUNTS_CLIENT_HEADER]:d.MULTICHAIN_ACCOUNTS_CLIENT_ID,Accept:"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();return(0,c.assert)(r,d.ActiveNetworksResponseStruct),r}catch(e){if(e instanceof Error){if("AbortError"===e.name)throw new Error("Request timeout: Failed to fetch active networks");throw e}throw new Error(`Failed to fetch active networks: ${String(e)}`)}}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/MultichainNetworkService/MultichainNetworkService.cjs"}],[1592,{"@metamask/keyring-api":2510,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.buildActiveNetworksUrl=n.toActiveNetworksByAddress=n.toAllowedCaipAccountIds=n.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES=n.MULTICHAIN_ACCOUNTS_CLIENT_ID=n.MULTICHAIN_ACCOUNTS_CLIENT_HEADER=n.MULTICHAIN_ACCOUNTS_BASE_URL=n.ActiveNetworksResponseStruct=void 0;const r=e("@metamask/keyring-api"),s=e("@metamask/superstruct"),o=e("@metamask/utils");n.ActiveNetworksResponseStruct=(0,s.object)({activeNetworks:(0,s.array)(o.CaipAccountIdStruct)}),n.MULTICHAIN_ACCOUNTS_BASE_URL="https://accounts.api.cx.metamask.io",n.MULTICHAIN_ACCOUNTS_CLIENT_HEADER="x-metamask-clientproduct",n.MULTICHAIN_ACCOUNTS_CLIENT_ID="metamask-multichain-network-controller",n.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES=[String(r.BtcScope.Mainnet),String(r.BtcScope.Testnet),String(r.BtcScope.Testnet4),String(r.BtcScope.Signet),String(r.BtcScope.Regtest),String(r.SolScope.Mainnet),String(r.SolScope.Devnet),String(r.EthScope.Mainnet),String(r.EthScope.Testnet),String(r.EthScope.Eoa),String(r.TrxScope.Mainnet),String(r.TrxScope.Nile),String(r.TrxScope.Shasta)],n.toAllowedCaipAccountIds=function(e){const t=[];for(const r of e.scopes)n.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES.includes(r)&&t.push(`${r}:${e.address}`);return t},n.toActiveNetworksByAddress=function(e){const t={};return e.activeNetworks.forEach(e=>{const{address:n,chain:{namespace:r,reference:s}}=(0,o.parseCaipAccountId)(e);t[n]||(t[n]={namespace:r,activeChains:[]}),t[n].activeChains.push(s)}),t},n.buildActiveNetworksUrl=function(e){const t=new URL(`${n.MULTICHAIN_ACCOUNTS_BASE_URL}/v2/activeNetworks`);return t.searchParams.append("accountIds",e.join(",")),t}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/api/accounts-api.cjs"}],[1593,{"@metamask/keyring-api":2510,"@metamask/network-controller":1601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MULTICHAIN_NETWORK_DECIMAL_PLACES=n.MULTICHAIN_NETWORK_TICKER=n.MULTICHAIN_NETWORK_CONTROLLER_METADATA=n.getDefaultMultichainNetworkControllerState=n.NETWORKS_METADATA=n.NON_EVM_TESTNET_IDS=n.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS=n.TRX_SHASTA_NATIVE_ASSET=n.TRX_NILE_NATIVE_ASSET=n.TRX_NATIVE_ASSET=n.SOL_DEVNET_NATIVE_ASSET=n.SOL_TESTNET_NATIVE_ASSET=n.SOL_NATIVE_ASSET=n.BTC_REGTEST_NATIVE_ASSET=n.BTC_SIGNET_NATIVE_ASSET=n.BTC_TESTNET4_NATIVE_ASSET=n.BTC_TESTNET_NATIVE_ASSET=n.BTC_NATIVE_ASSET=void 0;const r=e("@metamask/keyring-api"),s=e("@metamask/network-controller");n.BTC_NATIVE_ASSET=`${r.BtcScope.Mainnet}/slip44:0`,n.BTC_TESTNET_NATIVE_ASSET=`${r.BtcScope.Testnet}/slip44:0`,n.BTC_TESTNET4_NATIVE_ASSET=`${r.BtcScope.Testnet4}/slip44:0`,n.BTC_SIGNET_NATIVE_ASSET=`${r.BtcScope.Signet}/slip44:0`,n.BTC_REGTEST_NATIVE_ASSET=`${r.BtcScope.Regtest}/slip44:0`,n.SOL_NATIVE_ASSET=`${r.SolScope.Mainnet}/slip44:501`,n.SOL_TESTNET_NATIVE_ASSET=`${r.SolScope.Testnet}/slip44:501`,n.SOL_DEVNET_NATIVE_ASSET=`${r.SolScope.Devnet}/slip44:501`,n.TRX_NATIVE_ASSET=`${r.TrxScope.Mainnet}/slip44:195`,n.TRX_NILE_NATIVE_ASSET=`${r.TrxScope.Nile}/slip44:195`,n.TRX_SHASTA_NATIVE_ASSET=`${r.TrxScope.Shasta}/slip44:195`,n.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS={[r.BtcScope.Mainnet]:{chainId:r.BtcScope.Mainnet,name:"Bitcoin",nativeCurrency:n.BTC_NATIVE_ASSET,isEvm:!1},[r.BtcScope.Testnet]:{chainId:r.BtcScope.Testnet,name:"Bitcoin Testnet",nativeCurrency:n.BTC_TESTNET_NATIVE_ASSET,isEvm:!1},[r.BtcScope.Testnet4]:{chainId:r.BtcScope.Testnet4,name:"Bitcoin Testnet4",nativeCurrency:n.BTC_TESTNET4_NATIVE_ASSET,isEvm:!1},[r.BtcScope.Signet]:{chainId:r.BtcScope.Signet,name:"Bitcoin Mutinynet",nativeCurrency:n.BTC_SIGNET_NATIVE_ASSET,isEvm:!1},[r.BtcScope.Regtest]:{chainId:r.BtcScope.Regtest,name:"Bitcoin Regtest",nativeCurrency:n.BTC_REGTEST_NATIVE_ASSET,isEvm:!1},[r.SolScope.Mainnet]:{chainId:r.SolScope.Mainnet,name:"Solana",nativeCurrency:n.SOL_NATIVE_ASSET,isEvm:!1},[r.SolScope.Testnet]:{chainId:r.SolScope.Testnet,name:"Solana Testnet",nativeCurrency:n.SOL_TESTNET_NATIVE_ASSET,isEvm:!1},[r.SolScope.Devnet]:{chainId:r.SolScope.Devnet,name:"Solana Devnet",nativeCurrency:n.SOL_DEVNET_NATIVE_ASSET,isEvm:!1},[r.TrxScope.Mainnet]:{chainId:r.TrxScope.Mainnet,name:"Tron",nativeCurrency:n.TRX_NATIVE_ASSET,isEvm:!1},[r.TrxScope.Nile]:{chainId:r.TrxScope.Nile,name:"Tron Nile",nativeCurrency:n.TRX_NILE_NATIVE_ASSET,isEvm:!1},[r.TrxScope.Shasta]:{chainId:r.TrxScope.Shasta,name:"Tron Shasta",nativeCurrency:n.TRX_SHASTA_NATIVE_ASSET,isEvm:!1}},n.NON_EVM_TESTNET_IDS=[r.BtcScope.Testnet,r.BtcScope.Testnet4,r.BtcScope.Signet,r.BtcScope.Regtest,r.SolScope.Testnet,r.SolScope.Devnet,r.TrxScope.Nile,r.TrxScope.Shasta],n.NETWORKS_METADATA={[r.BtcScope.Mainnet]:{features:[],status:s.NetworkStatus.Available},[r.SolScope.Mainnet]:{features:[],status:s.NetworkStatus.Available},[r.TrxScope.Mainnet]:{features:[],status:s.NetworkStatus.Available}};n.getDefaultMultichainNetworkControllerState=()=>({multichainNetworkConfigurationsByChainId:n.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS,selectedMultichainNetworkChainId:r.SolScope.Mainnet,isEvmSelected:!0,networksWithTransactionActivity:{}}),n.MULTICHAIN_NETWORK_CONTROLLER_METADATA={multichainNetworkConfigurationsByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},selectedMultichainNetworkChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isEvmSelected:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networksWithTransactionActivity:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}},n.MULTICHAIN_NETWORK_TICKER={[r.BtcScope.Mainnet]:"BTC",[r.BtcScope.Testnet]:"tBTC",[r.BtcScope.Testnet4]:"tBTC",[r.BtcScope.Signet]:"sBTC",[r.BtcScope.Regtest]:"rBTC",[r.SolScope.Mainnet]:"SOL",[r.SolScope.Testnet]:"tSOL",[r.SolScope.Devnet]:"dSOL",[r.TrxScope.Mainnet]:"TRX",[r.TrxScope.Nile]:"tTRX",[r.TrxScope.Shasta]:"sTRX"},n.MULTICHAIN_NETWORK_DECIMAL_PLACES={[r.BtcScope.Mainnet]:8,[r.BtcScope.Testnet]:8,[r.BtcScope.Testnet4]:8,[r.BtcScope.Signet]:8,[r.BtcScope.Regtest]:8,[r.SolScope.Mainnet]:5,[r.SolScope.Testnet]:5,[r.SolScope.Devnet]:5,[r.TrxScope.Mainnet]:6,[r.TrxScope.Nile]:6,[r.TrxScope.Shasta]:6}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/constants.cjs"}],[1594,{"./MultichainNetworkController/MultichainNetworkController.cjs":1590,"./MultichainNetworkService/MultichainNetworkService.cjs":1591,"./constants.cjs":1593,"./utils.cjs":1596},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toEvmCaipChainId=n.toMultichainNetworkConfigurationsByChainId=n.toMultichainNetworkConfiguration=n.checkIfSupportedCaipChainId=n.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS=n.MULTICHAIN_NETWORK_DECIMAL_PLACES=n.MULTICHAIN_NETWORK_TICKER=n.NON_EVM_TESTNET_IDS=n.getDefaultMultichainNetworkControllerState=n.MultichainNetworkService=n.MultichainNetworkController=void 0;var r=e("./MultichainNetworkController/MultichainNetworkController.cjs");Object.defineProperty(n,"MultichainNetworkController",{enumerable:!0,get:function(){return r.MultichainNetworkController}});var s=e("./MultichainNetworkService/MultichainNetworkService.cjs");Object.defineProperty(n,"MultichainNetworkService",{enumerable:!0,get:function(){return s.MultichainNetworkService}});var o=e("./constants.cjs");Object.defineProperty(n,"getDefaultMultichainNetworkControllerState",{enumerable:!0,get:function(){return o.getDefaultMultichainNetworkControllerState}}),Object.defineProperty(n,"NON_EVM_TESTNET_IDS",{enumerable:!0,get:function(){return o.NON_EVM_TESTNET_IDS}}),Object.defineProperty(n,"MULTICHAIN_NETWORK_TICKER",{enumerable:!0,get:function(){return o.MULTICHAIN_NETWORK_TICKER}}),Object.defineProperty(n,"MULTICHAIN_NETWORK_DECIMAL_PLACES",{enumerable:!0,get:function(){return o.MULTICHAIN_NETWORK_DECIMAL_PLACES}}),Object.defineProperty(n,"AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS",{enumerable:!0,get:function(){return o.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS}});var i=e("./utils.cjs");Object.defineProperty(n,"checkIfSupportedCaipChainId",{enumerable:!0,get:function(){return i.checkIfSupportedCaipChainId}}),Object.defineProperty(n,"toMultichainNetworkConfiguration",{enumerable:!0,get:function(){return i.toMultichainNetworkConfiguration}}),Object.defineProperty(n,"toMultichainNetworkConfigurationsByChainId",{enumerable:!0,get:function(){return i.toMultichainNetworkConfigurationsByChainId}}),Object.defineProperty(n,"toEvmCaipChainId",{enumerable:!0,get:function(){return i.toEvmCaipChainId}})}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/index.cjs"}],[1595,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MULTICHAIN_NETWORK_CONTROLLER_NAME=void 0,n.MULTICHAIN_NETWORK_CONTROLLER_NAME="MultichainNetworkController"}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/types.cjs"}],[1596,{"./constants.cjs":1593,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isKnownCaipNamespace=n.toMultichainNetworkConfigurationsByChainId=n.toMultichainNetworkConfiguration=n.convertEvmCaipToHexChainId=n.toEvmCaipChainId=n.checkIfSupportedCaipChainId=n.getChainIdForNonEvm=n.isEvmCaipChainId=void 0;const r=e("@metamask/utils"),s=e("./constants.cjs");n.isEvmCaipChainId=function(e){const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155},n.getChainIdForNonEvm=function(e){const t=e.find(e=>Object.keys(s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS).includes(e));if(t)return t;throw new Error(`Unsupported scope: ${e.join(", ")}.`)},n.checkIfSupportedCaipChainId=function(e){return Object.keys(s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS).includes(e)};n.toEvmCaipChainId=e=>(0,r.toCaipChainId)(r.KnownCaipNamespace.Eip155,(0,r.hexToNumber)(e).toString()),n.convertEvmCaipToHexChainId=function(e){const{namespace:t,reference:n}=(0,r.parseCaipChainId)(e);if(t===r.KnownCaipNamespace.Eip155)return(0,r.add0x)(parseInt(n,10).toString(16));throw new Error(`Unsupported CAIP chain ID namespace: ${t}. Only eip155 is supported.`)};n.toMultichainNetworkConfiguration=e=>{const{chainId:t,name:r,rpcEndpoints:s,defaultRpcEndpointIndex:o,nativeCurrency:i,blockExplorerUrls:a,defaultBlockExplorerUrlIndex:l=0}=e;return{chainId:(0,n.toEvmCaipChainId)(t),isEvm:!0,name:r||s[o].url,nativeCurrency:i,blockExplorerUrls:a,defaultBlockExplorerUrlIndex:l}};n.toMultichainNetworkConfigurationsByChainId=e=>Object.entries(e).reduce((e,[,t])=>({...e,[(0,n.toEvmCaipChainId)(t.chainId)]:(0,n.toMultichainNetworkConfiguration)(t)}),{}),n.isKnownCaipNamespace=function(e){return Object.values(r.KnownCaipNamespace).includes(e)}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/dist/utils.cjs"}],[1597,{"./constants.cjs":1598,"./create-auto-managed-network-client.cjs":1599,"./logger.cjs":1602,"./types.cjs":1605,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"@metamask/eth-query":2226,"@metamask/rpc-errors":3026,"@metamask/swappable-obj-proxy":3424,"@metamask/utils":3554,"fast-deep-equal":4782,immer:5015,lodash:5239,reselect:5709,"uri-js":6108,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f,C,S,w,I,b,T,E,k,A,v,y,_,M,N,P,R=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),O=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),D=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&R(t,e,n);return O(t,e),t},B=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},L=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},j=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkController=n.selectAvailableNetworkClientIds=n.getAvailableNetworkClientIds=n.selectNetworkConfigurations=n.getNetworkConfigurations=n.getDefaultNetworkControllerState=n.knownKeysOf=n.RpcEndpointType=void 0;const F=e("@metamask/base-controller"),x=e("@metamask/controller-utils"),U=j(e("@metamask/eth-query")),H=e("@metamask/rpc-errors"),G=e("@metamask/swappable-obj-proxy"),q=e("@metamask/utils"),$=j(e("fast-deep-equal")),W=e("immer"),K=e("lodash"),V=e("reselect"),Y=D(e("uri-js")),Q=e("uuid"),z=e("./constants.cjs"),X=e("./create-auto-managed-network-client.cjs"),J=e("./logger.cjs"),Z=e("./types.cjs"),ee=(0,J.createModuleLogger)(J.projectLogger,"NetworkController"),te=/^https:\/\/(?<networkName>[^.]+)\.infura\.io\/v\d+\/(?<apiKey>.+)$/u;var ne;function re(e){return Object.keys(e)}!function(e){e.Custom="custom",e.Infura="infura"}(ne||(n.RpcEndpointType=ne={})),n.knownKeysOf=re;const se="NetworkController";function oe(e=[]){const t=Object.values(x.InfuraNetworkType).reduce((e,t)=>{const n=x.ChainId[t];if(z.DEPRECATED_NETWORKS.has(n))return e;const r=`https://${t}.infura.io/v3/{infuraProjectId}`,s={blockExplorerUrls:[],chainId:n,defaultRpcEndpointIndex:0,name:x.NetworkNickname[t],nativeCurrency:x.NetworksTicker[t],rpcEndpoints:[{failoverUrls:[],networkClientId:t,type:ne.Infura,url:r}]};return{...e,[n]:s}},{}),n={[x.ChainId["megaeth-testnet"]]:ie(x.CustomNetworkType["megaeth-testnet"]),[x.ChainId["megaeth-testnet-v2"]]:ie(x.CustomNetworkType["megaeth-testnet-v2"]),[x.ChainId["monad-testnet"]]:ie(x.CustomNetworkType["monad-testnet"])};return e.reduce((e,t)=>((0,q.hasProperty)(n,t)&&(e[t]=n[t]),e),t)}function ie(e){const{ticker:t,rpcPrefs:n}=x.BUILT_IN_NETWORKS[e],r=x.BUILT_IN_CUSTOM_NETWORKS_RPC[e];return{blockExplorerUrls:[n.blockExplorerUrl],chainId:x.ChainId[e],defaultRpcEndpointIndex:0,defaultBlockExplorerUrlIndex:0,name:x.NetworkNickname[e],nativeCurrency:t,rpcEndpoints:[{failoverUrls:[],networkClientId:e,type:ne.Custom,url:r}]}}function ae(e){const t=oe(e);return{selectedNetworkClientId:x.InfuraNetworkType.mainnet,networksMetadata:{},networkConfigurationsByChainId:t}}n.getDefaultNetworkControllerState=ae;function le(e){return Object.values(e.networkConfigurationsByChainId)}function ce(e){return e.flatMap(e=>e.rpcEndpoints.map(e=>e.networkClientId))}function ue(e){const t=Y.parse(e);return t.error===undefined&&("http"===t.scheme||"https"===t.scheme)}function de(e){const t=te.exec(e);if(t?.groups){if((0,x.isInfuraNetworkType)(t.groups.networkName))return t.groups.networkName;throw new Error(`Unknown Infura network '${t.groups.networkName}'`)}throw new Error("Could not derive Infura network from RPC endpoint URL")}function pe(e){return new Map(Object.values(e).flatMap(e=>e.rpcEndpoints.map(t=>[t.networkClientId,e])))}n.getNetworkConfigurations=le,n.selectNetworkConfigurations=(0,V.createSelector)(e=>e.networkConfigurationsByChainId,e=>Object.values(e)),n.getAvailableNetworkClientIds=ce,n.selectAvailableNetworkClientIds=(0,V.createSelector)(n.selectNetworkConfigurations,ce);class ge extends F.BaseController{constructor(e){const{messenger:t,state:n,infuraProjectId:f,log:C,getRpcServiceOptions:S,getBlockTrackerOptions:w,additionalDefaultNetworks:I,isRpcFailoverEnabled:T=!1}=e,E={...ae(I),...n};!function(e){const t=Object.entries(e.networkConfigurationsByChainId),n=ce(le(e));if(0===t.length)throw new Error("NetworkController state is invalid: `networkConfigurationsByChainId` cannot be empty");for(const[e,n]of t){if(e!==n.chainId)throw new Error(`NetworkController state has invalid \`networkConfigurationsByChainId\`: Network configuration '${n.name}' is filed under '${e}' which does not match its \`chainId\` of '${n.chainId}'`);if(n.blockExplorerUrls.length>0?n.defaultBlockExplorerUrlIndex===undefined||n.blockExplorerUrls[n.defaultBlockExplorerUrlIndex]===undefined:n.defaultBlockExplorerUrlIndex!==undefined)throw new Error(`NetworkController state has invalid \`networkConfigurationsByChainId\`: Network configuration '${n.name}' has a \`defaultBlockExplorerUrlIndex\` that does not refer to an entry in \`blockExplorerUrls\``);if(n.rpcEndpoints[n.defaultRpcEndpointIndex]===undefined)throw new Error(`NetworkController state has invalid \`networkConfigurationsByChainId\`: Network configuration '${n.name}' has a \`defaultRpcEndpointIndex\` that does not refer to an entry in \`rpcEndpoints\``)}if([...new Set(n)].length<n.length)throw new Error("NetworkController state has invalid `networkConfigurationsByChainId`: Every RPC endpoint across all network configurations must have a unique `networkClientId`")}(E);const k=function(e,t){const n=le(e).sort((e,t)=>e.chainId.localeCompare(t.chainId)),r=ce(n),s=Object.keys(e.networksMetadata).filter(e=>!r.includes(e));return(0,W.produce)(e,o=>{if(!r.includes(e.selectedNetworkClientId)){const r=n[0],s=r.rpcEndpoints[r.defaultRpcEndpointIndex].networkClientId;t.captureException?.(new Error(`\`selectedNetworkClientId\` '${e.selectedNetworkClientId}' does not refer to an RPC endpoint within a network configuration; correcting to '${s}'`)),o.selectedNetworkClientId=s}if(s.length>0){for(const e of s)delete o.networksMetadata[e];t.captureException?.(new Error("`networksMetadata` had invalid network client IDs, which have been removed"))}})}(E,t);if(!f||"string"!=typeof f)throw new Error("Invalid Infura project ID");super({name:se,metadata:{selectedNetworkClientId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},networksMetadata:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},networkConfigurationsByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},messenger:t,state:k}),r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),g.set(this,void 0),m.set(this,void 0),h.set(this,void 0),B(this,o,f,"f"),B(this,d,C,"f"),B(this,p,S,"f"),B(this,g,w,"f"),B(this,h,T,"f"),B(this,i,this.state.selectedNetworkClientId,"f"),B(this,m,pe(this.state.networkConfigurationsByChainId),"f"),this.messenger.registerActionHandler(`${this.name}:getEthQuery`,()=>L(this,s,"f")),this.messenger.registerActionHandler(`${this.name}:getNetworkClientById`,this.getNetworkClientById.bind(this)),this.messenger.registerActionHandler(`${this.name}:getEIP1559Compatibility`,this.getEIP1559Compatibility.bind(this)),this.messenger.registerActionHandler(`${this.name}:setActiveNetwork`,this.setActiveNetwork.bind(this)),this.messenger.registerActionHandler(`${this.name}:setProviderType`,this.setProviderType.bind(this)),this.messenger.registerActionHandler(`${this.name}:findNetworkClientIdByChainId`,this.findNetworkClientIdByChainId.bind(this)),this.messenger.registerActionHandler(`${this.name}:getNetworkConfigurationByChainId`,this.getNetworkConfigurationByChainId.bind(this)),this.messenger.registerActionHandler(`${this.name}:getNetworkConfigurationByNetworkClientId`,this.getNetworkConfigurationByNetworkClientId.bind(this)),this.messenger.registerActionHandler(`${this.name}:getSelectedNetworkClient`,this.getSelectedNetworkClient.bind(this)),this.messenger.registerActionHandler(`${this.name}:getSelectedChainId`,this.getSelectedChainId.bind(this)),this.messenger.registerActionHandler(`${this.name}:addNetwork`,this.addNetwork.bind(this)),this.messenger.registerActionHandler(`${this.name}:removeNetwork`,this.removeNetwork.bind(this)),this.messenger.registerActionHandler(`${this.name}:updateNetwork`,this.updateNetwork.bind(this)),this.messenger.subscribe(`${this.name}:rpcEndpointChainUnavailable`,({networkClientId:e})=>{L(this,r,"m",b).call(this,e,{networkStatus:z.NetworkStatus.Unavailable})}),this.messenger.subscribe(`${this.name}:rpcEndpointChainDegraded`,({networkClientId:e})=>{L(this,r,"m",b).call(this,e,{networkStatus:z.NetworkStatus.Degraded})}),this.messenger.subscribe(`${this.name}:rpcEndpointChainAvailable`,({networkClientId:e})=>{L(this,r,"m",b).call(this,e,{networkStatus:z.NetworkStatus.Available})})}enableRpcFailover(){L(this,r,"m",f).call(this,!0)}disableRpcFailover(){L(this,r,"m",f).call(this,!1)}getProviderAndBlockTracker(){return{provider:L(this,a,"f"),blockTracker:L(this,l,"f")}}getSelectedNetworkClient(){return L(this,a,"f")&&L(this,l,"f")?{provider:L(this,a,"f"),blockTracker:L(this,l,"f")}:undefined}getSelectedChainId(){const e=this.getNetworkConfigurationByNetworkClientId(this.state.selectedNetworkClientId);return e?.chainId}getNetworkClientRegistry(){const e=L(this,r,"m",M).call(this);return Object.assign({},e[Z.NetworkClientType.Infura],e[Z.NetworkClientType.Custom])}getNetworkClientById(e){if(!e)throw new Error("No network client ID was provided.");const t=L(this,r,"m",M).call(this);if((0,x.isInfuraNetworkType)(e)){const n=t[Z.NetworkClientType.Infura][e];if(!n)throw new Error(`No Infura network client was found with the ID "${e}".`);return n}const n=t[Z.NetworkClientType.Custom][e];if(!n)throw new Error(`No custom network client was found with the ID "${e}".`);return n}initializeProvider({lookupNetwork:e=!0}={}){return L(this,r,"m",P).call(this,this.state.selectedNetworkClientId),e?this.lookupNetwork():undefined}async lookupNetwork(e){e?await L(this,r,"m",w).call(this,e):await L(this,r,"m",I).call(this)}async lookupNetworkByClientId(e){await L(this,r,"m",w).call(this,e)}async setProviderType(e){if(e===x.NetworkType.rpc)throw new Error(`NetworkController - cannot call "setProviderType" with type "${x.NetworkType.rpc}". Use "setActiveNetwork"`);if(!(0,x.isInfuraNetworkType)(e))throw new Error(`Unknown Infura provider type "${String(e)}".`);await this.setActiveNetwork(e)}async setActiveNetwork(e,t={}){B(this,i,this.state.selectedNetworkClientId,"f"),await L(this,r,"m",C).call(this,e,t)}async getEIP1559Compatibility(e){if(e)return this.get1559CompatibilityWithNetworkClientId(e);if(!L(this,s,"f"))return!1;const{EIPS:t}=this.state.networksMetadata[this.state.selectedNetworkClientId];if(t[1559]!==undefined)return t[1559];const n=await L(this,r,"m",E).call(this,this.state.selectedNetworkClientId);return this.update(e=>{n!==undefined&&(e.networksMetadata[e.selectedNetworkClientId].EIPS[1559]=n)}),n}async get1559CompatibilityWithNetworkClientId(e){let t=this.state.networksMetadata[e];t?.EIPS[1559]===undefined&&(await this.lookupNetwork(e),t=this.state.networksMetadata[e]);const{EIPS:n}=t;return n[1559]}async resetConnection(){await L(this,r,"m",C).call(this,this.state.selectedNetworkClientId)}getNetworkConfigurationByChainId(e){return this.state.networkConfigurationsByChainId[e]}getNetworkConfigurationByNetworkClientId(e){return L(this,m,"f").get(e)}addNetwork(e){const{rpcEndpoints:t}=e,n=L(this,r,"m",M).call(this);L(this,r,"m",k).call(this,{mode:"add",networkFields:e,autoManagedNetworkClientRegistry:n});const s=t.map(e=>({type:"add",rpcEndpoint:e.type===ne.Custom?{...e,networkClientId:(0,Q.v4)()}:e})),o=L(this,r,"m",A).call(this,{networkFields:e,networkClientOperations:s});return L(this,r,"m",v).call(this,{networkFields:e,networkClientOperations:s,autoManagedNetworkClientRegistry:n}),this.update(t=>{L(this,r,"m",_).call(this,{state:t,mode:"add",networkFields:e,networkConfigurationToPersist:o})}),this.messenger.publish(`${se}:networkAdded`,o),o}async updateNetwork(e,t,{replacementSelectedRpcEndpointIndex:n}={}){const s=this.state.networkConfigurationsByChainId[e];if(s===undefined)throw new Error(`Could not update network: Cannot find network configuration for chain '${e}'`);const o=e,{chainId:i,rpcEndpoints:a}=t,l=L(this,r,"m",M).call(this);L(this,r,"m",k).call(this,{mode:"update",networkFields:t,existingNetworkConfiguration:s,autoManagedNetworkClientRegistry:l});const c=[];for(const e of a){const t=s.rpcEndpoints.find(t=>t.type===e.type&&t.url===e.url&&(t.networkClientId===e.networkClientId||e.networkClientId===undefined)),n=s.rpcEndpoints.find(t=>t.type===ne.Infura&&e.type===ne.Infura||t.type===e.type&&t.networkClientId===e.networkClientId&&t.url===e.url),r=s.rpcEndpoints.find(t=>t.type===e.type&&(t.url===e.url||t.networkClientId===e.networkClientId));if(i!==o&&n!==undefined){const t=e.type===ne.Infura?e:{...e,networkClientId:(0,Q.v4)()};c.push({type:"replace",oldRpcEndpoint:n,newRpcEndpoint:t})}else if(t!==undefined){let n;n=t.type===ne.Infura?t:Object.assign({},e,{networkClientId:t.networkClientId}),c.push({type:"noop",rpcEndpoint:n})}else if(r===undefined){const t={type:"add",rpcEndpoint:e.type===ne.Infura?e:{...e,networkClientId:(0,Q.v4)()}};c.push(t)}else{let t;t=e.type===ne.Infura?e:{...e,networkClientId:(0,Q.v4)()},c.push({type:"replace",oldRpcEndpoint:r,newRpcEndpoint:t})}}for(const e of s.rpcEndpoints)if(!c.some(t=>{const n="replace"===t.type?t.oldRpcEndpoint:t.rpcEndpoint;return n.type===e.type&&n.networkClientId===e.networkClientId&&n.url===e.url})){const t={type:"remove",rpcEndpoint:e};c.push(t)}const u=L(this,r,"m",A).call(this,{networkFields:t,networkClientOperations:c});if(n===undefined&&c.some(e=>"remove"===e.type&&e.rpcEndpoint.networkClientId===this.state.selectedNetworkClientId)&&!c.some(e=>"replace"===e.type&&e.oldRpcEndpoint.networkClientId===this.state.selectedNetworkClientId))throw new Error(`Could not update network: Cannot update RPC endpoints in such a way that the selected network '${this.state.selectedNetworkClientId}' would be removed without a replacement. Choose a different RPC endpoint as the selected network via the \`replacementSelectedRpcEndpointIndex\` option.`);L(this,r,"m",v).call(this,{networkFields:t,networkClientOperations:c,autoManagedNetworkClientRegistry:l});const d=c.map((e,t)=>[e,t]).find(([e,t])=>"replace"===e.type&&e.oldRpcEndpoint.networkClientId===this.state.selectedNetworkClientId),p=n??d?.[1];let g;if(p!==undefined&&(g=u.rpcEndpoints[p],g===undefined))throw new Error(`Could not update network: \`replacementSelectedRpcEndpointIndex\` ${p} does not refer to an entry in \`rpcEndpoints\``);return g&&g.networkClientId!==this.state.selectedNetworkClientId?await this.setActiveNetwork(g.networkClientId,{updateState:e=>{L(this,r,"m",_).call(this,{state:e,mode:"update",networkFields:t,networkConfigurationToPersist:u,existingNetworkConfiguration:s})}}):this.update(e=>{L(this,r,"m",_).call(this,{state:e,mode:"update",networkFields:t,networkConfigurationToPersist:u,existingNetworkConfiguration:s})}),L(this,r,"m",y).call(this,{networkClientOperations:c,autoManagedNetworkClientRegistry:l}),u}removeNetwork(e){const t=this.state.networkConfigurationsByChainId[e];if(t===undefined)throw new Error(`Cannot find network configuration for chain '${e}'`);if(t.rpcEndpoints.some(e=>e.networkClientId===this.state.selectedNetworkClientId))throw new Error("Cannot remove the currently selected network");const n=L(this,r,"m",M).call(this),s=t.rpcEndpoints.map(e=>({type:"remove",rpcEndpoint:e}));L(this,r,"m",y).call(this,{networkClientOperations:s,autoManagedNetworkClientRegistry:n}),this.update(e=>{L(this,r,"m",_).call(this,{state:e,mode:"remove",existingNetworkConfiguration:t});for(const n of t.rpcEndpoints)delete e.networksMetadata[n.networkClientId]}),this.messenger.publish("NetworkController:networkRemoved",t)}async rollbackToPreviousProvider(){await L(this,r,"m",C).call(this,L(this,i,"f"))}async destroy(){await(L(this,l,"f")?.destroy())}loadBackup({networkConfigurationsByChainId:e}){this.update(t=>{t.networkConfigurationsByChainId={...t.networkConfigurationsByChainId,...e}})}findNetworkClientIdByChainId(e){const t=this.state.networkConfigurationsByChainId[e];if(!t)throw new Error(`Invalid chain ID "${e}"`);const{networkClientId:n}=t.rpcEndpoints[t.defaultRpcEndpointIndex];return n}}n.NetworkController=ge,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,h=new WeakMap,r=new WeakSet,f=function(e){if(L(this,h,"f")===e)return;const t=L(this,r,"m",M).call(this);for(const n of Object.values(t))for(const t of Object.keys(n)){const r=n[t];r.configuration.failoverRpcUrls&&r.configuration.failoverRpcUrls.length>0&&(e?r.enableRpcFailover():r.disableRpcFailover())}B(this,h,e,"f")},C=async function(e,t={}){this.messenger.publish("NetworkController:networkWillChange",this.state),L(this,r,"m",P).call(this,e,t),this.messenger.publish("NetworkController:networkDidChange",this.state),await this.lookupNetwork()},S=async function(e){const t=((0,x.isInfuraNetworkType)(e),this.getNetworkClientById(e)).configuration.type===Z.NetworkClientType.Infura;let n,s;try{s=await L(this,r,"m",E).call(this,e),n=z.NetworkStatus.Available}catch(e){if(ee("NetworkController: lookupNetwork: ",e),function(e){return"object"==typeof e&&null!==e&&"code"in e}(e)){let r;if(t&&(0,q.hasProperty)(e,"message")&&"string"==typeof e.message)try{r=JSON.parse(e.message)}catch{L(this,d,"f")?.warn("NetworkController: lookupNetwork: json parse error: ",e)}(0,q.isPlainObject)(r)&&r.error===z.INFURA_BLOCKED_KEY?n=z.NetworkStatus.Blocked:e.code===H.errorCodes.rpc.internal?(n=z.NetworkStatus.Unknown,L(this,d,"f")?.warn("NetworkController: lookupNetwork: rpc internal error: ",e)):(n=z.NetworkStatus.Unavailable,L(this,d,"f")?.warn("NetworkController: lookupNetwork: ",e))}else ee("NetworkController - could not determine network status",e),n=z.NetworkStatus.Unknown,L(this,d,"f")?.warn("NetworkController: lookupNetwork: ",e)}return{isInfura:t,networkStatus:n,isEIP1559Compatible:s}},w=async function(e){const{networkStatus:t,isEIP1559Compatible:n}=await L(this,r,"m",S).call(this,e);L(this,r,"m",b).call(this,e,{networkStatus:t,isEIP1559Compatible:n})},I=async function(){if(!L(this,s,"f"))return;let e=!1;const t=()=>{e=!0;try{this.messenger.unsubscribe("NetworkController:networkDidChange",t)}catch(e){if(!(e instanceof Error)||"Subscription not found for event: NetworkController:networkDidChange"!==e.message)throw e}};this.messenger.subscribe("NetworkController:networkDidChange",t);const{isInfura:n,networkStatus:o,isEIP1559Compatible:i}=await L(this,r,"m",S).call(this,this.state.selectedNetworkClientId);if(!e){try{this.messenger.unsubscribe("NetworkController:networkDidChange",t)}catch(e){if(!(e instanceof Error)||"Subscription not found for event: NetworkController:networkDidChange"!==e.message)throw e}L(this,r,"m",b).call(this,this.state.selectedNetworkClientId,{networkStatus:o,isEIP1559Compatible:i}),n?o===z.NetworkStatus.Available?this.messenger.publish("NetworkController:infuraIsUnblocked"):o===z.NetworkStatus.Blocked&&this.messenger.publish("NetworkController:infuraIsBlocked"):this.messenger.publish("NetworkController:infuraIsUnblocked")}},b=function(e,t){this.update(n=>{var r;(r=n.networksMetadata)[e]??(r[e]={status:z.NetworkStatus.Unknown,EIPS:{}});const s=n.networksMetadata[e];s.status=t.networkStatus,"isEIP1559Compatible"in t&&(t.isEIP1559Compatible===undefined?delete s.EIPS[1559]:s.EIPS[1559]=t.isEIP1559Compatible)})},T=function(e=this.state.selectedNetworkClientId){const t=this.getNetworkClientById(e),n=new U.default(t.provider);return new Promise((e,t)=>{n.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},(n,r)=>{n?t(n):e(r)})})},E=async function(e){const t=await L(this,r,"m",T).call(this,e);return t?t.baseFeePerGas!==undefined:undefined},k=function(e){const{mode:t,networkFields:n,autoManagedNetworkClientRegistry:r}=e,s="existingNetworkConfiguration"in e?e.existingNetworkConfiguration:null,o="update"===t?"Could not update network":"Could not add network";if(!(0,q.isStrictHexString)(n.chainId)||!(0,x.isSafeChainId)(n.chainId))throw new Error(`${o}: Invalid \`chainId\` '${n.chainId}' (must start with "0x" and not exceed the maximum)`);if(null===s||n.chainId!==s.chainId){const t=this.state.networkConfigurationsByChainId[n.chainId];if(t!==undefined)throw null===s?new Error(`Could not add network for chain ${e.networkFields.chainId} as another network for that chain already exists ('${t.name}')`):new Error(`Cannot move network from chain ${s.chainId} to ${n.chainId} as another network for that chain already exists ('${t.name}')`)}if(n.blockExplorerUrls.length>0?n.defaultBlockExplorerUrlIndex===undefined||n.blockExplorerUrls[n.defaultBlockExplorerUrlIndex]===undefined:n.defaultBlockExplorerUrlIndex!==undefined)throw new Error(`${o}: \`defaultBlockExplorerUrlIndex\` must refer to an entry in \`blockExplorerUrls\``);if(0===n.rpcEndpoints.length)throw new Error(`${o}: \`rpcEndpoints\` must be a non-empty array`);for(const e of n.rpcEndpoints){if(!ue(e.url))throw new Error(`${o}: An entry in \`rpcEndpoints\` has invalid URL '${e.url}'`);const i="networkClientId"in e?e.networkClientId:undefined;if(e.type===ne.Custom&&i!==undefined&&(0,x.isInfuraNetworkType)(i))throw new Error(`${o}: Custom RPC endpoint '${e.url}' has invalid network client ID '${i}'`);if("update"===t&&i!==undefined&&e.type===ne.Custom&&!Object.values(r).some(e=>i in e))throw new Error(`${o}: RPC endpoint '${e.url}' refers to network client '${i}' that does not exist`);if(n.rpcEndpoints.some(t=>t!==e&&Y.equal(t.url,e.url)))throw new Error(`${o}: Each entry in rpcEndpoints must have a unique URL`);const a=Object.values(this.state.networkConfigurationsByChainId).filter(e=>!s||e.chainId!==s.chainId);for(const n of a){if(n.rpcEndpoints.find(t=>Y.equal(e.url,t.url)))throw"update"===t?new Error(`Could not update network to point to same RPC endpoint as existing network for chain ${n.chainId} ('${n.name}')`):new Error(`Could not add network that points to same RPC endpoint as existing network for chain ${n.chainId} ('${n.name}')`)}}if([...new Set(n.rpcEndpoints)].length<n.rpcEndpoints.length)throw new Error(`${o}: Each entry in rpcEndpoints must be unique`);const i=n.rpcEndpoints.map(e=>"networkClientId"in e?e.networkClientId:undefined).filter(e=>e!==undefined);if([...new Set(i)].length<i.length)throw new Error(`${o}: Each entry in rpcEndpoints must have a unique networkClientId`);const a=n.rpcEndpoints.filter(e=>e.type===ne.Infura);if(a.length>1)throw new Error(`${o}: There cannot be more than one Infura RPC endpoint`);const l=a[0];if(l){const e=de(l.url),r=x.NetworkNickname[e],s=x.ChainId[e];if(n.chainId!==s)throw new Error("add"===t?`Could not add network with chain ID ${n.chainId} and Infura RPC endpoint for '${r}' which represents ${s}, as the two conflict`:`Could not update network with chain ID ${n.chainId} and Infura RPC endpoint for '${r}' which represents ${s}, as the two conflict`)}if(n.rpcEndpoints[n.defaultRpcEndpointIndex]===undefined)throw new Error(`${o}: \`defaultRpcEndpointIndex\` must refer to an entry in \`rpcEndpoints\``)},A=function({networkFields:e,networkClientOperations:t}){return{...e,rpcEndpoints:t.filter(e=>"add"===e.type||"noop"===e.type).map(e=>e.rpcEndpoint).concat(t.filter(e=>"replace"===e.type).map(e=>e.newRpcEndpoint))}},v=function({networkFields:e,networkClientOperations:t,autoManagedNetworkClientRegistry:n}){const r=t.filter(e=>"add"===e.type).map(e=>e.rpcEndpoint).concat(t.filter(e=>"replace"===e.type).map(e=>e.newRpcEndpoint));for(const t of r)t.type===ne.Infura?n[Z.NetworkClientType.Infura][t.networkClientId]=(0,X.createAutoManagedNetworkClient)({networkClientId:t.networkClientId,networkClientConfiguration:{type:Z.NetworkClientType.Infura,chainId:e.chainId,network:t.networkClientId,failoverRpcUrls:t.failoverUrls,infuraProjectId:L(this,o,"f"),ticker:e.nativeCurrency},getRpcServiceOptions:L(this,p,"f"),getBlockTrackerOptions:L(this,g,"f"),messenger:this.messenger,isRpcFailoverEnabled:L(this,h,"f"),logger:L(this,d,"f")}):n[Z.NetworkClientType.Custom][t.networkClientId]=(0,X.createAutoManagedNetworkClient)({networkClientId:t.networkClientId,networkClientConfiguration:{type:Z.NetworkClientType.Custom,chainId:e.chainId,failoverRpcUrls:t.failoverUrls,rpcUrl:t.url,ticker:e.nativeCurrency},getRpcServiceOptions:L(this,p,"f"),getBlockTrackerOptions:L(this,g,"f"),messenger:this.messenger,isRpcFailoverEnabled:L(this,h,"f"),logger:L(this,d,"f")})},y=function({networkClientOperations:e,autoManagedNetworkClientRegistry:t}){const n=e.filter(e=>"remove"===e.type).map(e=>e.rpcEndpoint).concat(e.filter(e=>"replace"===e.type).map(e=>e.oldRpcEndpoint));for(const e of n){const n=this.getNetworkClientById(e.networkClientId);n.destroy(),delete t[n.configuration.type][e.networkClientId]}},_=function(e){const{state:t,mode:n}=e;("remove"===n||"update"===n&&e.networkFields.chainId!==e.existingNetworkConfiguration.chainId)&&delete t.networkConfigurationsByChainId[e.existingNetworkConfiguration.chainId],"add"!==n&&"update"!==n||((0,$.default)(t.networkConfigurationsByChainId[e.networkFields.chainId],e.networkConfigurationToPersist)||(e.networkConfigurationToPersist.lastUpdatedAt=Date.now()),t.networkConfigurationsByChainId[e.networkFields.chainId]=e.networkConfigurationToPersist),B(this,m,pe((0,K.cloneDeep)(t.networkConfigurationsByChainId)),"f")},M=function(){return B(this,c,L(this,c,"f")??L(this,r,"m",N).call(this),"f")},N=function(){return re(this.state.networkConfigurationsByChainId).flatMap(e=>{const t=this.state.networkConfigurationsByChainId[e];return t.rpcEndpoints.map(e=>{if(e.type===ne.Infura){const n=de(e.url);return[e.networkClientId,(0,X.createAutoManagedNetworkClient)({networkClientId:e.networkClientId,networkClientConfiguration:{type:Z.NetworkClientType.Infura,network:n,failoverRpcUrls:e.failoverUrls,infuraProjectId:L(this,o,"f"),chainId:t.chainId,ticker:t.nativeCurrency},getRpcServiceOptions:L(this,p,"f"),getBlockTrackerOptions:L(this,g,"f"),messenger:this.messenger,isRpcFailoverEnabled:L(this,h,"f"),logger:L(this,d,"f")})]}return[e.networkClientId,(0,X.createAutoManagedNetworkClient)({networkClientId:e.networkClientId,networkClientConfiguration:{type:Z.NetworkClientType.Custom,chainId:t.chainId,failoverRpcUrls:e.failoverUrls,rpcUrl:e.url,ticker:t.nativeCurrency},getRpcServiceOptions:L(this,p,"f"),getBlockTrackerOptions:L(this,g,"f"),messenger:this.messenger,isRpcFailoverEnabled:L(this,h,"f"),logger:L(this,d,"f")})]})}).reduce((e,[t,n])=>({...e,[n.configuration.type]:{...e[n.configuration.type],[t]:n}}),{[Z.NetworkClientType.Custom]:{},[Z.NetworkClientType.Infura]:{}})},P=function(e,{updateState:t}={}){const n=L(this,r,"m",M).call(this);let o;if((0,x.isInfuraNetworkType)(e)){const t=n[Z.NetworkClientType.Infura][e];if(!t)throw new Error(`No Infura network client found with ID '${e}'`);o=t}else{const t=n[Z.NetworkClientType.Custom][e];if(!t)throw new Error(`No network client found with ID '${e}'`);o=t}B(this,u,o,"f"),this.update(n=>{var r;n.selectedNetworkClientId=e,(r=n.networksMetadata)[e]??(r[e]={status:z.NetworkStatus.Unknown,EIPS:{}}),t?.(n)}),L(this,a,"f")?L(this,a,"f").setTarget(L(this,u,"f").provider):B(this,a,(0,G.createSwappableProxy)(L(this,u,"f").provider),"f"),L(this,l,"f")?L(this,l,"f").setTarget(L(this,u,"f").blockTracker):B(this,l,(0,G.createEventEmitterProxy)(L(this,u,"f").blockTracker,{eventFilter:"skipInternal"}),"f"),B(this,s,new U.default(L(this,a,"f")),"f")}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/NetworkController.cjs"}],[1598,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.DEPRECATED_NETWORKS=n.INFURA_BLOCKED_KEY=n.NetworkStatus=void 0,function(e){e.Unknown="unknown",e.Available="available",e.Degraded="degraded",e.Unavailable="unavailable",e.Blocked="blocked"}(r||(n.NetworkStatus=r={})),n.INFURA_BLOCKED_KEY="countryBlocked",n.DEPRECATED_NETWORKS=new Set(["0xe704","0x5"])}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/constants.cjs"}],[1599,{"./create-network-client.cjs":1600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createAutoManagedNetworkClient=void 0;const r=e("./create-network-client.cjs"),s="__target__",o={__UNINITIALIZED__:!0};n.createAutoManagedNetworkClient=function({networkClientId:e,networkClientConfiguration:t,getRpcServiceOptions:n,getBlockTrackerOptions:i=()=>({}),messenger:a,isRpcFailoverEnabled:l,logger:c}){let u,d=l;const p=()=>{if(u??(u=(0,r.createNetworkClient)({id:e,configuration:t,getRpcServiceOptions:n,getBlockTrackerOptions:i,messenger:a,isRpcFailoverEnabled:d,logger:c})),u===undefined)throw new Error("It looks like `createNetworkClient` didn't return anything. Perhaps it's being mocked?");return u},g=new Proxy(o,{get(e,t,n){if(t===s)return u?.provider;const{provider:r}=p();if(t in r){const e=r[t];return"function"==typeof e?function(...t){return e.apply(this===n?r:this,t)}:e}return undefined},has(e,t){if(t===s)return!0;const{provider:n}=p();return t in n}}),m=new Proxy(o,{get(e,t,n){if(t===s)return u?.blockTracker;const{blockTracker:r}=p();if(t in r){const e=r[t];return"function"==typeof e?function(...t){return e.apply(this===n?r:this,t)}:e}return undefined},has(e,t){if(t===s)return!0;const{blockTracker:n}=p();return t in n}}),h=()=>{u?.destroy()};return{configuration:t,provider:g,blockTracker:m,destroy:h,enableRpcFailover:()=>{d=!0,h(),u=undefined},disableRpcFailover:()=>{d=!1,h(),u=undefined}}}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/create-auto-managed-network-client.cjs"}],[16,{"@metamask/accounts-controller":1344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsControllerInit=void 0;var r=e("@metamask/accounts-controller");n.AccountsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountsController({messenger:e,state:t.AccountsController})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts-controller-init.ts"}],[160,{"../../../services/subscription/types":620,"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionServiceMessenger=function(e){const t=new r.Messenger({namespace:s.SERVICE_NAME,parent:e});return e.delegate({messenger:t,actions:["SubscriptionController:getPricing","SubscriptionController:getSubscriptions","SubscriptionController:startShieldSubscriptionWithCard","SubscriptionController:updatePaymentMethod","SubscriptionController:getCryptoApproveTransactionParams","SubscriptionController:getBillingPortalUrl","SubscriptionController:submitSponsorshipIntents","SubscriptionController:getState","SubscriptionController:submitShieldSubscriptionCryptoApproval","SubscriptionController:linkRewards","SubscriptionController:clearLastSelectedPaymentMethod","AppStateController:getState","AppStateController:setPendingShieldCohort","AuthenticationController:getBearerToken","TransactionController:getTransactions","AccountsController:getState","PreferencesController:getState","SmartTransactionsController:getState","NetworkController:getState","SwapsController:getState","RemoteFeatureFlagController:getState","MetaMetricsController:trackEvent","KeyringController:getState","RewardsController:getSeasonStatus","RewardsController:getSeasonMetadata","RewardsController:getHasAccountOptedIn"]}),t};var r=e("@metamask/messenger"),s=e("../../../services/subscription/types")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-service-messenger.ts"}],[1600,{"./rpc-service/rpc-service-chain.cjs":1603,"./types.cjs":1605,"@metamask/connectivity-controller":1633,"@metamask/controller-utils":1639,"@metamask/eth-block-tracker":2050,"@metamask/eth-json-rpc-infura":2088,"@metamask/eth-json-rpc-middleware":2099,"@metamask/eth-json-rpc-provider":2116,"@metamask/json-rpc-engine":2418,"@metamask/json-rpc-engine/v2":2428},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createNetworkClient=void 0;const r=e("@metamask/connectivity-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/eth-block-tracker"),i=e("@metamask/eth-json-rpc-infura"),a=e("@metamask/eth-json-rpc-middleware"),l=e("@metamask/eth-json-rpc-provider"),c=e("@metamask/eth-json-rpc-provider"),u=e("@metamask/json-rpc-engine"),d=e("@metamask/json-rpc-engine/v2"),p=e("./rpc-service/rpc-service-chain.cjs"),g=e("./types.cjs");function m({network:e}){return(0,d.createScaffoldMiddleware)({eth_chainId:s.ChainId[e]})}n.createNetworkClient=function({id:e,configuration:t,getRpcServiceOptions:n,getBlockTrackerOptions:s,messenger:f,isRpcFailoverEnabled:C,logger:S}){const w=t.type===g.NetworkClientType.Infura?`https://${t.network}.infura.io/v3/${t.infuraProjectId}`:t.rpcUrl,I=function({id:e,primaryEndpointUrl:t,configuration:n,getRpcServiceOptions:s,messenger:o,isRpcFailoverEnabled:i,logger:a}){const l=i?[t,...n.failoverRpcUrls??[]]:[t],c=()=>o.call("ConnectivityController:getState").connectivityStatus===r.CONNECTIVITY_STATUSES.Offline,u=l.map(e=>({...s(e),endpointUrl:e,logger:a,isOffline:c})),d=e=>"error"in e?e.error:"value"in e?e.value:undefined,g=new p.RpcServiceChain([u[0],...u.slice(1)]);return g.onBreak(t=>{const r=d(t);if(r===undefined)throw new Error("Could not make request to endpoint.");o.publish("NetworkController:rpcEndpointChainUnavailable",{chainId:n.chainId,networkClientId:e,error:r})}),g.onServiceBreak(({endpointUrl:t,primaryEndpointUrl:r,...s})=>{const i=d(s);if(i===undefined)throw new Error("Could not make request to endpoint.");o.publish("NetworkController:rpcEndpointUnavailable",{chainId:n.chainId,networkClientId:e,primaryEndpointUrl:r,endpointUrl:t,error:i})}),g.onDegraded(t=>{const r=d(t);o.publish("NetworkController:rpcEndpointChainDegraded",{chainId:n.chainId,networkClientId:e,error:r})}),g.onServiceDegraded(({endpointUrl:t,primaryEndpointUrl:r,...s})=>{const i=d(s);o.publish("NetworkController:rpcEndpointDegraded",{chainId:n.chainId,networkClientId:e,primaryEndpointUrl:r,endpointUrl:t,error:i})}),g.onAvailable(()=>{o.publish("NetworkController:rpcEndpointChainAvailable",{chainId:n.chainId,networkClientId:e})}),g.onServiceRetry(({attempt:t,endpointUrl:r,primaryEndpointUrl:s})=>{o.publish("NetworkController:rpcEndpointRetried",{chainId:n.chainId,networkClientId:e,primaryEndpointUrl:s,endpointUrl:r,attempt:t})}),g}({id:e,primaryEndpointUrl:w,configuration:t,getRpcServiceOptions:n,messenger:f,isRpcFailoverEnabled:C,logger:S});let b;b=t.type===g.NetworkClientType.Infura?(0,u.asV2Middleware)((0,i.createInfuraMiddleware)({rpcService:I,options:{source:"metamask"}})):(0,a.createFetchMiddleware)({rpcService:I});const T=(0,c.providerFromMiddlewareV2)(b),E=function({networkClientType:e,endpointUrl:t,getOptions:n,provider:r}){const s={};return new o.PollingBlockTracker({...s,...n(t),provider:r})}({networkClientType:t.type,endpointUrl:w,getOptions:s,provider:T}),k=t.type===g.NetworkClientType.Infura?function({blockTracker:e,network:t,rpcProvider:n,rpcApiMiddleware:r}){return d.JsonRpcEngineV2.create({middleware:[m({network:t}),(0,a.createBlockCacheMiddleware)({blockTracker:e}),(0,a.createInflightCacheMiddleware)(),(0,a.createBlockRefMiddleware)({blockTracker:e,provider:n}),(0,a.createRetryOnEmptyMiddleware)({blockTracker:e,provider:n}),(0,a.createBlockTrackerInspectorMiddleware)({blockTracker:e}),r]}).asMiddleware()}({blockTracker:E,network:t.network,rpcProvider:T,rpcApiMiddleware:b}):function({blockTracker:e,chainId:t,rpcApiMiddleware:n}){const r=[];return d.JsonRpcEngineV2.create({middleware:[...r,h(t),(0,a.createBlockRefRewriteMiddleware)({blockTracker:e}),(0,a.createBlockCacheMiddleware)({blockTracker:e}),(0,a.createInflightCacheMiddleware)(),(0,a.createBlockTrackerInspectorMiddleware)({blockTracker:e}),n]}).asMiddleware()}({blockTracker:E,chainId:t.chainId,rpcApiMiddleware:b});return{configuration:t,provider:new l.InternalProvider({engine:d.JsonRpcEngineV2.create({middleware:[k]})}),blockTracker:E,destroy:()=>{E.destroy()}}};const h=e=>({request:t,next:n})=>"eth_chainId"===t.method?e:n()}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/create-network-client.cjs"}],[1601,{"./NetworkController.cjs":1597,"./constants.cjs":1598,"./rpc-service/rpc-service.cjs":1604,"./types.cjs":1605},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.isConnectionError=n.NetworkClientType=n.RpcEndpointType=n.NetworkController=n.knownKeysOf=n.selectAvailableNetworkClientIds=n.getDefaultNetworkControllerState=void 0;var o=e("./NetworkController.cjs");Object.defineProperty(n,"getDefaultNetworkControllerState",{enumerable:!0,get:function(){return o.getDefaultNetworkControllerState}}),Object.defineProperty(n,"selectAvailableNetworkClientIds",{enumerable:!0,get:function(){return o.selectAvailableNetworkClientIds}}),Object.defineProperty(n,"knownKeysOf",{enumerable:!0,get:function(){return o.knownKeysOf}}),Object.defineProperty(n,"NetworkController",{enumerable:!0,get:function(){return o.NetworkController}}),Object.defineProperty(n,"RpcEndpointType",{enumerable:!0,get:function(){return o.RpcEndpointType}}),s(e("./constants.cjs"),n);var i=e("./types.cjs");Object.defineProperty(n,"NetworkClientType",{enumerable:!0,get:function(){return i.NetworkClientType}});var a=e("./rpc-service/rpc-service.cjs");Object.defineProperty(n,"isConnectionError",{enumerable:!0,get:function(){return a.isConnectionError}})}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/index.cjs"}],[1602,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("network-controller")}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/logger.cjs"}],[1603,{"../logger.cjs":1602,"./rpc-service.cjs":1604,"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.RpcServiceChain=void 0;const d=e("@metamask/controller-utils"),p=e("./rpc-service.cjs"),g=e("../logger.cjs"),m=(0,g.createModuleLogger)(g.projectLogger,"RpcServiceChain"),h="available",f="degraded",C="unknown",S="unavailable";n.RpcServiceChain=class{constructor(e){r.set(this,void 0),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c(this,a,e.map(e=>new p.RpcService(e)),"f"),c(this,i,u(this,a,"f")[0],"f"),c(this,l,C,"f"),c(this,s,new d.CockatielEventEmitter,"f"),c(this,o,new d.CockatielEventEmitter,"f");for(const e of u(this,a,"f"))e.onDegraded(e=>{if(u(this,l,"f")!==f){m('Updating status to "degraded"',e),c(this,l,f,"f");const{endpointUrl:t,...n}=e;u(this,o,"f").emit(n)}});c(this,r,new d.CockatielEventEmitter,"f");for(const e of u(this,a,"f"))e.onAvailable(e=>{if(u(this,l,"f")!==h){m('Updating status to "available"',e),c(this,l,h,"f");const{endpointUrl:t,...n}=e;u(this,r,"f").emit(n)}})}onServiceRetry(e){const t=u(this,a,"f").map(t=>t.onRetry(t=>{e({...t,primaryEndpointUrl:u(this,i,"f").endpointUrl.toString()})}));return{dispose(){t.forEach(e=>e.dispose())}}}onBreak(e){return u(this,s,"f").addListener(e)}onServiceBreak(e){const t=u(this,a,"f").map(t=>t.onBreak(t=>{e({...t,primaryEndpointUrl:u(this,i,"f").endpointUrl.toString()})}));return{dispose(){t.forEach(e=>e.dispose())}}}onDegraded(e){return u(this,o,"f").addListener(e)}onServiceDegraded(e){const t=u(this,a,"f").map(t=>t.onDegraded(t=>{e({...t,primaryEndpointUrl:u(this,i,"f").endpointUrl.toString()})}));return{dispose(){t.forEach(e=>e.dispose())}}}onAvailable(e){return u(this,r,"f").addListener(e)}async request(e,t={}){let n,r;for(const[o,i]of u(this,a,"f").entries()){m(`Trying service #${o+1}...`);const p=i.getCircuitState();try{r=await i.request(e,t),m("Service successfully received request."),n=o;break}catch(e){const{lastError:t}=i,n=i.getCircuitState()===d.CircuitState.Open;if(m("Service failed! error =",e,"lastError = ",t),n){if(o<u(this,a,"f").length-1){m("This service's circuit is open. Proceeding to next service...");continue}p!==d.CircuitState.Open&&u(this,l,"f")!==S&&t!==undefined&&(m('This service\'s circuit just opened and it is the last service. Updating status to "unavailable" and triggering onBreak.'),c(this,l,S,"f"),u(this,s,"f").emit({error:t}))}throw m((n?"":"This service's circuit is closed. ")+"Re-throwing error."),e}}if(r){if(n!==undefined)for(const[e,t]of[...u(this,a,"f").entries()].slice(n+1))m(`Resetting policy for service #${e+1}.`),t.resetPolicy();return r}throw new Error("Nothing to return")}},r=new WeakMap,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/rpc-service/rpc-service-chain.cjs"}],[1604,{"../logger.cjs":1602,"@metamask/controller-utils":1639,"@metamask/rpc-errors":3026,"@metamask/utils":3554,cockatiel:4534,deepmerge:4627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.RpcService=n.isConnectionError=n.CUSTOM_RPC_ERRORS=n.CONNECTION_ERRORS=n.DEFAULT_MAX_CONSECUTIVE_FAILURES=n.DEFAULT_MAX_RETRIES=void 0;const m=e("@metamask/controller-utils"),h=e("@metamask/rpc-errors"),f=e("@metamask/utils"),C=(e("cockatiel"),g(e("deepmerge"))),S=e("../logger.cjs"),w=(0,S.createModuleLogger)(S.projectLogger,"RpcService");function I(e){if("object"!=typeof e||null===e||!("message"in e))return!1;const{message:t}=e;return"string"==typeof t&&!function(e){return e.includes("Nock:")}(t)&&n.CONNECTION_ERRORS.some(({constructorName:n,pattern:r})=>e.constructor.name===n&&r.test(t))}function b(e){return e instanceof SyntaxError||/invalid json/iu.test((0,f.getErrorMessage)(e))}n.DEFAULT_MAX_RETRIES=4,n.DEFAULT_MAX_CONSECUTIVE_FAILURES=3*(1+n.DEFAULT_MAX_RETRIES),n.CONNECTION_ERRORS=[{constructorName:"TypeError",pattern:/network error/u},{constructorName:"TypeError",pattern:/Failed to fetch/u},{constructorName:"TypeError",pattern:/NetworkError when attempting to fetch resource\./u},{constructorName:"TypeError",pattern:/The Internet connection appears to be offline\./u},{constructorName:"TypeError",pattern:/Load failed/u},{constructorName:"TypeError",pattern:/Network request failed/u},{constructorName:"FetchError",pattern:/request to (.+) failed/u},{constructorName:"TypeError",pattern:/fetch failed/u},{constructorName:"TypeError",pattern:/terminated/u}],n.CUSTOM_RPC_ERRORS={unauthorized:-32006,httpClientError:-32080},n.isConnectionError=I;n.RpcService=class{constructor(e){r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0);const{btoa:t,endpointUrl:c,fetch:u,logger:g,fetchOptions:h={},policyOptions:C={},isOffline:S}=e;d(this,s,u,"f");const w=(T=c)instanceof URL?T:new URL(T);var T;d(this,o,p(this,r,"m",l).call(this,w,h,t),"f"),this.endpointUrl=function(e){const t=new URL(e.toString());return t.username="",t.password="",t}(w),d(this,i,g,"f"),d(this,a,(0,m.createServicePolicy)({maxRetries:n.DEFAULT_MAX_RETRIES,maxConsecutiveFailures:n.DEFAULT_MAX_CONSECUTIVE_FAILURES,...C,retryFilterPolicy:(0,m.handleWhen)(e=>!S()&&(I(e)||b(e)||"httpStatus"in e&&(502===e.httpStatus||503===e.httpStatus||504===e.httpStatus)||(0,f.hasProperty)(e,"code")&&("ETIMEDOUT"===e.code||"ECONNRESET"===e.code)))}),"f")}resetPolicy(){p(this,a,"f").reset()}getCircuitState(){return p(this,a,"f").getCircuitState()}onRetry(e){return p(this,a,"f").onRetry(t=>{e({...t,endpointUrl:this.endpointUrl.toString()})})}onBreak(e){return p(this,a,"f").onBreak(t=>{"isolated"in t||e({...t,endpointUrl:this.endpointUrl.toString()})})}onDegraded(e){return p(this,a,"f").onDegraded(t=>{e({...t??{},endpointUrl:this.endpointUrl.toString()})})}onAvailable(e){return p(this,a,"f").onAvailable(()=>{e({endpointUrl:this.endpointUrl.toString()})})}async request(e,t={}){const n=p(this,r,"m",c).call(this,e,t);return await p(this,r,"m",u).call(this,n)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,l=function(e,t,n){if(e.username&&e.password){const r=n(`${e.username}:${e.password}`);return(0,C.default)(t,{headers:{Authorization:`Basic ${r}`}})}return t},c=function(e,t){const n=(0,C.default)({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}},(0,C.default)(p(this,o,"f"),t)),{id:r,jsonrpc:s,method:i,params:a}=e;return{...n,body:JSON.stringify({id:r,jsonrpc:s,method:i,params:a})}},u=async function(e){let t;try{w(`[${this.endpointUrl}] Circuit state`,p(this,a,"f").getCircuitState());const n=await p(this,a,"f").execute(async n=>{if(w("REQUEST INITIATED:",this.endpointUrl.toString(),"::",e,`(attempt ${n.attempt+1})`),t=await p(this,s,"f").call(this,this.endpointUrl,e),!t.ok)throw new m.HttpError(t.status);return w("REQUEST SUCCESSFUL:",this.endpointUrl.toString(),t.status),await t.json()});return this.lastError=undefined,n}catch(e){if(w("REQUEST ERROR:",this.endpointUrl.toString(),e),this.lastError=e instanceof Error?e:new Error((0,f.getErrorMessage)(e)),e instanceof m.HttpError){const t=e.httpStatus;if(401===t)throw new h.JsonRpcError(n.CUSTOM_RPC_ERRORS.unauthorized,"Unauthorized.",{httpStatus:t});if(429===t)throw h.rpcErrors.limitExceeded({message:"Request is being rate limited.",data:{httpStatus:t}});if(t>=500||402===t||404===t)throw h.rpcErrors.resourceUnavailable({message:"RPC endpoint not found or unavailable.",data:{httpStatus:t}});throw new h.JsonRpcError(n.CUSTOM_RPC_ERRORS.httpClientError,"RPC endpoint returned HTTP client error.",{httpStatus:t})}if(b(e))throw h.rpcErrors.parse({message:"RPC endpoint did not return JSON."});if(e instanceof m.BrokenCircuitError){p(this,i,"f")?.warn(e);const t=p(this,a,"f").getRemainingCircuitOpenDuration(),n=Intl.NumberFormat(undefined,{maximumFractionDigits:2}).format((t??p(this,a,"f").circuitBreakDuration)/f.Duration.Minute);throw h.rpcErrors.resourceUnavailable({message:`RPC endpoint returned too many errors, retrying in ${n} minutes. Consider using a different RPC endpoint.`})}throw e}}}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/rpc-service/rpc-service.cjs"}],[1605,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkClientType=void 0,function(e){e.Custom="custom",e.Infura="infura"}(r||(n.NetworkClientType=r={}))}}},{package:"@metamask/bridge-status-controller>@metamask/bridge-controller>@metamask/multichain-network-controller>@metamask/network-controller",file:"node_modules/@metamask/bridge-status-controller/node_modules/@metamask/multichain-network-controller/node_modules/@metamask/network-controller/dist/types.cjs"}],[1606,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,o=Math.floor,i="[BigNumber Error] ",a=i+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,g=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function h(e){for(var t,n,r=1,s=e.length,o=e[0]+"";r<s;){for(t=e[r++]+"",n=c-t.length;n--;t="0"+t);o+=t}for(s=o.length;48===o.charCodeAt(--s););return o.slice(0,s+1||1)}function f(e,t){var n,r,s=e.c,o=t.c,i=e.s,a=t.s,l=e.e,c=t.e;if(!i||!a)return null;if(n=s&&!s[0],r=o&&!o[0],n||r)return n?r?0:-a:i;if(i!=a)return i;if(n=i<0,r=l==c,!s||!o)return r?0:!s^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=s.length)<(c=o.length)?l:c,i=0;i<a;i++)if(s[i]!=o[i])return s[i]>o[i]^n?1:-1;return l==c?0:l>c^n?1:-1}function C(e,t,n,r){if(e<t||e>n||e!==o(e))throw Error(i+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function S(e){var t=e.c.length-1;return m(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function I(e,t,n){var r,s;if(t<0){for(s=n+".";++t;s+=n);e=s+e}else if(++t>(r=e.length)){for(s=n,t-=r;--t;s+=n);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,b,T,E,k,A,v,y,_,M,N=$.prototype={constructor:$,toString:null,valueOf:null},P=new $(1),R=20,O=4,D=-7,B=21,L=-1e7,j=1e7,F=!1,x=1,U=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function $(e,t){var n,s,i,l,d,p,g,m,h=this;if(!(h instanceof $))return new $(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>j?h.c=h.e=null:e.e<L?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>j?h.c=h.e=null:(h.e=l,h.c=[e]))}m=String(e)}else{if(!r.test(m=String(e)))return T(h,m,p);h.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(l=m.indexOf("."))>-1&&(m=m.replace(".","")),(d=m.search(/e/i))>0?(l<0&&(l=d),l+=+m.slice(d+1),m=m.substring(0,d)):l<0&&(l=m.length)}else{if(C(t,2,G.length,"Base"),10==t&&q)return Y(h=new $(e),R+h.e+1,O);if(m=String(e),p="number"==typeof e){if(0*e!=0)return T(h,m,p,t);if(h.s=1/e<0?(m=m.slice(1),-1):1,$.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else h.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(n=G.slice(0,t),l=d=0,g=m.length;d<g;d++)if(n.indexOf(s=m.charAt(d))<0){if("."==s){if(d>l){l=g;continue}}else if(!i&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){i=!0,d=-1,l=0;continue}return T(h,String(e),p,t)}p=!1,(l=(m=b(m,t,10,h.s)).indexOf("."))>-1?m=m.replace(".",""):l=m.length}for(d=0;48===m.charCodeAt(d);d++);for(g=m.length;48===m.charCodeAt(--g););if(m=m.slice(d,++g)){if(g-=d,p&&$.DEBUG&&g>15&&(e>u||e!==o(e)))throw Error(a+h.s*e);if((l=l-d-1)>j)h.c=h.e=null;else if(l<L)h.c=[h.e=0];else{if(h.e=l,h.c=[],d=(l+1)%c,l<0&&(d+=c),d<g){for(d&&h.c.push(+m.slice(0,d)),g-=c;d<g;)h.c.push(+m.slice(d,d+=c));d=c-(m=m.slice(d)).length}else d-=g;for(;d--;m+="0");h.c.push(+m)}}else h.c=[h.e=0]}function W(e,t,n,r){var s,o,i,a,l;if(null==n?n=O:C(n,0,8),!e.c)return e.toString();if(s=e.c[0],i=e.e,null==t)l=h(e.c),l=1==r||2==r&&(i<=D||i>=B)?w(l,i):I(l,i,"0");else if(o=(e=Y(new $(e),t,n)).e,a=(l=h(e.c)).length,1==r||2==r&&(t<=o||o<=D)){for(;a<t;l+="0",a++);l=w(l,o)}else if(t-=i,l=I(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&s?"-"+l:l}function K(e,t){for(var n,r,s=1,o=new $(e[0]);s<e.length;s++)(!(r=new $(e[s])).s||(n=f(o,r))===t||0===n&&o.s===t)&&(o=r);return o}function V(e,t,n){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(n=r+n*c-1)>j?e.c=e.e=null:n<L?e.c=[e.e=0]:(e.e=n,e.c=t),e}function Y(e,t,n,r){var i,a,u,p,g,m,h,f=e.c,C=d;if(f){e:{for(i=1,p=f[0];p>=10;p/=10,i++);if((a=t-i)<0)a+=c,u=t,g=f[m=0],h=o(g/C[i-u-1]%10);else if((m=s((a+1)/c))>=f.length){if(!r)break e;for(;f.length<=m;f.push(0));g=h=0,i=1,u=(a%=c)-c+1}else{for(g=p=f[m],i=1;p>=10;p/=10,i++);h=(u=(a%=c)-c+i)<0?0:o(g/C[i-u-1]%10)}if(r=r||t<0||null!=f[m+1]||(u<0?g:g%C[i-u-1]),r=n<4?(h||r)&&(0==n||n==(e.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(a>0?u>0?g/C[i-u]:0:f[m-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=C[(c-t%c)%c],e.e=-t||0):f[0]=e.e=0,e;if(0==a?(f.length=m,p=1,m--):(f.length=m+1,p=C[c-a],f[m]=u>0?o(g/C[i-u]%C[u])*p:0),r)for(;;){if(0==m){for(a=1,u=f[0];u>=10;u/=10,a++);for(u=f[0]+=p,p=1;u>=10;u/=10,p++);a!=p&&(e.e++,f[0]==l&&(f[0]=1));break}if(f[m]+=p,f[m]!=l)break;f[m--]=0,p=1}for(a=f.length;0===f[--a];f.pop());}e.e>j?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function Q(e){var t,n=e.e;return null===n?e.toString():(t=h(e.c),t=n<=D||n>=B?w(t,n):I(t,n,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(C(n=e[t],0,g,t),R=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(C(n=e[t],0,8,t),O=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(C(n[0],-g,0,t),C(n[1],0,g,t),D=n[0],B=n[1]):(C(n,-g,g,t),D=-(B=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)C(n[0],-g,-1,t),C(n[1],1,g,t),L=n[0],j=n[1];else{if(C(n,-g,g,t),!n)throw Error(i+t+" cannot be zero: "+n);L=-(j=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(i+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw F=!n,Error(i+"crypto unavailable");F=n}else F=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(C(n=e[t],0,9,t),x=n),e.hasOwnProperty(t="POW_PRECISION")&&(C(n=e[t],0,g,t),U=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(i+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(i+t+" invalid: "+n);q="0123456789"==n.slice(0,10),G=n}}return{DECIMAL_PLACES:R,ROUNDING_MODE:O,EXPONENTIAL_AT:[D,B],RANGE:[L,j],CRYPTO:F,MODULO_MODE:x,POW_PRECISION:U,FORMAT:H,ALPHABET:G}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,n,r=e.c,s=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===a||-1===a)&&s>=-g&&s<=g&&s===o(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%c)<1&&(t+=c),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=l||n!==o(n))break e;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(i+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return K(arguments,-1)},$.minimum=$.min=function(){return K(arguments,1)},$.random=(E=9007199254740992,k=Math.random()*E&2097151?function(){return o(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,a,l,u=0,p=[],m=new $(P);if(null==e?e=R:C(e,0,g),a=s(e/c),F)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[u]=n[0],t[u+1]=n[1]):(p.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw F=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(p.push(l%1e14),u+=7);u=a/7}if(!F)for(;u<a;)(l=k())<9e15&&(p[u++]=l%1e14);for(a=p[--u],e%=c,a&&e&&(l=d[c-e],p[u]=o(a/l)*l);0===p[u];p.pop(),u--);if(u<0)p=[r=0];else{for(r=-1;0===p[0];p.splice(0,1),r-=c);for(u=1,l=p[0];l>=10;l/=10,u++);u<c&&(r-=c-u)}return m.e=r,m.c=p,m}),$.sum=function(){for(var e=1,t=arguments,n=new $(t[0]);e<t.length;)n=n.plus(t[e++]);return n},b=function(){var e="0123456789";function t(e,t,n,r){for(var s,o,i=[0],a=0,l=e.length;a<l;){for(o=i.length;o--;i[o]*=t);for(i[0]+=r.indexOf(e.charAt(a++)),s=0;s<i.length;s++)i[s]>n-1&&(null==i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/n|0,i[s]%=n)}return i.reverse()}return function(r,s,o,i,a){var l,c,u,d,p,g,m,f,C=r.indexOf("."),S=R,w=O;for(C>=0&&(d=U,U=0,r=r.replace(".",""),g=(f=new $(s)).pow(r.length-C),U=d,f.c=t(I(h(g.c),g.e,"0"),10,o,e),f.e=f.c.length),u=d=(m=t(r,s,o,a?(l=G,e):(l=e,G))).length;0==m[--d];m.pop());if(!m[0])return l.charAt(0);if(C<0?--u:(g.c=m,g.e=u,g.s=i,m=(g=n(g,f,S,w,o)).c,p=g.r,u=g.e),C=m[c=u+S+1],d=o/2,p=p||c<0||null!=m[c+1],p=w<4?(null!=C||p)&&(0==w||w==(g.s<0?3:2)):C>d||C==d&&(4==w||p||6==w&&1&m[c-1]||w==(g.s<0?8:7)),c<1||!m[0])r=p?I(l.charAt(1),-S,l.charAt(0)):l.charAt(0);else{if(m.length=c,p)for(--o;++m[--c]>o;)m[c]=0,c||(++u,m=[1].concat(m));for(d=m.length;!m[--d];);for(C=0,r="";C<=d;r+=l.charAt(m[C++]));r=I(r,u,l.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,s,o,i,a=0,l=e.length,c=t%p,u=t/p|0;for(e=e.slice();l--;)a=((s=c*(o=e[l]%p)+(r=u*o+(i=e[l]/p|0)*c)%p*p+a)/n|0)+(r/p|0)+u*i,e[l]=s%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var s,o;if(n!=r)o=n>r?1:-1;else for(s=o=0;s<n;s++)if(e[s]!=t[s]){o=e[s]>t[s]?1:-1;break}return o}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,i,a,u){var d,p,g,h,f,C,S,w,I,b,T,E,k,A,v,y,_,M=r.s==s.s?1:-1,N=r.c,P=s.c;if(!(N&&N[0]&&P&&P[0]))return new $(r.s&&s.s&&(N?!P||N[0]!=P[0]:P)?N&&0==N[0]||!P?0*M:M/0:NaN);for(I=(w=new $(M)).c=[],M=i+(p=r.e-s.e)+1,u||(u=l,p=m(r.e/c)-m(s.e/c),M=M/c|0),g=0;P[g]==(N[g]||0);g++);if(P[g]>(N[g]||0)&&p--,M<0)I.push(1),h=!0;else{for(A=N.length,y=P.length,g=0,M+=2,(f=o(u/(P[0]+1)))>1&&(P=e(P,f,u),N=e(N,f,u),y=P.length,A=N.length),k=y,T=(b=N.slice(0,y)).length;T<y;b[T++]=0);_=P.slice(),_=[0].concat(_),v=P[0],P[1]>=u/2&&v++;do{if(f=0,(d=t(P,b,y,T))<0){if(E=b[0],y!=T&&(E=E*u+(b[1]||0)),(f=o(E/v))>1)for(f>=u&&(f=u-1),S=(C=e(P,f,u)).length,T=b.length;1==t(C,b,S,T);)f--,n(C,y<S?_:P,S,u),S=C.length,d=1;else 0==f&&(d=f=1),S=(C=P.slice()).length;if(S<T&&(C=[0].concat(C)),n(b,C,T,u),T=b.length,-1==d)for(;t(P,b,y,T)<1;)f++,n(b,y<T?_:P,T,u),T=b.length}else 0===d&&(f++,b=[0]);I[g++]=f,b[0]?b[T++]=N[k]||0:(b=[N[k]],T=1)}while((k++<A||null!=b[0])&&M--);h=null!=b[0],I[0]||I.splice(0,1)}if(u==l){for(g=1,M=I[0];M>=10;M/=10,g++);Y(w,i+(w.e=g+p*c-1)+1,a,h)}else w.e=p,w.r=+h;return w}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,v=/^([^.]+)\.$/,y=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var s,o=n?t:t.replace(M,"");if(_.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(A,function(e,t,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?e:t}),r&&(s=r,o=o.replace(v,"$1").replace(y,"0.$1")),t!=o))return new $(o,s);if($.DEBUG)throw Error(i+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},N.absoluteValue=N.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return f(this,new $(e,t))},N.decimalPlaces=N.dp=function(e,t){var n,r,s,o=this;if(null!=e)return C(e,0,g),null==t?t=O:C(t,0,8),Y(new $(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=((s=n.length-1)-m(this.e/c))*c,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},N.dividedBy=N.div=function(e,t){return n(this,new $(e,t),R,O)},N.dividedToIntegerBy=N.idiv=function(e,t){return n(this,new $(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var n,r,a,l,u,d,p,g,m=this;if((e=new $(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+Q(e));if(null!=t&&(t=new $(t)),u=e.e>14,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return g=new $(Math.pow(+Q(m),u?e.s*(2-S(e)):+Q(e))),t?g.mod(t):g;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(r=!d&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||u&&m.c[1]>=24e7:m.c[0]<8e13||u&&m.c[0]<=9999975e7)))return l=m.s<0&&S(e)?-0:0,m.e>-1&&(l=1/l),new $(d?1/l:l);U&&(l=s(U/c+2))}for(u?(n=new $(.5),d&&(e.s=1),p=S(e)):p=(a=Math.abs(+Q(e)))%2,g=new $(P);;){if(p){if(!(g=g.times(m)).c)break;l?g.c.length>l&&(g.c.length=l):r&&(g=g.mod(t))}if(a){if(0===(a=o(a/2)))break;p=a%2}else if(Y(e=e.times(n),e.e+1,1),e.e>14)p=S(e);else{if(0===(a=+Q(e)))break;p=a%2}m=m.times(m),l?m.c&&m.c.length>l&&(m.c.length=l):r&&(m=m.mod(t))}return r?g:(d&&(g=P.div(g)),t?g.mod(t):l?Y(g,U,O,undefined):g)},N.integerValue=function(e){var t=new $(this);return null==e?e=O:C(e,0,8),Y(t,t.e+1,e)},N.isEqualTo=N.eq=function(e,t){return 0===f(this,new $(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return f(this,new $(e,t))>0},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=f(this,new $(e,t)))||0===t},N.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return f(this,new $(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=f(this,new $(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var n,r,s,o,i=this,a=i.s;if(t=(e=new $(e,t)).s,!a||!t)return new $(NaN);if(a!=t)return e.s=-t,i.plus(e);var u=i.e/c,d=e.e/c,p=i.c,g=e.c;if(!u||!d){if(!p||!g)return p?(e.s=-t,e):new $(g?i:NaN);if(!p[0]||!g[0])return g[0]?(e.s=-t,e):new $(p[0]?i:3==O?-0:0)}if(u=m(u),d=m(d),p=p.slice(),a=u-d){for((o=a<0)?(a=-a,s=p):(d=u,s=g),s.reverse(),t=a;t--;s.push(0));s.reverse()}else for(r=(o=(a=p.length)<(t=g.length))?a:t,a=t=0;t<r;t++)if(p[t]!=g[t]){o=p[t]<g[t];break}if(o&&(s=p,p=g,g=s,e.s=-e.s),(t=(r=g.length)-(n=p.length))>0)for(;t--;p[n++]=0);for(t=l-1;r>a;){if(p[--r]<g[r]){for(n=r;n&&!p[--n];p[n]=t);--p[n],p[r]+=l}p[r]-=g[r]}for(;0==p[0];p.splice(0,1),--d);return p[0]?V(e,p,d):(e.s=3==O?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var r,s,o=this;return e=new $(e,t),!o.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||o.c&&!o.c[0]?new $(o):(9==x?(s=e.s,e.s=1,r=n(o,e,0,3),e.s=s,r.s*=s):r=n(o,e,0,x),(e=o.minus(r.times(e))).c[0]||1!=x||(e.s=o.s),e)},N.multipliedBy=N.times=function(e,t){var n,r,s,o,i,a,u,d,g,h,f,C,S,w,I,b=this,T=b.c,E=(e=new $(e,t)).c;if(!(T&&E&&T[0]&&E[0]))return!b.s||!e.s||T&&!T[0]&&!E||E&&!E[0]&&!T?e.c=e.e=e.s=null:(e.s*=b.s,T&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=m(b.e/c)+m(e.e/c),e.s*=b.s,(u=T.length)<(h=E.length)&&(S=T,T=E,E=S,s=u,u=h,h=s),s=u+h,S=[];s--;S.push(0));for(w=l,I=p,s=h;--s>=0;){for(n=0,f=E[s]%I,C=E[s]/I|0,o=s+(i=u);o>s;)n=((d=f*(d=T[--i]%I)+(a=C*d+(g=T[i]/I|0)*f)%I*I+S[o]+n)/w|0)+(a/I|0)+C*g,S[o--]=d%w;S[o]=n}return n?++r:S.splice(0,1),V(e,S,r)},N.negated=function(){var e=new $(this);return e.s=-e.s||null,e},N.plus=function(e,t){var n,r=this,s=r.s;if(t=(e=new $(e,t)).s,!s||!t)return new $(NaN);if(s!=t)return e.s=-t,r.minus(e);var o=r.e/c,i=e.e/c,a=r.c,u=e.c;if(!o||!i){if(!a||!u)return new $(s/0);if(!a[0]||!u[0])return u[0]?e:new $(a[0]?r:0*s)}if(o=m(o),i=m(i),a=a.slice(),s=o-i){for(s>0?(i=o,n=u):(s=-s,n=a),n.reverse();s--;n.push(0));n.reverse()}for((s=a.length)-(t=u.length)<0&&(n=u,u=a,a=n,t=s),s=0;t;)s=(a[--t]=a[t]+u[t]+s)/l|0,a[t]=l===a[t]?0:a[t]%l;return s&&(a=[s].concat(a),++i),V(e,a,i)},N.precision=N.sd=function(e,t){var n,r,s,o=this;if(null!=e&&e!==!!e)return C(e,1,g),null==t?t=O:C(t,0,8),Y(new $(o),e,t);if(!(n=o.c))return null;if(r=(s=n.length-1)*c+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},N.shiftedBy=function(e){return C(e,-9007199254740991,u),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,r,s,o,i=this,a=i.c,l=i.s,c=i.e,u=R+4,d=new $("0.5");if(1!==l||!a||!a[0])return new $(!l||l<0&&(!a||a[0])?NaN:a?i:1/0);if(0==(l=Math.sqrt(+Q(i)))||l==1/0?(((t=h(a)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=m((c+1)/2)-(c<0||c%2),r=new $(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new $(l+""),r.c[0])for((l=(c=r.e)+u)<3&&(l=0);;)if(o=r,r=d.times(o.plus(n(i,o,u,1))),h(o.c).slice(0,l)===(t=h(r.c)).slice(0,l)){if(r.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(r,r.e+R+2,1),e=!r.times(r).eq(i));break}if(!s&&(Y(o,o.e+R+2,0),o.times(o).eq(i))){r=o;break}u+=4,l+=4,s=1}return Y(r,r.e+R+1,O,e)},N.toExponential=function(e,t){return null!=e&&(C(e,0,g),e++),W(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(C(e,0,g),e=e+this.e+1),W(this,e,t)},N.toFormat=function(e,t,n){var r,s=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=H;else if("object"!=typeof n)throw Error(i+"Argument not an object: "+n);if(r=s.toFixed(e,t),s.c){var o,a=r.split("."),l=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",d=a[0],p=a[1],g=s.s<0,m=g?d.slice(1):d,h=m.length;if(c&&(o=l,l=c,c=o,h-=o),l>0&&h>0){for(o=h%l||l,d=m.substr(0,o);o<h;o+=l)d+=u+m.substr(o,l);c>0&&(d+=u+m.slice(o)),g&&(d="-"+d)}r=p?d+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?p.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):p):d}return(n.prefix||"")+r+(n.suffix||"")},N.toFraction=function(e){var t,r,s,o,a,l,u,p,g,m,f,C,S=this,w=S.c;if(null!=e&&(!(u=new $(e)).isInteger()&&(u.c||1!==u.s)||u.lt(P)))throw Error(i+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Q(u));if(!w)return new $(S);for(t=new $(P),g=r=new $(P),s=p=new $(P),C=h(w),a=t.e=C.length-S.e-1,t.c[0]=d[(l=a%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?a>0?t:g:u,l=j,j=1/0,u=new $(C),p.c[0]=0;m=n(u,t,0,1),1!=(o=r.plus(m.times(s))).comparedTo(e);)r=s,s=o,g=p.plus(m.times(o=g)),p=o,t=u.minus(m.times(o=t)),u=o;return o=n(e.minus(r),s,0,1),p=p.plus(o.times(g)),r=r.plus(o.times(s)),p.s=g.s=S.s,f=n(g,s,a*=2,O).minus(S).abs().comparedTo(n(p,r,a,O).minus(S).abs())<1?[g,s]:[p,r],j=l,f},N.toNumber=function(){return+Q(this)},N.toPrecision=function(e,t){return null!=e&&C(e,1,g),W(this,e,t,2)},N.toString=function(e){var t,n=this,r=n.s,s=n.e;return null===s?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=s<=D||s>=B?w(h(n.c),s):I(h(n.c),s,"0"):10===e&&q?t=I(h((n=Y(new $(n),R+s+1,O)).c),n.e,"0"):(C(e,2,G.length,"Base"),t=b(I(h(n.c),s,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){return Q(this)},N._isBigNumber=!0,null!=t&&$.set(t),$}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define(function(){return n}):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@metamask/bridge-status-controller>bignumber.js",file:"node_modules/@metamask/bridge-status-controller/node_modules/bignumber.js/bignumber.js"}],[1607,{"@metamask/utils":3554,buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.isVaultUpdated=n.updateVaultWithDetail=n.updateVault=n.generateSalt=n.serializeBufferForStorage=n.serializeBufferFromStorage=n.keyFromPassword=n.exportKey=n.importKey=n.decryptWithKey=n.decryptWithDetail=n.decrypt=n.encryptWithKey=n.encryptWithDetail=n.encrypt=void 0;const r=e("@metamask/utils"),s="jwk",o="AES-GCM",i="utf-8",a={algorithm:"PBKDF2",params:{iterations:1e4}},l={algorithm:"PBKDF2",params:{iterations:9e5}};async function c(e,t,n,r=f(),s=l){const o=n||await h(e,r,!1,s),i=await d(o,t);return i.salt=r,JSON.stringify(i)}async function u(e,t,n=f(),r=l){const s=await h(e,n,!0,r),o=await m(s);return{vault:await c(e,t,s,n),exportedKeyString:o}}async function d(e,n){const r=JSON.stringify(n),s=t.from(r,i),a=globalThis.crypto.getRandomValues(new Uint8Array(16)),l=w(e),c=await globalThis.crypto.subtle.encrypt({name:o,iv:a},l,s),u=new Uint8Array(c),d=t.from(a).toString("base64"),p={data:t.from(u).toString("base64"),iv:d};return C(e)&&(p.keyMetadata=e.derivationOptions),p}async function p(e,t,n){const r=JSON.parse(t),{salt:s,keyMetadata:o}=r,i=w(n||await h(e,s,!1,o));return await g(i,r)}async function g(e,n){const r=t.from(n.data,"base64"),s=t.from(n.iv,"base64"),a=w(e);let l;try{const e=await crypto.subtle.decrypt({name:o,iv:s},a,r),n=new Uint8Array(e),c=t.from(n).toString(i);l=JSON.parse(c)}catch(e){throw new Error("Incorrect password")}return l}async function m(e){return C(e)?JSON.stringify({key:await globalThis.crypto.subtle.exportKey(s,e.key),derivationOptions:e.derivationOptions}):JSON.stringify(await globalThis.crypto.subtle.exportKey(s,e))}async function h(e,n,r=!1,s=a){const l=t.from(e,i),c=t.from(n,"base64"),u=await globalThis.crypto.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),d=await globalThis.crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:s.params.iterations,hash:"SHA-256"},u,{name:o,length:256},r,["encrypt","decrypt"]);return s?{key:d,derivationOptions:s}:d}function f(e=32){const t=new Uint8Array(e);globalThis.crypto.getRandomValues(t);return btoa(String.fromCharCode.apply(null,t))}function C(e){return(0,r.isPlainObject)(e)&&(0,r.hasProperty)(e,"key")&&(0,r.hasProperty)(e,"derivationOptions")&&e.key instanceof CryptoKey&&S(e.derivationOptions)}function S(e){return(0,r.isPlainObject)(e)&&(0,r.hasProperty)(e,"algorithm")&&(0,r.hasProperty)(e,"params")}function w(e){return C(e)?e.key:e}function I(e,t=l){const{keyMetadata:n}=JSON.parse(e);return S(n)&&n.algorithm===t.algorithm&&n.params.iterations===t.params.iterations}n.encrypt=c,n.encryptWithDetail=u,n.encryptWithKey=d,n.decrypt=p,n.decryptWithDetail=async function(e,t){const n=JSON.parse(t),{salt:r,keyMetadata:s}=n,o=await h(e,r,!0,s);return{exportedKeyString:await m(o),vault:await p(e,t,o),salt:r}},n.decryptWithKey=g,n.importKey=async function(e){const t=JSON.parse(e);return n=t,(0,r.isPlainObject)(n)&&(0,r.hasProperty)(n,"key")&&(0,r.hasProperty)(n,"derivationOptions")&&S(n.derivationOptions)?{key:await globalThis.crypto.subtle.importKey(s,t.key,o,!0,["encrypt","decrypt"]),derivationOptions:t.derivationOptions}:await globalThis.crypto.subtle.importKey(s,t,o,!0,["encrypt","decrypt"]);var n},n.exportKey=m,n.keyFromPassword=h,n.serializeBufferFromStorage=function(e){const t="0x"===e.slice(0,2)?e.slice(2):e,n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const r=t.substr(e,2);n[e/2]=parseInt(r,16)}return n},n.serializeBufferForStorage=function(e){let t="0x";return e.forEach(e=>{t+=function(e){let t=e.toString(16);for(;t.length<2;)t=`0${t}`;return t}(e)}),t},n.generateSalt=f,n.updateVault=async function(e,t,n=l){return I(e,n)?e:c(t,await p(t,e),undefined,undefined,n)},n.updateVaultWithDetail=async function(e,t,n=l){return I(e.vault,n)?e:u(t,await p(t,e.vault),undefined,n)},n.isVaultUpdated=I}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/browser-passworder",file:"node_modules/@metamask/browser-passworder/dist/index.js"}],[161,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSwapsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SwapsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","NetworkController:getState"]}),t},n.getSwapsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SwapsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","TokenRatesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/swaps-controller-messenger.ts"}],[162,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenBalancesControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState","RemoteFeatureFlagController:getState","OnboardingController:getState"]}),t},n.getTokenBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getState","NetworkController:getNetworkClientById","PreferencesController:getState","TokensController:getState","TokenDetectionController:addDetectedTokensViaPolling","TokenDetectionController:addDetectedTokensViaWs","TokenDetectionController:detectTokens","AccountsController:getSelectedAccount","AccountsController:listAccounts","AccountTrackerController:getState","AccountTrackerController:updateNativeBalances","AccountTrackerController:updateStakedBalances","KeyringController:getState","AuthenticationController:getBearerToken"],events:["NetworkController:stateChange","PreferencesController:stateChange","TokensController:stateChange","KeyringController:accountRemoved","KeyringController:lock","KeyringController:unlock","AccountActivityService:balanceUpdated","AccountActivityService:statusChanged","AccountsController:selectedEvmAccountChange","TransactionController:transactionConfirmed","TransactionController:incomingTransactionsReceived"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-balances-controller-messenger.ts"}],[163,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenDetectionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AssetsContractController:getBalancesInSingleCall","MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getTokenDetectionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","KeyringController:getState","NetworkController:getNetworkClientById","NetworkController:getNetworkConfigurationByNetworkClientId","NetworkController:getState","TokensController:getState","TokensController:addDetectedTokens","TokenListController:getState","PreferencesController:getState","TokensController:addTokens","NetworkController:findNetworkClientIdByChainId","AuthenticationController:getBearerToken"],events:["AccountsController:selectedEvmAccountChange","KeyringController:lock","KeyringController:unlock","NetworkController:networkDidChange","TokenListController:stateChange","PreferencesController:stateChange","TransactionController:transactionConfirmed"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-detection-controller-messenger.ts"}],[164,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenListControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenListControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange"]}),t},n.getTokenListControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenListController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","StorageService:getAllKeys","StorageService:setItem","StorageService:getItem"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-list-controller-messenger.ts"}],[1644,{"./BackendWebSocketService.cjs":1645,"./logger.cjs":1647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},C=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=void 0;const S=e("./BackendWebSocketService.cjs"),w=e("./logger.cjs"),I="AccountActivityService",b=(0,w.createModuleLogger)(w.projectLogger,I),T=["subscribe","unsubscribe"];n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=["AccountsController:getSelectedAccount","BackendWebSocketService:connect","BackendWebSocketService:forceReconnection","BackendWebSocketService:subscribe","BackendWebSocketService:getConnectionInfo","BackendWebSocketService:channelHasSubscription","BackendWebSocketService:getSubscriptionsByChannel","BackendWebSocketService:findSubscriptionsByChannelPrefix","BackendWebSocketService:addChannelCallback","BackendWebSocketService:removeChannelCallback"],n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=["AccountsController:selectedAccountChange","BackendWebSocketService:connectionStateChanged"];n.AccountActivityService=class{constructor(e){r.add(this),this.name=I,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,new Set),f(this,s,e.messenger,"f"),f(this,o,{subscriptionNamespace:e.subscriptionNamespace??"account-activity.v1"},"f"),f(this,i,e.traceFn??((e,t)=>t?.()),"f"),C(this,s,"f").registerMethodActionHandlers(this,T),C(this,s,"f").subscribe("AccountsController:selectedAccountChange",async e=>await C(this,r,"m",c).call(this,e)),C(this,s,"f").subscribe("BackendWebSocketService:connectionStateChanged",e=>C(this,r,"m",d).call(this,e)),C(this,s,"f").call("BackendWebSocketService:addChannelCallback",{channelName:`system-notifications.v1.${C(this,o,"f").subscriptionNamespace}`,callback:e=>C(this,r,"m",u).call(this,e)})}async subscribe(e){try{await C(this,s,"f").call("BackendWebSocketService:connect");const t=`${C(this,o,"f").subscriptionNamespace}.${e.address}`;if(C(this,s,"f").call("BackendWebSocketService:channelHasSubscription",t))return;await C(this,s,"f").call("BackendWebSocketService:subscribe",{channels:[t],channelType:C(this,o,"f").subscriptionNamespace,callback:e=>{C(this,r,"m",l).call(this,e.data)}})}catch(e){b("Subscription failed, forcing reconnection",{error:e}),await C(this,r,"m",h).call(this)}}async unsubscribe(e){const{address:t}=e;try{const e=`${C(this,o,"f").subscriptionNamespace}.${t}`,n=C(this,s,"f").call("BackendWebSocketService:getSubscriptionsByChannel",e);if(0===n.length)return;for(const e of n)await e.unsubscribe()}catch(e){b("Unsubscription failed, forcing reconnection",{error:e}),await C(this,r,"m",h).call(this)}}destroy(){C(this,s,"f").call("BackendWebSocketService:removeChannelCallback",`system-notifications.v1.${C(this,o,"f").subscriptionNamespace}`)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,l=function(e){const{address:t,tx:n,updates:r}=e,a=1e3*n.timestamp,l=Date.now()-a;b("Handling account activity update",{address:t,updateCount:r.length,elapsedMs:l}),C(this,i,"f").call(this,{name:`${I} Transaction Message`,data:{chain:n.chain,status:n.status,elapsed_ms:l},tags:{service:I,notification_type:C(this,o,"f").subscriptionNamespace}},()=>{C(this,s,"f").publish("AccountActivityService:transactionUpdated",n),C(this,s,"f").publish("AccountActivityService:balanceUpdated",{address:t,chain:n.chain,updates:r})})},c=async function(e){if(e?.address)try{const t=C(this,r,"m",m).call(this,e);await C(this,r,"m",g).call(this),await this.subscribe({address:t})}catch(e){b("Account change failed",{error:e})}},u=function(e){const t=e.data,{timestamp:n}=e;if(!t.chainIds||!Array.isArray(t.chainIds)||!t.status)throw new Error("Invalid system notification data: missing chainIds or status");if("up"===t.status)for(const e of t.chainIds)C(this,a,"f").add(e);else for(const e of t.chainIds)C(this,a,"f").delete(e);C(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:t.chainIds,status:t.status,timestamp:n}),b(`WebSocket status change - Published tracked chains as ${t.status}`,{count:t.chainIds.length,chains:t.chainIds,status:t.status})},d=async function(e){const{state:t}=e;if(t===S.WebSocketState.CONNECTED)await C(this,r,"m",p).call(this);else if(t===S.WebSocketState.DISCONNECTED){const e=Array.from(C(this,a,"f"));e.length>0&&(C(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:e,status:"down",timestamp:Date.now()}),b("WebSocket disconnection - Published tracked chains as down",{count:e.length,chains:e}),C(this,a,"f").clear())}},p=async function(){const e=C(this,s,"f").call("AccountsController:getSelectedAccount");if(!e||!e.address)return;const t=C(this,r,"m",m).call(this,e);await this.subscribe({address:t})},g=async function(){const e=C(this,s,"f").call("BackendWebSocketService:findSubscriptionsByChannelPrefix",C(this,o,"f").subscriptionNamespace);for(const t of e)await t.unsubscribe()},m=function(e){return e.scopes.some(e=>e.startsWith("eip155:"))?`eip155:0:${e.address}`:e.scopes.some(e=>e.startsWith("solana:"))?`solana:0:${e.address}`:e.address},h=async function(){b("Forcing WebSocket reconnection to clean up subscription state"),await C(this,s,"f").call("BackendWebSocketService:forceReconnection")}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/AccountActivityService.cjs"}],[1645,{"./logger.cjs":1647,"@metamask/controller-utils":1639,"@metamask/utils":3554,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f,C,S,w,I,b,T,E,k,A,v,y,_,M,N,P,R,O,D,B,L,j,F=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},x=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BackendWebSocketService=n.WebSocketEventType=n.WebSocketState=n.getCloseReason=void 0;const U=e("@metamask/controller-utils"),H=e("@metamask/utils"),G=e("uuid"),q=e("./logger.cjs"),$="BackendWebSocketService",W=(0,q.createModuleLogger)(q.projectLogger,$),K="Internal: Manual disconnect",V=["connect","disconnect","forceReconnection","sendMessage","sendRequest","subscribe","getConnectionInfo","getSubscriptionsByChannel","channelHasSubscription","findSubscriptionsByChannelPrefix","addChannelCallback","removeChannelCallback","getChannelCallbacks"];function Y(e){switch(e){case 1e3:return"Normal Closure";case 1001:return"Going Away";case 1002:return"Protocol Error";case 1003:return"Unsupported Data";case 1004:return"Reserved";case 1005:return"No Status Received";case 1006:return"Abnormal Closure";case 1007:return"Invalid frame payload data";case 1008:return"Policy Violation";case 1009:return"Message Too Big";case 1010:return"Mandatory Extension";case 1011:return"Internal Server Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1014:return"Bad Gateway";case 1015:return"TLS Handshake";default:return e>=3e3&&e<=3999?"Library/Framework Error":e>=4e3&&e<=4999?"Application Error":"Unknown"}}var Q,z;n.getCloseReason=Y,function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.ERROR="error"}(Q||(n.WebSocketState=Q={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected"}(z||(n.WebSocketEventType=z={}));n.BackendWebSocketService=class{constructor(e){r.add(this),this.name=$,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),l.set(this,void 0),c.set(this,Q.DISCONNECTED),u.set(this,0),d.set(this,null),p.set(this,null),g.set(this,null),m.set(this,null),h.set(this,new Map),f.set(this,0),C.set(this,new Map),S.set(this,new Map),w.set(this,void 0),F(this,s,e.messenger,"f"),F(this,i,e.isEnabled,"f"),F(this,a,e.traceFn??((e,t)=>t?.()),"f"),F(this,o,{url:e.url,timeout:e.timeout??1e4,reconnectDelay:e.reconnectDelay??1e4,maxReconnectDelay:e.maxReconnectDelay??6e4,requestTimeout:e.requestTimeout??3e4},"f"),x(this,r,"m",O).call(this),x(this,r,"m",I).call(this),x(this,s,"f").registerMethodActionHandlers(this,V)}async connect(){if(x(this,i,"f")&&!x(this,i,"f").call(this))return x(this,r,"m",D).call(this),void F(this,u,0,"f");if(x(this,c,"f")!==Q.CONNECTED)if(x(this,m,"f"))await x(this,m,"f");else if(!x(this,d,"f")){F(this,m,(async()=>{let e;try{const t=await x(this,s,"f").call("AuthenticationController:getBearerToken");if(!t)throw new Error("Authentication required: user not signed in");e=t}catch(e){throw W("Failed to check authentication requirements",{error:e}),e}await x(this,r,"m",T).call(this,e)})(),"f");try{await x(this,m,"f")}catch{x(this,r,"m",R).call(this)}finally{F(this,m,null,"f")}}}disconnect(){x(this,c,"f")!==Q.DISCONNECTED&&x(this,l,"f")&&(x(this,l,"f").close(4999,K),W("WebSocket manually disconnected"))}async forceReconnection(){if(x(this,c,"f")===Q.DISCONNECTED||!x(this,l,"f"))return W("WebSocket already disconnected, scheduling reconnect"),void x(this,r,"m",R).call(this);W("Forcing WebSocket reconnection to clean up subscription state"),x(this,l,"f").close(4998,"Internal: Force reconnect")}sendMessage(e){if(x(this,c,"f")!==Q.CONNECTED||!x(this,l,"f"))throw new Error(`Cannot send message: WebSocket is ${x(this,c,"f")}`);try{x(this,l,"f").send(JSON.stringify(e))}catch(e){const t=(0,H.getErrorMessage)(e);throw x(this,r,"m",P).call(this,new Error(t)),new Error(t)}}async sendRequest(e){if(x(this,c,"f")!==Q.CONNECTED)throw new Error(`Cannot send request: WebSocket is ${x(this,c,"f")}`);const t=e.data?.requestId??(0,G.v4)(),n={event:e.event,data:{...e.data,requestId:t}};return new Promise((e,r)=>{const s=setTimeout(()=>{x(this,h,"f").delete(t),W("Request timeout - triggering reconnection",{timeout:x(this,o,"f").requestTimeout}),x(this,c,"f")===Q.CONNECTED&&x(this,l,"f")&&x(this,l,"f").close(3e3,"Request timeout - forcing reconnect"),r(new Error(`Request timeout after ${x(this,o,"f").requestTimeout}ms`))},x(this,o,"f").requestTimeout);x(this,h,"f").set(t,{resolve:e,reject:r,timeout:s});try{this.sendMessage(n)}catch(e){x(this,h,"f").delete(t),clearTimeout(s),r(e instanceof Error?e:new Error(String(e)))}})}getConnectionInfo(){return{state:x(this,c,"f"),url:x(this,o,"f").url,timeout:x(this,o,"f").timeout,reconnectDelay:x(this,o,"f").reconnectDelay,maxReconnectDelay:x(this,o,"f").maxReconnectDelay,requestTimeout:x(this,o,"f").requestTimeout,reconnectAttempts:x(this,u,"f"),connectedAt:x(this,f,"f")}}getSubscriptionsByChannel(e){const t=[];for(const[n,r]of x(this,C,"f"))r.channels.includes(e)&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe});return t}channelHasSubscription(e){for(const t of x(this,C,"f").values())if(t.channels.includes(e))return!0;return!1}findSubscriptionsByChannelPrefix(e){const t=[];for(const[n,r]of x(this,C,"f")){r.channels.some(t=>t.startsWith(e))&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe})}return t}addChannelCallback(e){const t={channelName:e.channelName,callback:e.callback};x(this,S,"f").has(e.channelName)||x(this,S,"f").set(e.channelName,t)}removeChannelCallback(e){return x(this,S,"f").delete(e)}getChannelCallbacks(){return Array.from(x(this,S,"f").values())}destroy(){x(this,r,"m",D).call(this),F(this,u,0,"f"),this.disconnect()}async subscribe(e){const{channels:t,channelType:n,callback:r,requestId:s}=e;if(x(this,c,"f")!==Q.CONNECTED)throw new Error(`Cannot create subscription(s) ${t.join(", ")}: WebSocket is ${x(this,c,"f")}`);const o=await this.sendRequest({event:"subscribe",data:{channels:t,requestId:s}});if(!o?.subscriptionId)throw new Error("Invalid subscription response: missing subscription ID");const{subscriptionId:i}=o,a=async e=>{await this.sendRequest({event:"unsubscribe",data:{subscription:i,channels:t,requestId:e}}),x(this,C,"f").delete(i)},l={subscriptionId:i,channels:[...t],channelType:n,unsubscribe:a};return x(this,C,"f").set(i,{subscriptionId:i,channels:[...t],channelType:n,callback:r,unsubscribe:a}),l}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,C=new WeakMap,S=new WeakMap,w=new WeakMap,r=new WeakSet,I=function(){x(this,s,"f").subscribe("AuthenticationController:stateChange",e=>{e.isSignedIn?this.connect():this.disconnect()},e=>({isSignedIn:e.isSignedIn})),x(this,s,"f").subscribe("KeyringController:unlock",()=>{this.connect()}),x(this,s,"f").subscribe("KeyringController:lock",()=>{this.disconnect()})},b=function(e){const t=x(this,o,"f").url,n=new URL(t);return n.searchParams.set("token",e),n.toString()},T=async function(e){const t=x(this,r,"m",b).call(this,e);return x(this,r,"m",j).call(this,Q.CONNECTING),x(this,a,"f").call(this,{name:`${$} Connection`,data:{reconnectAttempt:x(this,u,"f")},tags:{service:$}},()=>new Promise((e,n)=>{const s=new WebSocket(t);F(this,p,setTimeout(()=>{W("WebSocket connection timeout - forcing close",{timeout:x(this,o,"f").timeout}),s.close()},x(this,o,"f").timeout),"f"),s.onopen=()=>{x(this,p,"f")&&(clearTimeout(x(this,p,"f")),F(this,p,null,"f")),F(this,l,s,"f"),x(this,r,"m",j).call(this,Q.CONNECTED),F(this,f,Date.now(),"f"),F(this,g,setTimeout(()=>{F(this,g,null,"f"),F(this,u,0,"f"),x(this,r,"m",O).call(this),W("Connection stable - reset reconnect attempts and backoff")},1e4),"f"),e()},s.onclose=t=>{if(W("WebSocket onclose event triggered",{code:t.code,reason:t.reason||Y(t.code),wasClean:t.wasClean}),x(this,c,"f")===Q.DISCONNECTED)return;const s=4999===t.code&&t.reason===K;x(this,c,"f")===Q.CONNECTING&&(s?e():n(new Error(`WebSocket connection closed during connection: ${t.code} ${t.reason}`)));const o=x(this,f,"f")>0?Date.now()-x(this,f,"f"):0;x(this,r,"m",D).call(this),F(this,l,undefined,"f"),F(this,m,null,"f"),F(this,f,0,"f"),x(this,r,"m",B).call(this,new Error(`WebSocket connection closed: ${t.code} ${t.reason||Y(t.code)}`)),x(this,r,"m",L).call(this),x(this,r,"m",j).call(this,Q.DISCONNECTED),s?F(this,u,0,"f"):x(this,r,"m",R).call(this),x(this,a,"f").call(this,{name:`${$} Disconnection`,data:{code:t.code,reason:t.reason||Y(t.code),wasClean:t.wasClean,reconnectAttempts:x(this,u,"f"),...o>0&&{connectionDuration_ms:o}},tags:{service:$}})},s.onmessage=e=>{try{const t=x(this,r,"m",N).call(this,e.data);x(this,r,"m",E).call(this,t)}catch{}}}))},E=function(e){if(x(this,r,"m",k).call(this,e))x(this,r,"m",y).call(this,e);else{if(x(this,r,"m",A).call(this,e)){const t=e;if(x(this,r,"m",M).call(this,t))return}if(x(this,r,"m",v).call(this,e)){const t=e;x(this,r,"m",_).call(this,t)}}},k=function(e){return"data"in e&&e.data&&"object"==typeof e.data&&"requestId"in e.data},A=function(e){return"subscriptionId"in e&&!x(this,r,"m",k).call(this,e)},v=function(e){return"channel"in e},y=function(e){const{requestId:t}=e.data,n=x(this,h,"f").get(t);n&&(x(this,h,"f").delete(t),clearTimeout(n.timeout),e.data.failed&&e.data.failed.length>0?n.reject(new Error(`Request failed: ${e.data.failed.join(", ")}`)):n.resolve(e.data))},_=function(e){0!==x(this,S,"f").size&&x(this,S,"f").get(e.channel)?.callback(e)},M=function(e){const{subscriptionId:t,timestamp:n,channel:r}=e;if(null!==t&&t!==undefined){const s=x(this,C,"f").get(t);if(!s)return!1;const o=Date.now()-n;return x(this,a,"f").call(this,{name:`${$} Notification`,data:{channel:r,latency_ms:o,subscriptionId:t},tags:{service:$,notification_type:s.channelType}},()=>{s.callback?.(e)}),!0}return!1},N=function(e){return JSON.parse(e)},P=function(e){},R=function(){if(x(this,d,"f"))return;F(this,u,x(this,u,"f")+1,"f");const e=x(this,w,"f").duration;F(this,w,x(this,w,"f").next({attempt:x(this,u,"f")}),"f"),W("Scheduling reconnect",{attempt:x(this,u,"f"),delay_ms:e}),F(this,d,setTimeout(()=>{if(F(this,d,null,"f"),x(this,i,"f")&&!x(this,i,"f").call(this))return F(this,u,0,"f"),void x(this,r,"m",O).call(this);this.connect()},e),"f")},O=function(){F(this,w,new U.ExponentialBackoff({initialDelay:x(this,o,"f").reconnectDelay,maxDelay:x(this,o,"f").maxReconnectDelay}).next(),"f")},D=function(){x(this,d,"f")&&(clearTimeout(x(this,d,"f")),F(this,d,null,"f")),x(this,p,"f")&&(clearTimeout(x(this,p,"f")),F(this,p,null,"f")),x(this,g,"f")&&(clearTimeout(x(this,g,"f")),F(this,g,null,"f"))},B=function(e){for(const[,t]of x(this,h,"f"))clearTimeout(t.timeout),t.reject(e);x(this,h,"f").clear()},L=function(){x(this,C,"f").clear()},j=function(e){const t=x(this,c,"f");F(this,c,e,"f"),t!==e&&x(this,s,"f").publish("BackendWebSocketService:connectionStateChanged",this.getConnectionInfo())}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/BackendWebSocketService.cjs"}],[1646,{"./AccountActivityService.cjs":1644,"./BackendWebSocketService.cjs":1645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.BackendWebSocketService=void 0;var r=e("./BackendWebSocketService.cjs");Object.defineProperty(n,"BackendWebSocketService",{enumerable:!0,get:function(){return r.BackendWebSocketService}});var s=e("./AccountActivityService.cjs");Object.defineProperty(n,"AccountActivityService",{enumerable:!0,get:function(){return s.AccountActivityService}})}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/index.cjs"}],[1647,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("core-backend")}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/logger.cjs"}],[1648,{"./constants.cjs":1649,"./utils.cjs":1651,"@metamask/base-controller":1520,"@metamask/keyring-controller":2537,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=n.controllerName=void 0;const a=e("@metamask/base-controller"),l=e("@metamask/keyring-controller"),c=e("@metamask/utils"),u=e("./constants.cjs"),d=e("./utils.cjs");n.controllerName="DelegationController";const p={delegations:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}};class g extends a.BaseController{constructor({messenger:e,state:t,hashDelegation:i,getDelegationEnvironment:a}){super({messenger:e,metadata:p,name:n.controllerName,state:{delegations:{},...t}}),r.set(this,void 0),s.set(this,void 0),o(this,r,i,"f"),o(this,s,a,"f")}async signDelegation(e){const{delegation:t,chainId:n}=e,{DelegationManager:r}=i(this,s,"f").call(this,n),o=(0,d.createTypedMessageParams)({chainId:(0,c.hexToNumber)(n),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:r});return await this.messenger.call("KeyringController:signTypedMessage",o,l.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,n=i(this,r,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,u.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update(e=>{e.delegations[n]=t})}list(e){const t=this.messenger.call("AccountsController:getSelectedAccount").address;let n=Object.values(this.state.delegations);e?.from&&(n=n.filter(t=>(0,d.isHexEqual)(t.delegation.delegator,e.from))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(n=n.filter(e=>(0,d.isHexEqual)(e.delegation.delegate,t)));const r=e?.chainId;r&&(n=n.filter(e=>(0,d.isHexEqual)(e.chainId,r)));const s=e?.tags;return s&&s.length>0&&(n=n.filter(e=>s.every(t=>e.tags.includes(t)))),n}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],n=this.retrieve(e);if(!n)return null;t.push(n);for(let e=n.delegation.authority;e!==u.ROOT_AUTHORITY;){const n=this.retrieve(e);if(!n)throw new Error("Invalid delegation chain");t.push(n),e=n.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),n=[e],r=[];for(;n.length>0;){const e=n.pop();t.filter(([t,n])=>n.delegation.authority===e).forEach(([e])=>{n.push(e)}),r.push(e)}return this.update(e=>{r.forEach(t=>{delete e.delegations[t]})}),r.length}}n.DelegationController=g,r=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1649,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SIGNABLE_DELEGATION_TYPED_DATA=n.ROOT_AUTHORITY=void 0,n.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";n.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[165,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokensControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokensControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getTokensControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokensController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","AccountsController:listAccounts","ApprovalController:addRequest","NetworkController:getNetworkClientById"],events:["AccountsController:selectedEvmAccountChange","KeyringController:accountRemoved","NetworkController:networkDidChange","NetworkController:stateChange","PreferencesController:stateChange","TokenListController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/tokens-controller-messenger.ts"}],[1650,{"./DelegationController.cjs":1648},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=void 0;var r=e("./DelegationController.cjs");Object.defineProperty(n,"DelegationController",{enumerable:!0,get:function(){return r.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[1651,{"./constants.cjs":1649,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createTypedMessageParams=n.toDelegationStruct=n.isHexEqual=void 0;const r=e("@metamask/utils"),s=e("./constants.cjs");n.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};n.toDelegationStruct=e=>{const t=e.caveats.map(e=>({enforcer:(0,r.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args})),n="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,r.getChecksumAddress)(e.delegate),delegator:(0,r.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:n,signature:e.signature}},n.createTypedMessageParams=function(e){const{chainId:t,from:r,delegation:o,verifyingContract:i}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:i},message:(0,n.toDelegationStruct)(o)},from:r}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[1653,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},s={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},o={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},i={arbitrum:42161,arbitrumNova:42170,base:8453,berachain:80094,bsc:56,gnosis:100,ink:57073,linea:59144,mainnet:1,monad:143,optimism:10,polygon:137,sei:1329,sonic:146,unichain:130,bscTestnet:97,arbitrumSepolia:421614,baseSepolia:84532,berachainBepolia:80069,chiado:10200,citreaTestnet:5115,hoodiTestnet:560048,inkSepolia:763373,lineaSepolia:59141,megaEthTestnet:6342,monadTestnet:10143,optimismSepolia:11155420,polygonAmoy:80002,seiTestnet:1328,sepolia:11155111,sonicTestnet:14601,unichainSepolia:1301,lineaGoerli:59140},a={"1.0.0":{[i.optimism]:o,[i.polygon]:o,[i.base]:o,[i.arbitrum]:o,[i.linea]:o,[i.sepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[i.lineaSepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[i.arbitrum]:s,[i.base]:s,[i.linea]:s,[i.optimism]:s,[i.polygon]:s,[i.sepolia]:s,[i.lineaSepolia]:s,[i.baseSepolia]:{...s,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[i.mainnet]:r,[i.polygon]:r,[i.bsc]:r,[i.optimism]:r,[i.arbitrum]:r,[i.ink]:r,[i.linea]:r,[i.base]:r,[i.gnosis]:r,[i.berachain]:r,[i.unichain]:r,[i.arbitrumNova]:r,[i.sei]:r,[i.sonic]:r,[i.monad]:r,[i.bscTestnet]:r,[i.citreaTestnet]:r,[i.megaEthTestnet]:r,[i.chiado]:r,[i.lineaSepolia]:r,[i.berachainBepolia]:r,[i.baseSepolia]:r,[i.arbitrumSepolia]:r,[i.sepolia]:r,[i.optimismSepolia]:r,[i.unichainSepolia]:r,[i.polygonAmoy]:r,[i.inkSepolia]:r,[i.monadTestnet]:r,[i.seiTestnet]:r,[i.sonicTestnet]:r,[i.hoodiTestnet]:r}};n.CHAIN_ID=i,n.DELEGATOR_CONTRACTS=a}}},{package:"@metamask/delegation-deployments",file:"node_modules/@metamask/delegation-deployments/dist/index.cjs"}],[166,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TransactionControllerInit",parent:e});return e.delegate({messenger:t,events:["BridgeStatusController:stateChange","SmartTransactionsController:smartTransaction","TransactionController:postTransactionBalanceUpdated","TransactionController:stateChange","TransactionController:transactionApproved","TransactionController:transactionConfirmed","TransactionController:transactionDropped","TransactionController:transactionFailed","TransactionController:transactionNewSwapApproval","TransactionController:transactionNewSwap","TransactionController:transactionRejected","TransactionController:transactionSubmitted","TransactionController:unapprovedTransactionAdded"],actions:["AccountTrackerController:getState","ApprovalController:acceptRequest","ApprovalController:addRequest","ApprovalController:endFlow","ApprovalController:startFlow","ApprovalController:updateRequestState","AppStateController:getState","AuthenticationController:getBearerToken","BridgeStatusController:getState","BridgeStatusController:submitTx","CurrencyRateController:getState","DelegationController:signDelegation","InstitutionalSnapController:beforeCheckPendingTransactionHook","InstitutionalSnapController:publishHook","KeyringController:signEip7702Authorization","KeyringController:signTypedMessage","NetworkController:findNetworkClientIdByChainId","NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","SubscriptionController:getSubscriptionByProduct","SubscriptionService:submitSubscriptionSponsorshipIntent","SwapsController:setApproveTxId","SwapsController:setTradeTxId","TransactionController:addTransaction","TransactionController:addTransactionBatch","TransactionController:estimateGas","TransactionController:getState","TransactionController:updateTransaction","TransactionPayController:getState","TransactionPayController:getStrategy"]}),t},n.getTransactionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TransactionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","AccountsController:getState","ApprovalController:addRequest","KeyringController:signEip7702Authorization","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-controller-messenger.ts"}],[167,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionPayControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TransactionPayControllerInit",parent:e});return e.delegate({messenger:t,actions:["DelegationController:signDelegation","KeyringController:signEip7702Authorization"],events:[]}),t},n.getTransactionPayControllerMessenger=function(e){const t=new r.Messenger({namespace:"TransactionPayController",parent:e});return e.delegate({messenger:t,actions:["AccountTrackerController:getState","BridgeController:fetchQuotes","BridgeStatusController:submitTx","CurrencyRateController:getState","GasFeeController:getState","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState","TokenBalancesController:getState","TokenListController:getState","TokenRatesController:getState","TokensController:getState","TransactionController:getGasFeeTokens","TransactionController:getState","TransactionController:updateTransaction"],events:["BridgeStatusController:stateChange","TransactionController:stateChange","TransactionController:unapprovedTransactionAdded"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-pay-controller-messenger.ts"}],[168,{"@metamask/messenger":2592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserOperationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationControllerInit",parent:e});return e.delegate({messenger:t,actions:["TransactionController:emulateNewTransaction","TransactionController:emulateTransactionUpdate"]}),t},n.getUserOperationControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","NetworkController:getNetworkClientById","KeyringController:prepareUserOperation","KeyringController:patchUserOperation","KeyringController:signUserOperation"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/user-operation-controller-messenger.ts"}],[169,{"../../../shared/lib/sentry":6292,"../controllers/metametrics-controller":233,"../lib/segment":337},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsControllerInit=void 0;var r,s=(r=e("../controllers/metametrics-controller"))&&r.__esModule?r:{default:r},o=e("../lib/segment"),i=e("../../../shared/lib/sentry");n.MetaMetricsControllerInit=({controllerMessenger:e,extension:t,persistedState:n})=>({controller:new s.default({state:n.MetaMetricsController,messenger:e,version:"13.18.1",environment:"production",segment:o.segment,extension:t,captureException:i.captureException})})}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-controller-init.ts"}],[17,{"../../../../shared/constants/metametrics":6190,"../../../../shared/lib/trace":6299,"@metamask/account-tree-controller":1288},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTreeControllerInit=void 0;var r=e("@metamask/account-tree-controller"),s=e("../../../../shared/lib/trace"),o=e("../../../../shared/constants/metametrics");n.AccountTreeControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n})=>({controller:new r.AccountTreeController({messenger:e,state:t.AccountTreeController,config:{trace:s.trace,backupAndSync:{onBackupAndSyncEvent:e=>{n.call("MetaMetricsController:trackEvent",{category:o.MetaMetricsEventCategory.BackupAndSync,event:o.MetaMetricsEventName.ProfileActivityUpdated,properties:{...e}})}},accountOrderCallbacks:{isHiddenAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").hiddenAccountList.includes(t.address)},isPinnedAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").pinnedAccountList.includes(t.address)}}}})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/account-tree-controller-init.ts"}],[170,{"../controllers/metametrics-data-deletion/metametrics-data-deletion":234,"../services/data-deletion-service":609},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionControllerInit=void 0;var r=e("../controllers/metametrics-data-deletion/metametrics-data-deletion"),s=e("../services/data-deletion-service");n.MetaMetricsDataDeletionControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=new s.DataDeletionService;return{controller:new r.MetaMetricsDataDeletionController({messenger:e,state:t.MetaMetricsDataDeletionController,dataDeletionService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-data-deletion-controller-init.ts"}],[171,{"./multichain-account-service-init":172,"./multichain-assets-controller-init":173,"./multichain-balances-controller-init":174,"./multichain-network-controller-init":175,"./multichain-rates-assets-controller-init":177,"./multichain-transactions-controller-init":178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountServiceInit",{enumerable:!0,get:function(){return r.MultichainAccountServiceInit}}),Object.defineProperty(n,"MultichainAssetsControllerInit",{enumerable:!0,get:function(){return s.MultichainAssetsControllerInit}}),Object.defineProperty(n,"MultichainAssetsRatesControllerInit",{enumerable:!0,get:function(){return l.MultichainAssetsRatesControllerInit}}),Object.defineProperty(n,"MultichainBalancesControllerInit",{enumerable:!0,get:function(){return o.MultichainBalancesControllerInit}}),Object.defineProperty(n,"MultichainNetworkControllerInit",{enumerable:!0,get:function(){return a.MultichainNetworkControllerInit}}),Object.defineProperty(n,"MultichainTransactionsControllerInit",{enumerable:!0,get:function(){return i.MultichainTransactionsControllerInit}});var r=e("./multichain-account-service-init"),s=e("./multichain-assets-controller-init"),o=e("./multichain-balances-controller-init"),i=e("./multichain-transactions-controller-init"),a=e("./multichain-network-controller-init"),l=e("./multichain-rates-assets-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/multichain/index.ts"}],[172,{"../../../../shared/lib/multichain-accounts/remote-feature-flag":6282,"../../../../shared/lib/multichain-feature-flags":6283,"../../../../shared/lib/trace":6299,"../../lib/util":380,"@metamask/multichain-account-service":2604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountServiceInit=void 0;var r=e("@metamask/multichain-account-service"),s=e("../../lib/util"),o=e("../../../../shared/lib/multichain-accounts/remote-feature-flag"),i=e("../../../../shared/lib/multichain-feature-flags"),a=e("../../../../shared/lib/trace");n.MultichainAccountServiceInit=({controllerMessenger:e,initMessenger:t})=>{var n,l;const c={maxConcurrency:1,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},u=new r.AccountProviderWrapper(e,new r.BtcAccountProvider(e,c)),d=new r.AccountProviderWrapper(e,new r.TrxAccountProvider(e,c)),p=new r.MultichainAccountService({messenger:e,providers:[u,d],providerConfigs:{[r.SOL_ACCOUNT_PROVIDER_NAME]:c},config:{trace:a.trace}}),g=t.call("PreferencesController:getState");t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,n)=>{const{useExternalServices:r}=e,{useExternalServices:s}=n;if(r!==s){const{remoteFeatureFlags:e}=t.call("RemoteFeatureFlagController:getState"),n=null==e?void 0:e.enableMultichainAccountsState2;(0,o.isMultichainAccountsFeatureEnabled)(n,o.FEATURE_VERSION_2)&&p.setBasicFunctionality(s).catch(e=>{console.error("Failed to set basic functionality on MultichainAccountService:",e)})}return!0},g));const m=t.call("RemoteFeatureFlagController:getState"),h=(0,i.isMultichainFeatureEnabled)(null==m||null===(n=m.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts);u.setEnabled(h);const f=(0,i.isMultichainFeatureEnabled)(null==m||null===(l=m.remoteFeatureFlags)||void 0===l?void 0:l.tronAccounts);return d.setEnabled(f),e.subscribe("RemoteFeatureFlagController:stateChange",(0,s.previousValueComparator)((e,t)=>{var n,r,s,o;const a=(0,i.isMultichainFeatureEnabled)(null==e||null===(n=e.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts),l=(0,i.isMultichainFeatureEnabled)(null==t||null===(r=t.remoteFeatureFlags)||void 0===r?void 0:r.bitcoinAccounts);a!==l&&(u.setEnabled(l),l&&p.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Bitcoin provider:",e)}));const c=(0,i.isMultichainFeatureEnabled)(null==e||null===(s=e.remoteFeatureFlags)||void 0===s?void 0:s.tronAccounts),g=(0,i.isMultichainFeatureEnabled)(null==t||null===(o=t.remoteFeatureFlags)||void 0===o?void 0:o.tronAccounts);return c!==g&&(d.setEnabled(g),g&&p.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Tron provider:",e)})),!0},m)),{memStateKey:null,persistedStateKey:null,controller:p}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-account-service-init.ts"}],[173,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsController({messenger:e,state:t.MultichainAssetsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-assets-controller-init.ts"}],[174,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainBalancesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainBalancesController({messenger:e,state:t.MultichainBalancesController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-balances-controller-init.ts"}],[175,{"./multichain-network-service-init":176,"@metamask/multichain-network-controller":2682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkControllerInit=void 0;var r=e("@metamask/multichain-network-controller"),s=e("./multichain-network-service-init");n.MultichainNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,s.MultichainNetworkServiceInit)();return{controller:new r.MultichainNetworkController({messenger:e,state:t.MultichainNetworkController,networkService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-controller-init.ts"}],[176,{"@metamask/multichain-network-controller":2682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkServiceInit=void 0;var r=e("@metamask/multichain-network-controller");n.MultichainNetworkServiceInit=()=>new r.MultichainNetworkService({fetch:window.fetch.bind(window)})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-service-init.ts"}],[177,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsRatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsRatesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsRatesController({messenger:e,state:t.MultichainAssetsRatesController,interval:18e4})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-rates-assets-controller-init.ts"}],[178,{"@metamask/multichain-transactions-controller":2687},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTransactionsControllerInit=void 0;var r=e("@metamask/multichain-transactions-controller");n.MultichainTransactionsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainTransactionsController({messenger:e,state:t.MultichainTransactionsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-transactions-controller-init.ts"}],[179,{"../../../shared/constants/network":6194,"../../../shared/constants/time":6211,"../../../shared/lib/network-utils":6288,"../../../shared/lib/sentry":6292,"../lib/network-controller/messenger-action-handlers":303,"@metamask/connectivity-controller":1633,"@metamask/controller-utils":1639,"@metamask/network-controller":2751,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkControllerInit=n.ADDITIONAL_DEFAULT_NETWORKS=void 0;var r=e("@metamask/network-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/connectivity-controller"),i=e("@metamask/utils"),a=e("../../../shared/constants/time"),l=e("../../../shared/lib/network-utils"),c=e("../lib/network-controller/messenger-action-handlers"),u=e("../../../shared/constants/network"),d=e("../../../shared/lib/sentry");const p=n.ADDITIONAL_DEFAULT_NETWORKS=[s.ChainId["monad-testnet"],s.ChainId["megaeth-testnet-v2"]];n.NetworkControllerInit=({controllerMessenger:e,infuraProjectId:t,initMessenger:n,persistedState:g})=>{const m=n.call("RemoteFeatureFlagController:getState"),h=function(e){let t=e;if(!t){var n,o,a,l;t=(0,r.getDefaultNetworkControllerState)(p);const e=t.networkConfigurationsByChainId??{};let c;Object.values(e).forEach(e=>{const t=e.rpcEndpoints[0].networkClientId;(0,i.hasProperty)(s.BlockExplorerUrl,t)&&(e.blockExplorerUrls=[s.BlockExplorerUrl[t]]),e.defaultBlockExplorerUrlIndex=0}),e[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("ethereum-mainnet"),e[u.CHAIN_IDS.LINEA_MAINNET].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("linea-mainnet"),e[u.CHAIN_IDS.BASE].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("base-mainnet"),null!==(n=e[u.CHAIN_IDS.ARBITRUM])&&void 0!==n&&null!==(n=n.rpcEndpoints)&&void 0!==n&&n[0]&&(e[u.CHAIN_IDS.ARBITRUM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("arbitrum-mainnet")),null!==(o=e[u.CHAIN_IDS.BSC])&&void 0!==o&&null!==(o=o.rpcEndpoints)&&void 0!==o&&o[0]&&(e[u.CHAIN_IDS.BSC].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("bsc-mainnet")),null!==(a=e[u.CHAIN_IDS.OPTIMISM])&&void 0!==a&&null!==(a=a.rpcEndpoints)&&void 0!==a&&a[0]&&(e[u.CHAIN_IDS.OPTIMISM].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("optimism-mainnet")),null!==(l=e[u.CHAIN_IDS.POLYGON])&&void 0!==l&&null!==(l=l.rpcEndpoints)&&void 0!==l&&l[0]&&(e[u.CHAIN_IDS.POLYGON].rpcEndpoints[0].failoverUrls=(0,u.getFailoverUrlsForInfuraNetwork)("polygon-mainnet")),e[u.CHAIN_IDS.MAINNET].name="Ethereum",e[u.CHAIN_IDS.LINEA_MAINNET].name="Linea",e[u.CHAIN_IDS.BASE].name="Base",e[u.CHAIN_IDS.ARBITRUM].name="Arbitrum",e[u.CHAIN_IDS.BSC].name="BNB Chain",e[u.CHAIN_IDS.OPTIMISM].name="OP",e[u.CHAIN_IDS.POLYGON].name="Polygon",delete e[u.CHAIN_IDS.SEI],c=e[u.CHAIN_IDS.MAINNET],t.selectedNetworkClientId=c.rpcEndpoints[c.defaultRpcEndpointIndex].networkClientId}return t.networkConfigurationsByChainId&&!Object.values(t.networkConfigurationsByChainId).flatMap(e=>e.rpcEndpoints.map(e=>e.networkClientId)).includes(t.selectedNetworkClientId)&&((0,d.captureException)(new Error(`NetworkController state is invalid: \`selectedNetworkClientId\` '${t.selectedNetworkClientId}' does not refer to an RPC endpoint within a network configuration`)),t.selectedNetworkClientId=t.networkConfigurationsByChainId[u.CHAIN_IDS.MAINNET].rpcEndpoints[0].networkClientId),t}(g.NetworkController),f=e=>e.remoteFeatureFlags.walletFrameworkRpcFailoverEnabled??!1,C=new r.NetworkController({messenger:e,state:h,infuraProjectId:t,getBlockTrackerOptions:()=>({pollingInterval:20*a.SECOND,retryTimeout:20*a.SECOND}),getRpcServiceOptions:t=>{const n=s.DEFAULT_MAX_RETRIES,r={fetch:globalThis.fetch.bind(globalThis),btoa:globalThis.btoa.bind(globalThis),isOffline:()=>e.call("ConnectivityController:getState").connectivityStatus===o.CONNECTIVITY_STATUSES.Offline},i={circuitBreakDuration:30*a.SECOND,maxRetries:n};return(0,l.getIsQuicknodeEndpointUrl)(t)?{...r,policyOptions:{...i,maxConsecutiveFailures:10*(n+1)}}:{...r,policyOptions:{...i,maxConsecutiveFailures:3*(n+1)}}},additionalDefaultNetworks:p,isRpcFailoverEnabled:f(m)});return n.subscribe("NetworkController:rpcEndpointUnavailable",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointUnavailable)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("NetworkController:rpcEndpointDegraded",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointDegraded)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("RemoteFeatureFlagController:stateChange",e=>{e?(console.log("Enabling RPC failover."),C.enableRpcFailover()):(console.log("Disabling RPC failover."),C.disableRpcFailover())},f),C.initializeProvider({lookupNetwork:!1}),{controller:C}}}}},{package:"$root$",file:"app/scripts/controller-init/network-controller-init.ts"}],[18,{"../../lib/snap-keyring/snap-keyring":345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapKeyringBuilderInit=void 0;var r=e("../../lib/snap-keyring/snap-keyring");n.SnapKeyringBuilderInit=({controllerMessenger:e,initMessenger:t,removeAccount:n})=>({persistedStateKey:null,memStateKey:null,controller:(0,r.snapKeyringBuilder)(e,{persistKeyringHelper:async()=>{await t.call("KeyringController:persistAllKeyrings"),await t.call("AccountsController:updateAccounts")},removeAccountHelper:async e=>{await n(e)},trackEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/snap-keyring-builder-init.ts"}],[180,{"../../../../package.json":6170,"@metamask/notification-services-controller/notification-services":2781},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationServicesControllerInit=void 0;var r,s=e("@metamask/notification-services-controller/notification-services");const o=((r=e("../../../../package.json"))&&r.__esModule?r:{default:r}).default.version;n.NotificationServicesControllerInit=({controllerMessenger:e,persistedState:t,getController:n})=>({controller:new s.Controller({messenger:e,state:t.NotificationServicesController,env:{featureAnnouncements:{platform:"extension",spaceId:"jdkgyfmyd9sw",accessToken:"mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",platformVersion:o},locale:()=>n("PreferencesController").state.currentLocale.replace("_","-")}})})}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-controller-init.ts"}],[181,{"../../../../shared/constants/metametrics":6190,"../../../../shared/modules/mv3.utils":6327,"../../controllers/push-notifications":247,"@metamask/notification-services-controller/push-services":2802,"@metamask/notification-services-controller/push-services/web":2810,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNormalisedLocale=n.NotificationServicesPushControllerInit=void 0;var r=e("@metamask/notification-services-controller/push-services"),s=e("@metamask/notification-services-controller/push-services/web"),o=e("@metamask/utils"),i=e("../../../../shared/modules/mv3.utils"),a=e("../../controllers/push-notifications"),l=e("../../../../shared/constants/metametrics");const c=e=>e.replace("_","-");n.getNormalisedLocale=c;n.NotificationServicesPushControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:u})=>{const d=new r.Controller({messenger:e,state:{...r.defaultState,...n.NotificationServicesPushController},env:{apiKey:"AIzaSyAA6MJdRkQ00zNh_moTLwxCSxcg3vznbBM",authDomain:"notifications-faf39.firebaseapp.com",storageBucket:"notifications-faf39.appspot.com",projectId:"notifications-faf39",messagingSenderId:"824598429541",appId:"1:824598429541:web:3016d3c90f1f19a6beab8c",measurementId:"G-1FGDTTCWX5",vapidKey:"BBbjhCfHvwIqRsUrBvpfx0viLJIzWHp-beyw8-I124jeZlhNGDOegS_0_I029fFb2stzRuaNkCdTAf9F3I2m3wc"},config:{isPushFeatureEnabled:i.isManifestV3&&!0,platform:"extension",pushService:{createRegToken:s.createRegToken,deleteRegToken:s.deleteRegToken,subscribeToPushNotifications:(0,s.createSubscribeToPushNotifications)({messenger:e,onReceivedHandler:a.onPushNotificationReceived,onClickHandler:a.onPushNotificationClicked})},getLocale:()=>c(u("PreferencesController").state.currentLocale)}});return t.subscribe("NotificationServicesPushController:onNewNotifications",e=>{const n=(0,o.hasProperty)(e,"chain_id")?e.chain_id:null;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationReceived,properties:{notification_id:e.id,notification_type:e.type,chain_id:n}})}),t.subscribe("NotificationServicesPushController:pushNotificationClicked",e=>{var n;t.call("MetaMetricsController:trackEvent",{category:l.MetaMetricsEventCategory.PushNotifications,event:l.MetaMetricsEventName.PushNotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."notification_type"in e&&"on-chain"===e.notification_type&&null!==(n=e.payload)&&void 0!==n&&n.chain_id?{chain_id:e.payload.chain_id}:undefined,data:e}})}),{controller:d}}}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-push-controller-init.ts"}],[182,{"../controllers/onboarding":236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnboardingControllerInit=void 0;var r,s=(r=e("../controllers/onboarding"))&&r.__esModule?r:{default:r};n.OnboardingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new s.default({state:t.OnboardingController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/onboarding-controller-init.ts"}],[183,{"../controllers/permissions":240,"../controllers/permissions/snaps/specifications":242,"@metamask/permission-controller":2862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionControllerInit=void 0;var r=e("@metamask/permission-controller"),s=e("../controllers/permissions"),o=e("../controllers/permissions/snaps/specifications");n.PermissionControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n,getController:i})=>{const a=i("ApprovalController"),l=i("KeyringController");return{controller:new r.PermissionController({state:t.PermissionController,messenger:e,caveatSpecifications:(0,s.getCaveatSpecifications)({listAccounts:n.call.bind(n,"AccountsController:listAccounts"),findNetworkClientIdByChainId:n.call.bind(n,"NetworkController:findNetworkClientIdByChainId"),isNonEvmScopeSupported:n.call.bind(n,"MultichainRouter:isSupportedScope"),getNonEvmAccountAddresses:n.call.bind(n,"MultichainRouter:getSupportedAccounts")}),permissionSpecifications:{...(0,s.getPermissionSpecifications)(),...(0,o.getSnapPermissionSpecifications)(n,{addAndShowApprovalRequest:a.addAndShowApprovalRequest.bind(a),addNewKeyring:l.addNewKeyring.bind(l)})},unrestrictedMethods:s.unrestrictedMethods})}}}}},{package:"$root$",file:"app/scripts/controller-init/permission-controller-init.ts"}],[184,{"../../../shared/constants/permissions":6198,"@metamask/permission-log-controller":2871},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionLogControllerInit=void 0;var r=e("@metamask/permission-log-controller"),s=e("../../../shared/constants/permissions");n.PermissionLogControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PermissionLogController({messenger:e,state:t.PermissionLogController,restrictedMethods:new Set(Object.keys(s.RestrictedMethods))})})}}},{package:"$root$",file:"app/scripts/controller-init/permission-log-controller-init.ts"}],[185,{"@metamask/phishing-controller":2876,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingControllerInit=void 0;var r=e("@metamask/phishing-controller");e("@metamask/utils");n.PhishingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PhishingController({messenger:e,state:t.PhishingController,hotlistRefreshInterval:undefined,stalelistRefreshInterval:undefined})})}}},{package:"$root$",file:"app/scripts/controller-init/phishing-controller-init.ts"}],[186,{"../controllers/preferences-controller":244},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesControllerInit=void 0;var r=e("../controllers/preferences-controller");n.PreferencesControllerInit=({controllerMessenger:e,persistedState:t,initLangCode:n})=>({controller:new r.PreferencesController({state:{currentLocale:n??"",...t.PreferencesController},messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/preferences-controller-init.ts"}],[187,{"@metamask/profile-metrics-controller":2918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ProfileMetricsControllerInit=void 0;var r=e("@metamask/profile-metrics-controller");const s=Boolean(!1),o=s?1e3:6e5;n.ProfileMetricsControllerInit=({controllerMessenger:e,persistedState:t,getController:n})=>{const i=n("RemoteFeatureFlagController"),a=n("MetaMetricsController"),l=n("AppStateController");return{controller:new r.ProfileMetricsController({messenger:e,state:t.ProfileMetricsController,interval:s?1e3:1e4,initialDelayDuration:o,assertUserOptedIn:()=>!0===i.state.remoteFeatureFlags.extensionUxPna25&&!0===l.state.pna25Acknowledged&&!0===a.state.participateInMetaMetrics,getMetaMetricsId:()=>a.getMetaMetricsId()})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-controller-init.ts"}],[188,{"../../../shared/modules/authentication":6310,"@metamask/profile-metrics-controller":2918},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ProfileMetricsServiceInit=void 0;var r=e("@metamask/profile-metrics-controller"),s=e("../../../shared/modules/authentication");n.ProfileMetricsServiceInit=({controllerMessenger:e})=>{const t=(0,s.loadAuthenticationConfig)();return{persistedStateKey:null,memStateKey:null,controller:new r.ProfileMetricsService({messenger:e,fetch:fetch.bind(globalThis),env:t})}}}}},{package:"$root$",file:"app/scripts/controller-init/profile-metrics-service-init.ts"}],[189,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.RatesControllerInit=({controllerMessenger:e,persistedState:t})=>({memStateKey:"MultichainRatesController",persistedStateKey:"MultichainRatesController",controller:new r.RatesController({state:t.MultichainRatesController,messenger:e,includeUsdRate:!0})})}}},{package:"$root$",file:"app/scripts/controller-init/rates-controller-init.ts"}],[19,{"../controllers/alert-controller":225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AlertControllerInit=void 0;var r=e("../controllers/alert-controller");n.AlertControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AlertController({state:t.AlertController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/alert-controller-init.ts"}],[190,{"../../../development/build/constants":623,"../../../shared/lib/feature-flags/version-gating":6271,"../lib/util":380,"@metamask/remote-feature-flag-controller":3018,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteFeatureFlagControllerInit=void 0,n.getConfigForRemoteFeatureFlagRequest=u;var r=e("@metamask/utils"),s=e("@metamask/remote-feature-flag-controller"),o=e("../../../development/build/constants"),i=e("../lib/util"),a=e("../../../shared/lib/feature-flags/version-gating");const l={flask:s.DistributionType.Flask,main:s.DistributionType.Main,beta:s.DistributionType.Beta,experimental:s.DistributionType.Main},c={[o.ENVIRONMENT.DEVELOPMENT]:s.EnvironmentType.Development,[o.ENVIRONMENT.RELEASE_CANDIDATE]:s.EnvironmentType.ReleaseCandidate,[o.ENVIRONMENT.PRODUCTION]:s.EnvironmentType.Production};function u(){(0,r.assert)("main","METAMASK_BUILD_TYPE is not defined"),(0,r.assert)("production","METAMASK_ENVIRONMENT is not defined");const e="main",t=l[e]||s.DistributionType.Main;let n=c.production||s.EnvironmentType.Development;return{distribution:t,environment:n}}n.RemoteFeatureFlagControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const r=t.call("OnboardingController:getState"),o=t.call("PreferencesController:getState"),{distribution:l,environment:c}=u();let d=!0===o.useExternalServices,p=!0===r.completedOnboarding;const g=()=>!p||!d,m=new s.RemoteFeatureFlagController({state:n.RemoteFeatureFlagController,messenger:e,fetchInterval:9e5,disabled:g(),getMetaMetricsId:()=>t.call("MetaMetricsController:getMetaMetricsId"),clientVersion:(0,a.getBaseSemVerVersion)(),clientConfigApiService:new s.ClientConfigApiService({fetch:globalThis.fetch.bind(globalThis),config:{client:s.ClientType.Extension,distribution:l,environment:c}})});function h(){g()?m.disable():(m.enable(),m.updateRemoteFeatureFlags().catch(e=>{console.error("Failed to update remote feature flags:",e)}))}return t.subscribe("PreferencesController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{useExternalServices:n}=e,{useExternalServices:r}=t;return r!==n&&(d=!0===r,h()),!0},o)),t.subscribe("OnboardingController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{completedOnboarding:n}=e,{completedOnboarding:r}=t;return r!==n&&(p=!0===r,h()),!0},r)),{controller:m}}}}},{package:"$root$",file:"app/scripts/controller-init/remote-feature-flag-controller-init.ts"}],[191,{"../../../shared/lib/feature-flags/version-gating":6271,"../../../shared/lib/manifestFlags":6280,"../controllers/rewards/rewards-controller":248},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsControllerInit=void 0;var r=e("../controllers/rewards/rewards-controller"),s=e("../../../shared/lib/manifestFlags"),o=e("../../../shared/lib/feature-flags/version-gating");const i=e=>"boolean"==typeof e?e:Boolean((0,o.validatedVersionGatedFeatureFlag)(e));n.RewardsControllerInit=e=>{const{controllerMessenger:t,persistedState:n,initMessenger:o}=e,a=n.RewardsController??r.defaultRewardsControllerState;return{controller:new r.RewardsController({messenger:t,state:a,isDisabled:()=>{var e;const{remoteFeatureFlags:t}=o.call("RemoteFeatureFlagController:getState"),n=null==t?void 0:t.rewardsEnabled,r=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsEnabled,a=r===undefined?i(n):i(r),{useExternalServices:l}=o.call("PreferencesController:getState");return!a||!l},isBitcoinDisabled:()=>{var e;const{remoteFeatureFlags:t}=o.call("RemoteFeatureFlagController:getState"),n=null==t?void 0:t.rewardsBitcoinEnabledExtension,r=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsBitcoinEnabledExtension;return!(r===undefined?i(n):i(r))},isTronDisabled:()=>{var e;const{remoteFeatureFlags:t}=o.call("RemoteFeatureFlagController:getState"),n=null==t?void 0:t.rewardsTronEnabledExtension,r=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsTronEnabledExtension;return!(r===undefined?i(n):i(r))}})}}}}},{package:"$root$",file:"app/scripts/controller-init/rewards-controller-init.ts"}],[192,{"../controllers/rewards/rewards-data-service":249},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsDataServiceInit=void 0;var r=e("../controllers/rewards/rewards-data-service");n.RewardsDataServiceInit=({controllerMessenger:e})=>({controller:new r.RewardsDataService({messenger:e,fetch:fetch.bind(globalThis)}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/rewards-data-service-init.ts"}],[193,{"./oauth-service-init":194,"./seedless-onboarding-controller-init":195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"OAuthServiceInit",{enumerable:!0,get:function(){return r.OAuthServiceInit}}),Object.defineProperty(n,"SeedlessOnboardingControllerInit",{enumerable:!0,get:function(){return s.SeedlessOnboardingControllerInit}});var r=e("./oauth-service-init"),s=e("./seedless-onboarding-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/index.ts"}],[194,{"../../services/oauth/oauth-service":615,"../../services/oauth/web-authenticator-factory":618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OAuthServiceInit=void 0;var r,s=(r=e("../../services/oauth/oauth-service"))&&r.__esModule?r:{default:r},o=e("../../services/oauth/web-authenticator-factory");n.OAuthServiceInit=e=>{const{controllerMessenger:t,getController:n}=e,r=n("MetaMetricsController");return{controller:new s.default({messenger:t,env:{googleClientId:"795351133007-6d0s31utj13knv440fgjo2ur93241gb6.apps.googleusercontent.com",appleClientId:"io.metamask.appleloginclient.prod"},webAuthenticator:(0,o.webAuthenticatorFactory)(),bufferedTrace:r.bufferedTrace.bind(r),bufferedEndTrace:r.bufferedEndTrace.bind(r),trackEvent:r.trackEvent.bind(r),addEventBeforeMetricsOptIn:r.addEventBeforeMetricsOptIn.bind(r),getParticipateInMetaMetrics:()=>r.state.participateInMetaMetrics}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/oauth-service-init.ts"}],[195,{"../../lib/encryptor-factory":288,"../../services/oauth/config":612,"@metamask/seedless-onboarding-controller":3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SeedlessOnboardingControllerInit=void 0;var r=e("@metamask/seedless-onboarding-controller"),s=e("../../lib/encryptor-factory"),o=e("../../services/oauth/config");n.SeedlessOnboardingControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:i}=e,a=(0,s.encryptorFactory)(6e5),l=(0,o.isDevOrTestBuild)()?r.Web3AuthNetwork.Devnet:r.Web3AuthNetwork.Mainnet;return{controller:new r.SeedlessOnboardingController({messenger:n,state:i.SeedlessOnboardingController,network:l,passwordOutdatedCacheTTL:15e3,refreshJWTToken:(...e)=>t.call("OAuthService:getNewRefreshToken",...e),revokeRefreshToken:(...e)=>t.call("OAuthService:revokeRefreshToken",...e),renewRefreshToken:(...e)=>t.call("OAuthService:renewRefreshToken",...e),encryptor:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/seedless-onboarding-controller-init.ts"}],[196,{"../lib/WeakRefObjectMap":268,"@metamask/selected-network-controller":3051},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SelectedNetworkControllerInit=void 0;var r=e("@metamask/selected-network-controller"),s=e("../lib/WeakRefObjectMap");n.SelectedNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SelectedNetworkController({state:t.SelectedNetworkController,messenger:e,domainProxyMap:new s.WeakRefObjectMap})})}}},{package:"$root$",file:"app/scripts/controller-init/selected-network-controller-init.ts"}],[197,{"../../../../shared/lib/sentry":6292,"../../../../shared/modules/shield":6342,"../../lib/ppom/ppom-util":313,"@metamask/keyring-controller":2537,"@metamask/shield-controller":3055},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ShieldControllerInit=void 0;var r=e("@metamask/shield-controller"),s=e("@metamask/keyring-controller"),o=e("../../lib/ppom/ppom-util"),i=e("../../../../shared/modules/shield"),a=e("../../../../shared/lib/sentry");const l=e=>{const t=(0,r.parseSignatureRequestMethod)(e),n=e.version===s.SignTypedDataVersion.V3||e.version===s.SignTypedDataVersion.V4,i=n?[e.messageParams.from,e.messageParams.data]:[e.messageParams.data,e.messageParams.from],a={id:e.id,jsonrpc:"2.0",method:t,params:i},l=(0,o.normalizeSignatureRequest)(a);if(null!=l&&l.params&&n){const t=l.params;e.messageParams.data=t[1]}return e},c=(0,i.loadShieldConfig)();n.ShieldControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:s}=e,o=c.ruleEngineUrl;return{controller:new r.ShieldController({messenger:t,state:s.ShieldController,normalizeSignatureRequest:l,backend:new r.ShieldRemoteBackend({getAccessToken:()=>n.call("AuthenticationController:getBearerToken"),fetch:(e,t)=>fetch(e,t),baseUrl:o,captureException:a.captureException})})}}}}},{package:"$root$",file:"app/scripts/controller-init/shield/shield-controller-init.ts"}],[198,{"../../../../shared/constants/smartTransactions":6204,"@metamask/smart-transactions-controller":3071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SmartTransactionsControllerInit=void 0;var r=e("@metamask/smart-transactions-controller"),s=e("../../../../shared/constants/smartTransactions");n.SmartTransactionsControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:o,getUIState:i,getAccountType:a,getDeviceModel:l,getHardwareTypeForMetric:c,trace:u}=e;return{controller:new r.SmartTransactionsController({supportedChainIds:(0,s.getAllowedSmartTransactionsChainIds)(),clientId:r.ClientId.Extension,trackMetaMetricsEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),state:o.SmartTransactionsController,messenger:t,getMetaMetricsProps:async()=>{var e;const t=i(),{internalAccounts:n}=t,r=null==n?void 0:n.selectedAccount,s=r?null==n||null===(e=n.accounts)||void 0===e?void 0:e[r]:null,o=(null==s?void 0:s.address)??"";if(!o)return{accountHardwareType:undefined,accountType:undefined,deviceModel:undefined};return{accountHardwareType:await c(o),accountType:await a(o),deviceModel:await l(o)}},trace:u})}}}}},{package:"$root$",file:"app/scripts/controller-init/smart-transactions/smart-transactions-controller-init.ts"}],[199,{"@metamask/snaps-controllers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CronjobControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.CronjobControllerInit=({controllerMessenger:e,persistedState:t,getCronjobControllerStorageManager:n})=>({controller:new r.CronjobController({state:t.CronjobController,messenger:e,stateManager:n()}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/cronjob-controller-init.ts"}],[20,{"../../../shared/notifications":6350,"@metamask/announcement-controller":1356},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementControllerInit=void 0;var r=e("@metamask/announcement-controller"),s=e("../../../shared/notifications");n.AnnouncementControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AnnouncementController({messenger:e,allAnnouncements:s.UI_NOTIFICATIONS,state:t.AnnouncementController})})}}},{package:"$root$",file:"app/scripts/controller-init/announcement-controller-init.ts"}],[200,{"../../../../shared/modules/mv3.utils":6327,"../../constants/stream":13,"../../lib/stream-utils":359,"@metamask/permission-controller":2862,"@metamask/snaps-controllers":3085,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExecutionServiceInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("@metamask/permission-controller"),i=e("../../../../shared/modules/mv3.utils"),a=e("../../lib/stream-utils"),l=e("../../constants/stream");n.ExecutionServiceInit=({controllerMessenger:e,offscreenPromise:t,setupUntrustedCommunicationEip1193:n,setupUntrustedCommunicationCaip:c})=>{function u(e,t){n({connectionStream:t,sender:{snapId:e},subjectType:o.SubjectType.Snap});const r=(0,a.setupMultiplex)(t);r.ignoreStream(l.METAMASK_EIP_1193_PROVIDER),c({connectionStream:r.createStream(l.METAMASK_CAIP_MULTICHAIN_PROVIDER),sender:{snapId:e},subjectType:o.SubjectType.Snap})}if(i.isManifestV3&&"undefined"!=typeof chrome&&void 0!==chrome.offscreen)return{memStateKey:null,persistedStateKey:null,controller:new r.OffscreenExecutionService({messenger:e,setupSnapProvider:u,offscreenPromise:t})};const d="https://execution.metamask.io/iframe/10.4.1/index.html";return(0,s.assert)(d,"Missing iframe URL."),{memStateKey:null,persistedStateKey:null,controller:new r.IframeExecutionService({messenger:e,iframeUrl:new URL(d),setupSnapProvider:u})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/execution-service-init.ts"}],[201,{"./cronjob-controller-init":199,"./execution-service-init":200,"./multichain-router-init":202,"./rate-limit-controller-init":203,"./snap-controller-init":204,"./snap-insights-controller-init":205,"./snap-interface-controller-init":206,"./snaps-name-provider-init":207,"./snaps-registry-init":208,"./websocket-service-init":209},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CronjobControllerInit",{enumerable:!0,get:function(){return r.CronjobControllerInit}}),Object.defineProperty(n,"ExecutionServiceInit",{enumerable:!0,get:function(){return s.ExecutionServiceInit}}),Object.defineProperty(n,"MultichainRouterInit",{enumerable:!0,get:function(){return o.MultichainRouterInit}}),Object.defineProperty(n,"RateLimitControllerInit",{enumerable:!0,get:function(){return i.RateLimitControllerInit}}),Object.defineProperty(n,"SnapControllerInit",{enumerable:!0,get:function(){return a.SnapControllerInit}}),Object.defineProperty(n,"SnapInsightsControllerInit",{enumerable:!0,get:function(){return l.SnapInsightsControllerInit}}),Object.defineProperty(n,"SnapInterfaceControllerInit",{enumerable:!0,get:function(){return c.SnapInterfaceControllerInit}}),Object.defineProperty(n,"SnapsNameProviderInit",{enumerable:!0,get:function(){return u.SnapsNameProviderInit}}),Object.defineProperty(n,"SnapsRegistryInit",{enumerable:!0,get:function(){return d.SnapsRegistryInit}}),Object.defineProperty(n,"WebSocketServiceInit",{enumerable:!0,get:function(){return p.WebSocketServiceInit}});var r=e("./cronjob-controller-init"),s=e("./execution-service-init"),o=e("./multichain-router-init"),i=e("./rate-limit-controller-init"),a=e("./snap-controller-init"),l=e("./snap-insights-controller-init"),c=e("./snap-interface-controller-init"),u=e("./snaps-name-provider-init"),d=e("./snaps-registry-init"),p=e("./websocket-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/snaps/index.ts"}],[202,{"../../../../shared/constants/keyring":6186,"@metamask/snaps-controllers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainRouterInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("../../../../shared/constants/keyring");n.MultichainRouterInit=({controllerMessenger:e,getController:t})=>{const n=t("KeyringController"),o=t("AppStateController");return{memStateKey:null,persistedStateKey:null,controller:new r.MultichainRouter({messenger:e,withSnapKeyring:async e=>e({keyring:await(async()=>{await o.getUnlockPromise(!0);let[e]=n.getKeyringsByType(s.KeyringType.snap);return e||(await n.addNewKeyring(s.KeyringType.snap),[e]=n.getKeyringsByType(s.KeyringType.snap)),e})()})})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/multichain-router-init.ts"}],[2029,{"@metamask/keyring-controller":2537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetCallsStatusCode=n.EIP7682ErrorCode=n.EIP5792ErrorCode=n.SupportedCapabilities=n.MessageType=n.KEYRING_TYPES_SUPPORTING_7702=n.VERSION=void 0;const r=e("@metamask/keyring-controller");var s,o,i,a,l;n.VERSION="2.0.0",n.KEYRING_TYPES_SUPPORTING_7702=[r.KeyringTypes.hd,r.KeyringTypes.simple],function(e){e.SendTransaction="eth_sendTransaction"}(s||(n.MessageType=s={})),function(e){e.AuxiliaryFunds="auxiliaryFunds"}(o||(n.SupportedCapabilities=o={})),function(e){e[e.UnsupportedNonOptionalCapability=5700]="UnsupportedNonOptionalCapability",e[e.UnsupportedChainId=5710]="UnsupportedChainId",e[e.UnknownBundleId=5730]="UnknownBundleId",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(i||(n.EIP5792ErrorCode=i={})),function(e){e[e.UnsupportedAsset=5771]="UnsupportedAsset",e[e.UnsupportedChain=5772]="UnsupportedChain",e[e.MalformedRequiredAssets=5773]="MalformedRequiredAssets"}(a||(n.EIP7682ErrorCode=a={})),function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(l||(n.GetCallsStatusCode=l={}))}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/constants.cjs"}],[203,{"@metamask/notification-services-controller/notification-services":2781,"@metamask/rate-limit-controller":3015,loglevel:5247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitControllerInit=void 0;var r,s=e("@metamask/rate-limit-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/notification-services-controller/notification-services");n.RateLimitControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,showNotification:r})=>({controller:new s.RateLimitController({state:n.RateLimitController,messenger:e,implementations:{showNativeNotification:{method:(e,n)=>{const s=t.call("SubjectMetadataController:getState").subjectMetadata[e];return r((null==s?void 0:s.name)??e,n).catch(e=>{o.default.error("Failed to create notification",e)}),null},rateLimitCount:2,rateLimitTimeout:3e5},showInAppNotification:{method:(e,n)=>{const{message:r,title:s,footerLink:o,interfaceId:a}=n,l={title:s,...o?{footerLink:o}:{},interfaceId:a},c={data:{message:r,origin:e,...a?{detailedView:l}:{}},type:i.TRIGGER_TYPES.SNAP,readDate:null};return t.call("NotificationServicesController:updateMetamaskNotificationsList",c),null},rateLimitCount:5,rateLimitTimeout:6e4}}}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/rate-limit-controller-init.ts"}],[2030,{"../constants.cjs":2029,"@metamask/rpc-errors":3026,"@metamask/transaction-controller":3473},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("../constants.cjs");n.getCallsStatus=function(e,t){const n=e.call("TransactionController:getState").transactions.filter(e=>e.batchId===t);if(!n?.length)throw new r.JsonRpcError(o.EIP5792ErrorCode.UnknownBundleId,"No matching bundle found");const i=n[0],{chainId:a,txReceipt:l}=i,c=function(e){const{hash:t,status:n}=e;if(n===s.TransactionStatus.confirmed)return o.GetCallsStatusCode.CONFIRMED;if(n===s.TransactionStatus.failed)return t?o.GetCallsStatusCode.REVERTED:o.GetCallsStatusCode.FAILED_OFFCHAIN;if(n===s.TransactionStatus.dropped)return o.GetCallsStatusCode.REVERTED;return o.GetCallsStatusCode.PENDING}(i),u=l,d=u?.logs??[],p=u&&[{blockHash:u.blockHash,blockNumber:u.blockNumber,gasUsed:u.gasUsed,logs:d.map(e=>({address:e.address,data:e.data,topics:e.topics})),status:u.status,transactionHash:u.transactionHash}];return{version:o.VERSION,id:t,chainId:a,atomic:!0,status:c,receipts:p}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCallsStatus.cjs"}],[2031,{"../constants.cjs":2029,"../utils.cjs":2038},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCapabilities=void 0;const r=e("../constants.cjs"),s=e("../utils.cjs");n.getCapabilities=async function(e,t,n,o){const{getDismissSmartAccountSuggestionEnabled:i,getIsSmartTransaction:a,isAtomicBatchSupported:l,isRelaySupported:c,getSendBundleSupportedChains:u,isAuxiliaryFundsSupported:d}=e;let p=o?.map(e=>e.toLowerCase());if(!p?.length){const e=t.call("NetworkController:getState").networkConfigurationsByChainId;p=Object.keys(e)}const g=await l({address:n,chainIds:p}),m=await async function(e,t,n,r,s,o){const i=o.call("PreferencesController:getState").useTransactionSimulations,a=await Promise.all(t.map(({chainId:e})=>e).map(e=>r(e))),l=await s(e),c=t.map((e,t)=>({...e,relaySupportedForChain:a[t]}));return e.reduce((e,t)=>{const r=c.find(({chainId:e})=>e===t)??{},{isSupported:s=!1,relaySupportedForChain:o}=r,a=n(t),u=l[t]??!1;return i&&(a&&u||s&&o)&&(e[t]={alternateGasFees:{supported:!0}}),e},{})}(p,g,a,c,u,t);return p.reduce((e,o)=>{const a=g.find(({chainId:e})=>e===o)??{},{delegationAddress:l,isSupported:c,upgradeContractAddress:u}=a,p=i();let m=!1;try{const e=(0,s.getAccountKeyringType)(n,t);m=r.KEYRING_TYPES_SUPPORTING_7702.includes(e)}catch{}if(!c&&!(!p&&u&&!l&&m))return e;const h=c?"supported":"ready",f=o;return e[f]===undefined&&(e[f]={}),e[f].atomic={status:h},m&&d(o)&&(e[f].auxiliaryFunds={supported:!0}),e},m)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCapabilities.cjs"}],[2032,{"../constants.cjs":2029,"../utils.cjs":2038,"@metamask/rpc-errors":3026,"@metamask/transaction-controller":3473,"@metamask/utils":3554,lodash:5239,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.processSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("@metamask/utils"),i=e("lodash"),a=e("uuid"),l=e("../constants.cjs"),c=e("../utils.cjs");function u(e){const{version:t}=e;if(t!==l.VERSION)throw r.rpcErrors.invalidInput(`Version not supported: Got ${t}, expected ${l.VERSION}`)}function d(e,t){const{chainId:n}=e;if(n&&n.toLowerCase()!==t.toLowerCase())throw r.rpcErrors.invalidParams(`Chain ID must match the dApp selected network: Got ${n}, expected ${t}`)}function p(e,t,n){const{calls:s,capabilities:o,chainId:i}=e,a=[...Object.keys(o??{}).filter(e=>e!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==o?.[e].optional),...s.flatMap(e=>Object.keys(e.capabilities??{}).filter(t=>t!==l.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==e.capabilities?.[t].optional))];if(a?.length)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capabilities: ${a.join(", ")}`);o?.auxiliaryFunds&&function({auxiliaryFunds:e,chainId:t,keyringType:n,isAuxiliaryFundsSupported:s}){if(e.optional)return;const o=l.KEYRING_TYPES_SUPPORTING_7702.includes(n);if(!o)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capability: ${l.SupportedCapabilities.AuxiliaryFunds}`);if(!s(t))throw new r.JsonRpcError(l.EIP7682ErrorCode.UnsupportedChain,`The wallet no longer supports auxiliary funds on the requested chain: ${t}`);if(!e?.requiredAssets)return;for(const t of e.requiredAssets)if("erc20"!==t.standard)throw new r.JsonRpcError(l.EIP7682ErrorCode.UnsupportedAsset,`The requested asset ${t.address} is not available through the wallets auxiliary fund system: unsupported token standard ${t.standard}`)}({auxiliaryFunds:o.auxiliaryFunds,chainId:i,keyringType:t,isAuxiliaryFundsSupported:n})}function g(e){if(e.capabilities?.auxiliaryFunds?.requiredAssets){const{requiredAssets:t}=e.capabilities.auxiliaryFunds,n=(0,i.groupBy)(t,e=>`${e.address.toLowerCase()}-${e.standard}`),r=Object.values(n).map(e=>{if(1===e.length)return e[0];const t=e.reduce((e,t)=>e+BigInt(t.amount),0n);return{...e[0],amount:(0,o.add0x)(t.toString(16))}});e.capabilities.auxiliaryFunds.requiredAssets=r}}n.processSendCalls=async function(e,t,n,i){const{addTransactionBatch:m,addTransaction:h,getDismissSmartAccountSuggestionEnabled:f,isAtomicBatchSupported:C,validateSecurity:S,isAuxiliaryFundsSupported:w}=e,{calls:I,from:b}=n,{networkClientId:T,origin:E}=i,k=I.map(e=>({params:e})),{chainId:A}=t.call("NetworkController:getNetworkClientById",T).configuration,v=b??t.call("AccountsController:getSelectedAccount").address,y=(0,a.v4)(),_=S.bind(null,y),M=i.id?String(i.id):"";let N;return N=1===Object.keys(k).length?await async function({addTransaction:e,chainId:t,from:n,messenger:r,networkClientId:i,origin:m,requestId:h,securityAlertId:f,sendCalls:C,transactions:S,validateSecurity:w,isAuxiliaryFundsSupported:I}){const b=(0,c.getAccountKeyringType)(n,r);!function(e,t,n,r){u(e),p(e,n,r),d(e,t)}(C,t,b,I);const T={from:n,...S[0].params,type:s.TransactionEnvelopeType.feeMarket},E={method:l.MessageType.SendTransaction,params:[T],origin:m};w(E,t),g(C);const k=function(){const e=(0,a.v4)(),t=new Uint8Array((0,a.parse)(e));return(0,o.bytesToHex)(t)}();return await e(T,{requestId:h,networkClientId:i,origin:m,securityAlertResponse:{securityAlertId:f},batchId:k}),k}({addTransaction:h,chainId:A,from:v,messenger:t,networkClientId:T,origin:E,requestId:M,securityAlertId:y,sendCalls:n,transactions:k,validateSecurity:_,isAuxiliaryFundsSupported:w}):await async function({addTransactionBatch:e,isAtomicBatchSupported:t,chainId:n,from:s,getDismissSmartAccountSuggestionEnabled:o,networkClientId:i,messenger:a,origin:m,requestId:h,sendCalls:f,securityAlertId:C,transactions:S,validateSecurity:w,isAuxiliaryFundsSupported:I}){const b=await t({address:s,chainIds:[n]}),T=b?.[0],E=(0,c.getAccountKeyringType)(s,a),k=o();(function(e,t,n,s,o,i){u(e),function(e,t,n){if(d(e,t),!n)throw new r.JsonRpcError(l.EIP5792ErrorCode.UnsupportedChainId,`EIP-7702 not supported on chain: ${t}`)}(e,t,s),p(e,o,i),function(e,t,n){if(t?.delegationAddress)return;if(e)throw new r.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade disabled by the user");if(!l.KEYRING_TYPES_SUPPORTING_7702.includes(n))throw new r.JsonRpcError(l.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported on account")}(n,s,o)})(f,n,k,T,E,I),g(f);const A=await e({from:s,networkClientId:i,origin:m,requestId:h,securityAlertId:C,transactions:S,validateSecurity:w});return A.batchId}({addTransactionBatch:m,isAtomicBatchSupported:C,chainId:A,from:v,getDismissSmartAccountSuggestionEnabled:f,messenger:t,networkClientId:T,origin:E,requestId:M,sendCalls:n,securityAlertId:y,transactions:k,validateSecurity:_,isAuxiliaryFundsSupported:w}),{id:N}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/processSendCalls.cjs"}],[2033,{"./hooks/getCallsStatus.cjs":2030,"./hooks/getCapabilities.cjs":2031,"./hooks/processSendCalls.cjs":2032,"./methods/wallet_getCallsStatus.cjs":2034,"./methods/wallet_getCapabilities.cjs":2035,"./methods/wallet_sendCalls.cjs":2036},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=n.walletGetCallsStatus=n.walletSendCalls=n.getCapabilities=n.getCallsStatus=n.processSendCalls=void 0;var r=e("./hooks/processSendCalls.cjs");Object.defineProperty(n,"processSendCalls",{enumerable:!0,get:function(){return r.processSendCalls}});var s=e("./hooks/getCallsStatus.cjs");Object.defineProperty(n,"getCallsStatus",{enumerable:!0,get:function(){return s.getCallsStatus}});var o=e("./hooks/getCapabilities.cjs");Object.defineProperty(n,"getCapabilities",{enumerable:!0,get:function(){return o.getCapabilities}});var i=e("./methods/wallet_sendCalls.cjs");Object.defineProperty(n,"walletSendCalls",{enumerable:!0,get:function(){return i.walletSendCalls}});var a=e("./methods/wallet_getCallsStatus.cjs");Object.defineProperty(n,"walletGetCallsStatus",{enumerable:!0,get:function(){return a.walletGetCallsStatus}});var l=e("./methods/wallet_getCapabilities.cjs");Object.defineProperty(n,"walletGetCapabilities",{enumerable:!0,get:function(){return l.walletGetCapabilities}})}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/index.cjs"}],[2034,{"../types.cjs":2037,"../utils.cjs":2038,"@metamask/rpc-errors":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCallsStatus=async function(e,t,{getCallsStatus:n}){if(!n)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCallsStatusStruct);const i=e.params[0];t.result=await n(i,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCallsStatus.cjs"}],[2035,{"../types.cjs":2037,"../utils.cjs":2038,"@metamask/rpc-errors":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCapabilities=async function(e,t,{getAccounts:n,getCapabilities:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCapabilitiesStruct);const a=e.params[0],l=e.params[1];await(0,o.validateAndNormalizeKeyholder)(a,e,{getAccounts:n});const c=await i(a,l,e);t.result=c}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCapabilities.cjs"}],[2036,{"../types.cjs":2037,"../utils.cjs":2038,"@metamask/rpc-errors":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletSendCalls=async function(e,t,{getAccounts:n,processSendCalls:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.SendCallsStruct);const a=e.params[0],l=a.from?await(0,o.validateAndNormalizeKeyholder)(a.from,e,{getAccounts:n}):undefined,c={...a,from:l};t.result=await i(c,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_sendCalls.cjs"}],[2037,{"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendCallsStruct=n.CapabilitiesStruct=n.GetCapabilitiesStruct=n.GetCallsStatusStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.GetCallsStatusStruct=(0,r.tuple)([s.StrictHexStruct]),n.GetCapabilitiesStruct=(0,r.tuple)([s.HexChecksumAddressStruct,(0,r.optional)((0,r.array)(s.StrictHexStruct))]);const o=(0,r.type)({address:(0,r.nonempty)(s.HexChecksumAddressStruct),amount:(0,r.nonempty)(s.StrictHexStruct),standard:(0,r.nonempty)((0,r.string)())});n.CapabilitiesStruct=(0,r.record)((0,r.string)(),(0,r.type)({optional:(0,r.optional)((0,r.boolean)()),requiredAssets:(0,r.optional)((0,r.array)(o))})),n.SendCallsStruct=(0,r.tuple)([(0,r.object)({version:(0,r.nonempty)((0,r.string)()),id:(0,r.optional)(s.StrictHexStruct),from:(0,r.optional)(s.HexChecksumAddressStruct),chainId:s.StrictHexStruct,atomicRequired:(0,r.boolean)(),calls:(0,r.array)((0,r.object)({to:(0,r.optional)(s.HexChecksumAddressStruct),data:(0,r.optional)(s.StrictHexStruct),value:(0,r.optional)(s.StrictHexStruct),capabilities:(0,r.optional)(n.CapabilitiesStruct)})),capabilities:(0,r.optional)(n.CapabilitiesStruct)})])}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/types.cjs"}],[2038,{"./constants.cjs":2029,"@metamask/rpc-errors":3026,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resemblesAddress=n.validateParams=n.validateAndNormalizeKeyholder=n.getAccountKeyringType=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("./constants.cjs");function i(e){return 42===e.length}n.getAccountKeyringType=function(e,t){const{accounts:n}=t.call("AccountsController:getState").internalAccounts,s=Object.values(n).find(t=>t.address.toLowerCase()===e.toLowerCase()),i=s?.metadata?.keyring?.type;if(!i)throw new r.JsonRpcError(o.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported as account type is unknown");return i},n.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:n}){if("string"==typeof e&&e.length>0&&i(e)){const s=(await n(t)).map(e=>e.toLowerCase()),o=e.toLowerCase();if(s.includes(o))return o;throw r.providerErrors.unauthorized()}throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid params"))},n.resemblesAddress=i}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/utils.cjs"}],[2039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DELEGATION_INDICATOR_PREFIX=n.METHOD_NAMES=void 0,n.METHOD_NAMES={UPGRADE_ACCOUNT:"wallet_upgradeAccount",GET_ACCOUNT_UPGRADE_STATUS:"wallet_getAccountUpgradeStatus"},n.DELEGATION_INDICATOR_PREFIX="0xef0100"}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/constants.cjs"}],[204,{"../../../../shared/constants/keyring":6186,"../../../../shared/constants/snaps/permissions":6205,"../../lib/encryptor-factory":288,"../../lib/util":380,"@metamask/snaps-controllers":3085,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapControllerInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("../../../../shared/constants/snaps/permissions"),i=e("../../lib/encryptor-factory"),a=e("../../../../shared/constants/keyring"),l=e("../../lib/util");n.SnapControllerInit=({initMessenger:e,controllerMessenger:t,persistedState:n,removeAllConnections:c,preinstalledSnaps:u})=>{const d=(0,l.getBooleanFlag)(!1),p=(0,l.getBooleanFlag)(!0),g=(0,l.getBooleanFlag)(!0),m=(0,l.getBooleanFlag)("true");const h=new r.SnapController({environmentEndowmentPermissions:Object.values(o.EndowmentPermissions),excludedPermissions:{...o.ExcludedSnapPermissions,...o.ExcludedSnapEndowments},closeAllConnections:c,state:n.SnapController,messenger:t,featureFlags:{allowLocalSnaps:d,requireAllowlist:p,rejectInvalidPlatformVersion:g,autoUpdatePreinstalledSnaps:m},encryptor:(0,i.encryptorFactory)(6e5),getMnemonicSeed:async function(){const t=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!(t[0]&&(0,s.hasProperty)(t[0],"seed")&&t[0].seed instanceof Uint8Array))throw new Error("Primary keyring mnemonic unavailable.");return t[0].seed},preinstalledSnaps:u,getFeatureFlags:function(){return{disableSnaps:!1===e.call("PreferencesController:getState").useExternalServices}},ensureOnboardingComplete:async function(){const{completedOnboarding:t}=e.call("OnboardingController:getState");if(t)return;const{promise:n,resolve:r}=(0,s.createDeferredPromise)(),o=t=>{t.completedOnboarding&&(r(),e.unsubscribe("OnboardingController:stateChange",o))};e.subscribe("OnboardingController:stateChange",o),await n},trackEvent:e.call.bind(e,"MetaMetricsController:trackEvent")});return e.subscribe("KeyringController:lock",()=>{e.call("SnapController:setClientActive",!1)}),e.subscribe("KeyringController:unlock",()=>{e.call("SnapController:setClientActive",!0)}),{controller:h}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-controller-init.ts"}],[2040,{"./constants.cjs":2039,"./utils.cjs":2042,"./wallet_getAccountUpgradeStatus.cjs":2043,"./wallet_upgradeAccount.cjs":2044},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METHOD_NAMES=n.validateAndNormalizeAddress=n.validateParams=n.walletGetAccountUpgradeStatus=n.walletUpgradeAccount=void 0;var r=e("./wallet_upgradeAccount.cjs");Object.defineProperty(n,"walletUpgradeAccount",{enumerable:!0,get:function(){return r.walletUpgradeAccount}});var s=e("./wallet_getAccountUpgradeStatus.cjs");Object.defineProperty(n,"walletGetAccountUpgradeStatus",{enumerable:!0,get:function(){return s.walletGetAccountUpgradeStatus}});var o=e("./utils.cjs");Object.defineProperty(n,"validateParams",{enumerable:!0,get:function(){return o.validateParams}}),Object.defineProperty(n,"validateAndNormalizeAddress",{enumerable:!0,get:function(){return o.validateAndNormalizeAddress}});var i=e("./constants.cjs");Object.defineProperty(n,"METHOD_NAMES",{enumerable:!0,get:function(){return i.METHOD_NAMES}})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/index.cjs"}],[2041,{"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetAccountUpgradeStatusParamsStruct=n.UpgradeAccountParamsStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.UpgradeAccountParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)}),n.GetAccountUpgradeStatusParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/types.cjs"}],[2042,{"@metamask/rpc-errors":3026,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateParams=n.validateAndNormalizeAddress=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("@metamask/utils");n.validateAndNormalizeAddress=async function(e,t,n){if("string"!=typeof e||0===e.length||!(0,o.isHexAddress)(e))throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an EVM address."});if(!(await n(t)).map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw r.providerErrors.unauthorized();return e},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid parameters"))}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/utils.cjs"}],[2043,{"./constants.cjs":2039,"./types.cjs":2041,"./utils.cjs":2042,"@metamask/rpc-errors":3026,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetAccountUpgradeStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),o=e("./constants.cjs"),i=e("./types.cjs"),a=e("./utils.cjs");n.walletGetAccountUpgradeStatus=async function(e,t,n){const{params:l,origin:c}=e;(0,a.validateParams)(l,i.GetAccountUpgradeStatusParamsStruct);const{account:u,chainId:d}=l,p=await(0,a.validateAndNormalizeAddress)(u,c,n.getPermittedAccountsForOrigin);let g;if(d!==undefined)g=d;else{const e=n.getCurrentChainIdForDomain(c);if(!e)throw r.rpcErrors.invalidParams({message:`Could not determine current chain ID for origin: ${c}`});g=e}const{isSupported:m}=await n.isEip7702Supported({address:p,chainId:g});if(m)try{const e=g,s=n.getSelectedNetworkClientIdForChain(e);if(!s)throw r.rpcErrors.invalidParams({message:`Network client ID not found for chain ID ${g}`});const{isUpgraded:i,upgradedAddress:a}=await(async(e,t,n)=>{const r=await n(e,t);if(!r||"0x"===r||r.length<=2)return{isUpgraded:!1,upgradedAddress:null};if(!r.startsWith(o.DELEGATION_INDICATOR_PREFIX))return{isUpgraded:!1,upgradedAddress:null};const s=o.DELEGATION_INDICATOR_PREFIX.length+40;return r.length!==s?{isUpgraded:!1,upgradedAddress:null}:{isUpgraded:!0,upgradedAddress:`0x${r.slice(8,48)}`}})(p,s,n.getCode);t.result={isSupported:m,account:p,isUpgraded:i,upgradedAddress:a,chainId:g}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to get account upgrade status: ${(0,s.getErrorMessage)(e)}`})}else t.result={isSupported:m,account:p,isUpgraded:!1,upgradedAddress:null,chainId:g}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_getAccountUpgradeStatus.cjs"}],[2044,{"./types.cjs":2041,"./utils.cjs":2042,"@metamask/rpc-errors":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletUpgradeAccount=void 0;const r=e("@metamask/rpc-errors"),s=e("./types.cjs"),o=e("./utils.cjs");n.walletUpgradeAccount=async function(e,t,n){const{params:i,origin:a}=e;(0,o.validateParams)(i,s.UpgradeAccountParamsStruct);const{account:l,chainId:c}=i,u=await(0,o.validateAndNormalizeAddress)(l,a,n.getPermittedAccountsForOrigin);let d;if(c!==undefined)d=c;else{const e=n.getCurrentChainIdForDomain(a);if(!e)throw r.rpcErrors.invalidParams({message:`No network configuration found for origin: ${a}`});d=e}try{const e=d,{isSupported:s,upgradeContractAddress:o}=await n.isEip7702Supported({address:u,chainId:e});if(!s)throw r.rpcErrors.invalidParams({message:`Account upgrade not supported on chain ID ${d}`});if(!o)throw r.rpcErrors.invalidParams({message:`No upgrade contract address available for chain ID ${d}`});const i=await n.upgradeAccount(u,o,d);t.result={transactionHash:i.transactionHash,upgradedAccount:u,delegatedTo:i.delegatedTo}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to upgrade account: ${e instanceof Error?e.message:String(e)}`})}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_upgradeAccount.cjs"}],[2045,{"@ethersproject/providers":824,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"@metamask/utils":3554,"punycode/punycode.js":5556},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.EnsController=n.DEFAULT_ENS_NETWORK_MAP=void 0;const u=e("@ethersproject/providers"),d=e("@metamask/base-controller"),p=e("@metamask/controller-utils"),g=e("@metamask/utils"),m=e("punycode/punycode.js"),h=(0,g.createProjectLogger)("ens-controller");n.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const f={ensEntries:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ensResolutionsByAddress:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},C={ensEntries:{},ensResolutionsByAddress:{}};class S extends d.BaseController{constructor({registriesByChainId:e=n.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:a={},onNetworkDidChange:c}){super({name:"EnsController",metadata:f,messenger:t,state:{...C,ensEntries:Object.fromEntries(Object.entries(e).map(([e,t])=>[(0,p.toHex)(e),{".":{address:t,chainId:(0,p.toHex)(e),ensName:"."}}])),...a}}),r.add(this),s.set(this,null),l(this,r,"m",o).call(this,e),c&&c(({selectedNetworkClientId:t})=>{this.resetState(),l(this,r,"m",i).call(this,t,e)})}resetState(){this.update(e=>{e.ensResolutionsByAddress={}})}clear(){this.update(e=>{e.ensEntries={}})}delete(e,t){const n=(0,p.normalizeEnsName)(t);return!!((0,p.isSafeDynamicKey)(e)&&n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n])&&(this.update(t=>{delete t.ensEntries[e][n],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]}),!0)}get(e,t){const n=(0,p.normalizeEnsName)(t);return n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n]||null}set(e,t,n){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||n&&!(0,p.isValidHexAddress)(n))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${n}}`);const r=(0,p.normalizeEnsName)(t);if(!r)throw new Error(`Invalid ENS name: ${t}`);const s=n?(0,p.toChecksumHexAddress)(n):null,o=this.state.ensEntries[e];return(!o?.[r]||o[r].address!==s)&&(this.update(t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[r]:{address:s,chainId:e,ensName:r}}}}),!0)}async reverseResolveAddress(e){if(!l(this,s,"f"))return undefined;const t=(0,p.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let n,r;try{n=await l(this,s,"f").lookupAddress(t)}catch(e){return h(e),undefined}if(!n)return undefined;try{r=await l(this,s,"f").resolveName(n)}catch(e){return h(e),undefined}return r?"0x0000000000000000000000000000000000000000"===r||"0x"===r||(0,p.toChecksumHexAddress)(r)!==t?undefined:(this.update(e=>{e.ensResolutionsByAddress[t]=(0,m.toASCII)(n)}),n):undefined}}n.EnsController=S,s=new WeakMap,r=new WeakSet,o=function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState");l(this,r,"m",i).call(this,t,e)},i=function(e,t){const{configuration:{chainId:n},provider:o}=this.messenger.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(n,16)]&&l(this,r,"m",a).call(this,n)?c(this,s,new u.Web3Provider(o,{chainId:(0,p.convertHexToDecimal)(n),name:p.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[n],ensAddress:t[parseInt(n,16)]}),"f"):c(this,s,null,"f")},a=function(e){return Boolean(this.state.ensEntries[e])},n.default=S}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[2046,{"./EnsController.cjs":2045},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./EnsController.cjs"),n)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[2047,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;n.ErrorReportingService=class{constructor({messenger:e,captureException:t}){this.name="ErrorReportingService",this.state=null,r.set(this,void 0),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),i(this,s,"f").registerActionHandler("ErrorReportingService:captureException",i(this,r,"f").bind(this))}captureException(e){i(this,r,"f").call(this,e)}},r=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[2048,{"./error-reporting-service.cjs":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;var r=e("./error-reporting-service.cjs");Object.defineProperty(n,"ErrorReportingService",{enumerable:!0,get:function(){return r.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[205,{"@metamask/snaps-controllers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInsightsControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInsightsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInsightsController({state:t.SnapInsightsController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-insights-controller-init.ts"}],[206,{"@metamask/snaps-controllers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInterfaceControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInterfaceControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInterfaceController({state:t.SnapInterfaceController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-interface-controller-init.ts"}],[207,{"../../lib/SnapsNameProvider":266},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsNameProviderInit=void 0;var r=e("../../lib/SnapsNameProvider");n.SnapsNameProviderInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new r.SnapsNameProvider({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-name-provider-init.ts"}],[2076,{"./base-filter":2077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter");t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[2077,{"@metamask/safe-event-emitter":3028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[2078,{"./base-filter":2077,"./getBlocksForRange":2079,"./hexUtils":2080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=o(e),i=(await s({provider:this.provider,fromBlock:r,toBlock:n})).map(e=>e.hash);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[2079,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:n}){t||(t=n);const o=r(t),i=r(n),a=Array(i-o+1).fill().map((e,t)=>o+t).map(s);let l=await Promise.all(a.map(t=>async function(e,t,n){for(let r=0;r<3;r++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:n})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1])));return l=l.filter(e=>null!==e),l}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[208,{"../../lib/util":380,"@metamask/snaps-controllers":3085,semver:5987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsRegistryInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("semver"),o=e("../../lib/util");n.SnapsRegistryInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,o.getBooleanFlag)(!0),i="13.18.1",a=(0,s.parse)(i),l=a?`${a.major}.${a.minor}.${a.patch}`:i;return{controller:new r.JsonSnapsRegistry({state:t.SnapsRegistry,messenger:e,refetchOnAllowlistMiss:n,clientConfig:{type:"extension",version:l}})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-registry-init.ts"}],[2080,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function o(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return r(e)[0]},maxBlockRef:function(...e){const t=r(e);return t[t.length-1]},sortBlockRefs:r,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return o(s(e)+1)},intToHex:o,unsafeRandomBytes:function(e){let t="0x";for(let n=0;n<e;n++)t+=i(),t+=i();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[2081,{"./block-filter.js":2078,"./hexUtils":2080,"./log-filter.js":2082,"./tx-filter.js":2084,"@metamask/json-rpc-engine":2418,"async-mutex":4345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./log-filter.js"),a=e("./block-filter.js"),l=e("./tx-filter.js"),{intToHex:c,hexToInt:u}=e("./hexUtils");function d(e){return p(async(...t)=>{const n=await e(...t);return c(n.id)})}function p(e){return s(async(t,n)=>{const r=await e.apply(null,t.params);n.result=r})}function g(e,t){const n=[];for(let t in e)n.push(e[t]);return n}t.exports=function({blockTracker:e,provider:t}){let n=0,s={};const m=new r,h=function({mutex:e}){return t=>async(n,r,s,o)=>{(await e.acquire())(),t(n,r,s,o)}}({mutex:m}),f=o({eth_newFilter:h(d(S)),eth_newBlockFilter:h(d(w)),eth_newPendingTransactionFilter:h(d(I)),eth_uninstallFilter:h(p(E)),eth_getFilterChanges:h(p(b)),eth_getFilterLogs:h(p(T))}),C=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const n=await m.acquire();try{await Promise.all(g(s).map(async n=>{try{await n.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}n()};return f.newLogFilter=S,f.newBlockFilter=w,f.newPendingTransactionFilter=I,f.uninstallFilter=E,f.getFilterChanges=b,f.getFilterLogs=T,f.destroy=()=>{!async function(){const e=g(s).length;s={},A({prevFilterCount:e,newFilterCount:0})}()},f;async function S(e){const n=new i({provider:t,params:e});await k(n);return n}async function w(){const e=new a({provider:t});await k(e);return e}async function I(){const e=new l({provider:t});await k(e);return e}async function b(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);return n.getChangesAndClear()}async function T(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);let r=[];return"log"===n.type&&(r=n.getAllResults()),r}async function E(e){const t=u(e),n=s[t],r=Boolean(n);return r&&await async function(e){const t=g(s).length;delete s[e];const n=g(s).length;A({prevFilterCount:t,newFilterCount:n})}(t),r}async function k(t){const r=g(s).length,o=await e.getLatestBlock();await t.initialize({currentBlock:o}),n++,s[n]=t,t.id=n,t.idHex=c(n);return A({prevFilterCount:r,newFilterCount:g(s).length}),n}function A({prevFilterCount:t,newFilterCount:n}){0===t&&n>0?e.on("sync",C):t>0&&0===n&&e.removeListener("sync",C)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[2082,{"./base-filter-history":2076,"./hexUtils":2080,"@metamask/eth-query":2226,pify:5483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/eth-query"),s=e("pify"),o=e("./base-filter-history"),{bnToHex:i,hexToInt:a,incrementHexInt:l,minBlockRef:c,blockRefIsNumber:u}=e("./hexUtils");t.exports=class extends o{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new r(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(e=>e.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const n=c(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(r);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const n=t;let r;r=e?l(e):t;const s=Object.assign({},this.params,{fromBlock:r,toBlock:n}),o=(await this._fetchLogs(s)).filter(e=>this.matchLog(e));this.addResults(o)}async _fetchLogs(e){return await s(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber))return!1;if(u(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every((t,n)=>{let r=e.topics[n];if(!r)return!1;r=r.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map(e=>e.toLowerCase());return s.includes(r)})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[2083,{"./getBlocksForRange.js":2079,"./hexUtils.js":2080,"./index.js":2081,"@metamask/json-rpc-engine":2418,"@metamask/safe-event-emitter":3028},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./index.js"),{unsafeRandomBytes:a,incrementHexInt:l}=e("./hexUtils.js"),c=e("./getBlocksForRange.js");function u(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const n={},d=i({blockTracker:e,provider:t});let p=!1;const g=new r,m=o({eth_subscribe:s(async function(r,s){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const o=r.params[0],i=a(16);let g;switch(o){case"newHeads":g=m({subId:i});break;case"logs":const e=r.params[1];g=f({subId:i,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${o}"`)}return n[i]=g,void(s.result=i);function m({subId:n}){const r={type:o,destroy:async()=>{e.removeListener("sync",r.update)},update:async({oldBlock:e,newBlock:r})=>{const s=r,o=l(e);(await c({provider:t,fromBlock:o,toBlock:s})).map(u).filter(e=>null!==e).forEach(e=>{h(n,e)})}};return e.on("sync",r.update),r}function f({subId:e,filter:t}){t.on("update",t=>h(e,t));return{type:o,destroy:async()=>await d.uninstallFilter(t.idHex)}}}),eth_unsubscribe:s(async function(e,t){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const r=e.params[0],s=n[r];if(!s)return void(t.result=!1);delete n[r],await s.destroy(),t.result=!0})});return m.destroy=function(){g.removeAllListeners();for(const e in n)n[e].destroy(),delete n[e];p=!0},{events:g,middleware:m};function h(e,t){g.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[2084,{"./base-filter":2077,"./getBlocksForRange":2079,"./hexUtils":2080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=o(e),r=await s({provider:this.provider,fromBlock:n,toBlock:t}),i=[];for(const e of r)i.push(...e.transactions);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[209,{"@metamask/snaps-controllers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WebSocketServiceInit=void 0;var r=e("@metamask/snaps-controllers");n.WebSocketServiceInit=({controllerMessenger:e})=>({memStateKey:null,persistedStateKey:null,controller:new r.WebSocketService({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/websocket-service-init.ts"}],[21,{"../controllers/app-metadata":226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppMetadataControllerInit=void 0;var r,s=(r=e("../controllers/app-metadata"))&&r.__esModule?r:{default:r};n.AppMetadataControllerInit=({controllerMessenger:e,persistedState:t,currentMigrationVersion:n})=>({controller:new s.default({state:t.AppMetadataController,messenger:e,currentAppVersion:"13.18.1",currentMigrationVersion:n})})}}},{package:"$root$",file:"app/scripts/controller-init/app-metadata-controller-init.ts"}],[210,{"../controllers/static-assets-controller":254},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StaticAssetsControllerInit=void 0;var r=e("../controllers/static-assets-controller");function s(e){var t;const n=e.call("RemoteFeatureFlagController:getState");return null==n||null===(t=n.remoteFeatureFlags)||void 0===t?void 0:t.staticAssetsPollingOptions}n.StaticAssetsControllerInit=({controllerMessenger:e,initMessenger:t})=>({controller:new r.StaticAssetsController({messenger:e,getSupportedChains:()=>{var e;const n=null===(e=s(t))||void 0===e?void 0:e.supportedChains;return new Set(Array.isArray(n)?n:[])},getCacheExpirationTime:()=>{var e;const n=null===(e=s(t))||void 0===e?void 0:e.cacheExpirationTime;return n?Number(n):r.DEFAULT_CACHE_EXPIRATION_MS},getTopX:()=>{var e;const n=null===(e=s(t))||void 0===e?void 0:e.topX;return n?Number(n):r.DEFAULT_TOP_X}})})}}},{package:"$root$",file:"app/scripts/controller-init/static-assets-controller-init.ts"}],[211,{"../lib/stores/browser-storage-adapter":353,"@metamask/storage-service":3405},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StorageServiceInit=void 0;var r=e("@metamask/storage-service"),s=e("../lib/stores/browser-storage-adapter");n.StorageServiceInit=({controllerMessenger:e})=>({controller:new r.StorageService({messenger:e,storage:new s.BrowserStorageAdapter}),persistedStateKey:null,memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/storage-service-init.ts"}],[2119,{"./ledger-hw-app.cjs":2121,"./ledger-iframe-bridge.cjs":2122,"./ledger-keyring.cjs":2123,"./ledger-mobile-bridge.cjs":2124,"./ledger-transport-middleware.cjs":2125},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),n),s(e("./ledger-iframe-bridge.cjs"),n),s(e("./ledger-mobile-bridge.cjs"),n),s(e("./ledger-transport-middleware.cjs"),n),s(e("./ledger-hw-app.cjs"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[212,{"@metamask/permission-controller":2862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubjectMetadataControllerInit=void 0;var r=e("@metamask/permission-controller");n.SubjectMetadataControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SubjectMetadataController({state:t.SubjectMetadataController,messenger:e,subjectCacheLimit:100})})}}},{package:"$root$",file:"app/scripts/controller-init/subject-metadata-controller-init.ts"}],[2120,{"./type.cjs":2126,"@ledgerhq/hw-transport":1015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handleLedgerTransportError=function(e,t){if(e instanceof r.TransportStatusError){const t=e;throw new s.LedgerStatusError(t.statusCode,function(e){switch(e.statusCode){case 27013:return"Ledger: User rejected the transaction";case 27264:return"Ledger: Blind signing must be enabled";case 21781:return"Ledger: Device is locked. Unlock it to continue";case 25871:return"Ledger: Ethereum app closed. Open it to unlock";default:return e.message}}(t))}throw e instanceof Error?e:new Error(t)};const r=e("@ledgerhq/hw-transport"),s=e("./type.cjs")}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-error-handler.cjs"}],[2121,{"@ledgerhq/hw-app-eth":999,buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMaskLedgerHwAppEth=void 0;const s=r(e("@ledgerhq/hw-app-eth")),o=e("buffer");class i extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,o.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const n=e[t]??0;t+=1;const r=e.slice(t,t+=n).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:r,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}n.MetaMaskLedgerHwAppEth=i}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[2122,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},g=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerIframeBridge=n.IFrameMessageAction=void 0;const m=e("@metamask/utils");var h;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(h||(n.IFrameMessageAction=h={}));n.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){r.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,o.set(this,new Map),p(this,r,"m",d).call(this,e),g(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await p(this,r,"m",a).call(this,p(this,s,"f").bridgeUrl),this.eventListener=p(this,r,"m",c).bind(this,p(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return p(this,s,"f")}async setOptions(e){p(this,r,"m",d).call(this,e),p(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(p(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await p(this,r,"m",u).call(this,{action:h.LedgerMakeApp},{timeout:8e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await p(this,r,"m",u).call(this,{action:h.LedgerUpdateTransport,params:{transportType:e}},{timeout:8e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return p(this,r,"m",i).call(this,h.LedgerUnlock,e)}async deviceSignTransaction(e){return p(this,r,"m",i).call(this,h.LedgerSignTransaction,e)}async deviceSignMessage(e){return p(this,r,"m",i).call(this,h.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return p(this,r,"m",i).call(this,h.LedgerSignTypedData,e)}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=async function(...[e,t]){const n=await p(this,r,"m",u).call(this,{action:e,params:t});if("payload"in n&&n.payload){if("success"in n&&n.success)return n.payload;if("error"in n.payload)throw n.payload.error}throw new Error("Unknown error occurred")},a=async function(e){return new Promise(t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)})},l=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){const{origin:n,data:s}=t;if(n===p(this,r,"m",l).call(this,e)&&s){const e=p(this,o,"f").get(s.messageId);e?(e.resolve(s),p(this,o,"f").delete(s.messageId)):s.action===h.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},u=async function(e,{timeout:t}={}){this.currentMessageId+=1;const n={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},r=(0,m.createDeferredPromise)();if(p(this,o,"f").set(this.currentMessageId,r),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout(()=>{p(this,o,"f").has(n.messageId)&&(p(this,o,"f").delete(n.messageId),r.reject(new Error("Ledger iframe message timeout")))},t),this.iframe.contentWindow.postMessage(n,"*"),r.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[2123,{"./ledger-error-handler.cjs":2120,"@ethereumjs/rlp":683,"@ethereumjs/tx":696,"@ethereumjs/util":717,"@metamask/eth-sig-util":2228,"@metamask/utils":3554,buffer:4474,hdkey:4997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l,c,u,d,p,g,m,h,f,C=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),I=e("@ethereumjs/tx"),b=e("@ethereumjs/util"),T=e("@metamask/eth-sig-util"),E=e("@metamask/utils"),k=e("buffer"),A=S(e("hdkey")),v=e("./ledger-error-handler.cjs"),y="m",_=`${y}/44'/60'/0'`,M="Ledger Hardware";var N;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(N||(N={}));class P{constructor({bridge:e}){if(r.add(this),this.deviceId="",this.type=M,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new A.default,this.hdPath=_,this.paths={},this.network=N.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??_,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||C(this,r,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter(e=>t.has(C(this,r,"m",f).call(this,e))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new A.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return C(this,r,"m",f).call(this,(0,E.bytesToHex)((0,b.publicToAddress)(this.hdk.publicKey,!0)));const n=e?C(this,r,"m",g).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:n})}catch(e){(0,v.handleLedgerTransportError)(e,"Ledger: Unknown error while unlocking account")}return t&&s.chainCode&&(this.hdk.publicKey=k.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=k.Buffer.from(s.chainCode,"hex")),(0,E.add0x)(s.address)}async addAccounts(e){return new Promise((t,n)=>{this.unlock().then(async n=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=C(this,r,"m",d).call(this,e);let n;n=C(this,r,"m",p).call(this)?await this.unlock(t):C(this,r,"m",c).call(this,y,e),this.accountDetails[C(this,r,"m",f).call(this,n)]={bip44:C(this,r,"m",p).call(this),hdPath:t},this.accounts.includes(n)||(this.accounts=[...this.accounts,n],i.push(n)),this.page=0}t(i)}).catch(n)})}getName(){return M}async getFirstPage(){return this.page=0,C(this,r,"m",i).call(this,1)}async getNextPage(){return C(this,r,"m",i).call(this,1)}async getPreviousPage(){return C(this,r,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase());if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[C(this,r,"m",f).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let n;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),C(this,r,"m",o).call(this,e,n,e=>(t.v=k.Buffer.from(e.v,"hex"),t.r=k.Buffer.from(e.r,"hex"),t.s=k.Buffer.from(e.s,"hex"),t));const s=t.getMessageToSign();return n=Array.isArray(s)?k.Buffer.from(w.RLP.encode(s)).toString("hex"):(0,E.bytesToHex)(s),C(this,r,"m",o).call(this,e,n,e=>{const n=t.toJSON();return n.type=t.type,n.v=(0,E.add0x)(e.v),n.r=(0,E.add0x)(e.r),n.s=(0,E.add0x)(e.s),I.TransactionFactory.fromTxData(n,{common:t.common,freeze:Object.isFrozen(t)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:n,message:(0,E.remove0x)(t)})}catch(e){(0,v.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let o=parseInt(String(s.v),10).toString(16);o.length<2&&(o=`0${o}`);const i=`0x${s.r}${s.s}${o}`,a=(0,T.recoverPersonalSignature)({data:t,signature:i});if(C(this,r,"m",f).call(this,a)!==C(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=C(this,r,"m",f).call(this,e),n=this.accountDetails[t];if(!n)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=n;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,n){const{version:s}=n??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:o,types:i,primaryType:a,message:l}=T.TypedDataUtils.sanitizeData(t),c=await this.unlockAccountByAddress(e);if(!c)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:c,message:{domain:{name:o.name,chainId:o.chainId,version:o.version,verifyingContract:o.verifyingContract,salt:o.salt instanceof ArrayBuffer?k.Buffer.from(o.salt).toString("hex"):o.salt},types:i,primaryType:a.toString(),message:l}})}catch(e){(0,v.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const p=`0x${u.r}${u.s}${d}`,g=(0,T.recoverTypedSignature)({data:t,signature:p,version:T.SignTypedDataVersion.V4});if(C(this,r,"m",f).call(this,g)!==C(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return p}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new A.default}}n.LedgerKeyring=P,r=new WeakSet,s=function(e){if(C(this,r,"m",p).call(this)&&e.accountIndexes)for(const[t,n]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:C(this,r,"m",d).call(this,n)};const t=new Set(Object.keys(this.accountDetails));C(this,r,"m",p).call(this)||this.accounts.forEach(e=>{const n=C(this,r,"m",f).call(this,e);t.has(n)||(this.accountDetails[n]={bip44:!1,hdPath:C(this,r,"m",u).call(this,e)})})},o=async function(e,t,n){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,E.remove0x)(t),hdPath:r})}catch(e){(0,v.handleLedgerTransportError)(e,"Ledger: Unknown error while signing transaction")}const o=n(s);if(o.verifySignature())return o;throw new Error("Ledger: The transaction signature is not valid")},i=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage;let s;return await this.unlock(),s=C(this,r,"m",p).call(this)?await C(this,r,"m",a).call(this,t,n):C(this,r,"m",l).call(this,t,n),s},a=async function(e,t){const n=[];for(let s=e;s<t;s++){const e=C(this,r,"m",d).call(this,s),t=await this.unlock(e),o=!this.implementFullBIP44||await C(this,r,"m",m).call(this,t);if(n.push({address:t,balance:null,index:s}),!o)break}return n},l=function(e,t){const n=[];for(let s=e;s<t;s++){const e=C(this,r,"m",c).call(this,y,s);n.push({address:e,balance:null,index:s}),this.paths[C(this,r,"m",f).call(this,e)]=s}return n},c=function(e,t){const n=this.hdk.derive(`${e}/${t}`),s=(0,E.bytesToHex)((0,b.publicToAddress)(n.publicKey,!0));return C(this,r,"m",f).call(this,s)},u=function(e){const t=C(this,r,"m",f).call(this,e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===C(this,r,"m",c).call(this,y,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return C(this,r,"m",d).call(this,n)},d=function(e){return C(this,r,"m",p).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},p=function(){return"m/44'/60'/0'/0/0"===this.hdPath},g=function(e){return e.toString().replace("m/","")},m=async function(e){const t=C(this,r,"m",h).call(this),n=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await n.json();return"0"!==s.status&&s.result.length>0},h=function(){return this.network},f=function(e){return(0,E.getChecksumAddress)((0,E.add0x)(e))},P.type=M}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[2124,{"./ledger-hw-app.cjs":2121},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");n.LedgerMobileBridge=class{constructor(e,t={}){r.add(this),s.set(this,void 0),o.set(this,void 0),this.isDeviceConnected=!1,l(this,o,t,"f"),l(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await c(this,r,"m",i).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return c(this,r,"m",a).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return c(this,r,"m",a).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return c(this,r,"m",a).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await c(this,r,"m",a).call(this).getAddress(e,!1,!0)}async getOptions(){return c(this,o,"f")}async setOptions(e){l(this,o,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return c(this,r,"m",i).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await c(this,r,"m",a).call(this).openEthApp()}async closeApps(){await c(this,r,"m",a).call(this).closeApps()}async getAppNameAndVersion(){return c(this,r,"m",a).call(this).getAppNameAndVersion()}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=function(){if(c(this,s,"f"))return c(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},a=function(){return c(this,r,"m",i).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[2125,{"./ledger-hw-app.cjs":2121},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerTransportMiddleware=void 0;const i=e("./ledger-hw-app.cjs");n.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",r.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,r,e,"f")}getTransport(){if(!o(this,r,"f"))throw new Error("Instance `transport` is not initialized.");return o(this,r,"f")}getEthApp(){return new i.MetaMaskLedgerHwAppEth(this.getTransport())}},r=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[2126,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerStatusError=void 0;class r extends Error{constructor(e,t){super(t),this.statusCode=e}}n.LedgerStatusError=r}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/type.cjs"}],[213,{"./subscription-controller-init":214,"./subscription-service-init":215},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SubscriptionControllerInit",{enumerable:!0,get:function(){return r.SubscriptionControllerInit}}),Object.defineProperty(n,"SubscriptionServiceInit",{enumerable:!0,get:function(){return s.SubscriptionServiceInit}});var r=e("./subscription-controller-init"),s=e("./subscription-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/subscription/index.ts"}],[214,{"../../../../shared/modules/shield":6342,"@metamask/subscription-controller":3411},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionControllerInit=void 0;var r=e("@metamask/subscription-controller");const s=(0,e("../../../../shared/modules/shield").loadShieldConfig)();n.SubscriptionControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:o}=e,i=new r.SubscriptionService({env:s.subscriptionEnv,auth:{getAccessToken:()=>t.call("AuthenticationController:getBearerToken")}});return{controller:new r.SubscriptionController({messenger:n,state:o.SubscriptionController,subscriptionService:i})}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-controller-init.ts"}],[215,{"../../../../shared/lib/sentry":6292,"../../services/oauth/web-authenticator-factory":618,"../../services/subscription/subscription-service":619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionServiceInit=void 0;var r=e("../../services/subscription/subscription-service"),s=e("../../services/oauth/web-authenticator-factory"),o=e("../../../../shared/lib/sentry");n.SubscriptionServiceInit=e=>{const{controllerMessenger:t,platform:n}=e;return{controller:new r.SubscriptionService({messenger:t,platform:n,webAuthenticator:(0,s.webAuthenticatorFactory)(),captureException:o.captureException}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-service-init.ts"}],[216,{"../controllers/swaps":255},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SwapsControllerInit=void 0;var r,s=(r=e("../controllers/swaps"))&&r.__esModule?r:{default:r};n.SwapsControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:r})=>{const o=r("GasFeeController"),i=r("TransactionController");return{controller:new s.default({messenger:e,getBufferedGasLimit:async(e,n)=>{const r=t.call("NetworkController:getState"),{gas:s,simulationFails:o}=await i.estimateGasBuffered(e.txParams,n,r.selectedNetworkClientId);return{gasLimit:s,simulationFails:o}},getEIP1559GasFeeEstimates:(...e)=>o.fetchGasFeeEstimates(...e),getLayer1GasFee:(...e)=>i.getLayer1GasFee(...e),trackMetaMetricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")},n.SwapsController)}}}}},{package:"$root$",file:"app/scripts/controller-init/swaps-controller-init.ts"}],[217,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenBalancesControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{useMultiAccountBalanceChecker:s}=t.call("PreferencesController:getState");return{controller:new r.TokenBalancesController({messenger:e,state:n.TokenBalancesController,queryMultipleAccounts:s,interval:3e4,allowExternalServices:()=>t.call("PreferencesController:getState").useExternalServices,accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},platform:"extension",isOnboarded:()=>{const{completedOnboarding:e}=t.call("OnboardingController:getState");return e}})}}}}},{package:"$root$",file:"app/scripts/controller-init/token-balances-controller-init.ts"}],[218,{"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenDetectionControllerInit=({controllerMessenger:e,initMessenger:t})=>({memStateKey:null,persistedStateKey:null,controller:new r.TokenDetectionController({messenger:e,getBalancesInSingleCall:(...e)=>t.call("AssetsContractController:getBalancesInSingleCall",...e),trackMetaMetricsEvent:(...e)=>t.call("MetaMetricsController:trackEvent",...e),useAccountsAPI:!0,platform:"extension",useTokenDetection:()=>t.call("PreferencesController:getState").useTokenDetection,useExternalServices:()=>t.call("PreferencesController:getState").useExternalServices})})}}},{package:"$root$",file:"app/scripts/controller-init/token-detection-controller-init.ts"}],[219,{"./init-utils":60,"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("./init-utils");n.TokenListControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const o=new r.TokenListController({messenger:e,state:n.TokenListController,chainId:(0,s.getGlobalChainId)(t)});return o.initialize().catch(e=>{console.error("TokenListController: Failed to initialize from storage:",e)}),{controller:o}}}}},{package:"$root$",file:"app/scripts/controller-init/token-list-controller-init.ts"}],[22,{"../controllers/app-state-controller":227},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateControllerInit=void 0;var r=e("../controllers/app-state-controller");n.AppStateControllerInit=({controllerMessenger:e,persistedState:t,setLocked:n,extension:s})=>({controller:new r.AppStateController({messenger:e,state:t.AppStateController,onInactiveTimeout:()=>n(),extension:s})})}}},{package:"$root$",file:"app/scripts/controller-init/app-state-controller-init.ts"}],[220,{"./init-utils":60,"@metamask/assets-controllers":1394,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokensControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("@metamask/utils"),o=e("./init-utils");n.TokensControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{provider:i}=t.call("NetworkController:getSelectedNetworkClient")??{};(0,s.assert)(i,"Provider is required to initialize TokensController.");return{controller:new r.TokensController({messenger:e,state:n.TokensController,provider:i,chainId:(0,o.getGlobalChainId)(t)})}}}}},{package:"$root$",file:"app/scripts/controller-init/tokens-controller-init.ts"}],[221,{"@metamask/transaction-pay-controller":3506},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionPayControllerInit=void 0;var r=e("@metamask/transaction-pay-controller");function s(e){return r.TransactionPayStrategy.Relay}n.TransactionPayControllerInit=e=>{const{controllerMessenger:t,persistedState:n}=e,o=new r.TransactionPayController({getDelegationTransaction:async()=>{throw new Error("Delegation transaction not supported")},getStrategy:s,messenger:t,state:n.TransactionPayController}),i=function(e){return{setTransactionPayIsMaxAmount:e.setIsMaxAmount.bind(e),updateTransactionPaymentToken:e.updatePaymentToken.bind(e)}}(o);return{controller:o,api:i}}}}},{package:"$root$",file:"app/scripts/controller-init/transaction-pay-controller-init.ts"}],[222,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){}}},{package:"$root$",file:"app/scripts/controller-init/types.ts"}],[223,{"./messengers":109,"./types":222,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.initControllers=function({baseControllerMessenger:e,existingControllers:t=[],initFunctions:n,initRequest:r}){o("Initializing controllers",Object.keys(n).length);const i=t.reduce((e,t)=>(e[t.name]=t,e),{}),a={},l={};let c={};const u=e=>function(e,t){const n=e[t];if(!n)throw new Error(`Controller requested before it was initialized: ${String(t)}`);return n}(i,e);for(const[t,d]of Object.entries(n)){const n=t,p=d,g=s.CONTROLLER_MESSENGERS[n],m=null==g?void 0:g.getMessenger,h=null==g?void 0:g.getInitMessenger,f={...r,controllerMessenger:null==m?void 0:m(e),getController:u,initMessenger:null==h?void 0:h(e)},C=p({...f,controllerMessenger:f.controllerMessenger}),{controller:S,persistedStateKey:w,memStateKey:I}=C,b=C.api??{},T=null===w?undefined:w??n,E=null===I?undefined:I??n;i[n]=S,c={...c,...b},T&&(a[T]=S),E&&(l[E]=S),o("Initialized controller",n,{api:Object.keys(b),persistedStateKey:T,memStateKey:E})}return{controllerApi:c,controllerMemState:l,controllerPersistedState:a,controllersByName:i}};var r=e("@metamask/utils"),s=(e("./types"),e("./messengers"));const o=(0,r.createProjectLogger)("controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/utils.ts"}],[224,{"@metamask/base-controller":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderController=void 0;var r=e("@metamask/base-controller");const s={pinnedAccountList:[],hiddenAccountList:[]},o={pinnedAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hiddenAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class i extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:o,name:"AccountOrderController",state:{...s,...t}})}updateAccountsList(e){this.update(t=>(t.pinnedAccountList=e,t))}updateHiddenAccountsList(e){this.update(t=>(t.hiddenAccountList=e,t))}}n.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[225,{"../../../shared/constants/alerts":6173,"@metamask/base-controller":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAlertControllerState=n.AlertController=void 0;var r=e("@metamask/base-controller"),s=e("../../../shared/constants/alerts");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,n){return e.set(a(e,t),n),n}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const l=()=>({alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce((e,t)=>(e[t]=!0,e),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}});n.getDefaultAlertControllerState=l;const c={alertEnabledness:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},unconnectedAccountAlertShownOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},web3ShimUsageOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};var u=new WeakMap,d=new WeakSet;class p extends r.BaseController{constructor(e){var t,n;super({messenger:e.messenger,metadata:c,name:"AlertController",state:{...l(),...e.state}}),o(t=this,n=d),n.add(t),function(e,t,n){o(e,t),t.set(e,n)}(this,u,void 0),i(u,this,this.messenger.call("AccountsController:getSelectedAccount").address),this.messenger.subscribe("AccountsController:selectedAccountChange",e=>{this.state.unconnectedAccountAlertShownOrigins&&function(e,t){return e.get(a(e,t))}(u,this)!==e.address&&(i(u,this,e.address),this.update(e=>{e.unconnectedAccountAlertShownOrigins={}}))})}setAlertEnabledness(e,t){this.update(n=>{n.alertEnabledness[e]=t})}setUnconnectedAccountAlertShown(e){this.update(t=>{t.unconnectedAccountAlertShownOrigins[e]=!0})}getWeb3ShimUsageState(e){var t;return null===(t=this.state.web3ShimUsageOrigins)||void 0===t?void 0:t[e]}setWeb3ShimUsageRecorded(e){a(d,this,g).call(this,e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){a(d,this,g).call(this,e,s.Web3ShimUsageAlertStates.dismissed)}}function g(e,t){this.update(n=>{n.web3ShimUsageOrigins&&(n.web3ShimUsageOrigins[e]=t)})}n.AlertController=p}}},{package:"$root$",file:"app/scripts/controllers/alert-controller.ts"}],[226,{"@metamask/base-controller":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAppMetadataControllerState=n.default=void 0;var r=e("@metamask/base-controller");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const i=()=>({currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0,firstTimeInfo:undefined});n.getDefaultAppMetadataControllerState=i;const a={currentAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},currentMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},firstTimeInfo:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1}};var l=new WeakSet;class c extends r.BaseController{constructor({state:e={},messenger:t,currentAppVersion:n="",currentMigrationVersion:r=0}){super({name:"AppMetadataController",metadata:a,state:{...i(),...e},messenger:t}),s(this,l),o(l,this,u).call(this,n),o(l,this,d).call(this,r)}maybeRecordFirstTimeInfo(e){this.state.firstTimeInfo||this.update(t=>{t.firstTimeInfo={version:e,date:Date.now()}})}}function u(e){const t=this.state.currentAppVersion;e!==t&&this.update(n=>{n.currentAppVersion=e,n.previousAppVersion=t})}function d(e){const t=this.state.currentMigrationVersion;e!==t&&this.update(n=>{n.previousMigrationVersion=t,n.currentMigrationVersion=e})}n.default=c}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[227,{"../../../shared/constants/alarms":6172,"../../../shared/constants/app":6175,"../../../shared/constants/preferences":6199,"../../../shared/constants/time":6211,"../../../shared/modules/mv3.utils":6327,"../../../ui/helpers/utils/build-types":7484,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"@metamask/utils":3554,loglevel:5247,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateController=void 0;var r,s=e("uuid"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/controller-utils"),a=e("@metamask/base-controller"),l=e("@metamask/utils"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),p=e("../../../ui/helpers/utils/build-types"),g=e("../../../shared/constants/app"),m=e("../../../shared/constants/preferences");function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){C(e,t),t.set(e,n)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(e,t){return e.get(I(e,t))}function w(e,t,n){return e.set(I(e,t),n),n}function I(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const b={activeQrCodeScanRequest:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},addressSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},appActiveTab:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},browserEnvironment:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},connectedStatusPopoverHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},currentExtensionPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},currentPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},defaultHomeActiveTabName:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulations:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulationsForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippage:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippageForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},fullScreenGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},hadAdvancedGasFeesSetPriorToMigration92_3:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},canTrackWalletFundsObtained:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},isRampCardClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isUpdateAvailable:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},lastInteractedConfirmationInfo:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedFromVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastViewedUserSurvey:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networkConnectionBanner:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},newPrivacyPolicyToastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},newPrivacyPolicyToastShownDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pna25Acknowledged:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},nftsDetectionNoticeDismissed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},nftsDropdownState:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},notificationGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},onboardingDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},outdatedBrowserWarningLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},popupGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},sidePanelGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},productTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showAccountBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showBetaHeader:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showDownloadMobileAppSlide:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showNetworkBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showPermissionsTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showTestnetMessageInDropdown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},signatureSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},slides:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},snapsInstallPrivacyWarningShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},surveyLinkLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldEndingToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldPausedToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},termsOfUseLastAgreed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},throttledOrigins:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},timeoutMinutes:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},trezorModel:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},updateModalLastDismissedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hasShownMultichainAccountsIntroModal:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},showShieldEntryModalOnce:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohort:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohortTxType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isWalletResetInProgress:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},defaultSubscriptionPaymentOptions:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},shieldSubscriptionMetricsProps:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dappSwapComparisonData:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},showStorageErrorToast:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0}};var T=new WeakMap,E=new WeakMap,k=new WeakMap,A=new WeakMap,v=new WeakMap,y=new WeakSet;class _ extends a.BaseController{constructor({state:e={},messenger:t,onInactiveTimeout:n,extension:r}){super({name:"AppStateController",metadata:b,state:{activeQrCodeScanRequest:null,appActiveTab:undefined,browserEnvironment:{},connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,enableEnforcedSimulations:!0,enableEnforcedSimulationsForTransactions:{},enforcedSimulationsSlippage:10,enforcedSimulationsSlippageForTransactions:{},fullScreenGasPollTokens:[],hadAdvancedGasFeesSetPriorToMigration92_3:!1,canTrackWalletFundsObtained:!0,isRampCardClosed:!1,isUpdateAvailable:!1,lastUpdatedAt:null,lastUpdatedFromVersion:null,lastViewedUserSurvey:null,newPrivacyPolicyToastClickedOrClosed:null,newPrivacyPolicyToastShownDate:null,pna25Acknowledged:!1,nftsDetectionNoticeDismissed:!1,notificationGasPollTokens:[],onboardingDate:null,outdatedBrowserWarningLastShown:null,popupGasPollTokens:[],sidePanelGasPollTokens:[],productTour:"accountIcon",recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),showAccountBanner:!0,showBetaHeader:(0,p.isBeta)(),showDownloadMobileAppSlide:!0,showNetworkBanner:!0,showPermissionsTour:!0,showTestnetMessageInDropdown:!0,slides:[],surveyLinkLastClickedOrClosed:null,shieldEndingToastLastClickedOrClosed:null,shieldPausedToastLastClickedOrClosed:null,throttledOrigins:{},timeoutMinutes:m.DEFAULT_AUTO_LOCK_TIME_LIMIT,trezorModel:null,updateModalLastDismissedAt:null,hasShownMultichainAccountsIntroModal:!1,showShieldEntryModalOnce:null,pendingShieldCohort:null,pendingShieldCohortTxType:null,isWalletResetInProgress:!1,dappSwapComparisonData:{},showStorageErrorToast:!1,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"},...e,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"}},messenger:t}),function(e,t){C(e,t),t.add(e)}(this,y),f(this,T,void 0),f(this,E,void 0),f(this,k,void 0),h(this,"waitingForUnlock",void 0),f(this,A,void 0),f(this,v,null),h(this,"getAddressSecurityAlertResponse",e=>{const t=this.state.addressSecurityAlertResponses[e];if(!t)return undefined;const n=Date.now(),r=15*c.MINUTE;if(n-t.timestamp>r)return this.update(t=>{delete t.addressSecurityAlertResponses[e]}),undefined;const{timestamp:s,...o}=t;return o}),h(this,"addAddressSecurityAlertResponse",(e,t)=>{this.update(n=>{n.addressSecurityAlertResponses[e]={...t,timestamp:Date.now()}})}),w(T,this,r),w(E,this,n||(()=>undefined)),w(k,this,null),this.waitingForUnlock=[],t.subscribe("KeyringController:unlock",I(y,this,N).bind(this)),t.subscribe("PreferencesController:stateChange",({preferences:e})=>{const t=this.state;"number"==typeof(null==e?void 0:e.autoLockTimeLimit)&&t.timeoutMinutes!==e.autoLockTimeLimit&&I(y,this,P).call(this,e.autoLockTimeLimit)});const{preferences:s}=t.call("PreferencesController:getState");"number"==typeof s.autoLockTimeLimit&&I(y,this,P).call(this,s.autoLockTimeLimit),this.messenger.registerActionHandler("AppStateController:getUnlockPromise",this.getUnlockPromise.bind(this)),this.messenger.registerActionHandler("AppStateController:requestQrCodeScan",I(y,this,j).bind(this)),this.messenger.registerActionHandler("AppStateController:setCanTrackWalletFundsObtained",this.setCanTrackWalletFundsObtained.bind(this)),this.messenger.registerActionHandler("AppStateController:setPendingShieldCohort",this.setPendingShieldCohort.bind(this)),w(A,this,null)}getUnlockPromise(e){return new Promise(t=>{const{isUnlocked:n}=this.messenger.call("KeyringController:getState");n?t():I(y,this,M).call(this,t,e)})}setDefaultHomeActiveTabName(e){this.update(t=>{t.defaultHomeActiveTabName=e})}setConnectedStatusPopoverHasBeenShown(){this.update(e=>{e.connectedStatusPopoverHasBeenShown=!0})}setRecoveryPhraseReminderHasBeenShown(){this.update(e=>{e.recoveryPhraseReminderHasBeenShown=!0})}setSurveyLinkLastClickedOrClosed(e){this.update(t=>{t.surveyLinkLastClickedOrClosed=e})}setOnboardingDate(){this.update(e=>{e.onboardingDate=Date.now()})}setLastViewedUserSurvey(e){this.update(t=>{t.lastViewedUserSurvey=e})}setRampCardClosed(){this.update(e=>{e.isRampCardClosed=!0})}setNewPrivacyPolicyToastClickedOrClosed(){this.update(e=>{e.newPrivacyPolicyToastClickedOrClosed=!0})}setNewPrivacyPolicyToastShownDate(e){this.update(t=>{t.newPrivacyPolicyToastShownDate=e})}setPna25Acknowledged(e,t=!1){this.update(t=>{t.pna25Acknowledged=e}),t&&e&&this.messenger.call("ProfileMetricsController:skipInitialDelay")}setShieldPausedToastLastClickedOrClosed(e){this.update(t=>{t.shieldPausedToastLastClickedOrClosed=e})}setShieldEndingToastLastClickedOrClosed(e){this.update(t=>{t.shieldEndingToastLastClickedOrClosed=e})}setShowStorageErrorToast(e){this.update(t=>{t.showStorageErrorToast=e})}updateSlides(e){this.update(t=>{const n=t.slides||[],r=e.map(e=>{const t=n.find(t=>t.id===e.id);return t?{...t,...e}:e});t.slides=[...r]})}removeSlide(e){this.update(t=>{const n=t.slides||[];t.slides=n.map(t=>t.id===e?{...t,dismissed:!0}:t),e===g.DOWNLOAD_MOBILE_APP_SLIDE_ID&&(t.showDownloadMobileAppSlide=!1)})}setRecoveryPhraseReminderLastShown(e){this.update(t=>{t.recoveryPhraseReminderLastShown=e})}setTermsOfUseLastAgreed(e){this.update(t=>{t.termsOfUseLastAgreed=e})}setSnapsInstallPrivacyWarningShownStatus(e){this.update(t=>{t.snapsInstallPrivacyWarningShown=e})}setOutdatedBrowserWarningLastShown(e){this.update(t=>{t.outdatedBrowserWarningLastShown=e})}setLastActiveTime(){I(y,this,R).call(this)}setIsUpdateAvailable(e){this.update(t=>{t.isUpdateAvailable=e})}setUpdateModalLastDismissedAt(e){this.update(t=>{t.updateModalLastDismissedAt=e})}setLastUpdatedAt(e){this.update(t=>{t.lastUpdatedAt=e})}setLastUpdatedFromVersion(e){this.update(t=>{t.lastUpdatedFromVersion=e})}setBrowserEnvironment(e,t){this.update(n=>{n.browserEnvironment={os:e,browser:t}})}addPollingToken(e,t){t.toString()!==g.POLLING_TOKEN_ENVIRONMENT_TYPES[g.ENVIRONMENT_TYPE_BACKGROUND]&&I(y,this,D).call(this,t)&&I(y,this,O).call(this,e,t)}removePollingToken(e,t){if(t.toString()!==g.POLLING_TOKEN_ENVIRONMENT_TYPES[g.ENVIRONMENT_TYPE_BACKGROUND]){const n=this.state[t];I(y,this,D).call(this,t)&&this.update(r=>{r[t]=n.filter(t=>t!==e)})}}clearPollingTokens(){this.update(e=>{e.popupGasPollTokens=[],e.notificationGasPollTokens=[],e.fullScreenGasPollTokens=[],e.sidePanelGasPollTokens=[]})}setShowTestnetMessageInDropdown(e){this.update(t=>{t.showTestnetMessageInDropdown=e})}setShowBetaHeader(e){this.update(t=>{t.showBetaHeader=e})}setShowPermissionsTour(e){this.update(t=>{t.showPermissionsTour=e})}setHasShownMultichainAccountsIntroModal(e){this.update(t=>{t.hasShownMultichainAccountsIntroModal=e})}setProductTour(e){this.update(t=>{t.productTour=e})}setShowNetworkBanner(e){this.update(t=>{t.showNetworkBanner=e})}updateNetworkConnectionBanner(e){this.update(t=>{t.networkConnectionBanner=e})}setShowAccountBanner(e){this.update(t=>{t.showAccountBanner=e})}setCurrentExtensionPopupId(e){this.update(t=>{t.currentExtensionPopupId=e})}setTrezorModel(e){this.update(t=>{t.trezorModel=e})}updateNftDropDownState(e){this.update(t=>{t.nftsDropdownState=e})}getSignatureSecurityAlertResponse(e){return this.state.signatureSecurityAlertResponses[e]}addSignatureSecurityAlertResponse(e){e.securityAlertId&&this.update(t=>{t.signatureSecurityAlertResponses[String(e.securityAlertId)]=e})}setCurrentPopupId(e){this.update(t=>{t.currentPopupId=e})}getLastInteractedConfirmationInfo(){return this.state.lastInteractedConfirmationInfo}setLastInteractedConfirmationInfo(e){this.update(t=>{t.lastInteractedConfirmationInfo=e})}getCurrentPopupId(){return this.state.currentPopupId}getThrottledOriginState(e){return this.state.throttledOrigins[e]}updateThrottledOriginState(e,t){this.update(n=>{n.throttledOrigins[e]=t})}completeQrCodeScan(e){if(!S(v,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),S(v,this).resolve(e),w(v,this,null)}cancelQrCodeScan(e){if(!S(v,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),S(v,this).reject(e||new Error("Scan cancelled")),w(v,this,null)}setEnableEnforcedSimulations(e){this.update(t=>{t.enableEnforcedSimulations=e})}setEnableEnforcedSimulationsForTransaction(e,t){this.update(n=>{n.enableEnforcedSimulationsForTransactions[e]=t})}setEnforcedSimulationsSlippage(e){this.update(t=>{t.enforcedSimulationsSlippage=e})}setEnforcedSimulationsSlippageForTransaction(e,t){this.update(n=>{n.enforcedSimulationsSlippageForTransactions[e]=t})}setAppActiveTab(e){this.update(t=>{t.appActiveTab=e})}clearAppActiveTab(){this.update(e=>{e.appActiveTab=undefined})}setShowShieldEntryModalOnce(e){this.update(t=>{t.showShieldEntryModalOnce=e})}setPendingShieldCohort(e,t){this.update(n=>{n.pendingShieldCohort=e,t!==undefined&&(n.pendingShieldCohortTxType=t)})}setCanTrackWalletFundsObtained(e){this.update(t=>{t.canTrackWalletFundsObtained=e})}setIsWalletResetInProgress(e){this.update(t=>{t.isWalletResetInProgress=e})}getIsWalletResetInProgress(){return this.state.isWalletResetInProgress}setDefaultSubscriptionPaymentOptions(e){this.update(t=>{t.defaultSubscriptionPaymentOptions=e})}setShieldSubscriptionMetricsProps(e){this.update(t=>{t.shieldSubscriptionMetricsProps=e})}deleteDappSwapComparisonData(e){this.update(t=>{var n;null===(n=t.dappSwapComparisonData)||void 0===n||delete n[e],t.dappSwapComparisonData={...t.dappSwapComparisonData}})}setDappSwapComparisonData(e,t){this.update(n=>{var r;n.dappSwapComparisonData={...n.dappSwapComparisonData,[e]:{...(null===(r=n.dappSwapComparisonData)||void 0===r?void 0:r[e])??{},...t}}})}getDappSwapComparisonData(e){var t;return(null===(t=this.state.dappSwapComparisonData)||void 0===t?void 0:t[e])??undefined}}function M(e,t){this.waitingForUnlock.push({resolve:e}),this.messenger.publish("AppStateController:unlockChange"),t&&I(y,this,B).call(this)}function N(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;){var e;null===(e=this.waitingForUnlock.shift())||void 0===e||e.resolve()}this.messenger.publish("AppStateController:unlockChange")}I(y,this,L).call(this)}function P(e){this.update(t=>{t.timeoutMinutes=e}),I(y,this,R).call(this)}function R(){const{timeoutMinutes:e}=this.state;if(S(k,this)?clearTimeout(S(k,this)):d.isManifestV3&&S(T,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),!e)return;const t=Number(e);d.isManifestV3?(S(T,this).alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:t,periodInMinutes:t}),S(T,this).alarms.onAlarm.addListener(e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(S(E,this).call(this),S(T,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))})):w(k,this,setTimeout(()=>S(E,this).call(this),t*c.MINUTE))}function O(e,t){this.update(n=>{n[t].push(e)})}function D(e){return["popupGasPollTokens","notificationGasPollTokens","fullScreenGasPollTokens","sidePanelGasPollTokens"].includes(e)}function B(){S(A,this)||(w(A,this,(0,s.v4)()),this.messenger.call("ApprovalController:addRequest",{id:S(A,this),origin:g.ORIGIN_METAMASK,type:i.ApprovalType.Unlock},!0).catch(()=>{w(A,this,null)}))}function L(){if(S(A,this)){try{this.messenger.call("ApprovalController:acceptRequest",S(A,this))}catch(e){o.default.error("Failed to unlock approval request",e)}w(A,this,null)}}function j(e){if(S(v,this))return S(v,this).promise;const t=(0,l.createDeferredPromise)();return w(v,this,t),this.update(t=>{t.activeQrCodeScanRequest=e}),t.promise}n.AppStateController=_}}},{package:"$root$",file:"app/scripts/controllers/app-state-controller.ts"}],[228,{"@metamask/connectivity-controller":1633},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExtensionConnectivityAdapter=void 0;var r=e("@metamask/connectivity-controller");function s(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function o(e,t,n){return e.set(a(e,t),n),n}function i(e,t){return e.get(a(e,t))}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,c=new WeakMap;n.ExtensionConnectivityAdapter=class{constructor(){s(this,l,r.CONNECTIVITY_STATUSES.Online),s(this,c,[])}getStatus(){return i(l,this)}onConnectivityChange(e){i(c,this).push(e)}setStatus(e){o(l,this,e);for(const t of i(c,this))t(e)}destroy(){o(c,this,[])}}}}},{package:"$root$",file:"app/scripts/controllers/connectivity/extension-connectivity-adapter.ts"}],[229,{"./extension-connectivity-adapter":228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ExtensionConnectivityAdapter",{enumerable:!0,get:function(){return r.ExtensionConnectivityAdapter}});var r=e("./extension-connectivity-adapter")}}},{package:"$root$",file:"app/scripts/controllers/connectivity/index.ts"}],[23,{"../init-utils":60,"@metamask/assets-controllers":1394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("../init-utils");n.AssetsContractControllerInit=({controllerMessenger:e,initMessenger:t})=>({controller:new r.AssetsContractController({messenger:e,chainId:(0,s.getGlobalChainId)(t)}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/assets/assets-contract-controller-init.ts"}]],[],{});