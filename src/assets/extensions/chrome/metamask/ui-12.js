LavaPack.loadBundle([[7524,{"../../../shared/constants/bridge":6176,"../../../shared/constants/common":6177,"../../../shared/constants/multichain/networks":6193,"@metamask/bridge-controller":1527,"@metamask/transaction-controller":3473},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcTxMeta:t,nonEvmTransaction:n}){var u,l,d,m,h,p;if(!((null==t?void 0:t.type)&&[s.TransactionType.bridge,s.TransactionType.swap].includes(t.type)||n))return{srcNetwork:undefined,destNetwork:undefined};const{srcChainId:f,destChainId:g}=e?c(e):{srcChainId:(null==t?void 0:t.chainId)??(null==n?void 0:n.chain),destChainId:(null==t?void 0:t.chainId)??(null==n?void 0:n.chain)};if(!f||!g)return{srcNetwork:undefined,destNetwork:undefined};let k,S,y,v;try{k=(0,r.formatChainIdToCaip)(f),y=(0,r.getNativeAssetForChainId)(f),S=(0,r.formatChainIdToCaip)(g),v=(0,r.getNativeAssetForChainId)(g)}catch(e){return console.warn("Error getting XChain swaps network info",e),{srcNetwork:undefined,destNetwork:undefined}}const b=(0,r.isNonEvmChainId)(f)?k:(0,r.formatChainIdToHex)(f),T={chainId:k,name:a.NETWORK_TO_SHORT_NETWORK_NAME_MAP[b],...(0,r.isNonEvmChainId)(k)?{isEvm:!1,nativeCurrency:null===(u=y)||void 0===u?void 0:u.assetId,blockExplorerUrl:null===(l=i.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[k])||void 0===l?void 0:l.url}:{defaultBlockExplorerUrlIndex:0,blockExplorerUrls:[o.CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[b]],defaultRpcEndpointIndex:0,rpcEndpoints:[],nativeCurrency:null===(d=y)||void 0===d?void 0:d.symbol,isEvm:!0}},w=(0,r.isNonEvmChainId)(g)?S:(0,r.formatChainIdToHex)(g),C={chainId:S,name:a.NETWORK_TO_SHORT_NETWORK_NAME_MAP[w],...(0,r.isNonEvmChainId)(S)?{isEvm:!1,nativeCurrency:null===(m=v)||void 0===m?void 0:m.assetId,blockExplorerUrl:null===(h=i.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[S])||void 0===h?void 0:h.url}:{defaultBlockExplorerUrlIndex:0,blockExplorerUrls:[o.CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[w]],defaultRpcEndpointIndex:0,rpcEndpoints:[],nativeCurrency:null===(p=v)||void 0===p?void 0:p.symbol,isEvm:!0}};return{srcNetwork:T,destNetwork:C}};var s=e("@metamask/transaction-controller"),r=e("@metamask/bridge-controller"),o=e("../../../shared/constants/common"),a=e("../../../shared/constants/bridge"),i=e("../../../shared/constants/multichain/networks");const c=({quote:e})=>{const{srcChainId:t,destChainId:n}=e;return{srcChainId:t,destChainId:n}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeChainInfo.ts"}],[7525,{"../../ducks/bridge/bridge":7437,"../../ducks/bridge/selectors":7438,"../../ducks/bridge/utils":7439,"../../ducks/metamask/metamask":7448,"../../selectors":8577,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeExchangeRates=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../ducks/bridge/selectors"),i=e("../../selectors"),c=e("../../ducks/metamask/metamask"),u=e("../../ducks/bridge/bridge"),l=e("../../ducks/bridge/utils");n.useBridgeExchangeRates=()=>{const e=(0,s.c)(12),t=(0,o.useDispatch)(),n=(0,o.useSelector)(c.getCurrentCurrency),d=(0,o.useSelector)(a.getFromToken),m=(0,o.useSelector)(i.getMarketData);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=new AbortController,e[0]=h):h=e[0];const p=(0,r.useRef)(h);let f;e[1]!==d||e[2]!==m?(f=d?(0,l.exchangeRateFromMarketData)(d.assetId,m):undefined,e[1]=d,e[2]=m,e[3]=f):f=e[3];const g=f;let k,S,y,v;e[4]===Symbol.for("react.memo_cache_sentinel")?(k=()=>()=>{var e;null===(e=p.current)||void 0===e||e.abort(),p.current=null},S=[],e[4]=k,e[5]=S):(k=e[4],S=e[5]),(0,r.useEffect)(k,S),e[6]!==g||e[7]!==n||e[8]!==t||e[9]!==d?(y=()=>{var e;null===(e=p.current)||void 0===e||e.abort(),p.current=new AbortController,d&&!g&&t((0,u.setSrcTokenExchangeRates)({assetId:d.assetId,currency:n,signal:p.current.signal}))},v=[n,t,d,g],e[6]=g,e[7]=n,e[8]=t,e[9]=d,e[10]=y,e[11]=v):(y=e[10],v=e[11]),(0,r.useEffect)(y,v)}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeExchangeRates.ts"}],[7526,{"../../../shared/lib/asset-utils":6224,"../../../shared/lib/deep-links/routes/swap":6246,"../../../shared/lib/transactions-controller-utils":6301,"../../ducks/bridge/actions":7435,"../../ducks/bridge/selectors":7438,"../../selectors/multichain":8586,"@metamask/utils":3554,react:5657,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeQueryParams=void 0;var s=e("react"),r=e("react-redux"),o=e("react-router-dom"),a=e("@metamask/utils"),i=e("../../../shared/lib/asset-utils"),c=e("../../../shared/lib/deep-links/routes/swap"),u=e("../../../shared/lib/transactions-controller-utils"),l=e("../../ducks/bridge/actions"),d=e("../../ducks/bridge/selectors"),m=e("../../selectors/multichain");const h=e=>{if(!e)return null;try{const t=a.CaipAssetTypeStruct.create(e),{chainId:n,assetReference:s}=(0,a.parseCaipAssetType)(t);return{chainId:n,assetReference:s,assetId:t}}catch{return null}};n.useBridgeQueryParams=()=>{const e=(0,r.useDispatch)(),t=(0,r.useSelector)(d.getFromToken),n=(0,s.useRef)(new AbortController),a=(0,r.useSelector)(m.getMultichainCurrentChainId),{search:p,pathname:f,state:g}=(0,o.useLocation)(),k=(0,o.useNavigate)(),S=(0,s.useMemo)(()=>new URLSearchParams(p),[p]),y=(0,s.useCallback)(e=>{const t=new URLSearchParams(p);e.forEach(e=>{t.get(e)&&t.delete(e)}),k({pathname:f,search:t.toString()},{replace:!0})},[p,f,k]),[v,b]=(0,s.useState)(null),[T,w]=(0,s.useState)(null),[C,A]=(0,s.useState)(null);(0,s.useEffect)(()=>()=>{n.current.abort()},[]);const[I,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=h(S.get(c.BridgeQueryParams.FROM)),t=h(S.get(c.BridgeQueryParams.TO)),s=S.get(c.BridgeQueryParams.AMOUNT);(e||t||s)&&(w(t),b(e),s&&A(s),y([c.BridgeQueryParams.FROM,c.BridgeQueryParams.TO,c.BridgeQueryParams.AMOUNT]),(null!=t&&t.assetId||null!=e&&e.assetId)&&(n.current.abort(),n.current=new AbortController,(async(e,t,n)=>{const s=[];if(t&&s.push(t),n&&s.push(n),0===s.length)return null;try{return await(0,i.fetchAssetMetadataForAssetIds)(s,e)}catch{return null}})(n.current.signal,null==e?void 0:e.assetId,null==t?void 0:t.assetId).then(e=>{E(e)})))},[S]);const _=(0,s.useCallback)(async t=>{e((0,l.setToToken)(t)),w(null)},[]);(0,s.useEffect)(()=>{if(!v||!I)return;const t=(null==I?void 0:I[v.assetId])??(null==I?void 0:I[v.assetId.toLowerCase()]);t&&e((0,l.setFromToken)(t))},[I,v]),(0,s.useEffect)(()=>{if(!T)return;const e=(null==I?void 0:I[T.assetId])??(null==I?void 0:I[T.assetId.toLowerCase()]);e&&_(e)},[T,I]),(0,s.useEffect)(()=>{var n;v&&t&&I&&(null===(n=t.assetId)||void 0===n?void 0:n.toLowerCase())===v.assetId.toLowerCase()&&(b(null),C&&(e((0,l.setFromTokenInputValue)((0,u.calcTokenAmount)(C,t.decimals).toFixed(t.decimals))),A(null)))},[C,v,I,t]),(0,s.useEffect)(()=>{null!=t&&t.assetId&&e((0,l.setEvmBalances)(t.assetId))},[t,null==t?void 0:t.assetId,a]),(0,s.useEffect)(()=>{null!=g&&g.srcToken&&e((0,l.setFromToken)(g.srcToken))},[null==g?void 0:g.srcToken])}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeQueryParams.ts"}],[7527,{"../../../shared/lib/bridge-status/utils":6225,"../../ducks/bridge-status/selectors":7434,"../../helpers/constants/routes":7465,"@metamask/bridge-controller":1527,"@metamask/transaction-controller":3473,"react-compiler-runtime":5571,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FINAL_NON_CONFIRMED_STATUSES=void 0,n.useBridgeTxHistoryData=function(e){const t=(0,s.c)(15),{transactionGroup:n,isEarliestNonce:o}=e,m=(0,a.useNavigate)(),h=n.initialTransaction,p=h.id;let f;t[0]!==p?(f=e=>(0,l.selectBridgeHistoryItemForTxMetaId)(e,p),t[0]=p,t[1]=f):f=t[1];const g=(0,r.useSelector)(f),k=g?(null==g?void 0:g.status.status)===i.StatusTypes.FAILED:null;let S;t[2]!==o||t[3]!==m||t[4]!==p||t[5]!==n||t[6]!==h.status?(S=d.includes(h.status)?undefined:()=>{m(`${u.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE}/${p}`,{state:{transactionGroup:n,isEarliestNonce:o}})},t[2]=o,t[3]=m,t[4]=p,t[5]=n,t[6]=h.status,t[7]=S):S=t[7];const y=S;let v,b;t[8]!==g?(v=g?(0,c.isBridgeComplete)(g):null,t[8]=g,t[9]=v):v=t[9];t[10]!==g||t[11]!==k||t[12]!==y||t[13]!==v?(b={bridgeTxHistoryItem:g,isBridgeComplete:v,isBridgeFailed:k,showBridgeTxDetails:y},t[10]=g,t[11]=k,t[12]=y,t[13]=v,t[14]=b):b=t[14];return b};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("react-router-dom"),i=e("@metamask/bridge-controller"),c=e("../../../shared/lib/bridge-status/utils"),u=e("../../helpers/constants/routes"),l=e("../../ducks/bridge-status/selectors");const d=n.FINAL_NON_CONFIRMED_STATUSES=[o.TransactionStatus.failed,o.TransactionStatus.dropped,o.TransactionStatus.rejected]}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeTxHistoryData.ts"}],[7528,{"../../../shared/constants/bridge":6176,"../../../shared/constants/metametrics":6190,"../../../shared/lib/asset-utils":6224,"../../../shared/lib/deep-links/routes/swap":6246,"../../../shared/lib/trace":6299,"../../ducks/bridge/actions":7435,"../../ducks/bridge/selectors":7438,"../../helpers/constants/routes":7465,"../../pages/bridge/utils/cache":7733,"../../pages/bridge/utils/tokens":7738,"@metamask/bridge-controller":1527,"@metamask/utils":3554,react:5657,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),r=e("react-redux"),o=e("react-router-dom"),a=e("@metamask/bridge-controller"),i=e("@metamask/utils"),c=e("../../../shared/constants/metametrics"),u=e("../../../shared/lib/deep-links/routes/swap"),l=e("../../../shared/lib/trace"),d=e("../../../shared/lib/asset-utils"),m=e("../../../shared/constants/bridge"),h=e("../../ducks/bridge/selectors"),p=e("../../ducks/bridge/actions"),f=e("../../helpers/constants/routes"),g=e("../../pages/bridge/utils/tokens"),k=e("../../pages/bridge/utils/cache");n.default=()=>{const e=(0,o.useNavigate)(),t=(0,r.useDispatch)(),n=(0,r.useSelector)(h.getLastSelectedChainId),S=(0,r.useSelector)(h.getFromChain),y=(0,r.useSelector)(h.getFromChains),v=(0,r.useSelector)(h.getBip44DefaultPairsConfig),b=(0,s.useCallback)(e=>m.ALL_ALLOWED_BRIDGE_CHAIN_IDS.includes(e)&&y.some(t=>(0,a.formatChainIdToCaip)(t.chainId)===(0,a.formatChainIdToCaip)(e)),[y]);return{openBridgeExperience:(0,s.useCallback)((s,r)=>{(0,k.clearAllBridgeCacheItems)(),t((0,p.resetInputFields)()),(0,l.trace)({name:l.TraceName.SwapViewLoaded,startTime:Date.now()}),t((0,p.trackUnifiedSwapBridgeEvent)(a.UnifiedSwapBridgeEventName.ButtonClicked,{location:s,token_symbol_source:(null==r?void 0:r.symbol)??"ETH",token_symbol_destination:""}));const o=[],m={},h=null!=r&&r.chainId&&b(r.chainId)?(0,d.toAssetId)(r.address,(0,a.formatChainIdToCaip)(r.chainId)):undefined;if(r&&h){const e={...r,assetId:h,name:r.name??r.symbol};(0,g.validateMinimalAssetObject)(e)?m.srcToken=e:o.push(`${u.BridgeQueryParams.FROM}=${h}`)}else if(n!==S.chainId){var y,T;const e=n??S.chainId,{namespace:t}=(0,i.parseCaipChainId)(e),s=Object.keys((null==v||null===(y=v[t])||void 0===y?void 0:y.standard)??{})[0]??(null===(T=(0,a.getNativeAssetForChainId)(e))||void 0===T?void 0:T.assetId);o.push(`${u.BridgeQueryParams.FROM}=${s}`)}s===c.MetaMetricsSwapsEventSource.TransactionShield&&o.push("isFromTransactionShield=true");const w=`${f.CROSS_CHAIN_SWAP_ROUTE}${f.PREPARE_SWAP_ROUTE}`;e([w,o.join("&")].filter(Boolean).join("?"),{state:m})},[e,n,null==S?void 0:S.chainId,b,v])}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridging.ts"}],[7529,{"../../ducks/bridge/selectors":7438,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCountdownTimer=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../ducks/bridge/selectors");const i=1e3;n.useCountdownTimer=()=>{const e=(0,s.c)(9),{quotesLastFetchedMs:t}=(0,o.useSelector)(a.getBridgeQuotes),n=(0,o.useSelector)(a.getQuoteRefreshRate),[c,u]=(0,r.useState)(n+i),l=(0,r.useRef)(n);let d,m,h,p,f,g;return e[0]!==c?(d=()=>{l.current=c},m=[c],e[0]=c,e[1]=d,e[2]=m):(d=e[1],m=e[2]),(0,r.useEffect)(d,m),e[3]!==t||e[4]!==n?(h=()=>{t&&u(n-(Date.now()-t)+i)},p=[t,n],e[3]=t,e[4]=n,e[5]=h,e[6]=p):(h=e[5],p=e[6]),(0,r.useEffect)(h,p),e[7]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const e=setInterval(()=>{u(Math.max(0,l.current-i))},i);return()=>clearInterval(e)},g=[],e[7]=f,e[8]=g):(f=e[7],g=e[8]),(0,r.useEffect)(f,g),Math.floor(c/1e3)}}}},{package:"$root$",file:"ui/hooks/bridge/useCountdownTimer.ts"}],[7530,{"../../ducks/bridge/selectors":7438,"../../selectors/multichain":8586,"../useMultichainSelector":7625,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsTxSubmittable=void 0;var s=e("react-redux"),r=e("../../ducks/bridge/selectors"),o=e("../../selectors/multichain"),a=e("../useMultichainSelector");n.useIsTxSubmittable=()=>{const e=(0,s.useSelector)(r.getFromToken),t=(0,s.useSelector)(r.getToToken),n=(0,a.useMultichainSelector)(o.getMultichainCurrentChainId),i=(0,s.useSelector)(r.getFromAmount),{activeQuote:c}=(0,s.useSelector)(r.getBridgeQuotes),{isInsufficientBalance:u,isInsufficientGasBalance:l,isInsufficientGasForQuote:d,isTxAlertPresent:m,isTxAlertLoading:h}=(0,s.useSelector)(r.getValidationErrors);return Boolean(e&&t&&n&&i&&c&&!u&&!l&&!d&&!(h||m))}}}},{package:"$root$",file:"ui/hooks/bridge/useIsTxSubmittable.ts"}],[7531,{"../../../shared/constants/bridge":6176,"../../ducks/bridge/asset-selectors":7436,"../../ducks/bridge/utils":7439,"../../pages/bridge/utils/tokens":7738,"../../selectors/multichain-accounts/account-tree":8581,"../useAsync":7595,"@metamask/bridge-controller":1527,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePopularTokens=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("@metamask/bridge-controller"),a=e("react-redux"),i=e("../useAsync"),c=e("../../../shared/constants/bridge"),u=e("../../ducks/bridge/utils"),l=e("../../ducks/bridge/asset-selectors"),d=e("../../selectors/multichain-accounts/account-tree"),m=e("../../pages/bridge/utils/tokens");n.usePopularTokens=e=>{const t=(0,s.c)(17),{assetsToInclude:n,accountAddress:h,chainIds:p}=e;let f;t[0]!==h?(f=e=>(0,d.getAccountGroupsByAddress)(e,[h]),t[0]=h,t[1]=f):f=t[1];const[g]=(0,a.useSelector)(f);let k;t[2]!==g.id?(k=e=>(0,l.getBridgeAssetsByAssetId)(e,g.id),t[2]=g.id,t[3]=k):k=t[3];const S=(0,a.useSelector)(k),y=(0,r.useRef)(null);let v,b;t[4]!==n||t[5]!==p?(v=async()=>{var e,t;null===(e=y.current)||void 0===e||e.abort("Asset balances changed"),y.current=new AbortController;return await(0,m.fetchPopularTokens)({chainIds:Array.from(p),assetsWithBalances:n,clientId:o.BridgeClientId.EXTENSION,signal:null===(t=y.current)||void 0===t?void 0:t.signal,bridgeApiBaseUrl:c.BRIDGE_API_BASE_URL})},t[4]=n,t[5]=p,t[6]=v):v=t[6],t[7]!==n?(b=[n],t[7]=n,t[8]=b):b=t[8];const{value:T,pending:w}=(0,i.useAsyncResult)(v,b);let C;t[9]!==S||t[10]!==T?(C=null==T?void 0:T.map(e=>(0,u.toBridgeToken)(e,null==S?void 0:S[e.assetId.toLowerCase()])),t[9]=S,t[10]=T,t[11]=C):C=t[11];const A=C;let I,E;t[12]===Symbol.for("react.memo_cache_sentinel")?(I=()=>()=>{var e;null===(e=y.current)||void 0===e||e.abort("Page unmounted")},E=[],t[12]=I,t[13]=E):(I=t[12],E=t[13]),(0,r.useEffect)(I,E);const _=A&&A.length>0?A:n,P=w||0===(null==A?void 0:A.length);let M;return t[14]!==_||t[15]!==P?(M={popularTokensList:_,isLoading:P},t[14]=_,t[15]=P,t[16]=M):M=t[16],M}}}},{package:"$root$",file:"ui/hooks/bridge/usePopularTokens.ts"}],[7532,{"../../ducks/bridge/actions":7435,"../../ducks/bridge/selectors":7438,"./useIsTxSubmittable":7530,"@metamask/bridge-controller":1527,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useQuoteFetchEvents=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../ducks/bridge/selectors"),c=e("../../ducks/bridge/actions"),u=e("./useIsTxSubmittable");n.useQuoteFetchEvents=()=>{const e=(0,s.c)(12),t=(0,o.useDispatch)(),{isLoading:n,quotesRefreshCount:l,quoteFetchError:d,activeQuote:m,recommendedQuote:h}=(0,o.useSelector)(i.getBridgeQuotes),p=(0,u.useIsTxSubmittable)(),f=(0,o.useSelector)(i.getWarningLabels),g=(0,o.useSelector)(i.getFromTokenBalanceInUsd);let k,S;e[0]!==m||e[1]!==t||e[2]!==g||e[3]!==n||e[4]!==p||e[5]!==d||e[6]!==l||e[7]!==h||e[8]!==f?(k=()=>{!n&&l>0&&!d&&t((0,c.trackUnifiedSwapBridgeEvent)(a.UnifiedSwapBridgeEventName.QuotesReceived,(0,a.getQuotesReceivedProperties)(m,f,p,h,g)))},e[0]=m,e[1]=t,e[2]=g,e[3]=n,e[4]=p,e[5]=d,e[6]=l,e[7]=h,e[8]=f,e[9]=k):k=e[9],e[10]!==l?(S=[l],e[10]=l,e[11]=S):S=e[11],(0,r.useEffect)(k,S)}}}},{package:"$root$",file:"ui/hooks/bridge/useQuoteFetchEvents.ts"}],[7533,{"../../../shared/modules/hexstring-utils":6324,"../../ducks/bridge/selectors":7438,"../../ducks/rewards/selectors":7453,"../../selectors/multichain":8586,"../../selectors/multichain-accounts/account-tree":8581,"../../store/actions":8611,"../useMultichainSelector":7625,"../usePrevious":7635,"@metamask/bridge-controller":1527,"@metamask/utils":3554,"bignumber.js":4362,lodash:5239,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRewardsWithQuote=n.useRewards=n.getUsdPricePerToken=void 0;var s,r=e("react"),o=e("react-redux"),a=e("bignumber.js"),i=e("@metamask/bridge-controller"),c=e("@metamask/utils"),u=(s=e("loglevel"))&&s.__esModule?s:{default:s},l=e("lodash"),d=e("../../ducks/bridge/selectors"),m=e("../../selectors/multichain"),h=e("../usePrevious"),p=e("../useMultichainSelector"),f=e("../../store/actions"),g=e("../../../shared/modules/hexstring-utils"),k=e("../../selectors/multichain-accounts/account-tree"),S=e("../../ducks/rewards/selectors");const y=(e,t,n)=>{try{const s=new a.BigNumber(e),r=new a.BigNumber(t).div(new a.BigNumber(10).pow(n));return s.isZero()||r.isZero()?undefined:s.dividedBy(r).toString()}catch(e){return console.error(e,"useRewards: Error calculating USD price per token"),undefined}};n.getUsdPricePerToken=y;const v=({quote:e,fromAddress:t,fromAddressAccount:n,chainId:s})=>{const a=(0,o.useDispatch)(),[d,m]=(0,r.useState)(!1),[p,k]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[T,w]=(0,r.useState)(!1),C=(0,h.usePrevious)(null==e?void 0:e.requestId),[A,I]=(0,r.useState)(null),E=(0,o.useSelector)(S.selectRewardsEnabled),_=(0,o.useSelector)(S.selectRewardsAccountLinkedTimestamp),P=(0,r.useRef)(new Map),[M,R]=(0,r.useState)(null),N=(0,r.useCallback)((0,l.debounce)(async(e,t)=>{if(!e||!t)return k(null),b(!1),m(!1),void w(!1);try{var n;const s=e.srcTokenAmount,r=e.destTokenAmount,o={id:e.srcAsset.assetId,amount:s},i={id:e.destAsset.assetId,amount:r},c={id:e.feeData.metabridge.asset.assetId,amount:e.feeData.metabridge.amount||"0"},u=y((null===(n=e.priceData)||void 0===n?void 0:n.totalFeeAmountUsd)||"0",c.amount,e.feeData.metabridge.asset.decimals),l={activityType:"SWAP",account:t,activityContext:{swapContext:{srcAsset:o,destAsset:i,feeAsset:{...c,...u?{usdPrice:u}:{}}}}},d=await a((0,f.estimateRewardsPoints)(l));k(d.pointsEstimate)}catch(e){u.default.error("[useRewardsWithQuote] Error estimating points:",e),k(null),w(!0)}finally{m(!1)}},750),[a]),O=(0,r.useCallback)(async e=>{if(!(e&&t&&s&&E))return k(null),b(!1),I(null),m(!1),void w(!1);m(!0),w(!1);let r=null;try{if(!await a((0,f.getRewardsCandidateSubscriptionId)()))return k(null),b(!1),I(null),w(!1),void m(!1);if(r=((e,t)=>{try{const n=(0,i.formatChainIdToCaip)(t),{namespace:s,reference:r}=(0,c.parseCaipChainId)(n),o=(0,c.isValidHexAddress)(e)?(0,g.toChecksumHexAddress)(e):e;return(0,c.toCaipAccountId)(s,r,o)}catch(e){return u.default.error("[useRewards] Error formatting account to CAIP-10:",e),null}})(t,s),!r)return k(null),w(!1),b(!1),I(null),void m(!1);const o=await a((0,f.getRewardsHasAccountOptedIn)(r));I(o);let l=o;if(!o&&n){l=await a((0,f.rewardsIsOptInSupported)({account:n}))}if(b(l),k(null),w(!1),!l||!o)return void m(!1);await N(e,r)}catch{m(!1),b(!1),k(null),I(null),w(!1)}},[t,s,E,a,n,N]);return(0,r.useEffect)(()=>{C!==(null==e?void 0:e.requestId)&&O(e)},[O,null==e?void 0:e.requestId,e,C]),(0,r.useEffect)(()=>{if(t&&null!==_)P.current.set(t,_),R(_);else if(t){const e=P.current.get(t);R(e??null)}else R(null)},[_,t]),(0,r.useEffect)(()=>{null!==M&&!1===A&&O(e)},[M,A,O,e]),{shouldShowRewardsRow:v,isLoading:d,estimatedPoints:p,hasError:T,accountOptedIn:A,rewardsAccountScope:e&&v?n:null}};n.useRewardsWithQuote=v;n.useRewards=({activeQuote:e})=>{const t=(0,o.useSelector)(d.getFromToken),n=(0,o.useSelector)(d.getToToken),s=(0,o.useSelector)(d.getQuoteRequest),r=(0,p.useMultichainSelector)(m.getMultichainCurrentChainId),a=r?(0,i.formatChainIdToCaip)(r.toString()):null,c=(0,o.useSelector)(e=>a?(0,k.getInternalAccountBySelectedAccountGroupAndCaip)(e,a):null),u=t&&n&&(null==s?void 0:s.srcTokenAmount)&&(null==c?void 0:c.address);return v({quote:u?e:null,fromAddress:null==c?void 0:c.address,fromAddressAccount:c,chainId:null==r?void 0:r.toString()})}}}},{package:"$root$",file:"ui/hooks/bridge/useRewards.ts"}],[7534,{"../../ducks/bridge/actions":7435,"../../ducks/bridge/selectors":7438,"../../pages/bridge/utils/slippage-service":7736,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSmartSlippage=function(){const e=(0,s.c)(7),t=(0,o.useDispatch)(),n=(0,o.useSelector)(c.getFromToken),a=(0,o.useSelector)(c.getToToken),l=u;let d,m;e[0]!==t||e[1]!==n||e[2]!==a?(d=()=>{const e=l({fromToken:n,toToken:a});t((0,i.setSlippage)(e))},e[0]=t,e[1]=n,e[2]=a,e[3]=d):d=e[3];e[4]!==n||e[5]!==a?(m=[n,a],e[4]=n,e[5]=a,e[6]=m):m=e[6];(0,r.useEffect)(d,m)};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../pages/bridge/utils/slippage-service"),i=e("../../ducks/bridge/actions"),c=e("../../ducks/bridge/selectors");function u(e){const t=(0,a.calculateSlippage)(e);return t}}}},{package:"$root$",file:"ui/hooks/bridge/useSmartSlippage.ts"}],[7535,{"../../../shared/modules/bridge-utils/security-alerts-api.util":6311,"../../ducks/bridge/selectors":7438,"../useAsync":7595,"@metamask/bridge-controller":1527,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenAlerts=n.default=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/bridge-controller"),a=e("../../ducks/bridge/selectors"),i=e("../../../shared/modules/bridge-utils/security-alerts-api.util"),c=e("../useAsync");const u=()=>{const e=(0,s.c)(10),t=(0,r.useSelector)(a.getFromToken),n=(0,r.useSelector)(a.getFromChain),u=(0,r.useSelector)(a.getToToken),l=(0,r.useSelector)(a.getToChain);let d;e[0]!==n||e[1]!==t||e[2]!==l||e[3]!==u?(d=async()=>{if(t&&n&&u&&l&&!(0,o.isNativeAddress)(u.assetId)){const e=(0,i.convertChainIdToBlockAidChainName)(u.chainId);if(e)return await(0,i.fetchTokenAlert)(e,(0,o.formatAddressToCaipReference)(u.assetId))}return null},e[0]=n,e[1]=t,e[2]=l,e[3]=u,e[4]=d):d=e[4];const m=null==u?void 0:u.assetId,h=null==u?void 0:u.chainId;let p;e[5]!==m||e[6]!==h?(p=[m,h],e[5]=m,e[6]=h,e[7]=p):p=e[7];const{value:f}=(0,c.useAsyncResult)(d,p);let g;return e[8]!==f?(g={tokenAlert:f},e[8]=f,e[9]=g):g=e[9],g};n.useTokenAlerts=u;n.default=u}}},{package:"$root$",file:"ui/hooks/bridge/useTokenAlerts.ts"}],[7536,{"../../../shared/constants/bridge":6176,"../../ducks/bridge/asset-selectors":7436,"../../ducks/bridge/utils":7439,"../../pages/bridge/utils/tokens":7738,"../../selectors/multichain-accounts/account-tree":8581,"@metamask/bridge-controller":1527,lodash:5239,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenSearchResults=void 0;var s=e("react"),r=e("@metamask/bridge-controller"),o=e("react-redux"),a=e("lodash"),i=e("../../../shared/constants/bridge"),c=e("../../ducks/bridge/utils"),u=e("../../ducks/bridge/asset-selectors"),l=e("../../selectors/multichain-accounts/account-tree"),d=e("../../pages/bridge/utils/tokens");n.useTokenSearchResults=({searchQuery:e,accountAddress:t,chainIds:n,assetsToInclude:m})=>{const[h]=(0,o.useSelector)(e=>(0,l.getAccountGroupsByAddress)(e,[t])),p=(0,o.useSelector)(e=>(0,u.getBridgeAssetsByAssetId)(e,h.id)),f=(0,s.useRef)(new AbortController),[g,k]=(0,s.useState)(!1),[S,y]=(0,s.useState)([]),[v,b]=(0,s.useState)(!1),[T,w]=(0,s.useState)(undefined),C=(0,s.useCallback)((e,t,s)=>{var o,a;k(!0),f.current.abort("Asset balances changed"),f.current=new AbortController,null===(o=(0,d.fetchTokensBySearchQuery)({chainIds:Array.from(n),assetsWithBalances:t,query:e,clientId:r.BridgeClientId.EXTENSION,signal:null===(a=f.current)||void 0===a?void 0:a.signal,bridgeApiBaseUrl:i.BRIDGE_API_BASE_URL,after:s}))||void 0===o||o.then(({endCursor:e,tokens:t,hasNextPage:n})=>{b(n),y(e=>[...s||0===t.length?e:[],...t.map(e=>(0,c.toBridgeToken)(e,null==p?void 0:p[e.assetId.toLowerCase()]))]),w(e)}).finally(()=>{k(!1)})},[p,n,f]),A=(0,s.useRef)((0,a.debounce)((e,t)=>C(e,t),300)),I=(0,s.useMemo)(()=>m.filter(t=>{var n,s;return t.symbol.toLowerCase().includes(e.toLowerCase())||(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.assetId)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))}),[e,m]);return(0,s.useEffect)(()=>{f.current.abort("Search query changed"),y([]),w(undefined),b(!1),e.length>0&&(k(!0),y(I),A.current(e,I))},[e,I]),(0,s.useEffect)(()=>{const e=A.current;return()=>{f.current.abort("Page unmounted"),e.cancel()}},[]),{searchResults:S,isSearchResultsLoading:g,onFetchMoreResults:e=>C(e,I,T),hasMoreResults:v}}}}},{package:"$root$",file:"ui/hooks/bridge/useTokenSearchResults.ts"}],[7537,{"../../../shared/constants/bridge":6176,"../../../shared/constants/multichain/networks":6193,"../../../shared/constants/network":6194,"../../../shared/constants/time":6211,"../../../shared/constants/transaction":6213,"../../../shared/lib/asset-utils":6224,"../../../shared/lib/fetch-with-cache":6272,"../../ducks/bridge/selectors":7438,"../../ducks/bridge/utils":7439,"../../pages/swaps/swaps.util":8554,"../useAsync":7595,"../useMultichainBalances":7624,"@metamask/bridge-controller":1527,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokensWithFiltering=void 0;var s,r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../../shared/constants/transaction"),c=e("../../../shared/constants/network"),u=e("../useMultichainBalances"),l=e("../useAsync"),d=e("../../pages/swaps/swaps.util"),m=e("../../../shared/constants/time"),h=e("../../ducks/bridge/selectors"),p=(s=e("../../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},f=e("../../../shared/constants/bridge"),g=e("../../../shared/lib/asset-utils"),k=e("../../../shared/constants/multichain/networks"),S=e("../../ducks/bridge/utils");const y=(e,t)=>{if(!e||!t)return undefined;const n={...t,chainId:(0,a.isNonEvmChainId)(e)?(0,a.formatChainIdToCaip)(e):(0,a.formatChainIdToHex)(e),assetId:"assetId"in t?t.assetId:(0,g.toAssetId)(t.address,e)};if((0,a.isNativeAddress)(t.address)){const s=(0,a.isNonEvmChainId)(e)?k.MULTICHAIN_TOKEN_IMAGE_MAP[n.chainId]:c.CHAIN_ID_TOKEN_IMAGE_MAP[n.chainId];return{...n,type:i.AssetType.native,address:"",image:s??(t.iconUrl||("icon"in t?t.icon:"")||""),balance:"0",string:"0"}}return{...n,type:i.AssetType.token,image:t.iconUrl??("icon"in t?t.icon:"")??"",balance:"",string:undefined}};n.useTokensWithFiltering=(e,t,n)=>{const s=(0,o.useSelector)(t=>(0,h.getTopAssetsFromFeatureFlags)(t,e)),{assetsWithBalance:v}=(0,u.useMultichainBalances)(n),b=(0,o.useSelector)(e=>e.metamask.tokensChainsCache),T=(0,r.useMemo)(()=>{var t;if(!e)return undefined;if((0,a.isBitcoinChainId)(e)){const t=(0,a.getNativeAssetForChainId)(e);if(t){const e=t.address??"";return{[e]:t}}return undefined}if((0,a.isSolanaChainId)(e))return undefined;const n=(0,a.formatChainIdToHex)(e);return n?null===(t=b[n])||void 0===t?void 0:t.data:undefined},[e,b]),w=Boolean(T),{value:C,pending:A}=(0,l.useAsyncResult)(async()=>w||!e?{}:await(0,a.fetchBridgeTokens)(e,a.BridgeClientId.EXTENSION,async(e,t)=>{const{headers:n,...s}=t??{};return await(0,p.default)({url:e,...s,fetchOptions:{method:"GET",headers:n},cacheOptions:{cacheRefreshTime:10*m.MINUTE},functionName:"fetchBridgeTokens"})},f.BRIDGE_API_BASE_URL,"13.18.1"),[e,w]),I=(0,r.useMemo)(()=>T??C,[T,C]),{value:E,pending:_}=(0,l.useAsyncResult)(async()=>e?s?s.map(e=>({address:e})):await(0,d.fetchTopAssetsList)(e):[],[e,s]);return{filteredTokenListGenerator:(0,r.useCallback)(n=>function*(){const s=(e,s,r)=>{var o;const i=e=>e&&(0,a.isNativeAddress)(e)?"":e;return n(e,s,r)&&(!t||!r||!(t.symbol===e&&((0,a.isSolanaChainId)(r)?i(t.address)===i(s):(null===(o=t.address)||void 0===o?void 0:o.toLowerCase())===(null==s?void 0:s.toLowerCase()))&&t.chainId===(0,a.formatChainIdToCaip)(r)))};if(e&&E&&I&&0!==Object.keys(I).length){for(const e of v)if(!(0,S.isTronEnergyOrBandwidthResource)(e.chainId,e.symbol)&&s(e.symbol,e.address,e.chainId))if((0,a.isNativeAddress)(e.address)||e.isNative){var r,o;yield{symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:"",type:i.AssetType.native,balance:e.balance??"0",string:e.string??undefined,image:c.CHAIN_ID_TOKEN_IMAGE_MAP[e.chainId]??k.MULTICHAIN_TOKEN_IMAGE_MAP[e.chainId]??((null===(r=(0,a.getNativeAssetForChainId)(e.chainId))||void 0===r?void 0:r.icon)||(null===(o=(0,a.getNativeAssetForChainId)(e.chainId))||void 0===o?void 0:o.iconUrl)||(0,g.getAssetImageUrl)(e.address,(0,a.formatChainIdToCaip)(e.chainId))),accountType:e.accountType}}else{var u;const t=(0,g.toAssetId)(e.address,(0,a.formatChainIdToCaip)(e.chainId));yield{...e,symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:e.address,type:i.AssetType.token,balance:e.balance??"0",string:e.string??undefined,image:(e.image||e.address&&(null==I||null===(u=I[e.address.toLowerCase()])||void 0===u?void 0:u.iconUrl))??(t?(0,g.getAssetImageUrl)(t,e.chainId):undefined)??""}}for(const t of E){const n=(null==I?void 0:I[t.address])??(null==I?void 0:I[t.address.toLowerCase()]),r=y(e,n);r&&!(0,S.isTronEnergyOrBandwidthResource)(e,r.symbol)&&s(r.symbol,r.address??undefined,e)&&(yield r)}for(const t of Object.values(I)){const n=y(e,t);n&&-1===n.symbol.indexOf("$")&&!(0,S.isTronEnergyOrBandwidthResource)(e,n.symbol)&&s(n.symbol,n.address??undefined,e)&&(yield n)}}}(),[v,E,e,I,t]),isLoading:A||_}}}}},{package:"$root$",file:"ui/hooks/bridge/useTokensWithFiltering.ts"}],[7538,{"../../../shared/constants/multichain/networks":6193,"../../ducks/bridge/actions":7435,"../../ducks/bridge/selectors":7438,"@metamask/bridge-controller":1527,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTxAlerts=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../../shared/constants/multichain/networks"),c=e("../../ducks/bridge/selectors"),u=e("../../ducks/bridge/actions");n.useTxAlerts=()=>{const e=(0,s.c)(14),t=(0,o.useDispatch)(),n=(0,o.useSelector)(c.getFromChain),{activeQuote:l}=(0,o.useSelector)(c.getBridgeQuotes);let d;e[0]!==l?(d=l??{},e[0]=l,e[1]=d):d=e[1];const{trade:m}=d,h=(0,o.useSelector)(c.getFromAccount);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=new AbortController,e[2]=p):p=e[2];const f=(0,r.useRef)(p);let g,k,S;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{var e;null===(e=f.current)||void 0===e||e.abort(),f.current=null},k=[],e[3]=g,e[4]=k):(g=e[3],k=e[4]),(0,r.useEffect)(g,k),e[5]!==h||e[6]!==t||e[7]!==n||e[8]!==m?(S=()=>{var e;null===(e=f.current)||void 0===e||e.abort(),m&&"string"==typeof m&&null!=n&&n.chainId&&(0,a.isSolanaChainId)(n.chainId)&&null!=h&&h.address?(f.current=new AbortController,t((0,u.setTxAlerts)({signal:f.current.signal,chainId:i.MultichainNetworks.SOLANA,trade:m,accountAddress:h.address}))):t((0,u.setTxAlerts)(null))},e[5]=h,e[6]=t,e[7]=n,e[8]=m,e[9]=S):S=e[9];const y=null==n?void 0:n.chainId,v=null==h?void 0:h.address;let b;e[10]!==y||e[11]!==v||e[12]!==m?(b=[m,y,v],e[10]=y,e[11]=v,e[12]=m,e[13]=b):b=e[13],(0,r.useEffect)(S,b)}}}},{package:"$root$",file:"ui/hooks/bridge/useTxAlerts.ts"}],[7539,{"../../store/actions":8611,"../../store/background-connection":8612},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.deFiStartPolling=async function(){const e=await(0,r.submitRequestToBackground)("deFiStartPolling",[null]);return await(0,s.addPollingTokenToAppState)(e),e},n.deFiStopPolling=async function(e){await(0,r.submitRequestToBackground)("deFiStopPolling",[e]),await(0,s.removePollingTokenFromAppState)(e)};var s=e("../../store/actions"),r=e("../../store/background-connection")}}},{package:"$root$",file:"ui/hooks/defi/defiPollingActions.ts"}],[7540,{"../../ducks/metamask/metamask":7448,"../useMultiPolling":7621,"./defiPollingActions":7539,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../../ducks/metamask/metamask"),i=(s=e("../useMultiPolling"))&&s.__esModule?s:{default:s},c=e("./defiPollingActions");n.default=()=>{const e=(0,r.c)(3),t=(0,o.useSelector)(a.getCompletedOnboarding),n=(0,o.useSelector)(a.getIsUnlocked),s=t&&n;let u,l;return e[0]!==s?(u={startPolling:c.deFiStartPolling,stopPollingByPollingToken:c.deFiStopPolling,input:s?[null]:[]},e[0]=s,e[1]=u):u=e[1],(0,i.default)(u),e[2]===Symbol.for("react.memo_cache_sentinel")?(l={},e[2]=l):l=e[2],l}}}},{package:"$root$",file:"ui/hooks/defi/useDeFiPolling.ts"}],[7541,{"../../pages/confirmations/hooks/useConfirmationNavigation":8202,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionRedirect=function(e){const t=(0,s.c)(16);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{onRedirect:a}=n,[i,c]=(0,r.useState)(),{confirmations:u,navigateToId:l}=(0,o.useConfirmationNavigation)();let d;if(t[2]!==u||t[3]!==i){let e;t[5]!==i?(e=e=>e.id===i,t[5]=i,t[6]=e):e=t[6],d=u.some(e),t[2]=u,t[3]=i,t[4]=d}else d=t[4];const m=d;let h,p,f;t[7]!==m||t[8]!==l||t[9]!==a||t[10]!==i?(h=()=>{m&&(l(i),null==a||a())},p=[m,l,i,a],t[7]=m,t[8]=l,t[9]=a,t[10]=i,t[11]=h,t[12]=p):(h=t[11],p=t[12]);(0,r.useEffect)(h,p),t[13]!==m||t[14]!==i?(f={transactionId:i,setTransactionId:c,isRedirectPending:m},t[13]=m,t[14]=i,t[15]=f):f=t[15];return f};var s=e("react-compiler-runtime"),r=e("react"),o=e("../../pages/confirmations/hooks/useConfirmationNavigation")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionRedirect.ts"}],[7542,{"../../../shared/lib/gator-permissions/gator-permissions-utils":6274,"../../../shared/modules/selectors/networks":6335,"../../selectors/selectors":8597,"../../store/actions":8611,"../useAsync":7595,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionTokenInfo=function(e,t,n){const l=(0,s.c)(30),d=(0,r.useSelector)(o.selectERC20TokensByChain),m=(0,r.useSelector)(o.getAllTokens),h=(0,r.useSelector)(o.getUseExternalServices),p=(0,r.useSelector)(a.getAllNetworkConfigurationsByCaipChainId);let f;l[0]!==n?(f=(null==n?void 0:n.includes("native-token"))??!1,l[0]=n,l[1]=f):f=l[1];const g=f;let k;e:{if(!g||!t){k=null;break e}let e;l[2]!==t||l[3]!==p?(e=(0,c.resolveNativeTokenInfo)(t,p),l[2]=t,l[3]=p,l[4]=e):e=l[4],k=e}const S=k;let y;e:{if(g||!e||!t){y=null;break e}let n;l[5]!==m||l[6]!==t||l[7]!==d||l[8]!==e?(n=(0,c.lookupCachedOrImportedTokenInfo)(e,t,d,m),l[5]=m,l[6]=t,l[7]=d,l[8]=e,l[9]=n):n=l[9],y=n}const v=y,b=Boolean(!g&&!v&&e&&t);let T,w;l[10]!==h||l[11]!==t||l[12]!==b||l[13]!==e?(T=async()=>b&&e&&t?await(0,c.getGatorErc20TokenInfo)(e,t,Boolean(h),i.getTokenStandardAndDetailsByChain):null,w=[b,e,t,h],l[10]=h,l[11]=t,l[12]=b,l[13]=e,l[14]=T,l[15]=w):(T=l[14],w=l[15]);const C=(0,u.useAsyncResult)(T,w),A="success"===C.status?C.value:null,I="error"===C.status?C.error:null,E=b&&C.pending;let _;e:{if(S){let e;l[16]!==S?(e={tokenInfo:S,loading:!1},l[16]=S,l[17]=e):e=l[17],_=e;break e}if(v){let e;l[18]!==v?(e={tokenInfo:v,loading:!1},l[18]=v,l[19]=e):e=l[19],_=e;break e}if(A){let e;l[20]!==A?(e={tokenInfo:A,loading:!1},l[20]=A,l[21]=e):e=l[21],_=e;break e}const e=t||"0x0";let n,s;l[22]!==e?(n={symbol:"Unknown Token",decimals:18,chainId:e},l[22]=e,l[23]=n):n=l[23],l[24]!==E||l[25]!==n?(s={tokenInfo:n,loading:E},l[24]=E,l[25]=n,l[26]=s):s=l[26],_=s}const P=_;let M;l[27]!==I||l[28]!==P?(M={...P,error:I},l[27]=I,l[28]=P,l[29]=M):M=l[29];return M};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/selectors"),a=e("../../../shared/modules/selectors/networks"),i=e("../../store/actions"),c=e("../../../shared/lib/gator-permissions/gator-permissions-utils"),u=e("../useAsync")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionTokenInfo.ts"}],[7543,{"../../selectors/gator-permissions/gator-permissions":8574,"../../store/controller-actions/gator-permissions-controller":8613,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissions=function(e={}){const{refreshInBackground:t=!0}=e,n=(0,r.useDispatch)(),i=(0,r.useSelector)(e=>{try{return(0,a.getGatorPermissionsMap)(e)}catch(e){return undefined}}),[c,u]=(0,s.useState)(!i),[l,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(undefined),p=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=!1;return i&&!t?u(!1):p.current||(async()=>{try{h(undefined),i?d(!0):u(!0),await(0,o.fetchAndUpdateGatorPermissions)({isRevoked:!1})}catch(t){e||h(t)}finally{e||(u(!1),d(!1))}})().then(()=>{p.current=!0}).catch(()=>{}),()=>{e=!0}},[n,t]),{data:i,error:m,loading:c,isRefreshing:l}};var s=e("react"),r=e("react-redux"),o=e("../../store/controller-actions/gator-permissions-controller"),a=e("../../selectors/gator-permissions/gator-permissions")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissions.ts"}],[7544,{"../../../shared/lib/delegation/delegation":6263,"../../selectors":8577,"../../store/actions":8611,"../../store/controller-actions/gator-permissions-controller":8613,"./useGatorPermissionRedirect":7541,"./utils":7546,"@metamask/transaction-controller":3473,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissions=function({chainId:e,onRedirect:t}){const{setTransactionId:n}=(0,l.useGatorPermissionRedirect)({onRedirect:t}),m=(0,r.useStore)(),h=(0,s.useCallback)(e=>{if(Array.isArray(e)){if(0===e.length)throw new Error("No gator permissions provided");for(const t of e)h(t)}else if(!e)throw new Error("No gator permission provided")},[]),p=(0,s.useCallback)(t=>{if(t.permissionResponse.chainId!==e)throw new Error("Chain ID does not match")},[e]),f=(0,s.useCallback)(e=>{const{permissionResponse:t}=e,n=(0,a.getInternalAccountByAddress)(m.getState(),t.from);if(!n)throw new Error("Internal account not found for delegator of permission");return{permissionContext:t.context,delegationManagerAddress:t.delegationManager,accountAddress:n.address}},[m]),g=(0,s.useCallback)(async e=>{const t=e.permissionResponse.chainId;let n;try{n=await(0,i.findNetworkClientIdByChainId)(t)}catch(e){throw new Error(`Failed to find network client for chain ${t}`,{cause:e})}const{permissionContext:s,delegationManagerAddress:r,accountAddress:a}=f(e),l=(0,d.extractDelegationFromGatorPermissionContext)(s),m=(0,c.getDelegationHashOffchain)(l);if(await(0,u.checkDelegationDisabled)(r,m,n))return await(0,u.submitDirectRevocation)({permissionContext:s}),null;const h=(0,c.encodeDisableDelegation)({delegation:l}),p=await(0,i.addTransaction)({from:a,to:r,data:h,value:"0x0"},{networkClientId:n,type:o.TransactionType.contractInteraction});if(!p)throw new Error("No transaction meta found");if(!p.id)throw new Error("No transaction id found");return await(0,u.addPendingRevocation)({txId:p.id,permissionContext:s}),p},[f]),k=(0,s.useCallback)(async e=>{h(e),p(e);const t=await g(e);return n(null==t?void 0:t.id),t},[g,p,h,n]),S=(0,s.useCallback)(async e=>{var t;h(e);for(const t of e)p(t);const s=[];for(const t of e){const e=await g(t);s.push(e)}const r=s.filter(e=>null!==e);return n(null===(t=r[0])||void 0===t?void 0:t.id),r},[g,p,h,n]);return{revokeGatorPermission:k,revokeGatorPermissionBatch:S}};var s=e("react"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../selectors"),i=e("../../store/actions"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./useGatorPermissionRedirect"),d=e("./utils")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissions.ts"}],[7545,{"../../../shared/lib/delegation/delegation":6263,"../../selectors":8577,"../../store/actions":8611,"../../store/controller-actions/gator-permissions-controller":8613,"./useGatorPermissionRedirect":7541,"./utils":7546,"@metamask/transaction-controller":3473,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissionsMultiChain=function({onRedirect:e}={}){const{setTransactionId:t}=(0,d.useGatorPermissionRedirect)({onRedirect:e}),n=(0,r.useStore)();return{revokeGatorPermissionsBatchMultiChain:(0,s.useCallback)(async e=>{const s={},r=[];for(const[t,d]of Object.entries(e)){if(s[t]={revoked:[],skipped:[],errors:[]},0===d.length)continue;let e;try{e=await(0,a.findNetworkClientIdByChainId)(t)}catch(e){const n=e instanceof Error?e.message:String(e);s[t].errors.push(new Error(`No network client ID found for chain ${t}: ${n}`));continue}for(const m of d)try{const{permissionResponse:d}=m,h=(0,i.getInternalAccountByAddress)(n.getState(),d.from);if(!h){s[t].skipped.push(m);continue}const p=(0,l.extractDelegationFromGatorPermissionContext)(d.context),f=(0,c.getDelegationHashOffchain)(p);if(await(0,u.checkDelegationDisabled)(d.delegationManager,f,e)){await(0,u.submitDirectRevocation)({permissionContext:d.context}),s[t].skipped.push(m);continue}const g=(0,c.encodeDisableDelegation)({delegation:p}),k=await(0,a.addTransaction)({from:h.address,to:d.delegationManager,data:g,value:"0x0"},{networkClientId:e,type:o.TransactionType.contractInteraction});if(!k)throw new Error("No transaction meta found");if(!k.id)throw new Error("No transaction id found");s[t].revoked.push(k),r.push(k.id),await(0,u.addPendingRevocation)({txId:k.id,permissionContext:d.context})}catch(e){s[t].errors.push(e)}}return r.length>0&&t(r[0]),s},[n,t])}};var s=e("react"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../store/actions"),i=e("../../selectors"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./utils"),d=e("./useGatorPermissionRedirect")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissionsMultiChain.ts"}],[7546,{"@metamask/delegation-core":1652},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractDelegationFromGatorPermissionContext=function(e){const t=(0,s.decodeDelegations)(e),n=t[0];if(!n)throw new Error("No delegation found");if(1!==t.length)throw new Error("Multiple delegations found");return{...n,salt:`0x${n.salt.toString(16)}`}};var s=e("@metamask/delegation-core")}}},{package:"$root$",file:"ui/hooks/gator-permissions/utils.ts"}],[7547,{"./useAccountSyncing":7548},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAccountSyncing",{enumerable:!0,get:function(){return s.useAccountSyncing}}),Object.defineProperty(n,"useDeleteAccountSyncingDataFromUserStorage",{enumerable:!0,get:function(){return s.useDeleteAccountSyncingDataFromUserStorage}}),Object.defineProperty(n,"useShouldDispatchAccountSyncing",{enumerable:!0,get:function(){return s.useShouldDispatchAccountSyncing}});var s=e("./useAccountSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/index.ts"}],[7548,{"../../../ducks/metamask/metamask":7448,"../../../selectors":8577,"../../../selectors/identity/authentication":8575,"../../../selectors/identity/backup-and-sync":8576,"../../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchAccountSyncing=n.useDeleteAccountSyncingDataFromUserStorage=n.useAccountSyncing=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=(e("react"),e("react-redux")),i=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const m=()=>{const e=(0,a.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,a.useSelector)(c.selectIsAccountSyncingEnabled),n=(0,a.useSelector)(u.getUseExternalServices),s=(0,a.useSelector)(l.getIsUnlocked),r=(0,a.useSelector)(d.selectIsSignedIn),o=(0,a.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&s&&r&&o)};n.useShouldDispatchAccountSyncing=m;n.useAccountSyncing=()=>{const e=(0,r.c)(6),t=(0,a.useDispatch)(),n=m();let s;e[0]!==t||e[1]!==n?(s=()=>{try{if(!n)return;t((0,i.syncAccountTreeWithUserStorage)())}catch(e){const t=e;o.default.error(t)}},e[0]=t,e[1]=n,e[2]=s):s=e[2];const c=s;let u;return e[3]!==c||e[4]!==n?(u={dispatchAccountSyncing:c,shouldDispatchAccountSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u};n.useDeleteAccountSyncingDataFromUserStorage=()=>{const e=(0,r.c)(4),t=(0,a.useDispatch)();let n;e[0]!==t?(n=async()=>{try{await t((0,i.deleteAccountSyncingDataFromUserStorage)())}catch{}},e[0]=t,e[1]=n):n=e[1];const s=n;let o;return e[2]!==s?(o={dispatchDeleteAccountSyncingData:s},e[2]=s,e[3]=o):o=e[3],o}}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/useAccountSyncing.ts"}],[7549,{"./useAutoSignIn":7550,"./useAutoSignOut":7551,"./useSignIn":7552,"./useSignOut":7553},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAutoSignIn",{enumerable:!0,get:function(){return o.useAutoSignIn}}),Object.defineProperty(n,"useAutoSignOut",{enumerable:!0,get:function(){return a.useAutoSignOut}}),Object.defineProperty(n,"useSignIn",{enumerable:!0,get:function(){return s.useSignIn}}),Object.defineProperty(n,"useSignOut",{enumerable:!0,get:function(){return r.useSignOut}});var s=e("./useSignIn"),r=e("./useSignOut"),o=e("./useAutoSignIn"),a=e("./useAutoSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/index.ts"}],[7550,{"../../../ducks/metamask/metamask":7448,"../../../selectors":8577,"../../../selectors/identity/authentication":8575,"./useSignIn":7552,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignIn=function(){const e=(0,s.c)(10),[t,n]=(0,r.useState)(!1),{signIn:l}=(0,u.useSignIn)(),d=Boolean((0,o.useSelector)(a.getIsUnlocked)),m=Boolean((0,o.useSelector)(i.getUseExternalServices)),h=Boolean((0,o.useSelector)(a.getCompletedOnboarding)),p=(0,o.useSelector)(c.selectIsSignedIn),f=(0,o.useSelector)(i.getMetaMaskKeyrings),g=(0,r.useRef)(f.length);let k,S;e[0]!==f.length?(k=()=>{f.length!==g.current&&(g.current=f.length,n(!0))},S=[f.length],e[0]=f.length,e[1]=k,e[2]=S):(k=e[1],S=e[2]);(0,r.useEffect)(k,S);const y=(!p||t)&&d&&m&&h;let v;e[3]!==t||e[4]!==y||e[5]!==l?(v=async()=>{y&&(t&&(await l(!0),n(!1)),await l())},e[3]=t,e[4]=y,e[5]=l,e[6]=v):v=e[6];const b=v;let T;e[7]!==b||e[8]!==y?(T={autoSignIn:b,shouldAutoSignIn:y},e[7]=b,e[8]=y,e[9]=T):T=e[9];return T};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../../ducks/metamask/metamask"),i=e("../../../selectors"),c=e("../../../selectors/identity/authentication"),u=e("./useSignIn")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignIn.ts"}],[7551,{"../../../ducks/metamask/metamask":7448,"../../../selectors":8577,"../../../selectors/identity/authentication":8575,"./useSignOut":7553,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignOut=function(){const e=(0,s.c)(6),{signOut:t}=(0,c.useSignOut)(),n=Boolean((0,r.useSelector)(o.getIsUnlocked)),u=Boolean((0,r.useSelector)(a.getUseExternalServices)),l=(0,r.useSelector)(i.selectIsSignedIn),d=l&&n&&!u;let m;e[0]!==d||e[1]!==t?(m=async()=>{d&&await t()},e[0]=d,e[1]=t,e[2]=m):m=e[2];const h=m;let p;e[3]!==h||e[4]!==d?(p={autoSignOut:h,shouldAutoSignOut:d},e[3]=h,e[4]=d,e[5]=p):p=e[5];return p};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../../ducks/metamask/metamask"),a=e("../../../selectors"),i=e("../../../selectors/identity/authentication"),c=e("./useSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignOut.ts"}],[7552,{"../../../selectors/identity/authentication":8575,"../../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignIn=function(){const e=(0,r.c)(5),t=(0,o.useDispatch)(),n=!(0,o.useSelector)(i.selectIsSignedIn);let s;e[0]!==n||e[1]!==t?(s=async e=>{if(e??n)try{await t((0,c.performSignIn)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");a.default.error(n)}},e[0]=n,e[1]=t,e[2]=s):s=e[2];const u=s;let l;e[3]!==u?(l={signIn:u},e[3]=u,e[4]=l):l=e[4];return l};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignIn.ts"}],[7553,{"../../../selectors/identity/authentication":8575,"../../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignOut=function(){const e=(0,r.c)(5),t=(0,o.useDispatch)(),n=(0,o.useSelector)(i.selectIsSignedIn),s=Boolean(n);let u;e[0]!==t||e[1]!==s?(u=async()=>{if(s)try{await t((0,c.performSignOut)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");a.default.error(n)}},e[0]=t,e[1]=s,e[2]=u):u=e[2];const l=u;let d;e[3]!==l?(d={signOut:l},e[3]=l,e[4]=d):d=e[4];return d};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignOut.ts"}],[7554,{"./useBackupAndSync":7555},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useBackupAndSync",{enumerable:!0,get:function(){return s.useBackupAndSync}});var s=e("./useBackupAndSync")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/index.ts"}],[7555,{"../../../store/actions":8611,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBackupAndSync=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(null),s=(0,r.useCallback)(async(t,s)=>{n(null);try{await e((0,i.setIsBackupAndSyncFeatureEnabled)(t,s))}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");a.default.error(t),n(t)}finally{e((0,i.hideLoadingIndication)())}},[e]);return{error:t,setIsBackupAndSyncFeatureEnabled:s}};var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/useBackupAndSync.ts"}],[7556,{"./useContactSyncing":7557},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useContactSyncing",{enumerable:!0,get:function(){return s.useContactSyncing}}),Object.defineProperty(n,"useShouldDispatchContactSyncing",{enumerable:!0,get:function(){return s.useShouldDispatchContactSyncing}});var s=e("./useContactSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/index.ts"}],[7557,{"../../../ducks/metamask/metamask":7448,"../../../selectors":8577,"../../../selectors/identity/authentication":8575,"../../../selectors/identity/backup-and-sync":8576,"../../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchContactSyncing=n.useContactSyncing=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=(e("react"),e("react-redux")),i=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const m=()=>{const e=(0,a.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,a.useSelector)(c.selectIsContactSyncingEnabled),n=(0,a.useSelector)(u.getUseExternalServices),s=(0,a.useSelector)(l.getIsUnlocked),r=(0,a.useSelector)(d.selectIsSignedIn),o=(0,a.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&s&&r&&o)};n.useShouldDispatchContactSyncing=m;n.useContactSyncing=()=>{const e=(0,r.c)(6),t=(0,a.useDispatch)(),n=m();let s;e[0]!==t||e[1]!==n?(s=()=>{try{if(!n)return;t((0,i.syncContactsWithUserStorage)())}catch(e){const t=e;o.default.error(t)}},e[0]=t,e[1]=n,e[2]=s):s=e[2];const c=s;let u;return e[3]!==c||e[4]!==n?(u={dispatchContactSyncing:c,shouldDispatchContactSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u}}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/useContactSyncing.ts"}],[7558,{"../../selectors/metamask-notifications/metamask-notifications":8578,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useReadNotificationsCounter=function(){const e=(0,s.c)(2),{readSnapNotificationsCount:t}=a(),{featureAnnouncementsReadCount:n}=i(),{onChainMetamaskNotificationsReadCount:r}=c(),o=t+n+r;let u;e[0]!==o?(u={notificationsReadCount:o},e[0]=o,e[1]=u):u=e[1];return u},n.useUnreadNotificationsCounter=function(){const e=(0,s.c)(2),{unreadSnapNotificationsCount:t}=a(),{featureAnnouncementsUnreadCount:n}=i(),{onChainMetamaskNotificationsUnreadCount:r}=c(),o=t+n+r;let u;e[0]!==o?(u={notificationsUnreadCount:o},e[0]=o,e[1]=u):u=e[1];return u};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../../selectors/metamask-notifications/metamask-notifications");const a=()=>{const e=(0,s.c)(3),t=(0,r.useSelector)(o.getSnapNotificationsUnreadCount),n=(0,r.useSelector)(o.getSnapNotificationsReadCount);let a;return e[0]!==n||e[1]!==t?(a={unreadSnapNotificationsCount:t,readSnapNotificationsCount:n},e[0]=n,e[1]=t,e[2]=a):a=e[2],a},i=()=>{const e=(0,s.c)(4),t=(0,r.useSelector)(o.selectIsFeatureAnnouncementsEnabled),n=(0,r.useSelector)(o.getFeatureAnnouncementsUnreadCount),a=(0,r.useSelector)(o.getFeatureAnnouncementsReadCount);let i;return e[0]!==a||e[1]!==n||e[2]!==t?(i=t?{featureAnnouncementsUnreadCount:n,featureAnnouncementsReadCount:a}:{featureAnnouncementsUnreadCount:0,featureAnnouncementsReadCount:0},e[0]=a,e[1]=n,e[2]=t,e[3]=i):i=e[3],i},c=()=>{const e=(0,s.c)(4),t=(0,r.useSelector)(o.selectIsMetamaskNotificationsEnabled),n=(0,r.useSelector)(o.getOnChainMetamaskNotificationsUnreadCount),a=(0,r.useSelector)(o.getOnChainMetamaskNotificationsReadCount);let i;return e[0]!==t||e[1]!==a||e[2]!==n?(i=t?{onChainMetamaskNotificationsUnreadCount:n,onChainMetamaskNotificationsReadCount:a}:{onChainMetamaskNotificationsUnreadCount:0,onChainMetamaskNotificationsReadCount:0},e[0]=t,e[1]=a,e[2]=n,e[3]=i):i=e[3],i}}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useCounter.tsx"}],[7559,{"../../contexts/metamask-notifications/notification-storage-keys":7419,"../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCreateNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.createOnChainTriggers)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={createNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useDisableNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.disableMetamaskNotifications)()),await(0,u.setUserHasTurnedOffNotificationsOnce)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={disableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useEnableNotifications=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let l;e[0]!==t?(l=async()=>{s(null);try{await t((0,c.enableMetamaskNotifications)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw s(t instanceof Error?t.message:"An unexpected error occurred"),i.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let m;e[2]!==d||e[3]!==n?(m={enableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=m):m=e[4];return m},n.useListNotifications=function(){const e=(0,a.useDispatch)(),[t,n]=(0,o.useState)(!1),[s,r]=(0,o.useState)(null),[u,l]=(0,o.useState)(undefined);return{listNotifications:(0,o.useCallback)(async()=>{n(!0),r(null);const t=new URLSearchParams(window.location.search).get("previewToken");try{const n=await e((0,c.fetchAndUpdateMetamaskNotifications)(t??undefined));return l(n),n}catch(e){throw i.default.error(e),r(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1)}},[e]),notificationsData:u,isLoading:t,error:s}},n.useMarkNotificationAsRead=function(){const e=(0,r.c)(4),t=(0,a.useDispatch)();let n;e[0]!==t?(n=async e=>{try{t((0,c.markMetamaskNotificationsAsRead)(e))}catch(e){const t=e;throw i.default.error(t),t}},e[0]=t,e[1]=n):n=e[1];const s=n;let o;e[2]!==s?(o={markNotificationAsRead:s},e[2]=s,e[3]=o):o=e[3];return o};var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("../../store/actions"),u=e("../../contexts/metamask-notifications/notification-storage-keys")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useNotifications.ts"}],[7560,{"../../selectors/metamask-notifications/metamask-notifications":8578,"../../store/actions":8611,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountSettingsProps=function(e){const t=(0,a.useSelector)(u.getIsUpdatingMetamaskNotificationsAccount),n=(0,a.useSelector)(u.selectIsMetamaskNotificationsEnabled),s=function(){const e=(0,a.useDispatch)(),t=(0,o.useCallback)(async t=>{try{return await e((0,c.checkAccountsPresence)(t))}catch{return{}}},[]);return t}(),[r,i]=(0,o.useState)({}),[l,d]=(0,o.useState)(!1),[m,h]=(0,o.useState)(null),p=(0,o.useMemo)(()=>JSON.stringify(e),[e]),f=(0,o.useCallback)(async e=>{try{d(!0),h(null);const t=await s(e);i(t)}catch{h("Failed to get account settings")}finally{d(!1)}},[]);return(0,o.useEffect)(()=>{if(!n)return;const e=JSON.parse(p);f(e)},[p,s,n]),{data:r,initialLoading:l,error:m,accountsBeingUpdated:t,update:f}},n.useSwitchAccountNotificationsChange=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let u;e[0]!==t?(u=async(e,n)=>{s(null);try{n?await t((0,c.enableAccounts)(e)):await t((0,c.disableAccounts)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");i.default.error(n),s(n)}t((0,c.hideLoadingIndication)())},e[0]=t,e[1]=u):u=e[1];const l=u;let d;e[2]!==n||e[3]!==l?(d={onChange:l,error:n},e[2]=n,e[3]=l,e[4]=d):d=e[4];return d},n.useSwitchFeatureAnnouncementsChange=function(){const e=(0,r.c)(5),t=(0,a.useDispatch)(),[n,s]=(0,o.useState)(null);let i;e[0]!==t?(i=async e=>{s(null);try{await t((0,c.setFeatureAnnouncementsEnabled)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");s(n)}},e[0]=t,e[1]=i):i=e[1];const u=i;let l;e[2]!==n||e[3]!==u?(l={onChange:u,error:n},e[2]=n,e[3]=u,e[4]=l):l=e[4];return l};var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("../../store/actions"),u=e("../../selectors/metamask-notifications/metamask-notifications")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useSwitchNotifications.ts"}],[7561,{"../../../shared/lib/snaps/snaps":6294,"../../selectors":8577,"../../selectors/accounts":8566,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHdKeyringsWithSnapAccounts=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/accounts"),a=e("../../selectors"),i=e("../../../shared/lib/snaps/snaps");function c(e){return e.address}n.useHdKeyringsWithSnapAccounts=()=>{const e=(0,s.c)(5),t=(0,r.useSelector)(a.getMetaMaskHdKeyrings),n=(0,r.useSelector)(o.getInternalAccounts);let u;if(e[0]!==t||e[1]!==n){let s;e[3]!==n?(s=e=>{const t=n.filter(t=>{var n;return t.metadata.snap&&(0,i.isSnapPreinstalled)(t.metadata.snap.id)&&(null===(n=t.options)||void 0===n?void 0:n.entropySource)===e.metadata.id}).map(c);return{...e,accounts:[...e.accounts,...t]}},e[3]=n,e[4]=s):s=e[4],u=t.map(s),e[0]=t,e[1]=n,e[2]=u}else u=e[2];return u}}}},{package:"$root$",file:"ui/hooks/multi-srp/useHdKeyringsWithSnapAccounts.ts"}],[7562,{"../../components/app/assets/util/formatWithThreshold":6434,"../../ducks/locale/locale":7447,"../../ducks/metamask/metamask":7448,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayBalanceCalc=function(){const e=(0,s.c)(3),t=(0,r.useSelector)(a.getCurrentCurrency),n=(0,r.useSelector)(i.getIntlLocale);let c;e[0]!==t||e[1]!==n?(c=(e,s)=>{const r=e===undefined?0:e,a=s===undefined?t:s;return(0,o.formatWithThreshold)(r,.01,n,{style:"currency",currency:a})},e[0]=t,e[1]=n,e[2]=c):c=e[2];return c};var s=e("react-compiler-runtime"),r=e("react-redux"),o=(e("react"),e("../../components/app/assets/util/formatWithThreshold")),a=e("../../ducks/metamask/metamask"),i=e("../../ducks/locale/locale")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useAccountBalance.ts"}],[7563,{"../../selectors/assets":8569,"./useAccountBalance":7562,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSingleWalletAccountsBalanceCallback=function(e){const t=(0,s.c)(5);let n;t[0]!==e?(n=(0,o.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const i=n,c=(0,r.useSelector)(i),u=(0,a.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.groups?(l=e=>{var t;const n=null===(t=c.groups)||void 0===t?void 0:t[e];if(!n)return;return u(null==n?void 0:n.totalBalanceInUserCurrency,null==n?void 0:n.userCurrency)},t[2]=u,t[3]=c.groups,t[4]=l):l=t[4];return l},n.useSingleWalletDisplayBalance=function(e){const t=(0,s.c)(6);let n;t[0]!==e?(n=(0,o.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const i=n,c=(0,r.useSelector)(i),u=(0,a.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.totalBalanceInUserCurrency||t[4]!==c.userCurrency?(l=u(c.totalBalanceInUserCurrency,c.userCurrency),t[2]=u,t[3]=c.totalBalanceInUserCurrency,t[4]=c.userCurrency,t[5]=l):l=t[5];return l};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../selectors/assets"),a=e("./useAccountBalance")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletBalance.ts"}],[7564,{"../../ducks/metamask/metamask":7448,"../../selectors/multichain-accounts/account-tree":8581,"../multi-srp/useHdKeyringsWithSnapAccounts":7561,"./utils":7565,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWalletInfo=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../multi-srp/useHdKeyringsWithSnapAccounts"),a=e("../../selectors/multichain-accounts/account-tree"),i=e("../../ducks/metamask/metamask"),c=e("./utils");n.useWalletInfo=e=>{const t=(0,s.c)(12),n=(0,o.useHdKeyringsWithSnapAccounts)(),u=(0,r.useSelector)(i.getIsPrimarySeedPhraseBackedUp);let l;t[0]!==e?(l=t=>(0,a.getMultichainAccountsByWalletId)(t,e),t[0]=e,t[1]=l):l=t[1];const d=(0,r.useSelector)(l);let m;t[2]!==d?(m=Object.values(d??{}),t[2]=d,t[3]=m):m=t[3];const h=m;let p;e:{if(0===Object.entries(h||{}).length){let e;t[4]!==h?(e={multichainAccounts:h,keyringId:undefined},t[4]=h,t[5]=e):e=t[5],p=e;break e}const s=n.findIndex(t=>t.metadata.id===(0,c.stripWalletTypePrefixFromWalletId)(e));if(-1===s){let e;t[6]!==h?(e={multichainAccounts:h,keyringId:undefined},t[6]=h,t[7]=e):e=t[7],p=e;break e}const r=n[s],o=(null==r?void 0:r.metadata.id)??undefined,a=1===s+1?u:undefined;let i;t[8]!==a||t[9]!==o||t[10]!==h?(i={multichainAccounts:h,keyringId:o,isSRPBackedUp:a},t[8]=a,t[9]=o,t[10]=h,t[11]=i):i=t[11],p=i}return p}}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletInfo.ts"}],[7566,{"./usePerpsOrderForm":7567},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"usePerpsOrderForm",{enumerable:!0,get:function(){return s.usePerpsOrderForm}});var s=e("./usePerpsOrderForm")}}},{package:"$root$",file:"ui/hooks/perps/index.ts"}],[7567,{"../../components/app/perps/order-entry/order-entry.mocks":6635,"../useFormatters":7611,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePerpsOrderForm=function(e){const t=(0,s.c)(81),{asset:n,currentPrice:i,initialDirection:c,mode:u,existingPosition:l,onFormStateChange:d,onSubmit:m,orderType:h}=e,p=h===undefined?"market":h,{formatCurrencyWithMinThreshold:f,formatTokenQuantity:g}=(0,o.useFormatters)(),[k,S]=(0,r.useState)(100);let y;t[0]!==n||t[1]!==l||t[2]!==c||t[3]!==u||t[4]!==p?(y=()=>"modify"===u&&l?{...a.mockOrderFormDefaults,asset:n,direction:c,type:p,leverage:l.leverage,takeProfitPrice:l.takeProfitPrice??"",stopLossPrice:l.stopLossPrice??"",autoCloseEnabled:Boolean(l.takeProfitPrice||l.stopLossPrice)}:{...a.mockOrderFormDefaults,asset:n,direction:c,type:p},t[0]=n,t[1]=l,t[2]=c,t[3]=u,t[4]=p,t[5]=y):y=t[5];const[v,b]=(0,r.useState)(y);let T,w,C,A,I,E,_;t[6]!==p?(T=()=>{b(e=>({...e,type:p}))},w=[p],t[6]=p,t[7]=T,t[8]=w):(T=t[7],w=t[8]);(0,r.useEffect)(T,w),t[9]!==n||t[10]!==l||t[11]!==c||t[12]!==u||t[13]!==p?(C=()=>{S(100),b("modify"===u&&l?{...a.mockOrderFormDefaults,asset:n,direction:c,type:p,leverage:l.leverage,takeProfitPrice:l.takeProfitPrice??"",stopLossPrice:l.stopLossPrice??"",autoCloseEnabled:Boolean(l.takeProfitPrice||l.stopLossPrice)}:{...a.mockOrderFormDefaults,asset:n,direction:c,type:p})},A=[u,l,n,c,p],t[9]=n,t[10]=l,t[11]=c,t[12]=u,t[13]=p,t[14]=C,t[15]=A):(C=t[14],A=t[15]);(0,r.useEffect)(C,A),t[16]!==v||t[17]!==d?(I=()=>{null==d||d(v)},E=[v,d],t[16]=v,t[17]=d,t[18]=I,t[19]=E):(I=t[18],E=t[19]);(0,r.useEffect)(I,E);e:{if("close"===u&&l){let e;t[20]!==l.size?(e=Math.abs(parseFloat(l.size))||0,t[20]=l.size,t[21]=e):e=t[21];const s=e*k/100,r=s*i,o=5e-4*r;let a,c,u,d;t[22]!==n||t[23]!==s||t[24]!==g?(a=g(s,n),t[22]=n,t[23]=s,t[24]=g,t[25]=a):a=t[25],t[26]!==r||t[27]!==f?(c=f(r,"USD"),t[26]=r,t[27]=f,t[28]=c):c=t[28],t[29]!==o||t[30]!==f?(u=f(o,"USD"),t[29]=o,t[30]=f,t[31]=u):u=t[31],t[32]!==a||t[33]!==c||t[34]!==u?(d={positionSize:a,marginRequired:null,liquidationPrice:null,orderValue:c,estimatedFees:u},t[32]=a,t[33]=c,t[34]=u,t[35]=d):d=t[35],_=d;break e}let e;if(t[36]!==v.amount){const n=v.amount.replace(/,/gu,"");e=parseFloat(n.replace(/,/gu,""))||0,t[36]=v.amount,t[37]=e}else e=t[37];const s=e;if(0===s){let e;t[38]===Symbol.for("react.memo_cache_sentinel")?(e={positionSize:null,marginRequired:null,liquidationPrice:null,orderValue:null,estimatedFees:null},t[38]=e):e=t[38],_=e;break e}const r=s*v.leverage;let o,c,d,m,h,p,S;if(t[39]!==s||t[40]!==n||t[41]!==i||t[42]!==v.direction||t[43]!==v.leverage||t[44]!==f||t[45]!==g||t[46]!==r){const e=(0,a.calculatePositionSize)(r,i),u=s,l=(0,a.estimateLiquidationPrice)(i,v.leverage,"long"===v.direction);o=5e-4*r,c=g(e,n),t[51]!==f||t[52]!==u?(d=f(u,"USD"),t[51]=f,t[52]=u,t[53]=d):d=t[53],m=f(l,"USD"),t[39]=s,t[40]=n,t[41]=i,t[42]=v.direction,t[43]=v.leverage,t[44]=f,t[45]=g,t[46]=r,t[47]=o,t[48]=c,t[49]=d,t[50]=m}else o=t[47],c=t[48],d=t[49],m=t[50];t[54]!==f||t[55]!==r?(h=f(r,"USD"),t[54]=f,t[55]=r,t[56]=h):h=t[56],t[57]!==o||t[58]!==f?(p=f(o,"USD"),t[57]=o,t[58]=f,t[59]=p):p=t[59],t[60]!==c||t[61]!==d||t[62]!==m||t[63]!==h||t[64]!==p?(S={positionSize:c,marginRequired:d,liquidationPrice:m,orderValue:h,estimatedFees:p},t[60]=c,t[61]=d,t[62]=m,t[63]=h,t[64]=p,t[65]=S):S=t[65],_=S}const P=_;let M;t[66]===Symbol.for("react.memo_cache_sentinel")?(M=e=>{b(t=>({...t,amount:e}))},t[66]=M):M=t[66];const R=M;let N;t[67]===Symbol.for("react.memo_cache_sentinel")?(N=e=>{b(t=>({...t,balancePercent:e}))},t[67]=N):N=t[67];const O=N;let x;t[68]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{b(t=>({...t,leverage:e}))},t[68]=x):x=t[68];const D=x;let B;t[69]===Symbol.for("react.memo_cache_sentinel")?(B=e=>{b(t=>({...t,autoCloseEnabled:e}))},t[69]=B):B=t[69];const F=B;let $;t[70]===Symbol.for("react.memo_cache_sentinel")?($=e=>{b(t=>({...t,takeProfitPrice:e}))},t[70]=$):$=t[70];const U=$;let L;t[71]===Symbol.for("react.memo_cache_sentinel")?(L=e=>{b(t=>({...t,stopLossPrice:e}))},t[71]=L):L=t[71];const j=L;let H;t[72]===Symbol.for("react.memo_cache_sentinel")?(H=e=>{S(e)},t[72]=H):H=t[72];const G=H;let W;t[73]!==v||t[74]!==m?(W=()=>{null==m||m(v)},t[73]=v,t[74]=m,t[75]=W):W=t[75];const q=W;let Y;t[76]!==P||t[77]!==k||t[78]!==v||t[79]!==q?(Y={formState:v,closePercent:k,calculations:P,handleAmountChange:R,handleBalancePercentChange:O,handleLeverageChange:D,handleAutoCloseEnabledChange:F,handleTakeProfitPriceChange:U,handleStopLossPriceChange:j,handleClosePercentChange:G,handleSubmit:q},t[76]=P,t[77]=k,t[78]=v,t[79]=q,t[80]=Y):Y=t[80];return Y};var s=e("react-compiler-runtime"),r=e("react"),o=e("../useFormatters"),a=e("../../components/app/perps/order-entry/order-entry.mocks")}}},{package:"$root$",file:"ui/hooks/perps/usePerpsOrderForm.ts"}],[7568,{"../../../../shared/lib/asset-utils":6224,"../../../../shared/modules/selectors/networks":6335,"../../../selectors":8577,"@metamask/utils":3554,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.RampsMetaMaskEntry=void 0;var s=e("react"),r=e("react-redux"),o=e("@metamask/utils"),a=e("../../../../shared/modules/selectors/networks"),i=e("../../../selectors"),c=e("../../../../shared/lib/asset-utils");const u="https://app.metamask.io";let l=n.RampsMetaMaskEntry=function(e){return e.BuySellButton="ext_buy_sell_button",e.NftBanner="ext_buy_banner_nfts",e.TokensBanner="ext_buy_banner_tokens",e.ActivityBanner="ext_buy_banner_activity",e.BtcBanner="ext_buy_banner_btc",e}({});n.default=(e=l.BuySellButton)=>{const t=(0,r.useSelector)(a.getCurrentChainId),n=(0,r.useSelector)(i.getMetaMetricsId),d=(0,r.useSelector)(i.getParticipateInMetaMetrics),m=(0,r.useSelector)(i.getDataCollectionForMarketing),h=(0,s.useCallback)(t=>{try{const s=new URLSearchParams;s.set("metamaskEntry",e);let r="";r=(0,c.isEvmChainId)(t)?(0,o.hexToNumber)(t).toString():t,s.set("chainId",r),n&&s.set("metametricsId",n),s.set("metricsEnabled",String(d)),m&&s.set("marketingEnabled",String(m));const a=new URL("https://app.metamask.io");return a.pathname="buy",a.search=s.toString(),a.toString()}catch{return`${u}/buy`}},[m,d,n,e]);return{openBuyCryptoInPdapp:(0,s.useCallback)(e=>{const n=h(e||t);global.platform.openTab({url:n})},[t,h]),getBuyURI:h}}}}},{package:"$root$",file:"ui/hooks/ramps/useRamps/useRamps.ts"}],[7569,{"../../ducks/metamask/metamask":7448,"../../ducks/rewards":7452,"../../ducks/rewards/selectors":7453,"../../store/actions":8611,"../../store/store":8617,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCandidateSubscriptionId=void 0;var s,r=e("react"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s},a=e("react-redux"),i=e("../../store/actions"),c=e("../../ducks/metamask/metamask"),u=e("../../ducks/rewards/selectors"),l=e("../../ducks/rewards"),d=e("../../store/store");n.useCandidateSubscriptionId=()=>{const e=(0,a.useDispatch)(),t=(0,a.useSelector)(c.getIsUnlocked),n=(0,a.useSelector)(u.selectRewardsEnabled),s=(0,a.useSelector)(u.selectCandidateSubscriptionId),m=(0,d.useAppSelector)(e=>{var t;return null===(t=e.metamask.rewardsActiveAccount)||void 0===t?void 0:t.subscriptionId}),h=(0,r.useRef)(!1),p=(0,r.useCallback)(async()=>{try{if(!n)return void e((0,l.setCandidateSubscriptionId)(null));if(m)return h.current=!1,void e((0,l.setCandidateSubscriptionId)(m));if(h.current)return;h.current=!0;const t=await e((0,i.getRewardsCandidateSubscriptionId)());e((0,l.setCandidateSubscriptionId)(t))}catch(t){o.default.error("[useCandidateSubscriptionId] Error fetching candidate subscription ID:",t),e((0,l.setCandidateSubscriptionId)("error"))}finally{h.current=!1}},[n,e,m]);return(0,r.useEffect)(()=>{"retry"===s&&p()},[s,p]),(0,r.useEffect)(()=>{t&&p()},[p,t]),{fetchCandidateSubscriptionId:p}}}}},{package:"$root$",file:"ui/hooks/rewards/useCandidateSubscriptionId.ts"}],[7570,{"../../ducks/rewards":7452,"../../store/actions":8611,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGeoRewardsMetadata=void 0;var s=e("react"),r=e("react-redux"),o=e("../../ducks/rewards"),a=e("../../store/actions");n.useGeoRewardsMetadata=({enabled:e=!0})=>{const t=(0,r.useDispatch)(),n=(0,s.useRef)(!1),i=(0,s.useCallback)(async()=>{if(!n.current&&e){n.current=!0,t((0,o.setRewardsGeoMetadataLoading)(!0)),t((0,o.setRewardsGeoMetadataError)(!1));try{const e=await t((0,a.getRewardsGeoMetadata)());t((0,o.setRewardsGeoMetadata)(e))}catch(e){t((0,o.setRewardsGeoMetadataError)(!0))}finally{n.current=!1,t((0,o.setRewardsGeoMetadataLoading)(!1))}}else e||(t((0,o.setRewardsGeoMetadataError)(!1)),t((0,o.setRewardsGeoMetadataLoading)(!1)),t((0,o.setRewardsGeoMetadata)(null)))},[t,e]);return(0,s.useEffect)(()=>{i()},[i]),{fetchGeoRewardsMetadata:i}}}}},{package:"$root$",file:"ui/hooks/rewards/useGeoRewardsMetadata.ts"}],[7571,{"../../../shared/constants/metametrics":6190,"../../contexts/metametrics":7420,"../../ducks/rewards":7452,"../../pages/multichain-accounts/account-details/account-type-utils":8297,"../../store/actions":8611,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useLinkAccountAddress=void 0;var s=e("react"),r=e("react-redux"),o=e("../../store/actions"),a=e("../../contexts/metametrics"),i=e("../../../shared/constants/metametrics"),c=e("../../pages/multichain-accounts/account-details/account-type-utils"),u=e("../../ducks/rewards");n.useLinkAccountAddress=()=>{const e=(0,r.useDispatch)(),[t,n]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),{trackEvent:m}=(0,s.useContext)(a.MetaMetricsContext),h=(0,s.useRef)(!0);(0,s.useEffect)(()=>(h.current=!0,()=>{h.current=!1}),[]);const p=(0,s.useCallback)((e,t)=>{const n={account_type:(0,c.getAccountTypeCategory)(t)};m({category:i.MetaMetricsEventCategory.Rewards,event:e,properties:n})},[m]);return{linkAccountAddress:(0,s.useCallback)(async t=>{if(!h.current)return!1;n(!0),d(!1);try{const n=await e((0,o.rewardsIsOptInSupported)({account:t}));if(!h.current)return!1;if(!n)return d(!0),!1;const s=await e((0,o.rewardsGetOptInStatus)({addresses:[t.address]}));if(!h.current)return!1;if(s.ois[0])return!0;p(i.MetaMetricsEventName.RewardsAccountLinkingStarted,t);try{const n=await e((0,o.rewardsLinkAccountsToSubscriptionCandidate)([t]));if(!h.current)return!1;const s=n[0];return null!=s&&s.success?(p(i.MetaMetricsEventName.RewardsAccountLinkingCompleted,t),e((0,u.setRewardsAccountLinkedTimestamp)(Date.now())),!0):(p(i.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}catch(e){return!!h.current&&(p(i.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}}catch(e){return!!h.current&&(d(!0),!1)}finally{h.current&&n(!1)}},[p,e]),isLoading:t,isError:l}}}}},{package:"$root$",file:"ui/hooks/rewards/useLinkAccountAddress.ts"}],[7572,{"../../../shared/constants/metametrics":6190,"../../components/app/rewards/utils/handleRewardsErrorMessage":6691,"../../contexts/metametrics":7420,"../../ducks/rewards":7452,"../../selectors":8577,"../../selectors/multichain-accounts/account-tree":8581,"../../store/actions":8611,"../useI18nContext":7615,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOptIn=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../selectors/multichain-accounts/account-tree"),c=e("../../ducks/rewards"),u=e("../../selectors"),l=e("../../contexts/metametrics"),d=e("../../../shared/constants/metametrics"),m=e("../../store/actions"),h=e("../../components/app/rewards/utils/handleRewardsErrorMessage"),p=e("../useI18nContext");n.useOptIn=e=>{const[t,n]=(0,r.useState)(null),s=(0,o.useDispatch)(),[f,g]=(0,r.useState)(!1),{trackEvent:k}=(0,r.useContext)(l.MetaMetricsContext),S=(0,p.useI18nContext)(),y=(0,o.useSelector)(i.getSelectedAccountGroup),v=(0,o.useSelector)(u.getSelectedAccount),{id:b}=(0,o.useSelector)(e=>(0,i.getWalletIdAndNameByAccountAddress)(e,v.address))||{walletId:undefined},T=(0,o.useSelector)(e=>b?(0,i.getMultichainAccountsByWalletId)(e,b):{}),w=(0,r.useMemo)(()=>T?Object.keys(T)[0]:undefined,[T]),C=(0,o.useSelector)(e=>w?(0,i.getInternalAccountsFromGroupById)(e,w):[]),A=(0,o.useSelector)(e=>y?(0,i.getInternalAccountsFromGroupById)(e,y):[]);return{optin:(0,r.useCallback)(async t=>{const r={referred:Boolean(t),referral_code_used:t};k({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInStarted,properties:r});let o=null;try{g(!0),n(null);const i=w&&C.length>0?C:A,c=w&&C.length>0?A:C;if(o=await s((0,m.rewardsOptIn)({accounts:i,referralCode:t})),o){if(c.length>0)try{await s((0,m.rewardsLinkAccountsToSubscriptionCandidate)(c))}catch{}k({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInCompleted,properties:r});try{await s((0,m.updateMetaMetricsTraits)({[d.MetaMetricsUserTrait.HasRewardsOptedIn]:"on",...t&&{[d.MetaMetricsUserTrait.RewardsReferred]:!0,[d.MetaMetricsUserTrait.RewardsReferralCodeUsed]:t}}))}catch{}if(null!=e&&e.rewardPoints&&null!=e&&e.shieldSubscriptionId)try{await s((0,m.linkRewardToShieldSubscription)(e.shieldSubscriptionId,e.rewardPoints))}catch(e){a.default.warn("Failed to link reward to shield subscription",e)}}}catch(e){k({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInFailed,properties:r});const t=(0,h.handleRewardsErrorMessage)(e,S);n(t)}o&&s((0,c.setCandidateSubscriptionId)(o)),g(!1)},[k,w,C,A,s,S,null==e?void 0:e.rewardPoints,null==e?void 0:e.shieldSubscriptionId]),optinLoading:f,optinError:t,clearOptinError:(0,r.useCallback)(()=>n(null),[])}}}}},{package:"$root$",file:"ui/hooks/rewards/useOptIn.ts"}],[7573,{"../../../shared/constants/rewards":6201,"../../ducks/metamask/metamask":7448,"../../ducks/rewards":7452,"../../ducks/rewards/selectors":7453,"../../store/actions":8611,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSeasonStatus=void 0;var s=e("react"),r=e("react-redux"),o=e("../../store/actions"),a=e("../../ducks/metamask/metamask"),i=e("../../ducks/rewards/selectors"),c=e("../../ducks/rewards"),u=e("../../../shared/constants/rewards");n.useSeasonStatus=({subscriptionId:e,onAuthorizationError:t})=>{const n=(0,r.useDispatch)(),l=(0,r.useSelector)(a.getIsUnlocked),d=(0,r.useSelector)(i.selectRewardsEnabled),m=(0,s.useRef)(null),h=(0,s.useCallback)(async()=>{if(!e||"pending"===e||"retry"===e||"error"===e||!d)return n((0,c.setSeasonStatus)(null)),n((0,c.setSeasonStatusError)(null)),void n((0,c.setSeasonStatusLoading)(!1));if(!Boolean(m.current)||m.current!==e){m.current=e,n((0,c.setSeasonStatusLoading)(!0));try{const t=await n((0,o.getRewardsSeasonMetadata)("current"));if(!t)throw new Error("No season metadata found");const s=await n((0,o.getRewardsSeasonStatus)(e,t.id));n((0,c.setSeasonStatus)(s)),n((0,c.setSeasonStatusError)(null))}catch(e){const s=e instanceof Error?e.message:"Unknown error";n((0,c.setSeasonStatusError)(s)),(s.includes(u.REWARDS_ERROR_MESSAGES.AUTHORIZATION_FAILED)||s.includes(u.REWARDS_ERROR_MESSAGES.SEASON_NOT_FOUND))&&t&&(await t(),n((0,c.setSeasonStatus)(null)))}finally{m.current=null,n((0,c.setSeasonStatusLoading)(!1))}}},[e,t,d,n]);return(0,s.useEffect)(()=>{l&&e&&h()},[l,h,e]),{fetchSeasonStatus:h}}}}},{package:"$root$",file:"ui/hooks/rewards/useSeasonStatus.ts"}],[7574,{"../../store/actions":8611,lodash:5239,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useValidateReferralCode=void 0;var s=e("react"),r=e("lodash"),o=e("react-redux"),a=e("../../store/actions");n.useValidateReferralCode=(e="",t=1e3)=>{const[n,i]=(0,s.useState)(e),[c,u]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),p=(0,s.useRef)(!1),f=(0,o.useDispatch)(),g=(0,s.useCallback)(async e=>{try{return await f((0,a.validateRewardsReferralCode)(e))?"":"Invalid code"}catch(e){return h(!0),"Unknown error"}},[f]),k=(0,s.useCallback)((0,r.debounce)(async e=>{h(!1);const t=await g(e);u(t),d(!1)},t),[t,g]),S=(0,s.useCallback)(e=>{const t=e.trim().toUpperCase();if(i(t),t.length<6)return k.cancel(),d(!1),void u("minLength 6 characters");t&&d(!0),k(t)},[k]);(0,s.useEffect)(()=>{p.current?e!==n&&S(e):(S(e),p.current=!0)},[e]),(0,s.useEffect)(()=>()=>k.cancel(),[k]);const y=Boolean(n)&&!c&&!l;return{referralCode:n,setReferralCode:S,validateCode:g,isValidating:l,isValid:y,isUnknownError:m}}}}},{package:"$root$",file:"ui/hooks/rewards/useValidateReferralCode.ts"}],[7575,{"../../../../shared/constants/metametrics":6190,"../../../../shared/constants/subscriptions":6208,"../../../../shared/modules/shield":6342,"../../../contexts/metametrics":7420,"../../../selectors":8577,"../../../selectors/multichain-accounts/account-tree":8581,"../../../store/actions":8611,"../../useAccountTotalFiatBalance":7592,"./utils":7576,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionMetrics=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../../contexts/metametrics"),i=e("../../../../shared/constants/metametrics"),c=e("../../../selectors"),u=e("../../useAccountTotalFiatBalance"),l=e("../../../../shared/modules/shield"),d=e("../../../store/actions"),m=e("../../../../shared/constants/subscriptions"),h=e("../../../selectors/multichain-accounts/account-tree"),p=e("./utils");function f(e){return(0,h.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}n.useSubscriptionMetrics=()=>{const e=(0,s.c)(72),t=(0,o.useDispatch)(),{trackEvent:n}=(0,r.useContext)(a.MetaMetricsContext),h=(0,o.useSelector)(f),g=(0,o.useSelector)(c.getMetaMaskHdKeyrings),{totalFiatBalance:k}=(0,u.useAccountTotalFiatBalance)(h,!0,!0),S=(0,o.useSelector)(c.getPendingShieldCohortTxType);let y;e[0]!==t||e[1]!==k?(y=async e=>{await t((0,d.setShieldSubscriptionMetricsProps)({marketingUtmParams:e.marketingUtmParams,source:e.source,userBalanceInUSD:Number(k),rewardPoints:e.rewardPoints}))},e[0]=t,e[1]=k,e[2]=y):y=e[2];const v=y;let b;e[3]!==g||e[4]!==h||e[5]!==k||e[6]!==n?(b=async(e,t)=>{const s=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),r=(0,p.formatCaptureShieldEligibilityCohortEventsProps)(e,Number(k));n({event:t,category:i.MetaMetricsEventCategory.Shield,properties:{...s,...r}})},e[3]=g,e[4]=h,e[5]=k,e[6]=n,e[7]=b):b=e[7];const T=b;let w;e[8]!==g||e[9]!==S||e[10]!==h||e[11]!==k||e[12]!==n?(w=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=e.source===m.ShieldMetricsSourceEnum.PostTransaction?S:undefined;n({event:i.MetaMetricsEventName.ShieldEntryModal,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...(0,l.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,modal_type:e.type,modal_cta_action_clicked:e.modalCtaActionClicked,post_transaction_type:s}})},e[8]=g,e[9]=S,e[10]=h,e[11]=k,e[12]=n,e[13]=w):w=e[13];const C=w;let A;e[14]!==g||e[15]!==h||e[16]!==k||e[17]!==n?(A=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,p.formatDefaultShieldSubscriptionRequestEventProps)(e);n({event:i.MetaMetricsEventName.ShieldSubscriptionRequest,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s}})},e[14]=g,e[15]=h,e[16]=k,e[17]=n,e[18]=A):A=e[18];const I=A;let E;e[19]!==g||e[20]!==h||e[21]!==k||e[22]!==n?(E=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipRestartRequest,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.requestStatus,error:e.errorMessage}})},e[19]=g,e[20]=h,e[21]=k,e[22]=n,e[23]=E):E=e[23];const _=E;let P;e[24]!==g||e[25]!==h||e[26]!==k||e[27]!==n?(P=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipCancelled,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.cancellationStatus,error:e.errorMessage,latest_subscription_duration:e.latestSubscriptionDuration}})},e[24]=g,e[25]=h,e[26]=k,e[27]=n,e[28]=P):P=e[28];const M=P;let R;e[29]!==g||e[30]!==h||e[31]!==k||e[32]!==n?(R=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,p.formatCaptureShieldPaymentMethodChangeEventProps)(e);n({event:i.MetaMetricsEventName.ShieldPaymentMethodChange,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,status:e.changeStatus,error:e.errorMessage}})},e[29]=g,e[30]=h,e[31]=k,e[32]=n,e[33]=R):R=e[33];const N=R;let O;e[34]!==g||e[35]!==h||e[36]!==k||e[37]!==n?(O=(e,t)=>{const s=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),r=(0,l.formatExistingSubscriptionEventProps)(e);n({event:t,category:i.MetaMetricsEventCategory.Shield,properties:{...s,...r}})},e[34]=g,e[35]=h,e[36]=k,e[37]=n,e[38]=O):O=e[38];const x=O;let D;e[39]!==g||e[40]!==h||e[41]!==k||e[42]!==n?(D=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,p.formatCaptureShieldCtaClickedEventProps)(e);n({event:i.MetaMetricsEventName.ShieldCtaClicked,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s}})},e[39]=g,e[40]=h,e[41]=k,e[42]=n,e[43]=D):D=e[43];const B=D;let F;e[44]!==g||e[45]!==h||e[46]!==k||e[47]!==n?(F=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k));n({event:i.MetaMetricsEventName.ShieldClaimSubmission,category:i.MetaMetricsEventCategory.Shield,properties:{...t,subscription_status:e.subscriptionStatus,attachments_count:e.attachmentsCount,submission_status:e.submissionStatus,error:e.errorMessage}})},e[44]=g,e[45]=h,e[46]=k,e[47]=n,e[48]=F):F=e[48];const $=F;let U;e[49]!==g||e[50]!==h||e[51]!==k||e[52]!==n?(U=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:i.MetaMetricsEventName.ShieldMembershipErrorStateClicked,category:i.MetaMetricsEventCategory.Shield,properties:{...t,...s,type:e.errorCause,action:e.actionClicked,location:e.location,view:e.view}})},e[49]=g,e[50]=h,e[51]=k,e[52]=n,e[53]=U):U=e[53];const L=U;let j;e[54]!==g||e[55]!==h||e[56]!==k||e[57]!==n?(j=e=>{const t=(0,l.getShieldCommonTrackingProps)(h,g,Number(k));n({event:i.MetaMetricsEventName.ShieldSubscriptionUnexpectedErrorEvent,category:i.MetaMetricsEventCategory.Shield,properties:{...t,error_message:e.errorMessage,location:e.location}})},e[54]=g,e[55]=h,e[56]=k,e[57]=n,e[58]=j):j=e[58];const H=j;let G;return e[59]!==x||e[60]!==$||e[61]!==B||e[62]!==T||e[63]!==C||e[64]!==L||e[65]!==M||e[66]!==N||e[67]!==I||e[68]!==_||e[69]!==H||e[70]!==v?(G={setShieldSubscriptionMetricsPropsToBackground:v,captureShieldEntryModalEvent:C,captureShieldSubscriptionRequestEvent:I,captureShieldMembershipCancelledEvent:M,captureShieldPaymentMethodChangeEvent:N,captureShieldCtaClickedEvent:B,captureShieldClaimSubmissionEvent:$,captureShieldEligibilityCohortEvent:T,captureCommonExistingShieldSubscriptionEvents:x,captureShieldErrorStateClickedEvent:L,captureShieldSubscriptionRestartRequestEvent:_,captureShieldUnexpectedErrorEvent:H},e[59]=x,e[60]=$,e[61]=B,e[62]=T,e[63]=C,e[64]=L,e[65]=M,e[66]=N,e[67]=I,e[68]=_,e[69]=H,e[70]=v,e[71]=G):G=e[71],G}}}},{package:"$root$",file:"ui/hooks/shield/metrics/useSubscriptionMetrics.ts"}],[7576,{"../../../../shared/modules/shield":6342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatCaptureShieldCtaClickedEventProps=function(e){return{...(0,s.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,page:e.redirectToPage,url:e.redirectToUrl,cta_action_clicked:e.ctaActionClicked}},n.formatCaptureShieldEligibilityCohortEventsProps=function(e,t){const n={multi_chain_balance_category:(0,s.getUserBalanceCategory)(Number(t)),number_of_eligible_cohorts:e.numberOfEligibleCohorts,assigned_cohort:e.cohort};"modalType"in e&&(n.modal_type=e.modalType);return n},n.formatCaptureShieldPaymentMethodChangeEventProps=function(e){const t=(0,s.formatExistingSubscriptionEventProps)(e),n=(0,s.getBillingIntervalForMetrics)(e.newBillingInterval);return{...t,new_payment_type:e.newPaymentType,new_billing_interval:n,new_crypto_payment_chain:e.newCryptoPaymentChain,new_payment_currency:e.newPaymentCurrency}},n.formatDefaultShieldSubscriptionRequestEventProps=function(e){const t=(0,s.getBillingIntervalForMetrics)(e.defaultBillingInterval),n=(0,s.getBillingIntervalForMetrics)(e.billingInterval),r=(0,s.getBillingCyclesForMetrics)(e.billingInterval);return{...(0,s.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,post_transaction_type:e.postTransactionType,subscription_state:e.subscriptionState,default_payment_type:e.defaultPaymentType,default_payment_currency:e.defaultPaymentCurrency,default_billing_interval:t,default_payment_chain:e.defaultPaymentChain,payment_type:e.paymentType,payment_currency:e.paymentCurrency,is_trial:e.isTrialSubscription,billing_interval:n,billing_cycles:r,payment_chain:e.paymentChain,has_sufficient_crypto_balance:e.hasSufficientCryptoBalance,gas_sponsored:e.gasSponsored,error:e.errorMessage,status:e.requestStatus}};var s=e("../../../../shared/modules/shield")}}},{package:"$root$",file:"ui/hooks/shield/metrics/utils.ts"}],[7577,{"../../pages/settings/transaction-shield-tab/claims-form/constants":8482,"../../selectors/shield/claims":8599,"../../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimDraft=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../store/actions"),a=e("../../selectors/shield/claims"),i=e("../../pages/settings/transaction-shield-tab/claims-form/constants");async function c(e){return await(0,o.saveClaimDraft)(e)}async function u(e){await(0,o.deleteClaimDraft)(e)}n.useClaimDraft=()=>{const e=(0,s.c)(6),t=(0,r.useSelector)(a.getClaimDrafts),n=c;let o;e[0]!==t?(o=e=>t.find(t=>t.draftId===e),e[0]=t,e[1]=o):o=e[1];const l=o,d=u,m=t.length>=i.MAX_DRAFT_CLAIMS;let h;return e[2]!==t||e[3]!==l||e[4]!==m?(h={drafts:t,hasMaxDrafts:m,saveDraft:n,getDraft:l,deleteDraft:d},e[2]=t,e[3]=l,e[4]=m,e[5]=h):h=e[5],h}}}},{package:"$root$",file:"ui/hooks/shield/useClaimDraft.ts"}],[7578,{"../../contexts/claims/claims":7412,"../../pages/settings/transaction-shield-tab/types":8503,"../../store/actions":8611,"./useClaimDraft":7577,react:5657,"react-compiler-runtime":5571,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimState=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-router-dom"),a=e("../../contexts/claims/claims"),i=e("../../store/actions"),c=e("../../pages/settings/transaction-shield-tab/types"),u=e("./useClaimDraft");n.useClaimState=e=>{const t=(0,s.c)(30),n=e===undefined?c.CLAIMS_FORM_MODES.NEW:e,{pathname:l}=(0,o.useLocation)(),{claims:d}=(0,a.useClaims)(),{getDraft:m}=(0,u.useClaimDraft)(),[h,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,T]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[A,I]=(0,r.useState)();let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E=[],t[0]=E):E=t[0];const[_,P]=(0,r.useState)(E),[M,R]=(0,r.useState)(""),[N,O]=(0,r.useState)(),x=n===c.CLAIMS_FORM_MODES.VIEW,D=n===c.CLAIMS_FORM_MODES.EDIT_DRAFT;let B;t[1]!==l?(B=l.split("/").pop(),t[1]=l,t[2]=B):B=t[2];const F=B,$=(0,r.useRef)(null);let U,L,j,H,G,W,q,Y;return t[3]!==h||t[4]!==k||t[5]!==x?(U=()=>{!x&&h&&k&&(async()=>{const e=await(0,i.generateClaimSignature)(h,k);R(e)})()},L=[x,h,k],t[3]=h,t[4]=k,t[5]=x,t[6]=U,t[7]=L):(U=t[6],L=t[7]),(0,r.useEffect)(U,L),t[8]!==F||t[9]!==d||t[10]!==x?(j=()=>{if(x&&F){const e=d.find(e=>e.id===F);e&&(g(e.email),p(e.chainId),S(e.impactedWalletAddress),v(e.impactedTxHash),T(e.reimbursementWalletAddress),C(e.description),P(e.attachments||[]))}},H=[x,F,d],t[8]=F,t[9]=d,t[10]=x,t[11]=j,t[12]=H):(j=t[11],H=t[12]),(0,r.useEffect)(j,H),t[13]!==F||t[14]!==m||t[15]!==D?(G=()=>{if($.current!==F&&D&&F){const e=m(F);e&&($.current=F,O(e.draftId),g(e.email||""),p(e.chainId||""),S(e.impactedWalletAddress||""),v(e.impactedTxHash||""),T(e.reimbursementWalletAddress||""),C(e.description||""))}},W=[D,F,m],t[13]=F,t[14]=m,t[15]=D,t[16]=G,t[17]=W):(G=t[16],W=t[17]),(0,r.useEffect)(G,W),t[18]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{p(""),g(""),S(""),v(""),T(""),C(""),I(undefined),O(undefined)},t[18]=q):q=t[18],t[19]!==w||t[20]!==h||t[21]!==M||t[22]!==N||t[23]!==f||t[24]!==A||t[25]!==y||t[26]!==k||t[27]!==b||t[28]!==_?(Y={chainId:h,setChainId:p,email:f,setEmail:g,impactedWalletAddress:k,setImpactedWalletAddress:S,impactedTransactionHash:y,setImpactedTransactionHash:v,reimbursementWalletAddress:b,setReimbursementWalletAddress:T,caseDescription:w,setCaseDescription:C,files:A,setFiles:I,uploadedFiles:_,claimSignature:M,currentDraftId:N,clear:q},t[19]=w,t[20]=h,t[21]=M,t[22]=N,t[23]=f,t[24]=A,t[25]=y,t[26]=k,t[27]=b,t[28]=_,t[29]=Y):Y=t[29],Y}}}},{package:"$root$",file:"ui/hooks/shield/useClaimState.ts"}],[7579,{"../../../shared/modules/conversion.utils":6315,"../../../shared/modules/hexstring-utils":6324,"../../selectors":8577,"../../selectors/multichain-accounts/account-tree":8581,"../../selectors/snaps":8605,"@metamask/utils":3554,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=void 0;var s=e("react-compiler-runtime"),r=e("@metamask/utils"),o=e("react-redux"),a=e("../../selectors/snaps"),i=e("../../../shared/modules/hexstring-utils"),c=e("../../../shared/modules/conversion.utils"),u=e("../../selectors/multichain-accounts/account-tree"),l=e("../../selectors");n.useDisplayName=e=>{var t;const n=(0,s.c)(11),{address:d,chain:m}=e,{namespace:h,reference:p}=m,f=h===r.KnownCaipNamespace.Eip155;let g;n[0]!==d||n[1]!==f?(g=f?(0,i.toChecksumHexAddress)(d):d,n[0]=d,n[1]=f,n[2]=g):g=n[2];const k=g,S=(0,o.useSelector)(l.getIsMultichainAccountsState2Enabled);let y;n[3]!==k?(y=e=>(0,u.getAccountGroupsByAddress)(e,[k]),n[3]=k,n[4]=y):y=n[4];const v=null===(t=(0,o.useSelector)(y)[0])||void 0===t?void 0:t.metadata.name;let b;n[5]!==k?(b=e=>(0,a.getAccountNameFromState)(e,k),n[5]=k,n[6]=b):b=n[6];const T=(0,o.useSelector)(b);let w;n[7]!==f||n[8]!==k||n[9]!==p?(w=e=>(0,a.getAddressBookEntryByNetwork)(e,k,`0x${(0,c.decimalToHex)(f?p:"0")}`),n[7]=f,n[8]=k,n[9]=p,n[10]=w):w=n[10];const C=(0,o.useSelector)(w);return S&&v||T||f&&(null==C?void 0:C.name)||undefined}}}},{package:"$root$",file:"ui/hooks/snaps/useDisplayName.ts"}],[7580,{"../../selectors":8577,"@metamask/snaps-sdk":3265,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useInsightSnaps=function(e){const t=(0,s.c)(9);let n;t[0]!==e?(n=t=>(0,a.getSnapInsights)(t,e),t[0]=e,t[1]=n):n=t[1];const o=(0,r.useSelector)(n);let c;t[2]!==o?(c=o?Object.values(o):[],t[2]=o,t[3]=c):c=t[3];const u=c;let l;t[4]!==u?(l=u.filter(i),t[4]=u,t[5]=l):l=t[5];const d=l;let m;t[6]!==u||t[7]!==d?(m={data:u,warnings:d},t[6]=u,t[7]=d,t[8]=m):m=t[8];return m};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/snaps-sdk"),a=e("../../selectors");function i(e){return e.severity===o.SeverityLevel.Critical}}}},{package:"$root$",file:"ui/hooks/snaps/useInsightSnaps.js"}],[7581,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react");n.default=()=>{const e=(0,s.c)(4),t=(0,r.useRef)(null),[n,o]=(0,r.useState)(!1);let a,i,c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{o(t.current&&t.current.offsetHeight<t.current.scrollHeight)},i=[t],e[0]=a,e[1]=i):(a=e[0],i=e[1]),(0,r.useEffect)(a,i),e[2]!==n?(c={contentRef:t,isOverflowing:n},e[2]=n,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useIsOverflowing.js"}],[7582,{"../../store/actions":8611,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSafeWebsite=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("../../store/actions");n.useSafeWebsite=e=>{const t=(0,s.c)(3),[n,a]=(0,r.useState)();let i,c;return t[0]!==e?(i=()=>{e&&(async()=>{(await(0,o.getPhishingResult)(e)).result||a(new URL(e))})()},c=[e],t[0]=e,t[1]=i,t[2]=c):(i=t[1],c=t[2]),(0,r.useEffect)(i,c),n}}}},{package:"$root$",file:"ui/hooks/snaps/useSafeWebsite.ts"}],[7583,{"../../helpers/utils/util":7518,"@metamask/snaps-utils":3382,react:5657,"react-compiler-runtime":5571,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-router-dom")),o=e("@metamask/snaps-utils"),a=e("../../helpers/utils/util");n.default=()=>{const e=(0,s.c)(4),t=(0,r.useNavigate)();let n;e[0]!==t?(n=e=>{let n;const s=(0,o.parseMetaMaskUrl)(e);n=s.snapId?(0,a.getSnapRoute)(s.snapId):s.path,t(n)},e[0]=t,e[1]=n):n=e[1];const i=n;let c;return e[2]!==i?(c={handleSnapNavigate:i},e[2]=i,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNavigation.ts"}],[7584,{"../../store/actions":8611,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapSettings=function({snapId:e}){const t=(0,r.useDispatch)(),[n,a]=(0,s.useState)(!0),[i,c]=(0,s.useState)(undefined),[u,l]=(0,s.useState)(undefined);return(0,s.useEffect)(()=>{let n=!1;return e&&async function(e){try{l(undefined),a(!0);const s=await(0,o.handleSnapRequest)({snapId:e,origin:"metamask",handler:"onSettingsPage",request:{jsonrpc:"2.0",method:" "}});n||(c(s),(0,o.forceUpdateMetamaskState)(t))}catch(e){n||l(e)}finally{n||a(!1)}}(e),()=>{n=!0}},[e]),{data:i,error:u,loading:n}};var s=e("react"),r=e("react-redux"),o=e("../../store/actions")}}},{package:"$root$",file:"ui/hooks/snaps/useSnapSettings.ts"}],[7585,{"../../selectors":8577,"../../store/actions":8611,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSyncSRPs=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../store/actions"),c=e("../../selectors");n.useSyncSRPs=()=>{const e=(0,o.useDispatch)(),t=(0,o.useSelector)(c.getIsSocialLoginFlow),[n,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{if(t)try{s(!0),await e((0,i.syncSeedPhrases)())}catch(e){a.default.error("[useSyncSRPs] error",e)}finally{s(!1)}})()},[e,t]),{loading:n}}}}},{package:"$root$",file:"ui/hooks/social-sync/useSyncSRPs.ts"}],[7586,{"../../../shared/constants/time":6211,"../../../shared/lib/shield":6293,"../../store/actions":8611,"../useAsync":7595,"../useThrottle":7647,"./useSubscription":7588,"./useSubscriptionPricing":7589,"@metamask/subscription-controller":3411,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldSubscriptionCryptoSufficientBalanceCheck=n.useShieldAddFundTrigger=n.useHandleShieldAddFundTrigger=void 0;var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=e("@metamask/subscription-controller"),c=(s=e("loglevel"))&&s.__esModule?s:{default:s},u=e("../../store/actions"),l=e("../../../shared/lib/shield"),d=e("../useAsync"),m=e("../../../shared/constants/time"),h=e("../useThrottle"),p=e("./useSubscriptionPricing"),f=e("./useSubscription");const g=()=>{const e=(0,r.c)(19),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,t),{subscriptionPricing:s}=(0,p.useSubscriptionPricing)(),o=(0,p.useSubscriptionPaymentMethods)(i.PAYMENT_TYPES.byCrypto,s),a=null==n?void 0:n.paymentMethod;let c;var u;e[0]!==a||e[1]!==(null==o?void 0:o.chains)?(c=a?null==o||null===(u=o.chains)||void 0===u||null===(u=u.find(e=>{var t;return e.chainId.toLowerCase()===(null==a||null===(t=a.crypto)||void 0===t||null===(t=t.chainId)||void 0===t?void 0:t.toLowerCase())}))||void 0===u?void 0:u.tokens.find(e=>{var t;return e.symbol.toLowerCase()===(null==a||null===(t=a.crypto)||void 0===t||null===(t=t.tokenSymbol)||void 0===t?void 0:t.toLowerCase())}):undefined,e[0]=a,e[1]=null==o?void 0:o.chains,e[2]=c):c=e[2];const l=c,d=(0,p.useSubscriptionProductPlans)(i.PRODUCT_TYPES.SHIELD,s);let m;e[3]!==d||e[4]!==(null==n?void 0:n.interval)?(m=null==d?void 0:d.find(e=>e.interval===(null==n?void 0:n.interval)),e[3]=d,e[4]=null==n?void 0:n.interval,e[5]=m):m=e[5];const h=m,g=null==o?void 0:o.chains;let k;e[6]!==h||e[7]!==g?(k={paymentChains:g,price:h,productType:i.PRODUCT_TYPES.SHIELD},e[6]=h,e[7]=g,e[8]=k):k=e[8];const{availableTokenBalances:S}=(0,p.useAvailableTokenBalances)(k);let y;e:{if(!a||!l){y=undefined;break e}let t;if(e[9]!==S||e[10]!==a||e[11]!==l){let n;e[13]!==a||e[14]!==l?(n=e=>{var t,n;return(null===(t=a.crypto)||void 0===t?void 0:t.chainId)===e.chainId&&l.address.toLowerCase()===(null===(n=e.address)||void 0===n?void 0:n.toLowerCase())},e[13]=a,e[14]=l,e[15]=n):n=e[15],t=S.find(n),e[9]=S,e[10]=a,e[11]=l,e[12]=t}else t=e[12];const n=t;n&&n.balance?y=n:y=undefined}const v=y,b=Boolean(v);let T;return e[16]!==b||e[17]!==v?(T={hasAvailableSelectedToken:b,validTokenBalance:v},e[16]=b,e[17]=v,e[18]=T):T=e[18],T};n.useShieldSubscriptionCryptoSufficientBalanceCheck=g;const k=()=>{const e=(0,a.useDispatch)(),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,t),s=n&&(0,l.getIsShieldSubscriptionPaused)(n),{subscriptionPricing:r}=(0,p.useSubscriptionPricing)(),m=(0,p.useSubscriptionProductPlans)(i.PRODUCT_TYPES.SHIELD,r),h=(0,o.useMemo)(()=>null==m?void 0:m.find(e=>e.interval===(null==n?void 0:n.interval)),[m,n]),g=null==n?void 0:n.paymentMethod,[k,S]=(0,d.useAsyncCallback)(async()=>{if(!(n&&h&&g&&s))throw new Error("Invalid parameters to handle shield add fund trigger");try{await e((0,u.updateSubscriptionCryptoPaymentMethod)({subscriptionId:n.id,paymentType:i.PAYMENT_TYPES.byCrypto,recurringInterval:n.interval,chainId:g.crypto.chainId,payerAddress:g.crypto.payerAddress,tokenSymbol:g.crypto.tokenSymbol,billingCycles:n.billingCycles??(null==h?void 0:h.minBillingCycles),rawTransaction:undefined})),await e((0,u.getSubscriptions)())}catch(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}},[e,n,h,g,s]);return{handleTriggerSubscriptionCheck:k,result:S}};n.useHandleShieldAddFundTrigger=k;const S=5*m.MINUTE;function y(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}n.useShieldAddFundTrigger=()=>{var e;const t=(0,r.c)(8),{subscriptions:n}=(0,f.useUserSubscriptions)(),s=(0,f.useUserSubscriptionByProduct)(i.PRODUCT_TYPES.SHIELD,n);let a;t[0]!==s?(a=s&&(0,l.getIsShieldSubscriptionPaused)(s),t[0]=s,t[1]=a):a=t[1];const c=a,u=null==s?void 0:s.paymentMethod,d=(null==u||null===(e=u.crypto)||void 0===e?void 0:e.error)===i.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,{hasAvailableSelectedToken:m}=g(),p=(0,h.useThrottle)(m,S),{handleTriggerSubscriptionCheck:v}=k();let b,T;t[2]!==v||t[3]!==d||t[4]!==c||t[5]!==p?(b=()=>{c&&d&&p&&v().catch(y)},T=[c,d,p,v],t[2]=v,t[3]=d,t[4]=c,t[5]=p,t[6]=b,t[7]=T):(b=t[6],T=t[7]),(0,o.useEffect)(b,T)}}}},{package:"$root$",file:"ui/hooks/subscription/useAddFundTrigger.ts"}],[7587,{"../../../shared/constants/subscriptions":6208,"../../../shared/lib/shield":6293,"../../helpers/constants/routes":7465,"../../pages/settings/transaction-shield-tab/types":8503,"../../store/actions":8611,"../shield/metrics/useSubscriptionMetrics":7575,"../useAsync":7595,"./useAddFundTrigger":7586,"./useSubscription":7588,"./useSubscriptionPricing":7589,"@metamask/subscription-controller":3411,react:5657,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHandlePayment=void 0;var s=e("react"),r=e("react-router-dom"),o=e("@metamask/subscription-controller"),a=e("../../../shared/lib/shield"),i=e("../shield/metrics/useSubscriptionMetrics"),c=e("../../../shared/constants/subscriptions"),u=e("../../helpers/constants/routes"),l=e("../../pages/settings/transaction-shield-tab/types"),d=e("../useAsync"),m=e("../../store/actions"),h=e("./useSubscriptionPricing"),p=e("./useAddFundTrigger"),f=e("./useSubscription");n.useHandlePayment=({currentShieldSubscription:e,displayedShieldSubscription:t,isCancelled:n,onOpenAddFundsModal:g,subscriptions:k,subscriptionPricing:S})=>{const y=(0,r.useNavigate)(),{captureShieldErrorStateClickedEvent:v}=(0,i.useSubscriptionMetrics)(),b=(0,h.useSubscriptionPaymentMethods)(o.PAYMENT_TYPES.byCrypto,S),T=(0,s.useMemo)(()=>{var e;if(!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;const n=null==b||null===(e=b.chains)||void 0===e?void 0:e.find(e=>e.chainId===t.paymentMethod.crypto.chainId);return null==n?void 0:n.tokens.find(e=>e.symbol===t.paymentMethod.crypto.tokenSymbol)},[b,t]),{hasAvailableSelectedToken:w}=(0,p.useShieldSubscriptionCryptoSufficientBalanceCheck)(),{handleTriggerSubscriptionCheck:C,result:A}=(0,p.useHandleShieldAddFundTrigger)(),[I,E]=(0,f.useUpdateSubscriptionCardPaymentMethod)({subscription:e,newRecurringInterval:null==e?void 0:e.interval}),{handleClickContactSupport:_}=(0,f.useHandleSubscriptionSupportAction)(),P=(0,s.useMemo)(()=>null==t?void 0:t.products.find(e=>e.name===o.PRODUCT_TYPES.SHIELD),[t]),{value:M}=(0,d.useAsyncResult)(async()=>{if(!T||!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;return await(0,m.getSubscriptionCryptoApprovalAmount)({chainId:t.paymentMethod.crypto.chainId,paymentTokenAddress:T.address,productType:o.PRODUCT_TYPES.SHIELD,interval:t.interval})},[T,t]),R=(0,s.useMemo)(()=>t&&T&&(0,l.isCryptoPaymentMethod)(t.paymentMethod)&&t.endDate&&P&&M?{chainId:t.paymentMethod.crypto.chainId,address:T.address,symbol:T.symbol,approvalAmount:{approveAmount:M.approveAmount,chainId:t.paymentMethod.crypto.chainId,paymentAddress:t.paymentMethod.crypto.payerAddress,paymentTokenAddress:T.address}}:undefined,[P,T,t,M]),{execute:N}=(0,f.useSubscriptionCryptoApprovalTransaction)(R),{execute:O,result:x}=(0,f.useUpdateSubscriptionCryptoPaymentMethod)({subscription:e}),D=(0,s.useMemo)(()=>(0,a.getIsShieldSubscriptionPaused)(k??[]),[k]),B=(0,s.useMemo)(()=>!!e&&(D&&(0,l.isCryptoPaymentMethod)(e.paymentMethod)&&!e.paymentMethod.crypto.error),[e,D]),F=(0,s.useMemo)(()=>!(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))&&e.paymentMethod.crypto.error===o.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,[e]),$=(0,s.useMemo)(()=>{if(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))return!1;const{error:t}=e.paymentMethod.crypto;return t===o.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_ALLOWANCE||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_TOO_OLD||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_REVERTED||t===o.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_MAX_VERIFICATION_ATTEMPTS_REACHED},[e]);return{handlePaymentError:(0,s.useCallback)(async()=>{if(e&&v({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,errorCause:"payment_error",actionClicked:c.ShieldErrorStateActionClickedEnum.Cta,location:c.ShieldErrorStateLocationEnum.Settings,view:c.ShieldErrorStateViewEnum.Banner}),n)y({pathname:u.SHIELD_PLAN_ROUTE,search:`?source=${c.ShieldMetricsSourceEnum.ShieldSettings}`});else if(B)_();else if(e&&(0,l.isCryptoPaymentMethod)(e.paymentMethod))if(F)g();else{if(!$)throw new Error("Unknown crypto error action");await N()}else await I()},[e,n,B,F,$,g,N,I,_,y,v]),handlePaymentErrorInsufficientFunds:(0,s.useCallback)(async()=>{F&&w&&await C()},[F,w,C]),handlePaymentMethodChange:(0,s.useCallback)(async(e,t)=>{try{if(e===o.PAYMENT_TYPES.byCard)await I();else if(e===o.PAYMENT_TYPES.byCrypto){if(!t)throw new Error("No token selected");O(t)}}catch(e){console.error("Error changing payment method",e)}},[I,O]),isUnexpectedErrorCryptoPayment:B,isInsufficientFundsCrypto:F,isAllowanceNeededCrypto:$,hasAvailableSelectedTokenToTriggerCheckInsufficientFunds:w,resultTriggerSubscriptionCheckInsufficientFunds:A,updateSubscriptionCardPaymentMethodResult:E,updateSubscriptionCryptoPaymentMethodResult:x,currentToken:T}}}}},{package:"$root$",file:"ui/hooks/subscription/useHandlePayment.ts"}],[7588,{"../../../shared/constants/metametrics":6190,"../../../shared/constants/subscriptions":6208,"../../../shared/lib/shield":6293,"../../../shared/lib/ui-utils":6306,"../../../shared/modules/conversion.utils":6315,"../../../shared/modules/selectors/networks":6335,"../../../shared/modules/shield":6342,"../../../shared/modules/string-utils":6346,"../../ducks/metamask/metamask":7448,"../../helpers/constants/routes":7465,"../../helpers/utils/window":7520,"../../pages/confirmations/send-utils/send.utils":8246,"../../pages/settings/transaction-shield-tab/types":8503,"../../selectors":8577,"../../selectors/identity/authentication":8575,"../../selectors/multichain-accounts/account-tree":8581,"../../selectors/subscription":8606,"../../store/actions":8611,"../shield/metrics/useSubscriptionMetrics":7575,"../useAccountTotalFiatBalance":7592,"../useAsync":7595,"./useSubscriptionPricing":7589,"@metamask/subscription-controller":3411,"@metamask/transaction-controller":3473,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserSubscriptions=n.useUserSubscriptionByProduct=n.useUserLastSubscriptionByProduct=n.useUpdateSubscriptionCryptoPaymentMethod=n.useUpdateSubscriptionCardPaymentMethod=n.useUnCancelSubscription=n.useSubscriptionEligibility=n.useSubscriptionCryptoApprovalTransaction=n.useShieldRewards=n.useOpenGetSubscriptionBillingPortal=n.useHandleSubscriptionSupportAction=n.useHandleSubscription=n.useCancelSubscription=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("react"),i=e("@metamask/subscription-controller"),c=(s=e("loglevel"))&&s.__esModule?s:{default:s},u=e("react-router-dom"),l=e("@metamask/transaction-controller"),d=e("../../selectors/subscription"),m=e("../../store/actions"),h=e("../useAsync"),p=e("../../selectors/identity/authentication"),f=e("../../ducks/metamask/metamask"),g=e("../../../shared/lib/shield"),k=e("../../pages/confirmations/send-utils/send.utils"),S=e("../../../shared/modules/conversion.utils"),y=e("../../helpers/constants/routes"),v=e("../../selectors/multichain-accounts/account-tree"),b=e("../../selectors"),T=e("../shield/metrics/useSubscriptionMetrics"),w=e("../../../shared/constants/subscriptions"),C=e("../../../shared/modules/shield"),A=e("../../helpers/utils/window"),I=e("../../../shared/lib/ui-utils"),E=e("../../../shared/constants/metametrics"),_=e("../useAccountTotalFiatBalance"),P=e("../../../shared/modules/selectors/networks"),M=e("../../pages/settings/transaction-shield-tab/types"),R=e("../../../shared/modules/string-utils"),N=e("./useSubscriptionPricing");const O=e=>{const t=(0,r.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:s}=n,a=(0,o.useDispatch)(),i=(0,o.useSelector)(d.getUserSubscriptions);let c,u;t[2]!==a||t[3]!==s?(c=async()=>{if(s)return await a((0,m.getSubscriptions)())},u=[s,a],t[2]=a,t[3]=s,t[4]=c,t[5]=u):(c=t[4],u=t[5]);const l=(0,h.useAsyncResult)(c,u);let p;return t[6]!==l.error||t[7]!==l.pending||t[8]!==i?(p={...i,loading:l.pending,error:l.error},t[6]=l.error,t[7]=l.pending,t[8]=i,t[9]=p):p=t[9],p};n.useUserSubscriptions=O;n.useUserSubscriptionByProduct=(e,t)=>{const n=(0,r.c)(3);let s;return n[0]!==e||n[1]!==t?(s=null==t?void 0:t.find(t=>t.products.some(t=>t.name===e)),n[0]=e,n[1]=t,n[2]=s):s=n[2],s};n.useUserLastSubscriptionByProduct=(e,t)=>null!=t&&t.products.some(t=>t.name===e)?t:undefined;n.useCancelSubscription=e=>{const t=(0,r.c)(14),n=(0,o.useDispatch)(),{captureShieldMembershipCancelledEvent:s}=(0,T.useSubscriptionMetrics)();let a;t[0]!==e?(a=e?(0,g.getSubscriptionDurationInDays)(e):0,t[0]=e,t[1]=a):a=t[1];const i=a;let c;t[2]!==s||t[3]!==i||t[4]!==e?(c=(t,n)=>{if(!e)return;const{cryptoPaymentChain:r,cryptoPaymentCurrency:o}=(0,g.getSubscriptionPaymentData)(e);s({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:r,cryptoPaymentCurrency:o,cancellationStatus:t,errorMessage:n,latestSubscriptionDuration:i})},t[2]=s,t[3]=i,t[4]=e,t[5]=c):c=t[5];const u=c;let l,d;return t[6]!==n||t[7]!==e||t[8]!==u?(l=async()=>{try{if(!e)return;const t=e.id;await n((0,m.cancelSubscription)({subscriptionId:t})),u("succeeded")}catch(e){const t=e,n=t instanceof Error?t.message:"Unknown error";throw u("failed",n),t}},t[6]=n,t[7]=e,t[8]=u,t[9]=l):l=t[9],t[10]!==s||t[11]!==n||t[12]!==e?(d=[n,e,s],t[10]=s,t[11]=n,t[12]=e,t[13]=d):d=t[13],(0,h.useAsyncCallback)(l,d)};n.useUnCancelSubscription=e=>{const t=(0,o.useDispatch)(),{captureShieldSubscriptionRestartRequestEvent:n}=(0,T.useSubscriptionMetrics)(),s=(0,a.useCallback)((t,s)=>{if(!e)return;const{cryptoPaymentChain:r,cryptoPaymentCurrency:o}=(0,g.getSubscriptionPaymentData)(e);n({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:r,cryptoPaymentCurrency:o,requestStatus:t,errorMessage:s})},[n,e]);return(0,h.useAsyncCallback)(async()=>{try{const n=null==e?void 0:e.id;if(!n)return;await t((0,m.unCancelSubscription)({subscriptionId:n})),s("completed")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw s("failed",t),e}},[t,e,s])};n.useOpenGetSubscriptionBillingPortal=e=>{const t=(0,r.c)(7),n=(0,o.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:s}=(0,T.useSubscriptionMetrics)();let a;t[0]!==s||t[1]!==e?(a=()=>{if(!e)return;const{cryptoPaymentChain:t,cryptoPaymentCurrency:n}=(0,g.getSubscriptionPaymentData)(e);s({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:t,cryptoPaymentCurrency:n},E.MetaMetricsEventName.ShieldBillingHistoryOpened)},t[0]=s,t[1]=e,t[2]=a):a=t[2];const i=a;let c,u;return t[3]!==n||t[4]!==i?(c=async()=>{const{url:e}=await n((0,m.getSubscriptionBillingPortalUrl)());return i(),await platform.openTab({url:e})},u=[n,i],t[3]=n,t[4]=i,t[5]=c,t[6]=u):(c=t[5],u=t[6]),(0,h.useAsyncCallback)(c,u)};n.useUpdateSubscriptionCardPaymentMethod=({subscription:e,newRecurringInterval:t})=>{const n=(0,o.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:s}=(0,T.useSubscriptionMetrics)();return(0,h.useAsyncCallback)(async()=>{try{if(!e||!t)throw new Error("Subscription ID and recurring interval are required");const r=e.id;await n((0,m.updateSubscriptionCardPaymentMethod)({subscriptionId:r,paymentType:i.PAYMENT_TYPES.byCard,recurringInterval:t})),s({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:t},E.MetaMetricsEventName.ShieldPaymentMethodUpdated)}catch(e){if(e instanceof Error&&(0,C.isNonUISubscriptionError)(e))return void c.default.warn("[Shield - useUpdateSubscriptionCardPaymentMethod] Non-UI error filtered:",e.message);throw e}},[n,e,t,s])};const x=e=>{const t=(0,r.c)(12),n=(0,u.useNavigate)(),{subscriptionPricing:s}=(0,N.useSubscriptionPricing)(),i=(0,o.useSelector)(D),c=(0,o.useSelector)(P.getNetworkConfigurationsByChainId),d=(0,o.useSelector)(b.getUnapprovedConfirmations).length>0,[h,p]=(0,a.useState)(!1);let f,g,v;t[0]!==d||t[1]!==n||t[2]!==h?(f=()=>{d&&h&&n(y.CONFIRM_TRANSACTION_ROUTE)},g=[d,h,n],t[0]=d,t[1]=n,t[2]=h,t[3]=f,t[4]=g):(f=t[3],g=t[4]),(0,a.useEffect)(f,g),t[5]!==(null==i?void 0:i.address)||t[6]!==c||t[7]!==e||t[8]!==s?(v=async()=>{var t,n;if(!s)throw new Error("Subscription pricing not found");if(!e)throw new Error("No token selected");const r=c[e.chainId],o=null==r||null===(t=r.rpcEndpoints[r.defaultRpcEndpointIndex??0])||void 0===t?void 0:t.networkClientId,a=null==s||null===(n=s.paymentMethods)||void 0===n||null===(n=n.find(B))||void 0===n||null===(n=n.chains)||void 0===n||null===(n=n.find(t=>t.chainId===(null==e?void 0:e.chainId)))||void 0===n?void 0:n.paymentAddress,u=(0,k.generateERC20ApprovalData)({spenderAddress:a,amount:(0,S.decimalToHex)(e.approvalAmount.approveAmount)}),d={from:null==i?void 0:i.address,to:e.address,value:"0x0",data:u};d.gas=await(0,m.estimateGas)(d);const h={type:l.TransactionType.shieldSubscriptionApprove,networkClientId:o};await(0,m.addTransaction)(d,h),p(!0)},t[5]=null==i?void 0:i.address,t[6]=c,t[7]=e,t[8]=s,t[9]=v):v=t[9];const T=v;let w;return t[10]!==T?(w={execute:T},t[10]=T,t[11]=w):w=t[11],w};n.useSubscriptionCryptoApprovalTransaction=x;n.useSubscriptionEligibility=e=>{const t=(0,o.useDispatch)(),n=(0,o.useSelector)(p.selectIsSignedIn),s=(0,o.useSelector)(f.getIsUnlocked),r=(0,o.useSelector)(e=>(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")),{totalFiatBalance:i}=(0,_.useAccountTotalFiatBalance)(r,!1,!0);return{getSubscriptionEligibility:(0,a.useCallback)(async()=>{try{if(!n||!s)return undefined;const r=(0,C.getUserBalanceCategory)(Number(i)),o=await t((0,m.getSubscriptions)());if(!(0,g.getIsShieldSubscriptionActive)(o)){return(await t((0,m.getSubscriptionsEligibilities)({balanceCategory:r}))).find(t=>t.product===e)}return undefined}catch(e){return c.default.warn("[useSubscriptionEligibility] error",e),undefined}},[n,s,t,e,i])}};n.useHandleSubscription=({selectedPaymentMethod:e,selectedToken:t,selectedPlan:n,defaultOptions:s,isTrialed:r,useTestClock:l=!1,rewardPoints:d})=>{const p=(0,o.useDispatch)(),{search:f}=(0,u.useLocation)(),{execute:g}=x(t),{lastSubscription:k}=O(),{captureShieldSubscriptionRequestEvent:S,setShieldSubscriptionMetricsPropsToBackground:y}=(0,T.useSubscriptionMetrics)(),v=(0,o.useSelector)(b.getModalTypeForShieldEntryModal),A=(0,a.useMemo)(()=>k?w.ShieldSubscriptionRequestSubscriptionStateEnum.Renew:w.ShieldSubscriptionRequestSubscriptionStateEnum.New,[k]),I=(0,a.useCallback)(()=>{const e=(0,C.getShieldMarketingUtmParamsForMetrics)(f),t=(0,C.determineSubscriptionMetricsSourceFromMarketingUtmParams)(e);if(t)return t;switch(new URLSearchParams(f).get("source")){case"homepage":return w.ShieldMetricsSourceEnum.Homepage;case"post_transaction":return w.ShieldMetricsSourceEnum.PostTransaction;case"notification":return w.ShieldMetricsSourceEnum.Notification;case"carousel":return w.ShieldMetricsSourceEnum.Carousel;case"marketing":return w.ShieldMetricsSourceEnum.Marketing;default:return w.ShieldMetricsSourceEnum.Settings}},[f]),[E,_]=(0,h.useAsyncCallback)(async()=>{try{await p((0,m.setLastUsedSubscriptionPaymentDetails)(i.PRODUCT_TYPES.SHIELD,{type:e,paymentTokenAddress:null==t?void 0:t.address,paymentTokenSymbol:null==t?void 0:t.symbol,plan:n,useTestClock:l}));const o=(0,C.getShieldMarketingUtmParamsForMetrics)(f);await p((0,m.setDefaultSubscriptionPaymentOptions)(s)),await y({source:I(),marketingUtmParams:o,rewardPoints:d});const a=I(),c={subscriptionState:A,defaultPaymentType:s.defaultPaymentType,defaultPaymentCurrency:s.defaultPaymentCurrency,defaultBillingInterval:s.defaultBillingInterval,defaultPaymentChain:s.defaultPaymentChain,paymentType:e,paymentCurrency:"USD",isTrialSubscription:!r,billingInterval:n,source:a,type:v,marketingUtmParams:o};e===i.PAYMENT_TYPES.byCard?(S({...c,paymentCurrency:"USD",requestStatus:"started"}),await p((0,m.startSubscriptionWithCard)({products:[i.PRODUCT_TYPES.SHIELD],isTrialRequested:!r,recurringInterval:n,useTestClock:l}))):e===i.PAYMENT_TYPES.byCrypto&&await g()}catch(e){if(e instanceof Error&&(0,C.isNonUISubscriptionError)(e))return void c.default.warn("[Shield - useHandleSubscription] Non-UI error filtered:",e.message);throw e}},[p,e,null==t?void 0:t.address,null==t?void 0:t.symbol,n,l,f,s,y,I,d,A,r,v,S,g]);return{handleSubscription:E,subscriptionResult:_}};n.useHandleSubscriptionSupportAction=()=>{var e;const t=(0,r.c)(6),n=(0,o.useSelector)(p.selectSessionData),s=null==n||null===(e=n.profile)||void 0===e?void 0:e.profileId,a=(0,o.useSelector)(b.getMetaMetricsId),{customerId:i}=O();let c;t[0]!==a||t[1]!==s||t[2]!==i?(c=()=>{let e=I.SUPPORT_LINK;const t=new URLSearchParams;t.append("metamask_version","13.18.1"),s&&t.append("metamask_profile_id",s),a&&t.append("metamask_metametrics_id",a),i&&t.append("shield_id",i);const n=t.toString();n&&(e+=`?${n}`),(0,A.openWindow)(e)},t[0]=a,t[1]=s,t[2]=i,t[3]=c):c=t[3];const u=c;let l;return t[4]!==u?(l={handleClickContactSupport:u},t[4]=u,t[5]=l):l=t[5],l};n.useUpdateSubscriptionCryptoPaymentMethod=e=>{const t=(0,r.c)(13),{subscription:n}=e,s=(0,o.useDispatch)(),[c,u]=(0,a.useState)(),{execute:l}=x(c);let d,p;t[0]!==s||t[1]!==l||t[2]!==c||t[3]!==n?(d=async()=>{if(!n)throw new Error("No subscription exist");if(!(0,M.isCryptoPaymentMethod)(n.paymentMethod))throw new Error("Subscription is not a crypto payment method");if(!c)throw new Error("No token selected");await s((0,m.setLastUsedSubscriptionPaymentDetails)(i.PRODUCT_TYPES.SHIELD,{type:i.PAYMENT_TYPES.byCrypto,paymentTokenAddress:c.address,paymentTokenSymbol:c.symbol,plan:n.interval})),await l()},p=[n,l,s,c],t[0]=s,t[1]=l,t[2]=c,t[3]=n,t[4]=d,t[5]=p):(d=t[4],p=t[5]);const[f,g]=(0,h.useAsyncCallback)(d,p),k=null==c?void 0:c.address;let S,y,v;t[6]!==f||t[7]!==k?(S=()=>{k&&f().then(()=>{u(undefined)})},y=[k,f],t[6]=f,t[7]=k,t[8]=S,t[9]=y):(S=t[8],y=t[9]),(0,a.useEffect)(S,y),t[10]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{if(!e)throw new Error("No token selected");u(e)},t[10]=v):v=t[10];const b=v;let T;return t[11]!==g?(T={execute:b,result:g},t[11]=g,t[12]=T):T=t[12],T};function D(e){return(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}function B(e){return e.type===i.PAYMENT_TYPES.byCrypto}n.useShieldRewards=()=>{const e=(0,r.c)(24),t=(0,o.useDispatch)(),[n]=(0,o.useSelector)(b.getMetaMaskHdKeyrings),s=(0,o.useSelector)(b.getUpdatedAndSortedAccountsWithCaipAccountId);let a;e:{if(!n){a=null;break e}let t;if(e[0]!==s||e[1]!==n){let r;e[3]!==n?(r=e=>{var t;const s=null===(t=e.options)||void 0===t?void 0:t.entropySource;return"string"==typeof s&&(0,R.isEqualCaseInsensitive)(s,n.metadata.id)},e[3]=n,e[4]=r):r=e[4],t=s.find(r),e[0]=s,e[1]=n,e[2]=t}else t=e[2];t?a=t.caipAccountId:a=null}const i=a;let c,u;e[5]!==i||e[6]!==t?(c=async()=>{if(!i)return!1;return await t((0,m.getRewardsHasAccountOptedIn)(i))},e[5]=i,e[6]=t,e[7]=c):c=e[7],e[8]!==i?(u=[i],e[8]=i,e[9]=u):u=e[9];const{value:l,pending:d,error:p}=(0,h.useAsyncResult)(c,u);let f,g;e[10]!==i||e[11]!==t?(f=async()=>{if(!i)return{monthly:null,yearly:null};const[e,n]=await Promise.all([t((0,m.estimateRewardsPoints)({activityType:"SHIELD",account:i,activityContext:{shieldContext:{recurringInterval:"month"}}})),t((0,m.estimateRewardsPoints)({activityType:"SHIELD",account:i,activityContext:{shieldContext:{recurringInterval:"year"}}}))]);return{monthly:(null==e?void 0:e.pointsEstimate)??null,yearly:(null==n?void 0:n.pointsEstimate)??null}},g=[t,i],e[10]=i,e[11]=t,e[12]=f,e[13]=g):(f=e[12],g=e[13]);const{value:k,pending:S,error:y}=(0,h.useAsyncResult)(f,g);let v,T;e[14]!==t?(v=async()=>{const e=await t((0,m.getRewardsSeasonMetadata)("current"));if(!e)return!1;const n=Date.now();return n>=e.startDate&&n<=e.endDate},T=[t],e[14]=t,e[15]=v,e[16]=T):(v=e[15],T=e[16]);const{value:w,pending:C,error:A}=(0,h.useAsyncResult)(v,T);if(y||A||p){let t;return y&&console.error("[useShieldRewards error]:",y),A&&console.error("[useShieldRewards error]:",A),p&&console.error("[useShieldRewards error]:",p),e[17]===Symbol.for("react.memo_cache_sentinel")?(t={pending:!1,pointsMonthly:null,pointsYearly:null,isRewardsSeason:!1,hasAccountOptedIn:!1},e[17]=t):t=e[17],t}const I=S||C||d,E=(null==k?void 0:k.monthly)??null,_=(null==k?void 0:k.yearly)??null,P=w??!1,M=l??!1;let N;return e[18]!==P||e[19]!==M||e[20]!==I||e[21]!==E||e[22]!==_?(N={pending:I,pointsMonthly:E,pointsYearly:_,isRewardsSeason:P,hasAccountOptedIn:M},e[18]=P,e[19]=M,e[20]=I,e[21]=E,e[22]=_,e[23]=N):N=e[23],N}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscription.ts"}],[7589,{"../../../shared/constants/transaction":6213,"../../selectors/assets":8569,"../../selectors/multichain-accounts/account-tree":8581,"../../selectors/subscription":8606,"../../store/actions":8611,"../useAsync":7595,"../useTokenBalances":7649,"bignumber.js":4362,loglevel:5247,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionProductPlans=n.useSubscriptionPricing=n.useSubscriptionPaymentMethods=n.useAvailableTokenBalances=void 0;var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("bignumber.js"),c=e("../../selectors/subscription"),u=e("../../store/actions"),l=e("../../selectors/assets"),d=e("../useTokenBalances"),m=e("../../../shared/constants/transaction"),h=e("../useAsync"),p=e("../../selectors/multichain-accounts/account-tree");n.useAvailableTokenBalances=e=>{const t=(0,r.c)(27),{paymentChains:n,price:s,productType:c}=e;let S;t[0]!==n?(S=null==n?void 0:n.map(f),t[0]=n,t[1]=S):S=t[1];const y=S;let v;t[2]!==n?(v=null==n?void 0:n.reduce(g,{}),t[2]=n,t[3]=v):v=t[3];const b=v,T=(0,o.useSelector)(p.getSelectedAccountGroup),[w]=(0,o.useSelector)(k),C=(null==w?void 0:w.id)??T;let A;t[4]!==C?(A=e=>(0,p.getInternalAccountByGroupAndCaip)(e,C,"eip155:1"),t[4]=C,t[5]=A):A=t[5];const I=(0,o.useSelector)(A);let E;t[6]!==(null==I?void 0:I.address)?(E=e=>(0,l.getTokenBalancesEvm)(e,null==I?void 0:I.address),t[6]=null==I?void 0:I.address,t[7]=E):E=t[7];const _=(0,o.useSelector)(E);let P,M;if(t[8]!==y?(P={chainIds:y},t[8]=y,t[9]=P):P=t[9],(0,d.useTokenBalances)(P),t[10]!==_||t[11]!==b){let e;t[13]!==b?(e=e=>{const t=null==b?void 0:b[e.chainId];if(!Boolean(t))return!1;if(!(null==t?void 0:t.some(t=>t.address.toLowerCase()===e.address.toLowerCase())))return!1;return!!(e.balance&&parseFloat(e.balance)>0)},t[13]=b,t[14]=e):e=t[14],M=_.filter(e),t[10]=_,t[11]=b,t[12]=M}else M=t[12];const R=M;let N,O;t[15]!==b||t[16]!==s||t[17]!==c||t[18]!==R?(N=async()=>{if(!s||!b)return[];const e=[];return(await Promise.all(R.map(e=>{var t;return(null==b||null===(t=b[e.chainId])||void 0===t?void 0:t.find(t=>t.address.toLowerCase()===e.address.toLowerCase()))?(0,u.getSubscriptionCryptoApprovalAmount)({chainId:e.chainId,paymentTokenAddress:e.address,productType:c,interval:s.interval}):(a.default.error("[useAvailableTokenBalances] tokenPaymentInfo not found",e),null)}))).forEach((t,n)=>{const r=R[n];if(!r.balance)return;const o=new i.BigNumber(r.balance),a=s.minBillingCyclesForBalance??1,c=new i.BigNumber(s.unitAmount).div(new i.BigNumber(10).pow(s.unitDecimals)).mul(a);t&&o.gte(c)&&e.push({...r,approvalAmount:{approveAmount:t.approveAmount,chainId:r.chainId,paymentAddress:t.paymentAddress,paymentTokenAddress:t.paymentTokenAddress},type:r.isNative?m.AssetType.native:m.AssetType.token})}),e},O=[s,c,b,R],t[15]=b,t[16]=s,t[17]=c,t[18]=R,t[19]=N,t[20]=O):(N=t[19],O=t[20]);const{value:x,pending:D,error:B}=(0,h.useAsyncResult)(N,O);let F,$;return t[21]!==x?(F=x??[],t[21]=x,t[22]=F):F=t[22],t[23]!==B||t[24]!==D||t[25]!==F?($={availableTokenBalances:F,pending:D,error:B},t[23]=B,t[24]=D,t[25]=F,t[26]=$):$=t[26],$};n.useSubscriptionPricing=e=>{const t=(0,r.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:s}=n,a=(0,o.useDispatch)(),i=(0,o.useSelector)(c.getSubscriptionPricing);let l,d;t[2]!==a||t[3]!==s?(l=async()=>{if(s)return await a((0,u.getSubscriptionPricing)())},d=[a,s],t[2]=a,t[3]=s,t[4]=l,t[5]=d):(l=t[4],d=t[5]);const{pending:m,error:p}=(0,h.useAsyncResult)(l,d);let f;return t[6]!==p||t[7]!==m||t[8]!==i?(f={subscriptionPricing:i,loading:m,error:p},t[6]=p,t[7]=m,t[8]=i,t[9]=f):f=t[9],f};n.useSubscriptionProductPlans=(e,t)=>{const n=(0,r.c)(3);let s;var o;n[0]!==(null==t?void 0:t.products)||n[1]!==e?(s=null==t||null===(o=t.products.find(t=>t.name===e))||void 0===o?void 0:o.prices,n[0]=null==t?void 0:t.products,n[1]=e,n[2]=s):s=n[2];return s};function f(e){return e.chainId}function g(e,t){return e[t.chainId]=t.tokens,e}function k(e){return(0,p.getAccountGroupsByAddress)(e,[""])}n.useSubscriptionPaymentMethods=(e,t)=>{const n=(0,r.c)(3);let s;return n[0]!==e||n[1]!==(null==t?void 0:t.paymentMethods)?(s=null==t?void 0:t.paymentMethods.find(t=>t.type===e),n[0]=e,n[1]=null==t?void 0:t.paymentMethods,n[2]=s):s=n[2],s}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscriptionPricing.ts"}],[7590,{"../../shared/lib/multichain/scope-utils":6287,"../selectors/multichain-accounts/account-tree":8581,"@metamask/chain-agnostic-permission":1610,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountGroupsForPermissions=n.supportsNamespaces=n.supportsChainIds=n.hasRequestedAccountIds=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/chain-agnostic-permission"),a=(e("react"),e("../selectors/multichain-accounts/account-tree")),i=e("../../shared/lib/multichain/scope-utils");const c=(e,t)=>e.accounts.some(e=>(0,i.hasChainIdSupport)(e.scopes,t));n.supportsChainIds=c;const u=(e,t)=>e.accounts.some(e=>(0,i.hasNamespaceSupport)(e.scopes,t));n.supportsNamespaces=u;const l=(e,t)=>e.accounts.some(e=>{try{return(0,o.isInternalAccountInPermittedAccountIds)(e,t)}catch{return!1}});n.hasRequestedAccountIds=l;n.useAccountGroupsForPermissions=(e,t,n,d)=>{const m=(0,s.c)(19),h=(0,r.useSelector)(a.getSelectedAccountGroup),p=(0,r.useSelector)(a.getAccountGroupWithInternalAccounts);let f;if(m[0]!==p||m[1]!==e||m[2]!==t||m[3]!==n||m[4]!==d||m[5]!==h){let s;m[7]!==h?(s=e=>e.id===h,m[7]=h,m[8]=s):s=m[8];const r=p.find(s),a=(0,o.getCaipAccountIdsFromCaip25CaveatValue)(e),g=new Set(d);let k=p;r&&(k=Array.from(new Set([r,...p])));const S=e=>{return t=a,e.accounts.some(e=>{try{return(0,o.isInternalAccountInPermittedAccountIds)(e,t)}catch{return!1}});var t},y=e=>n.length>0?c(e,n):u(e,g);let v;m[9]!==t?(v=e=>l(e,t),m[9]=t,m[10]=v):v=m[10];const b=v,T=k.filter(S),w=k.filter(e=>y(e)&&!b(e)),C=k.filter(e=>S(e)&&b(e)),A=k.filter(e=>y(e)&&b(e)),I=k.filter(e=>S(e)||b(e)),E=Array.from(new Set([...(0,i.getCaip25AccountIdsFromAccountGroupAndScope)(I,n)])),_=A.length>0,P=w.length>0;let M;m[11]===Symbol.for("react.memo_cache_sentinel")?(M=[],m[11]=M):M=m[11];let R=M;if(!_&&P){const e=r&&(n.length>0?c(r,n):u(r,g))?r:w[0];e&&(R=[e])}const N=new Set([...A,...R]);f={selectedAndRequestedAccountGroups:Array.from(N),supportedAccountGroups:Array.from(new Set([...A,...w])),connectedAccountGroups:Array.from(new Set([...C,...T])),connectedCaipAccountIds:a,connectedAccountGroupWithRequested:Array.from(new Set(I)),caipAccountIdsOfConnectedAndRequestedAccountGroups:E},m[0]=p,m[1]=e,m[2]=t,m[3]=n,m[4]=d,m[5]=h,m[6]=f}else f=m[6];const g=f;let k;return m[12]!==g.caipAccountIdsOfConnectedAndRequestedAccountGroups||m[13]!==g.connectedAccountGroupWithRequested||m[14]!==g.connectedAccountGroups||m[15]!==g.connectedCaipAccountIds||m[16]!==g.selectedAndRequestedAccountGroups||m[17]!==g.supportedAccountGroups?(k={connectedAccountGroups:g.connectedAccountGroups,supportedAccountGroups:g.supportedAccountGroups,existingConnectedCaipAccountIds:g.connectedCaipAccountIds,connectedAccountGroupWithRequested:g.connectedAccountGroupWithRequested,caipAccountIdsOfConnectedAndRequestedAccountGroups:g.caipAccountIdsOfConnectedAndRequestedAccountGroups,selectedAndRequestedAccountGroups:g.selectedAndRequestedAccountGroups},m[12]=g.caipAccountIdsOfConnectedAndRequestedAccountGroups,m[13]=g.connectedAccountGroupWithRequested,m[14]=g.connectedAccountGroups,m[15]=g.connectedCaipAccountIds,m[16]=g.selectedAndRequestedAccountGroups,m[17]=g.supportedAccountGroups,m[18]=k):k=m[18],k}}}},{package:"$root$",file:"ui/hooks/useAccountGroupsForPermissions.ts"}],[7591,{"../../shared/constants/network":6194,"../../shared/modules/conversion.utils":6315,"../../shared/modules/selectors/networks":6335,"../ducks/metamask/metamask":7448,"../helpers/utils/token-util":7514,"../selectors":8577,"ethereumjs-util":4728,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalCrossChainFiatBalance=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("ethereumjs-util"),a=(e("react"),e("../ducks/metamask/metamask")),i=e("../selectors"),c=e("../../shared/modules/conversion.utils"),u=e("../helpers/utils/token-util"),l=e("../../shared/modules/selectors/networks"),d=e("../../shared/constants/network");function m(e){return null!==e}function h(e){return e!==undefined}function p(e,t){const n=t.tokenFiatBalances.filter(h),s=(0,c.sumDecimals)(t.nativeFiatValue,...n);return e+(s.toNumber?s.toNumber():Number(s))}n.useAccountTotalCrossChainFiatBalance=(e,t)=>{const n=(0,s.c)(26),h=(0,r.useSelector)(l.getNetworkConfigurationsByChainId),f=(0,r.useSelector)(i.getEnabledNetworks);let g;n[0]!==f?(g=Object.assign({},...Object.values(f??{})),n[0]=f,n[1]=g):g=n[1];const k=g,S=(0,r.useSelector)(a.getCurrencyRates),y=(0,r.useSelector)(a.getCurrentCurrency),v=(0,r.useSelector)(i.getCrossChainTokenExchangeRates,r.shallowEqual),b=(0,r.useSelector)(i.getCrossChainMetaMaskCachedBalances);let T;n[2]!==v?(T={...v},n[2]=v,n[3]=T):T=n[3];const w=T;let C;if(n[4]!==k||n[5]!==t){let e;n[7]!==k?(e=e=>Object.keys(k).includes(e.chainId.toString())?e:null,n[7]=k,n[8]=e):e=n[8],C=t.map(e).filter(m),n[4]=k,n[5]=t,n[6]=C}else C=n[6];const A=C;let I,E;n[9]!==(null==e?void 0:e.address)||n[10]!==h||n[11]!==b||n[12]!==S||n[13]!==y||n[14]!==A||n[15]!==w?(I=()=>A.map(t=>{var n,s;const{tokensWithBalances:r}=t,a=d.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[t.chainId]??h[t.chainId].nativeCurrency,i=null==S||null===(n=S[a])||void 0===n?void 0:n.conversionRate,l=r.map(e=>{var n;const s=null==w||null===(n=w[t.chainId])||void 0===n?void 0:n[(0,o.toChecksumAddress)(e.address)];return(0,u.getTokenFiatAmount)(s,i,y,e.string,e.symbol,!1,!1)}),m=(null==b||null===(s=b[t.chainId])||void 0===s?void 0:s[null==e?void 0:e.address])??0,p=(0,c.getValueFromWeiHex)({value:m,toCurrency:y,conversionRate:i,numberOfDecimals:2});return{...t,tokenFiatBalances:l,nativeFiatValue:p}}),n[9]=null==e?void 0:e.address,n[10]=h,n[11]=b,n[12]=S,n[13]=y,n[14]=A,n[15]=w,n[16]=I):I=n[16],null==e||e.address,n[17]!==I?(E=I(),n[17]=I,n[18]=E):E=n[18];const _=E;let P;n[19]!==_?(P=_.reduce(p,0),n[19]=_,n[20]=P):P=n[20];const M=P;let R,N;return n[21]!==M?(R=M.toString(10),n[21]=M,n[22]=R):R=n[22],n[23]!==R||n[24]!==_?(N={totalFiatBalance:R,tokenFiatBalancesCrossChains:_},n[23]=R,n[24]=_,n[25]=N):N=n[25],N}}}},{package:"$root$",file:"ui/hooks/useAccountTotalCrossChainFiatBalance.ts"}],[7592,{"../../shared/modules/conversion.utils":6315,"../../shared/modules/selectors/networks":6335,"../ducks/metamask/metamask":7448,"../helpers/utils/confirm-tx.util":7486,"../helpers/utils/token-util":7514,"../helpers/utils/util":7518,"../selectors":8577,"./useTokenBalances":7649,"ethereumjs-util":4728,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTotalFiatBalance=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("ethereumjs-util"),a=(e("react"),e("../../shared/modules/selectors/networks")),i=e("../selectors"),c=e("../../shared/modules/conversion.utils"),u=e("../ducks/metamask/metamask"),l=e("../helpers/utils/confirm-tx.util"),d=e("../helpers/utils/token-util"),m=e("../helpers/utils/util"),h=e("./useTokenBalances");function p(e,t){const n=[];return t.forEach(t=>{const s=null==e?void 0:e[t.address.toLowerCase()];s&&n.push({...s,balance:t.balance,string:t.string,balanceError:t.balanceError})}),n}function f(e,t){return parseFloat(t.fiatBalance)-parseFloat(e.fiatBalance)}n.useAccountTotalFiatBalance=(e,t,n)=>{const g=(0,s.c)(53),k=n!==undefined&&n,S=(0,r.useSelector)(a.getCurrentChainId);let y=(0,r.useSelector)(u.getConversionRate);const v=(0,r.useSelector)(i.getUSDConversionRate);let b=(0,r.useSelector)(u.getCurrentCurrency);k&&(y=v,b="usd");const T=(0,r.useSelector)(i.getTokenExchangeRates,r.shallowEqual),w=(0,r.useSelector)(i.getConfirmationExchangeRates),C=(0,r.useSelector)(i.getMetaMaskCachedBalances),A=(null==C?void 0:C[null==e?void 0:e.address])??0,I=(0,c.getValueFromWeiHex)({value:A,toCurrency:b,conversionRate:y,numberOfDecimals:2}),E=(0,r.useSelector)(i.getAllTokens);let _;var P;(null==e||e.address,g[0]!==(null==e?void 0:e.address)||g[1]!==S||g[2]!==E)?(_=(null==E||null===(P=E[S])||void 0===P?void 0:P[null==e?void 0:e.address])??[],g[0]=null==e?void 0:e.address,g[1]=S,g[2]=E,g[3]=_):_=g[3];const M=_,R=(0,r.useSelector)(i.getTokenList),N=(0,r.useSelector)(i.getNativeCurrencyImage),O=(0,r.useSelector)(u.getNativeCurrency),x=null==e?void 0:e.address;let D;g[4]!==S||g[5]!==t||g[6]!==x||g[7]!==M?(D={chainId:S,tokens:M,address:x,hideZeroBalanceTokens:t},g[4]=S,g[5]=t,g[6]=x,g[7]=M,g[8]=D):D=g[8];const{tokensWithBalances:B}=(0,h.useTokenTracker)(D);let F;g[9]!==w||g[10]!==T?(F={...T,...w},g[9]=w,g[10]=T,g[11]=F):F=g[11];const $=F;let U;if(g[12]!==y||g[13]!==b||g[14]!==$||g[15]!==B){let e;g[17]!==y||g[18]!==b||g[19]!==$?(e=e=>{const t=$[(0,o.toChecksumAddress)(e.address)];return(0,d.getTokenFiatAmount)(t,y,b,e.string,e.symbol,!1,!1)},g[17]=y,g[18]=b,g[19]=$,g[20]=e):e=g[20],U=B.map(e),g[12]=y,g[13]=b,g[14]=$,g[15]=B,g[16]=U}else U=g[16];const L=U,j=p;let H;g[21]!==R||g[22]!==B?(H=j(R,B),g[21]=R,g[22]=B,g[23]=H):H=g[23];const G=H;let W;g[24]!==O||g[25]!==I||g[26]!==N?(W={iconUrl:N,symbol:O,fiatBalance:I},g[24]=O,g[25]=I,g[26]=N,g[27]=W):W=g[27];const q=W;let Y,V;g[28]!==G||g[29]!==L?(Y=G.map((e,t)=>({...e,fiatBalance:L[t]})),g[28]=G,g[29]=L,g[30]=Y):Y=g[30],g[31]!==q||g[32]!==Y?(V=[q,...Y],g[31]=q,g[32]=Y,g[33]=V):V=g[33];const K=V;let Q;g[34]!==K?(Q=K.sort(f),g[34]=K,g[35]=Q):Q=g[35];const z=Q;let X,J,Z,ee;g[36]!==y||g[37]!==b||g[38]!==$||g[39]!==I||g[40]!==L||g[41]!==B?(ee=(0,c.sumDecimals)(I,...L).toString(10),B.forEach(e=>{e.string=(0,m.roundToDecimalPlacesRemovingExtraZeroes)(e.string,5);const t=$[(0,o.toChecksumAddress)(e.address)];e.tokenFiatAmount=(0,d.getTokenFiatAmount)(t,y,b,e.string,e.symbol,!1,!1)||"0"}),J=B,X=(0,l.formatCurrency)(ee,b),Z=(0,c.getWeiHexFromDecimalValue)({value:ee,fromCurrency:b,conversionRate:y,invertConversionRate:!0}),g[36]=y,g[37]=b,g[38]=$,g[39]=I,g[40]=L,g[41]=B,g[42]=X,g[43]=J,g[44]=Z,g[45]=ee):(X=g[42],J=g[43],Z=g[44],ee=g[45]);let te,ne=Z;return"NaN"===ne&&(ne="0x0"),g[46]!==X||g[47]!==J||g[48]!==$||g[49]!==z||g[50]!==ee||g[51]!==ne?(te={formattedFiat:X,totalWeiBalance:ne,totalFiatBalance:ee,tokensWithBalances:J,loading:!1,orderedTokenList:z,mergedRates:$},g[46]=X,g[47]=J,g[48]=$,g[49]=z,g[50]=ee,g[51]=ne,g[52]=te):te=g[52],te}}}},{package:"$root$",file:"ui/hooks/useAccountTotalFiatBalance.js"}],[7593,{"../ducks/confirm-alerts/confirm-alerts":7440,"../helpers/constants/design-system":7460,"../selectors/alerts":8567,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),r=e("react"),o=e("../selectors/alerts"),a=e("../ducks/confirm-alerts/confirm-alerts"),i=e("../helpers/constants/design-system");function c(e){const t={[i.Severity.Danger]:3,[i.Severity.Warning]:2,[i.Severity.Info]:1,[i.Severity.Success]:0,[i.Severity.Disabled]:0};return[...e].sort((e,n)=>t[n.severity]-t[e.severity])}n.default=e=>{const t=(0,s.useDispatch)(),n=c((0,s.useSelector)(t=>(0,o.selectAlerts)(t,e))),u=(0,s.useSelector)(t=>(0,o.selectConfirmedAlertKeys)(t,e)),l=c((0,s.useSelector)(t=>(0,o.selectGeneralAlerts)(t,e))),d=c((0,s.useSelector)(t=>(0,o.selectFieldAlerts)(t,e))),m=n.filter(e=>!e.hideFromAlertNavigation),h=l.filter(e=>!e.hideFromAlertNavigation),p=d.filter(e=>!e.hideFromAlertNavigation),f=(0,r.useCallback)(e=>e?n.filter(t=>t.field===e):[],[n]),g=(0,r.useCallback)(e=>e?n.filter(t=>t.field===e&&!t.hideFromAlertNavigation):[],[n]),k=(0,r.useCallback)((n,s)=>{t((0,a.setAlertConfirmed)(e,n,s))},[t,e]),S=(0,r.useCallback)(e=>u.includes(e),[u]),y=n.filter(e=>!S(e.key)&&e.severity===i.Severity.Danger&&!e.acknowledgeBypass),v=n.length>0,b=n.filter(e=>e.severity===i.Severity.Danger),T=y.length>0,w=d.filter(e=>!S(e.key)&&e.severity===i.Severity.Danger&&!e.acknowledgeBypass);return{alerts:n,fieldAlerts:d,generalAlerts:l,getFieldAlerts:f,getNavigableFieldAlerts:g,hasAlerts:v,dangerAlerts:b,hasDangerAlerts:(null==b?void 0:b.length)>0,hasUnconfirmedDangerAlerts:T,isAlertConfirmed:S,navigableAlerts:m,navigableFieldAlerts:p,navigableGeneralAlerts:h,setAlertConfirmed:k,unconfirmedDangerAlerts:y,unconfirmedFieldDangerAlerts:w,hasUnconfirmedFieldDangerAlerts:w.length>0}}}}},{package:"$root$",file:"ui/hooks/useAlerts.ts"}],[7594,{"../selectors":8577,"../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAssetsUpdateAllAccountBalances=n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../store/actions");const c=()=>{const e=(0,s.c)(11),t=(0,o.useSelector)(a.getEnabledChainIds),n=(0,o.useDispatch)();let c;e[0]!==n||e[1]!==t?(c=async()=>{try{t.length>0&&await n((0,i.updateBalancesFoAccounts)(t,!1))}catch(e){const t=e;console.warn("Error updating balances state for all accounts",t)}},e[0]=n,e[1]=t,e[2]=c):c=e[2];const u=c;let l,d,m;return e[3]!==t.length||e[4]!==u?(l=()=>{0!==t.length&&u()},e[3]=t.length,e[4]=u,e[5]=l):l=e[5],e[6]!==t||e[7]!==u?(d=[t,u],e[6]=t,e[7]=u,e[8]=d):d=e[8],(0,r.useEffect)(l,d),e[9]!==u?(m={updateBalances:u},e[9]=u,e[10]=m):m=e[10],m};n.useAssetsUpdateAllAccountBalances=c;n.default=c}}},{package:"$root$",file:"ui/hooks/useAssetsUpdateAllAccountBalances.ts"}],[7595,{react:5657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RESULT_PENDING=n.RESULT_IDLE=n.RESULT_BASE=void 0,n.createErrorResult=c,n.createSuccessResult=i,n.useAsyncCallback=u,n.useAsyncResult=l,n.useAsyncResultOrThrow=function(e,t=[]){const n=l(e,t);if("error"===n.status)throw n.error;return n};var s=e("react");const r=n.RESULT_BASE={idle:!1,pending:!1,value:undefined,error:undefined},o=n.RESULT_IDLE={...r,status:"idle",idle:!0},a=n.RESULT_PENDING={...r,status:"pending",pending:!0};function i(e){return{...r,status:"success",value:e}}function c(e){return{...r,status:"error",error:e}}function u(e,t=[]){const[n,r]=(0,s.useState)(o),u=(0,s.useRef)(!0);(0,s.useEffect)(()=>()=>{u.current=!1},[]);return[(0,s.useCallback)(async()=>{if(u.current){r(a);try{const t=await e();u.current&&r(i(t))}catch(e){u.current&&r(c(e))}}},t),n]}function l(e,t=[]){const[n,r]=u(e,t);return(0,s.useEffect)(()=>{n()},[n]),"idle"===r.status?a:r}}}},{package:"$root$",file:"ui/hooks/useAsync.ts"}],[7596,{react:5657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBrowserSupportsSidePanel=void 0;var s=e("react");n.useBrowserSupportsSidePanel=()=>{const[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{var e;if(null===(e=chrome)||void 0===e||null===(e=e.runtime)||void 0===e||!e.getContexts)return void t(!1);await chrome.runtime.getContexts({contextTypes:["SIDE_PANEL"]}),t(!0)}catch(e){console.log("Browser does not support sidepanel:",e),t(!1)}})()},[]),e}}}},{package:"$root$",file:"ui/hooks/useBrowserSupportsSidePanel.ts"}],[7597,{"../../../package.json":6170,"../../../shared/modules/environment":6319,semver:5987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchCarouselSlidesFromContentful=async function(){var e;const{accessToken:t,domain:n,environment:s,spaceId:r}=c();if(!r||!t)return{prioritySlides:[],regularSlides:[]};const o=new URL(`https://${n}/spaces/${r}/environments/${s}/entries`);o.searchParams.set("access_token",t),o.searchParams.set("content_type",i),o.searchParams.set("fields.showInExtension","true");const a=await fetch(o).then(e=>e.json()),l=(null===(e=a.includes)||void 0===e?void 0:e.Asset)||[],d=e=>{var t;const n=l.find(t=>{var n;return t.sys.id===(null==e||null===(n=e.sys)||void 0===n?void 0:n.id)}),s=(null==n||null===(t=n.fields)||void 0===t||null===(t=t.file)||void 0===t?void 0:t.url)||"";return s.startsWith("//")?`https:${s}`:s},m=[],h=[];for(const e of a.items){const{headline:t,teaser:n,image:s,linkUrl:r,undismissable:o,startDate:a,endDate:i,priorityPlacement:c,variableName:l,cardPlacement:p,extensionMinimumVersionNumber:f}=e.fields,g={id:`contentful-${e.sys.id}`,title:t,description:n,image:d(s),href:r,undismissable:o,dismissed:!1,startDate:a,endDate:i,priorityPlacement:c,variableName:l,cardPlacement:p};u(f)&&(c?m.push(g):h.push(g))}return{prioritySlides:m,regularSlides:h}},n.getContentfulEnvironmentDetails=void 0;var s=o(e("semver")),r=e("../../../shared/modules/environment");function o(e){return e&&e.__esModule?e:{default:e}}const a=o(e("../../../package.json")).default.version,i="promotionalBanner",c=()=>{const e="jdkgyfmyd9sw",t="mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",n=new URLSearchParams(window.location.search).get("previewToken");if(n)return{environment:"master",domain:"preview.contentful.com",accessToken:n,spaceId:e};return(0,r.isProduction)()?{environment:"master",domain:"cdn.contentful.com",accessToken:t,spaceId:e}:{environment:"dev",domain:"preview.contentful.com",accessToken:t,spaceId:e}};function u(e){if(!e)return!0;try{return s.default.gte(a,e)}catch{return!1}}n.getContentfulEnvironmentDetails=c}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/fetchCarouselSlidesFromContentful.ts"}],[7598,{"./useCarouselManagement":7599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./useCarouselManagement");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))})}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/index.ts"}],[7599,{"../../selectors":8577,"../../store/actions":8611,"./fetchCarouselSlidesFromContentful":7597,"@metamask/profile-sync-controller/sdk":2944,"bignumber.js":4362,lodash:5239,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isActive=h,n.useCarouselManagement=void 0;var s,r=e("lodash"),o=e("react"),a=e("react-redux"),i=(s=e("loglevel"))&&s.__esModule?s:{default:s},c=e("bignumber.js"),u=e("@metamask/profile-sync-controller/sdk"),l=e("../../store/actions"),d=e("../../selectors"),m=e("./fetchCarouselSlidesFromContentful");function h(e,t=new Date){const n=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null;return!(n&&t<n)&&!(s&&t>s)}n.useCarouselManagement=({testDate:e,enabled:t=!0}={})=>{const n=Boolean(!1),s=(0,a.useDispatch)(),p=(0,a.useSelector)(d.getSlides),f=(0,a.useSelector)(d.getRemoteFeatureFlags),g=(0,a.useSelector)(d.getSelectedAccountCachedBalance),k=(0,a.useSelector)(d.getSelectedInternalAccount),S=(0,a.useSelector)(d.getUseExternalServices),y=(0,a.useSelector)(d.getShowDownloadMobileAppSlide),v=(0,o.useRef)(),b=new c.BigNumber(g??"0x0").eq("0x0"),T=(null==f?void 0:f.contentfulCarouselEnabled)??!1,[w,C]=(0,o.useState)(!1),[A,I]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!(T&&S&&y))return C(!1),I(!0),()=>undefined;I(!1);let e=!1;return(async()=>{try{const n=await(0,l.getUserProfileLineage)();if(!e){var t;const e=Boolean(null==n||null===(t=n.lineage)||void 0===t?void 0:t.some(e=>e.agent===u.Platform.MOBILE));C(!e),I(!0)}}catch(t){e||(i.default.warn("Failed to fetch user profile lineage:",t),C(!1),I(!0))}})(),()=>{e=!0}},[k.address,S,y,T]),(0,o.useEffect)(()=>{if(!A)return;if(!t){const e=[];return void((0,r.isEqual)(v.current,e)||(s((0,l.updateSlides)(e)),v.current=e))}const n=async()=>{if(!T){const e=[];return void((0,r.isEqual)(v.current,e)||(s((0,l.updateSlides)(e)),v.current=e))}if(T)try{const{prioritySlides:t,regularSlides:n}=await(0,m.fetchCarouselSlidesFromContentful)(),o=[...t],a=[...n],i=t=>h(t,e?new Date(e):new Date),c=e=>e.map(e=>((e,t)=>{if(!e)return undefined;const n=t.find(t=>t.id===e.id);return{...e,dismissed:(null==n?void 0:n.dismissed)??!1,undismissable:e.undismissable||(null==n?void 0:n.undismissable)||!1}})(e,p)).filter(e=>Boolean(e)).filter(i),u=e=>"fund"===e.variableName?{...e,undismissable:b||e.undismissable}:e,d=e=>"downloadMobileApp"!==e.variableName||w,f=c(o).map(u).filter(d),g=function(e){const t=[],n=[];for(const s of e){const e=s.cardPlacement,r="string"==typeof e?Number(e):e;if("number"==typeof r&&Number.isFinite(r)){const e=Math.max(0,Math.floor(r)-1);e>=t.length&&(t.length=e+1),t[e]=s}else n.push(s)}let s=0;for(let e=0;e<t.length&&s<n.length;e++)t[e]||(t[e]=n[s],s+=1);for(;s<n.length;)t.push(n[s]),s+=1;return t.filter(Boolean)}(c(a).map(u).filter(d)),k=[...f,...g];(0,r.isEqual)(v.current,k)||(s((0,l.updateSlides)(k)),v.current=k)}catch(e){i.default.warn("Failed to fetch Contentful slides:",e),(0,r.isEqual)(v.current,[])||(s((0,l.updateSlides)([])),v.current=[])}};(async()=>{try{await n()}catch(e){i.default.warn("Failed to load carousel slides:",e)}})()},[t,s,b,T,e,n,p,A]),{slides:p}}}}},{package:"$root$",file:"ui/hooks/useCarouselManagement/useCarouselManagement.ts"}],[7600,{"../../shared/constants/copy":6178,"../../shared/constants/time":6211,"./useTimeout":7648,"copy-to-clipboard":4542,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_UI_DELAY=void 0,n.useCopyToClipboard=function(e){const t=(0,r.c)(9),{clearDelayMs:n}=e,[s,c]=(0,a.useState)(!1);if(null!==n&&n<=0)throw new Error("useCopyToClipboard: clearDelayMs must be a positive number or null");const d=null!==n,m=d?n:l;let h;t[0]!==s||t[1]!==d?(h=()=>{!0===s&&(d&&(0,o.default)(" ",i.COPY_OPTIONS),c(!1))},t[0]=s,t[1]=d,t[2]=h):h=t[2];const p=(0,u.useTimeout)(h,m,!1);let f;t[3]!==p?(f=e=>{c(!0),null==p||p(),(0,o.default)(e,i.COPY_OPTIONS)},t[3]=p,t[4]=f):f=t[4];const g=f;let k;t[5]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{c(!1)},t[5]=k):k=t[5];const S=k;let y;t[6]!==s||t[7]!==g?(y=[s,g,S],t[6]=s,t[7]=g,t[8]=y):y=t[8];return y};var s,r=e("react-compiler-runtime"),o=(s=e("copy-to-clipboard"))&&s.__esModule?s:{default:s},a=e("react"),i=e("../../shared/constants/copy"),c=e("../../shared/constants/time"),u=e("./useTimeout");const l=n.DEFAULT_UI_DELAY=2*c.SECOND}}},{package:"$root$",file:"ui/hooks/useCopyToClipboard.ts"}],[7601,{"../../shared/constants/common":6177,"../../shared/constants/network":6194,"../../shared/lib/asset-utils":6224,"../../shared/modules/Numeric":6308,"../../shared/modules/conversion.utils":6315,"../ducks/metamask/metamask":7448,"../helpers/utils/confirm-tx.util":7486,"../helpers/utils/token-util":7514,"../selectors/multichain":8586,"./useFormatters":7611,"./useMultichainSelector":7625,"@metamask/multichain-network-controller":2682,"bignumber.js":4362,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,t,n){var s;const o=(0,r.c)(45);let S,b,T,w,C,A,I,E;o[0]!==t?(({account:S,displayValue:w,prefix:E,numberOfDecimals:A,denomination:T,currency:b,isAggregatedFiatOverviewBalance:C,...I}=t),o[0]=t,o[1]=S,o[2]=b,o[3]=T,o[4]=w,o[5]=C,o[6]=A,o[7]=I,o[8]=E):(S=o[1],b=o[2],T=o[3],w=o[4],C=o[5],A=o[6],I=o[7],E=o[8]);const _=n===undefined?null:n,{formatCurrency:P}=(0,g.useFormatters)(),M=(0,k.useMultichainSelector)(c.getMultichainIsEvm,S),R=(0,k.useMultichainSelector)(c.getMultichainCurrentCurrency,S),N=(0,k.useMultichainSelector)(c.getMultichainNativeCurrency,S),O=(0,k.useMultichainSelector)(c.getMultichainConversionRate,S),x=(0,k.useMultichainSelector)(f.getCurrencyRates,S),D=b===R,B=b===N||b===l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[_],F=_?(0,h.isEvmChainId)(_):M,$=_&&l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[_]||N,U=(null==x||null===(s=x[$])||void 0===s?void 0:s.conversionRate)??O;let L;e:{if(w){L=w;break e}if(!F&&!C){let t;o[9]!==U||o[10]!==$||o[11]!==b||o[12]!==R||o[13]!==e||o[14]!==B||o[15]!==D?(t=function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:s,currentCurrency:r,nativeCurrency:o,inputValue:a,conversionRate:c}){if(t||!n&&!o)return new d.Numeric(a,10).toString();if(n&&c){const t=(0,p.getTokenFiatAmount)(1,Number(c),r,a,e,!1,!1)??"0";return(0,i.formatCurrency)(t,s)}return null}({tokenSymbol:$,isNativeCurrency:B,isUserPreferredCurrency:D,currency:b,currentCurrency:R,nativeCurrency:$,inputValue:e,conversionRate:U}),o[9]=U,o[10]=$,o[11]=b,o[12]=R,o[13]=e,o[14]=B,o[15]=D,o[16]=t):t=o[16],L=t;break e}if(C){let t;o[17]!==b||o[18]!==P||o[19]!==e?(t=P(e,b),o[17]=b,o[18]=P,o[19]=e,o[20]=t):t=o[20],L=t;break e}if(!B&&D&&U){let t;if(o[21]!==U||o[22]!==$||o[23]!==b||o[24]!==T||o[25]!==P||o[26]!==e||o[27]!==A){t=P((0,u.getValueFromWeiHex)({value:e,fromCurrency:$,toCurrency:b,conversionRate:U,numberOfDecimals:A||2,toDenomination:T}),b),o[21]=U,o[22]=$,o[23]=b,o[24]=T,o[25]=P,o[26]=e,o[27]=A,o[28]=t}else t=o[28];L=t;break e}let t;o[29]!==$||o[30]!==T||o[31]!==e||o[32]!==B||o[33]!==D||o[34]!==A?(t=function({isNativeCurrency:e,isUserPreferredCurrency:t,nativeCurrency:n,inputValue:s,denomination:r,numberOfDecimals:o}){if(e||!t&&!n){const e=new d.Numeric(s,16,m.EtherDenomination.WEI).toDenomination(r||m.EtherDenomination.ETH).round(o||v).toBase(10).toString();return"0"===e&&s&&0!==Number(s)?y:e}return null}({isNativeCurrency:B,isUserPreferredCurrency:D,nativeCurrency:$,inputValue:e,denomination:T,numberOfDecimals:A}),o[29]=$,o[30]=T,o[31]=e,o[32]=B,o[33]=D,o[34]=A,o[35]=t):t=o[35],L=t}const j=L;let H;const G=C||!B;if(!I.hideLabel&&!G){let e;var W;if(o[36]!==b)e=[...Object.values(l.TEST_NETWORK_TICKER_MAP),...Object.values(a.MULTICHAIN_NETWORK_TICKER)].includes(b)?b:null===(W=b)||void 0===W?void 0:W.toUpperCase(),o[36]=b,o[37]=e;else e=o[37];const t=e;H=I.suffix||t}const q=`${E||""}${j}${H?` ${H}`:""}`;let Y,V;o[38]!==E||o[39]!==H||o[40]!==j?(Y={prefix:E,value:j,suffix:H},o[38]=E,o[39]=H,o[40]=j,o[41]=Y):Y=o[41];o[42]!==q||o[43]!==Y?(V=[q,Y],o[42]=q,o[43]=Y,o[44]=V):V=o[44];return V};var s,r=e("react-compiler-runtime"),o=(e("react"),(s=e("bignumber.js"))&&s.__esModule?s:{default:s}),a=e("@metamask/multichain-network-controller"),i=e("../helpers/utils/confirm-tx.util"),c=e("../selectors/multichain"),u=e("../../shared/modules/conversion.utils"),l=e("../../shared/constants/network"),d=e("../../shared/modules/Numeric"),m=e("../../shared/constants/common"),h=e("../../shared/lib/asset-utils"),p=e("../helpers/utils/token-util"),f=e("../ducks/metamask/metamask"),g=e("./useFormatters"),k=e("./useMultichainSelector");const S=n.MIN_AMOUNT=1e-6,y=`<${S}`,v=n.DEFAULT_PRECISION=new o.default(S).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[7602,{"../../shared/modules/selectors/networks":6335,"../ducks/metamask/metamask":7448,"../helpers/utils/isOriginalNativeTokenSymbol":7496,"../selectors":8577,"../selectors/multichain/networks":8588,"../store/actions":8611,"./usePolling":7634,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react"),a=e("react-redux"),i=e("../selectors"),c=e("../selectors/multichain/networks"),u=e("../store/actions"),l=e("../ducks/metamask/metamask"),d=e("../../shared/modules/selectors/networks"),m=e("../helpers/utils/isOriginalNativeTokenSymbol"),h=(s=e("./usePolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(()=>{const e=(0,a.useSelector)(l.getCompletedOnboarding),t=(0,a.useSelector)(l.getIsUnlocked),n=(0,a.useSelector)(i.getUseCurrencyRateCheck);return e&&t&&n})(),n=(e=>{const t=(0,r.c)(7),n=(0,a.useSelector)(d.getNetworkConfigurationsByChainId),s=(0,a.useSelector)(i.getUseSafeChainsListValidation);let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[0]=u):u=t[0];const[l,h]=(0,o.useState)(u),f=(0,a.useSelector)(c.getEnabledChainIds);let g,k;return t[1]!==f||t[2]!==e||t[3]!==n||t[4]!==s?(g=()=>{(async()=>{const t=(await Promise.all(Object.values(n).map(async t=>{const n=await(0,m.getOriginalNativeTokenSymbol)({chainId:t.chainId,useAPICall:s&&e});return f.includes(t.chainId)?n??t.nativeCurrency:null}))).filter(p),r=[...new Set(t)];h(r)})()},k=[e,n,f,s],t[1]=f,t[2]=e,t[3]=n,t[4]=s,t[5]=g,t[6]=k):(g=t[5],k=t[6]),(0,o.useEffect)(g,k),l})(t),s=t&&n.length>0;let f;e[0]!==s||e[1]!==n?(f={startPolling:u.currencyRateStartPolling,stopPollingByPollingToken:u.currencyRateStopPollingByPollingToken,input:n,enabled:s},e[0]=s,e[1]=n,e[2]=f):f=e[2],(0,h.default)(f)};function p(e){return null!==e}}}},{package:"$root$",file:"ui/hooks/useCurrencyRatePolling.ts"}],[7603,{"../../shared/constants/swaps":6209,"../../shared/modules/selectors/networks":6335,"../../shared/modules/string-utils":6346,"../ducks/metamask/metamask":7448,"../helpers/constants/routes":7465,"react-compiler-runtime":5571,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentAsset=function(){var e;const t=(0,s.c)(4);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n={path:`${c.ASSET_ROUTE}/:asset`,end:!0},t[0]=n):n=t[0];const d=(0,o.useMatch)(n),m=null==d||null===(e=d.params)||void 0===e?void 0:e.asset,h=(0,r.useSelector)(a.getTokens);let p;t[1]!==h||t[2]!==m?(p=m&&h.find(e=>{const{address:t}=e;return(0,l.isEqualCaseInsensitive)(t,m)}),t[1]=h,t[2]=m,t[3]=p):p=t[3];const f=p,g=(0,r.useSelector)(i.getCurrentChainId);return f??(u.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[g]||u.ETH_SWAPS_TOKEN_OBJECT)};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("react-router-dom"),a=e("../ducks/metamask/metamask"),i=e("../../shared/modules/selectors/networks"),c=e("../helpers/constants/routes"),u=e("../../shared/constants/swaps"),l=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useCurrentAsset.js"}],[7604,{"../../shared/modules/transaction.utils":6348,"../store/actions":8611,"./useAsync":7595,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDecodedTransactionData=i,n.useDecodedTransactionDataValue=function(e){var t,n,r;const o=(0,s.c)(9),a=null==e||null===(t=e.txParams)||void 0===t?void 0:t.data,c=null==e||null===(n=e.txParams)||void 0===n?void 0:n.to,l=null==e?void 0:e.chainId;let d;o[0]!==a||o[1]!==c||o[2]!==l?(d={data:a,to:c,chainId:l},o[0]=a,o[1]=c,o[2]=l,o[3]=d):d=o[3];const m=i(d);let h;if(o[4]!==(null==m||null===(r=m.value)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)){var p,f;h=null==m||null===(p=m.value)||void 0===p||null===(p=p.data)||void 0===p||null===(p=p[0])||void 0===p||null===(p=p.params)||void 0===p||null===(p=p.find(u))||void 0===p?void 0:p.value,o[4]=null==m||null===(f=m.value)||void 0===f||null===(f=f.data)||void 0===f||null===(f=f[0])||void 0===f?void 0:f.params,o[5]=h}else h=o[5];const g=h;let k;o[6]!==m||o[7]!==g?(k={decodeResponse:m,value:g},o[6]=m,o[7]=g,o[8]=k):k=o[8];return k};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/transaction.utils")),o=e("../store/actions"),a=e("./useAsync");function i(e){const t=(0,s.c)(7);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{data:i,to:c,chainId:u}=n;let l,d;return t[2]!==u||t[3]!==i||t[4]!==c?(l=async()=>{if(i&&(0,r.hasTransactionData)(i)&&c&&u)return await(0,o.decodeTransactionData)({transactionData:i,chainId:u,contractAddress:c})},d=[i,c,u],t[2]=u,t[3]=i,t[4]=c,t[5]=l,t[6]=d):(l=t[5],d=t[6]),(0,a.useAsyncResult)(l,d)}const c=["value","_value","value_","amount","_amount","amount_"];function u(e){return c.includes(e.name??"")}}}},{package:"$root$",file:"ui/hooks/useDecodedTransactionData.ts"}],[7605,{"../../shared/constants/first-party-contracts":6182,"../../shared/modules/hexstring-utils":6324,"../ducks/domains":7442,"../helpers/utils/trust-signals":7516,"../pages/confirmations/selectors/accounts":8238,"../selectors":8577,"../selectors/multichain-accounts/account-tree":8581,"../selectors/nft":8590,"./useName":7627,"./useTrustSignals":7661,"@metamask/name-controller":2739,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=function(e){const t=(0,s.c)(2);let n;t[0]!==e?(n=[e],t[0]=e,t[1]=n):n=t[1];return g(n)[0]},n.useDisplayNames=g;var s=e("react-compiler-runtime"),r=e("@metamask/name-controller"),o=e("react-redux"),a=(e("react"),e("../../shared/constants/first-party-contracts")),i=e("../../shared/modules/hexstring-utils"),c=e("../ducks/domains"),u=e("../selectors"),l=e("../selectors/nft"),d=e("../helpers/utils/trust-signals"),m=e("../pages/confirmations/selectors/accounts"),h=e("../selectors/multichain-accounts/account-tree"),p=e("./useName"),f=e("./useTrustSignals");function g(e){const t=(0,s.c)(19),n=(0,p.useNames)(e),g=e.map(({type:e,value:t,variation:n})=>{if(e!==r.NameType.ETHEREUM_ADDRESS)return undefined;const s=t.toLowerCase();return Object.keys(a.FIRST_PARTY_CONTRACT_NAMES).find(e=>{var t;const r=null===(t=a.FIRST_PARTY_CONTRACT_NAMES[e])||void 0===t?void 0:t[n];return(null==r?void 0:r.toLowerCase())===s})});let v;t[0]!==e?(v=e.map(k),t[0]=e,t[1]=v):v=t[1];const b=(0,f.useTrustSignals)(v),T=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(u.selectERC20TokensByChain);let a;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{var t;const{preferContractSymbol:s,type:o,value:a,variation:i}=e;if(o!==r.NameType.ETHEREUM_ADDRESS)return;const c=a.toLowerCase(),{iconUrl:u,name:l,symbol:d}=(null==n||null===(t=n[i])||void 0===t||null===(t=t.data)||void 0===t?void 0:t[c])??{};return{name:s&&d?d:l,image:u}},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=n,t[1]=e,t[2]=a}else a=t[2];return a}(e),w=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(l.getNftContractsByAddressByChain);let a;if(t[0]!==e||t[1]!==n){let s;t[3]!==n?(s=e=>{var t;const{type:s,value:o,variation:a}=e;if(s!==r.NameType.ETHEREUM_ADDRESS)return;const i=o.toLowerCase(),c=n[a];return null==c||null===(t=c[i])||void 0===t?void 0:t.name},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=e,t[1]=n,t[2]=a}else a=t[2];return a}(e),C=function(e){const t=(0,s.c)(5),n=(0,o.useSelector)(c.getDomainResolutions);let a;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{const{type:t,value:s}=e;if(t!==r.NameType.ETHEREUM_ADDRESS)return;const o=null==n?void 0:n.find(e=>(0,i.toChecksumHexAddress)(e.resolvedAddress)===(0,i.toChecksumHexAddress)(s));return null==o?void 0:o.domainName},t[3]=n,t[4]=s):s=t[4],a=e.map(s),t[0]=n,t[1]=e,t[2]=a}else a=t[2];return a}(e),A=function(e,t){const n=(0,s.c)(19),a=(0,o.useSelector)(u.getIsMultichainAccountsState2Enabled),i=(0,o.useSelector)(h.getAccountTree);let c;n[0]!==i?(c=i??{},n[0]=i,n[1]=c):c=n[1];const{wallets:l}=c;let d;n[2]!==l?(d=Object.keys(l),n[2]=l,n[3]=d):d=n[3];const p=d.length>1;let f;n[4]!==e?(f=e.map(y).filter(S),n[4]=e,n[5]=f):f=n[5];const g=f;let k;n[6]!==g?(k=e=>{const t={};return g.forEach(n=>{const{address:s}=n;if(s){const n=(0,m.selectAccountGroupNameByInternalAccount)(e,s),r=(0,h.getWalletIdAndNameByAccountAddress)(e,s),o=(null==r?void 0:r.name)||null;t[s]={accountGroupName:n,walletName:o}}}),t},n[6]=g,n[7]=k):k=n[7];const v=(0,o.useSelector)(k);let b;if(n[8]!==p||n[9]!==a||n[10]!==t||n[11]!==v||n[12]!==e){let s;n[14]!==p||n[15]!==a||n[16]!==t||n[17]!==v?(s=(e,n)=>{const{type:s,value:o}=e,i=t[n],c=(null==v?void 0:v[o])||{accountGroupName:null,walletName:null};return s===r.NameType.ETHEREUM_ADDRESS&&a&&(null==i?void 0:i.origin)!==r.NameOrigin.API?{accountGroupName:c.accountGroupName,walletName:p?c.walletName:null}:{accountGroupName:null,walletName:null}},n[14]=p,n[15]=a,n[16]=t,n[17]=v,n[18]=s):s=n[18],b=e.map(s),n[8]=p,n[9]=a,n[10]=t,n[11]=v,n[12]=e,n[13]=b}else b=n[13];return b}(e,n);let I;if(t[2]!==A||t[3]!==C||t[4]!==T||t[5]!==g||t[6]!==n||t[7]!==e||t[8]!==b||t[9]!==w){let s;t[11]!==A||t[12]!==C||t[13]!==T||t[14]!==g||t[15]!==n||t[16]!==b||t[17]!==w?(s=(e,t)=>{const s=n[t],r=g[t],o=b[t],a=T[t],i=w[t],c=C[t],{accountGroupName:u,walletName:l}=A[t],m=l;let h=u||(null==s?void 0:s.name)||r||(null==a?void 0:a.name)||i||c||null;const p=Boolean(null==s?void 0:s.name),k=function(e,t,n){if(e===f.TrustSignalDisplayState.Malicious)return f.TrustSignalDisplayState.Malicious;if(t)return f.TrustSignalDisplayState.Petname;if(e===f.TrustSignalDisplayState.Warning)return f.TrustSignalDisplayState.Warning;if(n)return f.TrustSignalDisplayState.Recognized;if(e===f.TrustSignalDisplayState.Verified)return f.TrustSignalDisplayState.Verified;if(e===f.TrustSignalDisplayState.Unknown)return f.TrustSignalDisplayState.Unknown;return f.TrustSignalDisplayState.Unknown}(null==o?void 0:o.state,p,h),S=null==a?void 0:a.image,y=(0,d.getTrustSignalIcon)(k),v=null==o?void 0:o.label;return null===h&&v&&(h=v),{contractDisplayName:null==a?void 0:a.name,displayState:k,hasPetname:p,icon:y,image:S,isAccount:null!==u,name:h,subtitle:m}},t[11]=A,t[12]=C,t[13]=T,t[14]=g,t[15]=n,t[16]=b,t[17]=w,t[18]=s):s=t[18],I=e.map(s),t[2]=A,t[3]=C,t[4]=T,t[5]=g,t[6]=n,t[7]=e,t[8]=b,t[9]=w,t[10]=I}else I=t[10];return I}function k(e){return{...e,chainId:e.variation}}function S(e){return null!==e.address}function y(e,t){const{type:n,value:s}=e;return{address:n===r.NameType.ETHEREUM_ADDRESS?s:null,originalIndex:t}}}}},{package:"$root$",file:"ui/hooks/useDisplayName.ts"}],[7606,{"../../shared/modules/conversion.utils":6315,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isTransactionEarliestNonce=function(e,t,n){if(!e||!t)return!1;return Number((0,r.hexToDecimal)(e))===n[t]},n.useEarliestNonceByChain=function(e){const t=(0,s.c)(2);let n;t[0]!==e?(n={},e.forEach(e=>{var t;const{nonce:s}=e,o=null===(t=e.initialTransaction)||void 0===t?void 0:t.chainId;if(s&&o){const e=Number((0,r.hexToDecimal)(s));(!(o in n)||e<n[o])&&(n[o]=e)}}),t[0]=e,t[1]=n):n=t[1];return n};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/conversion.utils"))}}},{package:"$root$",file:"ui/hooks/useEarliestNonceByChain.ts"}],[7607,{lodash:5239,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEqualityCheck=function(e,t){const n=(0,s.c)(5),a=t===undefined?o.isEqual:t,[i,c]=(0,r.useState)(e);let u,l;n[0]!==i||n[1]!==a||n[2]!==e?(u=()=>{a(e,i)||c(e)},l=[e,a,i],n[0]=i,n[1]=a,n[2]=e,n[3]=u,n[4]=l):(u=n[3],l=n[4]);return(0,r.useLayoutEffect)(u,l),i};var s=e("react-compiler-runtime"),r=e("react"),o=e("lodash")}}},{package:"$root$",file:"ui/hooks/useEqualityCheck.js"}],[7608,{"../../shared/modules/conversion.utils":6315,"../ducks/metamask/metamask":7448,"../helpers/utils/confirm-tx.util":7486,"../selectors":8577,"bignumber.js":4362,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEthFiatAmount=function(e,t,n){const s=(0,r.c)(11),d=t===undefined?{}:t,m=(0,o.useSelector)(u.getConversionRate),h=(0,o.useSelector)(u.getCurrentCurrency),p=(0,o.useSelector)(i.getShouldShowFiat),f=d.showFiat??p;let g;s[0]!==m||s[1]!==h||s[2]!==e?(g=(0,l.decEthToConvertedCurrency)(e,h,m),s[0]=m,s[1]=h,s[2]=e,s[3]=g):g=s[3];const k=g;if(!f||"ETH"===h.toUpperCase()||m<=0||e===undefined)return;const S=new a.default(e.toString()).times(m);if(e&&S.lt(new a.default(.01))&&S.greaterThan(new a.default(0))){let e;return s[4]!==h||s[5]!==n?(e=n?`< ${(0,c.formatCurrency)(.01,h)}`:`< ${(0,c.formatCurrency)(.01,h)} ${h.toUpperCase()}`,s[4]=h,s[5]=n,s[6]=e):e=s[6],e}let y;s[7]!==h||s[8]!==k||s[9]!==n?(y=n?(0,c.formatCurrency)(k,h):`${(0,c.formatCurrency)(k,h)} ${h.toUpperCase()}`,s[7]=h,s[8]=k,s[9]=n,s[10]=y):y=s[10];return y};var s,r=e("react-compiler-runtime"),o=(e("react"),e("react-redux")),a=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("../selectors"),c=e("../helpers/utils/confirm-tx.util"),u=e("../ducks/metamask/metamask"),l=e("../../shared/modules/conversion.utils")}}},{package:"$root$",file:"ui/hooks/useEthFiatAmount.js"}],[7609,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react");n.default=e=>{const t=(0,s.c)(6),[n,o]=(0,r.useState)(""),[a,i]=(0,r.useState)("");let c,u,l;return t[0]!==e?(c=()=>{(async()=>{if(e)try{const t=await fetch(e);if(!t.ok)return;let n=await t.text();n=n.replace(/,\s*}/g,"}").replace(/,\s*\]/g,"]");const s=JSON.parse(n);o(s.image),i(s.name)}catch{}})()},u=[e],t[0]=e,t[1]=c,t[2]=u):(c=t[1],u=t[2]),(0,r.useEffect)(c,u),t[3]!==n||t[4]!==a?(l={image:n,name:a},t[3]=n,t[4]=a,t[5]=l):l=t[5],l}}}},{package:"$root$",file:"ui/hooks/useFetchNftDetailsFromTokenURI.ts"}],[7610,{"../ducks/locale/locale":7447,"../ducks/metamask/metamask":7448,"../helpers/utils/util":7518,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFiatFormatter=void 0;var s=e("react-redux"),r=e("../ducks/locale/locale"),o=e("../ducks/metamask/metamask"),a=e("../helpers/utils/util");n.useFiatFormatter=()=>{const e=(0,s.useSelector)(r.getIntlLocale),t=(0,s.useSelector)(o.getCurrentCurrency);return(n,s={})=>{const{shorten:r,truncatedCharLimit:o,truncatedStartChars:i}=s;try{const s=new Intl.NumberFormat(e,{style:"currency",currency:t});if(!r)return s.format(n);const c=s.formatToParts(n);let u="",l="";c.forEach(e=>{"currency"===e.type?u+=e.value:l+=e.value});const d=(0,a.shortenString)(l,{truncatedCharLimit:o??15,truncatedStartChars:i??12,truncatedEndChars:0,skipCharacterInEnd:!0});return c.findIndex(e=>"currency"===e.type)<c.findIndex(e=>"integer"===e.type)?`${u}${d}`:`${d}${u}`}catch(s){const o=new Intl.NumberFormat(e).format(n),i=(0,a.shortenString)(o,{truncatedCharLimit:15,truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});return r?`${i} ${t}`:`${o} ${t}`}}}}}},{package:"$root$",file:"ui/hooks/useFiatFormatter.ts"}],[7611,{"../ducks/locale/locale":7447,"@metamask/assets-controllers":1394,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFormatters=function(){const e=(0,s.c)(8),t=(0,r.useSelector)(a.getIntlLocale);let n,u,l,d;if(e[0]!==t){const s=(0,o.createFormatters)({locale:t});n=s,u=i.bind(null,s.formatNumber),l=c.bind(null,s.formatNumber),e[0]=t,e[1]=n,e[2]=u,e[3]=l}else n=e[1],u=e[2],l=e[3];e[4]!==n||e[5]!==u||e[6]!==l?(d={...n,formatPercentWithMinThreshold:u,formatCompact:l},e[4]=n,e[5]=u,e[6]=l,e[7]=d):d=e[7];return d};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("@metamask/assets-controllers"),a=e("../ducks/locale/locale");function i(e,t,n={}){const s=Number(t);if(!Number.isFinite(s))return"";return e(0===s?0:Math.sign(s)*Math.max(Math.abs(s),1e-4),{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2,...n})}function c(e,t){return e(t,{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}}}},{package:"$root$",file:"ui/hooks/useFormatters.ts"}],[7612,{"../../shared/modules/selectors/networks":6335,"../ducks/metamask/metamask":7448,"../store/actions":8611,"./usePolling":7634,"lodash/isEqual":5226,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeEstimates=function(e,t){const n=(0,s.c)(23),d=t===undefined||t,p=(0,o.useSelector)(u.getSelectedNetworkClientId),f=e??p,[g,k]=(0,a.useState)("");let S;n[0]!==g?(S=e=>(0,i.getGasEstimateTypeByChainId)(e,g),n[0]=g,n[1]=S):S=n[1];const y=(0,o.useSelector)(S);let v;n[2]!==g?(v=e=>(0,i.getGasFeeEstimatesByChainId)(e,g),n[2]=g,n[3]=v):v=n[3];const b=(0,o.useSelector)(v,r.default);let T;n[4]!==g||n[5]!==f?(T=e=>(0,i.getIsGasEstimatesLoadingByChainId)(e,{chainId:g,networkClientId:f}),n[4]=g,n[5]=f,n[6]=T):T=n[6];const w=(0,o.useSelector)(T);let C;n[7]!==g?(C=e=>(0,i.getIsNetworkBusyByChainId)(e,g),n[7]=g,n[8]=C):C=n[8];const A=(0,o.useSelector)(C);let I,E,_,P,M;n[9]!==d||n[10]!==f?(I=()=>{if(!d)return h;let e=!0;return(0,c.getNetworkConfigurationByNetworkClientId)(f).then(t=>{t&&e&&k(t.chainId)}),()=>{e=!1}},E=[f,d],n[9]=d,n[10]=f,n[11]=I,n[12]=E):(I=n[11],E=n[12]);(0,a.useEffect)(I,E),n[13]!==f?(_={networkClientId:f},n[13]=f,n[14]=_):_=n[14];n[15]!==d||n[16]!==_?(P={startPolling:m,stopPollingByPollingToken:c.gasFeeStopPollingByPollingToken,input:_,enabled:d},n[15]=d,n[16]=_,n[17]=P):P=n[17];(0,l.default)(P),n[18]!==y||n[19]!==b||n[20]!==w||n[21]!==A?(M={gasFeeEstimates:b,gasEstimateType:y,isGasEstimatesLoading:w,isNetworkBusy:A},n[18]=y,n[19]=b,n[20]=w,n[21]=A,n[22]=M):M=n[22];return M};var s=e("react-compiler-runtime"),r=d(e("lodash/isEqual")),o=e("react-redux"),a=e("react"),i=e("../ducks/metamask/metamask"),c=e("../store/actions"),u=e("../../shared/modules/selectors/networks"),l=d(e("./usePolling"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){return(0,c.gasFeeStartPollingByNetworkClientId)(e.networkClientId)}function h(){}}}},{package:"$root$",file:"ui/hooks/useGasFeeEstimates.js"}],[7613,{"../helpers/utils/util":7518,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("../helpers/utils/util");n.default=(e,t)=>{const n=(0,s.c)(4),[a,i]=(0,r.useState)("");let c,u;return n[0]!==e||n[1]!==t?(c=()=>{(async()=>{const n=await(0,o.getAssetImageURL)(e,t);i(n)})()},u=[e,t],n[0]=e,n[1]=t,n[2]=c,n[3]=u):(c=n[2],u=n[3]),(0,r.useEffect)(c,u),a}}}},{package:"$root$",file:"ui/hooks/useGetAssetImageUrl.ts"}],[7614,{"../../shared/modules/conversion.utils":6315,"../../shared/modules/selectors/networks":6335,"../selectors":8577,"./useTokenBalances":7649,"bn.js":4413,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGetFormattedTokensPerChain=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("bn.js"),a=e("../selectors"),i=e("../../shared/modules/selectors/networks"),c=e("../../shared/modules/conversion.utils"),u=e("./useTokenBalances");n.useGetFormattedTokensPerChain=(e,t,n,l)=>{const d=(0,s.c)(19),m=(0,r.useSelector)(i.getCurrentChainId),h=(0,r.useSelector)(a.getAllTokens),p=l;let f;d[0]!==p?(f={chainIds:p},d[0]=p,d[1]=f):f=d[1];const g=(0,u.useTokenBalances)(f);let k;d[2]!==l||d[3]!==m||d[4]!==n?(k=n?[m]:l,d[2]=l,d[3]=m,d[4]=n,d[5]=k):k=d[5];const S=k;let y;if(d[6]!==e||d[7]!==g||d[8]!==h||d[9]!==S||d[10]!==t){let n;d[12]!==e||d[13]!==g||d[14]!==h||d[15]!==t?(n=n=>{var s;const r=((null==h||null===(s=h[n])||void 0===s?void 0:s[null==e?void 0:e.address])??[]).reduce((s,r)=>{var a;const i=(null===(a=g.tokenBalances[e.address])||void 0===a||null===(a=a[n])||void 0===a?void 0:a[r.address])??"0x0";if("0x0"!==i||!t){const e=(0,c.hexToDecimal)(i);s.push({address:r.address,symbol:r.symbol,decimals:r.decimals,balance:e,string:(0,u.stringifyBalance)(new o.BN(e),new o.BN(r.decimals))})}return s},[]);return{chainId:n,tokensWithBalances:r}},d[12]=e,d[13]=g,d[14]=h,d[15]=t,d[16]=n):n=d[16],y=S.map(n),d[6]=e,d[7]=g,d[8]=h,d[9]=S,d[10]=t,d[11]=y}else y=d[11];const v=y;let b;return d[17]!==v?(b={formattedTokensWithBalancesPerChain:v},d[17]=v,d[18]=b):b=d[18],b}}}},{package:"$root$",file:"ui/hooks/useGetFormattedTokensPerChain.ts"}],[7616,{"../../app/scripts/lib/util":380,"../../shared/lib/asset-utils":6224,"../helpers/utils/isOriginalNativeTokenSymbol":7496,"../selectors":8577,"../selectors/multichain":8586,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalNativeTokenSymbol=function(e,t,n,u){const m=(0,s.c)(18),h=u===undefined?"":u,[p,f]=(0,r.useState)(!1),g=(0,o.useSelector)(a.getUseSafeChainsListValidation);let k;m[0]!==e?(k=(0,c.isEvmChainId)(e),m[0]=e,m[1]=k):k=m[1];const S=k,y=(0,o.useSelector)(i.getMultichainCurrentNetwork);let v;m[2]!==e||m[3]!==S||m[4]!==(null==y?void 0:y.ticker)||m[5]!==h||m[6]!==t||m[7]!==g?(v=()=>{let n=!0;const s=d;return async function(e){if(S)try{if(s(h))return void f(!0);const r=await(0,l.isOriginalNativeTokenSymbol)({ticker:t,chainId:e,useAPICall:g});n&&f(r)}catch(e){n&&f(!1)}else f(t===(null==y?void 0:y.ticker))}(e),()=>{n=!1}},m[2]=e,m[3]=S,m[4]=null==y?void 0:y.ticker,m[5]=h,m[6]=t,m[7]=g,m[8]=v):v=m[8];const b=null==y?void 0:y.ticker;let T;m[9]!==e||m[10]!==S||m[11]!==p||m[12]!==h||m[13]!==b||m[14]!==t||m[15]!==n||m[16]!==g?(T=[p,e,t,n,h,g,S,b],m[9]=e,m[10]=S,m[11]=p,m[12]=h,m[13]=b,m[14]=t,m[15]=n,m[16]=g,m[17]=T):T=m[17];return(0,r.useEffect)(v,T),p};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain"),c=e("../../shared/lib/asset-utils"),u=e("../../app/scripts/lib/util"),l=e("../helpers/utils/isOriginalNativeTokenSymbol");function d(e){const t=(0,u.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname)}}}},{package:"$root$",file:"ui/hooks/useIsOriginalNativeTokenSymbol.ts"}],[7617,{"../selectors":8577,"../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalTokenSymbol=function(e,t){const n=(0,s.c)(7),[c,u]=(0,r.useState)(null),l=(0,o.useSelector)(i.getTokenList);let d,m;n[0]!==e||n[1]!==t||n[2]!==l?(d=()=>{!async function(e){var n,s;let r=null===(n=l[null==e?void 0:e.toLowerCase()])||void 0===n?void 0:n.symbol;r||(r=await(0,a.getTokenSymbol)(e)),u((null===(s=r)||void 0===s?void 0:s.toLowerCase())===(null==t?void 0:t.toLowerCase()))}(e)},n[0]=e,n[1]=t,n[2]=l,n[3]=d):d=n[3];n[4]!==e||n[5]!==t?(m=[e,t],n[4]=e,n[5]=t,n[6]=m):m=n[6];return(0,r.useEffect)(d,m),c};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../store/actions"),i=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useIsOriginalTokenSymbol.js"}],[7618,{"../selectors/metametrics":8579,"../selectors/remote-feature-flags":8594,"../store/actions":8611,loglevel:5247,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null);return{disableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),a(null);try{await e((0,i.setParticipateInMetaMetrics)(!1))}catch(e){throw a(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e]),loading:t,error:s}},n.useEnableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),d=(0,o.useSelector)(c.getPna25Acknowledged),m=(0,o.useSelector)(u.getRemoteFeatureFlags);return{enableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),l(null);try{await e((0,i.setParticipateInMetaMetrics)(!0));(null==m?void 0:m.extensionUxPna25)&&!1===d&&await e((0,i.setPna25Acknowledged)(!0))}catch(e){throw l(e instanceof Error?e.message:"An unexpected error occurred"),a.default.error(e),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e,d,m]),loading:t,error:s}};var s,r=e("react"),o=e("react-redux"),a=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../store/actions"),c=e("../selectors/metametrics"),u=e("../selectors/remote-feature-flags")}}},{package:"$root$",file:"ui/hooks/useMetametrics.ts"}],[7619,{"../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalProps=function(){const e=(0,s.c)(5),t=(0,r.useSelector)(a),n=(0,r.useDispatch)();let i;e[0]!==n?(i=()=>n((0,o.hideModal)()),e[0]=n,e[1]=i):i=e[1];const c=i;let u;e[2]!==t||e[3]!==c?(u={props:t,hideModal:c},e[2]=t,e[3]=c,e[4]=u):u=e[4];return u};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions");function a(e){var t;return null===(t=e.appState.modal.modalState)||void 0===t?void 0:t.props}}}},{package:"$root$",file:"ui/hooks/useModalProps.ts"}],[7620,{"../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalState=function(){const e=(0,s.c)(4),t=(0,r.useDispatch)();let n;e[0]!==t?(n=()=>t((0,o.closeNetworkMenu)()),e[0]=t,e[1]=n):n=e[1];const a=n;let i;e[2]!==a?(i={closeModals:a},e[2]=a,e[3]=i):i=e[3];return i};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useModalState.ts"}],[7621,{"../../shared/lib/sentry":6292,"../ducks/metamask/metamask":7448,"./useSyncEqualityCheck":7644,"fast-json-stable-stringify":4789,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react"),o=e("react-redux"),a=(s=e("fast-json-stable-stringify"))&&s.__esModule?s:{default:s},i=e("../../shared/lib/sentry"),c=e("../ducks/metamask/metamask"),u=e("./useSyncEqualityCheck");n.default=e=>{const t=(0,o.useSelector)(c.getCompletedOnboarding),n=(0,r.useRef)(new Map),s=(0,r.useRef)(new Set),l=(0,u.useSyncEqualityCheck)(e.input),d=(0,r.useMemo)(()=>{const e=new Map;for(const t of l)e.set((0,a.default)(t),t);return e},[l]),m=(0,r.useRef)(e.stopPollingByPollingToken);m.current=e.stopPollingByPollingToken;const h=(0,r.useRef)(!0);(0,r.useEffect)(()=>{h.current=!0;const e=n.current,t=s.current;return()=>{h.current=!1;for(const t of e.values())m.current(t);e.clear(),t.clear()}},[]);const p=(0,r.useRef)(d);p.current=d,(0,r.useEffect)(()=>{if(t){for(const[t,r]of d)n.current.has(t)||s.current.has(t)||(s.current.add(t),e.startPolling(r).then(e=>{if(p.current.has(t))if(h.current){const s=n.current.get(t);s&&s!==e&&m.current(s),n.current.set(t,e)}else m.current(e);else m.current(e)}).catch(e=>{(0,i.captureException)(e)}).finally(()=>{s.current.delete(t)}));for(const[t,s]of n.current.entries())d.has(t)||(e.stopPollingByPollingToken(s),n.current.delete(t))}},[d,e.startPolling,e.stopPollingByPollingToken,t])}}}},{package:"$root$",file:"ui/hooks/useMultiPolling.ts"}],[7622,{"../helpers/constants/routes":7465,"../selectors/multichain-accounts/feature-flags":8582,"../store/store":8617,react:5657,"react-compiler-runtime":5571,semver:5987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BIP44_ACCOUNTS_INTRODUCTION_VERSION=void 0,n.useMultichainAccountsIntroModal=function(e,t){const n=(0,s.c)(10),[h,p]=(0,r.useState)(!1),f=(0,a.useAppSelector)(i.getIsMultichainAccountsState2Enabled),g=(0,a.useAppSelector)(m),k=(0,a.useAppSelector)(d),S=(0,a.useAppSelector)(l);let y,v,b;n[0]!==g||n[1]!==f||n[2]!==e||n[3]!==k||n[4]!==S||n[5]!==t.pathname?(y=()=>{const n=t.pathname===c.DEFAULT_ROUTE,s=(0,o.parse)(S),r=s?`${s.major}.${s.minor}.${s.patch}`:null,a=Boolean(r&&(0,o.lt)(r,u));p(e&&f&&!g&&null!==k&&a&&n)},v=[e,f,g,k,S,t.pathname],n[0]=g,n[1]=f,n[2]=e,n[3]=k,n[4]=S,n[5]=t.pathname,n[6]=y,n[7]=v):(y=n[6],v=n[7]);(0,r.useEffect)(y,v),n[8]!==h?(b={showMultichainIntroModal:h,setShowMultichainIntroModal:p},n[8]=h,n[9]=b):b=n[9];return b};var s=e("react-compiler-runtime"),r=e("react"),o=e("semver"),a=e("../store/store"),i=e("../selectors/multichain-accounts/feature-flags"),c=e("../helpers/constants/routes");const u=n.BIP44_ACCOUNTS_INTRODUCTION_VERSION="13.5.0";function l(e){return e.metamask.previousAppVersion}function d(e){return e.metamask.lastUpdatedAt}function m(e){return e.metamask.hasShownMultichainAccountsIntroModal}}}},{package:"$root$",file:"ui/hooks/useMultichainAccountsIntroModal.ts"}],[7623,{"../ducks/metamask/metamask":7448,"../selectors":8577,"../store/controller-actions/multichain-asset-rates-controller":8614,"./usePolling":7634,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../ducks/metamask/metamask"),i=e("../selectors"),c=e("../store/controller-actions/multichain-asset-rates-controller"),u=(s=e("./usePolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(()=>{const e=(0,o.useSelector)(a.getCompletedOnboarding),t=(0,o.useSelector)(a.getIsUnlocked),n=(0,o.useSelector)(i.getUseCurrencyRateCheck);return e&&t&&n})(),n=(()=>{const e=(0,o.useSelector)(i.getSelectedInternalAccount);return(null==e?void 0:e.id)??""})();let s;e[0]!==n||e[1]!==t?(s={startPolling:c.multichainAssetsRatesStartPolling,stopPollingByPollingToken:c.multichainAssetsRatesStopPollingByPollingToken,input:n,enabled:t},e[0]=n,e[1]=t,e[2]=s):s=e[2],(0,u.default)(s)}}}},{package:"$root$",file:"ui/hooks/useMultichainAssetsRatesPolling.ts"}],[7624,{"../../shared/constants/multichain/assets":6192,"../../shared/constants/transaction":6213,"../selectors/assets":8569,"../selectors/multichain":8586,"../selectors/multichain-accounts/account-tree":8581,"./useMultichainSelector":7625,"@metamask/keyring-api":2510,"@metamask/utils":3554,"bignumber.js":4362,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainBalances=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("@metamask/utils"),a=e("@metamask/keyring-api"),i=e("bignumber.js"),c=e("../../shared/constants/transaction"),u=e("../../shared/constants/multichain/assets"),l=e("../selectors/assets"),d=e("../selectors/multichain"),m=e("../selectors/multichain-accounts/account-tree"),h=e("./useMultichainSelector");const p=(e,t)=>{const n=(0,s.c)(15),a=(0,r.useSelector)(l.getAccountAssets),m=(0,r.useSelector)(l.getAssetsMetadata),p=(0,h.useMultichainSelector)(d.getMultichainBalances),f=(0,r.useSelector)(l.getAssetsRates);let g;e:{if(!e){let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0],g=e;break e}const s=null==a?void 0:a[e],r=null==p?void 0:p[e];if(!r||!s){let e;n[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[1]=e):e=n[1],g=e;break e}let l;if(n[2]!==t||n[3]!==s||n[4]!==m||n[5]!==f||n[6]!==r){let e,a;n[8]!==m?(e=e=>m[e],n[8]=m,n[9]=e):e=n[9],n[10]!==t||n[11]!==m||n[12]!==f||n[13]!==r?(a=e=>{var n,s,a,l,d,h,p;const{chainId:g,assetReference:k,assetNamespace:S}=(0,o.parseCaipAssetType)(e);return{chainId:g,symbol:(null===(n=m[e])||void 0===n?void 0:n.symbol)??"",assetId:e,address:k,isNative:S===u.SLIP44_ASSET_NAMESPACE,string:(null===(s=r[e])||void 0===s?void 0:s.amount)??"0",balance:(null===(a=r[e])||void 0===a?void 0:a.amount)??"0",decimals:null===(l=m[e])||void 0===l||null===(l=l.units[0])||void 0===l?void 0:l.decimals,image:(null===(d=m[e])||void 0===d?void 0:d.iconUrl)??"",type:"token"===S?c.AssetType.token:c.AssetType.native,accountType:t,tokenFiatAmount:new i.BigNumber((null===(h=r[e])||void 0===h?void 0:h.amount)??"1").times((null==f||null===(p=f[e])||void 0===p?void 0:p.rate)??"1").toNumber()}},n[10]=t,n[11]=m,n[12]=f,n[13]=r,n[14]=a):a=n[14],l=s.filter(e).map(a).filter(Boolean),n[2]=t,n[3]=s,n[4]=m,n[5]=f,n[6]=r,n[7]=l}else l=n[7];g=l}return g};function f(e){return!u.TRON_RESOURCE_SYMBOLS_SET.has(e.symbol.toLowerCase())}function g(e){return{...e,type:e.isNative?c.AssetType.native:c.AssetType.token}}function k(e,t){return(t.tokenFiatAmount??0)-(e.tokenFiatAmount??0)}function S(e){return!u.TRON_RESOURCE_SYMBOLS_SET.has(e.symbol.toLowerCase())}function y(e,t){return e[t.chainId]||(e[t.chainId]=0),e[t.chainId]=e[t.chainId]+(t.tokenFiatAmount??0),e}n.useMultichainBalances=e=>{const t=(0,s.c)(25),n=(0,r.useSelector)(m.getSelectedAccountGroup);let o;t[0]!==e?(o=t=>(0,m.getAccountGroupsByAddress)(t,[e??""]),t[0]=e,t[1]=o):o=t[1];const[i]=(0,r.useSelector)(o),c=(null==i?void 0:i.id)??n;let u;t[2]!==c?(u=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,"eip155:1"),t[2]=c,t[3]=u):u=t[3];const d=(0,r.useSelector)(u);let h;t[4]!==c?(h=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.SolScope.Mainnet),t[4]=c,t[5]=h):h=t[5];const v=(0,r.useSelector)(h);let b;t[6]!==c?(b=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.BtcScope.Mainnet),t[6]=c,t[7]=b):b=t[7];const T=(0,r.useSelector)(b);let w;t[8]!==c?(w=e=>(0,m.getInternalAccountByGroupAndCaip)(e,c,a.TrxScope.Mainnet),t[8]=c,t[9]=w):w=t[9];const C=(0,r.useSelector)(w);let A;t[10]!==(null==d?void 0:d.address)?(A=e=>(0,l.getTokenBalancesEvm)(e,null==d?void 0:d.address),t[10]=null==d?void 0:d.address,t[11]=A):A=t[11];const I=(0,r.useSelector)(A),E=p(null==v?void 0:v.id),_=p(null==T?void 0:T.id,null==T?void 0:T.type),P=p(null==C?void 0:C.id,null==C?void 0:C.type);let M;if(t[12]!==_||t[13]!==I||t[14]!==E||t[15]!==P){const e=P.filter(f);M=[...I,...E,..._,...e].map(g).sort(k),t[12]=_,t[13]=I,t[14]=E,t[15]=P,t[16]=M}else M=t[16];const R=M;let N;if(t[17]!==_||t[18]!==I||t[19]!==E||t[20]!==P){const e=P.filter(S);N=[...I,...E,..._,...e].reduce(y,{}),t[17]=_,t[18]=I,t[19]=E,t[20]=P,t[21]=N}else N=t[21];const O=N;let x;return t[22]!==R||t[23]!==O?(x={assetsWithBalance:R,balanceByChainId:O},t[22]=R,t[23]=O,t[24]=x):x=t[24],x}}}},{package:"$root$",file:"ui/hooks/useMultichainBalances.ts"}],[7625,{"../selectors":8577,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){const n=(0,s.c)(3);let a;n[0]!==t||n[1]!==e?(a=n=>e(n,t||(0,o.getSelectedInternalAccount)(n)),n[0]=t,n[1]=e,n[2]=a):a=n[2];return(0,r.useSelector)(a)};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[7626,{"../../shared/constants/transaction":6213,"../components/app/assets/util/formatWithThreshold":6434,"../ducks/locale/locale":7447,"./useI18nContext":7615,"@metamask/keyring-api":2510,"@metamask/multichain-network-controller":2682,"@metamask/transaction-controller":3473,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KEYRING_TRANSACTION_STATUS_KEY=void 0,n.useMultichainTransactionDisplay=function(e,t){const n=(0,s.c)(44),o=(0,i.useSelector)(u.getIntlLocale),{chainId:c}=t,l=a.MULTICHAIN_NETWORK_DECIMAL_PLACES[c],f=(0,d.useI18nContext)(),g=e.from;let k;n[0]!==l||n[1]!==o||n[2]!==g?(k=p(g,!0,o,l),n[0]=l,n[1]=o,n[2]=g,n[3]=k):k=n[3];const S=k,y=e.to,v=e.type===r.TransactionType.Send;let b;n[4]!==l||n[5]!==o||n[6]!==y||n[7]!==v?(b=p(y,v,o,l),n[4]=l,n[5]=o,n[6]=y,n[7]=v,n[8]=b):b=n[8];const T=b;let w;n[9]!==o||n[10]!==e.fees?(w=p((e.fees||[]).filter(h),!0,o),n[9]=o,n[10]=e.fees,n[11]=w):w=n[11];const C=w;let A;n[12]!==o||n[13]!==e.fees?(A=p((e.fees||[]).filter(m),!0,o),n[12]=o,n[13]=e.fees,n[14]=A):A=n[14];const I=A;let E,_,P,M;n[15]!==f?(E=f("sent"),n[15]=f,n[16]=E):E=n[16];n[17]!==f?(_=f("received"),n[17]=f,n[18]=_):_=n[18];n[19]!==f?(P=f("swap"),n[19]=f,n[20]=P):P=n[20];n[21]!==f?(M=f("to").toLowerCase(),n[21]=f,n[22]=M):M=n[22];const R=`${P} ${null==S?void 0:S.unit} ${M} ${null==T?void 0:T.unit}`;let N,O,x,D;n[23]!==f?(N=f("stakingDeposit"),n[23]=f,n[24]=N):N=n[24];n[25]!==f?(O=f("stakingWithdrawal"),n[25]=f,n[26]=O):O=n[26];n[27]!==f?(x=f("interaction"),n[27]=f,n[28]=x):x=n[28];n[29]!==R||n[30]!==N||n[31]!==O||n[32]!==x||n[33]!==E||n[34]!==_?(D={[r.TransactionType.Send]:E,[r.TransactionType.Receive]:_,[r.TransactionType.Swap]:R,[r.TransactionType.StakeDeposit]:N,[r.TransactionType.StakeWithdraw]:O,[r.TransactionType.Unknown]:x},n[29]=R,n[30]=N,n[31]=O,n[32]=x,n[33]=E,n[34]=_,n[35]=D):D=n[35];const B=D[e.type],F=0===e.to.length&&e.type===r.TransactionType.Send;let $;n[36]!==C||n[37]!==S||n[38]!==I||n[39]!==B||n[40]!==F||n[41]!==T||n[42]!==e?($={...e,title:B,from:S,to:T,baseFee:C,priorityFee:I,isRedeposit:F},n[36]=C,n[37]=S,n[38]=I,n[39]=B,n[40]=F,n[41]=T,n[42]=e,n[43]=$):$=n[43];return $};var s=e("react-compiler-runtime"),r=e("@metamask/keyring-api"),o=e("@metamask/transaction-controller"),a=e("@metamask/multichain-network-controller"),i=e("react-redux"),c=e("../components/app/assets/util/formatWithThreshold"),u=e("../ducks/locale/locale"),l=e("../../shared/constants/transaction"),d=e("./useI18nContext");n.KEYRING_TRANSACTION_STATUS_KEY={[r.TransactionStatus.Failed]:o.TransactionStatus.failed,[r.TransactionStatus.Confirmed]:o.TransactionStatus.confirmed,[r.TransactionStatus.Unconfirmed]:l.TransactionGroupStatus.pending,[r.TransactionStatus.Submitted]:o.TransactionStatus.submitted};function m(e){return"priority"===e.type}function h(e){return"base"===e.type}function p(e,t,n,s){const r={};for(const t of e){if(null==t||!t.asset.fungible)continue;const e=t.asset.type;r[e]?r[e].amount+=parseFloat(t.asset.amount):r[e]={amount:parseFloat(t.asset.amount),address:t.address,unit:t.asset.unit}}return Object.entries(r).map(([e,r])=>function(e,t,n,s){const r=1/10**(s||8),o=(0,c.formatWithThreshold)(e.amount,r,t,{minimumFractionDigits:0,maximumFractionDigits:s||8});let a=o;n&&(a=`-${o}`);return{...e,amount:a}}(r,n,t,s))[0]}}}},{package:"$root$",file:"ui/hooks/useMultichainTransactionDisplay.ts"}],[7627,{"../selectors":8577,"@metamask/name-controller":2739,lodash:5239,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useName=function(e,t,n){const r=(0,s.c)(4);let o;r[0]!==t||r[1]!==e||r[2]!==n?(o=[{value:e,type:t,variation:n}],r[0]=t,r[1]=e,r[2]=n,r[3]=o):o=r[3];return c(o)[0]},n.useNames=c;var s=e("react-compiler-runtime"),r=e("@metamask/name-controller"),o=e("react-redux"),a=e("lodash"),i=e("../selectors");function c(e){const t=(0,s.c)(5),n=(0,o.useSelector)(i.getNames,a.isEqual);let c;if(t[0]!==n||t[1]!==e){let s;t[3]!==n?(s=e=>{var t;const{value:s,type:o,variation:a}=e,i=function(e,t){if(t===r.NameType.ETHEREUM_ADDRESS)return e.toLowerCase();return e}(s,o),c=(null===(t=n[o])||void 0===t?void 0:t[i])??{},u=c[a],l=c[r.FALLBACK_VARIATION],d=null!=u&&u.name||!l?u??{}:l,{name:m,sourceId:h,origin:p,proposedNames:f}=d,g=m===undefined?null:m,k=h===undefined?null:h,S=p===undefined?null:p;return{name:g,sourceId:k,proposedNames:f===undefined?{}:f,origin:S}},t[3]=n,t[4]=s):s=t[4],c=e.map(s),t[0]=n,t[1]=e,t[2]=c}else c=t[2];return c}}}},{package:"$root$",file:"ui/hooks/useName.ts"}],[7628,{"../../shared/constants/metametrics":6190,"../../shared/lib/only-keep-host":6289,"../../shared/modules/selectors/networks":6335,"../components/app/toast-master/utils":6844,"../contexts/metametrics":7420,"../selectors/multichain/networks":8588,"../selectors/selectors":8597,"../store/actions":8611,"../store/background-connection":8612,"@metamask/utils":3554,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNetworkConnectionBanner=void 0;var s=e("react"),r=e("react-redux"),o=e("@metamask/utils"),a=e("../selectors/multichain/networks"),i=e("../selectors/selectors"),c=e("../store/actions"),u=e("../contexts/metametrics"),l=e("../../shared/constants/metametrics"),d=e("../../shared/modules/selectors/networks"),m=e("../../shared/lib/only-keep-host"),h=e("../store/background-connection"),p=e("../components/app/toast-master/utils");n.useNetworkConnectionBanner=()=>{const e=(0,r.useDispatch)(),{trackEvent:t}=(0,s.useContext)(u.MetaMetricsContext),n=(0,r.useSelector)(i.getIsDeviceOffline),f=(0,r.useSelector)(a.selectFirstUnavailableEvmNetwork),g=(0,r.useSelector)(i.getNetworkConnectionBanner),k=(0,r.useSelector)(d.getNetworkConfigurationsByChainId),S=(0,s.useRef)({}),y=(0,s.useCallback)(()=>{S.current.degradedTimer&&(clearTimeout(S.current.degradedTimer),S.current.degradedTimer=undefined)},[]),v=(0,s.useCallback)(()=>{S.current.unavailableTimer&&(clearTimeout(S.current.unavailableTimer),S.current.unavailableTimer=undefined)},[]),b=(0,s.useCallback)(()=>{y(),v()},[y,v]),T=(0,s.useCallback)(async({bannerType:e,eventName:n,networkClientId:s})=>{try{let r;for(const e of Object.values(k)){const t=e.rpcEndpoints.find(e=>e.networkClientId===s);if(t){r={chainId:e.chainId,url:t.url};break}}if(!r)return void console.warn(`RPC endpoint not found for network client ID: ${s}`);const a=r.url,i=(0,o.hexToNumber)(r.chainId),c=await(0,h.submitRequestToBackground)("isPublicEndpointUrl",[a])?(0,m.onlyKeepHost)(a):"custom";t({category:l.MetaMetricsEventCategory.Network,event:n,properties:{banner_type:e,chain_id_caip:`eip155:${i}`,rpc_domain:c,rpc_endpoint_url:c}})}catch(e){console.error("Failed to track network banner event:",e)}},[k,t]),w=(0,s.useCallback)(()=>{v(),S.current.unavailableTimer=setTimeout(()=>{f&&(T({bannerType:"unavailable",eventName:l.MetaMetricsEventName.NetworkConnectionBannerShown,networkClientId:f.networkClientId}),e((0,c.updateNetworkConnectionBanner)({status:"unavailable",networkName:f.networkName,networkClientId:f.networkClientId,chainId:f.chainId,isInfuraEndpoint:f.isInfuraEndpoint,infuraEndpointIndex:f.infuraEndpointIndex})))},25e3)},[f,T,e,v]),C=(0,s.useCallback)(()=>{y(),S.current.degradedTimer=setTimeout(()=>{f&&(T({bannerType:"degraded",eventName:l.MetaMetricsEventName.NetworkConnectionBannerShown,networkClientId:f.networkClientId}),e((0,c.updateNetworkConnectionBanner)({status:"degraded",networkName:f.networkName,networkClientId:f.networkClientId,chainId:f.chainId,isInfuraEndpoint:f.isInfuraEndpoint,infuraEndpointIndex:f.infuraEndpointIndex})),w())},5e3)},[f,T,e,w,y]);(0,s.useEffect)(()=>n?(b(),void("available"!==g.status&&e((0,c.updateNetworkConnectionBanner)({status:"available"})))):(f?"degraded"===g.status?w():"unknown"!==g.status&&"available"!==g.status||C():"available"!==g.status&&e((0,c.updateNetworkConnectionBanner)({status:"available"})),()=>{b()}),[n,f,b,e,g.status,C,w]);const A=(0,s.useCallback)(async()=>{if("degraded"!==g.status&&"unavailable"!==g.status)return;const{chainId:t,infuraEndpointIndex:n}=g;if(n===undefined)return;const s=k[t];if(s)try{await e((0,c.updateNetwork)({chainId:t,name:s.name,nativeCurrency:s.nativeCurrency,rpcEndpoints:s.rpcEndpoints,blockExplorerUrls:s.blockExplorerUrls,defaultBlockExplorerUrlIndex:s.defaultBlockExplorerUrlIndex,defaultRpcEndpointIndex:n},{replacementSelectedRpcEndpointIndex:n})),e((0,p.setShowInfuraSwitchToast)(!0))}catch{}},[g,k,e]);return"degraded"!==g.status&&"unavailable"!==g.status||!f?{...g,trackNetworkBannerEvent:T,switchToInfura:A}:{...g,networkClientId:f.networkClientId,networkName:f.networkName,chainId:f.chainId,isInfuraEndpoint:f.isInfuraEndpoint,infuraEndpointIndex:f.infuraEndpointIndex,trackNetworkBannerEvent:T,switchToInfura:A}}}}},{package:"$root$",file:"ui/hooks/useNetworkConnectionBanner.ts"}],[7629,{"../../shared/modules/selectors/networks":6335,"../ducks/metamask/metamask":7448,"../selectors":8577,"../selectors/multichain/networks":8588,"./useI18nContext":7615,"./usePrevious":7635,lodash:5239,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNfts=function(e){const t=(0,s.c)(39);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{overridePopularNetworkFilter:h}=n,p=h!==undefined&&h,f=(0,m.useI18nContext)(),g=(0,o.useSelector)(i.getAllNfts),{address:k}=(0,o.useSelector)(c.getSelectedInternalAccount),S=(0,o.useSelector)(l.getCurrentChainId),y=(0,o.useSelector)(c.getAllChainsToPoll),v=(0,o.useSelector)(u.getEnabledNetworksByNamespace);let b;if(t[2]!==g||t[3]!==S||t[4]!==v||t[5]!==p){e:{const e={};if(p){let e;t[7]!==g||t[8]!==S?(e=(null==g?void 0:g[S])??[],t[7]=g,t[8]=S,t[9]=e):e=t[9],b=e;break e}Object.entries(g??{}).forEach(t=>{const[n,s]=t;null!=v&&v[n]&&Array.isArray(s)&&(e[n]=s)}),b=e}t[2]=g,t[3]=S,t[4]=v,t[5]=p,t[6]=b}else b=t[6];const T=b,w=(0,o.useSelector)(i.getNftContracts);let C;t[10]!==f?(C=f("nftsPreviouslyOwned"),t[10]=f,t[11]=C):C=t[11];const A=C;let I;t[12]!==f?(I=f("unknownCollection"),t[12]=f,t[13]=I):I=t[13];const E=I;let _;t[14]===Symbol.for("react.memo_cache_sentinel")?(_=[],t[14]=_):_=t[14];const[P,M]=(0,r.useState)(_);let R;t[15]===Symbol.for("react.memo_cache_sentinel")?(R=[],t[15]=R):R=t[15];const[N,O]=(0,r.useState)(R),[x,D]=(0,r.useState)(!0),B=(0,d.usePrevious)(T),F=(0,d.usePrevious)(y),$=(0,d.usePrevious)(k);let U,L,j;t[16]!==y||t[17]!==S||t[18]!==T||t[19]!==F||t[20]!==B||t[21]!==$||t[22]!==k?(U=()=>{(0,a.isEqual)(B,T)&&(0,a.isEqual)($,k)&&(0,a.isEqual)(F,S)||(()=>{if(D(!0),k===undefined||y===undefined)return;const e=[],t=[];Object.values(T).flat().forEach(n=>{!1===(null==n?void 0:n.isCurrentlyOwned)?e.push(n):t.push(n)}),O(e),M(t),D(!1)})()},t[16]=y,t[17]=S,t[18]=T,t[19]=F,t[20]=B,t[21]=$,t[22]=k,t[23]=U):U=t[23];t[24]!==y||t[25]!==S||t[26]!==w||t[27]!==T||t[28]!==F||t[29]!==B||t[30]!==$||t[31]!==A||t[32]!==k||t[33]!==E?(L=[T,B,w,D,S,F,k,$,A,E,y],t[24]=y,t[25]=S,t[26]=w,t[27]=T,t[28]=F,t[29]=B,t[30]=$,t[31]=A,t[32]=k,t[33]=E,t[34]=L):L=t[34];(0,r.useEffect)(U,L),t[35]!==P||t[36]!==x||t[37]!==N?(j={loading:x,currentlyOwnedNfts:P,previouslyOwnedNfts:N},t[35]=P,t[36]=x,t[37]=N,t[38]=j):j=t[38];return j};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("lodash"),i=e("../ducks/metamask/metamask"),c=e("../selectors"),u=e("../selectors/multichain/networks"),l=e("../../shared/modules/selectors/networks"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNfts.ts"}],[7630,{"../ducks/metamask/metamask":7448,"../helpers/utils/nfts":7502,"../selectors":8577,"../selectors/multichain/networks":8588,"./useI18nContext":7615,"./usePrevious":7635,lodash:5239,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftsCollections=function(){const e=(0,s.c)(28),t=(0,m.useI18nContext)();let n;e[0]!==t?(n=t("nftsPreviouslyOwned"),e[0]=t,e[1]=n):n=e[1];const h=n;let p;e[2]!==t?(p=t("unknownCollection"),e[2]=t,e[3]=p):p=e[3];const f=p;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g={},e[4]=g):g=e[4];const[k,S]=(0,r.useState)(g);let y,v;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[5]=y):y=e[5];e[6]!==h?(v={collectionName:h,nfts:y},e[6]=h,e[7]=v):v=e[7];const[b,T]=(0,r.useState)(v),w=(0,o.useSelector)(i.getAllNfts),C=(0,o.useSelector)(u.getEnabledNetworksByNamespace);let A;e[8]!==C?(A=Object.keys(C),e[8]=C,e[9]=A):A=e[9];const I=A,{address:E}=(0,o.useSelector)(c.getSelectedInternalAccount);let _;e[10]!==w||e[11]!==C?(_={},Object.entries(w??{}).forEach(e=>{const[t,n]=e;null!=C&&C[t]&&Array.isArray(n)&&(_[t]=n)}),e[10]=w,e[11]=C,e[12]=_):_=e[12];const P=_,[M,R]=(0,r.useState)(!0),N=(0,o.useSelector)(i.getNftContracts),O=(0,d.usePrevious)(P),x=(0,d.usePrevious)(I),D=(0,d.usePrevious)(E);let B,F,$;e[13]!==I||e[14]!==N||e[15]!==P||e[16]!==x||e[17]!==O||e[18]!==D||e[19]!==h||e[20]!==E||e[21]!==f?(B=()=>{(0,a.isEqual)(O,P)&&(0,a.isEqual)(D,E)&&(0,a.isEqual)(x,I)||(()=>{if(R(!0),E===undefined||0===I.length)return void R(!1);const e={},t={collectionName:h,nfts:[]};Object.values(P).flat().forEach(n=>{if(!1===(null==n?void 0:n.isCurrentlyOwned))t.nfts.push(n);else if(e[n.address])e[n.address].nfts.push(n);else{const t=N.find(e=>{const{address:t}=e;return t===n.address});e[n.address]={collectionName:(null==t?void 0:t.name)||f,collectionImage:(null==t?void 0:t.logo)||(0,l.getNftImage)(n.image),nfts:[n]}}}),S(e),T(t),R(!1)})()},F=[P,O,N,R,I,x,E,D,h,f],e[13]=I,e[14]=N,e[15]=P,e[16]=x,e[17]=O,e[18]=D,e[19]=h,e[20]=E,e[21]=f,e[22]=B,e[23]=F):(B=e[22],F=e[23]);(0,r.useEffect)(B,F),e[24]!==k||e[25]!==M||e[26]!==b?($={nftsLoading:M,collections:k,previouslyOwnedCollection:b},e[24]=k,e[25]=M,e[26]=b,e[27]=$):$=e[27];return $};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("lodash"),i=e("../ducks/metamask/metamask"),c=e("../selectors"),u=e("../selectors/multichain/networks"),l=e("../helpers/utils/nfts"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNftsCollections.js"}],[7631,{"../helpers/constants/notifications":7463,"../store/actions":8611,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNotificationTimeouts=void 0;var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../store/actions"),a=e("../helpers/constants/notifications");n.useSnapNotificationTimeouts=()=>{const e=(0,s.c)(4),t=(0,r.useDispatch)();let n;e[0]!==t?(n=e=>{setTimeout(()=>{t((0,o.deleteNotificationsById)([e]))},a.NOTIFICATIONS_EXPIRATION_DELAY)},e[0]=t,e[1]=n):n=e[1];const i=n;let c;return e[2]!==i?(c={setNotificationTimeout:i},e[2]=i,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/useNotificationTimeouts.ts"}],[7632,{"../selectors":8577,"@metamask/permission-controller":2862,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginMetadata=function(e){const t=(0,s.c)(11);let n;t[0]!==e?(n=t=>(0,a.getTargetSubjectMetadata)(t,e),t[0]=e,t[1]=n):n=t[1];const i=(0,o.useSelector)(n);if(!e)return null;let c=null;try{let n;t[2]!==e?(n=new URL(e),t[2]=e,t[3]=n):n=t[3];const s=n;let o;t[4]!==e||t[5]!==s.host||t[6]!==s.hostname?(o={host:s.host,hostname:s.hostname,origin:e,subjectType:r.SubjectType.Unknown},t[4]=e,t[5]=s.host,t[6]=s.hostname,t[7]=o):o=t[7],c=o}catch(e){}if(i&&c){let e;return t[8]!==c||t[9]!==i?(e={...c,...i},t[8]=c,t[9]=i,t[10]=e):e=t[10],e}if(i)return i;return c};var s=e("react-compiler-runtime"),r=e("@metamask/permission-controller"),o=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useOriginMetadata.js"}],[7633,{"../selectors/selectors":8597,"./useTrustSignals":7661,"@metamask/phishing-controller":2876,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginTrustSignals=function(e){const t=(0,s.c)(8);let n,c;if(t[0]!==e){if(e)try{const t=new URL(e);n=t.hostname}catch(c){n=undefined}t[0]=e,t[1]=n}else n=t[1];t[2]!==n?(c=e=>(0,a.getUrlScanCacheResult)(e,n),t[2]=n,t[3]=c):c=t[3];const u=(0,o.useSelector)(c);let l;t[4]!==u?(l=function(e){var t;const n=null==e||null===(t=e.data)||void 0===t?void 0:t.recommendedAction;if(!n)return i.TrustSignalDisplayState.Unknown;switch(n){case r.RecommendedAction.Block:return i.TrustSignalDisplayState.Malicious;case r.RecommendedAction.Warn:return i.TrustSignalDisplayState.Warning;case r.RecommendedAction.Verified:return i.TrustSignalDisplayState.Verified;case r.RecommendedAction.None:default:return i.TrustSignalDisplayState.Unknown}}(u),t[4]=u,t[5]=l):l=t[5];const d=l;let m;t[6]!==d?(m={state:d,label:null},t[6]=d,t[7]=m):m=t[7];return m};var s=e("react-compiler-runtime"),r=e("@metamask/phishing-controller"),o=e("react-redux"),a=e("../selectors/selectors"),i=e("./useTrustSignals")}}},{package:"$root$",file:"ui/hooks/useOriginTrustSignals.ts"}],[7634,{"./useSyncEqualityCheck":7644,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-compiler-runtime"),r=e("react"),o=e("./useSyncEqualityCheck");n.default=e=>{const t=(0,s.c)(10),n=(0,r.useRef)(null),i=(0,o.useSyncEqualityCheck)(e.input),c=(0,r.useRef)(0),u=(0,r.useRef)(!0);let l,d,m,h;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>(u.current=!0,()=>{u.current=!1}),d=[],t[0]=l,t[1]=d):(l=t[0],d=t[1]),(0,r.useEffect)(l,d),t[2]!==i||t[3]!==e?(m=()=>{c.current=c.current+1;const t=c.current,s=()=>{n.current&&(e.stopPollingByPollingToken(n.current),n.current=null)};return!1===e.enabled?(s(),a):(e.startPolling(i).then(r=>{t===c.current?(n.current=r,u.current||s()):e.stopPollingByPollingToken(r)}),s)},t[2]=i,t[3]=e,t[4]=m):m=t[4],t[5]!==i||t[6]!==e.enabled||t[7]!==e.startPolling||t[8]!==e.stopPollingByPollingToken?(h=[i,e.enabled,e.startPolling,e.stopPollingByPollingToken],t[5]=i,t[6]=e.enabled,t[7]=e.startPolling,t[8]=e.stopPollingByPollingToken,t[9]=h):h=t[9],(0,r.useEffect)(m,h)};function a(){}}}},{package:"$root$",file:"ui/hooks/usePolling.ts"}],[7635,{react:5657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePrevious=function(e){const t=(0,s.useRef)();return(0,s.useEffect)(()=>{t.current=e},[e]),t.current};var s=e("react")}}},{package:"$root$",file:"ui/hooks/usePrevious.ts"}],[7636,{"./usePrevious":7635,lodash:5239,react:5657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useScrollRequired=void 0;var s=e("react"),r=e("lodash"),o=e("./usePrevious");n.useScrollRequired=(e=[],{offsetPxFromBottom:t=16}={})=>{var n,a;const i=(0,s.useRef)(null),c=(0,o.usePrevious)(null===(n=i.current)||void 0===n?void 0:n.offsetHeight),[u,l]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),f=(0,s.useCallback)(()=>{if(!i.current)return;const e=i.current&&i.current.scrollHeight>i.current.clientHeight,n=e&&Math.round(i.current.scrollTop)+i.current.offsetHeight+t>=i.current.scrollHeight;e!==d&&(l(!1),m(e)),p(!e||n),e&&!n||l(!0)},[d,t]);(0,s.useEffect)(f,[i,...e]),(0,s.useEffect)(()=>{var e;c!==(null===(e=i.current)||void 0===e?void 0:e.offsetHeight)&&f()},[f,null===(a=i.current)||void 0===a?void 0:a.offsetHeight,c]);return{isScrollable:d,isScrolledToBottom:h,hasScrolledToBottom:u,scrollToBottom:()=>{p(!0),l(!0),i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},setHasScrolledToBottom:l,ref:i,onScroll:(0,r.debounce)(f,25)}}}}},{package:"$root$",file:"ui/hooks/useScrollRequired.js"}],[7637,{"../helpers/constants/routes":7465,"../selectors":8577,react:5657,"react-compiler-runtime":5571,"react-redux":5622,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSegmentContext=function(){const e=(0,s.c)(11),t=(0,o.useLocation)();let n,c;e[0]!==t.pathname?(n=function(e){const t=(0,a.getPaths)();for(const n of t){if((0,o.matchPath)({path:n,end:!0,caseSensitive:!1},e))return n}return undefined}(t.pathname),c=n?a.PATH_NAME_MAP.get(n):undefined,e[0]=t.pathname,e[1]=n,e[2]=c):(n=e[1],c=e[2]);const u=c,l=((0,r.useSelector)(i.txDataSelector)??{}).origin;let d;e[3]!==l?(d=l?{url:l}:undefined,e[3]=l,e[4]=d):d=e[4];const m=d;let h;e[5]!==n||e[6]!==u?(h=n?{path:n,title:u,url:n}:undefined,e[5]=n,e[6]=u,e[7]=h):h=e[7];const p=h;let f;e[8]!==p||e[9]!==m?(f={page:p,referrer:m},e[8]=p,e[9]=m,e[10]=f):f=e[10];return f};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("react-router-dom"),a=e("../helpers/constants/routes"),i=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useSegmentContext.ts"}],[7638,{react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.useShallowEqualityCheck=o;var s=e("react"),r=e("react-redux");function o(e){const t=(0,s.useRef)(e);return(0,r.shallowEqual)(t.current,e)||(t.current=e),t.current}n.default=o}}},{package:"$root$",file:"ui/hooks/useShallowEqualityCheck.ts"}],[7639,{"../ducks/app/app":7432,"./useGasFeeEstimates":7612,lodash:5239,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldAnimateGasEstimations=function(){const{isGasEstimatesLoading:e,gasFeeEstimates:t}=(0,i.useGasFeeEstimates)(),n=(0,r.useDispatch)(),c=(0,r.useSelector)(a.getGasLoadingAnimationIsShowing),u=(0,s.useRef)(t),l=!(0,o.isEqual)(u.current,t),d=(0,o.isEqual)(u.current,{});l&&(u.current=t);const m=e||l&&!d;(0,s.useEffect)(()=>{!1===c&&!0===m&&n((0,a.toggleGasLoadingAnimation)(!0))},[n,c,m]),(0,s.useEffect)(()=>{let e;return c&&!m&&(e=setTimeout(()=>{n((0,a.toggleGasLoadingAnimation)(!1))},2e3)),()=>{e&&clearTimeout(e)}},[n,c,m])};var s=e("react"),r=e("react-redux"),o=e("lodash"),a=e("../ducks/app/app"),i=e("./useGasFeeEstimates")}}},{package:"$root$",file:"ui/hooks/useShouldAnimateGasEstimations.js"}],[7640,{"../../shared/constants/time":6211,"../../shared/modules/selectors/networks":6335,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldShowSpeedUp=function(e,t){const n=(0,s.c)(14),{transactions:c,hasRetried:u}=e,l=(0,o.useSelector)(i.getCurrentChainId),[d]=c;let m;n[0]!==d?(m=d===undefined?{}:d,n[0]=d,n[1]=m):m=n[1];const h=m,p=h.chainId===l,{submittedTime:f}=h;let g;n[2]!==u||n[3]!==t||n[4]!==p||n[5]!==f?(g=()=>Date.now()-f>5e3&&t&&!u&&p,n[2]=u,n[3]=t,n[4]=p,n[5]=f,n[6]=g):g=n[6];const[k,S]=(0,r.useState)(g);let y,v;n[7]!==u||n[8]!==t||n[9]!==p||n[10]!==k||n[11]!==f?(y=()=>{let e;return!u&&t&&p||!k?!u&&t&&p&&!k&&(Date.now()-f>5*a.SECOND?S(!0):e=setTimeout(()=>{S(!0),clearTimeout(e)},5001-(Date.now()-f))):S(!1),()=>{e&&clearTimeout(e)}},v=[f,k,u,t,p],n[7]=u,n[8]=t,n[9]=p,n[10]=k,n[11]=f,n[12]=y,n[13]=v):(y=n[12],v=n[13]);return(0,r.useEffect)(y,v),k};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../../shared/constants/time"),i=e("../../shared/modules/selectors/networks")}}},{package:"$root$",file:"ui/hooks/useShouldShowSpeedUp.js"}],[7641,{"../../shared/modules/environment":6319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSidePanelEnabled=void 0;var s=e("../../shared/modules/environment");n.useSidePanelEnabled=()=>(0,s.getIsSidePanelFeatureEnabled)()}}},{package:"$root$",file:"ui/hooks/useSidePanelEnabled.ts"}],[7642,{"../selectors":8577,"../selectors/multichain/networks":8588,"../store/actions":8611,"./useMultiPolling":7621,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useStaticTokensPolling=n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../store/actions"),i=e("../selectors/multichain/networks"),c=e("../selectors"),u=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};const l=()=>{const e=(0,r.c)(6),t=(0,o.useSelector)(i.getEnabledChainIds),n=(0,o.useSelector)(c.getSelectedAccount);let s;e[0]!==t?(s=t??[],e[0]=t,e[1]=s):s=e[1];const l=(null==n?void 0:n.address)??"";let d,m;return e[2]!==s||e[3]!==l?(d={startPolling:a.staticAssetsStartPolling,stopPollingByPollingToken:a.staticAssetsStopPollingByPollingToken,input:[{chainIds:s,selectedAccountAddress:l}]},e[2]=s,e[3]=l,e[4]=d):d=e[4],(0,u.default)(d),e[5]===Symbol.for("react.memo_cache_sentinel")?(m={},e[5]=m):m=e[5],m};n.useStaticTokensPolling=l;n.default=l}}},{package:"$root$",file:"ui/hooks/useStaticTokensPolling.ts"}],[7643,{"../../shared/lib/transactions-controller-utils":6301,"../../shared/modules/selectors/networks":6335,"../../shared/modules/swaps.utils":6347,"./useTokenFiatAmount":7653,"@metamask/transaction-controller":3473,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSwappedTokenValue=function(e,t){const n=(0,s.c)(25),{symbol:l,decimals:d,address:m}=t,{primaryTransaction:h,initialTransaction:p}=e,{type:f}=p;let g;n[0]!==p.txParams?(g=p.txParams||{},n[0]=p.txParams,n[1]=g):g=n[1];const{from:k}=g,S=(0,r.useSelector)(c.getCurrentChainId);let y;n[2]!==S||n[3]!==t.address||n[4]!==t.symbol||n[5]!==h.destinationTokenSymbol||n[6]!==f?(y=f===o.TransactionType.swap&&((null==t?void 0:t.symbol)===h.destinationTokenSymbol||(0,i.isSwapsDefaultTokenAddress)(t.address,S)&&(0,i.isSwapsDefaultTokenSymbol)(h.destinationTokenSymbol,S)),n[2]=S,n[3]=t.address,n[4]=t.symbol,n[5]=h.destinationTokenSymbol,n[6]=f,n[7]=y):y=n[7];const v=y;let b;n[8]!==m||n[9]!==S||n[10]!==d||n[11]!==p||n[12]!==v||n[13]!==h.destinationTokenSymbol||n[14]!==h.swapTokenValue||n[15]!==k||n[16]!==f?(b=[o.TransactionType.swap].includes(f)&&v?(0,a.getSwapsTokensReceivedFromTxMeta)(h.destinationTokenSymbol,p,m,k,d,null,S):[o.TransactionType.swap,o.TransactionType.swapAndSend].includes(f)&&h.swapTokenValue,n[8]=m,n[9]=S,n[10]=d,n[11]=p,n[12]=v,n[13]=h.destinationTokenSymbol,n[14]=h.swapTokenValue,n[15]=k,n[16]=f,n[17]=b):b=n[17];const T=b;let w;n[18]!==T?(w="string"==typeof T&&-1===Math.sign(T),n[18]=T,n[19]=w):w=n[19];const C=w,A=(0,u.useTokenFiatAmount)(m,T||"",l),I=(0,u.useTokenFiatAmount)(h.sourceTokenAddress,T,h.sourceTokenSymbol);let E,_;T&&(v?E=A:f===o.TransactionType.swapAndSend&&(E=I));n[20]!==C||n[21]!==v||n[22]!==E||n[23]!==T?(_={swapTokenValue:T,swapTokenFiatAmount:E,isViewingReceivedTokenFromSwap:v,isNegative:C},n[20]=C,n[21]=v,n[22]=E,n[23]=T,n[24]=_):_=n[24];return _};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("../../shared/lib/transactions-controller-utils"),i=e("../../shared/modules/swaps.utils"),c=e("../../shared/modules/selectors/networks"),u=e("./useTokenFiatAmount")}}},{package:"$root$",file:"ui/hooks/useSwappedTokenValue.js"}],[7644,{"fast-json-stable-stringify":4789,react:5657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.useSyncEqualityCheck=a;var s,r=e("react"),o=(s=e("fast-json-stable-stringify"))&&s.__esModule?s:{default:s};function a(e){const t=(0,o.default)(e),n=(0,r.useRef)(t),s=(0,r.useRef)(e);return t!==n.current&&(s.current=Object.is(e,s.current)?JSON.parse(t):e,n.current=t),s.current}n.default=a}}},{package:"$root$",file:"ui/hooks/useSyncEqualityCheck.ts"}],[7645,{react:5657,"react-compiler-runtime":5571,"react-router-dom":5632},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTabState=function(){const e=(0,s.c)(7),[t,n]=(0,r.useSearchParams)();let o;e[0]!==t?(o=t.get("tab"),e[0]=t,e[1]=o):o=e[1];const a=o;let i;e[2]!==n?(i=e=>n(t=>(t.set("tab",e),t)),e[2]=n,e[3]=i):i=e[3];const c=i;let u;e[4]!==c||e[5]!==a?(u=[a,c],e[4]=c,e[5]=a,e[6]=u):u=e[6];return u};var s=e("react-compiler-runtime"),r=(e("react"),e("react-router-dom"))}}},{package:"$root$",file:"ui/hooks/useTabState.ts"}],[7646,{"../../shared/constants/preferences":6199,"../selectors":8577,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTheme=function(){const e=(0,s.c)(10),t=(0,o.useSelector)(a.getTheme),[n,c]=(0,r.useState)(u);let d;e[0]!==t||e[1]!==n?(d=()=>l(t,n),e[0]=t,e[1]=n,e[2]=d):d=e[2];const[m,h]=(0,r.useState)(d);let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{const t=e.matches?i.ThemeType.dark:i.ThemeType.light;c(t)},e[3]=p):p=e[3];const f=p;let g,k,S,y;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",f),()=>{e.removeEventListener("change",f)}},k=[f],e[4]=g,e[5]=k):(g=e[4],k=e[5]);(0,r.useEffect)(g,k),e[6]!==t||e[7]!==n?(S=()=>{const e=l(t,n);h(e)},y=[t,n],e[6]=t,e[7]=n,e[8]=S,e[9]=y):(S=e[8],y=e[9]);return(0,r.useEffect)(S,y),m};var s=e("react-compiler-runtime"),r=e("react"),o=e("react-redux"),a=e("../selectors"),i=e("../../shared/constants/preferences");const c=Object.values(i.ThemeType).filter(e=>e!==i.ThemeType.os);function u(){return window.matchMedia("(prefers-color-scheme: dark)").matches?i.ThemeType.dark:i.ThemeType.light}function l(e,t){const n=document.documentElement.getAttribute("data-theme");let s;s=e===i.ThemeType.os?t:e||(n||t);return c.includes(s)?s:(console.warn(`useTheme: Invalid theme resolved to "${s}". Defaulting to "${i.ThemeType.light}".`),i.ThemeType.light)}}}},{package:"$root$",file:"ui/hooks/useTheme.ts"}],[7647,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useThrottle=function(e,t){const n=(0,s.c)(4),o=t===undefined?500:t,[a,i]=(0,r.useState)(e),c=(0,r.useRef)(null);let u,l;n[0]!==o||n[1]!==e?(u=()=>{const t=Date.now();if(c.current&&t>=c.current+o)return c.current=t,void i(e);const n=window.setTimeout(()=>{c.current=Date.now(),i(e)},o);return()=>window.clearTimeout(n)},l=[e,o],n[0]=o,n[1]=e,n[2]=u,n[3]=l):(u=n[2],l=n[3]);return(0,r.useEffect)(u,l),a};var s=e("react-compiler-runtime"),r=e("react")}}},{package:"$root$",file:"ui/hooks/useThrottle.ts"}],[7648,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTimeout=function(e,t,n){const o=(0,s.c)(9),a=n===undefined||n,i=(0,r.useRef)(),[c,u]=(0,r.useState)(null);let l,d,m,h,p;o[0]!==e?(l=()=>{i.current=e},d=[e],o[0]=e,o[1]=l,o[2]=d):(l=o[1],d=o[2]);(0,r.useEffect)(l,d),o[3]!==t||o[4]!==c?(m=()=>{if("start"!==c)return;const e=setTimeout(()=>{i.current()},t);return u(e),()=>{clearTimeout(c)}},h=[t,c],o[3]=t,o[4]=c,o[5]=m,o[6]=h):(m=o[5],h=o[6]);(0,r.useEffect)(m,h),o[7]!==c?(p=()=>{clearTimeout(c),u("start")},o[7]=c,o[8]=p):p=o[8];const f=p;a&&f();return f};var s=e("react-compiler-runtime"),r=e("react")}}},{package:"$root$",file:"ui/hooks/useTimeout.js"}],[7649,{"../../shared/modules/conversion.utils":6315,"../ducks/metamask/metamask":7448,"../selectors/multichain/networks":8588,"../store/actions":8611,"./useMultiPolling":7621,"bn.js":4413,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyBalance=h,n.useTokenTracker=n.useTokenBalances=void 0;var s=e("react-compiler-runtime"),r=e("react-redux"),o=d(e("bn.js")),a=e("../store/actions"),i=e("../ducks/metamask/metamask"),c=e("../../shared/modules/conversion.utils"),u=e("../selectors/multichain/networks"),l=d(e("./useMultiPolling"));function d(e){return e&&e.__esModule?e:{default:e}}const m=e=>{const t=(0,s.c)(6);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{chainIds:o}=n,c=(0,r.useSelector)(i.getTokenBalances),d=(0,r.useSelector)(u.getEnabledChainIds),m=o&&o.length>0?o:d;let h,p;return t[2]!==m?(h={startPolling:a.tokenBalancesStartPolling,stopPollingByPollingToken:a.tokenBalancesStopPollingByPollingToken,input:[m]},t[2]=m,t[3]=h):h=t[3],(0,l.default)(h),t[4]!==c?(p={tokenBalances:c},t[4]=c,t[5]=p):p=t[5],p};n.useTokenBalances=m;function h(e,t,n=5){if(e.eq(new o.default(0)))return"0";const s=parseInt(t.toString(),10);if(0===s)return e.toString();let r=e.toString(),a=r.length,i=a-s,c="";if(i<=0){for(;c.length<=-1*i;)c+="0",a+=1;r=c+r,i=1}const u=r.substr(0,a-s);if(0===n)return u;const l=r.substr(i,n);if(/0+$/u.test(l)){let e=r.substr(i).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${u}${e}`}return`${u}.${l}`}n.useTokenTracker=e=>{const t=(0,s.c)(15),{chainId:n,tokens:r,address:a,hideZeroBalanceTokens:i}=e;let u;t[0]!==n?(u={chainIds:[n]},t[0]=n,t[1]=u):u=t[1];const{tokenBalances:l}=m(u);let d;if(t[2]!==a||t[3]!==n||t[4]!==i||t[5]!==l||t[6]!==r){let e;t[8]!==a||t[9]!==n||t[10]!==i||t[11]!==l?(e=(e,t)=>{var s;const r=(null===(s=l[a])||void 0===s||null===(s=s[n])||void 0===s?void 0:s[t.address])??"0x0";if("0x0"!==r||!i){const n=(0,c.hexToDecimal)(r);e.push({address:t.address,symbol:t.symbol,decimals:t.decimals,balance:n,balanceError:null,string:h(new o.default(n),new o.default(t.decimals))})}return e},t[8]=a,t[9]=n,t[10]=i,t[11]=l,t[12]=e):e=t[12],d=r.reduce(e,[]),t[2]=a,t[3]=n,t[4]=i,t[5]=l,t[6]=r,t[7]=d}else d=t[7];const p=d;let f;return t[13]!==p?(f={tokensWithBalances:p},t[13]=p,t[14]=f):f=t[14],f}}}},{package:"$root$",file:"ui/hooks/useTokenBalances.ts"}],[7650,{"../../shared/modules/transaction.utils":6348,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenData=function(e,t){const n=(0,s.c)(2);let o;e:{if(t!==undefined&&!t||!e){o=null;break e}let s;n[0]!==e?(s=(0,r.parseStandardTokenTransactionData)(e),n[0]=e,n[1]=s):s=n[1],o=s}return o};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/modules/transaction.utils"))}}},{package:"$root$",file:"ui/hooks/useTokenData.js"}],[7651,{"../ducks/metamask/metamask":7448,"../selectors":8577,"../selectors/multichain/networks":8588,"../store/actions":8611,"./useMultiPolling":7621,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(4),t=(0,o.useSelector)(a.getUseTokenDetection),n=(0,o.useSelector)(u.getCompletedOnboarding),s=(0,o.useSelector)(u.getIsUnlocked),d=(0,o.useSelector)(i.getEnabledChainIds),m=n&&s&&t;let h,p;return e[0]!==m||e[1]!==d?(h={startPolling:c.tokenDetectionStartPolling,stopPollingByPollingToken:c.tokenDetectionStopPollingByPollingToken,input:m?[d]:[]},e[0]=m,e[1]=d,e[2]=h):h=e[2],(0,l.default)(h),e[3]===Symbol.for("react.memo_cache_sentinel")?(p={},e[3]=p):p=e[3],p}}}},{package:"$root$",file:"ui/hooks/useTokenDetectionPolling.ts"}],[7652,{"../../shared/lib/metamask-controller-utils":6281,"../../shared/lib/transactions-controller-utils":6301,"./useTokenData":7650,react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenDisplayValue=function(e,t,n){const i=(0,s.c)(5),c=n===undefined||n,u=(0,a.useTokenData)(e,c);let l;i[0]!==u?(l=(0,r.getTokenValueParam)(u),i[0]=u,i[1]=l):l=i[1];const d=l;let m;e:{if(!Boolean(c&&e&&t&&null!==t.decimals&&t.decimals!==undefined&&d)){m=null;break e}let n;i[2]!==t.decimals||i[3]!==d?(n=(0,o.calcTokenAmount)(d,t.decimals).toString(10),i[2]=t.decimals,i[3]=d,i[4]=n):n=i[4],m=n}return m};var s=e("react-compiler-runtime"),r=(e("react"),e("../../shared/lib/metamask-controller-utils")),o=e("../../shared/lib/transactions-controller-utils"),a=e("./useTokenData")}}},{package:"$root$",file:"ui/hooks/useTokenDisplayValue.js"}],[7653,{"../../shared/modules/selectors/networks":6335,"../../shared/modules/string-utils":6346,"../ducks/metamask/metamask":7448,"../helpers/utils/token-util":7514,"../selectors":8577,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenFiatAmount=function(e,t,n,l={},d,m=null,h=!0){var p,f;const g=(0,r.useSelector)(o.getMarketData),k=(0,r.useSelector)(o.getTokenExchangeRates,r.shallowEqual),S=m&&g[m]?Object.entries(g[m]).reduce((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e),{}):null,y=m?S:k,v=(0,r.useSelector)(o.getConfirmationExchangeRates),b={...y,...v},T=(0,r.useSelector)(o.getCurrencyRates),w=(0,r.useSelector)(c.getConversionRate),C=(0,r.useSelector)(a.getNetworkConfigurationsByChainId),A=m?null==T||null===(p=T[null===(f=C[m])||void 0===f?void 0:f.nativeCurrency])||void 0===p?void 0:p.conversionRate:w,I=(0,r.useSelector)(c.getCurrentCurrency),E=(0,r.useSelector)(o.getShouldShowFiat),_=l.showFiat??E,P=Object.keys(b).find(t=>(0,u.isEqualCaseInsensitive)(t,e)),M=l.exchangeRate??(P&&b[P]),R=(0,s.useMemo)(()=>(0,i.getTokenFiatAmount)(M,A,I,t,n,h,d),[A,M,I,t,n,d]);if(!_||I.toUpperCase()===n)return undefined;return R};var s=e("react"),r=e("react-redux"),o=e("../selectors"),a=e("../../shared/modules/selectors/networks"),i=e("../helpers/utils/token-util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useTokenFiatAmount.js"}],[7654,{"../../shared/lib/asset-utils":6224,"../ducks/metamask/metamask":7448,"../helpers/utils/token-insights":7513,"../selectors":8577,"../selectors/selectors":8597,"./useFormatters":7611,"@metamask/bridge-controller":1527,"@metamask/controller-utils":1639,"@metamask/utils":3554,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenInsightsData=void 0;var s=e("react"),r=e("react-redux"),o=e("@metamask/bridge-controller"),a=e("@metamask/utils"),i=e("@metamask/controller-utils"),c=e("../../shared/lib/asset-utils"),u=e("../selectors"),l=e("../ducks/metamask/metamask"),d=e("../selectors/selectors"),m=e("../helpers/utils/token-insights"),h=e("./useFormatters");n.useTokenInsightsData=e=>{var t;const n=(0,r.useSelector)(l.getCurrentCurrency),p=(0,r.useSelector)(d.getCurrencyRates),f=!!e&&(0,c.isEvmChainId)(e.chainId),{formatCurrencyWithMinThreshold:g}=(0,h.useFormatters)(),k=(0,r.useSelector)(u.getMarketData),S=(0,s.useMemo)(()=>{if(!(e&&f&&k&&e.address))return null;const t=k[e.chainId];return(null==t?void 0:t[e.address.toLowerCase()])||null},[e,f,k]),[y,v]=(0,s.useState)(null),[b,T]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),A=(0,s.useMemo)(()=>!(null==e||!e.address)&&(0,o.isNativeAddress)(e.address),[null==e?void 0:e.address]),I=(0,s.useMemo)(()=>f&&S?A?null==e?void 0:e.symbol:S.currency:undefined,[f,A,e,S]),E=I?null==p||null===(t=p[I])||void 0===t?void 0:t.conversionRate:undefined;(0,s.useEffect)(()=>{if(!e||S)return;(async()=>{T(!0),C(null);try{const s=(0,a.isCaipChainId)(e.chainId)?e.chainId:(0,o.formatChainIdToCaip)(e.chainId),r=(0,c.toAssetId)(e.address||"",s);if(!r)return void C("Invalid asset ID");const u=`https://price.api.cx.metamask.io/v3/spot-prices?assetIds=${r}&includeMarketData=true&vsCurrency=${n.toLowerCase()}`,l=await(0,i.handleFetch)(u,{method:"GET",headers:{"X-Client-Id":o.BridgeClientId.EXTENSION}}),d=r?null==l?void 0:l[r]:null;if(d){var t;const e={price:d.price||d.usd,pricePercentChange1d:d.pricePercentChange1d||(null===(t=d.pricePercentChange)||void 0===t?void 0:t.P1D)||0,totalVolume:d.totalVolume,marketCap:d.marketCap,dilutedMarketCap:d.dilutedMarketCap};v(e)}}catch(e){C(e.message)}finally{T(!1)}})()},[e,S,n]);const _=(0,s.useMemo)(()=>S?{price:S.price,pricePercentChange1d:S.pricePercentChange1d,totalVolume:S.totalVolume,marketCap:S.marketCap,dilutedMarketCap:S.dilutedMarketCap??S.marketCap}:y,[S,y]),P=(0,s.useMemo)(()=>{const t=e=>e?g(e,n):"";if(!f||!S||!E){const e=null==_?void 0:_.price,s=null==_?void 0:_.totalVolume,r=(null==_?void 0:_.dilutedMarketCap)??(null==_?void 0:_.marketCap);return{price:e,volume:s,marketCap:r,formattedPrice:t(e),formattedVolume:(0,m.formatCompactCurrency)(s,n),formattedMarketCap:(0,m.formatCompactCurrency)(r,n)}}let s;var r;A&&null!=e&&e.symbol?s=null==p||null===(r=p[e.symbol])||void 0===r?void 0:r.conversionRate:s=S.price!==undefined&&null!==S.price?E*Number(S.price):undefined;const o=S.totalVolume!==undefined&&null!==S.totalVolume?E*Number(S.totalVolume):undefined,a=S.dilutedMarketCap??S.marketCap,i=a!==undefined&&null!==a?E*Number(a):undefined;return{price:s,volume:o,marketCap:i,formattedPrice:t(s),formattedVolume:(0,m.formatCompactCurrency)(o,n),formattedMarketCap:(0,m.formatCompactCurrency)(i,n)}},[_,f,S,E,A,e,p,n,g]);return{marketData:_,marketDataFiat:P,isLoading:b,error:w,isNativeToken:A}}}}},{package:"$root$",file:"ui/hooks/useTokenInsightsData.ts"}],[7655,{"../ducks/metamask/metamask":7448,"../selectors":8577,"../selectors/multichain/networks":8588,"../store/actions":8611,"./useMultiPolling":7621,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(6),t=(0,o.useSelector)(a.getUseTokenDetection),n=(0,o.useSelector)(a.getUseTransactionSimulations),s=(0,o.useSelector)(u.getCompletedOnboarding),d=(0,o.useSelector)(u.getIsUnlocked),m=(0,o.useSelector)(a.getUseExternalServices),h=(0,o.useSelector)(i.getEnabledChainIds),p=s&&d&&m&&(t||n);let f,g,k;return e[0]!==p||e[1]!==h?(f=p?h:[],e[0]=p,e[1]=h,e[2]=f):f=e[2],e[3]!==f?(g={startPolling:c.tokenListStartPolling,stopPollingByPollingToken:c.tokenListStopPollingByPollingToken,input:f},e[3]=f,e[4]=g):g=e[4],(0,l.default)(g),e[5]===Symbol.for("react.memo_cache_sentinel")?(k={},e[5]=k):k=e[5],k}}}},{package:"$root$",file:"ui/hooks/useTokenListPolling.ts"}],[7656,{"../ducks/metamask/metamask":7448,"../selectors":8577,"../selectors/multichain/networks":8588,"../store/actions":8611,"./useMultiPolling":7621,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=e("react-compiler-runtime"),o=e("react-redux"),a=e("../selectors"),i=e("../selectors/multichain/networks"),c=e("../store/actions"),u=e("../ducks/metamask/metamask"),l=(s=e("./useMultiPolling"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,r.c)(3),t=(0,o.useSelector)(u.getCompletedOnboarding),n=(0,o.useSelector)(u.getIsUnlocked),s=(0,o.useSelector)(a.getUseCurrencyRateCheck),d=(0,o.useSelector)(i.getEnabledChainIds),m=t&&n&&s;let h;e[0]!==m||e[1]!==d?(h={startPolling:c.tokenRatesStartPolling,stopPollingByPollingToken:c.tokenRatesStopPollingByPollingToken,input:m?[d]:[]},e[0]=m,e[1]=d,e[2]=h):h=e[2],(0,l.default)(h)}}}},{package:"$root$",file:"ui/hooks/useTokenRatesPolling.ts"}],[7657,{"../../shared/constants/time":6211,"../../shared/modules/selectors/networks":6335,"../../shared/modules/string-utils":6346,"../selectors":8577,"./useEqualityCheck":7607,"@metamask/eth-token-tracker":2308,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTracker=function(e){const t=(0,r.c)(30),{tokens:n,address:s,includeFailedTokens:p,hideZeroBalanceTokens:f}=e,g=p!==undefined&&p,k=f!==undefined&&f,{chainId:S,rpcUrl:y}=(0,i.useSelector)(u.getProviderConfig),{address:v}=(0,i.useSelector)(c.getSelectedInternalAccount,i.shallowEqual),b=s??v;let T;t[0]!==(null==n?void 0:n.length)?(T=()=>(null==n?void 0:n.length)>=0,t[0]=null==n?void 0:n.length,t[1]=T):T=t[1];const[w,C]=(0,o.useState)(T);let A;t[2]===Symbol.for("react.memo_cache_sentinel")?(A=[],t[2]=A):A=t[2];const[I,E]=(0,o.useState)(A),[_,P]=(0,o.useState)(null),M=(0,o.useRef)(null),R=(0,m.useEqualityCheck)(n);let N;t[3]!==k||t[4]!==R?(N=e=>{const t=(k?e.filter(h):e).map(e=>{const t=R.find(t=>(0,d.isEqualCaseInsensitive)(t.address,e.address));return{...e,isERC721:null==t?void 0:t.isERC721,image:null==t?void 0:t.image}});E(t),C(!1),P(null)},t[3]=k,t[4]=R,t[5]=N):N=t[5];const O=N;let x;t[6]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{P(e),C(!1)},t[6]=x):x=t[6];const D=x;let B;t[7]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{M.current&&(M.current.stop(),M.current.removeAllListeners("update"),M.current.removeAllListeners("error"),M.current=null)},t[7]=B):B=t[7];const F=B;let $;t[8]!==g||t[9]!==O?($=(e,t)=>{F(),M.current=new a.default({userAddress:e,provider:global.ethereumProvider,tokens:t,includeFailedTokens:g,pollingInterval:8*l.SECOND,balanceDecimals:5}),M.current.on("update",O),M.current.on("error",D),M.current.updateBalances()},t[8]=g,t[9]=O,t[10]=$):$=t[10];const U=$;let L,j,H,G,W;t[11]===Symbol.for("react.memo_cache_sentinel")?(j=()=>F,L=[F],t[11]=L,t[12]=j):(L=t[11],j=t[12]);(0,o.useEffect)(j,L),t[13]!==U||t[14]!==S||t[15]!==R||t[16]!==O||t[17]!==b?(H=()=>{C(!0),b&&S!==undefined&&global.ethereumProvider?(0===R.length&&O([]),U(b,R)):F()},t[13]=U,t[14]=S,t[15]=R,t[16]=O,t[17]=b,t[18]=H):H=t[18];t[19]!==U||t[20]!==S||t[21]!==R||t[22]!==y||t[23]!==O||t[24]!==b?(G=[b,F,S,y,R,O,U],t[19]=U,t[20]=S,t[21]=R,t[22]=y,t[23]=O,t[24]=b,t[25]=G):G=t[25];(0,o.useEffect)(H,G),t[26]!==_||t[27]!==w||t[28]!==I?(W={loading:w,tokensWithBalances:I,error:_},t[26]=_,t[27]=w,t[28]=I,t[29]=W):W=t[29];return W};var s,r=e("react-compiler-runtime"),o=e("react"),a=(s=e("@metamask/eth-token-tracker"))&&s.__esModule?s:{default:s},i=e("react-redux"),c=e("../selectors"),u=e("../../shared/modules/selectors/networks"),l=e("../../shared/constants/time"),d=e("../../shared/modules/string-utils"),m=e("./useEqualityCheck");function h(e){return Number(e.balance)>0}}}},{package:"$root$",file:"ui/hooks/useTokenTracker.js"}],[7658,{"../../shared/lib/trust-signals":6305,"../helpers/utils/token-cache-utils":7512,"../selectors/selectors":8597,"./useTrustSignals":7661,react:5657,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTrustSignalsForAddresses=function(e,t){const n=(0,s.c)(11);let o;n[0]!==e||n[1]!==t?(o=n=>(0,a.getTokenScanResultsForAddresses)(n,e,t),n[0]=e,n[1]=t,n[2]=o):o=n[2];const l=(0,r.useSelector)(o);let d;e:{if(!e||!t||!Array.isArray(t)){let e;n[3]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[3]=e):e=n[3],d=e;break e}let s;if(n[4]!==e||n[5]!==t||n[6]!==l){let r;n[8]!==e||n[9]!==l?(r=t=>{if(!t)return{state:c.TrustSignalDisplayState.Unknown,label:null};const n=(0,i.generateTokenCacheKey)(e,t);return{state:u(l[n]),label:null}},n[8]=e,n[9]=l,n[10]=r):r=n[10],s=t.map(r),n[4]=e,n[5]=t,n[6]=l,n[7]=s}else s=n[7];d=s}return d};var s=e("react-compiler-runtime"),r=(e("react"),e("react-redux")),o=e("../../shared/lib/trust-signals"),a=e("../selectors/selectors"),i=e("../helpers/utils/token-cache-utils"),c=e("./useTrustSignals");function u(e){var t;const n=null==e||null===(t=e.data)||void 0===t?void 0:t.result_type;if(!n)return c.TrustSignalDisplayState.Unknown;switch(n){case o.ResultType.Malicious:return c.TrustSignalDisplayState.Malicious;case o.ResultType.Warning:return c.TrustSignalDisplayState.Warning;case o.ResultType.Benign:default:return c.TrustSignalDisplayState.Unknown}}}}},{package:"$root$",file:"ui/hooks/useTokenTrustSignals.ts"}],[7659,{"../../shared/constants/network":6194,"../../shared/constants/swaps":6209,"../../shared/modules/hexstring-utils":6324,"../../shared/modules/selectors/networks":6335,"../../shared/modules/swaps.utils":6347,"../ducks/metamask/metamask":7448,"../ducks/swaps/swaps":7456,"../helpers/utils/token-util":7514,"../selectors":8577,"./useEqualityCheck":7607,"@metamask/assets-controllers":1394,"bignumber.js":4362,lodash:5239,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRenderableTokenData=y,n.useTokensToSearch=function({usersTokens:e=[],topTokens:t={},shuffledTokensList:n,tokenBucketPriority:s=g.TokenBucketPriority.owned}){const c=(0,o.useSelector)(d.getCurrentChainId),u=(0,o.useSelector)(l.getTokenExchangeRates,i.isEqual),f=(0,o.useSelector)(m.getConversionRate),k=(0,o.useSelector)(m.getCurrentCurrency),v=(0,o.useSelector)(l.getSwapsDefaultToken,o.shallowEqual),b=(0,o.useSelector)(l.getTokenList,i.isEqual),T=(0,S.useEqualityCheck)(t),w=(0,S.useEqualityCheck)(e),C=y(v,u,f,k,c,b),A=(0,S.useEqualityCheck)(C),I=(0,o.useSelector)(h.getSwapsTokens,i.isEqual)||[],E=I.length?I:[A,...n.filter(e=>e.symbol!==A.symbol)],_=(0,S.useEqualityCheck)(E);return(0,r.useMemo)(()=>{const e=w.reduce((e,t)=>({...e,[t.address.toLowerCase()]:t}),{}),t={owned:[],top:[],others:[]};return(0,i.uniqBy)([A,..._,...w],e=>e.address.toLowerCase()).forEach(n=>{const r=y({...e[n.address.toLowerCase()],...n},u,f,k,c,b);s===g.TokenBucketPriority.owned?(0,p.isSwapsDefaultTokenSymbol)(r.symbol,c)||e[n.address.toLowerCase()]?t.owned.push(r):T[n.address.toLowerCase()]?t.top[T[n.address.toLowerCase()].index]=r:t.others.push(r):T[n.address.toLowerCase()]?t.top[T[n.address.toLowerCase()].index]=r:(0,p.isSwapsDefaultTokenSymbol)(r.symbol,c)||e[n.address.toLowerCase()]?t.owned.push(r):t.others.push(r)}),t.owned=t.owned.sort(({rawFiat:e},{rawFiat:t})=>new a.default(e||0).gt(t||0)?-1:1),t.top=t.top.filter(Boolean),s===g.TokenBucketPriority.owned?[...t.owned,...t.top,...t.others]:[...t.top,...t.owned,...t.others]},[_,w,T,u,f,k,A,c,b,s])};var s,r=e("react"),o=e("react-redux"),a=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("lodash"),c=e("@metamask/assets-controllers"),u=e("../helpers/utils/token-util"),l=e("../selectors"),d=e("../../shared/modules/selectors/networks"),m=e("../ducks/metamask/metamask"),h=e("../ducks/swaps/swaps"),p=e("../../shared/modules/swaps.utils"),f=e("../../shared/modules/hexstring-utils"),g=e("../../shared/constants/swaps"),k=e("../../shared/constants/network"),S=e("./useEqualityCheck");function y(e,t,n,s,r,o){var i,l;const{symbol:d,name:m,address:h,iconUrl:g,string:S,balance:y,decimals:v}=e;let b;(0,p.isSwapsDefaultTokenSymbol)(d,r)?b=1:S&&n>0&&(b=t[(0,f.toChecksumHexAddress)(h)]);const T=(0,u.getTokenFiatAmount)(b,n,s,S,d,!0)||"",w=T?(0,u.getTokenFiatAmount)(b,n,s,S,d,!1):"",C=r===k.CHAIN_IDS.SEPOLIA?k.CHAIN_IDS.MAINNET:r,A=(d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.MAINNET||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.SEPOLIA||d===k.CURRENCY_SYMBOLS.BNB&&r===k.CHAIN_IDS.BSC||d===k.CURRENCY_SYMBOLS.MATIC&&r===k.CHAIN_IDS.POLYGON||d===k.CURRENCY_SYMBOLS.AVALANCHE&&r===k.CHAIN_IDS.AVALANCHE||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.OPTIMISM||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.ARBITRUM||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.LINEA_MAINNET||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.ZKSYNC_ERA||d===k.CURRENCY_SYMBOLS.ETH&&r===k.CHAIN_IDS.BASE?g:(0,c.formatIconUrlWithProxy)({chainId:C,tokenAddress:h||""}))||(null==e?void 0:e.image);return{...e,primaryLabel:d,secondaryLabel:m||(null===(i=o[null==h?void 0:h.toLowerCase()])||void 0===i?void 0:i.name),rightPrimaryLabel:S&&`${new a.default(S).round(6).toString()} ${d}`,rightSecondaryLabel:T,iconUrl:A,identiconAddress:A?null:h,balance:y,decimals:v,name:m||(null===(l=o[null==h?void 0:h.toLowerCase()])||void 0===l?void 0:l.name),rawFiat:w,image:e.image||e.iconUrl}}}}},{package:"$root$",file:"ui/hooks/useTokensToSearch.js"}],[7660,{"../../shared/constants/bridge":6176,"../../shared/lib/metamask-controller-utils":6281,"../../shared/lib/transactions-controller-utils":6301,"../../shared/modules/string-utils":6346,"../ducks/bridge-status/selectors":7434,"../ducks/locale/locale":7447,"../ducks/metamask/metamask":7448,"../helpers/constants/common":7458,"../helpers/constants/transactions":7471,"../helpers/utils/common.util":7485,"../helpers/utils/token-util":7514,"../helpers/utils/transactions.util":7515,"../pages/bridge/hooks/useBridgeTokenDisplayData":7691,"../pages/confirmations/components/simulation-details/formatAmount":8039,"../pages/confirmations/constants/pay":8090,"../selectors":8577,"../store/actions":8611,"./bridge/useBridgeChainInfo":7524,"./useCurrencyDisplay":7601,"./useCurrentAsset":7603,"./useFiatFormatter":7610,"./useI18nContext":7615,"./useSwappedTokenValue":7643,"./useTokenData":7650,"./useTokenDisplayValue":7652,"./useTokenFiatAmount":7653,"./useUserPreferencedCurrency":7662,"@metamask/transaction-controller":3473,"bignumber.js":4362,react:5657,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionDisplayData=function(e){var t,n,x,B,F,$,U,L;const j=(0,s.useDispatch)(),H=(0,s.useSelector)(y.getIntlLocale),G=(0,R.useCurrentAsset)(),W=(0,s.useSelector)(i.getAllTokens),q=(0,s.useSelector)(i.getSelectedAddress),Y=(0,s.useSelector)(h.getNfts),V=(0,s.useSelector)(i.getAllDetectedTokens),K=(0,s.useSelector)(i.selectERC20TokensByChain),Q=(0,O.useFiatFormatter)(),z=(0,C.useI18nContext)(),X=e.initialTransaction.id,J=(0,s.useSelector)(e=>(0,T.selectBridgeHistoryItemForTxMetaId)(e,X)),{destNetwork:Z}=(0,N.default)({bridgeHistoryItem:J,srcTxMeta:e.initialTransaction}),ee=v.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==Z?void 0:Z.chainId],{initialTransaction:te,primaryTransaction:ne}=e,{transferInformation:se,type:re}=te,{from:oe,to:ae}=te.txParams||{},ie=[o.TransactionType.swap,o.TransactionType.bridge].includes(re)&&Boolean(J),ce=(0,s.useSelector)(e=>{var t;return(0,i.getKnownMethodData)(e,null==te||null===(t=te.txParams)||void 0===t?void 0:t.data)})||{},ue=(0,c.getStatusKey)(ne)in m.PENDING_STATUS_HASH,le=(0,r.useRef)(!0),de=null===(t=ne.txParams)||void 0===t?void 0:t.value;let me="-",he=ae;const pe=null==te||null===(n=te.txParams)||void 0===n?void 0:n.data,fe=m.TOKEN_CATEGORY_HASH[re];let ge=null;const[ke,Se]=(0,r.useState)(null);var ye,ve,be,Te,we,Ce;fe&&(ge=(null==W||null===(ye=W[null==e||null===(ve=e.initialTransaction)||void 0===ve?void 0:ve.chainId])||void 0===ye||null===(ye=ye[q])||void 0===ye?void 0:ye.find(({address:e})=>(0,f.isEqualCaseInsensitive)(e,he)))||(null==V||null===(be=V[null==e||null===(Te=e.initialTransaction)||void 0===Te?void 0:Te.chainId])||void 0===be||null===(be=be[q])||void 0===be?void 0:be.find(({address:e})=>(0,f.isEqualCaseInsensitive)(e,he)))||(null==K||null===(we=K[null==e||null===(Ce=e.initialTransaction)||void 0===Ce?void 0:Ce.chainId])||void 0===we||null===(we=we.data)||void 0===we?void 0:we[he.toLowerCase()]));(0,r.useEffect)(()=>()=>{le.current=!1},[]),(0,r.useEffect)(()=>{!async function(){if(fe&&!ge)try{const e=await(0,d.getAssetDetails)(he,oe,pe,Y);!0===le.current&&Se(e)}catch(e){console.warn("Unable to set asset details",{error:e,transactionData:pe})}}()},[fe,ge,he,oe,Y,le,pe]),ke&&(ge={address:ke.toAddress,symbol:ke.symbol,decimals:ke.decimals});const Ae=(0,P.useTokenData)(pe,fe),Ie=(0,d.getTokenIdParam)(Ae)??(0,g.getTokenValueParam)(Ae),Ee=fe&&Y.find(({address:e,tokenId:t})=>(0,f.isEqualCaseInsensitive)(e,he)&&t===Ie);let _e=(0,_.useTokenDisplayValue)(pe,ge,fe);null!=se&&se.decimals&&(_e=(0,b.calcTokenAmount)(se.amount,se.decimals).toString(10));const Pe=(0,A.useTokenFiatAmount)(null===(x=ge)||void 0===x?void 0:x.address,_e,null===(B=ge)||void 0===B?void 0:B.symbol,undefined,!0,null==te?void 0:te.chainId);let Me,Re=fe?null===(F=ge)||void 0===F?void 0:F.symbol:undefined,Ne=fe?_e:undefined,Oe=fe?Pe:undefined;const{swapTokenValue:xe,isNegative:De,swapTokenFiatAmount:Be,isViewingReceivedTokenFromSwap:Fe}=(0,M.useSwappedTokenValue)(e,G),$e=(0,k.useBridgeTokenDisplayData)(e);if(D.includes(re))Me=z("signatureRequest");else if(re===o.TransactionType.swap){Me=z("swapTokenToToken",[$e.sourceTokenSymbol??te.sourceTokenSymbol,$e.destinationTokenSymbol??te.destinationTokenSymbol]);const e=$e.sourceTokenSymbol??te.sourceTokenSymbol;Re=Fe?G.symbol:e;const t=$e.sourceTokenAmountSent??xe;Ne=t?(0,S.formatAmount)(H,new a.default(t)):undefined,Oe=$e.displayCurrencyAmount??Be,me=De?"":Fe?"+":"-"}else if(re===o.TransactionType.swapAndSend){const e=te.swapAndSendRecipient===oe;he=te.swapAndSendRecipient,Me=z("sentTokenAsToken",[te.sourceTokenSymbol,te.destinationTokenSymbol]),Re=Fe&&e?G.symbol:te.sourceTokenSymbol,Ne=xe,Oe=Be,me=De?"":Fe&&e?"+":"-"}else if(re===o.TransactionType.swapApproval)Me=z("swapApproval",[$e.sourceTokenSymbol??ne.sourceTokenSymbol]),Re=$e.sourceTokenSymbol??ne.sourceTokenSymbol;else if(re===o.TransactionType.tokenMethodApprove){var Ue;me="",Me=z("approveSpendingCap",[(null===(Ue=ge)||void 0===Ue?void 0:Ue.symbol)||z("token").toLowerCase()])}else if(re===o.TransactionType.tokenMethodSetApprovalForAll){var Le,je,He;me="",Me=!(null!=Ae&&null!==(Le=Ae.args)&&void 0!==Le&&Le[1])?z("revokePermissionTitle",[(null===(je=ge)||void 0===je?void 0:je.symbol)||(null==Ee?void 0:Ee.name)||z("token")]):z("setApprovalForAllTitle",[(null===(He=ge)||void 0===He?void 0:He.symbol)||z("token")])}else if(re===o.TransactionType.tokenMethodIncreaseAllowance){var Ge;me="",Me=z("approveIncreaseAllowance",[(null===(Ge=ge)||void 0===Ge?void 0:Ge.symbol)||z("token")])}else if(re===o.TransactionType.contractInteraction||re===o.TransactionType.batch||re===o.TransactionType.revokeDelegation){const e=(0,c.getTransactionTypeTitle)(z,re);Me=(null==ce?void 0:ce.name)&&(0,u.camelCaseToCapitalize)(ce.name)||e}else if(re===o.TransactionType.deployContract)Me=(0,c.getTransactionTypeTitle)(z,re);else if(re===o.TransactionType.incoming)Me=z("received"),me="";else if(re===o.TransactionType.tokenMethodTransferFrom||re===o.TransactionType.tokenMethodTransfer){var We;Me=z("sentSpecifiedTokens",[(null===(We=ge)||void 0===We?void 0:We.symbol)||(null==Ee?void 0:Ee.name)||z("token")]),he=(0,d.getTokenAddressParam)(Ae)}else if(re===o.TransactionType.tokenMethodSafeTransferFrom)Me=z("safeTransferFrom"),he=(0,d.getTokenAddressParam)(Ae);else if(re===o.TransactionType.simpleSend)Me=z("sent");else if(re===o.TransactionType.bridgeApproval)Me=z("bridgeApproval",[$e.sourceTokenSymbol]),Re=$e.sourceTokenSymbol;else if(re===o.TransactionType.bridge)Me=ee?z("bridgedToChain",[ee]):z("bridged"),Re=$e.sourceTokenSymbol,Ne=(0,S.formatAmount)(H,new a.default($e.sourceTokenAmountSent??0)),Oe=$e.displayCurrencyAmount;else if(w.PAY_TRANSACTION_TYPES.includes(re)){var qe;Me=re===o.TransactionType.perpsDeposit?z("perpsDepositActivityTitle"):z("musdConversionActivityTitle"),me="";const e=null==ae?void 0:ae.toLowerCase(),{metamaskPay:t}=te,n=e&&(null==K||null===(qe=K[te.chainId])||void 0===qe||null===(qe=qe.data)||void 0===qe?void 0:qe[e]);null!=n&&n.symbol&&(Re=n.symbol),null!=t&&t.targetFiat&&(Ne=t.targetFiat,Oe=Q(Number(t.targetFiat)))}else j((0,p.captureSingleException)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${re}`));const Ye=(0,I.useUserPreferencedCurrency)(l.PRIMARY,{},null==e||null===($=e.initialTransaction)||void 0===$?void 0:$.chainId),Ve=(0,I.useUserPreferencedCurrency)(l.SECONDARY),[Ke]=(0,E.useCurrencyDisplay)(de,{prefix:me,displayValue:Ne,suffix:Re,...Ye},null==e||null===(U=e.initialTransaction)||void 0===U?void 0:U.chainId),[Qe]=(0,E.useCurrencyDisplay)(de,{prefix:me,displayValue:ie?$e.displayCurrencyAmount:Oe,hideLabel:fe||Boolean(xe),...Ve},null==e||null===(L=e.initialTransaction)||void 0===L?void 0:L.chainId);!he&&se&&(he=ae);return{title:Me,primaryCurrency:re===o.TransactionType.swap&&ue?"":Ke,recipientAddress:he,secondaryCurrency:fe&&!Pe||!ie&&[o.TransactionType.swap,o.TransactionType.swapAndSend].includes(re)&&!Be||ie&&!Qe?undefined:Qe,isPending:ue}};var s=e("react-redux"),r=e("react"),o=e("@metamask/transaction-controller"),a=x(e("bignumber.js")),i=e("../selectors"),c=e("../helpers/utils/transactions.util"),u=e("../helpers/utils/common.util"),l=e("../helpers/constants/common"),d=e("../helpers/utils/token-util"),m=e("../helpers/constants/transactions"),h=e("../ducks/metamask/metamask"),p=e("../store/actions"),f=e("../../shared/modules/string-utils"),g=e("../../shared/lib/metamask-controller-utils"),k=e("../pages/bridge/hooks/useBridgeTokenDisplayData"),S=e("../pages/confirmations/components/simulation-details/formatAmount"),y=e("../ducks/locale/locale"),v=e("../../shared/constants/bridge"),b=e("../../shared/lib/transactions-controller-utils"),T=e("../ducks/bridge-status/selectors"),w=e("../pages/confirmations/constants/pay"),C=e("./useI18nContext"),A=e("./useTokenFiatAmount"),I=e("./useUserPreferencedCurrency"),E=e("./useCurrencyDisplay"),_=e("./useTokenDisplayValue"),P=e("./useTokenData"),M=e("./useSwappedTokenValue"),R=e("./useCurrentAsset"),N=x(e("./bridge/useBridgeChainInfo")),O=e("./useFiatFormatter");function x(e){return e&&e.__esModule?e:{default:e}}const D=[null,undefined,o.TransactionType.sign,o.TransactionType.personalSign,o.TransactionType.signTypedData,o.TransactionType.ethDecrypt,o.TransactionType.ethGetEncryptionPublicKey]}}},{package:"$root$",file:"ui/hooks/useTransactionDisplayData.js"}],[7661,{"../../shared/lib/trust-signals":6305,"../selectors":8577,"./useI18nContext":7615,"@metamask/name-controller":2739,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrustSignalDisplayState=void 0,n.useTrustSignal=function(e,t,n){return u([{value:e,type:t,chainId:n}])[0]},n.useTrustSignals=u;var s=e("react-redux"),r=e("@metamask/name-controller"),o=e("../selectors"),a=e("../../shared/lib/trust-signals"),i=e("./useI18nContext");let c=n.TrustSignalDisplayState=function(e){return e.Loading="Loading",e.Malicious="malicious",e.Petname="petname",e.Verified="verified",e.Warning="warning",e.Recognized="recognized",e.Unknown="unknown",e}({});function u(e){const t=(0,i.useI18nContext)();return(0,s.useSelector)(n=>e.map(({value:e,type:s,chainId:i})=>{if(s!==r.NameType.ETHEREUM_ADDRESS)return{state:c.Unknown,label:null};if(!i)return{state:c.Unknown,label:null};const u=(0,a.mapChainIdToSupportedEVMChain)(i);if(!u)return{state:c.Unknown,label:null};const l=(0,a.createCacheKey)(u,e),d=(0,o.getAddressSecurityAlertResponse)(n,l);if(!d)return{state:c.Unknown,label:null};const m=function(e){if(!e.result_type)return c.Unknown;switch(e.result_type){case a.ResultType.Loading:return c.Loading;case a.ResultType.Malicious:return c.Malicious;case a.ResultType.Warning:return c.Warning;case a.ResultType.Trusted:return c.Verified;case a.ResultType.Benign:case a.ResultType.ErrorResult:default:return c.Unknown}}(d);return{state:m,label:m===c.Malicious?t("nameModalTitleMalicious"):d.label||null}}))}}}},{package:"$root$",file:"ui/hooks/useTrustSignals.ts"}],[7662,{"../../shared/constants/common":6177,"../../shared/constants/network":6194,"../constants":7410,"../helpers/constants/common":7458,"../selectors":8577,"../selectors/multichain":8586,"./useMultichainSelector":7625,"react-compiler-runtime":5571,"react-redux":5622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserPreferencedCurrency=function(e,t,n){const m=(0,s.c)(8);let h;m[0]!==t?(h=t===undefined?{}:t,m[0]=t,m[1]=h):h=m[1];const p=h,f=n===undefined?null:n,g=(0,r.useSelector)(o.getSelectedInternalAccount),k=p.account??g,S=(0,d.useMultichainSelector)(a.getMultichainNativeCurrency,k),{showNativeTokenAsMainBalance:y}=(0,r.useSelector)(o.getPreferences,r.shallowEqual),v=(0,d.useMultichainSelector)(a.getMultichainShouldShowFiat,k),b=(0,d.useMultichainSelector)(a.getMultichainCurrentCurrency,k),T=p.numberOfDecimals||2;let w;m[2]!==b||m[3]!==T?(w={currency:b,numberOfDecimals:T},m[2]=b,m[3]=T,m[4]=w):w=m[4];const C=w,A=f?l.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[f]||S||c.EtherDenomination.ETH:S||c.EtherDenomination.ETH,I=p.numberOfDecimals||p.ethNumberOfDecimals||u.ETH_DEFAULT_DECIMALS;let E;m[5]!==A||m[6]!==I?(E={currency:A,numberOfDecimals:I},m[5]=A,m[6]=I,m[7]=E):E=m[7];const _=E;if(p.showNativeOverride)return _;if(p.showFiatOverride)return C;if(!v)return _;if(p.shouldCheckShowNativeToken&&y||!p.shouldCheckShowNativeToken)return e===i.PRIMARY?_:C;return e===i.PRIMARY?C:_};var s=e("react-compiler-runtime"),r=e("react-redux"),o=e("../selectors"),a=e("../selectors/multichain"),i=e("../helpers/constants/common"),c=e("../../shared/constants/common"),u=e("../constants"),l=e("../../shared/constants/network"),d=e("./useMultichainSelector")}}},{package:"$root$",file:"ui/hooks/useUserPreferencedCurrency.js"}],[7663,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWindowFocus=void 0;var s=e("react-compiler-runtime"),r=e("react");n.useWindowFocus=()=>{const e=(0,s.c)(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=document.hasFocus(),e[0]=t):t=e[0];const[n,o]=(0,r.useState)(t);let a,i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{const e=()=>o(!0),t=()=>o(!1);return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}},i=[],e[1]=a,e[2]=i):(a=e[1],i=e[2]),(0,r.useEffect)(a,i),n}}}},{package:"$root$",file:"ui/hooks/useWindowFocus.ts"}],[7664,{"../app/scripts/constants/sentry-state":11,"../app/scripts/lib/util":380,"../shared/constants/alerts":6173,"../shared/constants/app":6175,"../shared/constants/copy":6178,"../shared/constants/ui-initialization":6214,"../shared/lib/error-utils":6270,"../shared/lib/promise-with-resolvers":6291,"../shared/lib/sentry":6292,"../shared/lib/switch-direction":6297,"../shared/lib/trace":6299,"../shared/modules/browser-runtime.utils":6312,"../shared/modules/object.utils":6329,"../shared/modules/selectors/networks":6335,"./constants":7410,"./ducks/alerts":7429,"./ducks/metamask/metamask":7448,"./helpers/utils/critical-startup-error-handler":7487,"./helpers/utils/display-critical-error":7488,"./helpers/utils/tags":7511,"./helpers/utils/tx-helper":7517,"./pages":8289,"./selectors":8577,"./store/actions":8611,"./store/background-connection":8612,"./store/store":8617,"@metamask/chain-agnostic-permission":1610,"copy-to-clipboard":4542,loglevel:5247,react:5657,"react-dom":5574,"webextension-polyfill":6163},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CriticalErrorTranslationKey",{enumerable:!0,get:function(){return O.CriticalErrorTranslationKey}}),Object.defineProperty(n,"CriticalStartupErrorHandler",{enumerable:!0,get:function(){return N.CriticalStartupErrorHandler}}),n.connectToBackground=void 0,Object.defineProperty(n,"displayCriticalErrorMessage",{enumerable:!0,get:function(){return O.displayCriticalErrorMessage}}),n.getCleanAppState=$,n.launchMetamaskUi=async function(e){const{backgroundConnection:t,initialState:n}=e,s=await async function(e,t){const{traceContext:n}=t,s=(0,M.getStartupTraceTags)({metamask:e}),i=await(0,v.trace)({name:v.TraceName.SetupStore,parentContext:n,tags:s},()=>F(e,t.activeTab));return global.metamask={updateCurrentLocale:e=>{i.dispatch(T.updateCurrentLocale(e))},setFeatureFlag:(e,t)=>{i.dispatch(T.setFeatureFlag(e,t))}},await(0,v.trace)({name:v.TraceName.InitialActions,parentContext:n},()=>async function(e){const t=e.getState();try{const n=(0,f.getBrowserName)().toLowerCase(),{os:s}=t.metamask.browserEnvironment||{};s&&n&&e.dispatch(T.setBrowserEnvironment(s,n)).catch(e=>{r.default.error("Failed to update browser environment:",e)})}catch(e){r.default.error("Failed to get browser name:",e)}const n=(0,C.getNetworkToAutomaticallySwitchTo)(t);n&&await e.dispatch(T.automaticallySwitchNetwork(n));if((0,l.getEnvironmentType)()===p.ENVIRONMENT_TYPE_POPUP){const t=Date.now();global.metamask.id=t,await e.dispatch(T.setCurrentExtensionPopupId(t))}try{const n=async t=>{(0,I.getIsUnlocked)(t)&&await e.dispatch(T.checkIsSeedlessPasswordOutdated())};await n(t);const s=setInterval(()=>{const t=e.getState(),r=(0,C.getFirstTimeFlowType)(t),o=(0,C.getIsSocialLoginFlow)(t);null===r||o?n(t):clearInterval(s)},R.SEEDLESS_PASSWORD_OUTDATED_CHECK_INTERVAL_MS)}catch(e){r.default.error("[Metamask] checkIsSeedlessPasswordOutdated error",e)}}(i)),(0,v.trace)({name:v.TraceName.FirstRender,parentContext:n},()=>(0,a.render)(o.default.createElement(E.default,{store:i}),t.container)),i}(n,e);return await t.startSendingPatches(),function(e){0;window.stateHooks.reloadExtension=()=>{i.default.runtime.reload()},window.stateHooks.getCleanAppState=async function(){return $(e)},window.stateHooks.getSentryAppState=function(){const t=e.getState();return(0,m.maskObject)(t,h.SENTRY_UI_STATE)},window.stateHooks.getLogs=function(){const t=e.getState(),{logs:n}=t.metamask;return Object.values(n).sort((e,t)=>e.timestamp-t.timestamp)}}(s),s},n.setupInitialStore=F;var s=D(e("copy-to-clipboard")),r=D(e("loglevel")),o=D(e("react")),a=e("react-dom"),i=D(e("webextension-polyfill")),c=e("@metamask/chain-agnostic-permission"),u=(e("../shared/lib/sentry"),e("../shared/lib/promise-with-resolvers")),l=e("../app/scripts/lib/util"),d=e("../shared/constants/alerts"),m=e("../shared/modules/object.utils"),h=e("../app/scripts/constants/sentry-state"),p=e("../shared/constants/app"),f=e("../shared/modules/browser-runtime.utils"),g=e("../shared/constants/copy"),k=e("../shared/constants/ui-initialization"),S=e("../shared/lib/switch-direction"),y=e("../shared/lib/error-utils"),v=e("../shared/lib/trace"),b=e("../shared/modules/selectors/networks"),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(e("./store/actions")),w=D(e("./store/store")),C=e("./selectors"),A=e("./ducks/alerts"),I=e("./ducks/metamask/metamask"),E=D(e("./pages")),_=D(e("./helpers/utils/tx-helper")),P=e("./store/background-connection"),M=e("./helpers/utils/tags"),R=e("./constants"),N=e("./helpers/utils/critical-startup-error-handler"),O=e("./helpers/utils/display-critical-error");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function D(e){return e&&e.__esModule?e:{default:e}}r.default.setLevel(global.METAMASK_DEBUG?"debug":"warn",!1);const B=(0,u.withResolvers)();async function F(e,t){e.featureFlags||(e.featureFlags={});const{currentLocaleMessages:n,enLocaleMessages:s}=await(0,y.setupLocale)(e.currentLocale);"rtl"===e.textDirection&&(0,S.switchDirection)("rtl");const r={activeTab:t,metamask:e,appState:{},localeMessages:{currentLocale:e.currentLocale,current:n,en:s}};if((0,l.getEnvironmentType)()===p.ENVIRONMENT_TYPE_POPUP||(0,l.getEnvironmentType)()===p.ENVIRONMENT_TYPE_SIDEPANEL){const{origin:e}=r.activeTab,t=(0,C.getAllPermittedAccountsForCurrentTab)(r),n=(0,C.getSelectedInternalAccount)(r),s=n&&(0,c.isInternalAccountInPermittedAccountIds)(n,t),o=(0,I.getUnconnectedAccountAlertShown)(r),a=(0,I.getUnconnectedAccountAlertEnabledness)(r);e&&a&&!o[e]&&t.length>0&&!s&&(r[d.AlertTypes.unconnectedAccount]={state:A.ALERT_STATE.OPEN},T.setUnconnectedAccountAlertShown(e))}const o=(0,w.default)(r);B.resolve(o);const a=(0,C.getUnapprovedTransactions)(e),i=(0,_.default)(a,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.networkId,(0,b.getCurrentChainId)({metamask:e}));return i.length>0&&o.dispatch(T.showConfTxPage({id:i[0].id})),o}async function $(e){const t={...e.getState()};return t.version=global.platform.getVersion(),t.browser=window.navigator.userAgent,t.metamask={...t.metamask,socialLoginEmail:undefined},t}n.connectToBackground=(e,t)=>{(0,P.setBackgroundConnection)(e),e.onNotification(async e=>{const{method:n}=e;if("sendUpdate"===n){(await B.promise).dispatch(T.updateMetamaskState(e.params[0]))}else{if(n!==k.START_UI_SYNC)throw new Error(`Internal JSON-RPC Notification Not Handled:\n\n ${JSON.stringify(e)}`);await t(e.params[0])}})},window.logStateString=async function(e){const t=await window.stateHooks.getCleanAppState(),n=window.stateHooks.getLogs();i.default.runtime.getPlatformInfo().then(s=>{t.platform=s,t.logs=n;const r=JSON.stringify(t,null,2);e(null,r)}).catch(t=>{e(t)})},window.logState=function(e){return window.logStateString((t,n)=>{t?console.error(t.message):e?((0,s.default)(n,g.COPY_OPTIONS),console.log("State log copied")):console.log(n)})}}}},{package:"$root$",file:"ui/index.js"}],[7665,{react:5657,"react-compiler-runtime":5571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyLayout=void 0;var s,r=e("react-compiler-runtime"),o=(s=e("react"))&&s.__esModule?s:{default:s};n.LegacyLayout=e=>{const t=(0,r.c)(2),{children:n}=e;let s;return t[0]!==n?(s=o.default.createElement("div",{className:"mm-box main-container-wrapper"},n),t[0]=n,t[1]=s):s=t[1],s}}}},{package:"$root$",file:"ui/layouts/legacy-layout.tsx"}]],[],{});