LavaPack.loadBundle([[1373,{"@metamask/base-controller":1520,"@metamask/keyring-api":2510,"@metamask/keyring-snap-client":2548,"@metamask/snaps-utils":1482},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.MultichainBalancesController=s.getDefaultMultichainBalancesControllerState=void 0;const g=e("@metamask/base-controller"),b=e("@metamask/keyring-api"),S=e("@metamask/keyring-snap-client"),A=e("@metamask/snaps-utils");function y(){return{balances:{}}}s.getDefaultMultichainBalancesControllerState=y;const E={balances:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};class C extends g.BaseController{constructor({messenger:e,state:t={}}){super({messenger:e,name:"MultichainBalancesController",metadata:E,state:{balances:{},...t}}),n.add(this);for(const e of f(this,n,"m",o).call(this))this.updateBalance(e.id);this.messenger.subscribe("AccountsController:accountRemoved",e=>f(this,n,"m",h).call(this,e)),this.messenger.subscribe("AccountsController:accountBalancesUpdated",e=>f(this,n,"m",d).call(this,e)),this.messenger.subscribe("MultichainAssetsController:accountAssetListUpdated",async({assets:e})=>{const t=Object.entries(e).map(([e,{added:t}])=>({accountId:e,assets:[...t]}));await f(this,n,"m",r).call(this,t)})}async updateBalance(e){await f(this,n,"m",a).call(this,e,f(this,n,"m",c).call(this,e))}}s.MultichainBalancesController=C,n=new WeakSet,r=async function(e){const{isUnlocked:t}=this.messenger.call("KeyringController:getState");if(!t)return;const s={};for(const{accountId:t,assets:r}of e){const e=f(this,n,"m",l).call(this,t);if(e.metadata.snap){const a=await f(this,n,"m",p).call(this,e.id,e.metadata.snap.id,r);s[t]=a}}if(0===Object.keys(s).length)return;const r=new Map(e.map(e=>[e.accountId,e]));this.update(e=>{for(const[t,n]of Object.entries(s))if(e.balances[t]&&0!==Object.keys(e.balances[t]).length){const s=r.get(t),a=new Set(s?.assets||[]);for(const s of Object.keys(n))e.balances[t][s]||(e.balances[t][s]=n[s]),a.delete(s);for(const s of a)e.balances[t][s]={amount:"0",unit:""}}else e.balances[t]=n})},a=async function(e,t){const{isUnlocked:s}=this.messenger.call("KeyringController:getState");if(s)try{const s=f(this,n,"m",l).call(this,e);if(s.metadata.snap){const r=await f(this,n,"m",p).call(this,s.id,s.metadata.snap.id,t);this.update(t=>{t.balances[e]=r})}}catch(t){console.error(`Failed to fetch balances for account ${e}:`,t)}},i=function(){return this.messenger.call("AccountsController:listMultichainAccounts")},o=function(){return f(this,n,"m",i).call(this).filter(e=>f(this,n,"m",u).call(this,e))},c=function(e){return this.messenger.call("MultichainAssetsController:getState").accountsAssets[e]??[]},l=function(e){const t=f(this,n,"m",o).call(this).find(t=>t.id===e);if(!t)throw new Error(`Unknown account: ${e}`);return t},u=function(e){return!(0,b.isEvmAccountType)(e.type)&&e.metadata.snap!==undefined},d=function(e){this.update(t=>{Object.entries(e.balances).forEach(([e,s])=>{e in t.balances&&Object.assign(t.balances[e],s)})})},h=async function(e){e in this.state.balances&&this.update(t=>{delete t.balances[e]})},p=async function(e,t,s){return await f(this,n,"m",m).call(this,t).getAccountBalances(e,s)},m=function(e){return new S.KeyringClient({send:async t=>await this.messenger.call("SnapController:handleRequest",{snapId:e,origin:"metamask",handler:A.HandlerType.OnKeyringRequest,request:t})})}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/MultichainBalancesController/MultichainBalancesController.cjs"}],[1374,{"./MultichainBalancesController.cjs":1373},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.MultichainBalancesController=void 0;var n=e("./MultichainBalancesController.cjs");Object.defineProperty(s,"MultichainBalancesController",{enumerable:!0,get:function(){return n.MultichainBalancesController}})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/MultichainBalancesController/index.cjs"}],[1375,{"./assetsUtil.cjs":1389,"./constants.cjs":1391,"@ethersproject/address":770,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"@metamask/phishing-controller":1451,"@metamask/rpc-errors":3026,"@metamask/utils":3554,"async-mutex":4345,"bn.js":4413,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k,w,I,v,N,P=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},j=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},R=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.NftController=s.getDefaultNftControllerState=void 0;const O=e("@ethersproject/address"),x=e("@metamask/base-controller"),D=e("@metamask/controller-utils"),M=e("@metamask/phishing-controller"),L=e("@metamask/rpc-errors"),B=e("@metamask/utils"),F=e("async-mutex"),U=R(e("bn.js")),H=e("uuid"),W=e("./assetsUtil.cjs"),$=e("./constants.cjs"),q={allNftContracts:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},allNfts:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ignoredNfts:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},V="allNfts",G="allNftContracts";s.getDefaultNftControllerState=()=>({allNftContracts:{},allNfts:{},ignoredNfts:[]});class K extends x.BaseController{constructor({ipfsGateway:e=D.IPFS_DEFAULT_GATEWAY_URL,displayNftMedia:t=!1,useIpfsSubdomains:p=!0,isIpfsGatewayEnabled:m=!0,onNftAdded:f,messenger:g,state:b={}}){super({name:"NftController",metadata:q,messenger:g,state:{...(0,s.getDefaultNftControllerState)(),...b}}),n.add(this),r.set(this,new F.Mutex),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),P(this,a,this.messenger.call("AccountsController:getSelectedAccount").id,"f"),P(this,i,e,"f"),P(this,o,t,"f"),P(this,c,p,"f"),P(this,l,m,"f"),P(this,u,f,"f"),this.messenger.subscribe("PreferencesController:stateChange",j(this,n,"m",d).bind(this)),this.messenger.subscribe("AccountsController:selectedEvmAccountChange",j(this,n,"m",h).bind(this))}getNftApi(){return`${D.NFT_API_BASE_URL}/tokens`}async watchNft(e,t,s,r,{userAddress:a}={}){const i=j(this,n,"m",w).call(this,a);if(!i)return;if(!r)throw L.rpcErrors.invalidParams("Network client id is required");await j(this,n,"m",k).call(this,e,t,i,r);const o=await j(this,n,"m",b).call(this,e.address,e.tokenId,r),c=await j(this,n,"m",N).call(this,o);if(c.standard&&c.standard!==t)throw L.rpcErrors.invalidInput(`Suggested NFT of type ${c.standard} does not match received type ${t}`);const l={asset:{...e,...c},type:t,id:(0,H.v4)(),time:Date.now(),interactingAddress:i,origin:s};await this._requestApproval(l);const{address:u,tokenId:d}=e,{name:h,standard:p,description:m,image:f}=c;await this.addNft(u,d,r,{nftMetadata:{name:h??null,description:m??null,image:f??null,standard:p??null},userAddress:a,source:$.Source.Dapp})}async isNftOwner(e,t,s,n){try{const r=await this.messenger.call("AssetsContractController:getERC721OwnerOf",t,s,n);return e.toLowerCase()===r.toLowerCase()}catch{}try{return!(await this.messenger.call("AssetsContractController:getERC1155BalanceOf",e,t,s,n)).isZero()}catch{}throw new Error("Unable to verify ownership. Possibly because the standard is not supported or the user's currently selected network does not match the chain of the asset in question.")}async addNftVerifyOwnership(e,t,s,{userAddress:r,source:a}={}){const i=j(this,n,"m",w).call(this,r);if(!await this.isNftOwner(i,e,t,s))throw new Error("This NFT is not owned by the user");await this.addNft(e,t,s,{userAddress:i,source:a})}async addNft(e,t,s,{nftMetadata:r,userAddress:a,source:i=$.Source.Custom}={}){const o=j(this,n,"m",w).call(this,a);if(!o)return;const c=(0,D.toChecksumHexAddress)(e);if(r)r=await j(this,n,"m",N).call(this,r);else{const e=await j(this,n,"m",b).call(this,c,t,s);r=await j(this,n,"m",N).call(this,e)}const l=(await j(this,n,"m",E).call(this,s,{tokenAddress:c,userAddress:o,source:i,nftMetadata:r})).find(e=>e.address.toLowerCase()===c.toLowerCase()),{configuration:{chainId:u}}=this.messenger.call("NetworkController:getNetworkClientById",s);r.chainId||(r.chainId=(0,D.convertHexToDecimal)(u)),l&&await j(this,n,"m",y).call(this,c,t,r,l,u,o,i)}async addNfts(e,t,s=$.Source.Custom){const r=j(this,n,"m",w).call(this,t);if(!r)return;const a=await j(this,n,"m",v).call(this,e.map(e=>e.nftMetadata));for(const[t,i]of e.entries()){const e=(0,D.toChecksumHexAddress)(i.tokenAddress),o=(0,D.toHex)(i.nftMetadata.chainId),c=this.messenger.call("NetworkController:findNetworkClientIdByChainId",o),l=(await j(this,n,"m",E).call(this,c,{tokenAddress:e,userAddress:r,source:s,nftMetadata:a[t]})).find(t=>t.address.toLowerCase()===e.toLowerCase());l&&await j(this,n,"m",y).call(this,e,i.tokenId,a[t],l,o,r,s)}}async updateNftMetadata({nfts:e,userAddress:t}){const s=j(this,n,"m",w).call(this,t),a=await j(this,r,"f").acquire();try{const t=e.map(e=>({...e,address:(0,D.toChecksumHexAddress)(e.address)})),r=await Promise.all(t.map(async e=>{const t=this.messenger.call("NetworkController:findNetworkClientIdByChainId",(0,D.toHex)(e.chainId));return{nft:e,newMetadata:t?await j(this,n,"m",b).call(this,e.address,e.tokenId,t):undefined}})),a=r.map(e=>e.newMetadata),i=await j(this,n,"m",v).call(this,a),o=r.map((e,t)=>({nft:e.nft,newMetadata:i[t]})),c=[],{allNfts:l}=this.state,u=t.map(e=>l[s]?.[(0,D.toHex)(e.chainId)]?.find(t=>t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId));o.forEach(e=>{const t=u.find(t=>t?.address.toLowerCase()===e.nft.address.toLowerCase()&&t?.tokenId===e.nft.tokenId);if(t&&e.newMetadata){(0,W.compareNftMetadata)(e.newMetadata,t)&&c.push({nft:e.nft,newMetadata:e.newMetadata})}}),0!==c.length&&c.forEach(e=>this.updateNft(e.nft,e.newMetadata,s,(0,D.toHex)(e.nft.chainId)))}finally{a()}}removeNft(e,t,s,{userAddress:r}={}){const a=j(this,n,"m",w).call(this,r),{configuration:{chainId:i}}=this.messenger.call("NetworkController:getNetworkClientById",s),o=(0,D.toChecksumHexAddress)(e);j(this,n,"m",_).call(this,o,t,{chainId:i,userAddress:a});const{allNfts:c}=this.state;(c[a]?.[i]||[]).find(e=>e.address.toLowerCase()===o.toLowerCase())||j(this,n,"m",T).call(this,o,{chainId:i,userAddress:a})}removeAndIgnoreNft(e,t,s,{userAddress:r}={}){const a=j(this,n,"m",w).call(this,r),{configuration:{chainId:i}}=this.messenger.call("NetworkController:getNetworkClientById",s),o=(0,D.toChecksumHexAddress)(e);j(this,n,"m",C).call(this,o,t,{chainId:i,userAddress:a});const{allNfts:c}=this.state;(c[a]?.[i]||[]).find(e=>e.address.toLowerCase()===o.toLowerCase())||j(this,n,"m",T).call(this,o,{chainId:i,userAddress:a})}clearIgnoredNfts(){this.update(e=>{e.ignoredNfts=[]})}async checkAndUpdateSingleNftOwnershipStatus(e,t,s,{userAddress:r}={}){const a=j(this,n,"m",w).call(this,r),{configuration:{chainId:i}}=this.messenger.call("NetworkController:getNetworkClientById",s),{address:o,tokenId:c}=e;let l=e.isCurrentlyOwned;try{l=await this.isNftOwner(a,o,c,s)}catch{}const u={...e,isCurrentlyOwned:l};if(t)return u;const{allNfts:d}=this.state,h=[...d[a]?.[i]||[]],m=h.findIndex(e=>e.tokenId===c&&e.address.toLowerCase()===o.toLowerCase());return-1!==m&&(h[m]=u,this.update(e=>{e.allNfts[a]=Object.assign({},e.allNfts[a],{[i]:h})}),j(this,n,"m",p).call(this,h,V,{userAddress:a,chainId:i})),u}async checkAndUpdateAllNftsOwnershipStatus(e,{userAddress:t}={}){const s=j(this,n,"m",w).call(this,t),{configuration:{chainId:r}}=this.messenger.call("NetworkController:getNetworkClientById",e),{allNfts:a}=this.state,i=a[s]?.[r]||[],o=await Promise.all(i.map(async s=>await this.checkAndUpdateSingleNftOwnershipStatus(s,!0,e,{userAddress:t})??s));j(this,n,"m",p).call(this,o,V,{userAddress:s,chainId:r})}updateNftFavoriteStatus(e,t,s,r,{userAddress:a}={}){const i=j(this,n,"m",w).call(this,a),{configuration:{chainId:o}}=this.messenger.call("NetworkController:getNetworkClientById",r),{allNfts:c}=this.state,l=[...c[i]?.[o]||[]],u=l.findIndex(s=>s.address===e&&s.tokenId===t);if(-1===u)return;const d={...l[u],favorite:s};l[u]=d,j(this,n,"m",p).call(this,l,V,{chainId:o,userAddress:i})}findNftByAddressAndTokenId(e,t,s,n){const{allNfts:r}=this.state,a=r[s]?.[n]||[],i=a.findIndex(s=>s.address.toLowerCase()===e.toLowerCase()&&s.tokenId===t);return-1===i?null:{nft:a[i],index:i}}updateNft(e,t,s,r){const{allNfts:a}=this.state,i=a[s]?.[r]||[],o=this.findNftByAddressAndTokenId(e.address,e.tokenId,s,r);if(!o)return;const c={...e,...t},l=[...i.slice(0,o.index),c,...i.slice(o.index+1)];j(this,n,"m",p).call(this,l,V,{chainId:r,userAddress:s})}resetNftTransactionStatusByTransactionId(e,t,s){const{allNfts:r}=this.state,a=r[t]?.[s]||[],i=a.findIndex(t=>t.transactionId===e);if(-1===i)return!1;const o={...a[i],transactionId:undefined},c=[...a.slice(0,i),o,...a.slice(i+1)];return j(this,n,"m",p).call(this,c,V,{chainId:s,userAddress:t}),!0}async _requestApproval(e){return this.messenger.call("ApprovalController:addRequest",{id:e.id,origin:e.origin,type:D.ApprovalType.WatchAsset,requestData:{id:e.id,interactingAddress:e.interactingAddress,asset:{address:e.asset.address,tokenId:e.asset.tokenId,name:e.asset.name,description:e.asset.description,image:e.asset.image,standard:e.asset.standard}}},!0)}resetState(){this.update(()=>(0,s.getDefaultNftControllerState)())}}s.NftController=K,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,n=new WeakSet,d=async function({ipfsGateway:e,isIpfsGatewayEnabled:t,displayNftMedia:s,openSeaEnabled:r}){const c=this.messenger.call("AccountsController:getSelectedAccount");P(this,a,c.id,"f");const u=Boolean(s||r);if(j(this,i,"f")!==e||j(this,o,"f")!==u||j(this,l,"f")!==t){P(this,i,e,"f"),P(this,o,u,"f"),P(this,l,t,"f");(t&&""!==e||u)&&c&&await j(this,n,"m",I).call(this,c)}},h=async function(e){const t=j(this,a,"f");P(this,a,e.id,"f");(j(this,l,"f")&&""!==j(this,i,"f")||j(this,o,"f"))&&t!==e.id&&await j(this,n,"m",I).call(this,e)},p=function(e,t,{userAddress:s,chainId:n}){s&&this.update(r=>{const a=r[t],i={...a[s]||{},[n]:e};r[t]={...a,[s]:i}})},m=async function(e,t){const s=new URLSearchParams({chainIds:"1",tokens:`${e}:${t}`,includeTopBid:"true",includeAttributes:"true",includeLastSale:"true"}).toString(),n=await(0,D.fetchWithErrorHandling)({url:`${this.getNftApi()}?${s}`,options:{headers:{Version:D.NFT_API_VERSION}}});if(!n?.tokens?.[0]?.token)return{name:null,description:null,image:null,standard:null};const{image:r,metadata:{imageOriginal:a}={},name:i,description:o,collection:c,kind:l,rarityRank:u,rarity:d,attributes:h,lastSale:p,imageSmall:m}=n.tokens[0].token;return Object.assign({},{name:i||null},{description:o||null},{image:r||null},c?.creator&&{creator:c.creator},a&&{imageOriginal:a},m&&{imageThumbnail:m},l&&{standard:l.toUpperCase()},p&&{lastSale:p},h&&{attributes:h},n.tokens[0].market?.topBid&&{topBid:n.tokens[0].market?.topBid},u&&{rarityRank:u},d&&{rarity:d},c&&{collection:c})},f=async function(e,t,s){const r=await j(this,n,"m",g).call(this,e,t,s);let a=r[0];const u=r[1],d=a.startsWith("ipfs://");if(d&&!j(this,l,"f"))return{image:null,name:null,description:null,standard:u||null,favorite:!1,tokenURI:a??null};const h=j(this,o,"f");if(!d&&!h)return{image:null,name:null,description:null,standard:u||null,favorite:!1,tokenURI:a??null};if(d&&(a=await(0,W.getFormattedIpfsUrl)(j(this,i,"f"),a,j(this,c,"f"))),a.startsWith("data:image/"))return{image:a,name:null,description:null,standard:u||null,favorite:!1,tokenURI:a??null};try{const e=await(0,D.handleFetch)(a);return{image:e[Object.prototype.hasOwnProperty.call(e,"image")?"image":"image_url"],name:e.name,description:e.description,standard:u,favorite:!1,tokenURI:a??null}}catch{return{image:null,name:null,description:null,standard:u||null,favorite:!1,tokenURI:a??null}}},g=async function(e,t,s){try{return[await this.messenger.call("AssetsContractController:getERC721TokenURI",e,t,s),D.ERC721]}catch{}try{const n=await this.messenger.call("AssetsContractController:getERC1155TokenURI",e,t,s);if(!n.includes("{id}"))return[n,D.ERC1155];const r=(0,B.remove0x)((0,D.BNToHex)(new U.default(t))).padStart(64,"0").toLowerCase();return[n.replace("{id}",r),D.ERC1155]}catch{}return["",""]},b=async function(e,t,s){const{configuration:{chainId:r}}=this.messenger.call("NetworkController:getNetworkClientById",s),[a,i]=await Promise.all([(0,D.safelyExecute)(()=>j(this,n,"m",f).call(this,e,t,s)),j(this,o,"f")&&"0x1"===r?(0,D.safelyExecute)(()=>j(this,n,"m",m).call(this,e,t)):undefined]),c={...i,name:a?.name??i?.name??null,description:a?.description??i?.description??null,image:i?.image??a?.image??null,standard:a?.standard??i?.standard??null,tokenURI:a?.tokenURI??null};return await j(this,n,"m",N).call(this,c)},S=async function(e,t){const[s,n]=await Promise.all([this.messenger.call("AssetsContractController:getERC721AssetName",e,t),this.messenger.call("AssetsContractController:getERC721AssetSymbol",e,t)]);return{collection:{name:s},symbol:n,address:e}},A=async function(e,t,s){const r=await(0,D.safelyExecute)(()=>j(this,n,"m",S).call(this,e,s));return r||!Object.values(t).every(e=>null===e)?{address:e,...r,schema_name:t?.standard??null,collection:{name:null,image_url:t?.collection?.image??t?.collection?.imageUrl??null,tokenCount:t?.collection?.tokenCount??null,...t?.collection,...r?.collection}}:{address:e,asset_contract_type:null,created_date:null,schema_name:null,symbol:null,total_supply:null,description:null,external_link:null,collection:{name:null,image_url:null}}},y=async function(e,t,s,a,i,o,c){const l=await j(this,r,"f").acquire();try{const r=(0,D.toChecksumHexAddress)(e),{allNfts:l}=this.state,d=[...l[o]?.[i]??[]],h=d.find(e=>e.address.toLowerCase()===r.toLowerCase()&&e.tokenId===t);if(h){const e=(0,W.compareNftMetadata)(s,h),n=(0,W.hasNewCollectionFields)(s,h);if(!e&&h.isCurrentlyOwned&&!n)return;const a=d.findIndex(e=>e.address.toLowerCase()===r.toLowerCase()&&e.tokenId===t);-1!==a&&(d[a]={...h,...s})}else{const e={address:r,tokenId:t,favorite:!1,isCurrentlyOwned:!0,...s};d.push(e)}j(this,n,"m",p).call(this,d,V,{chainId:i,userAddress:o}),j(this,u,"f")&&j(this,u,"f").call(this,{address:r,symbol:a.symbol,tokenId:t.toString(),standard:s.standard,source:c})}finally{l()}},E=async function(e,{tokenAddress:t,userAddress:s,source:a,nftMetadata:i}){const o=await j(this,r,"f").acquire();try{const r=(0,D.toChecksumHexAddress)(t),{allNftContracts:o}=this.state,{configuration:{chainId:c}}=this.messenger.call("NetworkController:getNetworkClientById",e),l=o[s]?.[c]||[];if(l.find(e=>e.address.toLowerCase()===r.toLowerCase()))return l;const u=await j(this,n,"m",A).call(this,r,i,e),{asset_contract_type:d,created_date:h,symbol:m,description:f,external_link:g,schema_name:b,collection:{name:S,image_url:y,tokenCount:E}}=u;if(a===$.Source.Detected&&"address"in u&&"string"==typeof u.address&&"collection"in u&&null===u.collection.name&&"image_url"in u.collection&&null===u.collection.image_url&&Object.entries(u).every(([e,t])=>"address"===e||"collection"===e||!t))return l;const C=Object.assign({},{address:r},f&&{description:f},S&&{name:S},y&&{logo:y},m&&{symbol:m},null!=E&&{totalSupply:E},d&&{assetContractType:d},h&&{createdDate:h},b&&{schemaName:b},g&&{externalLink:g}),_=[...l,C];return j(this,n,"m",p).call(this,_,G,{chainId:c,userAddress:s}),_}finally{o()}},C=function(e,t,{chainId:s,userAddress:r}){const a=(0,D.toChecksumHexAddress)(e),{allNfts:i,ignoredNfts:o}=this.state,c=[...o],l=(i[r]?.[s]||[]).filter(e=>{if(e.address.toLowerCase()===a.toLowerCase()&&e.tokenId===t){return!c.find(e=>e.address===a&&e.tokenId===t)&&c.push(e),!1}return!0});j(this,n,"m",p).call(this,l,V,{userAddress:r,chainId:s}),this.update(e=>{e.ignoredNfts=c})},_=function(e,t,{chainId:s,userAddress:r}){const a=(0,D.toChecksumHexAddress)(e),{allNfts:i}=this.state,o=(i[r]?.[s]||[]).filter(e=>!(e.address.toLowerCase()===a.toLowerCase()&&e.tokenId===t));j(this,n,"m",p).call(this,o,V,{userAddress:r,chainId:s})},T=function(e,{chainId:t,userAddress:s}){const r=(0,D.toChecksumHexAddress)(e),{allNftContracts:a}=this.state,i=(a[s]?.[t]||[]).filter(e=>!(e.address.toLowerCase()===r.toLowerCase()));return j(this,n,"m",p).call(this,i,G,{chainId:t,userAddress:s}),i},k=async function(e,t,s,n){const{address:r,tokenId:a}=e;if(!t)throw L.rpcErrors.invalidParams("Asset type is required");if(t!==D.ERC721&&t!==D.ERC1155)throw L.rpcErrors.invalidParams(`Non NFT asset type ${t} not supported by watchNft`);if(!r||!a)throw L.rpcErrors.invalidParams("Both address and tokenId are required");if(!(0,O.isAddress)(r))throw L.rpcErrors.invalidParams("Invalid address");if(!/^\d+$/u.test(a))throw L.rpcErrors.invalidParams("Invalid tokenId");try{if(!await this.isNftOwner(s,r,a,n))throw L.rpcErrors.invalidInput("Suggested NFT is not owned by the selected account")}catch(e){if(e instanceof Error)throw L.rpcErrors.resourceUnavailable(e.message);throw e}},w=function(e){if(e)return e;const t=this.messenger.call("AccountsController:getAccount",j(this,a,"f"));return t?.address||""},I=async function(e){const t=Object.values(this.state.allNfts[e.address]||{}).flat().filter(e=>!e.name&&!e.description&&!e.image);0!==t.length&&t.length<500&&await this.updateNftMetadata({nfts:t,userAddress:e.address})},v=async function(e){const t=e.map(e=>({...e})),s={},n=["externalLink","image","imagePreview","imageThumbnail","imageOriginal","animation","animationOriginal"];t.forEach((e,t)=>{for(const r of n){const n=e[r];"string"==typeof n&&n&&n.startsWith("http")&&(s[n]||(s[n]=[]),s[n].push({metadataIndex:t,fieldName:r}))}if(e.collection){const{collection:n}=e;if("externalLink"in n&&"string"==typeof n.externalLink){const e=n.externalLink;s[e]||(s[e]=[]),s[e].push({metadataIndex:t,fieldName:"collection.externalLink"})}}});const r=Object.keys(s);if(0===r.length)return t;try{const e=250;(await(0,W.reduceInBatchesSerially)({values:r,batchSize:e,eachBatch:async(e,t)=>{const s=await this.messenger.call("PhishingController:bulkScanUrls",t);return Object.entries(s.results).forEach(([t,s])=>{s.recommendedAction===M.RecommendedAction.Block&&e.add(t)}),e},initialResult:new Set})).forEach(e=>{s[e].forEach(({metadataIndex:e,fieldName:s})=>{if("collection.externalLink"===s&&t[e].collection){const{collection:s}=t[e];s&&"externalLink"in s&&delete s.externalLink}else delete t[e][s]})})}catch(e){console.error("Error during bulk URL scanning:",e)}return t},N=async function(e){return(await j(this,n,"m",v).call(this,[e]))[0]},s.default=K}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/NftController.cjs"}],[1376,{"./constants.cjs":1391,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},h=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.NftDetectionController=s.BlockaidResultType=void 0;const p=e("@metamask/base-controller"),m=e("@metamask/controller-utils"),f=e("@metamask/utils"),g=e("./constants.cjs"),b=new Set(["0x1","0x38","0x89","0xa86a","0xe708","0x2105","0x531","0x8f"]);var S;!function(e){e.Benign="Benign",e.Spam="Spam",e.Warning="Warning",e.Malicious="Malicious"}(S||(s.BlockaidResultType=S={}));class A extends p.BaseController{constructor({messenger:e,disabled:t=!1,addNfts:s,getNftState:l}){super({name:"NftDetectionController",messenger:e,metadata:{},state:{}}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),d(this,r,t,"f"),d(this,o,{},"f"),d(this,i,l,"f"),d(this,a,s,"f"),this.messenger.subscribe("PreferencesController:stateChange",h(this,n,"m",c).bind(this))}isMainnet(){const{selectedNetworkClientId:e}=this.messenger.call("NetworkController:getState"),{configuration:{chainId:t}}=this.messenger.call("NetworkController:getNetworkClientById",e);return t===m.ChainId.mainnet}isMainnetByNetworkClientId(e){return e.configuration.chainId===m.ChainId.mainnet}async detectNfts(e,t){const s=t?.userAddress??this.messenger.call("AccountsController:getSelectedAccount").address,c=e.filter(e=>b.has(e));if(0===c.length||h(this,r,"f"))return;if(!s)return;const l=`${e.join(",")}:${s}`;if(l in h(this,o,"f"))return void await h(this,o,"f")[l];const{promise:d,resolve:p,reject:A}=(0,f.createDeferredPromise)({suppressUnhandledRejection:!0});let y;h(this,o,"f")[l]=d;let E,C=[];try{do{E=await h(this,n,"m",u).call(this,s,c,y),C=E.tokens.filter(e=>!1===e.token.isSpam&&(!e.blockaidResult?.result_type||e.blockaidResult?.result_type===S.Benign));const e=C.map(e=>{const{tokenId:t,contract:s,kind:n,image:r,imageSmall:a,metadata:o,name:c,description:l,attributes:u,topBid:d,lastSale:p,rarityRank:f,rarityScore:g,collection:b,chainId:S}=e.token,{imageOriginal:A}=o??{};let y;const{ignoredNfts:E}=h(this,i,"f").call(this);if(E.length&&(y=E.find(e=>e.address===(0,m.toChecksumHexAddress)(s)&&e.tokenId===t)),!y){const e=Object.assign({},{name:c},l&&{description:l},r&&{image:r},a&&{imageThumbnail:a},A&&{imageOriginal:A},n&&{standard:n.toUpperCase()},p&&{lastSale:p},u&&{attributes:u},d&&{topBid:d},f&&{rarityRank:f},g&&{rarityScore:g},b&&{collection:b},S&&{chainId:S});return{tokenAddress:s,tokenId:t,nftMetadata:e}}return undefined}).filter(e=>e!==undefined);await h(this,a,"f").call(this,e,s,g.Source.Detected)}while((y=E.continuation)&&!t?.firstPageOnly&&!t?.signal?.aborted);p()}catch(e){throw A(e),e}finally{delete h(this,o,"f")[l]}}}s.NftDetectionController=A,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,n=new WeakSet,c=function({useNftDetection:e}){!e!==h(this,r,"f")&&d(this,r,!e,"f")},l=function({chainIds:e,address:t,next:s}){const n=e.join("&chainIds=");return`${m.NFT_API_BASE_URL}/users/${t}/tokens?chainIds=${n}&limit=50&includeTopBid=true&continuation=${s??""}`},u=async function(e,t,s){const r=t.map(e=>(0,m.convertHexToDecimal)(e).toString()),a=h(this,n,"m",l).call(this,{chainIds:r,address:e,next:s});return await(0,m.handleFetch)(a,{headers:{Version:m.NFT_API_VERSION}})},s.default=A}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/NftDetectionController.cjs"}],[1377,{"../crypto-compare-service/index.cjs":1393,"@metamask/base-controller":1520,"async-mutex":4345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},p=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.RatesController=s.Cryptocurrency=s.name=void 0;const m=e("@metamask/base-controller"),f=e("async-mutex"),g=e("../crypto-compare-service/index.cjs");var b;s.name="RatesController",function(e){e.Btc="btc",e.Solana="sol"}(b||(s.Cryptocurrency=b={}));const S={fiatCurrency:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},rates:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},cryptocurrencies:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1}},A={fiatCurrency:"usd",rates:{[b.Btc]:{conversionDate:0,conversionRate:0},[b.Solana]:{conversionDate:0,conversionRate:0}},cryptocurrencies:[b.Btc,b.Solana]};class y extends m.BaseController{constructor({interval:e=18e4,messenger:t,state:l,includeUsdRate:u,fetchMultiExchangeRate:d=g.fetchMultiExchangeRate}){super({name:s.name,metadata:S,messenger:t,state:{...A,...l}}),n.add(this),r.set(this,new f.Mutex),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),h(this,i,u,"f"),h(this,a,d,"f"),h(this,o,e,"f")}async start(){p(this,c,"f")||(this.messenger.publish(`${s.name}:pollingStarted`),await p(this,n,"m",d).call(this),h(this,c,setInterval(()=>{p(this,n,"m",u).call(this).catch(console.error)},p(this,o,"f")),"f"))}async stop(){p(this,c,"f")&&(clearInterval(p(this,c,"f")),h(this,c,undefined,"f"),this.messenger.publish(`${s.name}:pollingStopped`))}getCryptocurrencyList(){const{cryptocurrencies:e}=this.state;return e}async setCryptocurrencyList(e){await p(this,n,"m",l).call(this,()=>{this.update(t=>({...t,cryptocurrencies:e}))})}async setFiatCurrency(e){if(""===e)throw new Error("The currency can not be an empty string");await p(this,n,"m",l).call(this,()=>{this.update(t=>({...t,fiatCurrency:e}))}),await p(this,n,"m",d).call(this)}}s.RatesController=y,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,n=new WeakSet,l=async function(e){const t=await p(this,r,"f").acquire();try{return e()}finally{t()}},u=async function(){await p(this,n,"m",d).call(this)},d=async function(){await p(this,n,"m",l).call(this,async()=>{const{fiatCurrency:e,cryptocurrencies:t}=this.state,s=await p(this,a,"f").call(this,e,t,p(this,i,"f")),n={};for(const[t,r]of Object.entries(s))n[t]={conversionDate:Date.now(),conversionRate:r[e],...p(this,i,"f")&&{usdConversionRate:r.usd}};this.update(e=>({...e,rates:n}))})}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/RatesController/RatesController.cjs"}],[1378,{"./RatesController.cjs":1377},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Cryptocurrency=s.RatesController=void 0;var n=e("./RatesController.cjs");Object.defineProperty(s,"RatesController",{enumerable:!0,get:function(){return n.RatesController}}),Object.defineProperty(s,"Cryptocurrency",{enumerable:!0,get:function(){return n.Cryptocurrency}})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/RatesController/index.cjs"}],[1379,{"../assetsUtil.cjs":1389,"@ethereumjs/util":717,"@ethersproject/contracts":786,"@metamask/abi-utils":1408,"@metamask/controller-utils":1639,"@metamask/metamask-eth-abis":2597,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ERC20Standard=void 0;const n=e("@ethereumjs/util"),r=e("@ethersproject/contracts"),a=e("@metamask/abi-utils"),i=e("@metamask/controller-utils"),o=e("@metamask/metamask-eth-abis"),c=e("@metamask/utils"),l=e("../assetsUtil.cjs");s.ERC20Standard=class{constructor(e){this.provider=e}async getBalanceOf(e,t){const s=new r.Contract(e,o.abiERC20,this.provider),n=await s.balanceOf(t);return(0,l.ethersBigNumberToBN)(n)}async getTokenDecimals(e){const t=new r.Contract(e,o.abiERC20,this.provider);try{return(await t.decimals()).toString()}catch(e){if(e instanceof Error&&e.message.includes("call revert exception"))throw new Error("Failed to parse token decimals");throw e}}async getTokenName(e){const t=new r.Contract(e,o.abiERC20,this.provider);try{return(await t.name()).toString()}catch(e){if(e instanceof Error&&e.message.includes("call revert exception"))throw new Error("Failed to parse token name");throw e}}async getTokenSymbol(e){const t={to:e,data:"0x95d89b41"},s=await this.provider.call(t);(0,c.assertIsStrictHexString)(s);try{const e=(0,a.decodeSingle)("string",s);if(e?.length>0)return e}catch{}try{const e=/^(00)+|(00)+$/gu,t=s?.replace(e,""),r=(0,n.bytesToUtf8)((0,c.hexToBytes)(t));if(r.length>0)return r}catch{}throw new Error("Failed to parse token symbol")}async getDetails(e,t){const[s,n,r]=await Promise.all([this.getTokenDecimals(e),this.getTokenSymbol(e),t?this.getBalanceOf(e,t):undefined]);return{decimals:s,symbol:n,balance:r,standard:i.ERC20}}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/Standards/ERC20Standard.cjs"}],[1380,{"../../../assetsUtil.cjs":1389,"@ethersproject/contracts":786,"@metamask/controller-utils":1639,"@metamask/metamask-eth-abis":2597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ERC1155Standard=void 0;const n=e("@ethersproject/contracts"),r=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),i=e("../../../assetsUtil.cjs");s.ERC1155Standard=class{constructor(e){this.provider=e}async contractSupportsURIMetadataInterface(e){return this.contractSupportsInterface(e,r.ERC1155_METADATA_URI_INTERFACE_ID)}async contractSupportsTokenReceiverInterface(e){return this.contractSupportsInterface(e,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID)}async contractSupportsBase1155Interface(e){return this.contractSupportsInterface(e,r.ERC1155_INTERFACE_ID)}async getTokenURI(e,t){return new n.Contract(e,a.abiERC1155,this.provider).uri(t)}async getBalanceOf(e,t,s){const r=new n.Contract(e,a.abiERC1155,this.provider),o=await r.balanceOf(t,s);return(0,i.ethersBigNumberToBN)(o)}async transferSingle(e,t,s,r,i){const o=new n.Contract(e,a.abiERC1155,this.provider);return new Promise((n,a)=>{o.transferSingle(e,t,s,r,i,(e,t)=>{e?a(e):n(t)})})}async getAssetSymbol(e){return new n.Contract(e,[{inputs:[],name:"symbol",outputs:[{name:"_symbol",type:"string"}],stateMutability:"view",type:"function",payable:!1}],this.provider).symbol()}async getAssetName(e){return new n.Contract(e,[{inputs:[],name:"name",outputs:[{name:"_name",type:"string"}],stateMutability:"view",type:"function",payable:!1}],this.provider).name()}async contractSupportsInterface(e,t){return new n.Contract(e,a.abiERC1155,this.provider).supportsInterface(t)}async getDetails(e,t,s){if(!await this.contractSupportsBase1155Interface(e))throw new Error("This isn't a valid ERC1155 contract");let n;const[a,o,c]=await Promise.all([(0,r.safelyExecute)(()=>this.getAssetSymbol(e)),(0,r.safelyExecute)(()=>this.getAssetName(e)),s?(0,r.safelyExecute)(()=>this.getTokenURI(e,s).then(e=>e.startsWith("ipfs://")?(0,i.getFormattedIpfsUrl)(t,e,!0):e)):undefined]);if(c)try{const e=await(0,r.timeoutFetch)(c),s=await e.json();n=s?.image,n?.startsWith("ipfs://")&&(n=(0,i.getFormattedIpfsUrl)(t,n,!0))}catch{}return{standard:r.ERC1155,tokenURI:c,image:n,symbol:a,name:o}}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/Standards/NftStandards/ERC1155/ERC1155Standard.cjs"}],[1381,{"../../../assetsUtil.cjs":1389,"@ethersproject/contracts":786,"@metamask/controller-utils":1639,"@metamask/metamask-eth-abis":2597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ERC721Standard=void 0;const n=e("@ethersproject/contracts"),r=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),i=e("../../../assetsUtil.cjs");s.ERC721Standard=class{constructor(e){this.contractSupportsMetadataInterface=async e=>this.contractSupportsInterface(e,r.ERC721_METADATA_INTERFACE_ID),this.contractSupportsEnumerableInterface=async e=>this.contractSupportsInterface(e,r.ERC721_ENUMERABLE_INTERFACE_ID),this.contractSupportsBase721Interface=async e=>this.contractSupportsInterface(e,r.ERC721_INTERFACE_ID),this.getNftTokenId=async(e,t,s)=>new n.Contract(e,a.abiERC721,this.provider).tokenOfOwnerByIndex(t,s),this.getTokenURI=async(e,t)=>{const s=new n.Contract(e,a.abiERC721,this.provider);return await this.contractSupportsMetadataInterface(e)||console.warn("Contract does not support ERC721 metadata interface."),s.tokenURI(t)},this.getAssetName=async e=>new n.Contract(e,a.abiERC721,this.provider).name(),this.getAssetSymbol=async e=>new n.Contract(e,a.abiERC721,this.provider).symbol(),this.contractSupportsInterface=async(e,t)=>{const s=new n.Contract(e,a.abiERC721,this.provider);try{return await s.supportsInterface(t)}catch(e){if(e instanceof Error&&e.message.includes("call revert exception"))return!1;throw e}},this.getDetails=async(e,t,s)=>{if(!await this.contractSupportsBase721Interface(e))throw new Error("This isn't a valid ERC721 contract");const[n,a,o]=await Promise.all([(0,r.safelyExecute)(()=>this.getAssetSymbol(e)),(0,r.safelyExecute)(()=>this.getAssetName(e)),s?(0,r.safelyExecute)(()=>this.getTokenURI(e,s).then(e=>e.startsWith("ipfs://")?(0,i.getFormattedIpfsUrl)(t,e,!0):e)):undefined]);let c;if(o)try{const e=await(0,r.timeoutFetch)(o),s=await e.json();c=s?.image,c?.startsWith("ipfs://")&&(c=await(0,i.getFormattedIpfsUrl)(t,c,!0))}catch{}return{standard:r.ERC721,tokenURI:o,symbol:n,name:a,image:c}},this.provider=e}async getOwnerOf(e,t){return new n.Contract(e,a.abiERC721,this.provider).ownerOf(t)}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/Standards/NftStandards/ERC721/ERC721Standard.cjs"}],[1382,{"./AssetsContractController.cjs":1361,"./multi-chain-accounts-service/api-balance-fetcher.cjs":1395,"./rpc-service/rpc-balance-fetcher.cjs":1398,"@ethersproject/providers":824,"@metamask/controller-utils":1639,"@metamask/polling-controller":2889,"@metamask/utils":3554,immer:5015,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k,w,I,v,N,P,j,R,O,x,D,M,L,B,F,U,H,W,$,q,V,G,K,z,Y,J=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},Q=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.TokenBalancesController=s.parseAssetType=s.caipChainIdToHex=void 0;const X=e("@ethersproject/providers"),Z=e("@metamask/controller-utils"),ee=e("@metamask/polling-controller"),te=e("@metamask/utils"),se=e("immer"),ne=e("lodash"),re=e("./AssetsContractController.cjs"),ae=e("./multi-chain-accounts-service/api-balance-fetcher.cjs"),ie=e("./rpc-service/rpc-balance-fetcher.cjs"),oe={tokenBalances:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},ce="0x0000000000000000000000000000000000000000",le=e=>(0,Z.toChecksumHexAddress)(e);s.caipChainIdToHex=e=>{if((0,te.isStrictHexString)(e))return e;if((0,te.isCaipChainId)(e))return(0,Z.toHex)((0,te.parseCaipChainId)(e).reference);throw new Error("caipChainIdToHex - Failed to provide CAIP-2 or Hex chainId")};s.parseAssetType=e=>{if(!(0,te.isCaipAssetType)(e))return null;const t=(0,te.parseCaipAssetType)(e);return"erc20"===t.assetNamespace?[t.assetReference,!1]:"slip44"===t.assetNamespace?[ce,!0]:null};class ue extends((0,ee.StaticIntervalPollingController)()){constructor({messenger:e,interval:t=3e4,websocketActivePollingInterval:v=3e5,chainPollingIntervals:N={},state:P={},queryMultipleAccounts:j=!0,accountsApiChainIds:R=()=>[],allowExternalServices:O=()=>!0,platform:x,isOnboarded:D=()=>!0}){super({name:"TokenBalancesController",messenger:e,metadata:oe,state:{tokenBalances:{},...P}}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,{}),d.set(this,{}),h.set(this,{}),p.set(this,void 0),m.set(this,void 0),f.set(this,void 0),g.set(this,new Map),b.set(this,!1),S.set(this,!1),A.set(this,[]),y.set(this,{timer:null,pendingChanges:new Map}),k.set(this,e=>{const{networkConfigurationsByChainId:t}=this.messenger.call("NetworkController:getState"),s=t[e],{networkClientId:n}=s.rpcEndpoints[s.defaultRpcEndpointIndex],r=this.messenger.call("NetworkController:getNetworkClientById",n);return new X.Web3Provider(r.provider)}),w.set(this,e=>{const{networkConfigurationsByChainId:t}=this.messenger.call("NetworkController:getState"),s=t[e],{networkClientId:n}=s.rpcEndpoints[s.defaultRpcEndpointIndex];return this.messenger.call("NetworkController:getNetworkClientById",n)}),I.set(this,()=>{const e=new ae.AccountsApiBalanceFetcher(J(this,r,"f"),J(this,k,"f"),()=>this.state.tokenBalances);return{supports:t=>J(this,o,"f").call(this)&&J(this,i,"f").call(this).includes(t)&&e.supports(t),fetch:e.fetch.bind(e)}}),W.set(this,async e=>{const t=[];let s=!1;const n=new Set([...Object.keys(e.allTokens),...Object.keys(e.allDetectedTokens)]),r=Array.from(n).filter(t=>{const s=t,n=e.allTokens[s]&&Object.keys(e.allTokens[s]).length>0||e.allDetectedTokens[s]&&Object.keys(e.allDetectedTokens[s]).length>0,r=J(this,u,"f")[s]&&Object.keys(J(this,u,"f")[s]).length>0||J(this,d,"f")[s]&&Object.keys(J(this,d,"f")[s]).length>0;return!(0,ne.isEqual)(e.allTokens[s],J(this,u,"f")[s])||!(0,ne.isEqual)(e.allDetectedTokens[s],J(this,d,"f")[s])||!r&&n});if(!r.length)return Q(this,u,e.allTokens,"f"),void Q(this,d,e.allDetectedTokens,"f");this.update(n=>{for(const a of r){const r=a,i=e.allTokens[r]&&Object.keys(e.allTokens[r]).length>0||e.allDetectedTokens[r]&&Object.keys(e.allDetectedTokens[r]).length>0,o=J(this,u,"f")[r]&&Object.keys(J(this,u,"f")[r]).length>0||J(this,d,"f")[r]&&Object.keys(J(this,d,"f")[r]).length>0;if(!(0,ne.isEqual)(e.allTokens[r],J(this,u,"f")[r])||!(0,ne.isEqual)(e.allDetectedTokens[r],J(this,d,"f")[r]))if(i)t.push(r);else if(o)for(const e of Object.keys(n.tokenBalances)){const t=e;n.tokenBalances[t]?.[r]&&(n.tokenBalances[t][r]={},s=!0)}}}),Q(this,u,e.allTokens,"f"),Q(this,d,e.allDetectedTokens,"f"),Q(this,h,e.allIgnoredTokens,"f"),t.length&&!s&&this.updateBalances({chainIds:t}).catch(e=>{console.warn("Error updating balances after token change:",e)})}),$.set(this,e=>{const t=new Set(Object.keys(e.networkConfigurationsByChainId)),s=new Set;for(const e of Object.keys(this.state.tokenBalances)){const t=e;for(const e of Object.keys(this.state.tokenBalances[t]||{}))s.add(e)}const n=Array.from(s).filter(e=>!t.has(e));n.length&&this.update(e=>{for(const t of Object.keys(e.tokenBalances)){const s=t;for(const t of n){const n=t;e.tokenBalances[s]?.[n]&&delete e.tokenBalances[s][n]}}})}),q.set(this,e=>{(0,te.isStrictHexString)(e)&&(0,Z.isValidHexAddress)(e)&&this.update(t=>{delete t.tokenBalances[e]})}),V.set(this,()=>{const e=J(this,n,"m",T).call(this);e.length&&this.updateBalances({chainIds:e}).catch(()=>{})}),K.set(this,async({address:e,chain:t,updates:r})=>{const a=(0,s.caipChainIdToHex)(t),i=le(e);try{const{tokenBalances:e,newTokens:t,nativeBalanceUpdates:s}=J(this,n,"m",G).call(this,r,i,a);e.length>0&&this.update(t=>{var s,n;const r=i.toLowerCase();(s=t.tokenBalances)[r]??(s[r]={}),(n=t.tokenBalances[r])[a]??(n[a]={});for(const{tokenAddress:s,balance:n}of e)t.tokenBalances[r][a][s]=n}),s.length>0&&this.messenger.call("AccountTrackerController:updateNativeBalances",s),t.length>0&&await this.messenger.call("TokenDetectionController:addDetectedTokensViaWs",{tokensSlice:t,chainId:a})}catch(s){console.warn(`Error updating balances from AccountActivityService for chain ${t}, account ${e}:`,s),console.warn("Balance update data:",JSON.stringify(r,null,2)),await this.updateBalances({chainIds:[a]}).catch(()=>{})}}),z.set(this,({chainIds:e,status:t})=>{for(const s of e)J(this,y,"f").pendingChanges.set(s,t);J(this,y,"f").timer&&clearTimeout(J(this,y,"f").timer),J(this,y,"f").timer=setTimeout(()=>{J(this,n,"m",Y).call(this)},5e3)}),J(this,n,"m",_).call(this),Q(this,r,x??"extension","f"),Q(this,a,j,"f"),Q(this,i,R,"f"),Q(this,o,O,"f"),Q(this,c,D,"f"),Q(this,p,t,"f"),Q(this,m,v,"f"),Q(this,f,{...N},"f"),Q(this,l,[J(this,I,"f").call(this),new ie.RpcBalanceFetcher(J(this,k,"f"),J(this,w,"f"),()=>({allTokens:J(this,u,"f"),allDetectedTokens:J(this,d,"f")}))],"f"),this.setIntervalLength(t);const{allTokens:M,allDetectedTokens:L,allIgnoredTokens:B}=this.messenger.call("TokensController:getState");Q(this,u,M,"f"),Q(this,d,L,"f"),Q(this,h,B,"f");const{isUnlocked:F}=this.messenger.call("KeyringController:getState");Q(this,S,F,"f"),J(this,n,"m",E).call(this),J(this,n,"m",C).call(this)}get isActive(){return J(this,S,"f")&&J(this,c,"f").call(this)}_startPolling({chainIds:e}){Q(this,A,[...e],"f"),Q(this,b,!0,"f"),J(this,n,"m",v).call(this,e,!0)}_stopPollingByPollingTokenSetId(e){let t=[];try{t=JSON.parse(e).chainIds??[]}catch(e){return console.warn("Failed to parse tokenSetId, stopping all polling:",e),void J(this,n,"m",j).call(this)}const s=new Set(J(this,A,"f")),r=new Set(t);s.size===r.size&&[...s].every(e=>r.has(e))&&J(this,n,"m",j).call(this)}getChainPollingConfig(e){return J(this,f,"f")[e]??{interval:J(this,p,"f")}}async _executePoll({chainIds:e,queryAllAccounts:t=!1}){await this.updateBalances({chainIds:e,queryAllAccounts:t})}updateChainPollingConfigs(e,t={immediateUpdate:!0}){Object.assign(J(this,f,"f"),e),J(this,b,"f")&&J(this,n,"m",v).call(this,J(this,A,"f"),t.immediateUpdate)}async updateBalances({chainIds:e,tokenAddresses:t,queryAllAccounts:s=!1}={}){if(!this.isActive)return;const r=J(this,n,"m",R).call(this,e);if(!r.length)return;const{selectedAccount:i,allAccounts:o,jwtToken:c}=await J(this,n,"m",O).call(this),l=await J(this,n,"m",x).call(this,{targetChains:r,selectedAccount:i,allAccounts:o,jwtToken:c,queryAllAccounts:s??J(this,a,"f")}),u=J(this,n,"m",D).call(this,l,t),d=J(this,n,"m",M).call(this,s,o,i),h=this.state,p=J(this,n,"m",L).call(this,{prev:h,targetChains:r,accountsToProcess:d,balances:u});if(!(0,ne.isEqual)(h,p)){this.update(()=>p);const e=this.messenger.call("AccountTrackerController:getState"),t=J(this,n,"m",B).call(this,u,e);t.length>0&&this.messenger.call("AccountTrackerController:updateNativeBalances",t);const s=J(this,n,"m",F).call(this,u,e);s.length>0&&this.messenger.call("AccountTrackerController:updateStakedBalances",s)}await J(this,n,"m",U).call(this,u)}resetState(){this.update(()=>({tokenBalances:{}}))}destroy(){Q(this,b,!1,"f"),J(this,g,"f").forEach(e=>clearInterval(e)),J(this,g,"f").clear(),J(this,y,"f").timer&&(clearTimeout(J(this,y,"f").timer),J(this,y,"f").timer=null),this.messenger.unregisterActionHandler("TokenBalancesController:updateChainPollingConfigs"),this.messenger.unregisterActionHandler("TokenBalancesController:getChainPollingConfig"),super.destroy()}}s.TokenBalancesController=ue,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,b=new WeakMap,S=new WeakMap,A=new WeakMap,y=new WeakMap,k=new WeakMap,w=new WeakMap,I=new WeakMap,W=new WeakMap,$=new WeakMap,q=new WeakMap,V=new WeakMap,K=new WeakMap,z=new WeakMap,n=new WeakSet,E=function(){this.messenger.subscribe("TokensController:stateChange",e=>{J(this,W,"f").call(this,e).catch(e=>{console.warn("Error handling token state change:",e)})}),this.messenger.subscribe("NetworkController:stateChange",J(this,$,"f")),this.messenger.subscribe("KeyringController:unlock",()=>{Q(this,S,!0,"f")}),this.messenger.subscribe("KeyringController:lock",()=>{Q(this,S,!1,"f")}),this.messenger.subscribe("KeyringController:accountRemoved",J(this,q,"f")),this.messenger.subscribe("AccountsController:selectedEvmAccountChange",J(this,V,"f")),this.messenger.subscribe("AccountActivityService:balanceUpdated",e=>{J(this,K,"f").call(this,e).catch(e=>{console.warn("Error handling balance update:",e)})}),this.messenger.subscribe("AccountActivityService:statusChanged",J(this,z,"f").bind(this)),this.messenger.subscribe("TransactionController:transactionConfirmed",e=>{this.updateBalances({chainIds:[e.chainId]}).catch(()=>{})}),this.messenger.subscribe("TransactionController:incomingTransactionsReceived",e=>{this.updateBalances({chainIds:e.map(e=>e.chainId)}).catch(()=>{})})},C=function(){this.messenger.registerActionHandler("TokenBalancesController:updateChainPollingConfigs",this.updateChainPollingConfigs.bind(this)),this.messenger.registerActionHandler("TokenBalancesController:getChainPollingConfig",this.getChainPollingConfig.bind(this))},_=function(){var e;const t=this.state.tokenBalances,s={};for(const n of Object.keys(t)){const r=n.toLowerCase(),a=t[n];if(a){s[r]??(s[r]={});for(const t of Object.keys(a)){const n=t;(e=s[r])[n]??(e[n]={}),Object.assign(s[r][n],a[n])}}}(Object.keys(t).length!==Object.keys(s).length||Object.keys(t).some(e=>e!==e.toLowerCase()))&&this.update(()=>({tokenBalances:s}))},T=function(){return[...new Set([...Object.keys(J(this,u,"f")),...Object.keys(J(this,d,"f"))])]},v=function(e,t=!0){J(this,g,"f").forEach(e=>clearInterval(e)),J(this,g,"f").clear();const s=new Map;for(const t of e){const e=this.getChainPollingConfig(t),n=s.get(e.interval)??[];n.push(t),s.set(e.interval,n)}for(const[e,r]of s)J(this,n,"m",N).call(this,e,r,t)},N=function(e,t,s=!0){const r=async()=>{if(J(this,b,"f"))try{await this._executePoll({chainIds:t})}catch(s){console.warn(`Polling failed for chains ${t.join(", ")} with interval ${e}:`,s)}};s&&r().catch(e=>{console.warn(`Immediate polling failed for chains ${t.join(", ")}:`,e)}),J(this,n,"m",P).call(this,e,t,r)},P=function(e,t,s){const n=setInterval(()=>{s().catch(e=>{console.warn(`Interval polling failed for chains ${t.join(", ")}:`,e)})},e);J(this,g,"f").set(e,n)},j=function(){Q(this,b,!1,"f"),Q(this,A,[],"f"),J(this,g,"f").forEach(e=>clearInterval(e)),J(this,g,"f").clear()},R=function(e){return e?.length?e:J(this,n,"m",T).call(this)},O=async function(){const{address:e}=this.messenger.call("AccountsController:getSelectedAccount");return{selectedAccount:e,allAccounts:this.messenger.call("AccountsController:listAccounts"),jwtToken:await(0,Z.safelyExecuteWithTimeout)(()=>this.messenger.call("AuthenticationController:getBearerToken"),!1,5e3)}},x=async function({targetChains:e,selectedAccount:t,allAccounts:s,jwtToken:n,queryAllAccounts:r}){const a=[];let i=[...e];for(const e of J(this,l,"f")){const o=i.filter(t=>e.supports(t));if(o.length){try{const c=await e.fetch({chainIds:o,queryAllAccounts:r,selectedAccount:t,allAccounts:s,jwtToken:n});if(c.balances?.length){a.push(...c.balances);const e=new Set(c.balances.map(e=>e.chainId));i=i.filter(t=>!e.has(t))}if(c.unprocessedChainIds?.length){const e=[...i],t=c.unprocessedChainIds.filter(t=>o.includes(t)&&!e.includes(t));i.push(...t),this.messenger.call("TokenDetectionController:detectTokens",{chainIds:c.unprocessedChainIds,forceRpc:!0}).catch(()=>{})}}catch(e){console.warn(`Balance fetcher failed for chains ${o.join(", ")}: ${String(e)}`),this.messenger.call("TokenDetectionController:detectTokens",{chainIds:o,forceRpc:!0}).catch(()=>{})}if(!i.length)break}}return a},D=function(e,t){if(!t?.length)return e;const s=t.map(e=>e.toLowerCase());return e.filter(e=>s.includes(e.token.toLowerCase()))},M=function(e,t,s){return e??J(this,a,"f")??!1?t.map(e=>e.address):[s]},L=function({prev:e,targetChains:t,accountsToProcess:s,balances:n}){return r=e,a=e=>{var r,a;for(const n of t)for(const t of s){(r=e.tokenBalances)[t]??(r[t]={}),(a=e.tokenBalances[t])[n]??(a[n]={});const s=J(this,u,"f")[n];s?.[t]&&Object.values(s[t]).forEach(s=>{var r;const a=le(s.address);(r=e.tokenBalances[t][n])[a]??(r[a]="0x0")});const i=J(this,d,"f")[n];i?.[t]&&Object.values(i[t]).forEach(s=>{var r;const a=le(s.address);(r=e.tokenBalances[t][n])[a]??(r[a]="0x0")})}n.forEach(({success:t,value:s,account:n,token:r,chainId:a})=>{var i,o;if(!t||s===undefined)return;const c=n.toLowerCase(),l=(0,Z.toHex)(s),u=le(r),d=e.tokenBalances[c]?.[a]?.[u];d!==l&&(((o=(i=e.tokenBalances)[c]??(i[c]={}))[a]??(o[a]={}))[u]=l)})},(0,se.produce)(r,a);var r,a},B=function(e,t){const s=e.filter(e=>e.success&&e.token===ce);return s.length?s.map(e=>({address:e.account,chainId:e.chainId,balance:e.value?(0,Z.BNToHex)(e.value):"0x0"})).filter(e=>{const s=t.accountsByChainId[e.chainId]?.[le(e.address)]?.balance;return s!==e.balance}):[]},F=function(e,t){const s=e.filter(e=>{if(!e.success||e.token===ce)return!1;const t=re.STAKING_CONTRACT_ADDRESS_BY_CHAINID[e.chainId];return t?.toLowerCase()===e.token.toLowerCase()});return s.length?s.map(e=>({address:e.account,chainId:e.chainId,stakedBalance:e.value?(0,Z.toHex)(e.value):"0x0"})).filter(e=>{const s=t.accountsByChainId[e.chainId]?.[le(e.address)]?.stakedBalance;return s!==e.stakedBalance}):[]},U=async function(e){const t=new Map;for(const s of e){if(!s.success||s.token===ce||!s.value||s.value.isZero())continue;const e=le(s.token),n=t.get(s.chainId)??[];n.includes(e)||(n.push(e),t.set(s.chainId,n))}for(const[e,s]of t)s.length&&await this.messenger.call("TokenDetectionController:addDetectedTokensViaPolling",{tokensSlice:s,chainId:e})},H=function(e,t,s){const n=t.toLowerCase();return!!J(this,u,"f")?.[s]?.[n]?.some(t=>t.address===e)||!!J(this,h,"f")?.[s]?.[n]?.some(t=>t===e)},G=function(e,t,r){const a=[],i=[],o=[];for(const c of e){const{asset:e,postBalance:l}=c;if(l.error)throw new Error("Balance update has error");const u=(0,s.parseAssetType)(e.type);if(!u)throw new Error("Failed to parse asset type");const[d,h]=u;if(!(0,te.isStrictHexString)(d)||!(0,Z.isValidHexAddress)(d))throw new Error("Invalid token address");const p=le(d),m=J(this,n,"m",H).call(this,p,t,r),f=l.amount;a.push({tokenAddress:p,balance:f}),h&&o.push({address:t,chainId:r,balance:f}),h||m||i.push(p)}return{tokenBalances:a,newTokens:i,nativeBalanceUpdates:o}},Y=function(){const e=Array.from(J(this,y,"f").pendingChanges.entries());if(J(this,y,"f").pendingChanges.clear(),J(this,y,"f").timer=null,!e.length)return;const t={};for(const[n,r]of e){const e=(0,s.caipChainIdToHex)(n);t[e]="down"===r?{interval:J(this,p,"f")}:{interval:J(this,m,"f")}}const n=Math.random()*J(this,p,"f");setTimeout(()=>{this.updateChainPollingConfigs(t,{immediateUpdate:!0})},n)},s.default=ue}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenBalancesController.cjs"}],[1383,{"./assetsUtil.cjs":1389,"./constants.cjs":1391,"@metamask/contract-metadata":1636,"@metamask/controller-utils":1639,"@metamask/polling-controller":2889,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k,w,I=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},v=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},N=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.TokenDetectionController=s.controllerName=s.mapChainIdWithTokenListMap=s.STATIC_MAINNET_TOKEN_LIST=void 0;const P=N(e("@metamask/contract-metadata")),j=e("@metamask/controller-utils"),R=e("@metamask/polling-controller"),O=e("lodash"),x=e("./assetsUtil.cjs"),D=e("./constants.cjs"),M=18e4;function L(e){return(0,O.mapValues)(e,e=>(0,O.isObject)(e)&&"data"in e?(0,O.get)(e,["data"]):e)}s.STATIC_MAINNET_TOKEN_LIST=Object.entries(P.default).reduce((e,[t,s])=>{const{logo:n,erc20:r,erc721:a,...i}=s;return{...e,[t.toLowerCase()]:{...i,address:t.toLowerCase(),iconUrl:`images/contract/${n}`,aggregators:[]}}},{}),s.mapChainIdWithTokenListMap=L,s.controllerName="TokenDetectionController";class B extends((0,R.StaticIntervalPollingController)()){constructor({interval:e=18e4,disabled:t=!0,getBalancesInSingleCall:f,trackMetaMetricsEvent:g,messenger:b,useTokenDetection:S=()=>!0,useExternalServices:A=()=>!0}){super({name:s.controllerName,messenger:b,state:{},metadata:{}}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,{}),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),h.set(this,void 0),p.set(this,void 0),this.messenger.registerActionHandler(`${s.controllerName}:addDetectedTokensViaWs`,this.addDetectedTokensViaWs.bind(this)),this.messenger.registerActionHandler(`${s.controllerName}:addDetectedTokensViaPolling`,this.addDetectedTokensViaPolling.bind(this)),this.messenger.registerActionHandler(`${s.controllerName}:detectTokens`,this.detectTokens.bind(this)),I(this,o,t,"f"),this.setIntervalLength(e),I(this,a,v(this,n,"m",k).call(this).id,"f");const{tokensChainsCache:y}=this.messenger.call("TokenListController:getState");I(this,i,y,"f");const{useTokenDetection:E}=this.messenger.call("PreferencesController:getState");I(this,l,E,"f"),I(this,h,f,"f"),I(this,p,g,"f");const{isUnlocked:C}=this.messenger.call("KeyringController:getState");I(this,c,C,"f"),I(this,u,S,"f"),I(this,d,A,"f"),v(this,n,"m",m).call(this)}enable(){I(this,o,!1,"f")}disable(){I(this,o,!0,"f")}get isActive(){return!v(this,o,"f")&&v(this,c,"f")}async start(){this.enable(),await v(this,n,"m",g).call(this)}stop(){this.disable(),v(this,n,"m",f).call(this)}async _executePoll({chainIds:e,address:t}){this.isActive&&await this.detectTokens({chainIds:e,selectedAddress:t})}async detectTokens({chainIds:e,selectedAddress:t,forceRpc:s=!1}={}){if(!this.isActive)return;if(!s&&!v(this,u,"f").call(this))return;if(!s&&!v(this,d,"f").call(this))return;const r=t??v(this,n,"m",w).call(this),a=v(this,n,"m",S).call(this,e),i=s?a:a.filter(({chainId:e})=>!D.SUPPORTED_NETWORKS_ACCOUNTS_API_V4.includes(e));0!==i.length&&await v(this,n,"m",E).call(this,i,r)}async addDetectedTokensViaWs({tokensSlice:e,chainId:t}){if(!v(this,u,"f").call(this))return;if(!v(this,d,"f").call(this))return;const{tokensChainsCache:s}=this.messenger.call("TokenListController:getState");I(this,i,s??{},"f");const n=[],r=[];for(const s of e){const e=s.toLowerCase(),a=(0,j.toChecksumHexAddress)(s),o=v(this,i,"f")[t]?.data?.[e];if(!o){console.warn(`Token metadata not found in cache for ${s} on chain ${t}`);continue}const{decimals:c,symbol:l,aggregators:u,iconUrl:d,name:h,rwaData:p}=o;r.push(`${l} - ${a}`),n.push({address:a,decimals:c,symbol:l,aggregators:u,image:d,isERC721:!1,name:h,...p&&{rwaData:p}})}if(n.length){v(this,p,"f").call(this,{event:"Token Detected",category:"Wallet",properties:{tokens:r,token_standard:j.ERC20,asset_type:j.ASSET_TYPES.TOKEN}});const e=this.messenger.call("NetworkController:findNetworkClientIdByChainId",t);await this.messenger.call("TokensController:addTokens",n,e)}}async addDetectedTokensViaPolling({tokensSlice:e,chainId:t}){if(!v(this,u,"f").call(this))return;if(!v(this,d,"f").call(this))return;const{tokensChainsCache:s}=this.messenger.call("TokenListController:getState");I(this,i,s??{},"f");const r=v(this,n,"m",w).call(this),{allTokens:a,allIgnoredTokens:o}=this.messenger.call("TokensController:getState"),c=(a[t]?.[r]??[]).map(e=>e.address.toLowerCase()),l=(o[t]?.[r]??[]).map(e=>e.toLowerCase()),h=[],m=[];for(const s of e){const e=s.toLowerCase(),n=(0,j.toChecksumHexAddress)(s);if(c.includes(e))continue;if(l.includes(e))continue;const r=v(this,i,"f")[t]?.data?.[e];if(!r){console.warn(`Token metadata not found in cache for ${s} on chain ${t}`);continue}const{decimals:a,symbol:o,aggregators:u,iconUrl:d,name:p,rwaData:f}=r;m.push(`${o} - ${n}`),h.push({address:n,decimals:a,symbol:o,aggregators:u,image:d,isERC721:!1,name:p,...f&&{rwaData:f}})}if(h.length){v(this,p,"f").call(this,{event:"Token Detected",category:"Wallet",properties:{tokens:m,token_standard:j.ERC20,asset_type:j.ASSET_TYPES.TOKEN}});const e=this.messenger.call("NetworkController:findNetworkClientIdByChainId",t);await this.messenger.call("TokensController:addTokens",h,e)}}}s.TokenDetectionController=B,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,n=new WeakSet,m=function(){this.messenger.subscribe("KeyringController:unlock",()=>{I(this,c,!0,"f"),v(this,n,"m",A).call(this).catch(()=>{})}),this.messenger.subscribe("KeyringController:lock",()=>{I(this,c,!1,"f"),v(this,n,"m",f).call(this)}),this.messenger.subscribe("TokenListController:stateChange",({tokensChainsCache:e})=>{v(this,n,"m",b).call(this,e,v(this,i,"f"))||v(this,n,"m",A).call(this).catch(()=>{})}),this.messenger.subscribe("PreferencesController:stateChange",({useTokenDetection:e})=>{const t=v(this,n,"m",k).call(this),s=v(this,l,"f")!==e;I(this,l,e,"f"),s&&v(this,n,"m",A).call(this,{selectedAddress:t.address}).catch(()=>{})}),this.messenger.subscribe("AccountsController:selectedEvmAccountChange",e=>{const{networkConfigurationsByChainId:t}=this.messenger.call("NetworkController:getState"),s=Object.keys(t);v(this,a,"f")!==e.id&&(I(this,a,e.id,"f"),v(this,n,"m",A).call(this,{selectedAddress:e.address,chainIds:s}).catch(()=>{}))}),this.messenger.subscribe("TransactionController:transactionConfirmed",e=>{this.detectTokens({chainIds:[e.chainId]}).catch(()=>{})})},f=function(){v(this,r,"f")&&clearInterval(v(this,r,"f"))},g=async function(){this.isActive&&(v(this,n,"m",f).call(this),await this.detectTokens(),I(this,r,setInterval(async()=>{await this.detectTokens()},this.getIntervalLength()),"f"))},b=function(e,t){const s=L(t),n=L(e);return(0,O.isEqual)(n,s)},S=function(e){const{networkConfigurationsByChainId:t,selectedNetworkClientId:s}=this.messenger.call("NetworkController:getState");if(!e){const e=this.messenger.call("NetworkController:getNetworkConfigurationByNetworkClientId",s);return[{chainId:e?.chainId??j.ChainId.mainnet,networkClientId:s}]}return e.map(e=>{const s=t[e];return{chainId:e,networkClientId:s.rpcEndpoints[s.defaultRpcEndpointIndex].networkClientId}})},A=async function({selectedAddress:e,chainIds:t}={}){await this.detectTokens({chainIds:t,selectedAddress:e}),this.setIntervalLength(M)},y=function(e){if(!(0,x.isTokenDetectionSupportedForNetwork)(e))return!1;if(!v(this,l,"f")&&e!==j.ChainId.mainnet)return!1;if(!v(this,l,"f")&&e===j.ChainId.mainnet)I(this,i,v(this,n,"m",_).call(this),"f");else{const{tokensChainsCache:e}=this.messenger.call("TokenListController:getState");I(this,i,e??{},"f")}return!0},E=async function(e,t){for(const{chainId:s,networkClientId:r}of e){if(!v(this,n,"m",y).call(this,s))continue;const e=v(this,n,"m",C).call(this,{chainId:s,selectedAddress:t}).map(e=>v(this,n,"m",T).call(this,{tokensSlice:e,selectedAddress:t,networkClientId:r,chainId:s}));await Promise.all(e)}},C=function({chainId:e,selectedAddress:t}){const{allTokens:s,allDetectedTokens:n,allIgnoredTokens:r}=this.messenger.call("TokensController:getState"),[a,o,c]=[s,n,r].map(s=>(s[e]?.[t]??[]).map(e=>"string"==typeof e?e:e.address)),l=[];for(const t of Object.keys(v(this,i,"f")?.[e]?.data||{}))[a,o,c].every(e=>!e.find(e=>(0,j.isEqualCaseInsensitive)(e,t)))&&l.push(t);const u=[];for(let e=0,t=1e3;e<l.length;e+=t)u.push(l.slice(e,e+t));return u},_=function(){return{"0x1":{data:Object.entries(s.STATIC_MAINNET_TOKEN_LIST).reduce((e,[t,s])=>({...e,[t]:{name:s.name,symbol:s.symbol,decimals:s.decimals,address:s.address,aggregators:[],iconUrl:s?.iconUrl}}),{}),timestamp:0}}},T=async function({tokensSlice:e,selectedAddress:t,networkClientId:s,chainId:n}){await(0,j.safelyExecute)(async()=>{const r=await v(this,h,"f").call(this,t,e,s),a=[],o=[];for(const e of Object.keys(r)){const{decimals:t,symbol:s,aggregators:r,iconUrl:c,name:l,rwaData:u}=v(this,i,"f")[n].data[e];o.push(`${s} - ${e}`),a.push({address:e,decimals:t,symbol:s,aggregators:r,image:c,isERC721:!1,name:l,...u&&{rwaData:u}})}a.length&&(v(this,p,"f").call(this,{event:"Token Detected",category:"Wallet",properties:{tokens:o,token_standard:j.ERC20,asset_type:j.ASSET_TYPES.TOKEN}}),await this.messenger.call("TokensController:addTokens",a,s))})},k=function(){return this.messenger.call("AccountsController:getSelectedAccount")},w=function(){const e=this.messenger.call("AccountsController:getAccount",v(this,a,"f"));return e?.address??""},s.default=B}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenDetectionController.cjs"}],[1384,{"./assetsUtil.cjs":1389,"./token-service.cjs":1403,"@metamask/controller-utils":1639,"@metamask/polling-controller":2889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},w=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.TokenListController=s.getDefaultTokenListState=void 0;const I=e("@metamask/controller-utils"),v=e("@metamask/polling-controller"),N=e("./assetsUtil.cjs"),P=e("./token-service.cjs"),j="TokenListController",R={tokensChainsCache:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0}};s.getDefaultTokenListState=()=>({tokensChainsCache:{}});class O extends((0,v.StaticIntervalPollingController)()){constructor({chainId:e,onNetworkStateChange:t,interval:r=144e5,cacheRefreshThreshold:l=144e5,messenger:u,state:d}){super({name:j,metadata:R,messenger:u,state:{...(0,s.getDefaultTokenListState)(),...d}}),n.add(this),a.set(this,void 0),i.set(this,void 0),o.set(this,new Set),c.set(this,{}),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),f.set(this,void 0),g.set(this,void 0),w(this,p,r,"f"),this.setIntervalLength(r),w(this,m,l,"f"),w(this,f,e,"f"),w(this,g,new AbortController,"f"),t?t(async e=>{await k(this,n,"m",C).call(this,e)}):this.messenger.subscribe("NetworkController:stateChange",async e=>{await k(this,n,"m",C).call(this,e)})}async initialize(){await k(this,n,"m",y).call(this),this.messenger.subscribe("TokenListController:stateChange",e=>k(this,n,"m",b).call(this,e),e=>e.tokensChainsCache)}async start(){(0,N.isTokenListSupportedForNetwork)(k(this,f,"f"))&&await k(this,n,"m",T).call(this)}async restart(){k(this,n,"m",_).call(this),await k(this,n,"m",T).call(this)}stop(){k(this,n,"m",_).call(this)}destroy(){super.destroy(),k(this,n,"m",_).call(this),k(this,a,"f")&&(clearTimeout(k(this,a,"f")),w(this,a,undefined,"f")),k(this,o,"f").clear()}async _executePoll({chainId:e}){return this.fetchTokenList(e)}async fetchTokenList(e){if(this.isCacheValid(e))return;const t=await(0,I.safelyExecute)(()=>(0,P.fetchTokenListByChainId)(e,k(this,g,"f").signal));if(t){const s={};for(const n of t)s[n.address]={...n,aggregators:(0,N.formatAggregatorNames)(n.aggregators),iconUrl:(0,N.formatIconUrlWithProxy)({chainId:e,tokenAddress:n.address})};const n={data:s,timestamp:Date.now()};return void this.update(t=>{t.tokensChainsCache[e]=n})}if(!t){if(!this.state.tokensChainsCache[e]){const t={data:{},timestamp:Date.now()};this.update(s=>{s.tokensChainsCache[e]=t})}}}isCacheValid(e){const{tokensChainsCache:t}=this.state,s=t[e]?.timestamp,n=Date.now();return s!==undefined&&n-s<k(this,m,"f")}}s.TokenListController=O,r=O,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,n=new WeakSet,d=function(e){return`${k(r,r,"f",u)}:${e}`},b=function(e){for(const t of Object.keys(e)){const s=e[t],n=k(this,c,"f")[t];n?.timestamp!==s.timestamp&&k(this,o,"f").add(t)}w(this,c,{...e},"f"),k(this,o,"f").size>0&&k(this,n,"m",S).call(this)},S=function(){k(this,a,"f")&&clearTimeout(k(this,a,"f")),w(this,a,setTimeout(()=>{k(this,n,"m",A).call(this)},k(r,r,"f",l)),"f")},A=async function(){if(k(this,i,"f"))return void(k(this,o,"f").size>0&&k(this,n,"m",S).call(this));const e=[...k(this,o,"f")];if(k(this,o,"f").clear(),0!==e.length){w(this,i,Promise.all(e.map(e=>k(this,n,"m",E).call(this,e))).then(()=>undefined),"f");try{await k(this,i,"f")}finally{w(this,i,undefined,"f")}}},y=async function(){try{const e=(await this.messenger.call("StorageService:getAllKeys",j)).filter(e=>e.startsWith(`${k(r,r,"f",u)}:`)),t=await Promise.all(e.map(async e=>{const t=e.split(":")[1],{result:s,error:n}=await this.messenger.call("StorageService:getItem",j,e);return n?(console.error(`TokenListController: Error loading cache for ${t}:`,n),null):s?{chainId:t,data:s}:null})),s={};t.forEach(e=>{e&&(s[e.chainId]=e.data)});const a=new Set(Object.keys(this.state.tokensChainsCache));Object.keys(s).length>0&&this.update(e=>{for(const[t,n]of Object.entries(s))e.tokensChainsCache[t]||(e.tokensChainsCache[t]=n)});for(const e of a)k(this,o,"f").add(e);k(this,o,"f").size>0&&k(this,n,"m",S).call(this),w(this,c,{...this.state.tokensChainsCache},"f")}catch(e){console.error("TokenListController: Failed to load cache from storage:",e)}},E=async function(e){try{const t=this.state.tokensChainsCache[e];if(!t)return void console.warn(`TokenListController: No cache data for chain ${e}`);const s=k(r,r,"m",d).call(r,e);await this.messenger.call("StorageService:setItem",j,s,t)}catch(t){console.error(`TokenListController: Failed to save cache for ${e}:`,t)}},C=async function(e){const t=this.messenger.call("NetworkController:getNetworkClientById",e.selectedNetworkClientId),{chainId:s}=t.configuration;k(this,f,"f")!==s&&(k(this,g,"f").abort(),w(this,g,new AbortController,"f"),w(this,f,s,"f"))},_=function(){k(this,h,"f")&&clearInterval(k(this,h,"f"))},T=async function(){await(0,I.safelyExecute)(()=>this.fetchTokenList(k(this,f,"f"))),w(this,h,setInterval(async()=>{await(0,I.safelyExecute)(()=>this.fetchTokenList(k(this,f,"f")))},k(this,p,"f")),"f")},l={value:500},u={value:"tokensChainsCache"},s.default=O}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenListController.cjs"}],[1385,{"./assetsUtil.cjs":1389,"./token-prices-service/codefi-v2.cjs":1401,"@metamask/controller-utils":1639,"@metamask/polling-controller":2889,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},g=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.TokenRatesController=s.getDefaultTokenRatesControllerState=s.controllerName=void 0;const b=e("@metamask/controller-utils"),S=e("@metamask/polling-controller"),A=e("lodash"),y=e("./assetsUtil.cjs"),E=e("./token-prices-service/codefi-v2.cjs");s.controllerName="TokenRatesController";const C={marketData:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};s.getDefaultTokenRatesControllerState=()=>({marketData:{}});class _ extends((0,S.StaticIntervalPollingController)()){constructor({interval:e=18e4,disabled:t=!1,tokenPricesService:d,messenger:p,state:m}){super({name:s.controllerName,messenger:p,state:{...(0,s.getDefaultTokenRatesControllerState)(),...m},metadata:C}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),this.setIntervalLength(e),f(this,r,d,"f"),f(this,a,t,"f");const{allTokens:b,allDetectedTokens:S}=g(this,n,"m",h).call(this);f(this,i,b,"f"),f(this,o,S,"f"),g(this,n,"m",u).call(this),g(this,n,"m",c).call(this),g(this,n,"m",l).call(this)}enable(){f(this,a,!1,"f")}disable(){f(this,a,!0,"f")}async updateExchangeRates(e){if(g(this,a,"f"))return;const t={},s={},i={};for(const{chainId:t,nativeCurrency:a}of e)if(g(this,r,"f").validateChainIdSupported(t))for(const e of g(this,n,"m",d).call(this,t))g(this,r,"f").validateCurrencySupported(a)?(s[a]??(s[a]=[])).push({chainId:t,tokenAddress:e}):(i[a]??(i[a]=[])).push({chainId:t,tokenAddress:e});const o=[...Object.entries(s).map(([e,s])=>g(this,n,"m",p).call(this,s,e,t)),...Object.entries(i).map(([e,s])=>g(this,n,"m",m).call(this,s,e,t))];await Promise.allSettled(o);const c=new Set(Object.values(e).map(e=>e.chainId));for(const e of c)t[e]||(t[e]={});Object.keys(t).length>0&&this.update(e=>{e.marketData={...e.marketData,...t}})}async _executePoll({chainIds:e}){const{networkConfigurationsByChainId:t}=this.messenger.call("NetworkController:getState"),s=e.reduce((e,s)=>{const n=t[s];return n?(e.push({chainId:s,nativeCurrency:n.nativeCurrency}),e):(console.error(`TokenRatesController: No network configuration found for chainId ${s}`),e)},[]);await this.updateExchangeRates(s)}resetState(){this.update(()=>(0,s.getDefaultTokenRatesControllerState)())}}s.TokenRatesController=_,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(){this.messenger.subscribe("TokensController:stateChange",async({allTokens:e,allDetectedTokens:t})=>{if(g(this,a,"f"))return;const{networkConfigurationsByChainId:s}=this.messenger.call("NetworkController:getState"),n=[...new Set([...Object.keys(e),...Object.keys(t)])].filter(s=>!(0,A.isEqual)(g(this,i,"f")[s],e[s])||!(0,A.isEqual)(g(this,o,"f")[s],t[s]));f(this,i,e,"f"),f(this,o,t,"f");const r=n.reduce((e,t)=>{const n=s[t];return n?(e.push({chainId:t,nativeCurrency:n.nativeCurrency}),e):(console.error(`TokenRatesController: No network configuration found for chainId ${t}`),e)},[]);await this.updateExchangeRates(r)},({allTokens:e,allDetectedTokens:t})=>({allTokens:e,allDetectedTokens:t}))},l=function(){this.messenger.subscribe("NetworkController:stateChange",(e,t)=>{for(const e of t)if("remove"===e.op&&"networkConfigurationsByChainId"===e.path[0]){const t=e.path[1];this.update(e=>{delete e.marketData[t]})}})},u=function(){if(g(this,r,"f").setNativeAssetIdentifiers){const{nativeAssetIdentifiers:e}=this.messenger.call("NetworkEnablementController:getState");g(this,r,"f").setNativeAssetIdentifiers(e)}},d=function(e){const t=e=>Object.values(e??{}).flatMap(e=>e.map(({address:e})=>(0,b.toChecksumHexAddress)(e))),s=t(g(this,i,"f")[e]),n=t(g(this,o,"f")[e]);return[...new Set([...s,...n,(0,E.getNativeTokenAddress)(e)])].sort()},h=function(){const{allTokens:e,allDetectedTokens:t}=this.messenger.call("TokensController:getState");return{allTokens:e,allDetectedTokens:t}},p=async function(e,t,s={}){return await(0,y.reduceInBatchesSerially)({values:e,batchSize:y.TOKEN_PRICES_BATCH_SIZE,eachBatch:async(e,s)=>{var n;const a=await g(this,r,"f").fetchTokenPrices({assets:s,currency:t});for(const t of a)(e[n=t.chainId]??(e[n]={}))[t.tokenAddress]=t;return e},initialResult:s})},m=async function(e,t,s){const r=await g(this,n,"m",p).call(this,e,"usd"),a=(e,t)=>e/t;for(const[e,n]of Object.entries(r)){const r=n[(0,E.getNativeTokenAddress)(e)]?.price;if(r)for(const[i,o]of Object.entries(n))(s[e]??(s[e]={}))[i]={...o,currency:t,price:a(o.price,r),marketCap:a(o.marketCap,r),allTimeHigh:a(o.allTimeHigh,r),allTimeLow:a(o.allTimeLow,r),totalVolume:a(o.totalVolume,r),high1d:a(o.high1d,r),low1d:a(o.low1d,r),dilutedMarketCap:a(o.dilutedMarketCap,r)}}},s.default=_}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenRatesController.cjs"}],[1386,{"../assetsUtil.cjs":1389,"../token-service.cjs":1403,"@metamask/base-controller":1520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.TokenSearchDiscoveryDataController=s.getDefaultTokenSearchDiscoveryDataControllerState=s.MAX_TOKEN_DISPLAY_DATA_LENGTH=s.controllerName=void 0;const l=e("@metamask/base-controller"),u=e("../assetsUtil.cjs"),d=e("../token-service.cjs");s.controllerName="TokenSearchDiscoveryDataController",s.MAX_TOKEN_DISPLAY_DATA_LENGTH=10;const h={tokenDisplayData:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};function p(){return{tokenDisplayData:[]}}s.getDefaultTokenSearchDiscoveryDataControllerState=p;class m extends l.BaseController{constructor({state:e={},messenger:t,tokenPricesService:i}){super({name:s.controllerName,metadata:h,messenger:t,state:{tokenDisplayData:[],...e}}),n.add(this),r.set(this,void 0),a.set(this,void 0),o(this,r,new AbortController,"f"),o(this,a,i,"f")}async fetchTokenDisplayData(e,t){let a;try{a=await(0,d.fetchTokenMetadata)(e,t,c(this,r,"f").signal)}catch(e){if(!(e instanceof Error&&e.message.includes(d.TOKEN_METADATA_NO_SUPPORT_ERROR)))throw e}const{currentCurrency:o}=this.messenger.call("CurrencyRateController:getState");let l;if(a){const s=await c(this,n,"m",i).call(this,e,t);l={found:!0,address:t,chainId:e,currency:o,token:{...a,isERC721:!1,image:(0,u.formatIconUrlWithProxy)({chainId:e,tokenAddress:t})},price:s}}else l={found:!1,address:t,chainId:e,currency:o};this.update(n=>{n.tokenDisplayData=[l,...n.tokenDisplayData.filter(s=>s.address!==t||s.chainId!==e||s.currency!==o)].slice(0,s.MAX_TOKEN_DISPLAY_DATA_LENGTH)})}}s.TokenSearchDiscoveryDataController=m,r=new WeakMap,a=new WeakMap,n=new WeakSet,i=async function(e,t){const{currentCurrency:s}=this.messenger.call("CurrencyRateController:getState");try{return(await c(this,a,"f").fetchTokenPrices({assets:[{chainId:e,tokenAddress:t}],currency:s}))[0]??null}catch(e){return console.error(e),null}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenSearchDiscoveryDataController/TokenSearchDiscoveryDataController.cjs"}],[1387,{"./TokenSearchDiscoveryDataController.cjs":1386},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./TokenSearchDiscoveryDataController.cjs"),s)}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokenSearchDiscoveryDataController/index.cjs"}],[1388,{"./Standards/ERC20Standard.cjs":1379,"./Standards/NftStandards/ERC1155/ERC1155Standard.cjs":1380,"./assetsUtil.cjs":1389,"./token-service.cjs":1403,"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/base-controller":1520,"@metamask/contract-metadata":1636,"@metamask/controller-utils":1639,"@metamask/metamask-eth-abis":2597,"@metamask/rpc-errors":3026,"@metamask/utils":3554,"async-mutex":4345,lodash:5239,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},C=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},_=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.TokensController=s.getDefaultTokensState=void 0;const T=e("@ethersproject/contracts"),k=e("@ethersproject/providers"),w=e("@metamask/base-controller"),I=_(e("@metamask/contract-metadata")),v=e("@metamask/controller-utils"),N=e("@metamask/metamask-eth-abis"),P=e("@metamask/rpc-errors"),j=e("@metamask/utils"),R=e("async-mutex"),O=e("lodash"),x=e("uuid"),D=e("./assetsUtil.cjs"),M=e("./Standards/ERC20Standard.cjs"),L=e("./Standards/NftStandards/ERC1155/ERC1155Standard.cjs"),B=e("./token-service.cjs"),F=(...e)=>e.find(e=>"string"==typeof e&&""!==e.trim()),U={allTokens:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},allIgnoredTokens:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},allDetectedTokens:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},H="TokensController";s.getDefaultTokensState=()=>({allTokens:{},allIgnoredTokens:{},allDetectedTokens:{}});class W extends w.BaseController{constructor({provider:e,state:t,messenger:d}){super({name:H,metadata:U,messenger:d,state:{...(0,s.getDefaultTokensState)(),...t}}),n.add(this),r.set(this,new R.Mutex),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),E(this,i,e,"f"),E(this,a,C(this,n,"m",A).call(this).id,"f"),E(this,o,new AbortController,"f"),this.messenger.registerActionHandler(`${H}:addDetectedTokens`,this.addDetectedTokens.bind(this)),this.messenger.registerActionHandler(`${H}:addTokens`,this.addTokens.bind(this)),this.messenger.subscribe("AccountsController:selectedEvmAccountChange",C(this,n,"m",u).bind(this)),this.messenger.subscribe("NetworkController:stateChange",C(this,n,"m",l).bind(this)),this.messenger.subscribe("KeyringController:accountRemoved",e=>C(this,n,"m",c).call(this,e)),this.messenger.subscribe("TokenListController:stateChange",({tokensChainsCache:e})=>{const{allTokens:t}=this.state,s=C(this,n,"m",y).call(this),r=(0,O.cloneDeep)(t);for(const[t,n]of Object.entries(e)){const e=n?.data??{};if(r[t]&&r[t][s]){const n=r[t][s];for(const[,t]of Object.entries(n)){const s=e[t.address.toLowerCase()];s&&s.name&&!t.name&&(t.name=s.name),s?.rwaData&&(t.rwaData=s.rwaData)}}}this.update(()=>({...this.state,allTokens:r}))})}async addToken({address:e,symbol:t,decimals:s,name:a,image:i,interactingAddress:o,networkClientId:c,rwaData:l}){const u=await C(this,r,"f").acquire(),{allTokens:p,allIgnoredTokens:m,allDetectedTokens:f}=this.state,S=this.messenger.call("NetworkController:getNetworkClientById",c).configuration.chainId,A=C(this,n,"m",b).call(this,o);try{e=(0,v.toChecksumHexAddress)(e);const r=p[S]?.[A]??[],o=m[S]?.[A]??[],u=f[S]?.[A]??[],b=[...r],[y,E]=await Promise.all([C(this,n,"m",h).call(this,e,c),C(this,n,"m",d).call(this,e,S)]),_={address:e,symbol:t,decimals:s,image:i&&""!==i.trim()?i:(0,D.formatIconUrlWithProxy)({chainId:S,tokenAddress:e}),isERC721:y,aggregators:(0,D.formatAggregatorNames)(E?.aggregators??[]),name:a,...l!==undefined&&{rwaData:l}},T=b.findIndex(t=>t.address.toLowerCase()===e.toLowerCase());-1!==T?b[T]=_:b.push(_);const k=o.filter(t=>t.toLowerCase()!==e.toLowerCase()),w=u.filter(t=>t.address.toLowerCase()!==e.toLowerCase()),{newAllTokens:I,newAllIgnoredTokens:N,newAllDetectedTokens:P}=C(this,n,"m",g).call(this,{newTokens:b,newIgnoredTokens:k,newDetectedTokens:w,interactingAddress:A,interactingChainId:S}),j={allTokens:I,allIgnoredTokens:N,allDetectedTokens:P};return this.update(e=>{Object.assign(e,j)}),b}finally{u()}}async addTokens(e,t){const s=await C(this,r,"f").acquire(),{allTokens:a,allIgnoredTokens:i,allDetectedTokens:o}=this.state,c={},l=this.messenger.call("NetworkController:getNetworkClientById",t).configuration.chainId,u=[...a[l]?.[C(this,n,"m",A).call(this).address]??[],...e].reduce((e,t)=>(e[(0,v.toChecksumHexAddress)(t.address)]=t,e),{});try{e.forEach(e=>{const{address:t,symbol:s,decimals:n,image:r,aggregators:a,name:i,rwaData:o}=e,l=(0,v.toChecksumHexAddress)(t),d={address:l,symbol:s,decimals:n,image:r,aggregators:a,name:i,...o&&{rwaData:o}};return u[l]=d,c[t.toLowerCase()]=!0,d});const t=Object.values(u),s=i[l]?.[C(this,n,"m",y).call(this)]?.filter(e=>!u[(0,v.toChecksumHexAddress)(e)]),r=l?o?.[l]?.[C(this,n,"m",y).call(this)]:[],a=r?.filter(e=>!c[e.address.toLowerCase()]),{newAllTokens:d,newAllDetectedTokens:h,newAllIgnoredTokens:p}=C(this,n,"m",g).call(this,{newTokens:t,newDetectedTokens:a,newIgnoredTokens:s,interactingChainId:l});this.update(e=>{e.allTokens=d,e.allDetectedTokens=h,e.allIgnoredTokens=p})}finally{s()}}ignoreTokens(e,t){const s=this.messenger.call("NetworkController:getNetworkClientById",t).configuration.chainId,{allTokens:r,allDetectedTokens:a,allIgnoredTokens:i}=this.state,o={},c=i[s]?.[C(this,n,"m",y).call(this)]??[];let l=[...c];const u=r[s]?.[C(this,n,"m",y).call(this)]??[],d=a[s]?.[C(this,n,"m",y).call(this)]??[],h=e.map(e=>{const t=(0,v.toChecksumHexAddress)(e);return o[e.toLowerCase()]=!0,t});l=[...c,...h];const p=d.filter(e=>!o[e.address.toLowerCase()]),m=u.filter(e=>!o[e.address.toLowerCase()]),{newAllIgnoredTokens:f,newAllDetectedTokens:b,newAllTokens:S}=C(this,n,"m",g).call(this,{newIgnoredTokens:l,newDetectedTokens:p,newTokens:m,interactingChainId:s});this.update(e=>{e.allIgnoredTokens=f,e.allDetectedTokens=b,e.allTokens=S})}async addDetectedTokens(e,t){const s=await C(this,r,"f").acquire(),{chainId:a}=t,i=t?.selectedAddress??C(this,n,"m",y).call(this),{allTokens:o,allDetectedTokens:c,allIgnoredTokens:l}=this.state;let u=[...o?.[a]?.[i]??[]],d=[...c?.[a]?.[i]??[]];try{e.forEach(e=>{const{address:t,symbol:s,decimals:n,image:r,aggregators:o,isERC721:c,name:h,rwaData:p}=e,m=(0,v.toChecksumHexAddress)(t),f={address:m,symbol:s,decimals:n,image:r,isERC721:c,aggregators:o,name:h,...p&&{rwaData:p}},g=u.findIndex(e=>e.address.toLowerCase()===m.toLowerCase());if(-1!==g)u[g]=f;else{if(-1===(l?.[a]?.[i]?.indexOf(t)??-1)){const e=d.findIndex(e=>e.address.toLowerCase()===m.toLowerCase());-1!==e?d[e]=f:d.push(f)}}});const{newAllTokens:t,newAllDetectedTokens:s}=C(this,n,"m",g).call(this,{newTokens:u,newDetectedTokens:d,interactingAddress:i,interactingChainId:a}),r=C(this,n,"m",y).call(this);u=t?.[a]?.[r]??[],d=s?.[a]?.[r]??[],this.update(e=>{e.allTokens=t,e.allDetectedTokens=s})}finally{s()}}async updateTokenType(e,t){const s=this.messenger.call("NetworkController:getNetworkClientById",t).configuration.chainId,r=await C(this,n,"m",h).call(this,e,t),a=C(this,n,"m",y).call(this),i=[...this.state.allTokens[s][a]],o=i.findIndex(t=>t.address.toLowerCase()===e.toLowerCase()),c={...i[o],isERC721:r};return i[o]=c,this.update(e=>{e.allTokens[s][a]=i}),c}async watchAsset({asset:e,type:t,interactingAddress:s,networkClientId:r,origin:a,pageMeta:i,requestMetadata:o}){if(t!==v.ERC20)throw new Error(`Asset of type ${t} not supported`);if(!e.address)throw P.rpcErrors.invalidParams("Address must be specified");if(!(0,v.isValidHexAddress)(e.address))throw P.rpcErrors.invalidParams(`Invalid address "${e.address}"`);const c=C(this,n,"m",b).call(this,s);if(await C(this,n,"m",h).call(this,e.address,r))throw P.rpcErrors.invalidParams(`Contract ${e.address} must match type ${t}, but was detected as ${v.ERC721}`);const l=C(this,n,"m",p).call(this,r);if(await(0,v.safelyExecute)(()=>new L.ERC1155Standard(l).contractSupportsBase1155Interface(e.address)))throw P.rpcErrors.invalidParams(`Contract ${e.address} must match type ${t}, but was detected as ${v.ERC1155}`);const u=new M.ERC20Standard(l),[d,m,g]=await Promise.all([(0,v.safelyExecute)(()=>u.getTokenName(e.address)),(0,v.safelyExecute)(()=>u.getTokenSymbol(e.address)),(0,v.safelyExecute)(async()=>u.getTokenDecimals(e.address))]);if(e.name=d,!e.symbol&&!m)throw P.rpcErrors.invalidParams("A symbol is required, but was not found in either the request or contract");if(m!==undefined&&e.symbol!==undefined&&e.symbol.toUpperCase()!==m.toUpperCase())throw P.rpcErrors.invalidParams(`The symbol in the request (${e.symbol}) does not match the symbol in the contract (${m})`);if(e.symbol=m??e.symbol,"string"!=typeof e.symbol)throw P.rpcErrors.invalidParams("Invalid symbol: not a string");if(e.symbol.length>11)throw P.rpcErrors.invalidParams(`Invalid symbol "${e.symbol}": longer than 11 characters`);if(e.decimals===undefined&&g===undefined)throw P.rpcErrors.invalidParams("Decimals are required, but were not found in either the request or contract");if(g!==undefined&&e.decimals!==undefined&&String(e.decimals)!==g)throw P.rpcErrors.invalidParams(`The decimals in the request (${e.decimals}) do not match the decimals in the contract (${g})`);const A=g??e.decimals,y=parseInt(A,10);if(!Number.isInteger(y)||y>36||y<0)throw P.rpcErrors.invalidParams(`Invalid decimals "${A}": must be an integer 0 <= 36`);e.decimals=y;const E={asset:e,id:C(this,n,"m",f).call(this),time:Date.now(),type:t,interactingAddress:c,origin:F(o?.origin,a),pageMeta:o?.pageMeta??i};await C(this,n,"m",S).call(this,E);const{address:_,symbol:T,decimals:k,name:w,image:I,rwaData:N}=e;await this.addToken({address:_,symbol:T,decimals:k,name:w,image:I,interactingAddress:E.interactingAddress,networkClientId:r,rwaData:N})}clearIgnoredTokens(){this.update(e=>{e.allIgnoredTokens={}})}resetState(){this.update(()=>(0,s.getDefaultTokensState)())}}s.TokensController=W,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e){if(!((0,j.isStrictHexString)(e.toLowerCase())&&(0,v.isValidHexAddress)(e)))return;const{allTokens:t,allIgnoredTokens:s,allDetectedTokens:n}=this.state,r=(0,O.cloneDeep)(t),a=(0,O.cloneDeep)(n),i=(0,O.cloneDeep)(s);for(const t of Object.keys(r))r[t][e]&&delete r[t][e];for(const t of Object.keys(a))a[t][e]&&delete a[t][e];for(const t of Object.keys(i))i[t][e]&&delete i[t][e];this.update(e=>{e.allTokens=r,e.allIgnoredTokens=i,e.allDetectedTokens=a})},l=function(e,t){for(const e of t)if("remove"===e.op&&"networkConfigurationsByChainId"===e.path[0]){const t=e.path[1];this.update(e=>{delete e.allTokens[t],delete e.allIgnoredTokens[t],delete e.allDetectedTokens[t]})}},u=function(e){E(this,a,e.id,"f")},d=async function(e,t){try{return await(0,B.fetchTokenMetadata)(t,e,C(this,o,"f").signal)}catch(e){if(e instanceof Error&&e.message.includes(B.TOKEN_METADATA_NO_SUPPORT_ERROR))return undefined;throw e}},h=async function(e,t){const s=(0,v.toChecksumHexAddress)(e);if(!0===I.default[s]?.erc721)return Promise.resolve(!0);if(!0===I.default[s]?.erc20)return Promise.resolve(!1);const r=C(this,n,"m",m).call(this,e,N.abiERC721,t);try{return await r.supportsInterface(v.ERC721_INTERFACE_ID)}catch(e){return!1}},p=function(e){return new k.Web3Provider(e?this.messenger.call("NetworkController:getNetworkClientById",e).provider:C(this,i,"f"))},m=function(e,t,s){const r=C(this,n,"m",p).call(this,s);return new T.Contract(e,t,r)},f=function(){return(0,x.v1)()},g=function(e){const{newTokens:t,newIgnoredTokens:s,newDetectedTokens:r,interactingAddress:a,interactingChainId:i}=e,{allTokens:o,allIgnoredTokens:c,allDetectedTokens:l}=this.state,u=C(this,n,"m",b).call(this,a);let d=o;if(t?.length||t&&o&&o[i]&&o[i][u]){const e={...o[i],[u]:t};d={...o,[i]:e}}let h=c;if(s?.length||s&&c&&c[i]&&c[i][u]){const e={...c[i],[u]:s};h={...c,[i]:e}}let p=l;if(r?.length||r&&l&&l[i]&&l[i][u]){const e={...l[i],[u]:r};p={...l,[i]:e}}return{newAllTokens:d,newAllIgnoredTokens:h,newAllDetectedTokens:p}},b=function(e){return e||C(this,n,"m",y).call(this)},S=async function(e){const t={id:e.id,interactingAddress:e.interactingAddress,asset:{address:e.asset.address,decimals:e.asset.decimals,symbol:e.asset.symbol,image:e.asset.image&&""!==e.asset.image.trim()?e.asset.image:null}};return e.pageMeta&&(t.metadata={pageMeta:e.pageMeta}),this.messenger.call("ApprovalController:addRequest",{id:e.id,origin:F(e.origin)??v.ORIGIN_METAMASK,type:v.ApprovalType.WatchAsset,requestData:t},!0)},A=function(){return this.messenger.call("AccountsController:getSelectedAccount")},y=function(){const e=this.messenger.call("AccountsController:getAccount",C(this,a,"f"));return e?.address??""},s.default=W}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/TokensController.cjs"}],[1389,{"./token-prices-service/index.cjs":1402,"@metamask/controller-utils":1639,"@metamask/utils":3554,"bn.js":4413,"multiformats/cid":5418},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.accountAddressToCaipReference=s.getKeyByValue=s.fetchTokenContractExchangeRates=s.reduceInBatchesSerially=s.divideIntoBatches=s.ethersBigNumberToBN=s.addUrlProtocolPrefix=s.getFormattedIpfsUrl=s.getIpfsCIDv1AndPath=s.removeIpfsProtocolPrefix=s.isTokenListSupportedForNetwork=s.isTokenDetectionSupportedForNetwork=s.SupportedStakedBalanceNetworks=s.SupportedTokenDetectionNetworks=s.formatIconUrlWithProxy=s.formatAggregatorNames=s.hasNewCollectionFields=s.compareNftMetadata=s.TOKEN_PRICES_BATCH_SIZE=void 0;const r=e("@metamask/controller-utils"),a=e("@metamask/utils"),i=n(e("bn.js")),o=e("multiformats/cid"),c=e("./token-prices-service/index.cjs");s.TOKEN_PRICES_BATCH_SIZE=30,s.compareNftMetadata=function(e,t){return["image","backgroundColor","imagePreview","imageThumbnail","imageOriginal","animation","animationOriginal","externalLink","tokenURI","chainId"].reduce((s,n)=>e[n]&&e[n]!==t[n]?s+1:s,0)>0},s.hasNewCollectionFields=function(e,t){const s=Object.keys(e.collection??{}),n=new Set(Object.keys(t.collection??{}));return s.some(e=>!n.has(e))};const l={aave:"Aave",bancor:"Bancor",cmc:"CMC",cryptocom:"Crypto.com",coinGecko:"CoinGecko",oneInch:"1inch",paraswap:"Paraswap",pmm:"PMM",zapper:"Zapper",zerion:"Zerion",zeroEx:"0x",synthetix:"Synthetix",yearn:"Yearn",apeswap:"ApeSwap",binanceDex:"BinanceDex",pancakeTop100:"PancakeTop100",pancakeExtended:"PancakeExtended",balancer:"Balancer",quickswap:"QuickSwap",matcha:"Matcha",pangolinDex:"PangolinDex",pangolinDexStableCoin:"PangolinDexStableCoin",pangolinDexAvaxBridge:"PangolinDexAvaxBridge",traderJoe:"TraderJoe",airswapLight:"AirswapLight",kleros:"Kleros"};s.formatAggregatorNames=e=>e.map(e=>l[e]||`${e[0].toUpperCase()}${e.substring(1,e.length)}`);var u,d;function h(e){return Object.values(u).includes(e)}function p(e){if(e.startsWith("ipfs://ipfs/"))return e.replace("ipfs://ipfs/","");if(e.startsWith("ipfs://"))return e.replace("ipfs://","");throw new Error("this method should not be used with non ipfs urls")}async function m(e){const t=p(e),s=t.indexOf("/"),n=-1!==s?t.substring(0,s):t,r=-1!==s?t.substring(s):undefined;return{cid:o.CID.parse(n).toV1().toString(),path:r}}function f(e){return e.match(/(^http:\/\/)|(^https:\/\/)/u)?e:`https://${e}`}function g(e,{batchSize:t}){const s=[];for(let n=0;n<e.length;n+=t)s.push(e.slice(n,n+t));return s}async function b({values:e,batchSize:t,eachBatch:s,initialResult:n}){const r=g(e,{batchSize:t});let a=n;for(const[e,t]of r.entries())a=await s(a,t,e);return a}s.formatIconUrlWithProxy=({chainId:e,tokenAddress:t})=>`https://static.cx.metamask.io/api/v1/tokenIcons/${(0,r.convertHexToDecimal)(e).toString()}/${t.toLowerCase()}.png`,function(e){e.Mainnet="0x1",e.Bsc="0x38",e.Polygon="0x89",e.Avax="0xa86a",e.Aurora="0x4e454152",e.LineaGoerli="0xe704",e.LineaMainnet="0xe708",e.Arbitrum="0xa4b1",e.Optimism="0xa",e.Base="0x2105",e.Zksync="0x144",e.Cronos="0x19",e.Celo="0xa4ec",e.Gnosis="0x64",e.Fantom="0xfa",e.PolygonZkevm="0x44d",e.Moonbeam="0x504",e.Moonriver="0x505",e.Sei="0x531",e.MonadMainnet="0x8f",e.Hyperevm="0x3e7"}(u||(s.SupportedTokenDetectionNetworks=u={})),function(e){e.Mainnet="0x1",e.Hoodi="0x88bb0"}(d||(s.SupportedStakedBalanceNetworks=d={})),s.isTokenDetectionSupportedForNetwork=h,s.isTokenListSupportedForNetwork=function(e){return h(e)},s.removeIpfsProtocolPrefix=p,s.getIpfsCIDv1AndPath=m,s.getFormattedIpfsUrl=async function(e,t,s){const{host:n,protocol:r,origin:a}=new URL(f(e));if(s){const{cid:e,path:s}=await m(t);return`${r}//${e}.ipfs.${n}${s??""}`}return`${a}/ipfs/${p(t)}`},s.addUrlProtocolPrefix=f,s.ethersBigNumberToBN=function(e){return new i.default((0,a.remove0x)(e.toHexString()),"hex")},s.divideIntoBatches=g,s.reduceInBatchesSerially=b,s.fetchTokenContractExchangeRates=async function({tokenPricesService:e,nativeCurrency:t,tokenAddresses:n,chainId:a}){const i=e.validateChainIdSupported(a),o=e.validateCurrencySupported(t);if(!i||!o)return{};const l=await b({values:[...n,(0,c.getNativeTokenAddress)(a)].sort(),batchSize:s.TOKEN_PRICES_BATCH_SIZE,eachBatch:async(s,n)=>({...s,...(await e.fetchTokenPrices({assets:n.map(e=>({chainId:a,tokenAddress:e})),currency:t})).reduce((e,t)=>(e[t.tokenAddress]=t,e),{})}),initialResult:{}});return Object.entries(l).reduce((e,[t,s])=>({...e,[(0,r.toChecksumHexAddress)(t)]:s?.price}),{})},s.getKeyByValue=function(e,t){for(const[s,n]of e.entries())if(n===t)return s;return null},s.accountAddressToCaipReference=function(e,t){return`${(0,a.toCaipChainId)(a.KnownCaipNamespace.Eip155,(0,a.hexToNumber)(e).toString())}:${t}`}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/assetsUtil.cjs"}],[1390,{"./AssetsContractController.cjs":1361,"./token-prices-service/codefi-v2.cjs":1401,"@metamask/account-api":1264,"@metamask/keyring-api":2510,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateBalanceChangeForAccountGroup=s.calculateBalanceChangeForAllWallets=s.calculateBalanceForAllWallets=void 0;const n=e("@metamask/account-api"),r=e("@metamask/keyring-api"),a=e("@metamask/utils"),i=e("./AssetsContractController.cjs"),o=e("./token-prices-service/codefi-v2.cjs"),c={"1d":"pricePercentChange1d","7d":"pricePercentChange7d","30d":"pricePercentChange30d"},l={"1d":"P1D","7d":"P7D","30d":"P30D"},u=(e,t)=>{if(!e)return!0;if((0,a.isStrictHexString)(t))return Boolean(e[a.KnownCaipNamespace.Eip155]?.[t]);const{namespace:s}=(0,a.parseCaipChainId)(t);return Boolean(e[s]?.[t])},d=(e,t,s)=>{const r=(0,n.parseAccountGroupId)(s).wallet.id,a=e.accountTree.wallets[r];if(!a)return[];const i=a.groups[s];return i?i.accounts.map(e=>t.internalAccounts.accounts[e]).filter(Boolean):[]},h=e=>"number"==typeof e&&!Number.isNaN(e);function p(e,t,s,n,r,a){const c=t.tokenBalances[e.address]??{};return Object.entries(c).filter(([e])=>a(e)).flatMap(([e,t])=>Object.entries(t).map(([t,s])=>({chainId:e,tokenAddress:t,balance:s}))).map(t=>{const{chainId:a,tokenAddress:c,balance:l}=t,u=i.STAKING_CONTRACT_ADDRESS_BY_CHAINID[a],d="0x0000000000000000000000000000000000000000"===c,p=!!u&&c.toLowerCase()===u.toLowerCase();if(!d&&!p){const t=s?.allTokens?.[a]?.[e.address],n=t?.find(e=>e.address===c);if(!n)return null}const m=d||p?(0,o.getNativeTokenAddress)(a):c,f=n?.marketData?.[a]?.[m];if(!f?.price)return null;const g=r.currencyRates[f.currency]?.conversionRate;if(!g)return null;let b=18;if(!d&&!p){const t=s?.allTokens?.[a]?.[e.address],n=t?.find(e=>e.address===c);b=h(n?.decimals)?n?.decimals:18}const S=parseInt(l,16);if(!h(S))return null;return{userCurrencyValue:S/Math.pow(10,b)*f.price*g,tokenMarketData:f}}).filter(e=>null!==e)}function m(e,t,s,n,r){const a=t.balances[e.id]??{},i=s.allIgnoredAssets[e.id]||[];return Object.entries(a).filter(([e])=>r(e)&&!i.includes(e)).map(([e,t])=>{const s=parseFloat(t.amount);if(Number.isNaN(s))return null;const r=n.conversionRates[e];if(!r)return null;const a=parseFloat(r.rate);if(Number.isNaN(a))return null;return{assetId:e,userCurrencyValue:s*a,conversionRate:r}}).filter(e=>null!==e)}function f(e,t,s,n,r,a,i){return p(e,s,n,r,a,i).map(e=>{const s=e.tokenMarketData[c[t]];if(!h(s))return null;const n=Number((1+s/100).toFixed(8));return 0===n?null:{current:e.userCurrencyValue,previous:e.userCurrencyValue/n}}).filter(e=>null!==e).reduce((e,t)=>(e.current+=t.current,e.previous+=t.previous,e),{current:0,previous:0})}function g(e,t,s,n,r,a){return m(e,s,n,r,a).map(e=>{const s=e.conversionRate?.marketData,n=s?.pricePercentChange,r=n?.[l[t]];if(!h(r))return null;const a=Number((1+r/100).toFixed(8));return 0===a?null:{current:e.userCurrencyValue,previous:e.userCurrencyValue/a}}).filter(e=>null!==e).reduce((e,t)=>({current:e.current+t.current,previous:e.previous+t.previous}),{current:0,previous:0})}s.calculateBalanceForAllWallets=function(e,t,s,n,i,o,c,l,h,f){const g=e=>u(f,e),b=e=>u(f,(0,a.parseCaipAssetType)(e).chainId),S=e=>function(e,t,s,n,r,a){return p(e,t,s,n,r,a).reduce((e,t)=>e+t.userCurrencyValue,0)}(e,s,l,n,h,g),A=e=>function(e,t,s,n,r){return m(e,t,s,n,r).reduce((e,t)=>e+t.userCurrencyValue,0)}(e,o,c,i,b),y=Object.entries(e.accountTree.wallets??{}).flatMap(([s,n])=>Object.keys(n?.groups||{}).flatMap(n=>d(e,t,n).map(e=>({walletId:s,groupId:n,account:e,isEvm:(0,r.isEvmAccountType)(e.type)})))).map(e=>{const t=e;return t.balance=e.isEvm?S(e.account):A(e.account),t});return{wallets:(t=>{const s={},n=e=>({walletId:e,groups:{},totalBalanceInUserCurrency:0,userCurrency:h.currentCurrency}),r=(e,t)=>({walletId:e,groupId:t,totalBalanceInUserCurrency:0,userCurrency:h.currentCurrency});return t.forEach(e=>{var t;const{walletId:a,groupId:i,balance:o}=e;s[a]??(s[a]=n(a)),(t=s[a].groups)[i]??(t[i]=r(a,i)),s[a].groups[i].totalBalanceInUserCurrency+=o,s[a].totalBalanceInUserCurrency+=o}),Object.entries(e.accountTree.wallets??{}).forEach(([e,t])=>{t&&(s[e]??(s[e]=n(e)),Object.keys(t.groups||{}).forEach(t=>{var n;(n=s[e].groups)[t]??(n[t]=r(e,t))}))}),s})(y),totalBalanceInUserCurrency:(E=y,E.reduce((e,t)=>e+t.balance,0)),userCurrency:h.currentCurrency};var E},s.calculateBalanceChangeForAllWallets=function(e,t,s,n,i,o,c,l,h,p,m){const b=e=>u(p,e),S=e=>{const{chainId:t}=(0,a.parseCaipAssetType)(e);return u(p,t)},A=e=>f(e,m,s,l,n,h,b),y=e=>g(e,m,o,c,i,S),E=(e=>e.reduce((e,t)=>(e.current+=t.current,e.previous+=t.previous,e),{current:0,previous:0}))(Object.entries(e.accountTree.wallets??{}).flatMap(([s,n])=>Object.keys(n?.groups||{}).flatMap(n=>d(e,t,n).map(e=>({walletId:s,groupId:n,account:e,isEvm:(0,r.isEvmAccountType)(e.type)})))).map(e=>{const t=e,s=e.isEvm?A(e.account):y(e.account);return t.current=s.current,t.previous=s.previous,t})),C=E.current-E.previous,_=0!==E.previous?C/E.previous*100:0;return{period:m,currentTotalInUserCurrency:Number(E.current.toFixed(8)),previousTotalInUserCurrency:Number(E.previous.toFixed(8)),amountChangeInUserCurrency:Number(C.toFixed(8)),percentChange:Number(_.toFixed(8)),userCurrency:h.currentCurrency}},s.calculateBalanceChangeForAccountGroup=function(e,t,s,n,i,o,c,l,h,p,m,b){const S=e=>u(p,e),A=e=>{const{chainId:t}=(0,a.parseCaipAssetType)(e);return u(p,t)},y=e=>f(e,b,s,l,n,h,S),E=e=>g(e,b,o,c,i,A),C=(e=>e.reduce((e,{account:t,isEvm:s})=>{const n=s?y(t):E(t);return e.current+=n.current,e.previous+=n.previous,e},{current:0,previous:0}))(d(e,t,m).map(e=>({account:e,isEvm:(0,r.isEvmAccountType)(e.type)}))),_=C.current-C.previous,T=0!==C.previous?_/C.previous*100:0;return{period:b,currentTotalInUserCurrency:Number(C.current.toFixed(8)),previousTotalInUserCurrency:Number(C.previous.toFixed(8)),amountChangeInUserCurrency:Number(_.toFixed(8)),percentChange:Number(T.toFixed(8)),userCurrency:h.currentCurrency}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/balances.cjs"}],[1391,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n;Object.defineProperty(s,"__esModule",{value:!0}),s.SUPPORTED_NETWORKS_ACCOUNTS_API_V4=s.Source=void 0,function(e){e.Custom="custom",e.Dapp="dapp",e.Detected="detected"}(n||(s.Source=n={})),s.SUPPORTED_NETWORKS_ACCOUNTS_API_V4=["0x1","0x89","0x38","0xe728","0x2105","0xa","0xa4b1","0x82750","0x531","0x8f","0x3e7"]}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/constants.cjs"}],[1392,{"../assetsUtil.cjs":1389,"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchMultiExchangeRate=s.fetchExchangeRate=void 0;const n=e("@metamask/controller-utils"),r=e("../assetsUtil.cjs"),a=new Map([["MNT","MANTLE"],["OMNI","OMNINET"]]),i="https://min-api.cryptocompare.com";function o(e){if("Error"===e.Response)throw new Error(e.Message)}s.fetchExchangeRate=async function(e,t,s){e=e.toUpperCase(),t=t.toUpperCase(),e=a.get(e)??e,t=a.get(t)??t;const r=await(0,n.handleFetch)(function(e,t,s){return`${i}/data/price?fsym=${t}&tsyms=${e}`+(s&&"USD"!==e.toUpperCase()?",USD":"")}(e,t,s));o(r);const c=Number(r[e.toUpperCase()]),l=Number(r.USD);if(!Number.isFinite(c))throw new Error(`Invalid response for ${e.toUpperCase()}: ${r[e.toUpperCase()]}`);if(s&&!Number.isFinite(l))throw new Error(`Invalid response for usdConversionRate: ${r.USD}`);return{conversionRate:c,usdConversionRate:l}},s.fetchMultiExchangeRate=async function(e,t,s){const c=function(e,t,s=!1){const n=s&&!t.some(e=>"USD"===e.toUpperCase())?[...t,"USD"]:t,r=new URLSearchParams;r.append("fsyms",e.join(",")),r.append("tsyms",n.join(","));const a=new URL(`${i}/data/pricemulti`);return a.search=r.toString(),a.toString()}(t.map(e=>a.get(e)??e),[e],s),l=await(0,n.handleFetch)(c);o(l);const u={};for(const[t,n]of Object.entries(l)){const i=(0,r.getKeyByValue)(a,t);u[i?.toLowerCase()??t.toLowerCase()]={[e.toLowerCase()]:n[e.toUpperCase()],...s&&{usd:n.USD}}}return u}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/crypto-compare-service/crypto-compare.cjs"}],[1393,{"./crypto-compare.cjs":1392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchMultiExchangeRate=s.fetchExchangeRate=void 0;var n=e("./crypto-compare.cjs");Object.defineProperty(s,"fetchExchangeRate",{enumerable:!0,get:function(){return n.fetchExchangeRate}}),Object.defineProperty(s,"fetchMultiExchangeRate",{enumerable:!0,get:function(){return n.fetchMultiExchangeRate}})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/crypto-compare-service/index.cjs"}],[1394,{"./AccountTrackerController.cjs":1360,"./AssetsContractController.cjs":1361,"./CurrencyRateController.cjs":1362,"./DeFiPositionsController/DeFiPositionsController.cjs":1363,"./MultichainAssetsController/index.cjs":1368,"./MultichainAssetsRatesController/index.cjs":1372,"./MultichainBalancesController/index.cjs":1374,"./NftController.cjs":1375,"./NftDetectionController.cjs":1376,"./RatesController/index.cjs":1378,"./TokenBalancesController.cjs":1382,"./TokenDetectionController.cjs":1383,"./TokenListController.cjs":1384,"./TokenRatesController.cjs":1385,"./TokenSearchDiscoveryDataController/index.cjs":1387,"./TokensController.cjs":1388,"./assetsUtil.cjs":1389,"./balances.cjs":1390,"./selectors/token-selectors.cjs":1400,"./token-prices-service/index.cjs":1402,"./token-service.cjs":1403,"./utils/formatters.cjs":1404},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),s.createFormatters=s.selectAllAssets=s.selectAssetsBySelectedAccountGroup=s.calculateBalanceChangeForAccountGroup=s.calculateBalanceChangeForAllWallets=s.calculateBalanceForAllWallets=s.DeFiPositionsController=s.TokenSearchDiscoveryDataController=s.getDefaultMultichainAssetsRatesControllerState=s.MultichainAssetsRatesController=s.getDefaultMultichainAssetsControllerState=s.MultichainAssetsController=s.MultichainBalancesController=s.Cryptocurrency=s.RatesController=s.getTrendingTokens=s.searchTokens=s.getNativeTokenAddress=s.SUPPORTED_CHAIN_IDS=s.CodefiTokenPricesServiceV2=s.getKeyByValue=s.fetchTokenContractExchangeRates=s.getFormattedIpfsUrl=s.formatIconUrlWithProxy=s.isTokenDetectionSupportedForNetwork=s.TokensController=s.TokenRatesController=s.getDefaultTokenRatesControllerState=s.TokenListController=s.TokenDetectionController=s.TokenBalancesController=s.NftDetectionController=s.NftController=s.getDefaultNftControllerState=s.AssetsContractController=s.SINGLE_CALL_BALANCES_ADDRESS_BY_CHAINID=s.AccountTrackerController=void 0;var a=e("./AccountTrackerController.cjs");Object.defineProperty(s,"AccountTrackerController",{enumerable:!0,get:function(){return a.AccountTrackerController}});var i=e("./AssetsContractController.cjs");Object.defineProperty(s,"SINGLE_CALL_BALANCES_ADDRESS_BY_CHAINID",{enumerable:!0,get:function(){return i.SINGLE_CALL_BALANCES_ADDRESS_BY_CHAINID}}),Object.defineProperty(s,"AssetsContractController",{enumerable:!0,get:function(){return i.AssetsContractController}}),r(e("./CurrencyRateController.cjs"),s);var o=e("./NftController.cjs");Object.defineProperty(s,"getDefaultNftControllerState",{enumerable:!0,get:function(){return o.getDefaultNftControllerState}}),Object.defineProperty(s,"NftController",{enumerable:!0,get:function(){return o.NftController}});var c=e("./NftDetectionController.cjs");Object.defineProperty(s,"NftDetectionController",{enumerable:!0,get:function(){return c.NftDetectionController}});var l=e("./TokenBalancesController.cjs");Object.defineProperty(s,"TokenBalancesController",{enumerable:!0,get:function(){return l.TokenBalancesController}});var u=e("./TokenDetectionController.cjs");Object.defineProperty(s,"TokenDetectionController",{enumerable:!0,get:function(){return u.TokenDetectionController}});var d=e("./TokenListController.cjs");Object.defineProperty(s,"TokenListController",{enumerable:!0,get:function(){return d.TokenListController}});var h=e("./TokenRatesController.cjs");Object.defineProperty(s,"getDefaultTokenRatesControllerState",{enumerable:!0,get:function(){return h.getDefaultTokenRatesControllerState}}),Object.defineProperty(s,"TokenRatesController",{enumerable:!0,get:function(){return h.TokenRatesController}});var p=e("./TokensController.cjs");Object.defineProperty(s,"TokensController",{enumerable:!0,get:function(){return p.TokensController}});var m=e("./assetsUtil.cjs");Object.defineProperty(s,"isTokenDetectionSupportedForNetwork",{enumerable:!0,get:function(){return m.isTokenDetectionSupportedForNetwork}}),Object.defineProperty(s,"formatIconUrlWithProxy",{enumerable:!0,get:function(){return m.formatIconUrlWithProxy}}),Object.defineProperty(s,"getFormattedIpfsUrl",{enumerable:!0,get:function(){return m.getFormattedIpfsUrl}}),Object.defineProperty(s,"fetchTokenContractExchangeRates",{enumerable:!0,get:function(){return m.fetchTokenContractExchangeRates}}),Object.defineProperty(s,"getKeyByValue",{enumerable:!0,get:function(){return m.getKeyByValue}});var f=e("./token-prices-service/index.cjs");Object.defineProperty(s,"CodefiTokenPricesServiceV2",{enumerable:!0,get:function(){return f.CodefiTokenPricesServiceV2}}),Object.defineProperty(s,"SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return f.SUPPORTED_CHAIN_IDS}}),Object.defineProperty(s,"getNativeTokenAddress",{enumerable:!0,get:function(){return f.getNativeTokenAddress}});var g=e("./token-service.cjs");Object.defineProperty(s,"searchTokens",{enumerable:!0,get:function(){return g.searchTokens}}),Object.defineProperty(s,"getTrendingTokens",{enumerable:!0,get:function(){return g.getTrendingTokens}});var b=e("./RatesController/index.cjs");Object.defineProperty(s,"RatesController",{enumerable:!0,get:function(){return b.RatesController}}),Object.defineProperty(s,"Cryptocurrency",{enumerable:!0,get:function(){return b.Cryptocurrency}});var S=e("./MultichainBalancesController/index.cjs");Object.defineProperty(s,"MultichainBalancesController",{enumerable:!0,get:function(){return S.MultichainBalancesController}});var A=e("./MultichainAssetsController/index.cjs");Object.defineProperty(s,"MultichainAssetsController",{enumerable:!0,get:function(){return A.MultichainAssetsController}}),Object.defineProperty(s,"getDefaultMultichainAssetsControllerState",{enumerable:!0,get:function(){return A.getDefaultMultichainAssetsControllerState}});var y=e("./MultichainAssetsRatesController/index.cjs");Object.defineProperty(s,"MultichainAssetsRatesController",{enumerable:!0,get:function(){return y.MultichainAssetsRatesController}}),Object.defineProperty(s,"getDefaultMultichainAssetsRatesControllerState",{enumerable:!0,get:function(){return y.getDefaultMultichainAssetsRatesControllerState}});var E=e("./TokenSearchDiscoveryDataController/index.cjs");Object.defineProperty(s,"TokenSearchDiscoveryDataController",{enumerable:!0,get:function(){return E.TokenSearchDiscoveryDataController}});var C=e("./DeFiPositionsController/DeFiPositionsController.cjs");Object.defineProperty(s,"DeFiPositionsController",{enumerable:!0,get:function(){return C.DeFiPositionsController}});var _=e("./balances.cjs");Object.defineProperty(s,"calculateBalanceForAllWallets",{enumerable:!0,get:function(){return _.calculateBalanceForAllWallets}});var T=e("./balances.cjs");Object.defineProperty(s,"calculateBalanceChangeForAllWallets",{enumerable:!0,get:function(){return T.calculateBalanceChangeForAllWallets}}),Object.defineProperty(s,"calculateBalanceChangeForAccountGroup",{enumerable:!0,get:function(){return T.calculateBalanceChangeForAccountGroup}});var k=e("./selectors/token-selectors.cjs");Object.defineProperty(s,"selectAssetsBySelectedAccountGroup",{enumerable:!0,get:function(){return k.selectAssetsBySelectedAccountGroup}}),Object.defineProperty(s,"selectAllAssets",{enumerable:!0,get:function(){return k.selectAllAssets}});var w=e("./utils/formatters.cjs");Object.defineProperty(s,"createFormatters",{enumerable:!0,get:function(){return w.createFormatters}})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/index.cjs"}],[1395,{"../AssetsContractController.cjs":1361,"../assetsUtil.cjs":1389,"../constants.cjs":1391,"./multi-chain-accounts.cjs":1396,"@ethersproject/contracts":786,"@metamask/controller-utils":1639,"@metamask/utils":3554,"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},u=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccountsApiBalanceFetcher=void 0;const h=e("@ethersproject/contracts"),p=e("@metamask/controller-utils"),m=e("@metamask/utils"),f=d(e("bn.js")),g=e("./multi-chain-accounts.cjs"),b=e("../AssetsContractController.cjs"),S=e("../assetsUtil.cjs"),A=e("../constants.cjs"),y=e=>(0,p.toChecksumHexAddress)(e),E=(e,t)=>(0,S.accountAddressToCaipReference)(e,t);s.AccountsApiBalanceFetcher=class{constructor(e="extension",t,s){n.add(this),r.set(this,"extension"),a.set(this,void 0),i.set(this,void 0),l(this,r,e,"f"),l(this,a,t,"f"),l(this,i,s,"f")}supports(e){return A.SUPPORTED_NETWORKS_ACCOUNTS_API_V4.includes(e)}async fetch({chainIds:e,queryAllAccounts:t,selectedAccount:s,allAccounts:r,jwtToken:a}){const l=[];for(const n of e.filter(e=>this.supports(e)))t?r.forEach(e=>l.push(E(n,e.address))):l.push(E(n,s));if(!l.length)return{balances:[]};const d=await(0,p.safelyExecuteWithTimeout)(()=>u(this,n,"m",c).call(this,l,a),!1,1e4);if(!d)throw new Error("Accounts API request timed out or failed");const h=d.unprocessedNetworks?.length?d.unprocessedNetworks.map(e=>"string"==typeof e?(0,p.toHex)((0,m.parseCaipChainId)(e).reference):(0,p.toHex)(e)):undefined,g=await u(this,n,"m",o).call(this,l),b=[],S=new Map;l.forEach(e=>{const[,t,s]=e.split(":"),n=(0,p.toHex)(parseInt(t,10)),r=y(s);S.has(r)||S.set(r,new Set),S.get(r)?.add(n)});const A="0x0000000000000000000000000000000000000000",C=new Map,_=new Map;if(d.balances){const e=d.balances.flatMap(e=>{const t=e.accountAddress?.split(":")[2];if(!t)return[];const s=y(t),n=y(e.address),r=n===A?s:t,a=(0,p.toHex)(e.chainId);let i;try{const{balance:t,decimals:s}=e,[n="0",r=""]=t.split("."),a=n+r.padEnd(s,"0").slice(0,s);i=new f.default(a)}catch{i=undefined}return n===A&&i!==undefined&&C.set(`${r}-${a}`,i),n!==A&&i!==undefined&&_.set(`${r.toLowerCase()}-${n.toLowerCase()}-${a}`,i),[{success:i!==undefined,value:i,account:r,token:n,chainId:a}]});b.push(...e)}if(S.forEach((e,t)=>{e.forEach(e=>{const s=`${t}-${e}`;C.get(s)||b.push({success:!0,value:new f.default("0"),account:t,token:A,chainId:e})})}),u(this,i,"f")){const e=u(this,i,"f").call(this);Object.entries(e).forEach(([e,t])=>{Object.entries(t).forEach(([t,s])=>{Object.entries(s).forEach(([s])=>{const n=s.toLowerCase(),r=`${e.toLowerCase()}-${n}-${t}`,a=s!==A,i=_.get(r);a&&!i&&b.push({success:!0,value:new f.default("0"),account:e,token:n,chainId:t})})})})}return b.push(...g),{balances:b,unprocessedChainIds:h}}},r=new WeakMap,a=new WeakMap,i=new WeakMap,n=new WeakSet,o=async function(e){if(!u(this,a,"f"))return[];const t=[],s={};for(const t of e){const[,e,n]=t.split(":"),r=(0,p.toHex)(parseInt(e,10)),a=y(n);s[r]||(s[r]=[]),s[r].push(a)}for(const[e,n]of Object.entries(s)){const s=e;if(![S.SupportedStakedBalanceNetworks.Mainnet,S.SupportedStakedBalanceNetworks.Hoodi].includes(s))continue;if(!(s in b.STAKING_CONTRACT_ADDRESS_BY_CHAINID))continue;const r=b.STAKING_CONTRACT_ADDRESS_BY_CHAINID[s],i=u(this,a,"f").call(this,s),o=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"view",type:"function"}];try{const e=new h.Contract(r,o,i);for(const a of n)try{const n=await(0,p.safelyExecute)(()=>e.getShares(a));if(n&&n.gt(0)){const i=await(0,p.safelyExecute)(()=>e.convertToAssets(n));i&&t.push({success:!0,value:new f.default(i.toString()),account:a,token:y(r),chainId:s})}else t.push({success:!0,value:new f.default("0"),account:a,token:y(r),chainId:s})}catch(e){console.error(`Error fetching staked balance for ${a}:`,e),t.push({success:!1,account:a,token:y(r),chainId:s})}}catch(t){console.error(`Error setting up staking contract for chain ${e}:`,t)}}return t},c=async function(e,t){if(e.length<=20)return await(0,g.fetchMultiChainBalancesV4)({accountAddresses:e},u(this,r,"f"),t);const s=new Set;return{balances:await(0,S.reduceInBatchesSerially)({values:e,batchSize:20,eachBatch:async(e,n)=>{const a=await(0,g.fetchMultiChainBalancesV4)({accountAddresses:n},u(this,r,"f"),t);return a.unprocessedNetworks&&a.unprocessedNetworks.forEach(e=>s.add(e)),[...e||[],...a.balances]},initialResult:[]}),unprocessedNetworks:Array.from(s)}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/multi-chain-accounts-service/api-balance-fetcher.cjs"}],[1396,{"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchMultiChainBalancesV4=s.fetchMultiChainBalances=s.fetchSupportedNetworks=s.MULTICHAIN_ACCOUNTS_DOMAIN=void 0;const n=e("@metamask/controller-utils");s.MULTICHAIN_ACCOUNTS_DOMAIN="https://accounts.api.cx.metamask.io";s.fetchSupportedNetworks=async function(){const e=new URL(`${s.MULTICHAIN_ACCOUNTS_DOMAIN}/v1/supportedNetworks`);return(await(0,n.handleFetch)(e)).fullSupport},s.fetchMultiChainBalances=async function(e,t,r,a){const i=((e,t)=>{const n=new URL(`${s.MULTICHAIN_ACCOUNTS_DOMAIN}/v2/accounts/${e}/balances`);return t?.networks!==undefined&&n.searchParams.append("networks",t.networks),n})(e,{networks:t?.networks?.join()}),o={"x-metamask-clientproduct":`metamask-${r}`};return a&&(o.Authorization=`Bearer ${a}`),await(0,n.handleFetch)(i,{headers:o})},s.fetchMultiChainBalancesV4=async function(e,t,r){const a=(e=>{const t=new URL(`${s.MULTICHAIN_ACCOUNTS_DOMAIN}/v4/multiaccount/balances`);return e?.networks!==undefined&&t.searchParams.append("networks",e.networks),e?.accountAddresses!==undefined&&t.searchParams.append("accountAddresses",e.accountAddresses),t})({accountAddresses:e?.accountAddresses?.join(),networks:e?.networks?.join()}),i={"x-metamask-clientproduct":`metamask-${t}`};return r&&(i.Authorization=`Bearer ${r}`),await(0,n.handleFetch)(a,{headers:i})}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/multi-chain-accounts-service/multi-chain-accounts.cjs"}],[1397,{"./AssetsContractController.cjs":1361,"./assetsUtil.cjs":1389,"@ethersproject/contracts":786,"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.getTokenBalancesForMultipleAddresses=s.getStakedBalancesForAddresses=s.aggregate3=s.multicallOrFallback=void 0;const r=e("@ethersproject/contracts"),a=n(e("bn.js")),i=e("./AssetsContractController.cjs"),o=e("./assetsUtil.cjs"),c={"0x1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3":"0xcA11bde05977b3631167028862bE2a173976CA11","0xaa36a7":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4268":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5e9":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1b6e6":"0xcA11bde05977b3631167028862bE2a173976CA11","0x18fc4a":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa":"0xcA11bde05977b3631167028862bE2a173976CA11","0x45":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1a4":"0xcA11bde05977b3631167028862bE2a173976CA11","0xaa37dc":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa4b1":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa4ba":"0xcA11bde05977b3631167028862bE2a173976CA11","0x66eed":"0xcA11bde05977b3631167028862bE2a173976CA11","0x66eee":"0xcA11bde05977b3631167028862bE2a173976CA11","0x66eeb":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15f2249":"0xcA11bde05977b3631167028862bE2a173976CA11","0x89":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13881":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13882":"0xcA11bde05977b3631167028862bE2a173976CA11","0x44d":"0xca11bde05977b3631167028862be2a173976ca11","0x5a2":"0xca11bde05977b3631167028862be2a173976ca11","0x98a":"0xca11bde05977b3631167028862be2a173976ca11","0x64":"0xcA11bde05977b3631167028862bE2a173976CA11","0x27d8":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa86a":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa869":"0xcA11bde05977b3631167028862bE2a173976CA11","0xfa2":"0xcA11bde05977b3631167028862bE2a173976CA11","0xfa":"0xcA11bde05977b3631167028862bE2a173976CA11","0xfaf0":"0xca11bde05977b3631167028862be2a173976ca11","0x38":"0xcA11bde05977b3631167028862bE2a173976CA11","0x61":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15eb":"0xcA11bde05977b3631167028862bE2a173976CA11","0xcc":"0xcA11bde05977b3631167028862bE2a173976CA11","0x504":"0xcA11bde05977b3631167028862bE2a173976CA11","0x505":"0xcA11bde05977b3631167028862bE2a173976CA11","0x507":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2a15c308d":"0xca11bde05977b3631167028862be2a173976ca11","0x2a15c3083":"0xca11bde05977b3631167028862be2a173976ca11","0x63564c40":"0xcA11bde05977b3631167028862bE2a173976CA11","0x19":"0xcA11bde05977b3631167028862bE2a173976CA11","0x152":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5535072":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6c1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x7a":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13":"0xcA11bde05977b3631167028862bE2a173976CA11","0x10":"0xcA11bde05977b3631167028862bE2a173976CA11","0x72":"0xcA11bde05977b3631167028862bE2a173976CA11","0x120":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4e454152":"0xcA11bde05977b3631167028862bE2a173976CA11","0x250":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5c2359":"0xcA11bde05977b3631167028862bE2a173976CA11","0xec0":"0xcA11bde05977b3631167028862bE2a173976CA11","0x42":"0xcA11bde05977b3631167028862bE2a173976CA11","0x80":"0xcA11bde05977b3631167028862bE2a173976CA11","0x440":"0xcA11bde05977b3631167028862bE2a173976CA11","0x257":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe9fe":"0xcA11bde05977b3631167028862bE2a173976CA11","0xd3a0":"0xcA11bde05977b3631167028862bE2a173976CA11","0x84444":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1e":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2329":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2328":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6c":"0xcA11bde05977b3631167028862bE2a173976CA11","0x12":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa516":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5afe":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa4ec":"0xcA11bde05977b3631167028862bE2a173976CA11","0xaef3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x116ea":"0xcA11bde05977b3631167028862bE2a173976CA11","0x116e9":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2019":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3e9":"0xca11bde05977b3631167028862be2a173976ca11","0x7d1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x141":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x28":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4d2":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1e14":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1e15":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1251":"0xcA11bde05977b3631167028862bE2a173976CA11","0x7f08":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8ae":"0xcA11bde05977b3631167028862bE2a173976CA11","0x138b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1389":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1388":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1f92":"0xcA11bde05977b3631167028862bE2a173976CA11","0x14a33":"0xca11bde05977b3631167028862be2a173976ca11","0x14a34":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2105":"0xca11bde05977b3631167028862be2a173976ca11","0x936":"0xcA11bde05977b3631167028862bE2a173976CA11","0xff":"0xcA11bde05977b3631167028862bE2a173976CA11","0x46a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x46b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x14f":"0xcA11bde05977b3631167028862bE2a173976CA11","0xd2af":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe9ac0ce":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe705":"0xca11bde05977b3631167028862be2a173976ca11","0xe704":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe708":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2b6f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x39":"0xcA11bde05977b3631167028862bE2a173976CA11","0x23a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1644":"0xcA11bde05977b3631167028862bE2a173976CA11","0xdea8":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3af":"0xcA11bde05977b3631167028862bE2a173976CA11","0x171":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3e7":"0xcA11bde05977b3631167028862bE2a173976CA11","0x76adf1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3b9ac9ff":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2c":"0xca11bde05977b3631167028862be2a173976ca11","0x2e":"0xca11bde05977b3631167028862be2a173976ca11","0x15b3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x82751":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8274f":"0xca11bde05977b3631167028862be2a173976ca11","0x82750":"0xcA11bde05977b3631167028862bE2a173976CA11","0x96f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3cc5":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4571":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe99":"0xcA11bde05977b3631167028862bE2a173976CA11","0x7d0":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1297":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1d5e":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3a14269b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x561bf78b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x235ddd0":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3cd156dc":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5d456c62":"0xcA11bde05977b3631167028862bE2a173976CA11","0x79f99296":"0xcA11bde05977b3631167028862bE2a173976CA11","0x585eb4b1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x507aaa2a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1fc3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x32d":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8a73":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8a72":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8a71":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe9ac0d6":"0xca11bde05977b3631167028862be2a173976ca11","0x1069":"0xcA11bde05977b3631167028862bE2a173976CA11","0x7e5":"0xcA11bde05977b3631167028862bE2a173976CA11","0x53":"0xca11bde05977b3631167028862be2a173976ca11","0x52":"0xca11bde05977b3631167028862be2a173976ca11","0xe298":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1a8":"0xcA11bde05977b3631167028862bE2a173976CA11","0x94":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2c6":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2803":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2802":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa9":"0xcA11bde05977b3631167028862bE2a173976CA11","0x28c5f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x28c60":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13a":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4cb2f":"0xdbfa261cd7d17bb40479a0493ad6c0fee435859e","0x7f93":"0xcA11bde05977b3631167028862bE2a173976CA11","0xb660":"0xcA11bde05977b3631167028862bE2a173976CA11","0xb02113d3f":"0xcA11bde05977b3631167028862bE2a173976CA11","0xdad":"0xcA11bde05977b3631167028862bE2a173976CA11","0xdae":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15b38":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15b32":"0xcA11bde05977b3631167028862bE2a173976CA11","0x45c":"0xcA11bde05977b3631167028862bE2a173976CA11","0x45b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3d":"0xcA11bde05977b3631167028862bE2a173976CA11","0x41a6ace":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa729":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1f47b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1b59":"0xca11bde05977b3631167028862be2a173976ca11","0x1b58":"0xcA11bde05977b3631167028862bE2a173976CA11","0xc3":"0xca11bde05977b3631167028862be2a173976ca11","0x16fd8":"0xcA11bde05977b3631167028862bE2a173976CA11","0xc7":"0xca11bde05977b3631167028862be2a173976ca11","0x405":"0xca11bde05977b3631167028862be2a173976ca11","0x334":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1ce":"0xca11bde05977b3631167028862be2a173976ca11","0x1cf":"0xca11bde05977b3631167028862be2a173976ca11","0xa70e":"0xcA11bde05977b3631167028862bE2a173976CA11","0x868b":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa0c71fd":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13e31":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa1337":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1f2b":"0xcA11bde05977b3631167028862bE2a173976CA11","0xf63":"0xcA11bde05977b3631167028862bE2a173976CA11","0x144":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0x118":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0x12c":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0x18995f":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0x2b74":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0xfc":"0xcA11bde05977b3631167028862bE2a173976CA11","0x9da":"0xcA11bde05977b3631167028862bE2a173976CA11","0x137":"0xcA11bde05977b3631167028862bE2a173976CA11","0x13ed":"0xcA11bde05977b3631167028862bE2a173976CA11","0x24b1":"0xcA11bde05977b3631167028862bE2a173976CA11","0xba9302":"0xcA11bde05977b3631167028862bE2a173976CA11","0x7c8":"0xcA11bde05977b3631167028862bE2a173976CA11","0x138d5":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6d":"0xcA11bde05977b3631167028862bE2a173976CA11","0x343b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x34a1":"0xcA11bde05977b3631167028862bE2a173976CA11","0x3109":"0xcA11bde05977b3631167028862bE2a173976CA11","0x91b":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa96":"0xcA11bde05977b3631167028862bE2a173976CA11","0x22c3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2be3":"0xcA11bde05977b3631167028862bE2a173976CA11","0xbf03":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1b254":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa7b14":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2276":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1b9e":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6a63bb8":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15af3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15af1":"0xcA11bde05977b3631167028862bE2a173976CA11","0xae3f3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x531":"0xcA11bde05977b3631167028862bE2a173976CA11","0x28c61":"0xcA11bde05977b3631167028862bE2a173976CA11","0x28c58":"0xca11bde05977b3631167028862be2a173976ca11","0x1d88":"0xcA11bde05977b3631167028862bE2a173976CA11","0x5b9b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4c7e1":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa53b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1a2b":"0xcA11bde05977b3631167028862bE2a173976CA11","0x406":"0xca11bde05977b3631167028862be2a173976ca11","0x2cef":"0xcA11bde05977b3631167028862bE2a173976CA11","0x18b2":"0xca11bde05977b3631167028862be2a173976ca11","0x182a9":"0xcA11bde05977b3631167028862bE2a173976CA11","0xc4":"0xcA11bde05977b3631167028862bE2a173976CA11","0xfdd":"0xcA11bde05977b3631167028862bE2a173976CA11","0xfde":"0xcA11bde05977b3631167028862bE2a173976CA11","0x99c0a0f":"0xca11bde05977b3631167028862be2a173976ca11","0x22cf":"0xcA11bde05977b3631167028862bE2a173976CA11","0x310c5":"0xca11bde05977b3631167028862be2a173976ca11","0x46f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x659":"0xca11bde05977b3631167028862be2a173976ca11","0x139c968f9":"0xcA11bde05977b3631167028862bE2a173976CA11","0xed88":"0xcA11bde05977b3631167028862bE2a173976CA11","0xd036":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1f3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x31bf8c3":"0xcA11bde05977b3631167028862bE2a173976CA11","0x1cbc67bfdc":"0xcA11bde05977b3631167028862bE2a173976CA11","0x98967f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x4f588":"0xcA11bde05977b3631167028862bE2a173976CA11","0x16db":"0xca11bde05977b3631167028862be2a173976ca11","0x3a":"0xca11bde05977b3631167028862be2a173976ca11","0x59":"0xca11bde05977b3631167028862be2a173976ca11","0x1e0":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2eb":"0xcA11bde05977b3631167028862bE2a173976CA11","0x221":"0xcA11bde05977b3631167028862bE2a173976CA11","0x6f0":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa867":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2611":"0xcA11bde05977b3631167028862bE2a173976CA11","0xa6":"0xcA11bde05977b3631167028862bE2a173976CA11","0x15f900":"0x6B5eFbC0C82eBb26CA13a4F11836f36Fc6fdBC5D","0x74c":"0xcA11bde05977b3631167028862bE2a173976CA11","0x407b":"0x90a2377F233E3461BACa6080d4837837d8762927","0xa3c3":"0xcA11bde05977b3631167028862bE2a173976CA11","0xab5":"0xF9cda624FBC7e059355ce98a31693d299FACd963","0x138de":"0xcA11bde05977b3631167028862bE2a173976CA11","0x18c6":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8173":"0xcA11bde05977b3631167028862bE2a173976CA11","0x2ba":"0xcA11bde05977b3631167028862bE2a173976CA11","0x279f":"0xcA11bde05977b3631167028862bE2a173976CA11","0xb67d2":"0xcA11bde05977b3631167028862bE2a173976CA11","0xe8":"0xcA11bde05977b3631167028862bE2a173976CA11","0x18232":"0xcA11bde05977b3631167028862bE2a173976CA11","0x8f":"0xcA11bde05977b3631167028862bE2a173976CA11","0x32":"0x0B1795ccA8E4eC4df02346a082df54D437F8D9aF","0x18c7":"0xcA11bde05977b3631167028862bE2a173976CA11","0x10e6":"0xcA11bde05977b3631167028862bE2a173976CA11","0x10b3e":"0x99423C88EB5723A590b4C644426069042f137B9e"},l=[{name:"tryAggregate",type:"function",stateMutability:"payable",inputs:[{name:"requireSuccess",type:"bool"},{name:"calls",type:"tuple[]",components:[{name:"target",type:"address"},{name:"callData",type:"bytes"}]}],outputs:[{name:"returnData",type:"tuple[]",components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}]}]}],u=[{name:"aggregate3",type:"function",stateMutability:"payable",inputs:[{name:"calls",type:"tuple[]",components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}]}],outputs:[{name:"returnData",type:"tuple[]",components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}]}]}],d="0x0000000000000000000000000000000000000000",h="balanceOf(address)",p="getEthBalance",m="getShares",f="convertToAssets",g=[{name:"balanceOf",type:"function",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}],stateMutability:"view"}],b=[{name:"getEthBalance",type:"function",inputs:[{name:"addr",type:"address"}],outputs:[{name:"balance",type:"uint256"}],stateMutability:"view"}],S=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{internalType:"uint256",name:"assets",type:"uint256"}],stateMutability:"view",type:"function"}],A=async(e,t)=>await(0,o.reduceInBatchesSerially)({values:e,batchSize:t,initialResult:[],eachBatch:async(e,t)=>[...e,...(await Promise.allSettled(t.map(e=>e.contract[e.functionSignature](...e.arguments)))).map(e=>({success:"fulfilled"===e.status,value:"fulfilled"===e.status?e.value:undefined}))]});s.multicallOrFallback=async(e,t,s,n=300,a=20)=>{if(0===e.length)return[];const i=c[t];if(i)try{return await(async(e,t,s,n)=>{const a=new r.Contract(t,l,s);return await(0,o.reduceInBatchesSerially)({values:e,batchSize:n,initialResult:[],eachBatch:async(e,t)=>{const s=t.map(e=>({target:e.contract.address,callData:e.contract.interface.encodeFunctionData(e.contract.interface.functions[e.functionSignature],e.arguments)}));return[...e,...(await a.callStatic.tryAggregate(!1,s)).map((e,s)=>({success:e.success,value:e.success?t[s].contract.interface.decodeFunctionResult(t[s].functionSignature,e.returnData)[0]:undefined}))]}})})(e,i,s,n)}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"CALL_EXCEPTION"!==e.code)throw e}return await A(e,a)};s.aggregate3=async(e,t,s)=>{if(0===e.length)return[];const n=c[t],a=new r.Contract(n,u,s);return await a.callStatic.aggregate3(e)};const y=async(e,t,s,n,i)=>{const c={};if(e.length>0){const n=[],a=[];e.forEach(e=>{t.forEach(t=>{const i=new r.Contract(e,g,s);n.push({contract:i,functionSignature:h,arguments:[t]}),a.push({tokenAddress:e,userAddress:t})})});(await A(n,i)).forEach((e,t)=>{if(e.success){const{tokenAddress:s,userAddress:n}=a[t];c[s]||(c[s]={}),c[s][n]=e.value}})}if(n){const e=await(async(e,t,s=20)=>{const n={};return await(0,o.reduceInBatchesSerially)({values:e,batchSize:s,initialResult:undefined,eachBatch:async(e,s)=>{(await Promise.allSettled(s.map(async e=>{const s=await t.getBalance(e);return{success:!0,balance:new a.default(s.toString()),userAddress:e}}))).forEach(e=>{"fulfilled"===e.status&&e.value.success&&null!==e.value.balance&&(n[e.value.userAddress]=e.value.balance)})}}),n})(t,s,i);Object.keys(e).length>0&&(c[d]=e)}return c},E=async(e,t,s,n)=>{const a={},o=i.STAKING_CONTRACT_ADDRESS_BY_CHAINID[t];if(!o)return a;const c=[],l=[];e.forEach(e=>{const t=new r.Contract(o,S,s);c.push({contract:t,functionSignature:m,arguments:[e]}),l.push({userAddress:e})});return(await A(c,n)).forEach((e,t)=>{if(e.success){const{userAddress:s}=l[t];a[s]=e.value}}),a};s.getStakedBalancesForAddresses=async(e,t,n)=>{const o=i.STAKING_CONTRACT_ADDRESS_BY_CHAINID[t];if(!o)return{};const c=new r.Contract(o,S,n);try{const r=e.map(e=>({target:o,allowFailure:!0,callData:c.interface.encodeFunctionData(m,[e])})),i=await(0,s.aggregate3)(r,t,n),l=[];if(i.forEach((t,s)=>{if(t.success){const n=c.interface.decodeFunctionResult(m,t.returnData)[0],r=new a.default(n.toString());r.gt(new a.default(0))&&l.push({address:e[s],shares:r})}}),0===l.length)return{};const u=l.map(({shares:e})=>({target:o,allowFailure:!0,callData:c.interface.encodeFunctionData(f,[e.toString()])})),d=await(0,s.aggregate3)(u,t,n),h={};return d.forEach((e,t)=>{if(e.success){const s=c.interface.decodeFunctionResult(f,e.returnData)[0],n=new a.default(s.toString()),{address:r}=l[t];h[r]=n}}),h}catch(e){return console.error("Error fetching staked balances:",e),{}}};s.getTokenBalancesForMultipleAddresses=async(e,t,n,i,l)=>{if(0===e.length&&!i&&!l)return{tokenBalances:{}};const u=Array.from(new Set(e.flatMap(e=>e.tokenAddresses))).filter(e=>e!==d),m=Array.from(new Set(e.map(e=>e.accountAddress)));if(!c[t]){const e={tokenBalances:await y(u,m,n,i,20)};if(l){const s=await E(m,t,n,20);Object.keys(s).length>0&&(e.stakedBalances=s)}return e}try{const u=[],f=[],S=new r.Contract(d,g,n);if(e.forEach(e=>{e.tokenAddresses.filter(e=>e!==d).forEach(t=>{u.push({target:t,allowFailure:!0,callData:S.interface.encodeFunctionData(h,[e.accountAddress])}),f.push({tokenAddress:t,userAddress:e.accountAddress,callType:"erc20"})})}),i){const e=c[t],s=new r.Contract(e,b,n);m.forEach(t=>{u.push({target:e,allowFailure:!0,callData:s.interface.encodeFunctionData(p,[t])}),f.push({tokenAddress:d,userAddress:t,callType:"native"})})}const A=300,y=[];await(0,o.reduceInBatchesSerially)({values:u,batchSize:A,initialResult:undefined,eachBatch:async(e,r)=>{const a=await(0,s.aggregate3)(r,t,n);y.push(...a)}});let E={};l&&(E=await(0,s.getStakedBalancesForAddresses)(m,t,n));const C=((e,t,s,n,i)=>{const o={},l={},u=new r.Contract(d,g,n),m=c[s],f=new r.Contract(m,b,n);e.forEach((e,s)=>{if(e.success){const{tokenAddress:n,userAddress:r,callType:i}=t[s];if("native"===i){const t=f.interface.decodeFunctionResult(p,e.returnData)[0];o[n]||(o[n]={}),o[n][r]=new a.default(t.toString())}else if("staking"===i)console.warn("Staking callType found in main processing - this should not happen");else{const t=u.interface.decodeFunctionResult(h,e.returnData)[0];o[n]||(o[n]={}),o[n][r]=new a.default(t.toString())}}});const S={tokenBalances:o};return i&&Object.keys(l).length>0&&(S.stakedBalances=l),S})(y,f,t,n,!1);return l&&Object.keys(E).length>0&&(C.stakedBalances=E),C}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"CALL_EXCEPTION"!==e.code)throw e;const s={tokenBalances:await y(u,m,n,i,20)};if(l){const e=await E(m,t,n,20);Object.keys(e).length>0&&(s.stakedBalances=e)}return s}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/multicall.cjs"}],[1398,{"../AssetsContractController.cjs":1361,"../multicall.cjs":1397,"@metamask/controller-utils":1639,"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},u=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.RpcBalanceFetcher=void 0;const h=e("@metamask/controller-utils"),p=d(e("bn.js")),m=e("../AssetsContractController.cjs"),f=e("../multicall.cjs"),g="0x0000000000000000000000000000000000000000",b=e=>(0,h.toChecksumHexAddress)(e);s.RpcBalanceFetcher=class{constructor(e,t,s){n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),l(this,r,e,"f"),l(this,a,t,"f"),l(this,i,s,"f")}supports(){return!0}async fetch({chainIds:e,queryAllAccounts:t,selectedAccount:s,allAccounts:a}){const l=e.map(async e=>{const l=u(this,i,"f").call(this),d=function(e,t,s,n,r,a){const i=[],o=([e,n])=>{(t||b(e)===b(s))&&n.forEach(t=>i.push({accountAddress:e,tokenAddress:b(t.address)}))};Object.entries(r[e]??{}).forEach(o),Object.entries(a[e]??{}).forEach(o),t?n.forEach(e=>{i.push({accountAddress:e.address,tokenAddress:g})}):i.push({accountAddress:s,tokenAddress:g});if(!i.length)return[];const c=new Map;return i.forEach(({accountAddress:e,tokenAddress:t})=>{c.has(e)||c.set(e,[]);const s=c.get(e);s&&s.push(t)}),Array.from(c.entries()).map(([e,t])=>({accountAddress:e,tokenAddresses:t}))}(e,t,s,a,l.allTokens,l.allDetectedTokens);if(!d.length)return[];const m=u(this,r,"f").call(this,e);await u(this,n,"m",c).call(this,e);const S=await(0,h.safelyExecuteWithTimeout)(async()=>await(0,f.getTokenBalancesForMultipleAddresses)(d,e,m,!0,!0),!0,3e4);if(!S)return[];const{tokenBalances:A,stakedBalances:y}=S,E=[],C=new Set;d.forEach(e=>{C.add(e.accountAddress)}),C.forEach(t=>{const s=A[g]?.[t]||null;E.push({success:!0,value:s||new p.default("0"),account:t,token:g,chainId:e})}),Object.entries(A).forEach(([t,s])=>{t!==g&&Object.entries(s).forEach(([s,n])=>{E.push({success:null!==n,value:n,account:s,token:b(t),chainId:e})})});const _=u(this,n,"m",o).call(this,e);if(_){const t=new Set;d.forEach(e=>{t.add(e.accountAddress)});const s=b(_);t.forEach(t=>{const n=y?.[t]||null;E.push({success:!0,value:n||new p.default("0"),account:t,token:s,chainId:e})})}return E}),d=await Promise.allSettled(l),m=[];return d.forEach(e=>{"fulfilled"===e.status&&m.push(...e.value)}),{balances:m}}},r=new WeakMap,a=new WeakMap,i=new WeakMap,n=new WeakSet,o=function(e){return m.STAKING_CONTRACT_ADDRESS_BY_CHAINID[e]},c=async function(e){const t=u(this,a,"f").call(this,e);await(t.blockTracker?.checkForLatestBlock?.())}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/rpc-service/rpc-balance-fetcher.cjs"}],[1399,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.parseBalanceWithDecimals=s.stringifyBalanceWithDecimals=void 0;const n=e("@metamask/utils");s.stringifyBalanceWithDecimals=function(e,t,s=5){if(0n===e||0===t)return e.toString();let n=e.toString(),r=n.length,a=r-t,i="";if(a<=0){for(;i.length<=-1*a;)i+="0",r+=1;n=i+n,a=1}const o=n.slice(0,r-t);if(0===s)return o;const c=n.slice(a,a+s);if(/0+$/u.test(c)){let e=n.slice(a).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${o}${e}`}return`${o}.${c}`},s.parseBalanceWithDecimals=function(e,t){if(!/^\d+(\.\d+)?$/u.test(e))return undefined;const[s,r=""]=e.split(".");return 0===t?(0,n.bigIntToHex)(BigInt(s)):r.length>=t?(0,n.bigIntToHex)(BigInt(`${s}${r.slice(0,t)}`)):(0,n.bigIntToHex)(BigInt(`${s}${r}${"0".repeat(t-r.length)}`))}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/selectors/stringify-balance.cjs"}],[1400,{"../token-prices-service/codefi-v2.cjs":1401,"./stringify-balance.cjs":1399,"@metamask/controller-utils":1639,"@metamask/keyring-api":2510,"@metamask/utils":3554,reselect:5709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.selectAssetsBySelectedAccountGroup=s.selectAllAssets=s.TRON_RESOURCE_SYMBOLS_SET=s.TRON_RESOURCE_SYMBOLS=s.TRON_RESOURCE=void 0;const n=e("@metamask/controller-utils"),r=e("@metamask/keyring-api"),a=e("@metamask/utils"),i=e("reselect"),o=e("./stringify-balance.cjs"),c=e("../token-prices-service/codefi-v2.cjs");s.TRON_RESOURCE={ENERGY:"energy",BANDWIDTH:"bandwidth",MAX_ENERGY:"max-energy",MAX_BANDWIDTH:"max-bandwidth",STRX_ENERGY:"strx-energy",STRX_BANDWIDTH:"strx-bandwidth"},s.TRON_RESOURCE_SYMBOLS=Object.values(s.TRON_RESOURCE),s.TRON_RESOURCE_SYMBOLS_SET=new Set(s.TRON_RESOURCE_SYMBOLS);const l=i.createSelector.withTypes(),u=l([e=>e.accountTree,e=>e.internalAccounts],(e,t)=>{const s={};for(const{groups:n}of Object.values(e.wallets))for(const{id:e,accounts:r}of Object.values(n))for(const n of r){const r=t.accounts[n];s[r.type.startsWith("eip155")?r.address:n]={accountGroupId:e,type:r.type,accountId:n}}return s}),d=l([u,e=>e.accountsByChainId,e=>e.marketData,e=>e.currencyRates,e=>e.currentCurrency,e=>e.networkConfigurationsByChainId],(e,t,s,n,r,i)=>{var l;const u={};for(const[d,h]of Object.entries(t))for(const[t,p]of Object.entries(h)){const h=e[t.toLowerCase()];if(!h)continue;const{accountGroupId:m,type:f,accountId:b}=h;u[m]??(u[m]={}),(l=u[m])[d]??(l[d]=[]);const S=u[m][d],A=p.balance||"0x0",y=i[d]?.nativeCurrency||"NATIVE",E={address:(0,c.getNativeTokenAddress)(d),decimals:18,name:"ETH"===y?"Ethereum":y,symbol:y,image:""},C=g(A,E.decimals,s,n,d,E.address,y);S.push({accountType:f,assetId:E.address,isNative:!0,address:E.address,image:E.image,name:E.name,symbol:E.symbol,accountId:b,decimals:E.decimals,rawBalance:A,balance:(0,o.stringifyBalanceWithDecimals)((0,a.hexToBigInt)(A),E.decimals),fiat:C?{balance:C.balance,currency:r,conversionRate:C.conversionRate}:undefined,chainId:d})}return u}),h=l([u,e=>e.allTokens,e=>e.allIgnoredTokens,e=>e.tokenBalances,e=>e.marketData,e=>e.currencyRates,e=>e.currentCurrency],(e,t,s,n,r,i,c)=>{var l;const u={};for(const[d,h]of Object.entries(t))for(const[t,p]of Object.entries(h))for(const h of p){const p=h.address,m=e[t];if(!m)continue;const{accountGroupId:f,type:b,accountId:S}=m;if(s[d]?.[t]?.includes(p))continue;const A=n[t]?.[d]?.[p];if(!A)continue;u[f]??(u[f]={}),(l=u[f])[d]??(l[d]=[]);const y=u[f][d],E=g(A,h.decimals,r,i,d,p);y.push({accountType:b,assetId:p,isNative:!1,address:p,image:h.image??"",name:h.name??h.symbol,symbol:h.symbol,accountId:S,decimals:h.decimals,rawBalance:A,balance:(0,o.stringifyBalanceWithDecimals)((0,a.hexToBigInt)(A),h.decimals),fiat:E?{balance:E.balance,currency:c,conversionRate:E.conversionRate}:undefined,chainId:d,...h.rwaData&&{rwaData:h.rwaData}})}return u}),p=l([u,e=>e.accountsAssets,e=>e.allIgnoredAssets,e=>e.assetsMetadata,e=>e.balances,e=>e.conversionRates,e=>e.currentCurrency],(e,t,s,n,r,i,c)=>{var l;const u={};for(const[d,h]of Object.entries(t))for(const t of h){let h;try{h=(0,a.parseCaipAssetType)(t)}catch{continue}const{chainId:p}=h,m=`${h.assetNamespace}:${h.assetReference}`,f=e[d],g=n[t];if(!f||!g)continue;const{accountGroupId:S,type:A}=f;if(s?.[d]?.includes(t))continue;u[S]??(u[S]={}),(l=u[S])[p]??(l[p]=[]);const y=u[S][p],E=r[d]?.[t],C=g.units?.find(e=>e.name===g.name&&e.symbol===g.symbol)?.decimals;if(!E||C===undefined)continue;const _=(0,o.parseBalanceWithDecimals)(E.amount,C);if(!_)continue;const T=b(E,i,t);y.push({accountType:A,assetId:t,isNative:"slip44"===h.assetNamespace,image:g.iconUrl,name:g.name??g.symbol??m,symbol:g.symbol??m,accountId:d,decimals:C,rawBalance:_,balance:E.amount,fiat:T?{balance:T.balance,currency:c,conversionRate:T.conversionRate}:undefined,chainId:p})}return u});s.selectAllAssets=l([h,p,d],(e,t,s)=>{const n={};return f(n,e),f(n,t),f(n,s),n});const m={filterTronStakedTokens:!0};function f(e,t){for(const[s,n]of Object.entries(t)){const t=e[s];if(t)for(const[e,s]of Object.entries(n))t[e]??(t[e]=[]),t[e].push(...s);else{e[s]={};for(const[t,r]of Object.entries(n))e[s][t]=[...r]}}}function g(e,t,s,r,a,i,o){const c=s[a]?.[i];if(!c&&o){const s=r[o];if(!s?.conversionRate)return undefined;return{balance:(0,n.convertHexToDecimal)(e)/10**t*s.conversionRate,conversionRate:s.conversionRate}}if(!c)return undefined;const l=r[c.currency];if(!l?.conversionRate)return undefined;return{balance:(0,n.convertHexToDecimal)(e)/10**t*c.price*l.conversionRate,conversionRate:l.conversionRate}}function b(e,t,s){const n=t[s];return n?.rate?{balance:Number(e.amount)*Number(n.rate),conversionRate:Number(n.rate)}:undefined}s.selectAssetsBySelectedAccountGroup=l([s.selectAllAssets,e=>e.accountTree,(e,t=m)=>t],(e,t,n)=>{const{selectedAccountGroup:a}=t;if(!a)return{};let i=e[a]||{};return n.filterTronStakedTokens&&(i=(e=>{const t={...e};return Object.values(r.TrxScope).forEach(e=>{t[e]&&(t[e]=t[e].filter(e=>!e.chainId.startsWith("tron:")||!s.TRON_RESOURCE_SYMBOLS_SET.has(e.symbol?.toLowerCase())))}),t})(i)),i},{memoize:i.weakMapMemoize,argsMemoize:i.weakMapMemoize})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/selectors/token-selectors.cjs"}],[1401,{"@metamask/controller-utils":1639,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.CodefiTokenPricesServiceV2=s.resetSupportedCurrenciesCache=s.getSupportedCurrencies=s.fetchSupportedCurrencies=s.resetSupportedNetworksCache=s.getSupportedNetworks=s.fetchSupportedNetworks=s.SUPPORTED_CHAIN_IDS=s.SPOT_PRICES_SUPPORT_INFO=s.getNativeTokenAddress=s.ZERO_ADDRESS=s.SUPPORTED_CURRENCIES=s.SUPPORTED_CURRENCIES_FALLBACK=void 0;const o=e("@metamask/controller-utils"),c=e("@metamask/utils");s.SUPPORTED_CURRENCIES_FALLBACK=["btc","eth","ltc","bch","bnb","eos","xrp","xlm","link","dot","yfi","usd","aed","ars","aud","bdt","bhd","bmd","brl","cad","chf","clp","cny","czk","dkk","eur","gbp","gel","hkd","huf","idr","ils","inr","jpy","krw","kwd","lkr","mmk","mxn","myr","mon","ngn","nok","nzd","php","pkr","pln","rub","sar","sek","sgd","thb","try","twd","uah","vef","vnd","zar","xdr","xag","xau","bits","sats","cop","kes","ron","dop","crc","hnl","zmw","svc","bam","pen","gtq","lbp","amd","sol","sei","sonic","trx","taiko","pepu","pol","mnt","nom","avax","ape"],s.SUPPORTED_CURRENCIES=s.SUPPORTED_CURRENCIES_FALLBACK,s.ZERO_ADDRESS="0x0000000000000000000000000000000000000000";const l={"0x89":"0x0000000000000000000000000000000000001010","0x440":"0xdeaddeaddeaddeaddeaddeaddeaddeaddead0000","0x1388":"0xdeaddeaddeaddeaddeaddeaddeaddeaddead0000","0x64":"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d","0x1e":"0x542fda317318ebf1d3deaf76e0b632741a7e677d","0x2611":"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"};s.getNativeTokenAddress=e=>l[e]??s.ZERO_ADDRESS,s.SPOT_PRICES_SUPPORT_INFO={"0x1":"eip155:1/slip44:60","0xa":"eip155:10/slip44:60","0x19":"eip155:25/slip44:394","0x1e":"eip155:30/slip44:137","0x2a":"eip155:42/erc20:0x0000000000000000000000000000000000000000","0x32":"eip155:50/erc20:0x0000000000000000000000000000000000000000","0x38":"eip155:56/slip44:714","0x39":"eip155:57/slip44:57","0x52":"eip155:82/slip44:18000","0x58":"eip155:88/slip44:889","0x64":"eip155:100/slip44:700","0x6a":"eip155:106/slip44:5655640","0x7a":"eip155:122/erc20:0x0000000000000000000000000000000000000000","0x80":"eip155:128/slip44:1010","0x89":"eip155:137/slip44:966","0x8f":"eip155:143/slip44:268435779","0x92":"eip155:146/slip44:10007","0xc4":"eip155:196/erc20:0x0000000000000000000000000000000000000000","0xe8":"eip155:232/erc20:0x0000000000000000000000000000000000000000","0xfa":"eip155:250/slip44:1007","0xfc":"eip155:252/erc20:0x0000000000000000000000000000000000000000","0x10b3e":"eip155:68414/erc20:0x0000000000000000000000000000000000000000","0x120":"eip155:288/slip44:60","0x141":"eip155:321/slip44:641","0x144":"eip155:324/slip44:60","0x150":"eip155:336/slip44:809","0x169":"eip155:361/slip44:589","0x2eb":"eip155:747/slip44:539","0x3e7":"eip155:999/slip44:2457","0x440":"eip155:1088/erc20:0xdeaddeaddeaddeaddeaddeaddeaddeaddead0000","0x44d":"eip155:1101/slip44:60","0x504":"eip155:1284/slip44:1284","0x505":"eip155:1285/slip44:1285","0x531":"eip155:1329/slip44:19000118","0x74c":"eip155:1868/erc20:0x0000000000000000000000000000000000000000","0xa729":"eip155:42793/erc20:0x0000000000000000000000000000000000000000","0xab5":"eip155:2741/erc20:0x0000000000000000000000000000000000000000","0x10e6":"eip155:4326/erc20:0x0000000000000000000000000000000000000000","0x1388":"eip155:5000/erc20:0xdeaddeaddeaddeaddeaddeaddeaddeaddead0000","0x2105":"eip155:8453/slip44:60","0x2611":"eip155:9745/erc20:0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee","0x2710":"eip155:10000/slip44:145","0x8173":"eip155:33139/erc20:0x0000000000000000000000000000000000000000","0xa3c3":"eip155:41923/erc20:0x0000000000000000000000000000000000000000","0xa4b1":"eip155:42161/slip44:60","0xa4ec":"eip155:42220/slip44:52752","0xa516":"eip155:42262/slip44:474","0xa867":"eip155:43111/erc20:0x0000000000000000000000000000000000000000","0xa86a":"eip155:43114/slip44:9005","0xe708":"eip155:59144/slip44:60","0xed88":"eip155:60808/erc20:0x0000000000000000000000000000000000000000","0x138de":"eip155:80094/erc20:0x0000000000000000000000000000000000000000","0x13c31":"eip155:81457/slip44:60","0x17dcd":"eip155:97741/erc20:0x0000000000000000000000000000000000000000","0x18232":"eip155:98866/erc20:0x0000000000000000000000000000000000000000","0x28c58":"eip155:167000/slip44:60","0x518af":"eip155:333999/slip44:1997","0x82750":"eip155:534352/slip44:60","0xb67d2":"eip155:747474/erc20:0x0000000000000000000000000000000000000000","0x15f900":"eip155:1440000/erc20:0x0000000000000000000000000000000000000000","0x4e454152":"eip155:1313161554/slip44:60","0x63564c40":"eip155:1666600000/slip44:1023"},s.SUPPORTED_CHAIN_IDS=Object.keys(s.SPOT_PRICES_SUPPORT_INFO);const u="https://price.api.cx.metamask.io/v1";let d=null,h=null;function p(e){const t=e.match(/^eip155:(\d+)$/u);return t?(0,c.numberToHex)(parseInt(t[1],10)):null}async function m(){return h||(h=async function(){try{const e="https://price.api.cx.metamask.io/v2/supportedNetworks",t=await(0,o.handleFetch)(e,{headers:{"Cache-Control":"no-cache"}});return t&&"object"==typeof t&&"fullSupport"in t&&"partialSupport"in t?(d=t,d):g()}catch{return g()}finally{h=null}}(),h)}function f(){return null!==d?d:g()}function g(){const e=Object.keys(s.SPOT_PRICES_SUPPORT_INFO).map(e=>(0,c.toCaipChainId)(c.KnownCaipNamespace.Eip155,(0,c.hexToNumber)(e).toString()));return{fullSupport:e.slice(0,11),partialSupport:{spotPricesV2:e,spotPricesV3:e}}}function b(){const e=f();return[...e.fullSupport,...e.partialSupport.spotPricesV3].map(p).filter(e=>null!==e)}s.fetchSupportedNetworks=m,s.getSupportedNetworks=f,s.resetSupportedNetworksCache=function(){d=null,h=null};let S=null;async function A(){try{const e=`${u}/supportedVsCurrencies`,t=await(0,o.handleFetch)(e,{headers:{"Cache-Control":"no-cache"}});if(Array.isArray(t)){const e=t.map(e=>e.toLowerCase());return S=e,e}return[...s.SUPPORTED_CURRENCIES_FALLBACK]}catch{return[...s.SUPPORTED_CURRENCIES_FALLBACK]}}function y(){return null!==S?S:s.SUPPORTED_CURRENCIES_FALLBACK}s.fetchSupportedCurrencies=A,s.getSupportedCurrencies=y,s.resetSupportedCurrenciesCache=function(){S=null};s.CodefiTokenPricesServiceV2=class{constructor({degradedThreshold:e=o.DEFAULT_DEGRADED_THRESHOLD,retries:t=o.DEFAULT_MAX_RETRIES,maximumConsecutiveFailures:s=o.DEFAULT_MAX_CONSECUTIVE_FAILURES,onBreak:c,onDegraded:l,circuitBreakDuration:u=o.DEFAULT_CIRCUIT_BREAK_DURATION}={}){n.set(this,void 0),r.set(this,{}),a(this,n,(0,o.createServicePolicy)({maxRetries:t,maxConsecutiveFailures:s,circuitBreakDuration:u,degradedThreshold:e}),"f"),c&&i(this,n,"f").onBreak(c),l&&i(this,n,"f").onDegraded(l)}onBreak(...e){return i(this,n,"f").onBreak(...e)}onDegraded(...e){return i(this,n,"f").onDegraded(...e)}setNativeAssetIdentifiers(e){a(this,r,e,"f")}async updateSupportedNetworks(){return m()}async fetchTokenPrices({assets:e,currency:t}){d||m();const a=b(),l=e.filter(e=>a.includes(e.chainId)).map(e=>{const t=(0,c.toCaipChainId)(c.KnownCaipNamespace.Eip155,(0,c.hexToNumber)(e.chainId).toString());let n;return n=(0,s.getNativeTokenAddress)(e.chainId).toLowerCase()===e.tokenAddress.toLowerCase()?i(this,r,"f")[t]??s.SPOT_PRICES_SUPPORT_INFO[e.chainId]:`${t}/erc20:${e.tokenAddress.toLowerCase()}`,n?{...e,assetId:n}:undefined}).filter(e=>e!==undefined);if(0===l.length)return[];const u=new URL("https://price.api.cx.metamask.io/v3/spot-prices");u.searchParams.append("assetIds",l.map(e=>e.assetId).join(",")),u.searchParams.append("vsCurrency",t),u.searchParams.append("includeMarketData","true");const h=await i(this,n,"f").execute(()=>(0,o.handleFetch)(u,{headers:{"Cache-Control":"no-cache"}}));return l.map(e=>{const s=h[e.assetId];return s?{...s,...e,currency:t}:undefined}).filter(e=>Boolean(e))}async fetchExchangeRates({baseCurrency:e,includeUsdRate:t,cryptocurrencies:s}){S||A();const r=new URL(`${u}/exchange-rates`);r.searchParams.append("baseCurrency",e);const a=new URL(`${u}/exchange-rates`);a.searchParams.append("baseCurrency","usd");const[c,l]=await Promise.allSettled([i(this,n,"f").execute(()=>(0,o.handleFetch)(r,{headers:{"Cache-Control":"no-cache"}})),...t&&"usd"!==e.toLowerCase()?[i(this,n,"f").execute(()=>(0,o.handleFetch)(a,{headers:{"Cache-Control":"no-cache"}}))]:[]]),d="fulfilled"===c.status?c.value:{},h="fulfilled"===l?.status?l.value:{};if("rejected"===c.status)throw new Error("Failed to fetch");const p=s.reduce((e,t)=>(d[t.toLowerCase()]&&(e[t.toLowerCase()]=d[t.toLowerCase()]),e),{});if(0===Object.keys(p).length)throw new Error("None of the cryptocurrencies are supported by price api");const m=s.reduce((e,t)=>(h[t.toLowerCase()]&&(e[t.toLowerCase()]=h[t.toLowerCase()]),e),{});if("usd"===e.toLowerCase())return Object.keys(p).forEach(e=>{p[e]={...p[e],usd:p[e]?.value}}),p;if(!t)return p;return Object.keys(p).reduce((e,t)=>(e[t]={...p[t],...m[t]?.value?{usd:m[t]?.value}:{}},e),{})}validateChainIdSupported(e){const t=b(),n=[...new Set([...t,...s.SUPPORTED_CHAIN_IDS])];return"string"==typeof e&&n.includes(e)}validateCurrencySupported(e){const t=y();return"string"==typeof e&&t.includes(e.toLowerCase())}async updateSupportedCurrencies(){return A()}},n=new WeakMap,r=new WeakMap}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/token-prices-service/codefi-v2.cjs"}],[1402,{"./codefi-v2.cjs":1401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.resetSupportedNetworksCache=s.getSupportedNetworks=s.fetchSupportedNetworks=s.getNativeTokenAddress=s.SUPPORTED_CHAIN_IDS=s.CodefiTokenPricesServiceV2=void 0;var n=e("./codefi-v2.cjs");Object.defineProperty(s,"CodefiTokenPricesServiceV2",{enumerable:!0,get:function(){return n.CodefiTokenPricesServiceV2}}),Object.defineProperty(s,"SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return n.SUPPORTED_CHAIN_IDS}}),Object.defineProperty(s,"getNativeTokenAddress",{enumerable:!0,get:function(){return n.getNativeTokenAddress}}),Object.defineProperty(s,"fetchSupportedNetworks",{enumerable:!0,get:function(){return n.fetchSupportedNetworks}}),Object.defineProperty(s,"getSupportedNetworks",{enumerable:!0,get:function(){return n.getSupportedNetworks}}),Object.defineProperty(s,"resetSupportedNetworksCache",{enumerable:!0,get:function(){return n.resetSupportedNetworksCache}})}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/token-prices-service/index.cjs"}],[1403,{"./assetsUtil.cjs":1389,"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchTokenMetadata=s.getTrendingTokens=s.searchTokens=s.fetchTokenListByChainId=s.TOKEN_METADATA_NO_SUPPORT_ERROR=s.TOKEN_END_POINT_API=void 0;const n=e("@metamask/controller-utils"),r=e("./assetsUtil.cjs");s.TOKEN_END_POINT_API="https://token.api.cx.metamask.io",s.TOKEN_METADATA_NO_SUPPORT_ERROR="TokenService Error: Network does not support fetchTokenMetadata";async function a(e,t,s){const r={referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",signal:t,cache:"default",headers:{"Content-Type":"application/json"}};try{return await(0,n.timeoutFetch)(e,r,s)}catch(e){e instanceof Error&&"AbortError"===e.name&&console.log("Request is aborted")}return undefined}async function i(e){const t=await e.json();if(t?.error)throw new Error(`TokenService Error: ${t.error}`);return t}s.fetchTokenListByChainId=async function(e,t,{timeout:r=1e4}={}){const o=function(e){const t=e===n.ChainId["linea-mainnet"]?1:3;return`${s.TOKEN_END_POINT_API}/tokens/${(0,n.convertHexToDecimal)(e)}?occurrenceFloor=${t}&includeNativeAssets=false&includeTokenFees=false&includeAssetType=false&includeERC20Permit=false&includeStorage=false&includeRwaData=true`}(e),c=await a(o,t,r);if(c){const t=await i(c);return Array.isArray(t)&&e===n.ChainId["linea-mainnet"]?t.filter(e=>Boolean(e.aggregators.includes("lineaTeam"))||e.aggregators.length>=3):t}return undefined},s.searchTokens=async function(e,t,{limit:r=10,includeMarketData:a=!1,includeRwaData:i=!0}={}){const o=function(e){const{chainIds:t,query:n,...r}=e,a=encodeURIComponent(n),i=t.map(e=>encodeURIComponent(e)).join(","),o=new URLSearchParams;return Object.entries(r).forEach(([e,t])=>{t!==undefined&&o.append(e,String(t))}),`${s.TOKEN_END_POINT_API}/tokens/search?networks=${i}&query=${a}&${o.toString()}`}({chainIds:e,query:t,limit:r,includeMarketData:a,includeRwaData:i});try{const e=await(0,n.handleFetch)(o);return e&&"object"==typeof e&&Array.isArray(e.data)?{count:e.count??e.data.length,data:e.data}:{count:0,data:[]}}catch(e){return console.log("Search request failed:",e),{count:0,data:[]}}},s.getTrendingTokens=async function({chainIds:e,sortBy:t,minLiquidity:r,minVolume24hUsd:a,maxVolume24hUsd:i,minMarketCap:o,maxMarketCap:c,excludeLabels:l,includeRwaData:u=!0,usePriceApiData:d=!0}){if(0===e.length)return console.error("No chains provided"),[];const h=function(e){const t=e.chainIds.map(e=>encodeURIComponent(e)).join(","),n=new URLSearchParams,{chainIds:r,excludeLabels:a,...i}=e;Object.entries(i).forEach(([e,t])=>{t!==undefined&&n.append(e,String(t))});const o=a!==undefined&&a.length>0?`&excludeLabels=${a.join(",")}`:"";return`${s.TOKEN_END_POINT_API}/v3/tokens/trending?chainIds=${t}${n.toString()?`&${n.toString()}`:""}${o}`}({chainIds:e,sort:t,minLiquidity:r,minVolume24hUsd:a,maxVolume24hUsd:i,minMarketCap:o,maxMarketCap:c,excludeLabels:l,includeRwaData:u,usePriceApiData:d});try{const e=await(0,n.handleFetch)(h);return Array.isArray(e)?e:(console.error("Trending tokens API returned non-array response:",e),[])}catch(e){return console.error("Trending tokens request failed:",e),[]}},s.fetchTokenMetadata=async function(e,t,o,{timeout:c=1e4}={}){if(!(0,r.isTokenListSupportedForNetwork)(e))throw new Error(s.TOKEN_METADATA_NO_SUPPORT_ERROR);const l=function(e,t){return`${s.TOKEN_END_POINT_API}/token/${(0,n.convertHexToDecimal)(e)}?address=${t}&includeRwaData=true`}(e,t),u=await a(l,o,c);return u?i(u):undefined}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/token-service.cjs"}],[1404,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createFormatters=void 0;const n={minimumFractionDigits:2,maximumFractionDigits:2},r={minimumSignificantDigits:1,maximumSignificantDigits:1},a={minimumSignificantDigits:3,maximumSignificantDigits:3},i={};function o(e,t={}){const s=`${e}_${JSON.stringify(t)}`;let r=i[s];if(r)return r;try{r=new Intl.NumberFormat(e,t)}catch(t){if(!(t instanceof RangeError))throw t;r=new Intl.NumberFormat(e,n)}return i[s]=r,r}function c(e,t,s={}){if(!Number.isFinite(Number(t)))return"";return o(e.locale,s).format(t)}function l(e,t,s,n={}){if(!Number.isFinite(Number(t)))return"";return o(e.locale,{style:"currency",currency:s,...n}).format(t)}function u(e,t,s){return l(e,t,s,{notation:"compact",...n})}function d(e,t,s){const n=Number(t),r=Math.abs(n);if(!Number.isFinite(n))return"";if(0===n)return l(e,0,s);if(r<.01){return`<${l(e,.01,s)}`}return l(e,n,s)}function h(e,t,s,n={}){if(!Number.isFinite(Number(t)))return"";return`${o(e.locale,{style:"decimal",...n}).format(t)} ${s}`}function p(e,t,s){const n=Number(t),i=Math.abs(n);return Number.isFinite(n)?0===n?l(e,0,s):i<1e-8?`<${l(e,1e-8,s,r)}`:i<1?l(e,n,s,a):i<1e6?l(e,n,s):u(e,n,s):""}function m(e,t,s){const i=1e-5,o=Number(t),c=Math.abs(o);return Number.isFinite(o)?0===o?h(e,0,s):c<i?`<${h(e,i,s,r)}`:c<1?h(e,o,s,a):c<1e6?h(e,o,s):h(e,o,s,{notation:"compact",...n}):""}s.createFormatters=function({locale:e="en"}){return{formatNumber:c.bind(null,{locale:e}),formatCurrency:l.bind(null,{locale:e}),formatCurrencyCompact:u.bind(null,{locale:e}),formatCurrencyWithMinThreshold:d.bind(null,{locale:e}),formatCurrencyTokenPrice:p.bind(null,{locale:e}),formatToken:h.bind(null,{locale:e}),formatTokenQuantity:m.bind(null,{locale:e})}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/utils/formatters.cjs"}],[1405,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeoutWithRetry=void 0;const n=e("@metamask/utils"),r=new Error("timeout");s.timeoutWithRetry=async function(e,t,s){(0,n.assert)(s>=0,"maxRetries must be greater than or equal to 0");let a=0;for(;a<=s;)try{return await Promise.race([e(),new Promise((e,s)=>setTimeout(()=>s(r),t))])}catch(e){if(e===r&&a<s){a+=1;continue}throw e}}}}},{package:"@metamask/assets-controllers",file:"node_modules/@metamask/assets-controllers/dist/utils/timeout-with-retry.cjs"}],[1406,{"./errors":1407,"./packer":1410,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.decodeSingle=s.decode=s.encodePacked=s.encodeSingle=s.encode=void 0;const n=e("@metamask/utils"),r=e("./errors"),a=e("./packer");s.encode=(e,t,s,n)=>{try{return(0,a.pack)({types:e,values:t,packed:s,tight:n})}catch(e){if(e instanceof r.ParserError)throw new r.ParserError(`Unable to encode value: ${e.message}`,e);throw new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(e)}`,e)}};s.encodeSingle=(e,t)=>(0,s.encode)([e],[t]);s.encodePacked=(e,t,n)=>(0,s.encode)(e,t,!0,n);s.decode=(e,t)=>{const s=(0,n.createBytes)(t);try{return(0,a.unpack)(e,s)}catch(e){if(e instanceof r.ParserError)throw new r.ParserError(`Unable to decode value: ${e.message}`,e);throw new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(e)}`,e)}};s.decodeSingle=(e,t)=>{const a=(0,s.decode)([e],t);return(0,n.assert)(1===a.length,new r.ParserError("Decoded value array has unexpected length.")),a[0]}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/abi.js"}],[1407,{"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ParserError=s.getErrorStack=s.getErrorMessage=void 0;const n=e("@metamask/utils");s.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";s.getErrorStack=e=>e instanceof Error?e.stack:undefined;class r extends Error{constructor(e,t){super(e),this.name="ParserError";const n=(0,s.getErrorStack)(t);n&&(this.stack=n)}}s.ParserError=r}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/errors.js"}],[1408,{"./abi":1406,"./errors":1407,"./types":1423},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./abi"),s),r(e("./errors"),s),r(e("./types"),s)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/index.js"}],[1409,{"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.iterate=void 0;const n=e("@metamask/utils");s.iterate=function*(e,t=32){for(let s=0;s<e.length;s+=t){const r=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t===0,"Length must be a multiple of the size."),s+=e},a=e.subarray(s);yield{skip:r,value:a}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1410,{"./errors":1407,"./iterator":1409,"./parsers":1417,"./utils":1425,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.unpack=s.pack=s.isDynamicParser=s.getParser=void 0;const n=e("@metamask/utils"),r=e("./errors"),a=e("./iterator"),i=e("./parsers"),o=e("./utils");s.getParser=e=>{const t={address:i.address,array:i.array,bool:i.bool,bytes:i.bytes,fixedBytes:i.fixedBytes,function:i.fn,number:i.number,string:i.string,tuple:i.tuple},s=t[e];if(s)return s;const n=Object.values(t).find(t=>t.isType(e));if(n)return n;throw new r.ParserError(`The type "${e}" is not supported.`)};s.isDynamicParser=(e,t)=>{const{isDynamic:s}=e;return"function"==typeof s?s(t):s};s.pack=({types:e,values:t,packed:a=!1,tight:i=!1,arrayPacked:c=!1,byteArray:l=new Uint8Array})=>{(0,n.assert)(e.length===t.length,new r.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:u,dynamicBuffer:d,pointers:h}=e.reduce(({staticBuffer:e,dynamicBuffer:r,pointers:o},l,u)=>{const d=(0,s.getParser)(l),h=t[u];if(a||c||!(0,s.isDynamicParser)(d,l))return{staticBuffer:d.encode({buffer:e,value:h,type:l,packed:a,tight:i}),dynamicBuffer:r,pointers:o};return{staticBuffer:(0,n.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:r,value:h,type:l,packed:a,tight:i}),pointers:[...o,{position:e.length,pointer:r.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!a&&!c||0===d.length,new r.ParserError("Invalid pack state."));const p=u.length,m=h.reduce((e,{pointer:t,position:s})=>{const r=(0,o.padStart)((0,n.numberToBytes)(p+t));return(0,o.set)(e,r,s)},u);return(0,n.concatBytes)([l,m,d])};s.unpack=(e,t)=>{const i=(0,a.iterate)(t);return e.map(e=>{const{value:{value:a,skip:o},done:c}=i.next();(0,n.assert)(!c,new r.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const l=(0,s.getParser)(e);if((0,s.isDynamicParser)(l,e)){const s=(0,n.bytesToNumber)(a.subarray(0,32)),r=t.subarray(s);return l.decode({type:e,value:r,skip:o})}return l.decode({type:e,value:a,skip:o})})}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/packer.js"}],[1411,{"../errors":1407,"../utils":1425,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.address=s.getAddress=void 0;const n=e("@metamask/utils"),r=e("../errors"),a=e("../utils");s.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new r.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,a.padStart)(t,20)},s.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const i=(0,s.getAddress)(t);if(r)return(0,n.concatBytes)([e,i]);const o=(0,a.padStart)(i);return(0,n.concatBytes)([e,o])},decode:({value:e})=>(0,n.add0x)((0,n.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1412,{"../errors":1407,"../packer":1410,"../utils":1425,"./fixed-bytes":1415,"./tuple":1421,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.array=s.getTupleType=s.getArrayType=s.isArrayType=void 0;const n=e("@metamask/utils"),r=e("../errors"),a=e("../packer"),i=e("../utils"),o=e("./fixed-bytes"),c=e("./tuple"),l=/^(?<type>.*)\[(?<length>\d*?)\]$/u;s.isArrayType=e=>l.test(e);s.getArrayType=e=>{const t=e.match(l);return(0,n.assert)(t?.groups?.type,new r.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};s.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,s.array={isDynamic(e){const[t,n]=(0,s.getArrayType)(e);return n===undefined||(0,a.isDynamicParser)((0,a.getParser)(t),t)},isType:e=>(0,s.isArrayType)(e),getByteLength(e){(0,n.assert)((0,s.isArrayType)(e),new r.ParserError(`Expected an array type, but received "${e}".`));const[t,i]=(0,s.getArrayType)(e);return(0,a.isDynamicParser)(this,e)||i===undefined?32:c.tuple.getByteLength((0,s.getTupleType)(t,i))},encode({type:e,buffer:t,value:l,packed:u,tight:d}){const[h,p]=(0,s.getArrayType)(e);if((0,n.assert)(!u||!(0,s.isArrayType)(h),new r.ParserError("Cannot pack nested arrays.")),u&&(0,a.isDynamicParser)((0,a.getParser)(h),h))return(0,a.pack)({types:new Array(l.length).fill(h),values:l,byteArray:t,packed:u,arrayPacked:!0,tight:d});if(p)return(0,n.assert)(p===l.length,new r.ParserError(`Array length does not match type length. Expected a length of ${p}, but received ${l.length}.`)),c.tuple.encode({type:(0,s.getTupleType)(h,p),buffer:t,value:l,packed:o.fixedBytes.isType(h)&&d,tight:d});if(u)return(0,a.pack)({types:new Array(l.length).fill(h),values:l,byteArray:t,packed:o.fixedBytes.isType(h)&&d,arrayPacked:!0,tight:d});const m=(0,i.padStart)((0,n.numberToBytes)(l.length));return(0,a.pack)({types:new Array(l.length).fill(h),values:l,byteArray:(0,n.concatBytes)([t,m]),packed:u,tight:d})},decode({type:e,value:t,...i}){const[o,l]=(0,s.getArrayType)(e);if(l){const e=c.tuple.decode({type:(0,s.getTupleType)(o,l),value:t,...i});return(0,n.assert)(e.length===l,new r.ParserError(`Array length does not match type length. Expected a length of ${l}, but received ${e.length}.`)),e}const u=(0,n.bytesToNumber)(t.subarray(0,32));return(0,a.unpack)(new Array(u).fill(o),t.subarray(32))}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1413,{"../errors":1407,"./number":1418,"@metamask/superstruct":3415,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.bool=s.getBooleanValue=void 0;const n=e("@metamask/superstruct"),r=e("@metamask/utils"),a=e("../errors"),i=e("./number"),o=(0,n.coerce)((0,n.boolean)(),(0,n.union)([(0,n.literal)("true"),(0,n.literal)("false")]),e=>"true"===e);s.getBooleanValue=e=>{try{return(0,n.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new a.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},s.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:a}){const o=(0,s.getBooleanValue)(t);return n?(0,r.concatBytes)([e,(0,r.bigIntToBytes)(o)]):i.number.encode({type:"uint256",buffer:e,value:o,packed:n,tight:a})},decode:e=>i.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[1414,{"../utils":1425,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.bytes=void 0;const n=e("@metamask/utils"),r=e("../utils");s.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:s}){const a=(0,n.createBytes)(t);if(s)return(0,n.concatBytes)([e,a]);const i=32*Math.ceil(a.byteLength/32);return(0,n.concatBytes)([e,(0,r.padStart)((0,n.numberToBytes)(a.byteLength)),(0,r.padEnd)(a,i)])},decode({value:e}){const t=e.subarray(0,32),s=(0,n.bytesToNumber)(t);return e.slice(32,32+s)}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1415,{"../errors":1407,"../utils":1425,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fixedBytes=s.getByteLength=void 0;const n=e("@metamask/utils"),r=e("../errors"),a=e("../utils"),i=/^bytes([0-9]{1,2})$/u;s.getByteLength=e=>{const t=e.match(i)?.[1];(0,n.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const s=Number(t);return(0,n.assert)(s>0&&s<=32,new r.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),s},s.fixedBytes={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:o}){const c=(0,s.getByteLength)(e),l=(0,n.createBytes)(i);return(0,n.assert)(l.length<=c,new r.ParserError(`Expected a value of length ${c}, but received a value of length ${l.length}.`)),o?(0,n.concatBytes)([t,(0,a.padEnd)(l,c)]):(0,n.concatBytes)([t,(0,a.padEnd)(l)])},decode({type:e,value:t}){const n=(0,s.getByteLength)(e);return t.slice(0,n)}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1416,{"../errors":1407,"./fixed-bytes":1415,"@metamask/superstruct":3415,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fn=s.getFunction=void 0;const n=e("@metamask/superstruct"),r=e("@metamask/utils"),a=e("../errors"),i=e("./fixed-bytes"),o=(0,n.coerce)((0,n.object)({address:r.StrictHexStruct,selector:r.StrictHexStruct}),(0,n.union)([r.StrictHexStruct,(0,n.instance)(Uint8Array)]),e=>{const t=(0,r.createBytes)(e);return(0,r.assert)(24===t.length,new a.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,r.bytesToHex)(t.subarray(0,20)),selector:(0,r.bytesToHex)(t.subarray(20,24))}});s.getFunction=e=>{const t=(0,n.create)(e,o);return(0,r.concatBytes)([(0,r.hexToBytes)(t.address),(0,r.hexToBytes)(t.selector)])},s.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n,tight:r}){const a=(0,s.getFunction)(t);return i.fixedBytes.encode({type:"bytes24",buffer:e,value:a,packed:n,tight:r})},decode:({value:e})=>({address:(0,r.bytesToHex)(e.slice(0,20)),selector:(0,r.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1417,{"./address":1411,"./array":1412,"./bool":1413,"./bytes":1414,"./fixed-bytes":1415,"./function":1416,"./number":1418,"./parser":1419,"./string":1420,"./tuple":1421},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./address"),s),r(e("./array"),s),r(e("./bool"),s),r(e("./bytes"),s),r(e("./fixed-bytes"),s),r(e("./function"),s),r(e("./number"),s),r(e("./parser"),s),r(e("./string"),s),r(e("./tuple"),s)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1418,{"../errors":1407,"../utils":1425,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.number=s.getBigInt=s.assertNumberLength=s.getLength=s.isSigned=void 0;const n=e("@metamask/utils"),r=e("../errors"),a=e("../utils"),i=/^u?int(?<length>[0-9]*)?$/u;s.isSigned=e=>!e.startsWith("u");s.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(i);(0,n.assert)(t?.groups?.length,new r.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const s=parseInt(t.groups.length,10);return(0,n.assert)(s>=8&&s<=256,new r.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,n.assert)(s%8==0,new r.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),s};s.assertNumberLength=(e,t)=>{const a=(0,s.getLength)(t),i=BigInt(2)**BigInt(a-((0,s.isSigned)(t)?1:0))-BigInt(1);(0,s.isSigned)(t)?(0,n.assert)(e>=-(i+BigInt(1))&&e<=i,new r.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,n.assert)(e<=i,new r.ParserError(`Number "${e}" is out of range for type "${t}".`))};s.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new r.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},s.number={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:r,packed:i}){const o=(0,s.getBigInt)(r);if((0,s.assertNumberLength)(o,e),(0,s.isSigned)(e)){if(i){const r=(0,s.getLength)(e)/8;return(0,n.concatBytes)([t,(0,n.signedBigIntToBytes)(o,r)])}return(0,n.concatBytes)([t,(0,a.padStart)((0,n.signedBigIntToBytes)(o,32))])}if(i){const r=(0,s.getLength)(e)/8;return(0,n.concatBytes)([t,(0,a.padStart)((0,n.bigIntToBytes)(o),r)])}return(0,n.concatBytes)([t,(0,a.padStart)((0,n.bigIntToBytes)(o))])},decode({type:e,value:t}){const r=t.subarray(0,32);if((0,s.isSigned)(e)){const t=(0,n.bytesToSignedBigInt)(r);return(0,s.assertNumberLength)(t,e),t}const a=(0,n.bytesToBigInt)(r);return(0,s.assertNumberLength)(a,e),a}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1419,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1420,{"./bytes":1414,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.string=void 0;const n=e("@metamask/utils"),r=e("./bytes");s.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:s,tight:a})=>r.bytes.encode({type:"bytes",buffer:e,value:(0,n.stringToBytes)(t),packed:s,tight:a}),decode:e=>(0,n.bytesToString)(r.bytes.decode(e))}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1421,{"../errors":1407,"../packer":1410,"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.tuple=s.getTupleElements=void 0;const n=e("@metamask/utils"),r=e("../errors"),a=e("../packer"),i=/^\((.+)\)$/u;s.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new r.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let s="",a=0;for(let n=1;n<e.length-1;n++){const r=e[n];","===r&&0===a?(t.push(s.trim()),s=""):(s+=r,"("===r?a+=1:")"===r&&(a-=1))}return s.trim()&&t.push(s.trim()),t},s.tuple={isDynamic:e=>(0,s.getTupleElements)(e).some(e=>{const t=(0,a.getParser)(e);return(0,a.isDynamicParser)(t,e)}),isType:e=>(e=>i.test(e))(e),getByteLength(e){if((0,a.isDynamicParser)(this,e))return 32;return(0,s.getTupleElements)(e).reduce((e,t)=>e+(0,a.getParser)(t).getByteLength(t),0)},encode({type:e,buffer:t,value:n,packed:r,tight:i}){const o=(0,s.getTupleElements)(e);return(0,a.pack)({types:o,values:n,byteArray:t,packed:r,tight:i})},decode({type:e,value:t,skip:n}){const r=(0,s.getTupleElements)(e);return n(this.getByteLength(e)-32),(0,a.unpack)(r,t)}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1422,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1423,{"./abi":1422},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./abi"),s)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/types/index.js"}],[1424,{"@metamask/utils":1436},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.padEnd=s.padStart=s.set=void 0;const n=e("@metamask/utils");s.set=(e,t,s)=>(0,n.concatBytes)([e.subarray(0,s),t,e.subarray(s+t.length)]);s.padStart=(e,t=32)=>{const s=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([s,e])};s.padEnd=(e,t=32)=>{const s=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,s])}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1425,{"./buffer":1424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./buffer"),s)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1426,{"./errors.cjs":1434,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const n=e("@metamask/superstruct"),r=e("./errors.cjs");function a(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=i,s.assert=function(e,t="Assertion failed.",s=i){if(!e){if(t instanceof Error)throw t;throw a(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=i){try{(0,n.assert)(e,t)}catch(e){throw a(o,`${s}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[1427,{"./assert.cjs":1426,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,a=t.characterSet??"base64";let i,o;return"base64"===a?i=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===a),i=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[1428,{"./assert.cjs":1426,"./hex.cjs":1435,"@scure/base":3634,buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const n=e("@scure/base"),r=e("./assert.cjs"),a=e("./hex.cjs");const i=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function o(e){return e instanceof Uint8Array}function c(e){(0,r.assert)(o(e),"Value must be a Uint8Array.")}function l(e){if(c(e),0===e.length)return"0x";const t=i(),s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=t[e[n]];return(0,a.add0x)(s.join(""))}function u(e){c(e);const t=l(e);return BigInt(t)}function d(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,a.assertIsHexString)(e);const t=(0,a.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,n=new Uint8Array(s.length/2);for(let e=0;e<n.length;e++){const t=s.charCodeAt(2*e),r=s.charCodeAt(2*e+1),a=t-(t<58?48:87),i=r-(r<58?48:87);n[e]=16*a+i}return n}function h(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return d(e.toString(16))}function p(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return d(e.toString(16))}function m(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function f(e){if("bigint"==typeof e)return h(e);if("number"==typeof e)return p(e);if("string"==typeof e)return e.startsWith("0x")?d(e):m(e);if(o(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=o,s.assertIsBytes=c,s.bytesToHex=l,s.bytesToBigInt=u,s.bytesToSignedBigInt=function(e){c(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){c(e);const t=u(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return c(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return c(e),n.base64.encode(e)},s.hexToBytes=d,s.bigIntToBytes=h,s.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return n.reverse()},s.numberToBytes=p,s.stringToBytes=m,s.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},s.valueToBytes=f,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let n=0;n<e.length;n++){const r=f(e[n]);t[n]=r,s+=r.length}const n=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)n.set(t[e],s),s+=t[e].length;return n},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[1429,{"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAssetId=s.isCaipAssetType=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAssetIdStruct=s.CaipAssetTypeStruct=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ASSET_ID_REGEX=s.CAIP_ASSET_TYPE_REGEX=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function r(e){return(0,n.is)(e,s.CaipNamespaceStruct)}function a(e){return(0,n.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,s.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),s.CaipAssetTypeStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ASSET_TYPE_REGEX),s.CaipAssetIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,n.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=r,s.isCaipReference=a,s.isCaipAccountId=function(e){return(0,n.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,n.is)(e,s.CaipAccountAddressStruct)},s.isCaipAssetType=function(e){return(0,n.is)(e,s.CaipAssetTypeStruct)},s.isCaipAssetId=function(e){return(0,n.is)(e,s.CaipAssetIdStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1430,{"./base64.cjs":1427,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),r=e("./base64.cjs");s.ChecksumStruct=(0,n.size)((0,r.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[1431,{"./assert.cjs":1426,"./bytes.cjs":1428,"./hex.cjs":1435,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),i.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),l=(0,n.coerce)((0,n.bigint)(),o,BigInt),u=((0,n.union)([i.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,n.coerce)(i.StrictHexStruct,(0,n.instance)(Uint8Array),a.bytesToHex);s.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[1432,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach((s,n,r)=>e.call(t,s,n,this))}get(e){return a(this,n,"f").get(e)}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach((s,n,r)=>e.call(t,s,n,this))}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[1433,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1434,{"./misc.cjs":1440,"pony-cause":5484},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const n=e("pony-cause"),r=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=a,s.isErrorWithMessage=i,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,r.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),a(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[1435,{"./assert.cjs":1426,"./bytes.cjs":1428,"@metamask/superstruct":3415,"@noble/hashes/sha3":3609},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const n=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),a=e("./assert.cjs"),i=e("./bytes.cjs");function o(e){return(0,n.is)(e,s.HexStruct)}function c(e){return(0,n.is)(e,s.StrictHexStruct)}function l(e){(0,a.assert)((0,n.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,i.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map((e,t)=>{const s=o[t];return(0,a.assert)((0,n.is)(s,(0,n.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e}).join("")}`}function u(e){return!!(0,n.is)(e,s.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,a.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,a.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,n.is)(e,s.HexAddressStruct)||u(e)},s.getChecksumAddress=l,s.isValidChecksumAddress=u,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=d}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[1436,{"./assert.cjs":1426,"./base64.cjs":1427,"./bytes.cjs":1428,"./caip-types.cjs":1429,"./checksum.cjs":1430,"./coercers.cjs":1431,"./collections.cjs":1432,"./encryption-types.cjs":1433,"./errors.cjs":1434,"./hex.cjs":1435,"./json.cjs":1437,"./keyring.cjs":1438,"./logging.cjs":1439,"./misc.cjs":1440,"./number.cjs":1441,"./opaque.cjs":1442,"./promise.cjs":1443,"./time.cjs":1444,"./transaction-types.cjs":1445,"./versions.cjs":1446},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./assert.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caip-types.cjs"),s),r(e("./checksum.cjs"),s),r(e("./coercers.cjs"),s),r(e("./collections.cjs"),s),r(e("./encryption-types.cjs"),s),r(e("./errors.cjs"),s),r(e("./hex.cjs"),s),r(e("./json.cjs"),s),r(e("./keyring.cjs"),s),r(e("./logging.cjs"),s),r(e("./misc.cjs"),s),r(e("./number.cjs"),s),r(e("./opaque.cjs"),s),r(e("./promise.cjs"),s),r(e("./time.cjs"),s),r(e("./transaction-types.cjs"),s),r(e("./versions.cjs"),s)}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/index.cjs"}],[1437,{"./assert.cjs":1426,"./misc.cjs":1440,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const s=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],s)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!i(s)||e.validator(t,s),refiner:(t,s)=>!i(s)||e.refiner(t,s)})}s.object=e=>(0,n.object)(e),s.exactOptional=o;function c(e){return(0,n.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e)),(0,n.string)(),(0,n.array)((0,n.lazy)(()=>s.UnsafeJsonStruct)),(0,n.record)((0,n.string)(),(0,n.lazy)(()=>s.UnsafeJsonStruct))]),s.JsonStruct=(0,n.coerce)(s.UnsafeJsonStruct,(0,n.any)(),e=>((0,r.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,(e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,r.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,n.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(s.JsonStruct),stack:o((0,n.string)())}),s.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),s.JsonStruct),(0,n.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,n.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,n.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,n.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,n.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,n.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,n.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,n.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,n.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/json.cjs"}],[1438,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[1439,{debug:4623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const r=(0,n(e("debug")).default)("metamask");s.createProjectLogger=function(e){return r.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[1440,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=n,s.calculateStringSize=function(e){return e.split("").reduce((e,t)=>n(t)?e+1:e+2,0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[1441,{"./assert.cjs":1426,"./hex.cjs":1435},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const n=e("./assert.cjs"),r=e("./hex.cjs");s.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/number.cjs"}],[1442,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[1443,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const n=new Promise((e,n)=>{t=e,s=n});return e&&n.catch(e=>{}),{promise:n,resolve:t,reject:s}}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[1444,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return n(e,"count"),e*t},s.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/time.cjs"}],[1445,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1446,{"./assert.cjs":1426,"@metamask/superstruct":3415,semver:5987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const n=e("@metamask/superstruct"),r=e("semver"),a=e("./assert.cjs");s.VersionStruct=(0,n.refine)((0,n.string)(),"Version",e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`),s.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`),s.isValidSemVerVersion=function(e){return(0,n.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,n.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,r.gt)(e,t)},s.gtRange=function(e,t){return(0,r.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/assets-controllers>@metamask/abi-utils>@metamask/utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/abi-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[1447,{"./utils.cjs":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},d=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.CacheManager=void 0;const h=e("./utils.cjs");s.CacheManager=class{constructor({cacheTTL:e=300,maxCacheSize:t=100,initialCache:s={},updateState:c}){n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),u(this,r,e,"f"),u(this,a,t,"f"),u(this,i,new Map(Object.entries(s)),"f"),u(this,o,c,"f"),d(this,n,"m",l).call(this)}setTTL(e){u(this,r,e,"f")}getTTL(){return d(this,r,"f")}setMaxSize(e){u(this,a,e,"f"),d(this,n,"m",l).call(this)}getMaxSize(){return d(this,a,"f")}getSize(){return d(this,i,"f").size}clear(){d(this,i,"f").clear(),d(this,n,"m",c).call(this)}get(e){const t=d(this,i,"f").get(e);if(!t)return undefined;return(0,h.fetchTimeNow)()-t.timestamp>d(this,r,"f")?(d(this,i,"f").delete(e),d(this,n,"m",c).call(this),undefined):t.data}set(e,t){d(this,i,"f").set(e,{data:t,timestamp:(0,h.fetchTimeNow)()}),d(this,n,"m",l).call(this),d(this,n,"m",c).call(this)}delete(e){const t=d(this,i,"f").delete(e);return t&&d(this,n,"m",c).call(this),t}keys(){return Array.from(d(this,i,"f").keys())}getAllEntries(){return Object.fromEntries(d(this,i,"f"))}},r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(){d(this,o,"f").call(this,Object.fromEntries(d(this,i,"f")))},l=function(){if(d(this,i,"f").size<=d(this,a,"f"))return;const e=d(this,i,"f").size-d(this,a,"f");let t=0;for(const s of d(this,i,"f").keys()){if(t>=e)break;d(this,i,"f").delete(s),t+=1}}}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/CacheManager.cjs"}],[1448,{"./utils.cjs":1453},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.deepCopyPathTrie=s.convertListToTrie=s.matchedPathPrefix=s.deleteFromTrie=s.insertToTrie=s.isTerminal=void 0;const n=e("./utils.cjs");s.isTerminal=e=>!(!e||"object"!=typeof e)&&0===Object.keys(e).length;s.insertToTrie=(e,t)=>{const{hostname:r,pathComponents:a}=(0,n.getHostnameAndPathComponents)(e);if(0===a.length||!r)return;const i=r.toLowerCase();t[i]||(t[i]={});let o=t[i];for(let e=0;e<a.length;e++){const t=a[e],n=e===a.length-1;if(o[t]!==undefined){if(!n&&(0,s.isTerminal)(o[t]))return;if(n)return void((0,s.isTerminal)(o[t])||(o[t]={}));o=o[t];continue}if(n)return void(o[t]={});const r={};o[t]=r,o=r}};s.deleteFromTrie=(e,t)=>{const{hostname:r,pathComponents:a}=(0,n.getHostnameAndPathComponents)(e),i=r.toLowerCase();if(0===a.length||!t[i])return;const o=[{node:t,key:i}];let c=t[i];for(const e of a){if(!c[e])return;o.push({node:c,key:e}),c=c[e]}const l=o[o.length-1];delete l.node[l.key];for(let e=o.length-2;e>=0;e--){const{node:t,key:n}=o[e];if(!(0,s.isTerminal)(t[n]))break;delete t[n]}};s.matchedPathPrefix=(e,t)=>{const{hostname:r,pathComponents:a}=(0,n.getHostnameAndPathComponents)(e),i=r.toLowerCase();if(0===a.length||!r||!t[i])return null;let o=`${r}/`,c=t[i];for(const e of a){if(!c[e])return null;if(c=c[e],(0,s.isTerminal)(c))return o+=e,o;o+=`${e}/`}return null};s.convertListToTrie=(e=[])=>{const t={};if(!e||!Array.isArray(e))return t;for(const n of e)(0,s.insertToTrie)(n,t);return t};const r=e=>{const t={};for(const[s,n]of Object.entries(e))t[s]=r(n);return t};s.deepCopyPathTrie=e=>e?r(e):{}}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/PathTrie.cjs"}],[1449,{"./CacheManager.cjs":1447,"./PathTrie.cjs":1448,"./PhishingDetector.cjs":1450,"./types.cjs":1452,"./utils.cjs":1453,"@metamask/base-controller":1520,"@metamask/controller-utils":1639,"punycode/punycode.js":5556},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k,w,I,v=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},N=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.PhishingController=s.phishingListKeyNameMap=s.ListNames=s.ListKeys=s.C2_DOMAIN_BLOCKLIST_URL=s.METAMASK_HOTLIST_DIFF_URL=s.METAMASK_STALELIST_URL=s.STALELIST_REFRESH_INTERVAL=s.HOTLIST_REFRESH_INTERVAL=s.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=s.DEFAULT_ADDRESS_SCAN_CACHE_MAX_SIZE=s.DEFAULT_ADDRESS_SCAN_CACHE_TTL=s.DEFAULT_TOKEN_SCAN_CACHE_MAX_SIZE=s.DEFAULT_TOKEN_SCAN_CACHE_TTL=s.DEFAULT_URL_SCAN_CACHE_MAX_SIZE=s.DEFAULT_URL_SCAN_CACHE_TTL=s.ADDRESS_SCAN_ENDPOINT=s.TOKEN_BULK_SCANNING_ENDPOINT=s.SECURITY_ALERTS_BASE_URL=s.PHISHING_DETECTION_BULK_SCAN_ENDPOINT=s.PHISHING_DETECTION_SCAN_ENDPOINT=s.PHISHING_DETECTION_BASE_URL=s.C2_DOMAIN_BLOCKLIST_ENDPOINT=s.CLIENT_SIDE_DETECION_BASE_URL=s.METAMASK_HOTLIST_DIFF_FILE=s.METAMASK_STALELIST_FILE=s.PHISHING_CONFIG_BASE_URL=void 0;const P=e("@metamask/base-controller"),j=e("@metamask/controller-utils"),R=e("punycode/punycode.js"),O=e("./CacheManager.cjs"),x=e("./PathTrie.cjs"),D=e("./PhishingDetector.cjs"),M=e("./types.cjs"),L=e("./utils.cjs");var B,F;s.PHISHING_CONFIG_BASE_URL="https://phishing-detection.api.cx.metamask.io",s.METAMASK_STALELIST_FILE="/v1/stalelist",s.METAMASK_HOTLIST_DIFF_FILE="/v2/diffsSince",s.CLIENT_SIDE_DETECION_BASE_URL="https://client-side-detection.api.cx.metamask.io",s.C2_DOMAIN_BLOCKLIST_ENDPOINT="/v1/request-blocklist",s.PHISHING_DETECTION_BASE_URL="https://dapp-scanning.api.cx.metamask.io",s.PHISHING_DETECTION_SCAN_ENDPOINT="v2/scan",s.PHISHING_DETECTION_BULK_SCAN_ENDPOINT="bulk-scan",s.SECURITY_ALERTS_BASE_URL="https://security-alerts.api.cx.metamask.io",s.TOKEN_BULK_SCANNING_ENDPOINT="/token/scan-bulk",s.ADDRESS_SCAN_ENDPOINT="/address/evm/scan",s.DEFAULT_URL_SCAN_CACHE_TTL=900,s.DEFAULT_URL_SCAN_CACHE_MAX_SIZE=250,s.DEFAULT_TOKEN_SCAN_CACHE_TTL=900,s.DEFAULT_TOKEN_SCAN_CACHE_MAX_SIZE=1e3,s.DEFAULT_ADDRESS_SCAN_CACHE_TTL=900,s.DEFAULT_ADDRESS_SCAN_CACHE_MAX_SIZE=1e3,s.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=300,s.HOTLIST_REFRESH_INTERVAL=300,s.STALELIST_REFRESH_INTERVAL=2592e3,s.METAMASK_STALELIST_URL=`${s.PHISHING_CONFIG_BASE_URL}${s.METAMASK_STALELIST_FILE}`,s.METAMASK_HOTLIST_DIFF_URL=`${s.PHISHING_CONFIG_BASE_URL}${s.METAMASK_HOTLIST_DIFF_FILE}`,s.C2_DOMAIN_BLOCKLIST_URL=`${s.CLIENT_SIDE_DETECION_BASE_URL}${s.C2_DOMAIN_BLOCKLIST_ENDPOINT}`,function(e){e.EthPhishingDetectConfig="eth_phishing_detect_config"}(B||(s.ListKeys=B={})),function(e){e.MetaMask="MetaMask"}(F||(s.ListNames=F={}));const U={[F.MetaMask]:B.EthPhishingDetectConfig};s.phishingListKeyNameMap={[B.EthPhishingDetectConfig]:F.MetaMask};const H="PhishingController",W={phishingLists:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},whitelist:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},whitelistPaths:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},hotlistLastFetched:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},stalelistLastFetched:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},c2DomainBlocklistLastFetched:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},urlScanCache:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},tokenScanCache:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},addressScanCache:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};class $ extends P.BaseController{constructor({stalelistRefreshInterval:e=s.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=s.HOTLIST_REFRESH_INTERVAL,c2DomainBlocklistRefreshInterval:b=s.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL,urlScanCacheTTL:S=s.DEFAULT_URL_SCAN_CACHE_TTL,urlScanCacheMaxSize:y=s.DEFAULT_URL_SCAN_CACHE_MAX_SIZE,tokenScanCacheTTL:E=s.DEFAULT_TOKEN_SCAN_CACHE_TTL,tokenScanCacheMaxSize:T=s.DEFAULT_TOKEN_SCAN_CACHE_MAX_SIZE,addressScanCacheTTL:k=s.DEFAULT_ADDRESS_SCAN_CACHE_TTL,addressScanCacheMaxSize:w=s.DEFAULT_ADDRESS_SCAN_CACHE_MAX_SIZE,messenger:I,state:P={}}){super({name:H,metadata:W,messenger:I,state:{phishingLists:[],whitelist:[],whitelistPaths:{},hotlistLastFetched:0,stalelistLastFetched:0,c2DomainBlocklistLastFetched:0,urlScanCache:{},tokenScanCache:{},addressScanCache:{},...P}}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),this.scanUrl=async e=>{const[t,n]=(0,L.getHostnameFromWebUrl)(e);if(!n)return{hostname:"",recommendedAction:M.RecommendedAction.None,fetchError:"url is not a valid web URL"};const r=N(this,c,"f").get(t);if(r)return r;const a=await(0,j.safelyExecuteWithTimeout)(async()=>{const e=await fetch(`${s.PHISHING_DETECTION_BASE_URL}/${s.PHISHING_DETECTION_SCAN_ENDPOINT}?url=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)return{error:`${e.status} ${e.statusText}`};return await e.json()},!0,8e3);if(!a)return{hostname:"",recommendedAction:M.RecommendedAction.None,fetchError:"timeout of 8000ms exceeded"};if("error"in a)return{hostname:"",recommendedAction:M.RecommendedAction.None,fetchError:a.error};const i={hostname:t,recommendedAction:a.recommendedAction};return N(this,c,"f").set(t,i),i},this.bulkScanUrls=async e=>{if(!e||0===e.length)return{results:{},errors:{}};if(e.length>250)return{results:{},errors:{too_many_urls:["Maximum of 250 URLs allowed per request"]}};const t={results:{},errors:{}},s={},n=[];for(const r of e){if(r.length>2048){t.errors[r]=["URL length must not exceed 2048 characters"];continue}const[e,a]=(0,L.getHostnameFromWebUrl)(r);if(!a){t.errors[r]=["url is not a valid web URL"];continue}const i=N(this,c,"f").get(e);i?t.results[r]=i:(s[r]=e,n.push(r))}if(n.length>0){const e=50,r=[];for(let t=0;t<n.length;t+=e)r.push(n.slice(t,t+e));(await Promise.all(r.map(e=>N(this,_,"f").call(this,e)))).forEach(e=>{Object.entries(e.results).forEach(([e,n])=>{const r=s[e];r&&N(this,c,"f").set(r,n),t.results[e]=n}),Object.entries(e.errors).forEach(([e,s])=>{t.errors[e]=[...t.errors[e]||[],...s]})})}return t},C.set(this,async(e,t)=>{const n=await(0,j.safelyExecuteWithTimeout)(async()=>{const n=await fetch(`${s.SECURITY_ALERTS_BASE_URL}${s.TOKEN_BULK_SCANNING_ENDPOINT}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({chain:e,tokens:t})});if(!n.ok)return{error:`${n.status} ${n.statusText}`,status:n.status,statusText:n.statusText};return await n.json()},!0,8e3);return n?"error"in n&&"status"in n&&"statusText"in n?(console.warn(`Token bulk screening API error: ${n.status} ${n.statusText}`),null):n:(console.error("Error scanning tokens: timeout of 8000ms exceeded"),null)}),this.scanAddress=async(e,t)=>{if(!t||!e)return{result_type:M.AddressScanResultType.ErrorResult,label:""};const n=e.toLowerCase(),r=t.toLowerCase(),a=(0,L.resolveChainName)(n);if(!a)return{result_type:M.AddressScanResultType.ErrorResult,label:""};const i=(0,L.buildCacheKey)(n,r),o=N(this,u,"f").get(i);if(o)return{result_type:o.result_type,label:o.label};const c=await(0,j.safelyExecuteWithTimeout)(async()=>{const e=await fetch(`${s.SECURITY_ALERTS_BASE_URL}${s.ADDRESS_SCAN_ENDPOINT}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({chain:a,address:r})});if(!e.ok)return{error:`${e.status} ${e.statusText}`};return await e.json()},!0,5e3);if(!c)return{result_type:M.AddressScanResultType.ErrorResult,label:""};if("error"in c)return{result_type:M.AddressScanResultType.ErrorResult,label:""};const l={result_type:c.result_type,label:c.label};return N(this,u,"f").set(i,l),{result_type:c.result_type,label:c.label}},this.bulkScanTokens=async e=>{const{chainId:t,tokens:s}=e;if(!s||0===s.length)return{};if(s.length>100)return console.warn("Maximum of 100 tokens allowed per request"),{};const n=t.toLowerCase(),r=(0,L.resolveChainName)(n);if(!r)return console.warn(`Unknown chain ID: ${t}`),{};const{cachedResults:a,tokensToFetch:i}=(0,L.splitCacheHits)(N(this,l,"f"),n,s),o={...a};if(i.length>0){const e=await N(this,C,"f").call(this,r,i);if(e?.results)for(const t of i){const s=t.toLowerCase(),r=e.results[s];if(r?.result_type){const e={result_type:r.result_type,chain:r.chain||n,address:r.address||s},t=(0,L.buildCacheKey)(n,s);N(this,l,"f").set(t,{result_type:r.result_type}),o[s]=e}}}return o},_.set(this,async e=>{const t=await(0,j.safelyExecuteWithTimeout)(async()=>{const t=await fetch(`${s.PHISHING_DETECTION_BASE_URL}/${s.PHISHING_DETECTION_BULK_SCAN_ENDPOINT}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({urls:e})});if(!t.ok)return{error:`${t.status} ${t.statusText}`,status:t.status,statusText:t.statusText};return await t.json()},!0,15e3);return t?"error"in t&&"status"in t&&"statusText"in t?{results:{},errors:{api_error:[`${t.status} ${t.statusText}`]}}:t:{results:{},errors:{network_error:["timeout of 15000ms exceeded"]}}}),v(this,a,e,"f"),v(this,i,t,"f"),v(this,o,b,"f"),v(this,m,N(this,n,"m",A).bind(this),"f"),v(this,c,new O.CacheManager({cacheTTL:S,maxCacheSize:y,initialCache:this.state.urlScanCache,updateState:e=>{this.update(t=>{t.urlScanCache=e})}}),"f"),v(this,l,new O.CacheManager({cacheTTL:E,maxCacheSize:T,initialCache:this.state.tokenScanCache,updateState:e=>{this.update(t=>{t.tokenScanCache=e})}}),"f"),v(this,u,new O.CacheManager({cacheTTL:k,maxCacheSize:w,initialCache:this.state.addressScanCache,updateState:e=>{this.update(t=>{t.addressScanCache=e})}}),"f"),N(this,n,"m",g).call(this),this.updatePhishingDetector(),N(this,n,"m",f).call(this)}updatePhishingDetector(){v(this,r,new D.PhishingDetector(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){v(this,a,e,"f")}setHotlistRefreshInterval(e){v(this,i,e,"f")}setC2DomainBlocklistRefreshInterval(e){v(this,o,e,"f")}setUrlScanCacheTTL(e){N(this,c,"f").setTTL(e)}setUrlScanCacheMaxSize(e){N(this,c,"f").setMaxSize(e)}clearUrlScanCache(){N(this,c,"f").clear()}isStalelistOutOfDate(){return(0,L.fetchTimeNow)()-this.state.stalelistLastFetched>=N(this,a,"f")}isHotlistOutOfDate(){return(0,L.fetchTimeNow)()-this.state.hotlistLastFetched>=N(this,i,"f")}isC2DomainBlocklistOutOfDate(){return(0,L.fetchTimeNow)()-this.state.c2DomainBlocklistLastFetched>=N(this,o,"f")}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist();this.isC2DomainBlocklistOutOfDate()&&await this.updateC2DomainBlocklist()}test(e){const t=(0,R.toASCII)(e),s=(0,L.getHostnameFromUrl)(t),n=s+(0,L.getPathnameFromUrl)(e);return(0,x.matchedPathPrefix)(n,this.state.whitelistPaths)||this.state.whitelist.includes(s||t)?{result:!1,type:M.PhishingDetectorResultType.All}:N(this,r,"f").check(t)}isBlockedRequest(e){const t=(0,R.toASCII)(e),s=(0,L.getHostnameFromUrl)(t);return this.state.whitelist.includes(s||t)?{result:!1,type:M.PhishingDetectorResultType.All}:N(this,r,"f").isMaliciousC2Domain(t)}bypass(e){const t=(0,R.toASCII)(e),s=(0,L.getHostnameFromUrl)(t),n=s+(0,L.getPathnameFromUrl)(e),{whitelist:a,whitelistPaths:i}=this.state,o=(0,x.matchedPathPrefix)(n,i);if(a.includes(s||t)||o)return;const c=N(this,r,"f").blockingPath(e);c?this.update(e=>{(0,x.insertToTrie)(c,e.whitelistPaths)}):this.update(e=>{e.whitelist.push(s||t)})}async updateC2DomainBlocklist(){if(N(this,p,"f"))await N(this,p,"f");else try{v(this,p,N(this,n,"m",w).call(this),"f"),await N(this,p,"f")}finally{v(this,p,undefined,"f")}}async updateHotlist(){if(N(this,d,"f"))await N(this,d,"f");else try{v(this,d,N(this,n,"m",k).call(this),"f"),await N(this,d,"f")}finally{v(this,d,undefined,"f")}}async updateStalelist(){if(N(this,h,"f"))await N(this,h,"f");else try{v(this,h,N(this,n,"m",T).call(this),"f"),await N(this,h,"f")}finally{v(this,h,undefined,"f")}}}s.PhishingController=$,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,C=new WeakMap,_=new WeakMap,n=new WeakSet,f=function(){this.messenger.subscribe("TransactionController:stateChange",N(this,m,"f"))},g=function(){this.messenger.registerActionHandler(`${H}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messenger.registerActionHandler(`${H}:testOrigin`,this.test.bind(this)),this.messenger.registerActionHandler(`${H}:bulkScanUrls`,this.bulkScanUrls.bind(this)),this.messenger.registerActionHandler(`${H}:bulkScanTokens`,this.bulkScanTokens.bind(this)),this.messenger.registerActionHandler(`${H}:scanAddress`,this.scanAddress.bind(this))},b=function(e){const{path:t}=e;return 2===t.length&&"transactions"===t[0]&&"number"==typeof t[1]},S=function(e){const{path:t}=e;return 3===t.length&&"transactions"===t[0]&&"number"==typeof t[1]&&"simulationData"===t[2]},A=function(e,t){try{const s=new Map;for(const r of t)if("remove"!==r.op)if(N(this,n,"m",b).call(this,r)){const e=r.value;N(this,n,"m",y).call(this,e,s)}else if(N(this,n,"m",S).call(this,r)){const t=r.path[1],a=e.transactions?.[t];N(this,n,"m",y).call(this,a,s)}N(this,n,"m",E).call(this,s)}catch(e){console.error("Error processing transaction state change:",e)}},y=function(e,t){const s=e.simulationData?.tokenBalanceChanges?.map(e=>e.address.toLowerCase());if(s&&s.length>0&&e.chainId){const n=e.chainId.toLowerCase();t.has(n)||t.set(n,new Set);const r=t.get(n);if(r)for(const e of s)r.add(e)}},E=function(e){for(const[t,s]of e)if(s.size>0){const e=Array.from(s);this.bulkScanTokens({chainId:t,tokens:e}).catch(e=>console.error(`Error scanning tokens for chain ${t}:`,e))}},T=async function(){let e=null,t=null,r=null;try{const a=N(this,n,"m",I).call(this,s.METAMASK_STALELIST_URL),i=N(this,n,"m",I).call(this,s.C2_DOMAIN_BLOCKLIST_URL);[e,r]=await Promise.all([a,i]),e?.data&&e.data.lastUpdated>0&&(t=await N(this,n,"m",I).call(this,`${s.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,L.fetchTimeNow)();this.update(t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e,t.c2DomainBlocklistLastFetched=e})}if(!e||!t)return;const a={allowlist:e.data.allowlist,fuzzylist:e.data.fuzzylist,tolerance:e.data.tolerance,version:e.data.version,lastUpdated:e.data.lastUpdated,blocklist:e.data.blocklist,blocklistPaths:(0,x.convertListToTrie)(e.data.blocklistPaths),c2DomainBlocklist:r?r.recentlyAdded:[],name:s.phishingListKeyNameMap.eth_phishing_detect_config},i=(0,L.applyDiffs)(a,t.data,B.EthPhishingDetectConfig);this.update(e=>{e.phishingLists=[i]}),this.updatePhishingDetector()},k=async function(){let e;try{if(0===this.state.phishingLists.length)return;const t=Math.max(...this.state.phishingLists.map(({lastUpdated:e})=>e));e=await N(this,n,"m",I).call(this,`${s.METAMASK_HOTLIST_DIFF_URL}/${t}`)}finally{this.update(e=>{e.hotlistLastFetched=(0,L.fetchTimeNow)()})}if(!e?.data)return;const t=e.data,r=this.state.phishingLists.map(e=>(0,L.applyDiffs)(e,t,U[e.name],[],[]));this.update(e=>{e.phishingLists=r}),this.updatePhishingDetector()},w=async function(){let e=null;try{e=await N(this,n,"m",I).call(this,`${s.C2_DOMAIN_BLOCKLIST_URL}?timestamp=${(0,L.roundToNearestMinute)(this.state.c2DomainBlocklistLastFetched)}`)}finally{this.update(e=>{e.c2DomainBlocklistLastFetched=(0,L.fetchTimeNow)()})}if(!e)return;const t=e.recentlyAdded,r=e.recentlyRemoved,a=this.state.phishingLists.map(e=>(0,L.applyDiffs)(e,[],U[e.name],t,r));this.update(e=>{e.phishingLists=a}),this.updatePhishingDetector()},I=async function(e){const t=await(0,j.safelyExecute)(()=>fetch(e,{cache:"no-cache"}),!0);return 200===t?.status?await t.json():null},s.default=$}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/PhishingController.cjs"}],[1450,{"./PathTrie.cjs":1448,"./types.cjs":1452,"./utils.cjs":1453,"fastest-levenshtein":4792},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.PhishingDetector=void 0;const l=e("fastest-levenshtein"),u=e("./PathTrie.cjs"),d=e("./types.cjs"),h=e("./utils.cjs");s.PhishingDetector=class{constructor(e){n.add(this),r.set(this,void 0),a.set(this,void 0),Array.isArray(e)?(o(this,r,(0,h.processConfigs)(e),"f"),o(this,a,!1,"f")):(o(this,r,[(0,h.getDefaultPhishingDetectorConfig)({allowlist:e.whitelist,blocklist:e.blacklist,fuzzylist:e.fuzzylist,tolerance:e.tolerance})],"f"),o(this,a,!0,"f"))}check(e){const t=c(this,n,"m",i).call(this,e);if(c(this,a,"f")){let e=t.type;return e===d.PhishingDetectorResultType.Allowlist?e=d.PhishingDetectorResultType.Whitelist:e===d.PhishingDetectorResultType.Blocklist&&(e=d.PhishingDetectorResultType.Blacklist),{match:t.match,result:t.result,type:e}}return t}blockingPath(e){for(const{blocklistPaths:t}of c(this,r,"f")){if(!t||0===Object.keys(t).length)continue;const s=(0,u.matchedPathPrefix)(e,t);if(s)return s}return null}isMaliciousC2Domain(e){const t=(0,h.getHostnameFromUrl)(e);if(!t)return{result:!1,type:d.PhishingDetectorResultType.C2DomainBlocklist};const s=t.endsWith(".")?t.slice(0,-1):t,n=(0,h.domainToParts)(s);for(const{allowlist:e,name:t,version:s}of c(this,r,"f")){const r=(0,h.matchPartsAgainstList)(n,e);if(r){return{match:(0,h.domainPartsToDomain)(r),name:t,result:!1,type:d.PhishingDetectorResultType.Allowlist,version:s===undefined?s:String(s)}}}const a=(0,h.sha256Hash)(t.toLowerCase()),i=(0,h.generateParentDomains)(n.reverse(),5);for(const{c2DomainBlocklist:e,name:t,version:s}of c(this,r,"f"))if(e&&0!==e.length){if(e.includes(a))return{name:t,result:!0,type:d.PhishingDetectorResultType.C2DomainBlocklist,version:s===undefined?s:String(s)};for(const n of i){const r=(0,h.sha256Hash)(n);if(e.includes(r))return{name:t,result:!0,type:d.PhishingDetectorResultType.C2DomainBlocklist,version:s===undefined?s:String(s)}}}return{result:!1,type:d.PhishingDetectorResultType.C2DomainBlocklist}}},r=new WeakMap,a=new WeakMap,n=new WeakSet,i=function(e){const t=e.match(new RegExp("Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,}","u"));if(null!==t){const e=t[0];for(const{blocklist:t,name:s,version:n}of c(this,r,"f")){if(t.filter(e=>1===e.length).find(t=>t[0]===e))return{name:s,match:e,result:!0,type:d.PhishingDetectorResultType.Blocklist,version:n===undefined?n:String(n)}}}let s;try{s=new URL(e).hostname}catch{return{result:!1,type:d.PhishingDetectorResultType.All}}const n=s.endsWith(".")?s.slice(0,-1):s,a=(0,h.domainToParts)(n);for(const{blocklistPaths:t,name:s,version:n}of c(this,r,"f")){if(!t||0===Object.keys(t).length)continue;const r=(0,u.matchedPathPrefix)(e,t);if(r)return{match:r,name:s,result:!0,type:d.PhishingDetectorResultType.Blocklist,version:n===undefined?n:String(n)}}for(const{allowlist:e,name:t,version:s}of c(this,r,"f")){const n=(0,h.matchPartsAgainstList)(a,e);if(n){return{match:(0,h.domainPartsToDomain)(n),name:t,result:!1,type:d.PhishingDetectorResultType.Allowlist,version:s===undefined?s:String(s)}}}for(const{blocklist:e,fuzzylist:t,name:s,tolerance:n,version:i}of c(this,r,"f")){const r=(0,h.matchPartsAgainstList)(a,e);if(r){return{match:(0,h.domainPartsToDomain)(r),name:s,result:!0,type:d.PhishingDetectorResultType.Blocklist,version:i===undefined?i:String(i)}}if(n>0){let e=(0,h.domainPartsToFuzzyForm)(a);e=e.replace(/^www\./u,"");const r=t.find(t=>{const s=(0,h.domainPartsToFuzzyForm)(t);return(0,l.distance)(e,s)<=n});if(r){return{name:s,match:(0,h.domainPartsToDomain)(r),result:!0,type:d.PhishingDetectorResultType.Fuzzy,version:i===undefined?i:String(i)}}}}return{result:!1,type:d.PhishingDetectorResultType.All}}}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/PhishingDetector.cjs"}],[1451,{"./PhishingController.cjs":1449,"./PhishingDetector.cjs":1450,"./types.cjs":1452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),s.AddressScanResultType=s.RecommendedAction=s.PhishingDetectorResultType=s.PhishingDetector=void 0,r(e("./PhishingController.cjs"),s);var a=e("./PhishingDetector.cjs");Object.defineProperty(s,"PhishingDetector",{enumerable:!0,get:function(){return a.PhishingDetector}});var i=e("./types.cjs");Object.defineProperty(s,"PhishingDetectorResultType",{enumerable:!0,get:function(){return i.PhishingDetectorResultType}}),Object.defineProperty(s,"RecommendedAction",{enumerable:!0,get:function(){return i.RecommendedAction}}),Object.defineProperty(s,"AddressScanResultType",{enumerable:!0,get:function(){return i.AddressScanResultType}})}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/index.cjs"}],[1452,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i;Object.defineProperty(s,"__esModule",{value:!0}),s.AddressScanResultType=s.DEFAULT_CHAIN_ID_TO_NAME=s.TokenScanResultType=s.RecommendedAction=s.PhishingDetectorResultType=void 0,function(e){e.All="all",e.Fuzzy="fuzzy",e.Blocklist="blocklist",e.Allowlist="allowlist",e.Blacklist="blacklist",e.Whitelist="whitelist",e.C2DomainBlocklist="c2DomainBlocklist"}(n||(s.PhishingDetectorResultType=n={})),function(e){e.None="NONE",e.Warn="WARN",e.Block="BLOCK",e.Verified="VERIFIED"}(r||(s.RecommendedAction=r={})),function(e){e.Benign="Benign",e.Warning="Warning",e.Malicious="Malicious",e.Spam="Spam"}(a||(s.TokenScanResultType=a={})),s.DEFAULT_CHAIN_ID_TO_NAME={"0x1":"ethereum","0x89":"polygon","0x38":"bsc","0xa4b1":"arbitrum","0xa86a":"avalanche","0x2105":"base","0xa":"optimism","0x76adf1":"zora","0xe708":"linea","0x27bc86aa":"degen","0x144":"zksync","0x82750":"scroll","0x13e31":"blast","0x74c":"soneium","0x79a":"soneium-minato","0x14a34":"base-sepolia","0xab5":"abstract","0x849ea":"zero-network","0x138de":"berachain","0x82":"unichain","0x7e4":"ronin","0x127":"hedera","0x12c":"zksync-sepolia","0xaa36a7":"ethereum-sepolia","0xa869":"avalanche-fuji","0x343b":"immutable-zkevm","0x34a1":"immutable-zkevm-testnet","0x64":"gnosis","0x1e0":"worldchain","0x8173":"apechain","0x138c5":"berachain-bartio","0xdef1":"ink","0xba5ed":"ink-sepolia","0x2b74":"abstract-testnet","0x531":"sei","0x2eb":"flow-evm","0x8f":"monad","0x3e7":"hyperevm"},function(e){e.Benign="Benign",e.Warning="Warning",e.Malicious="Malicious",e.ErrorResult="ErrorResult"}(i||(s.AddressScanResultType=i={}))}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/types.cjs"}],[1453,{"./PathTrie.cjs":1448,"./PhishingController.cjs":1449,"./types.cjs":1452,"@noble/hashes/utils":3611,"ethereum-cryptography/sha256":1508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.splitCacheHits=s.resolveChainName=s.buildCacheKey=s.generateParentDomains=s.getPathnameFromUrl=s.getHostnameFromWebUrl=s.getHostnameFromUrl=s.sha256Hash=s.matchPartsAgainstList=s.domainPartsToFuzzyForm=s.domainPartsToDomain=s.processConfigs=s.getDefaultPhishingDetectorConfig=s.processDomainList=s.domainToParts=s.validateConfig=s.applyDiffs=s.getHostnameAndPathComponents=s.roundToNearestMinute=s.fetchTimeNow=void 0;const n=e("@noble/hashes/utils"),r=e("ethereum-cryptography/sha256"),a=e("./PathTrie.cjs"),i=e("./PhishingController.cjs"),o=e("./types.cjs");s.fetchTimeNow=()=>Math.round(Date.now()/1e3),s.roundToNearestMinute=function(e){return 60*Math.floor(e/60)};const c=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};s.getHostnameAndPathComponents=e=>{const t=e.startsWith("http")?e:`https://${e}`;try{const{hostname:e,pathname:s}=new URL(t);return{hostname:e.toLowerCase(),pathComponents:s.split("/").filter(Boolean).map(e=>decodeURIComponent(e))}}catch{return{hostname:"",pathComponents:[]}}};function l(e){if(null===e||"object"!=typeof e)throw new Error("Invalid config");if("tolerance"in e&&!("fuzzylist"in e))throw new Error("Fuzzylist tolerance provided without fuzzylist");if("name"in e&&("string"!=typeof e.name||""===e.name))throw new Error("Invalid config parameter: 'name'");if("version"in e&&(!["number","string"].includes(typeof e.version)||""===e.version))throw new Error("Invalid config parameter: 'version'")}s.applyDiffs=(e,t,s,n=[],r=[])=>{const o=t.filter(({timestamp:t,targetList:n})=>t>e.lastUpdated&&c(n)[0]===s);let l=e.lastUpdated;const u={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist),c2DomainBlocklist:new Set(e.c2DomainBlocklist)},d=(0,a.deepCopyPathTrie)(e.blocklistPaths);for(const{isRemoval:e,targetList:t,url:s,timestamp:n}of o){const r=c(t)[1];n>l&&(l=n),e?"blocklistPaths"===r?(0,a.deleteFromTrie)(s,d):u[r].delete(s):"blocklistPaths"===r?(0,a.insertToTrie)(s,d):u[r].add(s)}if(s===i.ListKeys.EthPhishingDetectConfig){for(const e of n)u.c2DomainBlocklist.add(e);for(const e of r)u.c2DomainBlocklist.delete(e)}return{c2DomainBlocklist:Array.from(u.c2DomainBlocklist),allowlist:Array.from(u.allowlist),blocklist:Array.from(u.blocklist),fuzzylist:Array.from(u.fuzzylist),blocklistPaths:d,version:e.version,name:i.phishingListKeyNameMap[s],tolerance:e.tolerance,lastUpdated:l}},s.validateConfig=l;s.domainToParts=e=>e.split(".").reverse();s.processDomainList=e=>e.reduce((e,t)=>"string"!=typeof t?(console.warn(`Invalid domain value in list: ${JSON.stringify(t)}`),e):(e.push((0,s.domainToParts)(t)),e),[]);s.getDefaultPhishingDetectorConfig=({allowlist:e=[],blocklist:t=[],fuzzylist:n=[],tolerance:r=3})=>({allowlist:(0,s.processDomainList)(e),blocklist:(0,s.processDomainList)(t),fuzzylist:(0,s.processDomainList)(n),tolerance:r});s.processConfigs=(e=[])=>e.filter(e=>{try{return l(e),!0}catch(e){return console.error(e),!1}}).map(e=>({...e,...(0,s.getDefaultPhishingDetectorConfig)(e)}));s.domainPartsToDomain=e=>e.slice().reverse().join(".");s.domainPartsToFuzzyForm=e=>e.slice(1).reverse().join(".");s.matchPartsAgainstList=(e,t)=>t.find(t=>!(t.length>e.length)&&t.every((t,s)=>e[s]===t));s.sha256Hash=e=>{const t=(0,r.sha256)((new TextEncoder).encode(e.toLowerCase()));return(0,n.bytesToHex)(t)};s.getHostnameFromUrl=e=>{let t;try{if(t=new URL(e).hostname,!t||""===t.split(".").join(""))return null}catch{return null}return t};s.getHostnameFromWebUrl=e=>{if(!e.toLowerCase().startsWith("http://")&&!e.toLowerCase().startsWith("https://"))return["",!1];const t=(0,s.getHostnameFromUrl)(e);return[t||"",Boolean(t)]};s.getPathnameFromUrl=e=>{try{const{pathname:t}=new URL(e);return t}catch{return""}};s.generateParentDomains=(e,t=5)=>{const s=[];if(0===e.length)return s;if(1===e.length)s.push(e[0].toLowerCase());else{const n=e.slice(-2).join(".");s.push(n.toLowerCase());for(let n=e.length-3;n>=0&&s.length<t;n--){const t=e.slice(n).join(".");s.push(t.toLowerCase())}}return s};s.buildCacheKey=(e,t)=>`${e.toLowerCase()}:${t.toLowerCase()}`;s.resolveChainName=(e,t=o.DEFAULT_CHAIN_ID_TO_NAME)=>t[e.toLowerCase()]??null;s.splitCacheHits=(e,t,n)=>{const r={},a=[];for(const i of n){const n=i.toLowerCase(),o=(0,s.buildCacheKey)(t,n),c=e.get(o);c?r[n]={result_type:c.result_type,chain:t,address:n}:a.push(n)}return{cachedResults:r,tokensToFetch:a}}}}},{package:"@metamask/assets-controllers>@metamask/phishing-controller",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/phishing-controller/dist/utils.cjs"}],[1454,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.snapOwnsAccount=s.createChainIdList=s.createAccountList=void 0;const n=e("@metamask/utils");s.createAccountList=function(e,t){return t.map(t=>`${t}:${e}`)},s.createChainIdList=function(e,t){return t&&0!==t.length?e.reduce((e,s)=>{if("eip155:0"===s){const s=t.filter(e=>{const{namespace:t}=(0,n.parseCaipChainId)(e);return t===n.KnownCaipNamespace.Eip155});e.push(...s)}else t.includes(s)&&e.push(s);return e},[]):e},s.snapOwnsAccount=function(e,t){var s;return(null===(s=t.metadata.snap)||void 0===s?void 0:s.id)===e}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/account.cjs"}],[1455,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isEqual=void 0,s.isEqual=function(e,t){return e.length===t.length&&e.every((e,s)=>e===t[s])}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/array.cjs"}],[1456,{"./base64.cjs":1457,"./constants.cjs":1461,"@metamask/snaps-sdk":3265,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateAuxiliaryFiles=s.encodeAuxiliaryFile=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/utils"),a=e("./base64.cjs"),i=e("./constants.cjs");s.encodeAuxiliaryFile=async function(e,t){if(t===n.AuxiliaryFileEncoding.Base64)return e;const s=await(0,a.decodeBase64)(e);return t===n.AuxiliaryFileEncoding.Utf8?(0,r.bytesToString)(s):(0,r.bytesToHex)(s)},s.validateAuxiliaryFiles=function(e){for(const t of e)(0,r.assert)(t.size<i.MAX_FILE_SIZE,"Static files required by the Snap must be smaller than 64 MB.")}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/auxiliary-files.cjs"}],[1457,{"./bytes.cjs":1458,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.decodeBase64=s.encodeBase64=void 0;const n=e("@metamask/utils"),r=e("./bytes.cjs");s.encodeBase64=async function(e){const t=(0,r.getBytes)(e),s="undefined"!=typeof navigator&&"ReactNative"===navigator.product;return"FileReader"in globalThis&&!s?await new Promise((e,s)=>{const n=Object.assign(new FileReader,{onload:()=>e(n.result.replace("data:application/octet-stream;base64,","")),onerror:()=>s(n.error)});n.readAsDataURL(new File([t],"",{type:"application/octet-stream"}))}):(0,n.bytesToBase64)(t)},s.decodeBase64=async function(e){const t=await fetch(`data:application/octet-stream;base64,${e}`);return new Uint8Array(await t.arrayBuffer())}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/base64.cjs"}],[1458,{"./virtual-file/VirtualFile.cjs":1501,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getBytes=void 0;const n=e("@metamask/utils"),r=e("./virtual-file/VirtualFile.cjs");s.getBytes=function(e){const t=e instanceof r.VirtualFile?e.value:e;return"string"==typeof t?(0,n.stringToBytes)(t):t}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/bytes.cjs"}],[1459,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n;Object.defineProperty(s,"__esModule",{value:!0}),s.SnapCaveatType=void 0,function(e){e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.SignatureOrigin="signatureOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds",e.LookupMatchers="lookupMatchers",e.MaxRequestTime="maxRequestTime",e.ProtocolSnapScopes="protocolSnapScopes"}(n||(s.SnapCaveatType=n={}))}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/caveats.cjs"}],[1460,{"./bytes.cjs":1458,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.checksumFiles=s.checksum=void 0;const n=e("@metamask/utils"),r=e("./bytes.cjs");async function a(e){return await(0,n.sha256)((0,r.getBytes)(e))}s.checksum=a,s.checksumFiles=async function(e){const t=await Promise.all([...e].sort((e,t)=>((0,n.assert)(e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1)).map(async e=>a(e)));return a((0,n.concatBytes)(t))}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/checksum.cjs"}],[1461,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.MAX_FILE_SIZE=void 0,s.MAX_FILE_SIZE=64e6}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/constants.cjs"}],[1462,{"./time.cjs":1495,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554,"cron-parser":4579},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isCronjobSpecificationArray=s.CronjobSpecificationArrayStruct=s.isCronjobSpecification=s.CronjobSpecificationStruct=s.CronExpressionStruct=s.CronjobRpcRequestStruct=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("cron-parser"),o=e("./time.cjs");s.CronjobRpcRequestStruct=(0,r.object)({jsonrpc:(0,r.optional)(a.JsonRpcVersionStruct),id:(0,r.optional)(a.JsonRpcIdStruct),method:(0,r.string)(),params:(0,r.optional)(a.JsonRpcParamsStruct)}),s.CronExpressionStruct=(0,r.refine)((0,r.string)(),"cronjob expression",e=>{try{return(0,i.parseExpression)(e),!0}catch{return`Expected a cronjob expression, but received: "${e}"`}});const c=(0,r.object)({expression:s.CronExpressionStruct,request:s.CronjobRpcRequestStruct}),l=(0,r.object)({duration:o.ISO8601DurationStruct,request:s.CronjobRpcRequestStruct});s.CronjobSpecificationStruct=(0,n.selectiveUnion)(e=>(0,a.isObject)(e)&&(0,a.hasProperty)(e,"duration")?l:c),s.isCronjobSpecification=function(e){try{return(0,r.create)(e,s.CronjobSpecificationStruct),!0}catch{return!1}},s.CronjobSpecificationArrayStruct=(0,r.array)(s.CronjobSpecificationStruct),s.isCronjobSpecificationArray=function(e){try{return(0,r.create)(e,s.CronjobSpecificationArrayStruct),!0}catch{return!1}}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/cronjob.cjs"}],[1463,{"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.currency=void 0;const n=e("@metamask/superstruct");s.currency=function(e){const t=e.toLowerCase();return(0,n.coerce)((0,n.literal)(t),(0,n.literal)(e.toUpperCase()),e=>(0,n.create)(e.toLowerCase(),(0,n.literal)(t)))}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/currency.cjs"}],[1464,{rfdc:5710},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.deepClone=void 0;const r=n(e("rfdc"));s.deepClone=(0,r.default)({proto:!1,circles:!1})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/deep-clone.cjs"}],[1465,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_ENDOWMENTS=void 0,s.DEFAULT_ENDOWMENTS=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","URLSearchParams","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","isSecureContext","Intl","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"])}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/default-endowments.cjs"}],[1466,{"./array.cjs":1455,"@metamask/slip44":3066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.getSlip44ProtocolName=s.getSnapDerivationPathName=s.SNAPS_DERIVATION_PATHS=void 0;const r=n(e("@metamask/slip44")),a=e("./array.cjs");function i(e){var t;return"1"===String(e)?"Test Networks":(null===(t=r.default[e])||void 0===t?void 0:t.name)??null}s.SNAPS_DERIVATION_PATHS=[{path:["m","44'","0'"],curve:"ed25519",name:"Test BIP-32 Path (ed25519)"},{path:["m","44'","1'"],curve:"secp256k1",name:"Testnet"},{path:["m","44'","0'"],curve:"secp256k1",name:"Bitcoin Legacy"},{path:["m","49'","0'"],curve:"secp256k1",name:"Bitcoin Nested SegWit"},{path:["m","49'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Nested SegWit"},{path:["m","84'","0'"],curve:"secp256k1",name:"Bitcoin Native SegWit"},{path:["m","84'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Native SegWit"},{path:["m","86'","0'"],curve:"secp256k1",name:"Bitcoin Taproot"},{path:["m","86'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Taproot"},{path:["m","44'","501'"],curve:"ed25519",name:"Solana"},{path:["m","44'","501'","0'","0'"],curve:"ed25519",name:"Solana"},{path:["m","44'","2'"],curve:"secp256k1",name:"Litecoin"},{path:["m","44'","3'"],curve:"secp256k1",name:"Dogecoin"},{path:["m","44'","60'"],curve:"secp256k1",name:"Ethereum"},{path:["m","44'","118'"],curve:"secp256k1",name:"Atom"},{path:["m","44'","145'"],curve:"secp256k1",name:"Bitcoin Cash"},{path:["m","44'","637'"],curve:"ed25519",name:"Aptos"},{path:["m","44'","714'"],curve:"secp256k1",name:"Binance (BNB)"},{path:["m","44'","784'"],curve:"ed25519",name:"Sui"},{path:["m","44'","931'"],curve:"secp256k1",name:"THORChain (RUNE)"},{path:["m","44'","330'"],curve:"secp256k1",name:"Terra (LUNA)"},{path:["m","44'","459'"],curve:"secp256k1",name:"Kava"},{path:["m","44'","529'"],curve:"secp256k1",name:"Secret Network"},{path:["m","44'","397'","0'"],curve:"ed25519",name:"NEAR Protocol"},{path:["m","44'","1'","0'"],curve:"ed25519",name:"Testnet"},{path:["m","44'","472'"],curve:"ed25519",name:"Arweave"},{path:["m","44'","12586'"],curve:"secp256k1",name:"Mina"},{path:["m","44'","242'"],curve:"ed25519",name:"Nimiq"},{path:["m","44'","1729'","0'","0'"],curve:"ed25519",name:"Tezos"},{path:["m","1789'","0'"],curve:"ed25519",name:"Vega"},{path:["m","1852'","1815'"],curve:"ed25519Bip32",name:"Cardano"},{path:["m","44'","508'","0'","0'","0'"],curve:"ed25519",name:"MultiversX"},{path:["m","44'","709'"],curve:"secp256k1",name:"Avail"},{path:["m","44'","626'"],curve:"ed25519",name:"Kadena"},{path:["m","44'","632'"],curve:"ed25519",name:"Massa"},{path:["m","44'","4218'"],curve:"ed25519",name:"IOTA"}],s.getSnapDerivationPathName=function(e,t){const n=s.SNAPS_DERIVATION_PATHS.find(s=>s.curve===t&&(0,a.isEqual)(s.path,e));if(n)return n.name;if("secp256k1"===t&&"m"===e[0]&&"44'"===e[1]&&e[2].endsWith("'")){return i(e[2].slice(0,-1))??null}return null},s.getSlip44ProtocolName=i}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/derivation-paths.cjs"}],[1467,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.STATE_ENCRYPTION_MAGIC_VALUE=s.SIP_6_MAGIC_VALUE=void 0,s.SIP_6_MAGIC_VALUE="1399742832'",s.STATE_ENCRYPTION_MAGIC_VALUE="572232532'"}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/entropy.cjs"}],[1468,{"@metamask/rpc-errors":3026,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e,t,s){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,s)}function r(e,t){return e.get(i(e,t))}function a(e,t,s){return e.set(i(e,t),s),s}function i(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}Object.defineProperty(s,"__esModule",{value:!0}),s.TrackableErrorStruct=s.unwrapError=s.isWrappedSnapError=s.isSerializedSnapError=s.isSnapError=s.WrappedSnapError=s.SNAP_ERROR_WRAPPER_MESSAGE=s.SNAP_ERROR_WRAPPER_CODE=void 0;const o=e("@metamask/rpc-errors"),c=e("@metamask/snaps-sdk"),l=e("@metamask/superstruct"),u=e("@metamask/utils");s.SNAP_ERROR_WRAPPER_CODE=-31001,s.SNAP_ERROR_WRAPPER_MESSAGE="Wrapped Snap Error";var d=new WeakMap,h=new WeakMap,p=new WeakMap;class m extends Error{constructor(e){const t=(0,c.getErrorMessage)(e);super(t),n(this,d,void 0),n(this,h,void 0),n(this,p,void 0),a(d,this,e),a(h,this,t),a(p,this,(0,c.getErrorStack)(e)??undefined)}get name(){return"WrappedSnapError"}get message(){return r(h,this)}get stack(){return r(p,this)}toJSON(){const e=f(r(d,this))?r(d,this).serialize():(0,o.serializeCause)(r(d,this));return{code:s.SNAP_ERROR_WRAPPER_CODE,message:s.SNAP_ERROR_WRAPPER_MESSAGE,data:{cause:e}}}serialize(){return this.toJSON()}}function f(e){if((0,u.isObject)(e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return(0,u.isJsonRpcError)(t)&&g(t)}return!1}function g(e){return e.code===c.SNAP_ERROR_CODE&&e.message===c.SNAP_ERROR_MESSAGE}function b(e){return(0,u.isJsonRpcError)(e)&&e.code===s.SNAP_ERROR_WRAPPER_CODE&&e.message===s.SNAP_ERROR_WRAPPER_MESSAGE}function S(e,t,s,n){const r=new o.JsonRpcError(e,t,n);return r.stack=s??undefined,r}s.WrappedSnapError=m,s.isSnapError=f,s.isSerializedSnapError=g,s.isWrappedSnapError=b,s.unwrapError=function(e){if(b(e)){if((0,u.isJsonRpcError)(e.data.cause)){if(g(e.data.cause)){const{code:t,message:s,stack:n,data:r}=e.data.cause.data.cause;return[S(t,s,n,r),!0]}if((0,u.isObject)(e.data.cause.data)&&(0,u.isObject)(e.data.cause.data.cause)&&e.data.cause.message===e.data.cause.data.cause.message){const t=e.data.cause.data.cause,{code:s,message:n}=e.data.cause;return[S(s,n,(0,c.getErrorStack)(t)),!1]}const{code:t,message:s,stack:n,data:r}=e.data.cause;return[S(t,s,n,r),!1]}return[S(o.errorCodes.rpc.internal,(0,c.getErrorMessage)(e.data.cause),(0,c.getErrorStack)(e.data.cause)),!1]}if((0,u.isJsonRpcError)(e)){const{code:t,message:s,stack:n,data:r}=e;return[S(t,s,n,r),!1]}return[S(o.errorCodes.rpc.internal,(0,c.getErrorMessage)(e),(0,c.getErrorStack)(e)),!1]},s.TrackableErrorStruct=(0,l.object)({name:(0,l.string)(),message:(0,l.string)(),stack:(0,l.nullable)((0,l.string)()),cause:(0,l.nullable)((0,l.lazy)(()=>s.TrackableErrorStruct))})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/errors.cjs"}],[1469,{"../time.cjs":1495,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnAssetHistoricalPriceResponseStruct=s.AssetHistoricalPriceStruct=s.HistoricalPriceStruct=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("../time.cjs");s.HistoricalPriceStruct=(0,n.nonEmptyRecord)((0,r.union)([(0,r.literal)("all"),a.ISO8601DurationStruct]),(0,r.array)((0,r.tuple)([(0,r.number)(),(0,r.string)()]))),s.AssetHistoricalPriceStruct=(0,r.nullable)((0,r.object)({intervals:s.HistoricalPriceStruct,updateTime:(0,r.number)(),expirationTime:(0,r.optional)((0,r.number)())})),s.OnAssetHistoricalPriceResponseStruct=(0,r.object)({historicalPrice:s.AssetHistoricalPriceStruct})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/asset-historical-price.cjs"}],[1470,{"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnAssetsConversionResponseStruct=s.AssetConversionStruct=void 0;const n=e("@metamask/superstruct"),r=e("@metamask/utils");s.AssetConversionStruct=(0,n.object)({rate:(0,n.string)(),conversionTime:(0,n.number)(),expirationTime:(0,n.optional)((0,n.number)())}),s.OnAssetsConversionResponseStruct=(0,n.object)({conversionRates:(0,n.record)(r.CaipAssetTypeStruct,(0,n.record)(r.CaipAssetTypeStruct,(0,n.nullable)(s.AssetConversionStruct)))})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/assets-conversion.cjs"}],[1471,{"../time.cjs":1495,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnAssetsMarketDataResponseStruct=s.AssetMarketDataStruct=s.NonFungibleAssetMarketDataStruct=s.AssetValueStruct=s.FungibleAssetMarketDataStruct=s.PricePercentChangeStruct=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("../time.cjs");s.PricePercentChangeStruct=(0,n.nonEmptyRecord)((0,r.union)([(0,r.literal)("all"),i.ISO8601DurationStruct]),(0,r.number)()),s.FungibleAssetMarketDataStruct=(0,r.object)({fungible:(0,r.literal)(!0),marketCap:(0,r.optional)((0,r.string)()),totalVolume:(0,r.optional)((0,r.string)()),circulatingSupply:(0,r.optional)((0,r.string)()),allTimeHigh:(0,r.optional)((0,r.string)()),allTimeLow:(0,r.optional)((0,r.string)()),pricePercentChange:(0,r.optional)(s.PricePercentChangeStruct)}),s.AssetValueStruct=(0,r.object)({asset:a.CaipAssetTypeOrIdStruct,amount:(0,r.string)()}),s.NonFungibleAssetMarketDataStruct=(0,r.object)({fungible:(0,r.literal)(!1),lastSale:(0,r.optional)(s.AssetValueStruct),topBid:(0,r.optional)(s.AssetValueStruct),floorPrice:(0,r.optional)(s.AssetValueStruct),rarity:(0,r.optional)((0,r.object)({ranking:(0,r.optional)((0,r.object)({source:(0,r.string)(),rank:(0,r.number)()})),metadata:(0,r.optional)((0,r.record)((0,r.string)(),(0,r.number)()))}))}),s.AssetMarketDataStruct=(0,n.selectiveUnion)(e=>(0,a.isObject)(e)&&e.fungible?s.FungibleAssetMarketDataStruct:s.NonFungibleAssetMarketDataStruct),s.OnAssetsMarketDataResponseStruct=(0,r.object)({marketData:(0,r.record)(a.CaipAssetTypeOrIdStruct,(0,r.record)(a.CaipAssetTypeStruct,(0,r.nullable)(s.AssetMarketDataStruct)))})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/assets-market-data.cjs"}],[1472,{"./types.cjs":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.SNAP_EXPORT_NAMES=s.SNAP_EXPORTS=void 0;const n=e("./types.cjs");s.SNAP_EXPORTS={[n.HandlerType.OnRpcRequest]:{type:n.HandlerType.OnRpcRequest,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnTransaction]:{type:n.HandlerType.OnTransaction,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnCronjob]:{type:n.HandlerType.OnCronjob,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnNameLookup]:{type:n.HandlerType.OnNameLookup,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnInstall]:{type:n.HandlerType.OnInstall,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnUpdate]:{type:n.HandlerType.OnUpdate,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnStart]:{type:n.HandlerType.OnStart,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnActive]:{type:n.HandlerType.OnActive,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnInactive]:{type:n.HandlerType.OnInactive,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnKeyringRequest]:{type:n.HandlerType.OnKeyringRequest,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnHomePage]:{type:n.HandlerType.OnHomePage,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnSettingsPage]:{type:n.HandlerType.OnSettingsPage,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnSignature]:{type:n.HandlerType.OnSignature,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnUserInput]:{type:n.HandlerType.OnUserInput,required:!1,validator:e=>"function"==typeof e},[n.HandlerType.OnAssetHistoricalPrice]:{type:n.HandlerType.OnAssetHistoricalPrice,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnAssetsLookup]:{type:n.HandlerType.OnAssetsLookup,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnAssetsConversion]:{type:n.HandlerType.OnAssetsConversion,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnAssetsMarketData]:{type:n.HandlerType.OnAssetsMarketData,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnProtocolRequest]:{type:n.HandlerType.OnProtocolRequest,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnClientRequest]:{type:n.HandlerType.OnClientRequest,required:!0,validator:e=>"function"==typeof e},[n.HandlerType.OnWebSocketEvent]:{type:n.HandlerType.OnWebSocketEvent,required:!0,validator:e=>"function"==typeof e}},s.SNAP_EXPORT_NAMES=Object.values(n.HandlerType)}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/exports.cjs"}],[1473,{"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnHomePageResponseStruct=s.OnHomePageResponseWithIdStruct=s.OnHomePageResponseWithContentStruct=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct");s.OnHomePageResponseWithContentStruct=(0,r.object)({content:n.ComponentOrElementStruct}),s.OnHomePageResponseWithIdStruct=(0,r.object)({id:(0,r.string)()}),s.OnHomePageResponseStruct=(0,r.union)([s.OnHomePageResponseWithContentStruct,s.OnHomePageResponseWithIdStruct])}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/home-page.cjs"}],[1474,{"./asset-historical-price.cjs":1469,"./assets-conversion.cjs":1470,"./assets-market-data.cjs":1471,"./exports.cjs":1472,"./home-page.cjs":1473,"./name-lookup.cjs":1475,"./settings-page.cjs":1476,"./signature.cjs":1477,"./transaction.cjs":1478,"./types.cjs":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]},r=function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./asset-historical-price.cjs"),s),r(e("./assets-conversion.cjs"),s),r(e("./assets-market-data.cjs"),s),r(e("./exports.cjs"),s),r(e("./home-page.cjs"),s),r(e("./name-lookup.cjs"),s),r(e("./settings-page.cjs"),s),r(e("./signature.cjs"),s),r(e("./transaction.cjs"),s),r(e("./types.cjs"),s)}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/index.cjs"}],[1475,{"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnNameLookupResponseStruct=s.DomainResolutionResponseStruct=s.AddressResolutionResponseStruct=s.DomainResolutionStruct=s.AddressResolutionStruct=void 0;const n=e("@metamask/superstruct");s.AddressResolutionStruct=(0,n.object)({protocol:(0,n.string)(),resolvedDomain:(0,n.string)()}),s.DomainResolutionStruct=(0,n.object)({protocol:(0,n.string)(),resolvedAddress:(0,n.string)(),domainName:(0,n.string)()}),s.AddressResolutionResponseStruct=(0,n.object)({resolvedDomains:(0,n.size)((0,n.array)(s.AddressResolutionStruct),1,Infinity)}),s.DomainResolutionResponseStruct=(0,n.object)({resolvedAddresses:(0,n.size)((0,n.array)(s.DomainResolutionStruct),1,Infinity)}),s.OnNameLookupResponseStruct=(0,n.nullable)((0,n.union)([s.AddressResolutionResponseStruct,s.DomainResolutionResponseStruct]))}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/name-lookup.cjs"}],[1476,{"./home-page.cjs":1473},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnSettingsPageResponseStruct=void 0;const n=e("./home-page.cjs");s.OnSettingsPageResponseStruct=n.OnHomePageResponseStruct}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/settings-page.cjs"}],[1477,{"./transaction.cjs":1478},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnSignatureResponseStruct=void 0;const n=e("./transaction.cjs");s.OnSignatureResponseStruct=n.OnTransactionResponseStruct}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/signature.cjs"}],[1478,{"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.OnTransactionResponseStruct=s.OnTransactionResponseWithContentStruct=s.OnTransactionResponseWithIdStruct=s.OnTransactionSeverityResponseStruct=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct");s.OnTransactionSeverityResponseStruct=(0,r.object)({severity:(0,r.optional)((0,r.literal)(n.SeverityLevel.Critical))}),s.OnTransactionResponseWithIdStruct=(0,r.assign)(s.OnTransactionSeverityResponseStruct,(0,r.object)({id:(0,r.string)()})),s.OnTransactionResponseWithContentStruct=(0,r.assign)(s.OnTransactionSeverityResponseStruct,(0,r.object)({content:n.ComponentOrElementStruct})),s.OnTransactionResponseStruct=(0,r.nullable)((0,r.union)([s.OnTransactionResponseWithContentStruct,s.OnTransactionResponseWithIdStruct]))}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/transaction.cjs"}],[1479,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n;Object.defineProperty(s,"__esModule",{value:!0}),s.HandlerType=void 0,function(e){e.OnRpcRequest="onRpcRequest",e.OnSignature="onSignature",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnStart="onStart",e.OnActive="onActive",e.OnInactive="onInactive",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest",e.OnHomePage="onHomePage",e.OnSettingsPage="onSettingsPage",e.OnUserInput="onUserInput",e.OnAssetsLookup="onAssetsLookup",e.OnAssetsConversion="onAssetsConversion",e.OnAssetHistoricalPrice="onAssetHistoricalPrice",e.OnAssetsMarketData="onAssetsMarketData",e.OnProtocolRequest="onProtocolRequest",e.OnClientRequest="onClientRequest",e.OnWebSocketEvent="onWebSocketEvent"}(n||(s.HandlerType=n={}))}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/handlers/types.cjs"}],[1480,{"./svg.cjs":1494,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getSvgDimensions=s.assertIsSnapIcon=s.SVG_MAX_BYTE_SIZE_TEXT=s.SVG_MAX_BYTE_SIZE=void 0;const n=e("@metamask/utils"),r=e("./svg.cjs");s.SVG_MAX_BYTE_SIZE=1e5,s.SVG_MAX_BYTE_SIZE_TEXT=`${Math.floor(s.SVG_MAX_BYTE_SIZE/1e3)}kb`,s.assertIsSnapIcon=function(e){(0,n.assert)(e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".');const t="string"==typeof e.value?(0,n.stringToBytes)(e.value).byteLength:e.value.byteLength;(0,n.assert)(t<=s.SVG_MAX_BYTE_SIZE,`The specified SVG icon exceeds the maximum size of ${s.SVG_MAX_BYTE_SIZE_TEXT}.`),(0,n.assert)((0,r.isSvg)(e.toString()),"Snap icon must be a valid SVG.")},s.getSvgDimensions=function(e){try{const t=(0,r.parseSvg)(e),s=t["@_height"],a=t["@_width"];if(s&&a)return{height:s,width:a};const i=t["@_viewBox"];if(i){const[e,t,s,r]=i.split(" ");if(s&&r){const e=parseInt(s,10),t=parseInt(r,10);return(0,n.assert)(Number.isInteger(e)&&e>0),(0,n.assert)(Number.isInteger(t)&&t>0),{width:e,height:t}}}}catch{throw new Error("Snap icon must be a valid SVG.")}return null}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/icon.cjs"}],[1481,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createWindow=void 0,s.createWindow=async function({uri:e,id:t,sandbox:s=!0,testId:n="snaps-iframe"}){return await new Promise((r,a)=>{const i=document.createElement("iframe");i.setAttribute("id",t),i.setAttribute("data-testid",n),s&&i.setAttribute("sandbox","allow-scripts"),i.setAttribute("src",e),document.body.appendChild(i),i.addEventListener("load",()=>{i.contentWindow?r(i.contentWindow):a(new Error(`iframe.contentWindow not present on load for job "${t}".`))},{once:!0})})}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/iframe.cjs"}],[1482,{"./account.cjs":1454,"./array.cjs":1455,"./auxiliary-files.cjs":1456,"./base64.cjs":1457,"./bytes.cjs":1458,"./caveats.cjs":1459,"./checksum.cjs":1460,"./constants.cjs":1461,"./cronjob.cjs":1462,"./currency.cjs":1463,"./deep-clone.cjs":1464,"./default-endowments.cjs":1465,"./derivation-paths.cjs":1466,"./entropy.cjs":1467,"./errors.cjs":1468,"./handlers/index.cjs":1474,"./iframe.cjs":1481,"./json-rpc.cjs":1483,"./json.cjs":1484,"./localization.cjs":1485,"./logging.cjs":1486,"./manifest/index.cjs":1487,"./path.cjs":1489,"./platform-version.cjs":1490,"./snaps.cjs":1491,"./strings.cjs":1492,"./structs.cjs":1493,"./time.cjs":1495,"./types.cjs":1496,"./ui.cjs":1497,"./url.cjs":1498,"./validation.cjs":1499,"./versions.cjs":1500,"./virtual-file/index.cjs":1502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]},r=function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./account.cjs"),s),r(e("./array.cjs"),s),r(e("./auxiliary-files.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caveats.cjs"),s),r(e("./checksum.cjs"),s),r(e("./constants.cjs"),s),r(e("./cronjob.cjs"),s),r(e("./currency.cjs"),s),r(e("./deep-clone.cjs"),s),r(e("./default-endowments.cjs"),s),r(e("./derivation-paths.cjs"),s),r(e("./entropy.cjs"),s),r(e("./errors.cjs"),s),r(e("./handlers/index.cjs"),s),r(e("./iframe.cjs"),s),r(e("./json.cjs"),s),r(e("./json-rpc.cjs"),s),r(e("./localization.cjs"),s),r(e("./logging.cjs"),s),r(e("./manifest/index.cjs"),s),r(e("./path.cjs"),s),r(e("./platform-version.cjs"),s),r(e("./snaps.cjs"),s),r(e("./strings.cjs"),s),r(e("./structs.cjs"),s),r(e("./time.cjs"),s),r(e("./types.cjs"),s),r(e("./ui.cjs"),s),r(e("./url.cjs"),s),r(e("./validation.cjs"),s),r(e("./versions.cjs"),s),r(e("./virtual-file/index.cjs"),s)}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/index.cjs"}],[1483,{"@metamask/permission-controller":2862,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertIsJsonRpcSuccess=s.isOriginAllowed=s.assertIsKeyringOrigins=s.KeyringOriginsStruct=s.assertIsRpcOrigins=s.RpcOriginsStruct=void 0;const n=e("@metamask/permission-controller"),r=e("@metamask/superstruct"),a=e("@metamask/utils"),i=(0,r.array)((0,r.refine)((0,r.string)(),"Allowed origin",e=>!(e.split("*").length-1>2)||'No more than two wildcards ("*") are allowed in an origin specifier.'));function o(e,t){if("*"===e||e===t)return!0;const s=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*");return RegExp(`^${t}$`,"u")}(e);return s.test(t)}s.RpcOriginsStruct=(0,r.refine)((0,r.object)({dapps:(0,r.optional)((0,r.boolean)()),snaps:(0,r.optional)((0,r.boolean)()),allowedOrigins:(0,r.optional)(i)}),"RPC origins",e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin."),s.assertIsRpcOrigins=function(e,t){(0,a.assertStruct)(e,s.RpcOriginsStruct,"Invalid JSON-RPC origins",t)},s.KeyringOriginsStruct=(0,r.object)({allowedOrigins:(0,r.optional)(i)}),s.assertIsKeyringOrigins=function(e,t){(0,a.assertStruct)(e,s.KeyringOriginsStruct,"Invalid keyring origins",t)},s.isOriginAllowed=function(e,t,s){var r;return"metamask"===s||(!(null===(r=e.allowedOrigins)||void 0===r||!r.some(e=>o(e,s)))||(!(t!==n.SubjectType.Website||!e.dapps)||Boolean(t===n.SubjectType.Snap&&e.snaps)))},s.assertIsJsonRpcSuccess=function(e){if(!(0,a.isJsonRpcSuccess)(e)){if((0,a.isJsonRpcFailure)(e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/json-rpc.cjs"}],[1484,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonSizeUnsafe=s.parseJson=void 0;const n=e("@metamask/utils");s.parseJson=function(e){return(0,n.getSafeJson)(JSON.parse(e))},s.getJsonSizeUnsafe=function(e,t=!1){const s=JSON.stringify(e);return t?(new TextEncoder).encode(s).byteLength:s.length}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/json.cjs"}],[1485,{"./json.cjs":1484,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateSnapManifestLocalizations=s.getLocalizedSnapManifest=s.translate=s.TRANSLATION_REGEX=s.getLocalizationFile=s.getValidatedLocalizationFiles=s.LocalizationFileStruct=s.LOCALIZABLE_FIELDS=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("./json.cjs");function i(e,t){const s=t.find(t=>t.locale===e);return s||t.find(e=>"en"===e.locale)}function o(e,t){const n=e.matchAll(s.TRANSLATION_REGEX);return Array.from(n).reduce((s,[n,r])=>{if(!t)throw new Error(`Failed to translate "${e}": No localization file found.`);const a=t.messages[r.trim()];if(!a)throw new Error(`Failed to translate "${e}": No translation found for "${r.trim()}" in "${t.locale}" file.`);return s.replace(n,a.message)},e)}function c(e,t,n){const r=i(t,n);return s.LOCALIZABLE_FIELDS.reduce((e,t)=>{const s=o(e[t],r);return{...e,[t]:s}},e)}s.LOCALIZABLE_FIELDS=["description","proposedName"],s.LocalizationFileStruct=(0,r.object)({locale:(0,r.string)(),messages:(0,r.record)((0,r.string)(),(0,r.object)({message:(0,r.string)(),description:(0,r.optional)((0,r.string)())}))}),s.getValidatedLocalizationFiles=function(e){for(const t of e)try{t.result=(0,r.create)((0,a.parseJson)(t.toString()),s.LocalizationFileStruct)}catch(e){if(e instanceof r.StructError)throw new Error(`Failed to validate localization file "${t.path}": ${e.message}.`);if(e instanceof SyntaxError)throw new Error(`Failed to parse localization file "${t.path}" as JSON.`);throw e}return e},s.getLocalizationFile=i,s.TRANSLATION_REGEX=/\{\{\s?([a-zA-Z0-9-_\s]+)\s?\}\}/gu,s.translate=o,s.getLocalizedSnapManifest=c,s.validateSnapManifestLocalizations=function(e,t){try{t.filter(e=>"en"!==e.locale).forEach(s=>{c(e,s.locale,t)}),c(e,"en",t)}catch(e){throw new Error(`Failed to localize Snap manifest: ${(0,n.getErrorMessage)(e)}`)}}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/localization.cjs"}],[1486,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.logWarning=s.logError=s.logInfo=s.snapsLogger=void 0;const n=e("@metamask/utils");s.snapsLogger=(0,n.createProjectLogger)("snaps"),s.logInfo=function(e,...t){console.log(e,...t)},s.logError=function(e,...t){console.error(e,...t)},s.logWarning=function(e,...t){console.warn(e,...t)}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/logging.cjs"}],[1487,{"./validation.cjs":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]},r=function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./validation.cjs"),s)}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/manifest/index.cjs"}],[1488,{"../array.cjs":1455,"../cronjob.cjs":1462,"../entropy.cjs":1467,"../json-rpc.cjs":1483,"../snaps.cjs":1491,"../structs.cjs":1493,"../types.cjs":1496,"@metamask/key-tree":2466,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createSnapManifest=s.assertIsSnapManifest=s.isSnapManifest=s.SnapManifestStruct=s.InitialConnectionsStruct=s.SnapAuxilaryFilesStruct=s.SnapAuxiliaryFilesStruct=s.PermissionsStruct=s.EmptyObjectStruct=s.HandlerCaveatsStruct=s.ProtocolScopesStruct=s.MaxRequestTimeStruct=s.MAXIMUM_REQUEST_TIMEOUT=s.MINIMUM_REQUEST_TIMEOUT=s.LookupMatchersStruct=s.ChainIdsStruct=s.SnapIdsStruct=s.SemVerRangeStruct=s.SnapGetBip32EntropyPermissionsStruct=s.Bip32EntropyStruct=s.CurveStruct=s.bip32entropy=s.Bip32PathStruct=s.FORBIDDEN_COIN_TYPES=void 0;const n=e("@metamask/key-tree"),r=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("../array.cjs"),o=e("../cronjob.cjs"),c=e("../entropy.cjs"),l=e("../json-rpc.cjs"),u=e("../snaps.cjs"),d=e("../structs.cjs"),h=e("../types.cjs"),p=[c.SIP_6_MAGIC_VALUE,c.STATE_ENCRYPTION_MAGIC_VALUE];s.FORBIDDEN_COIN_TYPES=[60];const m=s.FORBIDDEN_COIN_TYPES.map(e=>["m","44'",`${e}'`]);s.Bip32PathStruct=(0,r.refine)((0,r.array)((0,r.string)()),"BIP-32 path",e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some(e=>!(0,n.isValidBIP32PathSegment)(e))?"Path must be a valid BIP-32 derivation path array.":p.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!m.some(t=>(0,i.isEqual)(e.slice(0,t.length),t))||`The path "${e.join("/")}" is not allowed for entropy derivation.`);s.bip32entropy=e=>(0,r.refine)(e,"BIP-32 entropy",e=>"ed25519"!==e.curve||!e.path.slice(1).some(e=>!e.endsWith("'"))||"Ed25519 does not support unhardened paths."),s.CurveStruct=(0,r.enums)(["ed25519","secp256k1","ed25519Bip32"]),s.Bip32EntropyStruct=(0,s.bip32entropy)((0,r.type)({path:s.Bip32PathStruct,curve:s.CurveStruct})),s.SnapGetBip32EntropyPermissionsStruct=(0,r.size)((0,r.array)(s.Bip32EntropyStruct),1,Infinity),s.SemVerRangeStruct=(0,r.refine)((0,r.string)(),"SemVer range",e=>!!(0,a.isValidSemVerRange)(e)||"Expected a valid SemVer range."),s.SnapIdsStruct=(0,r.refine)((0,r.record)(u.SnapIdStruct,(0,r.object)({version:(0,r.optional)(s.SemVerRangeStruct)})),"SnapIds",e=>0!==Object.keys(e).length),s.ChainIdsStruct=(0,r.size)((0,r.array)(a.CaipChainIdStruct),1,Infinity),s.LookupMatchersStruct=(0,r.union)([(0,r.object)({tlds:(0,r.size)((0,r.array)((0,r.string)()),1,Infinity)}),(0,r.object)({schemes:(0,r.size)((0,r.array)((0,r.string)()),1,Infinity)}),(0,r.object)({tlds:(0,r.size)((0,r.array)((0,r.string)()),1,Infinity),schemes:(0,r.size)((0,r.array)((0,r.string)()),1,Infinity)})]),s.MINIMUM_REQUEST_TIMEOUT=(0,a.inMilliseconds)(5,a.Duration.Second),s.MAXIMUM_REQUEST_TIMEOUT=(0,a.inMilliseconds)(3,a.Duration.Minute),s.MaxRequestTimeStruct=(0,r.size)((0,r.integer)(),s.MINIMUM_REQUEST_TIMEOUT,s.MAXIMUM_REQUEST_TIMEOUT),s.ProtocolScopesStruct=(0,r.record)(a.CaipChainIdStruct,(0,r.object)({methods:(0,r.array)((0,r.string)())})),s.HandlerCaveatsStruct=(0,r.object)({maxRequestTime:(0,r.optional)(s.MaxRequestTimeStruct)}),s.EmptyObjectStruct=(0,r.object)({}),s.PermissionsStruct=(0,r.type)({"endowment:assets":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({scopes:s.ChainIdsStruct}))),"endowment:cronjob":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({jobs:(0,r.optional)(o.CronjobSpecificationArrayStruct)}))),"endowment:ethereum-provider":(0,r.optional)(s.EmptyObjectStruct),"endowment:keyring":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,l.KeyringOriginsStruct)),"endowment:protocol":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({scopes:s.ProtocolScopesStruct}))),"endowment:lifecycle-hooks":(0,r.optional)(s.HandlerCaveatsStruct),"endowment:name-lookup":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({chains:(0,r.optional)(s.ChainIdsStruct),matchers:(0,r.optional)(s.LookupMatchersStruct)}))),"endowment:network-access":(0,r.optional)(s.EmptyObjectStruct),"endowment:page-home":(0,r.optional)(s.HandlerCaveatsStruct),"endowment:rpc":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,l.RpcOriginsStruct)),"endowment:signature-insight":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({allowSignatureOrigin:(0,r.optional)((0,r.boolean)())}))),"endowment:transaction-insight":(0,r.optional)((0,d.mergeStructs)(s.HandlerCaveatsStruct,(0,r.object)({allowTransactionOrigin:(0,r.optional)((0,r.boolean)())}))),"endowment:webassembly":(0,r.optional)(s.EmptyObjectStruct),snap_dialog:(0,r.optional)(s.EmptyObjectStruct),snap_manageState:(0,r.optional)(s.EmptyObjectStruct),snap_manageAccounts:(0,r.optional)(s.EmptyObjectStruct),snap_notify:(0,r.optional)(s.EmptyObjectStruct),snap_getBip32Entropy:(0,r.optional)(s.SnapGetBip32EntropyPermissionsStruct),snap_getBip32PublicKey:(0,r.optional)(s.SnapGetBip32EntropyPermissionsStruct),snap_getBip44Entropy:(0,r.optional)((0,r.size)((0,r.array)((0,r.object)({coinType:(0,r.size)((0,r.integer)(),0,2**32-1)})),1,Infinity)),snap_getEntropy:(0,r.optional)(s.EmptyObjectStruct),snap_getLocale:(0,r.optional)(s.EmptyObjectStruct),wallet_snap:(0,r.optional)(s.SnapIdsStruct)}),s.SnapAuxiliaryFilesStruct=(0,r.array)((0,r.string)()),s.SnapAuxilaryFilesStruct=s.SnapAuxiliaryFilesStruct,s.InitialConnectionsStruct=(0,r.record)((0,r.intersection)([(0,r.string)(),(0,h.uri)()]),(0,r.object)({})),s.SnapManifestStruct=(0,r.object)({version:a.VersionStruct,description:(0,r.size)((0,r.string)(),1,280),proposedName:(0,r.size)((0,r.string)(),1,214),repository:(0,r.optional)((0,r.type)({type:(0,r.size)((0,r.string)(),1,Infinity),url:(0,r.size)((0,r.string)(),1,Infinity)})),source:(0,r.object)({shasum:a.ChecksumStruct,location:(0,r.object)({npm:(0,r.object)({filePath:(0,r.size)((0,r.string)(),1,Infinity),iconPath:(0,r.optional)((0,r.size)((0,r.string)(),1,Infinity)),packageName:h.NameStruct,registry:(0,r.union)([(0,r.literal)("https://registry.npmjs.org"),(0,r.literal)("https://registry.npmjs.org/")])})}),files:(0,r.optional)(s.SnapAuxiliaryFilesStruct),locales:(0,r.optional)(s.SnapAuxiliaryFilesStruct)}),initialConnections:(0,r.optional)(s.InitialConnectionsStruct),initialPermissions:s.PermissionsStruct,manifestVersion:(0,r.literal)("0.1"),platformVersion:(0,r.optional)(a.VersionStruct),$schema:(0,r.optional)((0,r.string)())}),s.isSnapManifest=function(e){return(0,r.is)(e,s.SnapManifestStruct)},s.assertIsSnapManifest=function(e){(0,a.assertStruct)(e,s.SnapManifestStruct,`"${h.NpmSnapFileNames.Manifest}" is invalid`)},s.createSnapManifest=function(e){return(0,r.create)(e,s.SnapManifestStruct)}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/manifest/validation.cjs"}],[1489,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.normalizeRelative=void 0;const n=e("@metamask/utils");s.normalizeRelative=function(e){return(0,n.assert)(!e.startsWith("/")),(0,n.assert)(-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/path.cjs"}],[1490,{"@metamask/snaps-sdk/package.json":3353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.getPlatformVersion=void 0;const r=n(e("@metamask/snaps-sdk/package.json"));s.getPlatformVersion=function(){return r.default.version}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/platform-version.cjs"}],[1491,{"./caveats.cjs":1459,"./checksum.cjs":1460,"./types.cjs":1496,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554,"@scure/base":3634,"fast-json-stable-stringify":4789,"validate-npm-package-name":6150},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.verifyRequestedSnapPermissions=s.isSnapPermitted=s.assertIsValidSnapId=s.isSnapId=s.stripSnapPrefix=s.getSnapPrefix=s.SnapIdStruct=s.SnapIdPrefixStruct=s.HttpSnapIdStruct=s.NpmSnapIdStruct=s.LocalSnapIdStruct=s.BaseSnapIdStruct=s.LOCALHOST_HOSTNAMES=s.validateSnapShasum=s.getSnapChecksum=s.SnapStatusEvents=s.SnapStatus=s.PROPOSED_NAME_REGEX=void 0;const r=e("@metamask/snaps-sdk"),a=e("@metamask/superstruct"),i=e("@metamask/utils"),o=e("@scure/base"),c=n(e("fast-json-stable-stringify")),l=n(e("validate-npm-package-name")),u=e("./caveats.cjs"),d=e("./checksum.cjs"),h=e("./types.cjs");var p,m;function f(e){const t=e.clone();return delete t.result.source.shasum,t.value=(0,c.default)(t.result),t}async function g(e){const{manifest:t,sourceCode:s,svgIcon:n,auxiliaryFiles:r,localizationFiles:a}=e,i=[f(t),s,n,...r,...a].filter(e=>e!==undefined);return o.base64.encode(await(0,d.checksumFiles)(i))}s.PROPOSED_NAME_REGEX=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u,function(e){e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed"}(p||(s.SnapStatus=p={})),function(e){e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE"}(m||(s.SnapStatusEvents=m={})),s.getSnapChecksum=g,s.validateSnapShasum=async function(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==await g(e))throw new Error(t)},s.LOCALHOST_HOSTNAMES=["localhost","127.0.0.1","[::1]"],s.BaseSnapIdStruct=(0,i.definePattern)("Base Snap Id",/^[\x21-\x7E]*$/u);const b=(0,h.uri)({protocol:(0,a.enums)(["http:","https:"]),hostname:(0,a.enums)(s.LOCALHOST_HOSTNAMES),hash:(0,a.empty)((0,a.string)()),search:(0,a.empty)((0,a.string)())});function S(e){const t=Object.values(h.SnapIdPrefixes).find(t=>e.startsWith(t));if(t!==undefined)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}s.LocalSnapIdStruct=(0,a.refine)(s.BaseSnapIdStruct,"local Snap Id",e=>{if(!e.startsWith(h.SnapIdPrefixes.local))return`Expected local snap ID, got "${e}".`;const[t]=(0,a.validate)(e.slice(h.SnapIdPrefixes.local.length),b);return t??!0}),s.NpmSnapIdStruct=(0,a.intersection)([s.BaseSnapIdStruct,(0,h.uri)({protocol:(0,a.literal)(h.SnapIdPrefixes.npm),pathname:(0,a.refine)((0,a.string)(),"package name",function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:s,validForNewPackages:n,warnings:r}=(0,l.default)(t);return n||(s===undefined?((0,i.assert)(r!==undefined),yield*r):yield*s),!0}),search:(0,a.empty)((0,a.string)()),hash:(0,a.empty)((0,a.string)())})]),s.HttpSnapIdStruct=(0,a.intersection)([s.BaseSnapIdStruct,(0,h.uri)({protocol:(0,a.enums)(["http:","https:"]),search:(0,a.empty)((0,a.string)()),hash:(0,a.empty)((0,a.string)())})]),s.SnapIdPrefixStruct=(0,a.refine)((0,a.string)(),"Snap ID prefix",e=>{if(Object.values(h.SnapIdPrefixes).some(t=>e.startsWith(t)))return!0;return`Invalid or no prefix found. Expected Snap ID to start with one of: ${Object.values(h.SnapIdPrefixes).map(e=>`"${e}"`).join(", ")}, but received: "${e}"`}),s.SnapIdStruct=(0,r.selectiveUnion)(e=>"string"==typeof e&&e.startsWith(h.SnapIdPrefixes.npm)?s.NpmSnapIdStruct:"string"==typeof e&&e.startsWith(h.SnapIdPrefixes.local)?s.LocalSnapIdStruct:s.SnapIdPrefixStruct),s.getSnapPrefix=S,s.stripSnapPrefix=function(e){return e.replace(S(e),"")},s.isSnapId=function(e){return(0,a.is)(e,s.SnapIdStruct)},s.assertIsValidSnapId=function(e){(0,i.assertStruct)(e,s.SnapIdStruct,"Invalid snap ID")},s.isSnapPermitted=function(e,t){var s,n;return Boolean(null===(s=((null==e||null===(n=e.wallet_snap)||void 0===n||null===(n=n.caveats)||void 0===n?void 0:n.find(e=>e.type===u.SnapCaveatType.SnapIds))??{}).value)||void 0===s?void 0:s[t])},s.verifyRequestedSnapPermissions=function(e){(0,i.assert)((0,i.isObject)(e),"Requested permissions must be an object.");const{wallet_snap:t}=e;(0,i.assert)((0,i.isObject)(t),"wallet_snap is missing from the requested permissions.");const{caveats:s}=t;(0,i.assert)(Array.isArray(s)&&1===s.length,"wallet_snap must have a caveat property with a single-item array value.");const[n]=s;(0,i.assert)((0,i.isObject)(n)&&n.type===u.SnapCaveatType.SnapIds&&(0,i.isObject)(n.value),`The requested permissions do not have a valid ${u.SnapCaveatType.SnapIds} caveat.`)}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/snaps.cjs"}],[1492,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.indent=void 0,s.indent=function(e,t=2){return e.replace(/^/gmu," ".repeat(t))}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/strings.cjs"}],[1493,{"./strings.cjs":1492,"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554,chalk:4496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.mergeStructs=s.createUnion=s.validateUnion=s.getStructErrorMessage=s.getStructFailureMessage=s.getStructErrorPrefix=s.getUnionStructNames=s.getStructFromPath=s.createFromStruct=s.getError=s.arrayToGenerator=s.SnapsStructError=s.named=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("chalk"),o=e("./strings.cjs");function c(e,t,s){return s?t(e):e}s.named=function(e,t){return new r.Struct({...t,type:e})};class l extends r.StructError{constructor(e,t,s,n,r,a=!0){super(n,r),this.name="SnapsStructError",this.message=`${t}.\n\n${g(e,[...r()],a)}${s?`\n\n${s}`:""}`}}function*u(e){for(const t of e)yield t}function d({struct:e,prefix:t,suffix:s="",error:n,colorize:r}){return new l(e,t,s,n,()=>u(n.failures()),r)}function h(e,t){return t.reduce((t,s)=>(0,a.isObject)(e.schema)&&e.schema[s]?e.schema[s]:t,e)}function p(e,t=!0){return Array.isArray(e.schema)?e.schema.map(({type:e})=>c(e,i.green,t)):null}function m(e,t=!0){return"never"===e.type||0===e.path.length?"":`At path: ${c(e.path.join("."),i.bold,t)}  `}function f(e,t,s=!0){const n=c(JSON.stringify(t.value),i.red,s),r=m(t,s);if("union"===t.type){const a=p(h(e,t.path),s);return a?`${r}Expected the value to be one of: ${a.join(", ")}, but received: ${n}.`:`${r}${t.message}.`}if("literal"===t.type){return`${r}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${c("$1",i.green,s)}\`,`).replace(/, but received: (.+)/u,`, but received: ${c("$1",i.red,s)}`)}.`}if("never"===t.type)return`Unknown key: ${c(t.path.join("."),i.bold,s)}, received: ${n}.`;if("size"===t.refinement){return`${r}${t.message.replace(/length between `(\d+)` and `(\d+)`/u,`length between ${c("$1",i.green,s)} and ${c("$2",i.green,s)},`).replace(/length of `(\d+)`/u,`length of ${c("$1",i.red,s)}`).replace(/a array/u,"an array")}.`}return t.refinement!==undefined?`${r}${t.message}.`:`${r}Expected a value of type ${c(t.type,i.green,s)}, but received: ${n}.`}function g(e,t,s=!0){return t.map(t=>(0,o.indent)(` ${f(e,t,s)}`)).join("\n")}function b(e,t,s,i=!1){(0,a.assert)(t.schema,"Expected a struct with a schema. Make sure to use `union` from `@metamask/snaps-sdk`."),(0,a.assert)(t.schema.length>0,"Expected a non-empty array of structs.");const o=t.schema.map(e=>e.schema[s]),c=(0,r.type)({[s]:(0,n.union)(o)}),[l]=(0,r.validate)(e,c,{coerce:i});if(l)throw new Error(f(c,l.failures()[0],!1));const u=e,d=t.schema.filter(e=>(0,r.is)(u[s],e.schema[s]));(0,a.assert)(d.length>0,"Expected a struct to match the value.");const h=d.map(e=>(0,r.validate)(u,e,{coerce:i})),p=h.find(([e])=>!e);if(p)return p[1];(0,a.assert)(h[0][0],"Expected at least one error.");const m=h.reduce((e,[t])=>((0,a.assert)(t,"Expected an error."),t.failures().length<e.failures().length?t:e),h[0][0]);throw new Error(f(t,m.failures()[0],!1))}s.SnapsStructError=l,s.arrayToGenerator=u,s.getError=d,s.createFromStruct=function(e,t,s,n=""){try{return(0,r.create)(e,t)}catch(e){if(e instanceof r.StructError)throw d({struct:t,prefix:s,suffix:n,error:e});throw e}},s.getStructFromPath=h,s.getUnionStructNames=p,s.getStructErrorPrefix=m,s.getStructFailureMessage=f,s.getStructErrorMessage=g,s.validateUnion=b,s.createUnion=function(e,t,s){return b(e,t,s,!0)},s.mergeStructs=function(...e){const t=r.assign(...e);return new r.Struct({...t,*refiner(t,s){for(const n of e)yield*n.refiner(t,s)}})}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/structs.cjs"}],[1494,{"@metamask/utils":3554,"fast-xml-parser":4791},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSvg=s.parseSvg=void 0;const n=e("@metamask/utils"),r=e("fast-xml-parser");function a(e){try{const t=e.trim();(0,n.assert)(t.length>0);const s=new r.XMLParser({ignoreAttributes:!1,parseAttributeValue:!0}).parse(t,!0);return(0,n.assert)((0,n.hasProperty)(s,"svg")),(0,n.isObject)(s.svg)?s.svg:{}}catch{throw new Error("Snap icon must be a valid SVG.")}}s.parseSvg=a,s.isSvg=function(e){try{return a(e),!0}catch{return!1}}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/svg.cjs"}],[1495,{"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,luxon:5250},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ISO8601DateStruct=s.toCensoredISO8601String=s.ISO8601DurationStruct=void 0;const n=e("@metamask/superstruct"),r=e("luxon");s.ISO8601DurationStruct=(0,n.refine)((0,n.string)(),"ISO 8601 duration",e=>!!r.Duration.fromISO(e).isValid||"Not a valid ISO 8601 duration"),s.toCensoredISO8601String=function(e){return r.DateTime.fromISO(e,{setZone:!0}).startOf("second").toISO({suppressMilliseconds:!0})};var a=e("@metamask/snaps-sdk");Object.defineProperty(s,"ISO8601DateStruct",{enumerable:!0,get:function(){return a.ISO8601DateStruct}})}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/time.cjs"}],[1496,{"@metamask/snaps-sdk":3265,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.WALLET_SNAP_PERMISSION_KEY=s.isValidUrl=s.uri=s.SNAP_STREAM_NAMES=s.SnapIdPrefixes=s.NpmSnapPackageJsonStruct=s.NameStruct=s.NpmSnapFileNames=void 0;const n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),a=e("@metamask/utils");var i,o,c;!function(e){e.PackageJson="package.json",e.Manifest="snap.manifest.json"}(i||(s.NpmSnapFileNames=i={})),s.NameStruct=(0,r.size)((0,a.definePattern)("Snap Name",/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),s.NpmSnapPackageJsonStruct=(0,r.type)({version:a.VersionStruct,name:s.NameStruct,main:(0,r.optional)((0,r.size)((0,r.string)(),1,Infinity)),repository:(0,r.optional)((0,r.type)({type:(0,r.size)((0,r.string)(),1,Infinity),url:(0,r.size)((0,r.string)(),1,Infinity)}))}),function(e){e.npm="npm:",e.local="local:"}(o||(s.SnapIdPrefixes=o={})),function(e){e.JSON_RPC="jsonRpc",e.COMMAND="command"}(c||(s.SNAP_STREAM_NAMES=c={}));var l=e("@metamask/snaps-sdk");Object.defineProperty(s,"uri",{enumerable:!0,get:function(){return l.uri}}),s.isValidUrl=function(e,t={}){return(0,r.is)(e,(0,n.uri)(t))},s.WALLET_SNAP_PERMISSION_KEY="wallet_snap"}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/types.cjs"}],[1497,{"./types.cjs":1496,"./url.cjs":1498,"@metamask/snaps-sdk":3265,"@metamask/snaps-sdk/jsx":3352,"@metamask/snaps-sdk/jsx-runtime":3351,"@metamask/utils":3554,marked:5251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.serialiseJsx=s.walkJsx=s.getJsxChildren=s.hasChildren=s.getTotalTextLength=s.validateJsxElements=s.validateAssetSelector=s.validateTextLinks=s.validateLink=s.getJsxElementFromComponent=s.getTextChildren=void 0;const n=e("@metamask/snaps-sdk/jsx-runtime"),r=e("@metamask/snaps-sdk"),a=e("@metamask/snaps-sdk/jsx"),i=e("@metamask/utils"),o=e("marked"),c=e("./types.cjs"),l=e("./url.cjs"),u=["https:","mailto:","metamask:"];function d(e){switch(e){case"primary":return"primary";case"secondary":return"destructive";default:return undefined}}function h(e){return 1===e.length?e[0]:e}function p(e){return e.tokens&&e.tokens.length>0?h(e.tokens.flatMap(f)):e.href}function m(e){return h(e.flatMap(f))}function f(e){switch(e.type){case"link":return(0,n.jsx)(a.Link,{href:e.href,children:p(e)});case"text":return e.text;case"strong":return(0,n.jsx)(a.Bold,{children:m(e.tokens)});case"em":return(0,n.jsx)(a.Italic,{children:m(e.tokens)});default:return null}}function g(e){const t=(0,o.lexer)(e,{gfm:!1}),s=[];return(0,o.walkTokens)(t,e=>{if("paragraph"===e.type){s.length>0&&s.push("\n\n");const{tokens:t}=e;s.push(...t.flatMap(f))}}),s.filter(e=>null!==e)}function b(e,t,s){try{const n=new URL(e);if((0,i.assert)(u.includes(n.protocol),`Protocol must be one of: ${u.join(", ")}.`),"metamask:"===n.protocol){const t=(0,l.parseMetaMaskUrl)(e);t.snapId&&(0,i.assert)(s(t.snapId),"The Snap being navigated to is not installed.")}else if("mailto:"===n.protocol){const e=n.pathname.split(",");for(const s of e){const e=s.split("@")[1];(0,i.assert)(!e.includes(":"));const n=`https://${e}`;(0,i.assert)(!t(n),"The specified URL is not allowed.")}return}(0,i.assert)(!t(n.href),"The specified URL is not allowed.")}catch(e){throw new Error(`Invalid URL: ${"ERR_ASSERTION"===(null==e?void 0:e.code)?e.message:"Unable to parse URL."}`)}}function S(e,t){const s=t(e);(0,i.assert)(s,`Could not find account for address: ${e}`)}function A(e){const{type:t}=e;switch(t){case r.NodeType.Panel:return e.children.reduce((e,t)=>e+A(t),0);case r.NodeType.Row:return A(e.value);case r.NodeType.Text:return e.value.length;default:return 0}}function y(e){return(0,i.hasProperty)(e.props,"children")}function E(e){return Boolean(e)&&!0!==e}function C(e){if(y(e)){if(Array.isArray(e.props.children))return e.props.children.filter(E).flat(Infinity);if(e.props.children)return[e.props.children]}return[]}function _(e,t,s=0){if(Array.isArray(e)){for(const n of e){const e=_(n,t,s);if(e!==undefined)return e}return undefined}const n=t(e,s);if(n!==undefined)return n;if((0,i.hasProperty)(e,"props")&&(0,i.isPlainObject)(e.props)&&(0,i.hasProperty)(e.props,"children")){const n=C(e);for(const e of n)if((0,i.isPlainObject)(e)){const n=_(e,t,s+1);if(n!==undefined)return n}}return undefined}function T(e){return Object.entries(e).filter(([e])=>"children"!==e).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>{return` ${e}=${s=t,"string"==typeof s?`"${s}"`:`{${JSON.stringify(s)}}`}`;var s}).join("")}s.getTextChildren=g,s.getJsxElementFromComponent=function(e){return function(e){const t=A(e);(0,i.assert)(t<=5e4,"The text in a Snap UI may not be larger than 50 kB.")}(e),function e(t){switch(t.type){case r.NodeType.Address:return(0,n.jsx)(a.Address,{address:t.value});case r.NodeType.Button:return(0,n.jsx)(a.Button,{name:t.name,variant:d(t.variant),type:t.buttonType,children:t.value});case r.NodeType.Copyable:return(0,n.jsx)(a.Copyable,{value:t.value,sensitive:t.sensitive});case r.NodeType.Divider:return(0,n.jsx)(a.Divider,{});case r.NodeType.Form:return(0,n.jsx)(a.Form,{name:t.name,children:h(t.children.map(e))});case r.NodeType.Heading:return(0,n.jsx)(a.Heading,{children:t.value});case r.NodeType.Image:return(0,n.jsx)(a.Image,{src:t.value});case r.NodeType.Input:return(0,n.jsx)(a.Field,{label:t.label,error:t.error,children:(0,n.jsx)(a.Input,{name:t.name,type:t.inputType,value:t.value,placeholder:t.placeholder})});case r.NodeType.Panel:return(0,n.jsx)(a.Box,{children:h(t.children.map(e))});case r.NodeType.Row:return(0,n.jsx)(a.Row,{label:t.label,variant:t.variant,children:e(t.value)});case r.NodeType.Spinner:return(0,n.jsx)(a.Spinner,{});case r.NodeType.Text:return(0,n.jsx)(a.Text,{children:h(g(t.value))});default:return(0,i.assertExhaustive)(t)}}(e)},s.validateLink=b,s.validateTextLinks=function(e,t,s){const n=function(e){const t=(0,o.lexer)(e,{gfm:!1}),s=[];return(0,o.walkTokens)(t,e=>{"link"===e.type&&s.push(e)}),s}(e);for(const e of n)b(e.href,t,s)},s.validateAssetSelector=S,s.validateJsxElements=function(e,{isOnPhishingList:t,getSnap:s,getAccountByAddress:n,hasPermission:r}){_(e,e=>{switch(e.type){case"Link":b(e.props.href,t,s);break;case"AssetSelector":S(e.props.addresses[0],n);break;case"Image":{const{src:t}=e.props,s=(0,c.isValidUrl)(t);(0,i.assert)(!s||s&&r("endowment:network-access"),"Using external images is only permitted with the `endowment:network-access` permission.");break}}})},s.getTotalTextLength=A,s.hasChildren=y,s.getJsxChildren=C,s.walkJsx=_,s.serialiseJsx=function e(t,s=0){if(Array.isArray(t))return t.map(t=>e(t,s)).join("");const n="  ".repeat(s);if("string"==typeof t)return`${n}${t}\n`;if(!t)return"";const{type:r,props:a}=t,o=s>0?"\n":"";if((0,i.hasProperty)(a,"children")){const t=e(a.children,s+1);return`${n}<${r}${T(a)}>\n${t}${n}</${r}>${o}`}return`${n}<${r}${T(a)} />${o}`}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/ui.cjs"}],[1498,{"./snaps.cjs":1491,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.parseMetaMaskUrl=s.SNAP_PATHS=s.CLIENT_PATHS=void 0;const n=e("@metamask/utils"),r=e("./snaps.cjs");s.CLIENT_PATHS=["/"],s.SNAP_PATHS=["/home"],s.parseMetaMaskUrl=function(e){const t=new URL(e),{protocol:a}=t;if("metamask:"!==a)throw new Error(`Unable to parse URL. Expected the protocol to be "metamask:", but received "${a}".`);const[i,...o]=t.href.replace("metamask://","").split("/"),c=`/${o.join("/")}`;switch(i){case"client":return(0,n.assert)(s.CLIENT_PATHS.includes(c),`Unable to navigate to "${c}". The provided path is not allowed.`),{authority:i,path:c};case"snap":return function(e){const t="Invalid MetaMask url:",a=(0,r.stripSnapPrefix)(e.slice(1)),i=e.slice(1).startsWith("npm:")?"npm:":"local:",o=a.startsWith("@"),c=a.split("/"),l=`/${c[c.length-1]}`;let u;if("local:"===i){const[e,,...r]=c.slice(0,-1);u=`${e}//${r.join("/")}`,(0,n.assert)(s.SNAP_PATHS.includes(l),`${t} invalid snap path.`)}else u=o?`${c[0]}/${c[1]}`:c[0],(0,n.assert)(o?3===c.length&&s.SNAP_PATHS.includes(l):2===c.length&&s.SNAP_PATHS.includes(l),`${t} invalid snap path.`);const d=`${i}${u}`;return(0,r.assertIsValidSnapId)(d),{authority:"snap",snapId:d,path:l}}(c);default:throw new Error(`Expected "metamask:" URL to start with "client" or "snap", but received "${i}".`)}}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/url.cjs"}],[1499,{"./icon.cjs":1480,"./localization.cjs":1485,"./manifest/validation.cjs":1488,"./snaps.cjs":1491},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateFetchedSnap=void 0;const n=e("./icon.cjs"),r=e("./localization.cjs"),a=e("./manifest/validation.cjs"),i=e("./snaps.cjs");s.validateFetchedSnap=async function(e){(0,a.assertIsSnapManifest)(e.manifest.result),await(0,i.validateSnapShasum)(e),(0,r.validateSnapManifestLocalizations)(e.manifest.result,e.localizationFiles.map(e=>e.result)),e.svgIcon&&(0,n.assertIsSnapIcon)(e.svgIcon)}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/validation.cjs"}],[1500,{"@metamask/superstruct":3415,"@metamask/utils":3554,semver:5987},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.resolveVersionRange=s.getTargetVersion=s.DEFAULT_REQUESTED_SNAP_VERSION=void 0;const n=e("@metamask/superstruct"),r=e("@metamask/utils"),a=e("semver");s.DEFAULT_REQUESTED_SNAP_VERSION="*",s.getTargetVersion=function(e,t){const s=(0,a.maxSatisfying)(e,t);return s||(0,a.maxSatisfying)(e,t,{includePrerelease:!0})},s.resolveVersionRange=function(e){return e===undefined||"latest"===e?[undefined,s.DEFAULT_REQUESTED_SNAP_VERSION]:(0,n.validate)(e,r.VersionRangeStruct)}}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/versions.cjs"}],[1501,{"../deep-clone.cjs":1464,"@metamask/utils":3554,"@scure/base":3634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(s,"__esModule",{value:!0}),s.VirtualFile=void 0;const r=e("@metamask/utils"),a=e("@scure/base"),i=e("../deep-clone.cjs");class o{constructor(e){var t,s,r,a;let i;n(this,"value",void 0),n(this,"result",void 0),n(this,"data",void 0),n(this,"path",void 0),i="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=(null===(t=i)||void 0===t?void 0:t.value)??"",this.result=(null===(s=i)||void 0===s?void 0:s.result)??undefined,this.data=(null===(r=i)||void 0===r?void 0:r.data)??{},this.path=(null===(a=i)||void 0===a?void 0:a.path)??"/"}get size(){return"string"==typeof this.value?this.value.length:this.value.byteLength}toString(e){if("string"==typeof this.value)return(0,r.assert)(e===undefined,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return(0,r.bytesToHex)(this.value);if(this.value instanceof Uint8Array&&"base64"===e)return a.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const e=new o;return"string"==typeof this.value?e.value=this.value:e.value=this.value.slice(0),e.result=(0,i.deepClone)(this.result),e.data=(0,i.deepClone)(this.data),e.path=this.path,e}}s.VirtualFile=o}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/virtual-file/VirtualFile.cjs"}],[1502,{"./VirtualFile.cjs":1501},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]},r=function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./VirtualFile.cjs"),s)}}},{package:"@metamask/assets-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/assets-controllers/node_modules/@metamask/snaps-utils/dist/virtual-file/index.cjs"}],[1503,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function a(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!a(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function l(e,t){i(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}Object.defineProperty(s,"__esModule",{value:!0}),s.output=s.exists=s.hash=s.bytes=s.bool=s.number=s.isBytes=void 0,s.number=n,s.bool=r,s.isBytes=a,s.bytes=i,s.hash=o,s.exists=c,s.output=l;const u={number:n,bool:r,bytes:i,hash:o,exists:c,output:l};s.default=u}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_assert.js"}],[1504,{"./_assert.js":1503,"./utils.js":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.HashMD=s.Maj=s.Chi=void 0;const n=e("./_assert.js"),r=e("./utils.js");s.Chi=(e,t,s)=>e&t^~e&s;s.Maj=(e,t,s)=>e&t^e&s^t&s;class a extends r.Hash{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,r.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:s,blockLen:a}=this,i=(e=(0,r.toBytes)(e)).length;for(let n=0;n<i;){const o=Math.min(a-this.pos,i-n);if(o===a){const t=(0,r.createView)(e);for(;a<=i-n;n+=a)this.process(t,n);continue}s.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===a&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:a,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(s,0),o=0);for(let e=o;e<a;e++)t[e]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const r=BigInt(32),a=BigInt(4294967295),i=Number(s>>r&a),o=Number(s&a),c=n?4:0,l=n?0:4;e.setUint32(t+c,i,n),e.setUint32(t+l,o,n)}(s,a-8,BigInt(8*this.length),i),this.process(s,0);const c=(0,r.createView)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:r,destroyed:a,pos:i}=this;return e.length=n,e.pos=i,e.finished=r,e.destroyed=a,n%t&&e.buffer.set(s),e}}s.HashMD=a}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/node_modules/@noble/hashes/_md.js"}],[1505,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.crypto=void 0,s.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/node_modules/@noble/hashes/crypto.js"}],[1506,{"./_md.js":1504,"./utils.js":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.sha224=s.sha256=void 0;const n=e("./_md.js"),r=e("./utils.js"),a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4],this.F=0|i[5],this.G=0|i[6],this.H=0|i[7]}get(){const{A:e,B:t,C:s,D:n,E:r,F:a,G:i,H:o}=this;return[e,t,s,n,r,a,i,o]}set(e,t,s,n,r,a,i,o){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|r,this.F=0|a,this.G=0|i,this.H=0|o}process(e,t){for(let s=0;s<16;s++,t+=4)o[s]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=o[e-15],s=o[e-2],n=(0,r.rotr)(t,7)^(0,r.rotr)(t,18)^t>>>3,a=(0,r.rotr)(s,17)^(0,r.rotr)(s,19)^s>>>10;o[e]=a+o[e-7]+n+o[e-16]|0}let{A:s,B:i,C:c,D:l,E:u,F:d,G:h,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,r.rotr)(u,6)^(0,r.rotr)(u,11)^(0,r.rotr)(u,25))+(0,n.Chi)(u,d,h)+a[e]+o[e]|0,m=((0,r.rotr)(s,2)^(0,r.rotr)(s,13)^(0,r.rotr)(s,22))+(0,n.Maj)(s,i,c)|0;p=h,h=d,d=u,u=l+t|0,l=c,c=i,i=s,s=t+m|0}s=s+this.A|0,i=i+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(s,i,c,l,u,d,h,p)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}s.sha256=(0,r.wrapConstructor)(()=>new c),s.sha224=(0,r.wrapConstructor)(()=>new l)}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/node_modules/@noble/hashes/sha256.js"}],[1507,{"./_assert.js":1503,"@noble/hashes/crypto":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(s,"__esModule",{value:!0}),s.randomBytes=s.wrapXOFConstructorWithOpts=s.wrapConstructorWithOpts=s.wrapConstructor=s.checkOpts=s.Hash=s.concatBytes=s.toBytes=s.utf8ToBytes=s.asyncLoop=s.nextTick=s.hexToBytes=s.bytesToHex=s.byteSwap32=s.byteSwapIfBE=s.byteSwap=s.isLE=s.rotl=s.rotr=s.createView=s.u32=s.u8=s.isBytes=void 0;const n=e("@noble/hashes/crypto"),r=e("./_assert.js");s.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name};s.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);s.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));s.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);s.rotr=(e,t)=>e<<32-t|e>>>t;s.rotl=(e,t)=>e<<t|e>>>32-t>>>0,s.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];s.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,s.byteSwapIfBE=s.isLE?e=>e:e=>(0,s.byteSwap)(e),s.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=(0,s.byteSwap)(e[t])};const a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));s.bytesToHex=function(e){(0,r.bytes)(e);let t="";for(let s=0;s<e.length;s++)t+=a[e[s]];return t};const i=48,o=57,c=65,l=70,u=97,d=102;function h(e){return e>=i&&e<=o?e-i:e>=c&&e<=l?e-(c-10):e>=u&&e<=d?e-(u-10):void 0}s.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,s=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(s);for(let t=0,r=0;t<s;t++,r+=2){const s=h(e.charCodeAt(r)),a=h(e.charCodeAt(r+1));if(s===undefined||a===undefined){const t=e[r]+e[r+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+r)}n[t]=16*s+a}return n};function p(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function m(e){return"string"==typeof e&&(e=p(e)),(0,r.bytes)(e),e}s.nextTick=async()=>{},s.asyncLoop=async function(e,t,n){let r=Date.now();for(let a=0;a<e;a++){n(a);const e=Date.now()-r;e>=0&&e<t||(await(0,s.nextTick)(),r+=e)}},s.utf8ToBytes=p,s.toBytes=m,s.concatBytes=function(...e){let t=0;for(let s=0;s<e.length;s++){const n=e[s];(0,r.bytes)(n),t+=n.length}const s=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const r=e[t];s.set(r,n),n+=r.length}return s};s.Hash=class{clone(){return this._cloneInto()}};const f={}.toString;s.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!==f.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},s.wrapConstructor=function(e){const t=t=>e().update(m(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t},s.wrapConstructorWithOpts=function(e){const t=(t,s)=>e(s).update(m(t)).digest(),s=e({});return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=t=>e(t),t},s.wrapXOFConstructorWithOpts=function(e){const t=(t,s)=>e(s).update(m(t)).digest(),s=e({});return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=t=>e(t),t},s.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography>@noble/hashes",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/node_modules/@noble/hashes/utils.js"}],[1508,{"./utils.js":1509,"@noble/hashes/sha256":1506},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.sha256=void 0;const n=e("@noble/hashes/sha256"),r=e("./utils.js");s.sha256=(0,r.wrapHash)(n.sha256)}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/sha256.js"}],[1509,{"@noble/hashes/_assert":1503,"@noble/hashes/utils":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.crypto=s.utf8ToBytes=s.createView=s.concatBytes=s.toHex=s.bytesToHex=s.assertBytes=s.assertBool=void 0,s.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},s.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,a.hexToBytes)(t)},s.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},s.wrapHash=function(e){return t=>(r.default.bytes(t),e(t))};const r=n(e("@noble/hashes/_assert")),a=e("@noble/hashes/utils"),i=r.default.bool;s.assertBool=i;const o=r.default.bytes;s.assertBytes=o;var c=e("@noble/hashes/utils");Object.defineProperty(s,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(s,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(s,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(s,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(s,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),s.crypto=(()=>{const e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined,s=void 0!==t&&"function"==typeof t.require&&t.require.bind(t);return{node:s&&!e?s("crypto"):undefined,web:e}})()}}},{package:"@metamask/assets-controllers>@metamask/accounts-controller>ethereum-cryptography",file:"node_modules/@metamask/assets-controllers/node_modules/ethereum-cryptography/utils.js"}],[1510,{"./errors.cjs":1512,"@noble/hashes/sha3":3609,"bn.js":4413,buffer:4474,"json-stable-stringify-without-jsonify":5055},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.toSnakeCaseKeys=s.toCamelCaseKeys=s.convertKeys=s.toSnake=s.toCamel=s.isJSONRPCError=s.filterErrorResponses=s.filterCompletedRequests=s.Some=s.getProxyCoordinatorNodeIndex=s.kCombinations=s.thresholdSame=s.safeStringify=s.add0x=s.remove0x=s.keccak256AndHexify=void 0;const r=e("@noble/hashes/sha3"),a=n(e("bn.js")),i=n(e("json-stable-stringify-without-jsonify")),o=e("./errors.cjs");function c(e){return`0x${t.from((0,r.keccak_256)(e)).toString("hex")}`}s.keccak256AndHexify=c,s.remove0x=function(e){return e.startsWith("0x")?e.slice(2):e},s.add0x=function(e){return e.startsWith("0x")?e:`0x${e}`},s.safeStringify=function(e,t){const s=(0,i.default)(e,t);if(!s)throw new Error("Failed to stringify");return s},s.thresholdSame=function(e,t){const s={};for(const n of e){const e=(0,i.default)(n);if(e&&(s[e]=s[e]?s[e]+1:1,s[e]===t))return n}return undefined},s.kCombinations=function*e(t,s){let n=t;if("number"==typeof n&&(n=Array.from({length:n},(e,t)=>t)),s>n.length||s<=0)return;if(s===n.length)return void(yield n);if(1===s){for(const e of n)yield[e];return}const r=Array.from({length:n.length-s+2},(e,t)=>t);for(const t of r)for(const r of e(n.slice(t+1),s-1))yield[n[t],...r]};function l(e){return e.replace(/_([a-z])/gu,(e,t)=>t.toUpperCase())}function u(e){return e.replace(/([A-Z])/gu,"_$1").toLowerCase()}function d(e,t){if(Array.isArray(e))return e.map(e=>d(e,t));if(null!==e&&"object"==typeof e){const s={};for(const[n,r]of Object.entries(e))s[t(n)]=d(r,t);return s}return e}s.getProxyCoordinatorNodeIndex=(e,s,n)=>{const r=`${s}${n}`,i=c(t.from(r,"utf8")).slice(2);return e[new a.default(i,"hex").mod(new a.default(e.length)).toNumber()]},s.Some=async function(e,t){let s;const n=new Array(e.length).fill(undefined),r=new Array(e.length).fill(undefined);for(const[a,i]of e.entries()){let e;try{const t=new Promise((t,s)=>{e=setTimeout(()=>s(new Error("Promise timed out")),1e4)});n[a]=await Promise.race([i,t])}catch(e){r[a]=e}finally{e&&clearTimeout(e)}try{const e=n.every(e=>e!==undefined),s=await t(n,{allSettled:e});if(s)return s}catch(e){s=e}}!function(e,t,s){let n=e.some(e=>e!==undefined);if(n)throw new o.SomeError({errors:e,responses:t,predicate:s});if(n=t.some(e=>Boolean(e?.error)),n){const e=t.map(e=>{const{error:t}=e;return t?.data&&t.data.length>0?new Error(t.data):undefined});throw new o.SomeError({errors:e,responses:t,predicate:s})}throw new o.SomeError({errors:e,responses:t,predicate:s})}(r,n,s)},s.filterCompletedRequests=function(e){return e.filter(e=>{const t=e&&"object"==typeof e,s=e,n=!s?.error,r=Boolean(s?.result);return t&&n&&r})},s.filterErrorResponses=function(e){return e.filter(e=>{const t=e&&"object"==typeof e,s=e,n=Boolean(s?.error);return t&&n})},s.isJSONRPCError=function(e){const t=e;return Boolean(e&&"object"==typeof e)&&"number"==typeof t?.code&&"string"==typeof t?.message},s.toCamel=l,s.toSnake=u,s.convertKeys=d;s.toCamelCaseKeys=e=>d(e,l);s.toSnakeCaseKeys=e=>d(e,u)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/common.cjs"}],[1511,{"./common.cjs":1510,buffer:4474,elliptic:4647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.uint8ArrayToHex=s.derivePubKey=s.toChecksumAddress=s.encParamsHexToBuf=s.encryptedParamsBufToHex=s.generatePrivateKey=s.getSecp256K1Curve=void 0;const n=e("elliptic"),r=e("./common.cjs");let a=null;s.getSecp256K1Curve=function(){return a=a??new n.ec("secp256k1"),a},s.generatePrivateKey=function(e){return e.genKeyPair().getPrivate()},s.encryptedParamsBufToHex=function(e){return{iv:t.from(e.iv).toString("hex"),ephemPublicKey:t.from(e.ephemPublicKey).toString("hex"),mac:t.from(e.mac).toString("hex"),mode:"AES256"}},s.encParamsHexToBuf=function(e){return{iv:t.from(e.iv,"hex"),ephemPublicKey:t.from(e.ephemPublicKey,"hex"),mac:t.from(e.mac,"hex")}},s.toChecksumAddress=function(e){const s=(n=e,n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n).toLowerCase();var n;const a=t.from(s,"utf8"),i=(0,r.keccak256AndHexify)(a).slice(2);let o="0x";for(let e=0;e<s.length;e++)parseInt(i[e],16)>=8?o+=s[e].toUpperCase():o+=s[e];return o},s.derivePubKey=function(e,t){const s=t.toString(16,64);return e.keyFromPrivate(s,"hex").getPublic()},s.uint8ArrayToHex=function(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/cryptoUtils.cjs"}],[1512,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.SomeError=void 0;class n extends Error{constructor({errors:e,responses:t,predicate:s}){const r=s?.message??"unknown error";super(`Unable to resolve enough promises. \n      errors: ${e.map(e=>e?.message??e).join(", ")}, \n      predicate error: ${r},\n      ${t.length} responses,\n      responses: ${JSON.stringify(t)}`),this.errors=e,this.responses=t,this.predicate=s,Object.setPrototypeOf(this,n.prototype)}toString(){return this.message}}s.SomeError=n}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/errors.cjs"}],[1513,{"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.waitFor=s.capitalizeFirstLetter=s.generateEmptyBNArray=void 0;const r=n(e("bn.js"));s.generateEmptyBNArray=function(e){return Array.from({length:e},()=>new r.default(0))},s.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s.waitFor=async function(e=2e3){return new Promise(t=>{setTimeout(t,e)})}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/helpers.cjs"}],[1514,{"./common.cjs":1510,"./cryptoUtils.cjs":1511,"./errors.cjs":1512,"./helpers.cjs":1513,"./lagrangeInterpolation.cjs":1515,"./point.cjs":1516,"./polynomial.cjs":1517,"./share.cjs":1518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.Share=s.Polynomial=s.Point=void 0;var i=e("./point.cjs");Object.defineProperty(s,"Point",{enumerable:!0,get:function(){return a(i).default}});var o=e("./polynomial.cjs");Object.defineProperty(s,"Polynomial",{enumerable:!0,get:function(){return a(o).default}});var c=e("./share.cjs");Object.defineProperty(s,"Share",{enumerable:!0,get:function(){return a(c).default}}),r(e("./errors.cjs"),s),r(e("./common.cjs"),s),r(e("./lagrangeInterpolation.cjs"),s),r(e("./cryptoUtils.cjs"),s),r(e("./helpers.cjs"),s)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/index.cjs"}],[1515,{"./cryptoUtils.cjs":1511,"./helpers.cjs":1513,"./point.cjs":1516,"./polynomial.cjs":1517,"@noble/curves/abstract/modular":3590,"@noble/curves/abstract/utils":3592,"@noble/curves/secp256k1":3595,"@noble/hashes/utils":3611,"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.lagrangeInterpolation=s.lagrangeInterpolationForScalars=s.lagrangeInterpolationForPoints=s.lagrangeInterpolationNoble=s.generateRandomScalar=s.generateRandomPolynomialNoble=s.generateRandomPolynomial=s.lagrangeInterpolatePolynomial=void 0;const o=e("@noble/curves/abstract/modular"),c=e("@noble/curves/abstract/utils"),l=e("@noble/curves/secp256k1"),u=e("@noble/hashes/utils"),d=i(e("bn.js")),h=e("./cryptoUtils.cjs"),p=e("./helpers.cjs"),m=i(e("./point.cjs")),f=a(e("./polynomial.cjs"));function g(e,t){const s=(0,h.generatePrivateKey)(t);return e.find(e=>e.eq(s))?g(e,t):s}function b(e,t,s){const n=(0,p.generateEmptyBNArray)(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<t.length;a++)n[r+a]=n[r+a].add(e[r].mul(t[a])).umod(s);return n}function S(e,t){const s=t.length,n=(0,p.generateEmptyBNArray)(s);if(!e.n)throw new Error("Curve is not set");for(let r=0;r<s;r++){let a=[new d.default(1)];for(let n=0;n<s;n++){if(n===r)continue;const s=t[r].xCoordinate.sub(t[n].xCoordinate).umod(e.n).invm(e.n);a=b(a,[t[n].xCoordinate.neg().umod(e.n).mul(s).umod(e.n),s],e.n)}for(let s=0;s<a.length;s++)n[s]=n[s].add(a[s].mul(t[r].yCoordinate)).umod(e.n)}return new f.default(n,e)}function A(e=l.secp256k1.CURVE.n){const t=(0,o.getMinHashLength)(e),s=(0,u.randomBytes)(t);return(0,c.bytesToNumberBE)(s)%e}function y(e,t,s){if(t.length!==s.length)throw new Error("Values and nodeIndex arrays must have the same length");if(0===t.length)throw new Error("Cannot interpolate with empty arrays");const n=(0,o.Field)(e),r="bigint"==typeof t[0];let a=r?0n:l.secp256k1.ProjectivePoint.ZERO;for(let e=0;e<t.length;e++){let i=1n,o=1n;for(let t=0;t<s.length;t++){if(e===t)continue;const r=s[e],a=s[t],c=n.neg(a),l=n.sub(r,a);i=n.mul(i,c),o=n.mul(o,l)}const c=n.mul(i,n.inv(o));if(r){const s=t[e],r=n.mul(s,c);a=n.add(a,r)}else{const s=t[e].multiply(c);a=a.add(s)}}return a}s.lagrangeInterpolatePolynomial=S,s.generateRandomPolynomial=function(e,t,s,n){let r;if(r=s||g([new d.default(0)],e),!n){const s=[r];for(let n=0;n<t;n+=1){const t=g(s,e);s.push(t)}return new f.default(s,e)}if(!Array.isArray(n))throw new Error("deterministic shares in generateRandomPolynomial should be an array");if(n.length>t)throw new Error("deterministicShares in generateRandomPolynomial should be less or equal than degree to ensure an element of randomness");const a={};n.forEach(t=>{a[t.shareIndex.toString("hex",64)]=new m.default(t.shareIndex,t.share,e)});for(let s=0;s<t-n.length;s+=1){const t=[new d.default(0)];Object.keys(a).forEach(e=>{t.push(new d.default(e,"hex"))});const s=g(t,e);a[s.toString("hex",64)]=new m.default(s,(0,h.generatePrivateKey)(e),e)}return a[0]=new m.default(new d.default(0),r,e),S(e,Object.values(a))},s.generateRandomPolynomialNoble=function(e,t,s){const n=[s??A(e)];for(let s=1;s<=t;s++)n[s]=A(e);return new f.PolynomialNoble(n,e)},s.generateRandomScalar=A,s.lagrangeInterpolationNoble=y,s.lagrangeInterpolationForPoints=function(e,t,s){return y(e,t,s)},s.lagrangeInterpolationForScalars=function(e,t,s){return y(e,t,s)},s.lagrangeInterpolation=function(e,t,s){if(t.length!==s.length)throw new Error("shares not equal to nodeIndex length in lagrangeInterpolation");const n=t.map((t,n)=>new m.default(s[n],t,e));return S(e,n).polynomial[0]}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/lagrangeInterpolation.cjs"}],[1516,{"bn.js":4413,buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const r=n(e("bn.js"));s.default=class{constructor(e,t,s){this.xCoordinate=new r.default(e,"hex"),this.yCoordinate=new r.default(t,"hex"),this.ecCurve=s}encode(e){switch(e){case"arr":return t.concat([t.from("04","hex"),t.from(this.xCoordinate.toString("hex",64),"hex"),t.from(this.yCoordinate.toString("hex",64),"hex")]);case"elliptic-compressed":{const e=this.ecCurve.keyFromPublic({x:this.xCoordinate.toString("hex",64),y:this.yCoordinate.toString("hex",64)},"hex");return t.from(e.getPublic(!0,"hex"),"hex")}default:throw new Error("encoding doesn't exist in Point")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/point.cjs"}],[1517,{"./share.cjs":1518,"@noble/curves/abstract/modular":3590,"bn.js":4413,elliptic:4647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.PolynomialNoble=void 0;const c=e("@noble/curves/abstract/modular"),l=o(e("bn.js")),u=e("elliptic"),d=o(e("./share.cjs"));class h{constructor(e,t,s){n.set(this,void 0),r.set(this,void 0),s?(a(this,n,e,"f"),a(this,r,(0,c.Field)(s.curveN),"f"),this.polynomial=i(this,n,"f").map(e=>new l.default(e.toString()))):this.polynomial=e,this.ecCurve=t}getThreshold(){return this.polynomial.length}polyEval(e){const t=new l.default(e,"hex");let s=new l.default(t),n=new l.default(0);n=n.add(this.polynomial[0]);const{n:r}=this.ecCurve;if(!r)throw new Error("Curve is not set");for(const e of this.polynomial.slice(1)){const a=s.mul(e);n=n.add(a),n=n.umod(r),s=s.mul(new l.default(t)),s=s.umod(r)}return n}polyEvalNoble(e){if(!i(this,n,"f")||!i(this,r,"f"))throw new Error("Noble implementation not initialized");if(0===i(this,n,"f").length)return 0n;let t=i(this,n,"f")[0],s=e;for(let a=1;a<i(this,n,"f").length;a++)t=i(this,r,"f").add(t,i(this,r,"f").mul(i(this,n,"f")[a],s)),s=i(this,r,"f").mul(s,e);return t}generateShares(e){const t=e.map(e=>{if("bigint"==typeof e)return new l.default(e.toString());if("number"==typeof e)return new l.default(e);if(e instanceof l.default)return e;if("string"==typeof e)return new l.default(e,"hex");throw new Error("Invalid share index")}),s={};for(const e of t)s[e.toString("hex",64)]=new d.default(e,this.polyEval(e));return s}}n=new WeakMap,r=new WeakMap,s.default=h;s.PolynomialNoble=class extends h{constructor(e,t){super(e,new u.ec("secp256k1"),{curveN:t})}}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/polynomial.cjs"}],[1518,{"bn.js":4413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const r=n(e("bn.js"));class a{constructor(e,t){this.share=new r.default(t,"hex"),this.shareIndex=new r.default(e,"hex")}static fromJSON(e){const{share:t,shareIndex:s}=e;return new a(s,t)}toJSON(){return{share:this.share.toString("hex",64),shareIndex:this.shareIndex.toString("hex",64)}}}s.default=a}}},{package:"@metamask/seedless-onboarding-controller>@metamask/auth-network-utils",file:"node_modules/@metamask/auth-network-utils/dist/share.cjs"}],[1519,{immer:5015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.deriveStateFromMetadata=s.BaseController=void 0;const o=e("immer");(0,o.enablePatches)();s.BaseController=class{constructor({messenger:e,metadata:t,name:s,state:c}){n.set(this,void 0),r.set(this,void 0),a(this,r,e,"f"),this.messenger=e,this.name=s,a(this,n,(0,o.freeze)(c,!0),"f"),this.metadata=t,i(this,r,"f").registerActionHandler(`${s}:getState`,()=>this.state),i(this,r,"f").registerInitialEventPayload({eventType:`${s}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i(this,n,"f")}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,s,c]=o.produceWithPatches(i(this,n,"f"),e);return s.length>0&&(a(this,n,t,"f"),i(this,r,"f").publish(`${this.name}:stateChange`,t,s)),{nextState:t,patches:s,inversePatches:c}}applyPatches(e){const t=(0,o.applyPatches)(i(this,n,"f"),e);a(this,n,t,"f"),i(this,r,"f").publish(`${this.name}:stateChange`,t,e)}destroy(){this.messenger.clearEventSubscriptions(`${this.name}:stateChange`)}},n=new WeakMap,r=new WeakMap,s.deriveStateFromMetadata=function(e,t,s,n){return Object.keys(e).reduce((r,a)=>{try{const n=t[a];if(!n)throw new Error(`No metadata found for '${String(a)}'`);const i=n[s],o=e[a];return"function"==typeof i?r[a]=i(o):i&&(r[a]=o),r}catch(e){if(n)try{n(e instanceof Error?e:new Error(String(e)))}catch(t){console.error(new Error("Error thrown when calling 'captureException'"),t),console.error(e)}else console.error(e);return r}},{})}}}},{package:"@metamask/base-controller",file:"node_modules/@metamask/base-controller/dist/BaseController.cjs"}],[1520,{"./BaseController.cjs":1519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.deriveStateFromMetadata=s.BaseController=void 0;var n=e("./BaseController.cjs");Object.defineProperty(s,"BaseController",{enumerable:!0,get:function(){return n.BaseController}}),Object.defineProperty(s,"deriveStateFromMetadata",{enumerable:!0,get:function(){return n.deriveStateFromMetadata}})}}},{package:"@metamask/base-controller",file:"node_modules/@metamask/base-controller/dist/index.cjs"}],[1521,{"./constants/bridge.cjs":1522,"./constants/chains.cjs":1523,"./constants/swaps.cjs":1524,"./constants/traces.cjs":1526,"./selectors.cjs":1528,"./types.cjs":1529,"./utils/assets.cjs":1530,"./utils/balance.cjs":1531,"./utils/bridge.cjs":1532,"./utils/caip-formatters.cjs":1533,"./utils/feature-flags.cjs":1534,"./utils/fetch.cjs":1536,"./utils/metrics/constants.cjs":1537,"./utils/metrics/properties.cjs":1538,"./utils/quote-fees.cjs":1539,"./utils/quote.cjs":1540,"./utils/snaps.cjs":1542,"@ethersproject/bignumber":777,"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/metamask-eth-abis":2597,"@metamask/polling-controller":2889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h,p,m,f,g,b,S,A,y,E,C,_,T,k,w,I,v=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},N=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.BridgeController=void 0;const P=e("@ethersproject/bignumber"),j=e("@ethersproject/contracts"),R=e("@ethersproject/providers"),O=e("@metamask/metamask-eth-abis"),x=e("@metamask/polling-controller"),D=e("./constants/bridge.cjs"),M=e("./constants/chains.cjs"),L=e("./constants/swaps.cjs"),B=e("./constants/traces.cjs"),F=e("./selectors.cjs"),U=e("./types.cjs"),H=e("./utils/assets.cjs"),W=e("./utils/balance.cjs"),$=e("./utils/bridge.cjs"),q=e("./utils/caip-formatters.cjs"),V=e("./utils/feature-flags.cjs"),G=e("./utils/fetch.cjs"),K=e("./utils/metrics/constants.cjs"),z=e("./utils/metrics/properties.cjs"),Y=e("./utils/quote.cjs"),J=e("./utils/quote-fees.cjs"),Q=e("./utils/snaps.cjs"),X={quoteRequest:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotes:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesInitialLoadTime:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesLastFetched:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesLoadingStatus:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quoteFetchError:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},quotesRefreshCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},assetExchangeRates:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},minimumBalanceForRentExemptionInLamports:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class Z extends((0,x.StaticIntervalPollingController)()){constructor({messenger:e,state:t,clientId:s,clientVersion:x,getLayer1GasFee:Z,fetchFn:ee,config:te,trackMetaMetricsFn:se,traceFn:ne}){super({name:D.BRIDGE_CONTROLLER_NAME,metadata:X,messenger:e,state:{...(0,$.getDefaultBridgeControllerState)(),...t}}),n.add(this),r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),h.set(this,void 0),this._executePoll=async e=>{await N(this,S,"f").call(this,e)},this.updateBridgeQuoteRequestParams=async(e,t)=>{N(this,w,"f").call(this,e),this.resetState(K.AbortReason.QuoteRequestUpdated);const s={...D.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest,...e};if(this.update(e=>{e.quoteRequest=s}),await N(this,f,"f").call(this,s).catch(e=>console.warn("Failed to fetch asset exchange rates",e)),(0,Y.isValidQuoteRequest)(s)){v(this,a,Date.now(),"f");const r=(0,$.isNonEvmChainId)(s.srcChainId),i=r?undefined:N(this,n,"m",C).call(this,(0,q.formatChainIdToHex)(s.srcChainId))?.configuration;let o,c=Boolean(e.resetApproval);r?o=e.insufficientBal:i?.rpcUrl?.includes("tenderly")?o=!0:(this.update(e=>{e.quotesLoadingStatus=U.RequestStatus.LOADING}),c=await N(this,b,"f").call(this,s),o=e.insufficientBal??await N(this,g,"f").call(this,s)),this.setChainIntervalLength(),this.startPolling({updatedQuoteRequest:{...s,insufficientBal:o,resetApproval:c},context:t})}},this.fetchQuotes=async(e,t=null,s=null)=>{const r=(0,V.getBridgeFeatureFlags)(this.messenger),a=s?r.quoteRequestOverrides?.[s]:undefined,u=await N(this,b,"f").call(this,e),{quotes:d,validationFailures:m}=await(0,G.fetchBridgeQuotes)(a?{...e,...a,resetApproval:u}:{...e,resetApproval:u},t,N(this,i,"f"),N(this,l,"f"),N(this,h,"f").customBridgeApiBaseUrl??D.BRIDGE_PROD_API_BASE_URL,s,N(this,o,"f"));N(this,p,"f").call(this,m);const f=await(0,J.appendFeesToQuotes)(d,this.messenger,N(this,c,"f"),N(this,n,"m",E).call(this,e.walletAddress));return(0,Y.sortQuotes)(f,s)},p.set(this,e=>{0!==e.length&&this.trackUnifiedSwapBridgeEvent(K.UnifiedSwapBridgeEventName.QuotesValidationFailed,{failures:e})}),m.set(this,()=>({...this.messenger.call("MultichainAssetsRatesController:getState"),...this.messenger.call("CurrencyRateController:getState"),...this.messenger.call("TokenRatesController:getState"),...this.state})),f.set(this,async({srcChainId:e,srcTokenAddress:t,destChainId:s,destTokenAddress:n})=>{const a=new Set([]),c=N(this,m,"f").call(this);t&&e&&!(0,F.selectIsAssetExchangeRateInState)(c,e,t)&&(0,H.getAssetIdsForToken)(t,e).forEach(e=>a.add(e)),n&&s&&!(0,F.selectIsAssetExchangeRateInState)(c,s,n)&&(0,H.getAssetIdsForToken)(n,s).forEach(e=>a.add(e));const u=this.messenger.call("CurrencyRateController:getState").currentCurrency;if(0===a.size)return;const d=await(0,G.fetchAssetPrices)({assetIds:a,currencies:new Set([u]),clientId:N(this,i,"f"),clientVersion:N(this,o,"f"),fetchFn:N(this,l,"f"),signal:N(this,r,"f")?.signal}),h=(0,H.toExchangeRates)(u,d);this.update(e=>{e.assetExchangeRates={...e.assetExchangeRates,...h}})}),g.set(this,async e=>{try{const t=(0,q.formatChainIdToHex)(e.srcChainId),s=N(this,n,"m",C).call(this,t)?.provider,r=(0,q.formatAddressToCaipReference)(e.srcTokenAddress);return!(s&&r&&e.srcTokenAmount&&t&&await(0,W.hasSufficientBalance)(s,e.walletAddress,r,e.srcTokenAmount,t))}catch(e){return console.warn("Failed to set insufficientBal",e),!0}}),b.set(this,async e=>{if((0,$.isNonEvmChainId)(e.srcChainId))return!1;try{const t=(0,q.formatAddressToCaipReference)(e.srcTokenAddress);if((0,$.isEthUsdt)(e.srcChainId,t)){const s=P.BigNumber.from(await N(this,I,"f").call(this,e.walletAddress,t,e.destChainId));return s.lt(e.srcTokenAmount)&&s.gt(0)}return!1}catch(e){return console.warn("Failed to set resetApproval",e),!0}}),this.stopPollingForQuotes=(e,t)=>{this.stopAllPolling(),this.state.quotesLoadingStatus===U.RequestStatus.LOADING&&t&&this.trackUnifiedSwapBridgeEvent(K.UnifiedSwapBridgeEventName.QuotesReceived,t),N(this,r,"f")?.abort(e)},this.resetState=(e=K.AbortReason.ResetState)=>{this.stopPollingForQuotes(e),this.update(e=>{e.quoteRequest=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest,e.quotesInitialLoadTime=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesInitialLoadTime,e.quotes=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes,e.quotesLastFetched=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLastFetched,e.quotesLoadingStatus=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLoadingStatus,e.quoteFetchError=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteFetchError,e.quotesRefreshCount=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesRefreshCount,e.assetExchangeRates=D.DEFAULT_BRIDGE_CONTROLLER_STATE.assetExchangeRates,e.minimumBalanceForRentExemptionInLamports=D.DEFAULT_BRIDGE_CONTROLLER_STATE.minimumBalanceForRentExemptionInLamports})},this.setChainIntervalLength=()=>{const{state:e}=this,{srcChainId:t}=e.quoteRequest,s=(0,V.getBridgeFeatureFlags)(this.messenger),n=t?s.chains[(0,q.formatChainIdToCaip)(t)]?.refreshRate:undefined,r=s.refreshRate;this.setIntervalLength(n??r)},S.set(this,async({updatedQuoteRequest:e,context:t})=>{N(this,r,"f")?.abort(K.AbortReason.NewQuoteRequest),v(this,r,new AbortController,"f"),this.trackUnifiedSwapBridgeEvent(K.UnifiedSwapBridgeEventName.QuotesRequested,t);const{sse:s,maxRefreshCount:i}=(0,V.getBridgeFeatureFlags)(this.messenger),c=s?.enabled&&(0,V.hasMinimumRequiredVersion)(N(this,o,"f"),s.minimumVersion);this.update(t=>{t.quoteRequest=e,t.quoteFetchError=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteFetchError,t.quotesLastFetched=Date.now(),t.quotesLoadingStatus=U.RequestStatus.LOADING});try{await N(this,d,"f").call(this,{name:(0,$.isCrossChain)(e.srcChainId,e.destChainId)?B.TraceName.BridgeQuotesFetched:B.TraceName.SwapQuotesFetched,data:{srcChainId:(0,q.formatChainIdToCaip)(e.srcChainId),destChainId:(0,q.formatChainIdToCaip)(e.destChainId)}},async()=>{const t=N(this,n,"m",E).call(this,e.walletAddress);if(N(this,y,"f").call(this,e.srcChainId,t?.metadata?.snap?.id),c)return void await N(this,A,"f").call(this,e,t);const s=await this.fetchQuotes(e,N(this,r,"f")?.signal);this.update(e=>{e.quotesRefreshCount===D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesRefreshCount&&N(this,a,"f")&&(e.quotesInitialLoadTime=Date.now()-N(this,a,"f")),e.quotes=s,e.quotesLoadingStatus=U.RequestStatus.FETCHED})})}catch(e){if(this.update(e=>{e.quotes=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes}),e.toString().includes("AbortError")||e.toString().includes("FetchRequestCanceledException")||[K.AbortReason.ResetState,K.AbortReason.NewQuoteRequest,K.AbortReason.QuoteRequestUpdated,K.AbortReason.TransactionSubmitted].includes(e))return;this.update(t=>{let s;try{s=e?.message??e.toString()}catch{}finally{t.quoteFetchError=s??"Unknown error"}t.quotesLoadingStatus=U.RequestStatus.ERROR}),this.trackUnifiedSwapBridgeEvent(K.UnifiedSwapBridgeEventName.QuotesError,t),console.log(`Failed to ${c?"stream":"fetch"} bridge quotes`,e)}this.update(e=>{e.quotesRefreshCount+=1}),(e.insufficientBal||!e.insufficientBal&&this.state.quotesRefreshCount>=i)&&this.stopAllPolling()}),A.set(this,async(e,t)=>{let s=0;const n=new Set;await(0,G.fetchBridgeQuoteStream)(N(this,l,"f"),e,N(this,r,"f")?.signal,N(this,i,"f"),N(this,h,"f").customBridgeApiBaseUrl??D.BRIDGE_PROD_API_BASE_URL,{onValidationFailure:N(this,p,"f"),onValidQuoteReceived:async e=>{const r=(async()=>{const n=await(0,J.appendFeesToQuotes)([e],this.messenger,N(this,c,"f"),t);n.length>0&&(s+=1),this.update(e=>{1===s&&(e.quotes=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes,!e.quotesInitialLoadTime&&N(this,a,"f")&&(e.quotesInitialLoadTime=Date.now()-N(this,a,"f"))),e.quotes=[...e.quotes,...n]})})();n.add(r),r.catch(e=>{console.error("Error appending fees to quote",e)}).finally(()=>{n.delete(r)}),await r},onClose:async()=>{await Promise.allSettled(Array.from(n)),this.update(e=>{0===s&&(e.quotes=D.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes),e.quotesLoadingStatus=U.RequestStatus.FETCHED})}},N(this,o,"f"))}),y.set(this,async(e,t)=>{if(!(0,$.isSolanaChainId)(e)||!t)return;const s=await(0,Q.getMinimumBalanceForRentExemptionInLamports)(t,this.messenger);this.update(e=>{e.minimumBalanceForRentExemptionInLamports=s})}),_.set(this,()=>({slippage_limit:this.state.quoteRequest.slippage,swap_type:(0,z.getSwapTypeFromQuote)(this.state.quoteRequest),custom_slippage:(0,z.isCustomSlippage)(this.state.quoteRequest.slippage)})),T.set(this,()=>({quotes_count:this.state.quotes.length,quotes_list:this.state.quotes.map(({quote:e})=>(0,z.formatProviderLabel)(e)),initial_load_time_all_quotes:this.state.quotesInitialLoadTime??0,has_gas_included_quote:this.state.quotes.some(({quote:e})=>e.gasIncluded)})),k.set(this,(e,t)=>{const s={...t,action_type:K.MetricsActionType.SWAPBRIDGE_V1};switch(e){case K.UnifiedSwapBridgeEventName.ButtonClicked:case K.UnifiedSwapBridgeEventName.PageViewed:return{...(0,z.getRequestParams)(this.state.quoteRequest),...s};case K.UnifiedSwapBridgeEventName.QuotesValidationFailed:return{...(0,z.getRequestParams)(this.state.quoteRequest),refresh_count:this.state.quotesRefreshCount,...s};case K.UnifiedSwapBridgeEventName.QuotesReceived:return{...(0,z.getRequestParams)(this.state.quoteRequest),...N(this,_,"f").call(this),...N(this,T,"f").call(this),is_hardware_wallet:(0,z.isHardwareWallet)(N(this,n,"m",E).call(this)),refresh_count:this.state.quotesRefreshCount,...s};case K.UnifiedSwapBridgeEventName.QuotesRequested:return{...(0,z.getRequestParams)(this.state.quoteRequest),...N(this,_,"f").call(this),is_hardware_wallet:(0,z.isHardwareWallet)(N(this,n,"m",E).call(this)),has_sufficient_funds:!this.state.quoteRequest.insufficientBal,...s};case K.UnifiedSwapBridgeEventName.QuotesError:return{...(0,z.getRequestParams)(this.state.quoteRequest),...N(this,_,"f").call(this),is_hardware_wallet:(0,z.isHardwareWallet)(N(this,n,"m",E).call(this)),error_message:this.state.quoteFetchError,has_sufficient_funds:!this.state.quoteRequest.insufficientBal,...s};case K.UnifiedSwapBridgeEventName.AllQuotesOpened:case K.UnifiedSwapBridgeEventName.AllQuotesSorted:case K.UnifiedSwapBridgeEventName.QuoteSelected:return{...(0,z.getRequestParams)(this.state.quoteRequest),...N(this,_,"f").call(this),...N(this,T,"f").call(this),is_hardware_wallet:(0,z.isHardwareWallet)(N(this,n,"m",E).call(this)),...s};case K.UnifiedSwapBridgeEventName.Failed:return{...s,...(0,z.getRequestParams)(this.state.quoteRequest),...N(this,_,"f").call(this),...N(this,T,"f").call(this),...t};case K.UnifiedSwapBridgeEventName.AssetDetailTooltipClicked:return s;case K.UnifiedSwapBridgeEventName.Submitted:case K.UnifiedSwapBridgeEventName.Completed:return t;case K.UnifiedSwapBridgeEventName.InputChanged:default:return s}}),w.set(this,e=>{Object.entries(e).forEach(([t,s])=>{const n=z.toInputChangedPropertyKey[t],r=z.toInputChangedPropertyValue[t]?.(e);n&&r!==undefined&&s!==this.state.quoteRequest[t]&&this.trackUnifiedSwapBridgeEvent(K.UnifiedSwapBridgeEventName.InputChanged,{input:n,input_value:r})})}),this.trackUnifiedSwapBridgeEvent=(e,t)=>{try{const s=N(this,k,"f").call(this,e,t);N(this,u,"f").call(this,e,s)}catch(t){console.error(`Error tracking cross-chain swaps MetaMetrics event ${e}`,t)}},I.set(this,async(e,t,s)=>{const r=N(this,n,"m",C).call(this,M.CHAIN_IDS.MAINNET),a=r?.provider;if(!a)throw new Error("No provider found");const i=new R.Web3Provider(a),o=new j.Contract(t,O.abiERC20,i),c=(0,$.isCrossChain)(M.CHAIN_IDS.MAINNET,s)?D.METABRIDGE_ETHEREUM_ADDRESS:L.SWAPS_CONTRACT_ADDRESSES[M.CHAIN_IDS.MAINNET];return(await o.allowance(e,c)).toString()}),this.setIntervalLength(D.REFRESH_INTERVAL_MS),v(this,r,new AbortController,"f"),v(this,c,Z,"f"),v(this,i,s,"f"),v(this,o,x,"f"),v(this,l,ee,"f"),v(this,u,se,"f"),v(this,h,te??{},"f"),v(this,d,ne??((e,t)=>t?.()),"f"),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:setChainIntervalLength`,this.setChainIntervalLength.bind(this)),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:updateBridgeQuoteRequestParams`,this.updateBridgeQuoteRequestParams.bind(this)),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:resetState`,this.resetState.bind(this)),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:trackUnifiedSwapBridgeEvent`,this.trackUnifiedSwapBridgeEvent.bind(this)),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:stopPollingForQuotes`,this.stopPollingForQuotes.bind(this)),this.messenger.registerActionHandler(`${D.BRIDGE_CONTROLLER_NAME}:fetchQuotes`,this.fetchQuotes.bind(this))}}s.BridgeController=Z,r=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,b=new WeakMap,S=new WeakMap,A=new WeakMap,y=new WeakMap,_=new WeakMap,T=new WeakMap,k=new WeakMap,w=new WeakMap,I=new WeakMap,n=new WeakSet,E=function(e){const t=e??this.state.quoteRequest.walletAddress;if(!t)throw new Error("Account address is required");return this.messenger.call("AccountsController:getAccountByAddress",t)},C=function(e){const t=this.messenger.call("NetworkController:findNetworkClientIdByChainId",e);if(!t)throw new Error(`No network client found for chainId: ${e}`);return this.messenger.call("NetworkController:getNetworkClientById",t)}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/bridge-controller.cjs"}],[1522,{"./chains.cjs":1523,"@ethersproject/constants":783,"@metamask/keyring-api":2510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.METABRIDGE_CHAIN_TO_ADDRESS_MAP=s.DEFAULT_BRIDGE_CONTROLLER_STATE=s.DEFAULT_FEATURE_FLAG_CONFIG=s.DEFAULT_CHAIN_RANKING=s.BRIDGE_CONTROLLER_NAME=s.DEFAULT_MAX_REFRESH_COUNT=s.REFRESH_INTERVAL_MS=s.BRIDGE_MM_FEE_RATE=s.BRIDGE_PREFERRED_GAS_ESTIMATE=s.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=s.BRIDGE_QUOTE_MAX_ETA_SECONDS=s.METABRIDGE_ETHEREUM_ADDRESS=s.ETH_USDT_ADDRESS=s.BridgeClientId=s.BRIDGE_PROD_API_BASE_URL=s.BRIDGE_DEV_API_BASE_URL=s.ALLOWED_BRIDGE_CHAIN_IDS=void 0;const n=e("@ethersproject/constants"),r=e("@metamask/keyring-api"),a=e("./chains.cjs");var i;s.ALLOWED_BRIDGE_CHAIN_IDS=[a.CHAIN_IDS.MAINNET,a.CHAIN_IDS.BSC,a.CHAIN_IDS.POLYGON,a.CHAIN_IDS.ZKSYNC_ERA,a.CHAIN_IDS.AVALANCHE,a.CHAIN_IDS.OPTIMISM,a.CHAIN_IDS.ARBITRUM,a.CHAIN_IDS.LINEA_MAINNET,a.CHAIN_IDS.BASE,a.CHAIN_IDS.SEI,a.CHAIN_IDS.MONAD,r.SolScope.Mainnet,r.BtcScope.Mainnet,r.TrxScope.Mainnet],s.BRIDGE_DEV_API_BASE_URL="https://bridge.dev-api.cx.metamask.io",s.BRIDGE_PROD_API_BASE_URL="https://bridge.api.cx.metamask.io",function(e){e.EXTENSION="extension",e.MOBILE="mobile"}(i||(s.BridgeClientId=i={})),s.ETH_USDT_ADDRESS="0xdac17f958d2ee523a2206206994597c13d831ec7",s.METABRIDGE_ETHEREUM_ADDRESS="0x0439e60F02a8900a951603950d8D4527f400C3f1",s.BRIDGE_QUOTE_MAX_ETA_SECONDS=3600,s.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=.5,s.BRIDGE_PREFERRED_GAS_ESTIMATE="medium",s.BRIDGE_MM_FEE_RATE=.875,s.REFRESH_INTERVAL_MS=3e4,s.DEFAULT_MAX_REFRESH_COUNT=5,s.BRIDGE_CONTROLLER_NAME="BridgeController",s.DEFAULT_CHAIN_RANKING=[{chainId:"eip155:1",name:"Ethereum"},{chainId:"eip155:56",name:"BNB"},{chainId:"bip122:000000000019d6689c085ae165831e93",name:"BTC"},{chainId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana"},{chainId:"tron:728126428",name:"Tron"},{chainId:"eip155:8453",name:"Base"},{chainId:"eip155:42161",name:"Arbitrum"},{chainId:"eip155:59144",name:"Linea"},{chainId:"eip155:137",name:"Polygon"},{chainId:"eip155:43114",name:"Avalanche"},{chainId:"eip155:10",name:"Optimism"},{chainId:"eip155:143",name:"Monad"},{chainId:"eip155:1329",name:"Sei"},{chainId:"eip155:324",name:"zkSync"}],s.DEFAULT_FEATURE_FLAG_CONFIG={minimumVersion:"0.0.0",refreshRate:s.REFRESH_INTERVAL_MS,maxRefreshCount:s.DEFAULT_MAX_REFRESH_COUNT,support:!1,chains:{},chainRanking:[...s.DEFAULT_CHAIN_RANKING]},s.DEFAULT_BRIDGE_CONTROLLER_STATE={quoteRequest:{srcTokenAddress:n.AddressZero},quotesInitialLoadTime:null,quotes:[],quotesLastFetched:null,quotesLoadingStatus:null,quoteFetchError:null,quotesRefreshCount:0,assetExchangeRates:{},minimumBalanceForRentExemptionInLamports:"0"},s.METABRIDGE_CHAIN_TO_ADDRESS_MAP={[a.CHAIN_IDS.MAINNET]:s.METABRIDGE_ETHEREUM_ADDRESS}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/constants/bridge.cjs"}],[1523,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.NETWORK_TO_NAME_MAP=s.MONAD_DISPLAY_NAME=s.SEI_DISPLAY_NAME=s.MODE_DISPLAY_NAME=s.MODE_SEPOLIA_DISPLAY_NAME=s.SONEIUM_DISPLAY_NAME=s.INK_DISPLAY_NAME=s.INK_SEPOLIA_DISPLAY_NAME=s.LISK_SEPOLIA_DISPLAY_NAME=s.LISK_DISPLAY_NAME=s.METACHAIN_ONE_DISPLAY_NAME=s.BERACHAIN_DISPLAY_NAME=s.OP_BNB_DISPLAY_NAME=s.SCROLL_SEPOLIA_DISPLAY_NAME=s.SCROLL_DISPLAY_NAME=s.MOONRIVER_DISPLAY_NAME=s.MOONBEAM_DISPLAY_NAME=s.POLYGON_ZKEVM_DISPLAY_NAME=s.CRONOS_DISPLAY_NAME=s.AURORA_DISPLAY_NAME=s.BASE_DISPLAY_NAME=s.ZK_SYNC_ERA_DISPLAY_NAME=s.GNOSIS_DISPLAY_NAME=s.CELO_DISPLAY_NAME=s.PALM_DISPLAY_NAME=s.HARMONY_DISPLAY_NAME=s.FANTOM_DISPLAY_NAME=s.OPTIMISM_DISPLAY_NAME=s.BNB_DISPLAY_NAME=s.ARBITRUM_DISPLAY_NAME=s.AVALANCHE_DISPLAY_NAME=s.POLYGON_DISPLAY_NAME=s.BSC_DISPLAY_NAME=s.LOCALHOST_DISPLAY_NAME=s.LINEA_MAINNET_DISPLAY_NAME=s.LINEA_SEPOLIA_DISPLAY_NAME=s.LINEA_GOERLI_DISPLAY_NAME=s.SEPOLIA_DISPLAY_NAME=s.GOERLI_DISPLAY_NAME=s.MAINNET_DISPLAY_NAME=s.NETWORK_TYPES=s.CHAIN_IDS=void 0,s.CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",LOCALHOST:"0x539",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0xaa37dc",OPTIMISM_GOERLI:"0x1a4",BASE:"0x2105",BASE_TESTNET:"0x14a33",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",CELO:"0xa4ec",ARBITRUM:"0xa4b1",HARMONY:"0x63564c40",PALM:"0x2a15c308d",SEPOLIA:"0xaa36a7",HOLESKY:"0x4268",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",AMOY:"0x13882",BASE_SEPOLIA:"0x14a34",BLAST_SEPOLIA:"0xa0c71fd",OPTIMISM_SEPOLIA:"0xaa37dc",PALM_TESTNET:"0x2a15c3083",CELO_TESTNET:"0xaef3",ZK_SYNC_ERA_TESTNET:"0x12c",MANTA_SEPOLIA:"0x138b",UNICHAIN_SEPOLIA:"0x515",LINEA_MAINNET:"0xe708",AURORA:"0x4e454152",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",CRONOS:"0x19",GNOSIS:"0x64",ZKSYNC_ERA:"0x144",TEST_ETH:"0x539",ARBITRUM_GOERLI:"0x66eed",BLAST:"0x13e31",FILECOIN:"0x13a",POLYGON_ZKEVM:"0x44d",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f",WETHIO:"0x4e",CHZ:"0x15b38",NUMBERS:"0x290b",SEI:"0x531",APE_TESTNET:"0x8157",APE_MAINNET:"0x8173",BERACHAIN:"0x138d5",METACHAIN_ONE:"0x1b6e6",ARBITRUM_SEPOLIA:"0x66eee",NEAR:"0x18d",NEAR_TESTNET:"0x18e",B3:"0x208d",B3_TESTNET:"0x7c9",GRAVITY_ALPHA_MAINNET:"0x659",GRAVITY_ALPHA_TESTNET_SEPOLIA:"0x34c1",LISK:"0x46f",LISK_SEPOLIA:"0x106a",INK_SEPOLIA:"0xba5eD",INK:"0xdef1",MODE_SEPOLIA:"0x397",MODE:"0x868b",MONAD:"0x8f"},s.NETWORK_TYPES={GOERLI:"goerli",LOCALHOST:"localhost",MAINNET:"mainnet",SEPOLIA:"sepolia",LINEA_GOERLI:"linea-goerli",LINEA_SEPOLIA:"linea-sepolia",LINEA_MAINNET:"linea-mainnet"},s.MAINNET_DISPLAY_NAME="Ethereum Mainnet",s.GOERLI_DISPLAY_NAME="Goerli",s.SEPOLIA_DISPLAY_NAME="Sepolia",s.LINEA_GOERLI_DISPLAY_NAME="Linea Goerli",s.LINEA_SEPOLIA_DISPLAY_NAME="Linea Sepolia",s.LINEA_MAINNET_DISPLAY_NAME="Linea Mainnet",s.LOCALHOST_DISPLAY_NAME="Localhost 8545",s.BSC_DISPLAY_NAME="Binance Smart Chain",s.POLYGON_DISPLAY_NAME="Polygon",s.AVALANCHE_DISPLAY_NAME="Avalanche Network C-Chain",s.ARBITRUM_DISPLAY_NAME="Arbitrum One",s.BNB_DISPLAY_NAME="BNB Chain",s.OPTIMISM_DISPLAY_NAME="OP Mainnet",s.FANTOM_DISPLAY_NAME="Fantom Opera",s.HARMONY_DISPLAY_NAME="Harmony Mainnet Shard 0",s.PALM_DISPLAY_NAME="Palm",s.CELO_DISPLAY_NAME="Celo Mainnet",s.GNOSIS_DISPLAY_NAME="Gnosis",s.ZK_SYNC_ERA_DISPLAY_NAME="zkSync Era Mainnet",s.BASE_DISPLAY_NAME="Base Mainnet",s.AURORA_DISPLAY_NAME="Aurora Mainnet",s.CRONOS_DISPLAY_NAME="Cronos",s.POLYGON_ZKEVM_DISPLAY_NAME="Polygon zkEVM",s.MOONBEAM_DISPLAY_NAME="Moonbeam",s.MOONRIVER_DISPLAY_NAME="Moonriver",s.SCROLL_DISPLAY_NAME="Scroll",s.SCROLL_SEPOLIA_DISPLAY_NAME="Scroll Sepolia",s.OP_BNB_DISPLAY_NAME="opBNB",s.BERACHAIN_DISPLAY_NAME="Berachain Artio",s.METACHAIN_ONE_DISPLAY_NAME="Metachain One Mainnet",s.LISK_DISPLAY_NAME="Lisk",s.LISK_SEPOLIA_DISPLAY_NAME="Lisk Sepolia",s.INK_SEPOLIA_DISPLAY_NAME="Ink Sepolia",s.INK_DISPLAY_NAME="Ink Mainnet",s.SONEIUM_DISPLAY_NAME="Soneium Mainnet",s.MODE_SEPOLIA_DISPLAY_NAME="Mode Sepolia",s.MODE_DISPLAY_NAME="Mode Mainnet",s.SEI_DISPLAY_NAME="Sei Network",s.MONAD_DISPLAY_NAME="Monad",s.NETWORK_TO_NAME_MAP={[s.NETWORK_TYPES.GOERLI]:s.GOERLI_DISPLAY_NAME,[s.NETWORK_TYPES.MAINNET]:s.MAINNET_DISPLAY_NAME,[s.NETWORK_TYPES.LINEA_GOERLI]:s.LINEA_GOERLI_DISPLAY_NAME,[s.NETWORK_TYPES.LINEA_SEPOLIA]:s.LINEA_SEPOLIA_DISPLAY_NAME,[s.NETWORK_TYPES.LINEA_MAINNET]:s.LINEA_MAINNET_DISPLAY_NAME,[s.NETWORK_TYPES.LOCALHOST]:s.LOCALHOST_DISPLAY_NAME,[s.NETWORK_TYPES.SEPOLIA]:s.SEPOLIA_DISPLAY_NAME,[s.CHAIN_IDS.ARBITRUM]:s.ARBITRUM_DISPLAY_NAME,[s.CHAIN_IDS.AVALANCHE]:s.AVALANCHE_DISPLAY_NAME,[s.CHAIN_IDS.BSC]:s.BSC_DISPLAY_NAME,[s.CHAIN_IDS.BASE]:s.BASE_DISPLAY_NAME,[s.CHAIN_IDS.GOERLI]:s.GOERLI_DISPLAY_NAME,[s.CHAIN_IDS.MAINNET]:s.MAINNET_DISPLAY_NAME,[s.CHAIN_IDS.LINEA_GOERLI]:s.LINEA_GOERLI_DISPLAY_NAME,[s.CHAIN_IDS.LINEA_MAINNET]:s.LINEA_MAINNET_DISPLAY_NAME,[s.CHAIN_IDS.LINEA_SEPOLIA]:s.LINEA_SEPOLIA_DISPLAY_NAME,[s.CHAIN_IDS.LOCALHOST]:s.LOCALHOST_DISPLAY_NAME,[s.CHAIN_IDS.OPTIMISM]:s.OPTIMISM_DISPLAY_NAME,[s.CHAIN_IDS.POLYGON]:s.POLYGON_DISPLAY_NAME,[s.CHAIN_IDS.SCROLL]:s.SCROLL_DISPLAY_NAME,[s.CHAIN_IDS.SCROLL_SEPOLIA]:s.SCROLL_SEPOLIA_DISPLAY_NAME,[s.CHAIN_IDS.SEPOLIA]:s.SEPOLIA_DISPLAY_NAME,[s.CHAIN_IDS.OPBNB]:s.OP_BNB_DISPLAY_NAME,[s.CHAIN_IDS.ZKSYNC_ERA]:s.ZK_SYNC_ERA_DISPLAY_NAME,[s.CHAIN_IDS.BERACHAIN]:s.BERACHAIN_DISPLAY_NAME,[s.CHAIN_IDS.METACHAIN_ONE]:s.METACHAIN_ONE_DISPLAY_NAME,[s.CHAIN_IDS.LISK]:s.LISK_DISPLAY_NAME,[s.CHAIN_IDS.LISK_SEPOLIA]:s.LISK_SEPOLIA_DISPLAY_NAME,[s.CHAIN_IDS.SEI]:s.SEI_DISPLAY_NAME,[s.CHAIN_IDS.MONAD]:s.MONAD_DISPLAY_NAME}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/constants/chains.cjs"}],[1524,{"./chains.cjs":1523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ALLOWED_CONTRACT_ADDRESSES=s.SWAPS_WRAPPED_TOKENS_ADDRESSES=s.SWAPS_CONTRACT_ADDRESSES=s.SWAPS_API_V2_BASE_URL=void 0;const n=e("./chains.cjs");s.SWAPS_API_V2_BASE_URL="https://swap.api.cx.metamask.io";const r="0x881d40237659c251811cec9c364ef91dc08d300c";s.SWAPS_CONTRACT_ADDRESSES={[n.CHAIN_IDS.MAINNET]:r,[n.CHAIN_IDS.LOCALHOST]:r,[n.CHAIN_IDS.BSC]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[n.CHAIN_IDS.POLYGON]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[n.CHAIN_IDS.AVALANCHE]:"0x1a1ec25dc08e98e5e93f1104b5e5cdd298707d31",[n.CHAIN_IDS.ARBITRUM]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[n.CHAIN_IDS.OPTIMISM]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[n.CHAIN_IDS.ZKSYNC_ERA]:"0xf504c1fe13d14df615e66dcd0abf39e60c697f34",[n.CHAIN_IDS.LINEA_MAINNET]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[n.CHAIN_IDS.BASE]:"0x9dda6ef3d919c9bc8885d5560999a3640431e8e6",[n.CHAIN_IDS.SEI]:"0x962287c9d5B8a682389E61edAE90ec882325d08b"};const a="0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2";s.SWAPS_WRAPPED_TOKENS_ADDRESSES={[n.CHAIN_IDS.MAINNET]:a,[n.CHAIN_IDS.LOCALHOST]:a,[n.CHAIN_IDS.BSC]:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",[n.CHAIN_IDS.POLYGON]:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",[n.CHAIN_IDS.AVALANCHE]:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",[n.CHAIN_IDS.ARBITRUM]:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",[n.CHAIN_IDS.OPTIMISM]:"0x4200000000000000000000000000000000000006",[n.CHAIN_IDS.ZKSYNC_ERA]:"0x5AEa5775959fBC2557Cc8789bC1bf90A239D9a91",[n.CHAIN_IDS.LINEA_MAINNET]:"0xe5D7C2a44FfDDf6b295A15c148167daaAf5Cf34f",[n.CHAIN_IDS.BASE]:"0x4200000000000000000000000000000000000006",[n.CHAIN_IDS.SEI]:"0xe30fedd158a2e3b13e9badaeabafc5516e95e8c7"},s.ALLOWED_CONTRACT_ADDRESSES={[n.CHAIN_IDS.MAINNET]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.MAINNET],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.MAINNET]],[n.CHAIN_IDS.LOCALHOST]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.LOCALHOST],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.LOCALHOST]],[n.CHAIN_IDS.BSC]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.BSC],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.BSC]],[n.CHAIN_IDS.POLYGON]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.POLYGON],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.POLYGON]],[n.CHAIN_IDS.AVALANCHE]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.AVALANCHE],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.AVALANCHE]],[n.CHAIN_IDS.ARBITRUM]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.ARBITRUM],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.ARBITRUM]],[n.CHAIN_IDS.OPTIMISM]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.OPTIMISM],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.OPTIMISM]],[n.CHAIN_IDS.ZKSYNC_ERA]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.ZKSYNC_ERA],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.ZKSYNC_ERA]],[n.CHAIN_IDS.LINEA_MAINNET]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.LINEA_MAINNET],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.LINEA_MAINNET]],[n.CHAIN_IDS.BASE]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.BASE],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.BASE]],[n.CHAIN_IDS.SEI]:[s.SWAPS_CONTRACT_ADDRESSES[n.CHAIN_IDS.SEI],s.SWAPS_WRAPPED_TOKENS_ADDRESSES[n.CHAIN_IDS.SEI]]}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/constants/swaps.cjs"}],[1525,{"./chains.cjs":1523,"@metamask/keyring-api":2510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.SYMBOL_TO_SLIP44_MAP=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=s.DEFAULT_TOKEN_ADDRESS=void 0;const n=e("@metamask/keyring-api"),r=e("./chains.cjs");s.DEFAULT_TOKEN_ADDRESS="0x0000000000000000000000000000000000000000";const a="AVAX",i="BNB",o="ETH",c="POL",l="TESTETH",u="SOL",d="SEI",h="BTC",p="TRX",m="MON",f={symbol:o,name:"Ether",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},g={symbol:i,name:"Binance Coin",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},b={symbol:c,name:"Polygon",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},S={symbol:a,name:"Avalanche",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},A={symbol:l,name:"Test Ether",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},y={symbol:o,name:"Ether",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},E={symbol:o,name:"Ether",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},C={...f},_={...f},T={...f},k={...f},w={...f},I={symbol:u,name:"Solana",address:s.DEFAULT_TOKEN_ADDRESS,decimals:9,iconUrl:""},v={symbol:h,name:"Bitcoin",address:s.DEFAULT_TOKEN_ADDRESS,decimals:8,iconUrl:""},N={symbol:d,name:"Sei",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""},P={symbol:p,name:"Tron",address:s.DEFAULT_TOKEN_ADDRESS,decimals:6,iconUrl:""},j={symbol:m,name:"Mon",address:s.DEFAULT_TOKEN_ADDRESS,decimals:18,iconUrl:""};s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP={[r.CHAIN_IDS.MAINNET]:f,[r.CHAIN_IDS.LOCALHOST]:A,[r.CHAIN_IDS.BSC]:g,[r.CHAIN_IDS.POLYGON]:b,[r.CHAIN_IDS.GOERLI]:y,[r.CHAIN_IDS.SEPOLIA]:E,[r.CHAIN_IDS.AVALANCHE]:S,[r.CHAIN_IDS.OPTIMISM]:_,[r.CHAIN_IDS.ARBITRUM]:C,[r.CHAIN_IDS.ZKSYNC_ERA]:T,[r.CHAIN_IDS.LINEA_MAINNET]:k,[r.CHAIN_IDS.BASE]:w,[r.CHAIN_IDS.SEI]:N,[r.CHAIN_IDS.MONAD]:j,[n.SolScope.Mainnet]:I,[n.SolScope.Devnet]:I,[n.BtcScope.Mainnet]:v,[n.TrxScope.Mainnet]:P},s.SYMBOL_TO_SLIP44_MAP={SOL:"slip44:501",BTC:"slip44:0",ETH:"slip44:60",POL:"slip44:966",BNB:"slip44:714",AVAX:"slip44:9000",TESTETH:"slip44:60",SEI:"slip44:19000118",TRX:"slip44:195",MON:"slip44:268435779"}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/constants/tokens.cjs"}],[1526,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n;Object.defineProperty(s,"__esModule",{value:!0}),s.TraceName=void 0,function(e){e.BridgeQuotesFetched="Bridge Quotes Fetched",e.SwapQuotesFetched="Swap Quotes Fetched"}(n||(s.TraceName=n={}))}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/constants/traces.cjs"}],[1527,{"./bridge-controller.cjs":1521,"./constants/bridge.cjs":1522,"./constants/swaps.cjs":1524,"./constants/tokens.cjs":1525,"./selectors.cjs":1528,"./types.cjs":1529,"./utils/balance.cjs":1531,"./utils/bridge.cjs":1532,"./utils/caip-formatters.cjs":1533,"./utils/feature-flags.cjs":1534,"./utils/fetch.cjs":1536,"./utils/metrics/constants.cjs":1537,"./utils/metrics/properties.cjs":1538,"./utils/quote.cjs":1540,"./utils/slippage.cjs":1541,"./utils/swaps.cjs":1543,"./utils/trade-utils.cjs":1544,"./utils/validators.cjs":1545},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isValidQuoteRequest=s.isCrossChain=s.getDefaultBridgeControllerState=s.getNativeAssetForChainId=s.isNonEvmChainId=s.isBitcoinChainId=s.isSolanaChainId=s.isNativeAddress=s.isEthUsdt=s.MetricsSwapType=s.MetricsActionType=s.ALLOWED_CONTRACT_ADDRESSES=s.SWAPS_WRAPPED_TOKENS_ADDRESSES=s.SWAPS_CONTRACT_ADDRESSES=s.SWAPS_API_V2_BASE_URL=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=s.BRIDGE_PROD_API_BASE_URL=s.BRIDGE_DEV_API_BASE_URL=s.METABRIDGE_CHAIN_TO_ADDRESS_MAP=s.DEFAULT_BRIDGE_CONTROLLER_STATE=s.DEFAULT_MAX_REFRESH_COUNT=s.REFRESH_INTERVAL_MS=s.BRIDGE_MM_FEE_RATE=s.BRIDGE_PREFERRED_GAS_ESTIMATE=s.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE=s.BRIDGE_QUOTE_MAX_ETA_SECONDS=s.BRIDGE_CONTROLLER_NAME=s.BridgeClientId=s.ALLOWED_BRIDGE_CHAIN_IDS=s.FeatureId=s.BridgeAssetSchema=s.ActionTypes=s.FeeType=s.BridgeBackgroundAction=s.BridgeUserAction=s.RequestStatus=s.ChainId=s.SortOrder=s.AssetType=s.StatusTypes=s.AbortReason=s.getQuotesReceivedProperties=s.isCustomSlippage=s.isHardwareWallet=s.getSwapType=s.getRequestParams=s.formatProviderLabel=s.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY=s.UnifiedSwapBridgeEventName=s.BridgeController=void 0,s.fetchTokens=s.getSwapsContractAddress=s.isValidSwapsContractAddress=s.BRIDGE_DEFAULT_SLIPPAGE=s.getBridgeFeatureFlags=s.DEFAULT_FEATURE_FLAG_CONFIG=s.selectMinimumBalanceForRentExemptionInSOL=s.selectBridgeFeatureFlags=s.selectIsQuoteExpired=s.selectExchangeRateByChainIdAndAddress=s.selectDefaultSlippagePercentage=s.selectBridgeQuotes=s.isEvmTxData=s.isTronTrade=s.isBitcoinTrade=s.extractTradeData=s.formatAddressToAssetId=s.formatAddressToCaipReference=s.formatChainIdToHex=s.formatChainIdToCaip=s.getClientHeaders=s.fetchBridgeTokens=s.calcLatestSrcBalance=s.calcSlippagePercentage=s.formatEtaInMinutes=void 0;var n=e("./bridge-controller.cjs");Object.defineProperty(s,"BridgeController",{enumerable:!0,get:function(){return n.BridgeController}});var r=e("./utils/metrics/constants.cjs");Object.defineProperty(s,"UnifiedSwapBridgeEventName",{enumerable:!0,get:function(){return r.UnifiedSwapBridgeEventName}}),Object.defineProperty(s,"UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY",{enumerable:!0,get:function(){return r.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY}});var a=e("./utils/metrics/properties.cjs");Object.defineProperty(s,"formatProviderLabel",{enumerable:!0,get:function(){return a.formatProviderLabel}}),Object.defineProperty(s,"getRequestParams",{enumerable:!0,get:function(){return a.getRequestParams}}),Object.defineProperty(s,"getSwapType",{enumerable:!0,get:function(){return a.getSwapType}}),Object.defineProperty(s,"isHardwareWallet",{enumerable:!0,get:function(){return a.isHardwareWallet}}),Object.defineProperty(s,"isCustomSlippage",{enumerable:!0,get:function(){return a.isCustomSlippage}}),Object.defineProperty(s,"getQuotesReceivedProperties",{enumerable:!0,get:function(){return a.getQuotesReceivedProperties}});var i=e("./utils/metrics/constants.cjs");Object.defineProperty(s,"AbortReason",{enumerable:!0,get:function(){return i.AbortReason}});var o=e("./types.cjs");Object.defineProperty(s,"StatusTypes",{enumerable:!0,get:function(){return o.StatusTypes}});var c=e("./types.cjs");Object.defineProperty(s,"AssetType",{enumerable:!0,get:function(){return c.AssetType}}),Object.defineProperty(s,"SortOrder",{enumerable:!0,get:function(){return c.SortOrder}}),Object.defineProperty(s,"ChainId",{enumerable:!0,get:function(){return c.ChainId}}),Object.defineProperty(s,"RequestStatus",{enumerable:!0,get:function(){return c.RequestStatus}}),Object.defineProperty(s,"BridgeUserAction",{enumerable:!0,get:function(){return c.BridgeUserAction}}),Object.defineProperty(s,"BridgeBackgroundAction",{enumerable:!0,get:function(){return c.BridgeBackgroundAction}});var l=e("./utils/validators.cjs");Object.defineProperty(s,"FeeType",{enumerable:!0,get:function(){return l.FeeType}}),Object.defineProperty(s,"ActionTypes",{enumerable:!0,get:function(){return l.ActionTypes}}),Object.defineProperty(s,"BridgeAssetSchema",{enumerable:!0,get:function(){return l.BridgeAssetSchema}}),Object.defineProperty(s,"FeatureId",{enumerable:!0,get:function(){return l.FeatureId}});var u=e("./constants/bridge.cjs");Object.defineProperty(s,"ALLOWED_BRIDGE_CHAIN_IDS",{enumerable:!0,get:function(){return u.ALLOWED_BRIDGE_CHAIN_IDS}}),Object.defineProperty(s,"BridgeClientId",{enumerable:!0,get:function(){return u.BridgeClientId}}),Object.defineProperty(s,"BRIDGE_CONTROLLER_NAME",{enumerable:!0,get:function(){return u.BRIDGE_CONTROLLER_NAME}}),Object.defineProperty(s,"BRIDGE_QUOTE_MAX_ETA_SECONDS",{enumerable:!0,get:function(){return u.BRIDGE_QUOTE_MAX_ETA_SECONDS}}),Object.defineProperty(s,"BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE",{enumerable:!0,get:function(){return u.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE}}),Object.defineProperty(s,"BRIDGE_PREFERRED_GAS_ESTIMATE",{enumerable:!0,get:function(){return u.BRIDGE_PREFERRED_GAS_ESTIMATE}}),Object.defineProperty(s,"BRIDGE_MM_FEE_RATE",{enumerable:!0,get:function(){return u.BRIDGE_MM_FEE_RATE}}),Object.defineProperty(s,"REFRESH_INTERVAL_MS",{enumerable:!0,get:function(){return u.REFRESH_INTERVAL_MS}}),Object.defineProperty(s,"DEFAULT_MAX_REFRESH_COUNT",{enumerable:!0,get:function(){return u.DEFAULT_MAX_REFRESH_COUNT}}),Object.defineProperty(s,"DEFAULT_BRIDGE_CONTROLLER_STATE",{enumerable:!0,get:function(){return u.DEFAULT_BRIDGE_CONTROLLER_STATE}}),Object.defineProperty(s,"METABRIDGE_CHAIN_TO_ADDRESS_MAP",{enumerable:!0,get:function(){return u.METABRIDGE_CHAIN_TO_ADDRESS_MAP}}),Object.defineProperty(s,"BRIDGE_DEV_API_BASE_URL",{enumerable:!0,get:function(){return u.BRIDGE_DEV_API_BASE_URL}}),Object.defineProperty(s,"BRIDGE_PROD_API_BASE_URL",{enumerable:!0,get:function(){return u.BRIDGE_PROD_API_BASE_URL}});var d=e("./constants/tokens.cjs");Object.defineProperty(s,"SWAPS_CHAINID_DEFAULT_TOKEN_MAP",{enumerable:!0,get:function(){return d.SWAPS_CHAINID_DEFAULT_TOKEN_MAP}});var h=e("./constants/swaps.cjs");Object.defineProperty(s,"SWAPS_API_V2_BASE_URL",{enumerable:!0,get:function(){return h.SWAPS_API_V2_BASE_URL}}),Object.defineProperty(s,"SWAPS_CONTRACT_ADDRESSES",{enumerable:!0,get:function(){return h.SWAPS_CONTRACT_ADDRESSES}}),Object.defineProperty(s,"SWAPS_WRAPPED_TOKENS_ADDRESSES",{enumerable:!0,get:function(){return h.SWAPS_WRAPPED_TOKENS_ADDRESSES}}),Object.defineProperty(s,"ALLOWED_CONTRACT_ADDRESSES",{enumerable:!0,get:function(){return h.ALLOWED_CONTRACT_ADDRESSES}});var p=e("./utils/metrics/constants.cjs");Object.defineProperty(s,"MetricsActionType",{enumerable:!0,get:function(){return p.MetricsActionType}}),Object.defineProperty(s,"MetricsSwapType",{enumerable:!0,get:function(){return p.MetricsSwapType}});var m=e("./utils/bridge.cjs");Object.defineProperty(s,"isEthUsdt",{enumerable:!0,get:function(){return m.isEthUsdt}}),Object.defineProperty(s,"isNativeAddress",{enumerable:!0,get:function(){return m.isNativeAddress}}),Object.defineProperty(s,"isSolanaChainId",{enumerable:!0,get:function(){return m.isSolanaChainId}}),Object.defineProperty(s,"isBitcoinChainId",{enumerable:!0,get:function(){return m.isBitcoinChainId}}),Object.defineProperty(s,"isNonEvmChainId",{enumerable:!0,get:function(){return m.isNonEvmChainId}}),Object.defineProperty(s,"getNativeAssetForChainId",{enumerable:!0,get:function(){return m.getNativeAssetForChainId}}),Object.defineProperty(s,"getDefaultBridgeControllerState",{enumerable:!0,get:function(){return m.getDefaultBridgeControllerState}}),Object.defineProperty(s,"isCrossChain",{enumerable:!0,get:function(){return m.isCrossChain}});var f=e("./utils/quote.cjs");Object.defineProperty(s,"isValidQuoteRequest",{enumerable:!0,get:function(){return f.isValidQuoteRequest}}),Object.defineProperty(s,"formatEtaInMinutes",{enumerable:!0,get:function(){return f.formatEtaInMinutes}}),Object.defineProperty(s,"calcSlippagePercentage",{enumerable:!0,get:function(){return f.calcSlippagePercentage}});var g=e("./utils/balance.cjs");Object.defineProperty(s,"calcLatestSrcBalance",{enumerable:!0,get:function(){return g.calcLatestSrcBalance}});var b=e("./utils/fetch.cjs");Object.defineProperty(s,"fetchBridgeTokens",{enumerable:!0,get:function(){return b.fetchBridgeTokens}}),Object.defineProperty(s,"getClientHeaders",{enumerable:!0,get:function(){return b.getClientHeaders}});var S=e("./utils/caip-formatters.cjs");Object.defineProperty(s,"formatChainIdToCaip",{enumerable:!0,get:function(){return S.formatChainIdToCaip}}),Object.defineProperty(s,"formatChainIdToHex",{enumerable:!0,get:function(){return S.formatChainIdToHex}}),Object.defineProperty(s,"formatAddressToCaipReference",{enumerable:!0,get:function(){return S.formatAddressToCaipReference}}),Object.defineProperty(s,"formatAddressToAssetId",{enumerable:!0,get:function(){return S.formatAddressToAssetId}});var A=e("./utils/trade-utils.cjs");Object.defineProperty(s,"extractTradeData",{enumerable:!0,get:function(){return A.extractTradeData}}),Object.defineProperty(s,"isBitcoinTrade",{enumerable:!0,get:function(){return A.isBitcoinTrade}}),Object.defineProperty(s,"isTronTrade",{enumerable:!0,get:function(){return A.isTronTrade}}),Object.defineProperty(s,"isEvmTxData",{enumerable:!0,get:function(){return A.isEvmTxData}});var y=e("./selectors.cjs");Object.defineProperty(s,"selectBridgeQuotes",{enumerable:!0,get:function(){return y.selectBridgeQuotes}}),Object.defineProperty(s,"selectDefaultSlippagePercentage",{enumerable:!0,get:function(){return y.selectDefaultSlippagePercentage}}),Object.defineProperty(s,"selectExchangeRateByChainIdAndAddress",{enumerable:!0,get:function(){return y.selectExchangeRateByChainIdAndAddress}}),Object.defineProperty(s,"selectIsQuoteExpired",{enumerable:!0,get:function(){return y.selectIsQuoteExpired}}),Object.defineProperty(s,"selectBridgeFeatureFlags",{enumerable:!0,get:function(){return y.selectBridgeFeatureFlags}}),Object.defineProperty(s,"selectMinimumBalanceForRentExemptionInSOL",{enumerable:!0,get:function(){return y.selectMinimumBalanceForRentExemptionInSOL}});var E=e("./constants/bridge.cjs");Object.defineProperty(s,"DEFAULT_FEATURE_FLAG_CONFIG",{enumerable:!0,get:function(){return E.DEFAULT_FEATURE_FLAG_CONFIG}});var C=e("./utils/feature-flags.cjs");Object.defineProperty(s,"getBridgeFeatureFlags",{enumerable:!0,get:function(){return C.getBridgeFeatureFlags}});var _=e("./utils/slippage.cjs");Object.defineProperty(s,"BRIDGE_DEFAULT_SLIPPAGE",{enumerable:!0,get:function(){return _.BRIDGE_DEFAULT_SLIPPAGE}});var T=e("./utils/swaps.cjs");Object.defineProperty(s,"isValidSwapsContractAddress",{enumerable:!0,get:function(){return T.isValidSwapsContractAddress}}),Object.defineProperty(s,"getSwapsContractAddress",{enumerable:!0,get:function(){return T.getSwapsContractAddress}}),Object.defineProperty(s,"fetchTokens",{enumerable:!0,get:function(){return T.fetchTokens}})}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/index.cjs"}],[1528,{"./constants/bridge.cjs":1522,"./types.cjs":1529,"./utils/bridge.cjs":1532,"./utils/caip-formatters.cjs":1533,"./utils/feature-flags.cjs":1534,"./utils/quote.cjs":1540,"./utils/slippage.cjs":1541,"@ethersproject/constants":783,"@metamask/utils":3554,"bignumber.js":1553,lodash:5239,reselect:5709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.selectDefaultSlippagePercentage=s.selectMinimumBalanceForRentExemptionInSOL=s.selectBridgeQuotes=s.selectIsQuoteExpired=s.selectIsAssetExchangeRateInState=s.selectExchangeRateByChainIdAndAddress=s.selectBridgeFeatureFlags=void 0;const n=e("@ethersproject/constants"),r=e("@metamask/utils"),a=e("bignumber.js"),i=e("lodash"),o=e("reselect"),c=e("./constants/bridge.cjs"),l=e("./types.cjs"),u=e("./utils/bridge.cjs"),d=e("./utils/caip-formatters.cjs"),h=e("./utils/feature-flags.cjs"),p=e("./utils/quote.cjs"),m=e("./utils/slippage.cjs"),f=o.createStructuredSelector.withTypes(),g=o.createSelector.withTypes(),b=o.createSelector.withTypes();s.selectBridgeFeatureFlags=b([e=>e.remoteFeatureFlags.bridgeConfig],e=>(0,h.processFeatureFlags)(e));const S=(e,t,s)=>{if(!t||!s)return{};const n=(0,d.formatAddressToAssetId)(s,t);if(!n)return{};const{assetExchangeRates:i,currencyRates:o,marketData:c,conversionRates:l}=e,h=i?.[n]??i?.[n.toLowerCase()];if(h?.exchangeRate)return h;if((0,u.isNonEvmChainId)(t)){const e=l?.[n];return e?{exchangeRate:e.rate,usdExchangeRate:undefined}:{}}if((0,u.isNativeAddress)(s)){const{symbol:e}=(0,u.getNativeAssetForChainId)(t),s=o?.[e];return s?{exchangeRate:s?.conversionRate?.toString(),usdExchangeRate:s?.usdConversionRate?.toString()}:{}}if(!(0,u.isNonEvmChainId)(t)){const e=c?.[(0,d.formatChainIdToHex)(t)],n=(0,r.isStrictHexString)(s)?e?.[s]:null,i=n?o[n?.currency]:undefined;if(n&&i)return{exchangeRate:new a.BigNumber(n.price).multipliedBy(i.conversionRate??0).toString(),usdExchangeRate:new a.BigNumber(n.price).multipliedBy(i.usdConversionRate??0).toString()}}return{}};s.selectExchangeRateByChainIdAndAddress=(e,t,s)=>S(e,t,s);s.selectIsAssetExchangeRateInState=(...e)=>Boolean(S(...e)?.exchangeRate)&&Boolean(S(...e)?.usdExchangeRate);const A=g([({quotes:e})=>e,f({estimatedBaseFeeInDecGwei:({gasFeeEstimates:e})=>e?.estimatedBaseFee,feePerGasInDecGwei:({gasFeeEstimates:e})=>e?.[c.BRIDGE_PREFERRED_GAS_ESTIMATE]?.suggestedMaxFeePerGas,maxFeePerGasInDecGwei:({gasFeeEstimates:e})=>e?.high?.suggestedMaxFeePerGas}),g([e=>e,({quoteRequest:{srcChainId:e}})=>e,({quoteRequest:{srcTokenAddress:e}})=>e],s.selectExchangeRateByChainIdAndAddress),g([e=>e,({quoteRequest:{destChainId:e}})=>e,({quoteRequest:{destTokenAddress:e}})=>e],s.selectExchangeRateByChainIdAndAddress),g([e=>e,({quoteRequest:{srcChainId:e}})=>e],(e,t)=>(0,s.selectExchangeRateByChainIdAndAddress)(e,t,n.AddressZero))],(e,t,s,n,r)=>e.map(e=>{const a=(0,p.calcSentAmount)(e.quote,s),i=(0,p.calcToAmount)(e.quote.destTokenAmount,e.quote.destAsset,n),o=(0,p.calcToAmount)(e.quote.minDestTokenAmount,e.quote.destAsset,n),c=(0,p.calcIncludedTxFees)(e.quote,s,n);let l,d,h,m;(0,u.isEvmQuoteResponse)(e)?(h=(0,p.calcRelayerFee)(e,r),m=(0,p.calcEstimatedAndMaxTotalGasFee)({bridgeQuote:e,...t,...r}),l=(0,p.calcTotalEstimatedNetworkFee)(m,h),d=(0,p.calcTotalMaxNetworkFee)(m,h)):(l=(0,p.calcNonEvmTotalNetworkFee)(e,r),m={effective:l,total:l,max:l},d=l);const f=(0,p.calcAdjustedReturn)(i,l,e.quote),g=(0,p.calcCost)(f,a);return{...e,sentAmount:a,toTokenAmount:i,minToTokenAmount:o,swapRate:(0,p.calcSwapRate)(a.amount,i.amount),totalNetworkFee:l,totalMaxNetworkFee:d,gasFee:m,adjustedReturn:f,cost:g,includedTxFees:c}})),y=g([A,(e,{sortOrder:t})=>t],(e,t)=>t===l.SortOrder.ETA_ASC?(0,i.orderBy)(e,e=>e.estimatedProcessingTimeInSeconds,"asc"):(0,i.orderBy)(e,({cost:e})=>e.valueInCurrency?Number(e.valueInCurrency):0,"asc")),E=g([y],e=>e.length>0?e[0]:null),C=g([E,(e,{selectedQuote:t})=>t],(e,t)=>t??e),_=g([s.selectBridgeFeatureFlags,e=>e.quoteRequest.insufficientBal,e=>e.quotesRefreshCount],(e,t,s)=>!t&&e.maxRefreshCount>s),T=g([s.selectBridgeFeatureFlags,e=>e.quoteRequest.srcChainId],(e,t)=>(t?e.chains[(0,d.formatChainIdToCaip)(t)]?.refreshRate:e.refreshRate)??e.refreshRate);s.selectIsQuoteExpired=g([_,({quotesLastFetched:e})=>e,T,(e,t,s)=>s],(e,t,s,n)=>Boolean(!e&&t&&n-t>s)),s.selectBridgeQuotes=f({sortedQuotes:y,recommendedQuote:E,activeQuote:C,quotesLastFetchedMs:e=>e.quotesLastFetched,isLoading:e=>e.quotesLoadingStatus===l.RequestStatus.LOADING,quoteFetchError:e=>e.quoteFetchError,quotesRefreshCount:e=>e.quotesRefreshCount,quotesInitialLoadTimeMs:e=>e.quotesInitialLoadTime,isQuoteGoingToRefresh:_});s.selectMinimumBalanceForRentExemptionInSOL=e=>new a.BigNumber(e.minimumBalanceForRentExemptionInLamports??0).div(10**9).toString(),s.selectDefaultSlippagePercentage=g([e=>(0,s.selectBridgeFeatureFlags)(e).chains,(e,t)=>t.srcTokenAddress,(e,t)=>t.destTokenAddress,(e,t)=>t.srcChainId?(0,d.formatChainIdToCaip)(t.srcChainId):undefined,(e,t)=>t.destChainId?(0,d.formatChainIdToCaip)(t.destChainId):undefined],(e,t,s,n,r)=>(0,m.getDefaultSlippagePercentage)({srcTokenAddress:t,destTokenAddress:s,srcChainId:n,destChainId:r},n?e[n]?.stablecoins:undefined,r?e[r]?.stablecoins:undefined))}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/selectors.cjs"}],[1529,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l;Object.defineProperty(s,"__esModule",{value:!0}),s.BridgeBackgroundAction=s.BridgeUserAction=s.RequestStatus=s.ChainId=s.StatusTypes=s.SortOrder=s.AssetType=void 0,function(e){e.native="NATIVE",e.token="TOKEN",e.NFT="NFT",e.unknown="UNKNOWN"}(n||(s.AssetType=n={})),function(e){e.COST_ASC="cost_ascending",e.ETA_ASC="time_descending"}(r||(s.SortOrder=r={})),function(e){e.SUBMITTED="SUBMITTED",e.UNKNOWN="UNKNOWN",e.FAILED="FAILED",e.PENDING="PENDING",e.COMPLETE="COMPLETE"}(a||(s.StatusTypes=a={})),function(e){e[e.ETH=1]="ETH",e[e.OPTIMISM=10]="OPTIMISM",e[e.BSC=56]="BSC",e[e.POLYGON=137]="POLYGON",e[e.ZKSYNC=324]="ZKSYNC",e[e.BASE=8453]="BASE",e[e.ARBITRUM=42161]="ARBITRUM",e[e.AVALANCHE=43114]="AVALANCHE",e[e.LINEA=59144]="LINEA",e[e.SOLANA=0x416edef1601be]="SOLANA",e[e.BTC=20000000000001]="BTC",e[e.TRON=728126428]="TRON",e[e.SEI=1329]="SEI",e[e.MONAD=143]="MONAD"}(i||(s.ChainId=i={})),function(e){e[e.LOADING=0]="LOADING",e[e.FETCHED=1]="FETCHED",e[e.ERROR=2]="ERROR"}(o||(s.RequestStatus=o={})),function(e){e.SELECT_DEST_NETWORK="selectDestNetwork",e.UPDATE_QUOTE_PARAMS="updateBridgeQuoteRequestParams"}(c||(s.BridgeUserAction=c={})),function(e){e.SET_CHAIN_INTERVAL_LENGTH="setChainIntervalLength",e.RESET_STATE="resetState",e.TRACK_METAMETRICS_EVENT="trackUnifiedSwapBridgeEvent",e.STOP_POLLING_FOR_QUOTES="stopPollingForQuotes",e.FETCH_QUOTES="fetchQuotes"}(l||(s.BridgeBackgroundAction=l={}))}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/types.cjs"}],[1530,{"./bridge.cjs":1532,"./caip-formatters.cjs":1533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toExchangeRates=s.getAssetIdsForToken=void 0;const n=e("./bridge.cjs"),r=e("./caip-formatters.cjs");s.getAssetIdsForToken=(e,t)=>{const s=[],a=(0,r.formatAddressToAssetId)(e,t);return a&&(s.push(a),(0,n.getNativeAssetForChainId)(t)?.assetId&&s.push((0,n.getNativeAssetForChainId)(t).assetId)),s};s.toExchangeRates=(e,t)=>Object.entries(t).reduce((t,[s,n])=>(n&&(t[s]={exchangeRate:n[e],usdExchangeRate:n.usd}),t),{})}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/assets.cjs"}],[1531,{"./bridge.cjs":1532,"@ethersproject/address":770,"@ethersproject/contracts":786,"@ethersproject/providers":824,"@metamask/metamask-eth-abis":2597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hasSufficientBalance=s.calcLatestSrcBalance=s.fetchTokenBalance=void 0;const n=e("@ethersproject/address"),r=e("@ethersproject/contracts"),a=e("@ethersproject/providers"),i=e("@metamask/metamask-eth-abis"),o=e("./bridge.cjs");s.fetchTokenBalance=async(e,t,s)=>{const n=new a.Web3Provider(s),o=new r.Contract(e,i.abiERC20,n),c="function"==typeof o?.balanceOf?o.balanceOf(t):Promise.resolve(undefined);return await c};s.calcLatestSrcBalance=async(e,t,r,i)=>{if(r&&i){if((0,o.isNativeAddress)(r)){const s=new a.Web3Provider(e);return await s.getBalance((0,n.getAddress)(t))}return await(0,s.fetchTokenBalance)(r,t,e)}return undefined};s.hasSufficientBalance=async(e,t,n,r,a)=>{const i=await(0,s.calcLatestSrcBalance)(e,t,n,a);return!!i&&i.gte(r)}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/balance.cjs"}],[1532,{"../constants/bridge.cjs":1522,"../constants/chains.cjs":1523,"../constants/swaps.cjs":1524,"../constants/tokens.cjs":1525,"../types.cjs":1529,"./caip-formatters.cjs":1533,"@ethersproject/constants":783,"@ethersproject/contracts":786,"@metamask/keyring-api":2510,"@metamask/metamask-eth-abis":2597,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isEvmQuoteResponse=s.isNonEvmChainId=s.isTronChainId=s.isBitcoinChainId=s.isSolanaChainId=s.isNativeAddress=s.isSwapsDefaultTokenSymbol=s.isSwapsDefaultTokenAddress=s.sumHexes=s.isEthUsdt=s.getEthUsdtResetData=s.getNativeAssetForChainId=s.getDefaultBridgeControllerState=s.isCrossChain=void 0;const n=e("@ethersproject/constants"),r=e("@ethersproject/contracts"),a=e("@metamask/keyring-api"),i=e("@metamask/metamask-eth-abis"),o=e("@metamask/utils"),c=e("./caip-formatters.cjs"),l=e("../constants/bridge.cjs"),u=e("../constants/chains.cjs"),d=e("../constants/swaps.cjs"),h=e("../constants/tokens.cjs"),p=e("../types.cjs");s.isCrossChain=(e,t)=>{try{return!!t&&(0,c.formatChainIdToCaip)(e)!==(0,c.formatChainIdToCaip)(t)}catch{return!1}};s.getDefaultBridgeControllerState=()=>l.DEFAULT_BRIDGE_CONTROLLER_STATE;const m=(e,t)=>`${(0,c.formatChainIdToCaip)(e)}/${h.SYMBOL_TO_SLIP44_MAP[t]}`;s.getNativeAssetForChainId=e=>{const t=(0,c.formatChainIdToCaip)(e),s=h.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[(0,c.formatChainIdToCaip)(e)]??h.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[(0,c.formatChainIdToHex)(e)];if(!s)throw new Error(`No XChain Swaps native asset found for chainId: ${e}`);return{...s,chainId:(0,c.formatChainIdToDec)(e),assetId:m(t,s.symbol)}};s.getEthUsdtResetData=e=>{const t=(0,s.isCrossChain)(u.CHAIN_IDS.MAINNET,e)?l.METABRIDGE_ETHEREUM_ADDRESS:d.SWAPS_CONTRACT_ADDRESSES[u.CHAIN_IDS.MAINNET];return new r.Contract(l.ETH_USDT_ADDRESS,i.abiERC20).interface.encodeFunctionData("approve",[t,"0"])};s.isEthUsdt=(e,t)=>(0,c.formatChainIdToDec)(e)===p.ChainId.ETH&&t.toLowerCase()===l.ETH_USDT_ADDRESS.toLowerCase();s.sumHexes=(...e)=>{if(0===e.length)return"0x0";return`0x${e.reduce((e,t)=>e+BigInt(t),BigInt(0)).toString(16)}`};s.isSwapsDefaultTokenAddress=(e,t)=>!(!e||!t)&&e===(0,s.getNativeAssetForChainId)(t)?.address;s.isSwapsDefaultTokenSymbol=(e,t)=>!(!e||!t)&&e===(0,s.getNativeAssetForChainId)(t)?.symbol;s.isNativeAddress=e=>e===n.AddressZero||""===e||!e||!(0,o.isStrictHexString)(e)&&Object.values(h.SYMBOL_TO_SLIP44_MAP).some(t=>e.includes(t)||t.endsWith(e));s.isSolanaChainId=e=>(0,o.isCaipChainId)(e)?e===a.SolScope.Mainnet.toString():e.toString()===p.ChainId.SOLANA.toString();s.isBitcoinChainId=e=>(0,o.isCaipChainId)(e)?e===a.BtcScope.Mainnet.toString():e.toString()===p.ChainId.BTC.toString();s.isTronChainId=e=>(0,o.isCaipChainId)(e)?e===a.TrxScope.Mainnet.toString():e.toString()===p.ChainId.TRON.toString();s.isNonEvmChainId=e=>(0,s.isSolanaChainId)(e)||(0,s.isBitcoinChainId)(e)||(0,s.isTronChainId)(e);s.isEvmQuoteResponse=e=>!(0,s.isNonEvmChainId)(e.quote.srcChainId)}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/bridge.cjs"}],[1533,{"../types.cjs":1529,"./bridge.cjs":1532,"@ethersproject/address":770,"@ethersproject/constants":783,"@metamask/controller-utils":1639,"@metamask/keyring-api":2510,"@metamask/multichain-network-controller":1550,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.formatAddressToAssetId=s.formatAddressToCaipReference=s.formatChainIdToHex=s.formatChainIdToDec=s.formatChainIdToCaip=void 0;const n=e("@ethersproject/address"),r=e("@ethersproject/constants"),a=e("@metamask/controller-utils"),i=e("@metamask/keyring-api"),o=e("@metamask/multichain-network-controller"),c=e("@metamask/utils"),l=e("./bridge.cjs"),u=e("../types.cjs");s.formatChainIdToCaip=e=>(0,c.isCaipChainId)(e)?e:(0,c.isStrictHexString)(e)?(0,o.toEvmCaipChainId)(e):(0,l.isSolanaChainId)(e)?i.SolScope.Mainnet:(0,l.isBitcoinChainId)(e)?i.BtcScope.Mainnet:(0,l.isTronChainId)(e)?i.TrxScope.Mainnet:(0,o.toEvmCaipChainId)((0,c.numberToHex)(Number(e)));s.formatChainIdToDec=e=>(0,c.isStrictHexString)(e)?(0,a.convertHexToDecimal)(e):e===i.SolScope.Mainnet?u.ChainId.SOLANA:e===i.BtcScope.Mainnet?u.ChainId.BTC:e===i.TrxScope.Mainnet?u.ChainId.TRON:(0,c.isCaipChainId)(e)?Number(e.split(":").at(-1)):"string"==typeof e?parseInt(e,10):e;s.formatChainIdToHex=e=>{if((0,c.isStrictHexString)(e))return e;if("number"==typeof e||parseInt(e,10))return(0,c.numberToHex)(Number(e));if((0,c.isCaipChainId)(e)){const{reference:t}=(0,c.parseCaipChainId)(e);if((0,c.isCaipReference)(t)&&!isNaN(Number(t)))return(0,c.numberToHex)(Number(t))}throw new Error(`Invalid cross-chain swaps chainId: ${e}`)};s.formatAddressToCaipReference=e=>{if((0,c.isStrictHexString)(e))return(0,n.getAddress)(e);if((0,l.isNativeAddress)(e))return r.AddressZero;const t=e.split(":").at(-1);if(!t)throw new Error("Invalid address");return t};s.formatAddressToAssetId=(e,t)=>(0,c.isCaipAssetType)(e)?e:(0,l.isNativeAddress)(e)?(0,l.getNativeAssetForChainId)(t).assetId:t===i.SolScope.Mainnet?c.CaipAssetTypeStruct.create(`${t}/token:${e}`):(0,c.isStrictHexString)(e)?c.CaipAssetTypeStruct.create(`${(0,s.formatChainIdToCaip)(t)}/erc20:${e}`):undefined}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/caip-formatters.cjs"}],[1534,{"../constants/bridge.cjs":1522,"./caip-formatters.cjs":1533,"./validators.cjs":1545},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hasMinimumRequiredVersion=s.getBridgeFeatureFlags=s.processFeatureFlags=s.formatFeatureFlags=void 0;const n=e("./caip-formatters.cjs"),r=e("./validators.cjs"),a=e("../constants/bridge.cjs");s.formatFeatureFlags=e=>{return{...e,chains:(t=e.chains,Object.entries(t).reduce((e,[t,s])=>({...e,[(0,n.formatChainIdToCaip)(t)]:s}),{}))};var t};s.processFeatureFlags=e=>{if((0,r.validateFeatureFlagsResponse)(e)){const t=(0,s.formatFeatureFlags)(e);return t.chainRanking&&0!==t.chainRanking.length?t:{...t,chainRanking:[...a.DEFAULT_CHAIN_RANKING]}}return a.DEFAULT_FEATURE_FLAG_CONFIG},s.getBridgeFeatureFlags=function(e){const t=e.call("RemoteFeatureFlagController:getState"),n=t?.remoteFeatureFlags?.bridgeConfigV2,r=t?.remoteFeatureFlags?.bridgeConfig;return(0,s.processFeatureFlags)(n||r)};s.hasMinimumRequiredVersion=(e,t)=>{const[s,n,r]=e.split(".").map(Number),[a,i,o]=t.split(".").map(Number);return s>a||(s===a&&n>i||s===a&&n===i&&r>=o)}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/feature-flags.cjs"}],[1535,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchServerEvents=void 0;s.fetchServerEvents=async(e,{onMessage:t,onError:s,onClose:n,fetchFn:r,...a})=>{let i;try{const s=await r(e,a);if(!s.ok||!s.body)throw new Error(`${s.status}`);i=s.body.getReader();const o=new TextDecoder("utf-8");let c="";for(;;){const{done:e,value:s}=await i.read();if(e)break;c+=o.decode(s,{stream:!0});const n=c.split("\n\n");c=n.pop()||"";for(const e of n){const s=e.split("\n");let n;const r=[];for(const e of s)e.startsWith("event:")?n=e.slice(6).trim():e.startsWith("data:")&&r.push(e.slice(5).trim());if("error"===n)throw new Error(`Bridge-api error: ${r.join("\n")}`);if(r.length>0){const e=JSON.parse(r.join("\n"));await t(e,n)}}}await(n?.())}catch(e){s?.(e)}finally{try{await(i?.cancel())}catch(e){console.error("Error cleaning up stream reader",e)}}}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/fetch-server-events.cjs"}],[1536,{"./bridge.cjs":1532,"./caip-formatters.cjs":1533,"./fetch-server-events.cjs":1535,"./trade-utils.cjs":1544,"./validators.cjs":1545,"@metamask/superstruct":3415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchBridgeQuoteStream=s.fetchAssetPrices=s.fetchBridgeQuotes=s.fetchBridgeTokens=s.getClientHeaders=void 0;const n=e("@metamask/superstruct"),r=e("./bridge.cjs"),a=e("./caip-formatters.cjs"),i=e("./fetch-server-events.cjs"),o=e("./trade-utils.cjs"),c=e("./validators.cjs");s.getClientHeaders=(e,t)=>({"X-Client-Id":e,...t?{"Client-Version":t}:{}}),s.fetchBridgeTokens=async function(e,t,n,r,i){const o=`${r}/getTokens?chainId=${(0,a.formatChainIdToDec)(e)}`,l=await n(o,{headers:(0,s.getClientHeaders)(t,i)}),u={};return l.forEach(e=>{(0,c.validateSwapsTokenObject)(e)&&(u[e.address]=e)}),u};const l=e=>{const t=e.destWalletAddress??e.walletAddress,s={walletAddress:(0,a.formatAddressToCaipReference)(e.walletAddress),destWalletAddress:(0,a.formatAddressToCaipReference)(t),srcChainId:(0,a.formatChainIdToDec)(e.srcChainId),destChainId:(0,a.formatChainIdToDec)(e.destChainId),srcTokenAddress:(0,a.formatAddressToCaipReference)(e.srcTokenAddress),destTokenAddress:(0,a.formatAddressToCaipReference)(e.destTokenAddress),srcTokenAmount:e.srcTokenAmount,insufficientBal:Boolean(e.insufficientBal),resetApproval:Boolean(e.resetApproval),gasIncluded:Boolean(e.gasIncluded),gasIncluded7702:Boolean(e.gasIncluded7702)};e.slippage!==undefined&&(s.slippage=e.slippage),e.fee!==undefined&&(s.fee=e.fee),e.aggIds&&e.aggIds.length>0&&(s.aggIds=e.aggIds),e.bridgeIds&&e.bridgeIds.length>0&&(s.bridgeIds=e.bridgeIds);const n=new URLSearchParams;return Object.entries(s).forEach(([e,t])=>{n.append(e,t.toString())}),n};s.fetchBridgeQuotes=async function(e,t,a,i,u,d,h){const p=`${u}/getQuote?${l(e)}`,m=await i(p,{headers:(0,s.getClientHeaders)(a,h),signal:t}),f=new Set([]),g=m.filter(e=>{try{return(0,c.validateQuoteResponse)(e)}catch(t){return t instanceof n.StructError&&t.failures().forEach(({branch:t,path:s})=>{const n=t?.[0]?.quote?.bridgeId||t?.[0]?.quote?.bridges?.[0]||e?.quote?.bridgeId||e?.quote?.bridges?.[0]||"unknown",r=s?.join(".")||"unknown";f.add([n,r].join("|"))}),!1}}).map(t=>({...t,featureId:d??undefined,resetApproval:e.resetApproval&&t.approval&&(0,o.isEvmTxData)(t.approval)?{...t.approval,data:(0,r.getEthUsdtResetData)(e.destChainId)}:undefined})),b=Array.from(f);return f.size>0&&console.warn("Quote validation failed",b),{quotes:g,validationFailures:b}};s.fetchAssetPrices=async e=>{const{currencies:t,...n}=e,r=await Promise.allSettled(Array.from(t).map(async e=>await(async e=>{const{currency:t,assetIds:n,clientId:r,clientVersion:a,fetchFn:i,signal:o}=e,c=Array.from(n).filter(Boolean);if(0===c.length)return{};const l=`https://price.api.cx.metamask.io/v3/spot-prices?${new URLSearchParams({assetIds:c.filter(Boolean).join(","),vsCurrency:t})}`,u=await i(l,{headers:(0,s.getClientHeaders)(r,a),signal:o});return u&&"object"==typeof u?Object.entries(u).reduce((e,[s,n])=>n?(e[s]||(e[s]={}),n[t]&&(e[s][t]=n[t].toString()),e):e,{}):{}})({...n,currency:e}))).then(e=>e.reduce((e,t)=>("fulfilled"===t.status&&Object.entries(t.value).forEach(([t,s])=>{e[t]||(e[t]={}),Object.entries(s).forEach(([s,n])=>{e[t][s]=n})}),e),{}));return r},s.fetchBridgeQuoteStream=async function(e,t,a,u,d,h,p){const m=`${d}/getQuoteStream?${l(t)}`;await(0,i.fetchServerEvents)(m,{headers:{...(0,s.getClientHeaders)(u,p),"Content-Type":"text/event-stream"},signal:a,onMessage:async e=>{const s=new Set([]);try{if((0,c.validateQuoteResponse)(e))return await h.onValidQuoteReceived({...e,resetApproval:t.resetApproval&&e.approval&&(0,o.isEvmTxData)(e.approval)?{...e.approval,data:(0,r.getEthUsdtResetData)(t.destChainId)}:undefined})}catch(t){t instanceof n.StructError&&t.failures().forEach(({branch:t,path:n})=>{const r=t?.[0]?.quote?.bridgeId||t?.[0]?.quote?.bridges?.[0]||e?.quote?.bridgeId||e?.quote?.bridges?.[0]||"unknown",a=n?.join(".")||"unknown";s.add([r,a].join("|"))});const r=Array.from(s);if(s.size>0)return console.warn("Quote validation failed",r),h.onValidationFailure(r);throw t}return undefined},onError:e=>{throw e},onClose:async()=>{await h.onClose()},fetchFn:e})}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/fetch.cjs"}],[1537,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o;Object.defineProperty(s,"__esModule",{value:!0}),s.MetricsSwapType=s.MetricsActionType=s.MetaMetricsSwapsEventSource=s.AbortReason=s.UnifiedSwapBridgeEventName=s.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY=void 0,s.UNIFIED_SWAP_BRIDGE_EVENT_CATEGORY="Unified SwapBridge",function(e){e.ButtonClicked="Unified SwapBridge Button Clicked",e.PageViewed="Unified SwapBridge Page Viewed",e.InputChanged="Unified SwapBridge Input Changed",e.InputSourceDestinationSwitched="Unified SwapBridge Source Destination Switched",e.QuotesRequested="Unified SwapBridge Quotes Requested",e.QuotesReceived="Unified SwapBridge Quotes Received",e.QuotesError="Unified SwapBridge Quotes Error",e.Submitted="Unified SwapBridge Submitted",e.Completed="Unified SwapBridge Completed",e.Failed="Unified SwapBridge Failed",e.AllQuotesOpened="Unified SwapBridge All Quotes Opened",e.AllQuotesSorted="Unified SwapBridge All Quotes Sorted",e.QuoteSelected="Unified SwapBridge Quote Selected",e.AssetDetailTooltipClicked="Unified SwapBridge Asset Detail Tooltip Clicked",e.QuotesValidationFailed="Unified SwapBridge Quotes Failed Validation",e.StatusValidationFailed="Unified SwapBridge Status Failed Validation"}(n||(s.UnifiedSwapBridgeEventName=n={})),function(e){e.NewQuoteRequest="New Quote Request",e.QuoteRequestUpdated="Quote Request Updated",e.ResetState="Reset controller state",e.TransactionSubmitted="Transaction submitted"}(r||(s.AbortReason=r={})),function(e){e.MainView="Main View",e.TokenView="Token View"}(a||(s.MetaMetricsSwapsEventSource=a={})),function(e){e.CROSSCHAIN_V1="crosschain-v1",e.SWAPBRIDGE_V1="swapbridge-v1"}(i||(s.MetricsActionType=i={})),function(e){e.SINGLE="single_chain",e.CROSSCHAIN="crosschain"}(o||(s.MetricsSwapType=o={}))}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/metrics/constants.cjs"}],[1538,{"../../constants/bridge.cjs":1522,"../../types.cjs":1529,"../bridge.cjs":1532,"../caip-formatters.cjs":1533,"./constants.cjs":1537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getQuotesReceivedProperties=s.isCustomSlippage=s.isHardwareWallet=s.getRequestParams=s.formatProviderLabel=s.getSwapTypeFromQuote=s.getSwapType=s.toInputChangedPropertyValue=s.toInputChangedPropertyKey=void 0;const n=e("./constants.cjs"),r=e("../../constants/bridge.cjs"),a=e("../../types.cjs"),i=e("../bridge.cjs"),o=e("../caip-formatters.cjs");s.toInputChangedPropertyKey={srcTokenAddress:"token_source",destTokenAddress:"token_destination",srcChainId:"chain_source",destChainId:"chain_destination",slippage:"slippage"},s.toInputChangedPropertyValue={srcTokenAddress:({srcTokenAddress:e,srcChainId:t})=>t?(0,o.formatAddressToAssetId)(e??"",t):undefined,destTokenAddress:({destTokenAddress:e,destChainId:t})=>t?(0,o.formatAddressToAssetId)(e??"",t):undefined,srcChainId:({srcChainId:e})=>e?(0,o.formatChainIdToCaip)(e):undefined,destChainId:({destChainId:e})=>e?(0,o.formatChainIdToCaip)(e):undefined,slippage:({slippage:e})=>e?Number(e):e};s.getSwapType=(e,t)=>e&&!(0,i.isCrossChain)(e,t??e)?n.MetricsSwapType.SINGLE:n.MetricsSwapType.CROSSCHAIN;s.getSwapTypeFromQuote=e=>(0,s.getSwapType)(e.srcChainId,e.destChainId);s.formatProviderLabel=({bridgeId:e,bridges:t})=>`${e}_${t[0]}`;s.getRequestParams=({srcChainId:e,destChainId:t,srcTokenAddress:s,destTokenAddress:n})=>{const r=(0,o.formatChainIdToCaip)(e??a.ChainId.ETH);return{chain_id_source:r,chain_id_destination:t?(0,o.formatChainIdToCaip)(t):null,token_address_source:s?(0,o.formatAddressToAssetId)(s,r)??(0,i.getNativeAssetForChainId)(r)?.assetId??null:(0,i.getNativeAssetForChainId)(r)?.assetId??null,token_address_destination:n?(0,o.formatAddressToAssetId)(n,t??r)??null:null}};s.isHardwareWallet=e=>e?.metadata?.keyring.type?.includes("Hardware")??!1;s.isCustomSlippage=e=>e!==r.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest.slippage;s.getQuotesReceivedProperties=(e,t=[],n=!0,r,a)=>{const i=e?(0,s.formatProviderLabel)(e.quote):"_";return{can_submit:n,gas_included:Boolean(e?.quote?.gasIncluded),gas_included_7702:Boolean(e?.quote?.gasIncluded7702),quoted_time_minutes:e?.estimatedProcessingTimeInSeconds?e.estimatedProcessingTimeInSeconds/60:0,usd_quoted_gas:Number(e?.gasFee?.effective?.usd??0),usd_quoted_return:Number(e?.toTokenAmount?.usd??0),usd_balance_source:a??0,best_quote_provider:r?(0,s.formatProviderLabel)(r.quote):i,provider:i,warnings:t,price_impact:Number(e?.quote.priceData?.priceImpact??0)}}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/metrics/properties.cjs"}],[1539,{"../constants/chains.cjs":1523,"./bridge.cjs":1532,"./caip-formatters.cjs":1533,"./snaps.cjs":1542,"./trade-utils.cjs":1544,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.appendFeesToQuotes=void 0;const n=e("@metamask/utils"),r=e("./bridge.cjs"),a=e("./caip-formatters.cjs"),i=e("./snaps.cjs"),o=e("./trade-utils.cjs"),c=e("../constants/chains.cjs");s.appendFeesToQuotes=async(e,t,s,l)=>{const u=await(async(e,t)=>{if(e.some(({quote:e})=>{const t=(0,a.formatChainIdToCaip)(e.srcChainId);return![c.CHAIN_IDS.OPTIMISM,c.CHAIN_IDS.BASE].map(a.formatChainIdToCaip).includes(t)}))return undefined;const s=Promise.allSettled(e.map(async e=>{const{quote:s,trade:a,approval:i}=e,o=(0,n.numberToHex)(s.srcChainId),c=e=>({from:e.from,to:e.to,value:e.value,data:e.data,gasLimit:e.gasLimit?.toString()}),l=i?await t({transactionParams:c(i),chainId:o}):"0x0",u=await t({transactionParams:c(a),chainId:o});return l===undefined||u===undefined?undefined:{...e,l1GasFeesInHexWei:(0,r.sumHexes)(l,u)}}));return(await s).reduce((e,t)=>("fulfilled"===t.status&&t.value?e.push(t.value):"rejected"===t.status&&console.error("Error calculating L1 gas fees for quote",t.reason),e),[])})(e,s),d=await(async(e,t,s)=>{if(e.some(({quote:{srcChainId:e}})=>!(0,r.isNonEvmChainId)(e)))return undefined;const n=Promise.allSettled(e.map(async e=>{const{trade:n,quote:r}=e;if(!s?.metadata?.snap?.id||!n)return e;try{const c=(0,a.formatChainIdToCaip)(r.srcChainId),l=(0,o.extractTradeData)(n),u=(0,o.isTronTrade)(n)?{visible:n.visible,type:n.raw_data?.contract?.[0]?.type,feeLimit:n.raw_data?.fee_limit}:undefined,d=await t.call("SnapController:handleRequest",(0,i.computeFeeRequest)(s?.metadata?.snap?.id,l,s?.id,c,u)),h=d?.find(e=>"base"===e.type)||d?.find(e=>"priority"===e.type)||d?.[0],p=h?.asset?.amount||"0";return{...e,nonEvmFeesInNative:p}}catch(t){return console.error(`Failed to compute non-EVM fees for quote ${r.requestId}:`,t),{...e,nonEvmFeesInNative:undefined}}}));return(await n).reduce((e,t)=>("fulfilled"===t.status&&t.value&&e.push(t.value),e),[])})(e,t,l);return u??d??e}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/quote-fees.cjs"}],[1540,{"./bridge.cjs":1532,"./validators.cjs":1545,"@metamask/controller-utils":1639,"bignumber.js":1553},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.sortQuotes=s.formatEtaInMinutes=s.calcSlippagePercentage=s.calcCost=s.calcSwapRate=s.calcAdjustedReturn=s.calcIncludedTxFees=s.calcTotalMaxNetworkFee=s.calcTotalEstimatedNetworkFee=s.calcEstimatedAndMaxTotalGasFee=s.calcRelayerFee=s.calcSentAmount=s.calcToAmount=s.calcNonEvmTotalNetworkFee=s.getQuoteIdentifier=s.isValidQuoteRequest=void 0;const n=e("@metamask/controller-utils"),r=e("bignumber.js"),a=e("./bridge.cjs"),i=e("./validators.cjs");s.isValidQuoteRequest=(e,t=!0)=>{const s=["srcTokenAddress","destTokenAddress","srcChainId","destChainId","walletAddress"];if(t&&s.push("srcTokenAmount"),e.destChainId&&e.srcChainId&&e.destChainId!==e.srcChainId&&((0,a.isNonEvmChainId)(e.destChainId)||(0,a.isNonEvmChainId)(e.srcChainId))&&(s.push("destWalletAddress"),!e.destWalletAddress))return!1;const n=[];return e.slippage!==undefined&&n.push("slippage"),s.every(t=>t in e&&"string"==typeof e[t]&&e[t]!==undefined&&""!==e[t]&&null!==e[t])&&n.every(t=>t in e&&"number"==typeof e[t]&&e[t]!==undefined&&!isNaN(Number(e[t]))&&null!==e[t])&&(!t||Boolean((e.srcTokenAmount??"").match(/^[1-9]\d*$/u)))};s.getQuoteIdentifier=e=>`${e.bridgeId}-${e.bridges[0]}-${e.steps.length}`;const o=(e,t)=>{const s=new r.BigNumber(10).pow(t??0);return new r.BigNumber(e).div(s)};s.calcNonEvmTotalNetworkFee=(e,{exchangeRate:t,usdExchangeRate:s})=>{const{nonEvmFeesInNative:n}=e,a=new r.BigNumber(n??"0");return{amount:a.toString(),valueInCurrency:t?a.times(t).toString():null,usd:s?a.times(s).toString():null}};s.calcToAmount=(e,t,{exchangeRate:s,usdExchangeRate:n})=>{const r=o(e,t.decimals);return{amount:r.toString(),valueInCurrency:s?r.times(s).toString():null,usd:n?r.times(n).toString():null}};s.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:s},{exchangeRate:n,usdExchangeRate:a})=>{const i=Object.values(s).filter(e=>e&&e.amount&&e.asset?.assetId===t.assetId).reduce((e,{amount:t})=>e.plus(t),new r.BigNumber(e)),c=o(i,t.decimals);return{amount:c.toString(),valueInCurrency:n?c.times(n).toString():null,usd:a?c.times(a).toString():null}};s.calcRelayerFee=(e,{exchangeRate:t,usdExchangeRate:i})=>{const{quote:c,trade:l}=e,u=new r.BigNumber((0,n.convertHexToDecimal)(l.value||"0x0"));let d=o(u,18);if((0,a.isNativeAddress)(c.srcAsset.address)){const e=(0,s.calcSentAmount)(c,{exchangeRate:t,usdExchangeRate:i}).amount;d=d.minus(e)}return{amount:d,valueInCurrency:t?d.times(t):null,usd:i?d.times(i):null}};const c=({approvalGasLimit:e,resetApprovalGasLimit:t,tradeGasLimit:s,l1GasFeesInHexWei:a,feePerGasInDecGwei:i,nativeToDisplayCurrencyExchangeRate:o,nativeToUsdExchangeRate:c})=>{const l=new r.BigNumber(s?.toString()??"0").plus(e?.toString()??"0").plus(t?.toString()??"0"),u=(0,n.weiHexToGweiDec)((0,n.toHex)(a??"0")),d=l.times(i).plus(u).times(new r.BigNumber(10).pow(-9)),h=o?d.times(o.toString()):null,p=c?d.times(c.toString()):null;return{amount:d.toString(),valueInCurrency:h?.toString()??null,usd:p?.toString()??null}};s.calcEstimatedAndMaxTotalGasFee=({bridgeQuote:{approval:e,trade:t,l1GasFeesInHexWei:s,resetApproval:n},feePerGasInDecGwei:r,maxFeePerGasInDecGwei:a,exchangeRate:i,usdExchangeRate:o})=>{const{amount:l,valueInCurrency:u,usd:d}=c({approvalGasLimit:e?.effectiveGas??e?.gasLimit,resetApprovalGasLimit:n?.effectiveGas??n?.gasLimit,tradeGasLimit:t?.effectiveGas??t?.gasLimit,l1GasFeesInHexWei:s,feePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:i,nativeToUsdExchangeRate:o}),{amount:h,valueInCurrency:p,usd:m}=c({approvalGasLimit:e?.gasLimit,resetApprovalGasLimit:n?.gasLimit,tradeGasLimit:t?.gasLimit,l1GasFeesInHexWei:s,feePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:i,nativeToUsdExchangeRate:o}),{amount:f,valueInCurrency:g,usd:b}=c({approvalGasLimit:e?.gasLimit,resetApprovalGasLimit:n?.gasLimit,tradeGasLimit:t?.gasLimit,l1GasFeesInHexWei:s,feePerGasInDecGwei:a,nativeToDisplayCurrencyExchangeRate:i,nativeToUsdExchangeRate:o});return{effective:{amount:l,valueInCurrency:u,usd:d},total:{amount:h,valueInCurrency:p,usd:m},max:{amount:f,valueInCurrency:g,usd:b}}};s.calcTotalEstimatedNetworkFee=({total:e},t)=>({amount:new r.BigNumber(e?.amount??"0").plus(t.amount).toString(),valueInCurrency:e?.valueInCurrency?new r.BigNumber(e.valueInCurrency).plus(t.valueInCurrency||"0").toString():null,usd:e?.usd?new r.BigNumber(e.usd).plus(t.usd||"0").toString():null});s.calcTotalMaxNetworkFee=(e,t)=>({amount:new r.BigNumber(e.max.amount).plus(t.amount).toString(),valueInCurrency:e.max.valueInCurrency?new r.BigNumber(e.max.valueInCurrency).plus(t.valueInCurrency||"0").toString():null,usd:e.max.usd?new r.BigNumber(e.max.usd).plus(t.usd||"0").toString():null});s.calcIncludedTxFees=({gasIncluded:e,gasIncluded7702:t,srcAsset:s,feeData:{txFee:n}},r,a)=>{if(!n||!e&&!t)return null;const{exchangeRate:i,usdExchangeRate:c}=n.asset.assetId===s.assetId?r:a,l=o(n.amount,n.asset.decimals);return{amount:l.toString(),valueInCurrency:i?l.times(i).toString():null,usd:c?l.times(c).toString():null}};s.calcAdjustedReturn=(e,t,{feeData:{txFee:s},destAsset:{assetId:n}})=>s?.asset?.assetId===n?{valueInCurrency:e.valueInCurrency,usd:e.usd}:{valueInCurrency:e.valueInCurrency&&t.valueInCurrency?new r.BigNumber(e.valueInCurrency).minus(t.valueInCurrency).toString():null,usd:e.usd&&t.usd?new r.BigNumber(e.usd).minus(t.usd).toString():null};s.calcSwapRate=(e,t)=>new r.BigNumber(t).div(e).toString();s.calcCost=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?new r.BigNumber(t.valueInCurrency).minus(e.valueInCurrency).toString():null,usd:e.usd&&t.usd?new r.BigNumber(t.usd).minus(e.usd).toString():null});s.calcSlippagePercentage=(e,t)=>{const n=(0,s.calcCost)(e,t);return n.valueInCurrency&&t.valueInCurrency?new r.BigNumber(n.valueInCurrency).div(t.valueInCurrency).times(100).abs().toString():n.usd&&t.usd?new r.BigNumber(n.usd).div(t.usd).times(100).abs().toString():null};s.formatEtaInMinutes=e=>e<60?"< 1":(e/60).toFixed();s.sortQuotes=(e,t)=>t===i.FeatureId.PERPS?e.sort((e,t)=>e.estimatedProcessingTimeInSeconds-t.estimatedProcessingTimeInSeconds):e}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/quote.cjs"}],[1541,{"./bridge.cjs":1532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getDefaultSlippagePercentage=s.BRIDGE_DEFAULT_SLIPPAGE=void 0;const n=e("./bridge.cjs");s.BRIDGE_DEFAULT_SLIPPAGE=.5;const r=undefined;s.getDefaultSlippagePercentage=({srcTokenAddress:e,destTokenAddress:t,srcChainId:a,destChainId:i},o,c)=>!a||(0,n.isCrossChain)(a,i)?s.BRIDGE_DEFAULT_SLIPPAGE:(0,n.isSolanaChainId)(a)?r:e&&t&&o?.map(e=>e.toLowerCase()).includes(e.toLowerCase())&&(c??o)?.map(e=>e.toLowerCase()).includes(t.toLowerCase())?.5:2}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/slippage.cjs"}],[1542,{"../constants/bridge.cjs":1522,"@metamask/keyring-api":2510,uuid:6134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.computeFeeRequest=s.getMinimumBalanceForRentExemptionInLamports=s.getMinimumBalanceForRentExemptionRequest=void 0;const n=e("@metamask/keyring-api"),r=e("uuid"),a=e("../constants/bridge.cjs");s.getMinimumBalanceForRentExemptionRequest=e=>({snapId:e,origin:"metamask",handler:"onProtocolRequest",request:{method:" ",jsonrpc:"2.0",params:{scope:n.SolScope.Mainnet,request:{id:(0,r.v4)(),jsonrpc:"2.0",method:"getMinimumBalanceForRentExemption",params:[0,{commitment:"confirmed"}]}}}});s.getMinimumBalanceForRentExemptionInLamports=async(e,t)=>String(await t.call("SnapController:handleRequest",(0,s.getMinimumBalanceForRentExemptionRequest)(e)).catch(e=>(console.error("Error setting minimum balance for rent exemption",e),a.DEFAULT_BRIDGE_CONTROLLER_STATE.minimumBalanceForRentExemptionInLamports)));s.computeFeeRequest=(e,t,s,n,a)=>({snapId:e,origin:"metamask",handler:"onClientRequest",request:{id:(0,r.v4)(),jsonrpc:"2.0",method:"computeFee",params:{transaction:t,accountId:s,scope:n,...a&&{options:a}}}})}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/snaps.cjs"}],[1543,{"../constants/chains.cjs":1523,"../constants/swaps.cjs":1524,"../constants/tokens.cjs":1525,"./caip-formatters.cjs":1533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchTokens=s.DEV_BASE_URL=s.API_BASE_URL=s.getSwapsContractAddress=s.isValidSwapsContractAddress=void 0;const n=e("./caip-formatters.cjs"),r=e("../constants/chains.cjs"),a=e("../constants/swaps.cjs"),i=e("../constants/tokens.cjs");function o(e){return e?{"X-Client-Id":e}:undefined}s.isValidSwapsContractAddress=function(e,t){return!(!t||!a.ALLOWED_CONTRACT_ADDRESSES[e])&&a.ALLOWED_CONTRACT_ADDRESSES[e].some(e=>t.toLowerCase()===e.toLowerCase())},s.getSwapsContractAddress=function(e){return a.SWAPS_CONTRACT_ADDRESSES[e]},s.API_BASE_URL="https://swap.api.cx.metamask.io",s.DEV_BASE_URL="https://swap.dev-api.cx.metamask.io",s.fetchTokens=async function(e,t,a){const[c,l]=e===r.CHAIN_IDS.LOCALHOST?[r.CHAIN_IDS.MAINNET,s.DEV_BASE_URL]:[e,s.API_BASE_URL],u=`${l}/networks/${(0,n.formatChainIdToDec)(c)}/tokens`,d=(await t(u,{headers:o(a)})).filter(e=>e.address!==i.DEFAULT_TOKEN_ADDRESS),h=i.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e];return d.push(h),d}}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/swaps.cjs"}],[1544,{buffer:4474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(e){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.extractTradeData=s.isTronTrade=s.isBitcoinTrade=s.isEvmTxData=void 0;s.isEvmTxData=e=>"object"==typeof e&&null!==e&&"data"in e&&"chainId"in e&&"to"in e;s.isBitcoinTrade=e=>"object"==typeof e&&null!==e&&"unsignedPsbtBase64"in e;s.isTronTrade=e=>"object"==typeof e&&null!==e&&"raw_data_hex"in e;s.extractTradeData=t=>(0,s.isBitcoinTrade)(t)?t.unsignedPsbtBase64:(0,s.isTronTrade)(t)?e.from(t.raw_data_hex,"hex").toString("base64"):"string"==typeof t?t:(0,s.isEvmTxData)(t)?t.data:""}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/trade-utils.cjs"}],[1545,{"@metamask/controller-utils":1639,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateQuoteResponse=s.QuoteResponseSchema=s.TronTradeDataSchema=s.BitcoinTradeDataSchema=s.TxDataSchema=s.QuoteSchema=s.IntentSchema=s.IntentOrderSchema=s.StepSchema=s.ProtocolSchema=s.FeeDataSchema=s.validateSwapsTokenObject=s.validateFeatureFlagsResponse=s.PlatformConfigSchema=s.PriceImpactThresholdSchema=s.ChainConfigurationSchema=s.ChainRankingSchema=s.ChainRankingItemSchema=s.BridgeAssetSchema=s.truthyString=s.ActionTypes=s.FeatureId=s.FeeType=void 0;const n=e("@metamask/controller-utils"),r=e("@metamask/superstruct"),a=e("@metamask/utils");var i,o,c;!function(e){e.METABRIDGE="metabridge",e.REFUEL="refuel",e.TX_FEE="txFee"}(i||(s.FeeType=i={})),function(e){e.PERPS="perps"}(o||(s.FeatureId=o={})),function(e){e.BRIDGE="bridge",e.SWAP="swap",e.REFUEL="refuel"}(c||(s.ActionTypes=c={}));const l=(0,r.define)("HexAddress",e=>(0,n.isValidHexAddress)(e,{allowNonPrefixed:!1})),u=(0,r.define)("HexString",e=>(0,a.isStrictHexString)(e)),d=(0,r.define)("VersionString",e=>"string"==typeof e&&/^(\d+\.*){2}\d+$/u.test(e)&&3===e.split(".").length);s.truthyString=e=>Boolean(e?.length);const h=(0,r.pattern)((0,r.string)(),/^\d+$/u),p=(0,r.number)();s.BridgeAssetSchema=(0,r.type)({chainId:p,address:(0,r.string)(),assetId:a.CaipAssetTypeStruct,symbol:(0,r.string)(),name:(0,r.string)(),decimals:(0,r.number)(),icon:(0,r.optional)((0,r.nullable)((0,r.string)())),iconUrl:(0,r.optional)((0,r.nullable)((0,r.string)()))});const m=(0,r.type)({standard:(0,r.record)((0,r.string)(),(0,r.string)()),other:(0,r.record)((0,r.string)(),(0,r.string)())});s.ChainRankingItemSchema=(0,r.type)({chainId:a.CaipChainIdStruct,name:(0,r.string)()}),s.ChainRankingSchema=(0,r.optional)((0,r.array)(s.ChainRankingItemSchema)),s.ChainConfigurationSchema=(0,r.type)({isActiveSrc:(0,r.boolean)(),isActiveDest:(0,r.boolean)(),refreshRate:(0,r.optional)((0,r.number)()),topAssets:(0,r.optional)((0,r.array)((0,r.string)())),stablecoins:(0,r.optional)((0,r.array)((0,r.string)())),isUnifiedUIEnabled:(0,r.optional)((0,r.boolean)()),isSingleSwapBridgeButtonEnabled:(0,r.optional)((0,r.boolean)()),isGaslessSwapEnabled:(0,r.optional)((0,r.boolean)()),noFeeAssets:(0,r.optional)((0,r.array)((0,r.string)())),defaultPairs:(0,r.optional)(m)}),s.PriceImpactThresholdSchema=(0,r.type)({gasless:(0,r.number)(),normal:(0,r.number)()});const f=(0,r.type)({aggIds:(0,r.optional)((0,r.array)((0,r.string)())),bridgeIds:(0,r.optional)((0,r.array)((0,r.string)())),fee:(0,r.optional)((0,r.number)())}),g=(0,r.enums)(Object.values(o));s.PlatformConfigSchema=(0,r.type)({priceImpactThreshold:(0,r.optional)(s.PriceImpactThresholdSchema),quoteRequestOverrides:(0,r.optional)((0,r.record)(g,(0,r.optional)(f))),minimumVersion:(0,r.string)(),refreshRate:(0,r.number)(),maxRefreshCount:(0,r.number)(),support:(0,r.boolean)(),chains:(0,r.record)((0,r.string)(),s.ChainConfigurationSchema),bip44DefaultPairs:(0,r.optional)((0,r.record)((0,r.string)(),(0,r.optional)(m))),sse:(0,r.optional)((0,r.type)({enabled:(0,r.boolean)(),minimumVersion:d})),chainRanking:s.ChainRankingSchema});s.validateFeatureFlagsResponse=e=>(0,r.is)(e,s.PlatformConfigSchema);s.validateSwapsTokenObject=e=>(0,r.is)(e,s.BridgeAssetSchema),s.FeeDataSchema=(0,r.type)({amount:h,asset:s.BridgeAssetSchema}),s.ProtocolSchema=(0,r.type)({name:(0,r.string)(),displayName:(0,r.optional)((0,r.string)()),icon:(0,r.optional)((0,r.string)())}),s.StepSchema=(0,r.type)({action:(0,r.enums)(Object.values(c)),srcChainId:p,destChainId:(0,r.optional)(p),srcAsset:s.BridgeAssetSchema,destAsset:s.BridgeAssetSchema,srcAmount:(0,r.string)(),destAmount:(0,r.string)(),protocol:s.ProtocolSchema});const b=s.StepSchema,S=(0,r.union)([h,(0,r.number)()]),A=(0,r.string)();s.IntentOrderSchema=(0,r.type)({sellToken:l,buyToken:l,receiver:(0,r.optional)(l),validTo:S,appData:(0,r.string)(),appDataHash:u,feeAmount:h,kind:(0,r.enums)(["sell","buy"]),partiallyFillable:(0,r.boolean)(),sellAmount:(0,r.optional)(h),buyAmount:(0,r.optional)(h),from:(0,r.optional)(l)}),s.IntentSchema=(0,r.type)({protocol:A,order:s.IntentOrderSchema,settlementContract:(0,r.optional)(l),relayer:(0,r.optional)(l)}),s.QuoteSchema=(0,r.type)({requestId:(0,r.string)(),srcChainId:p,srcAsset:s.BridgeAssetSchema,srcTokenAmount:(0,r.string)(),destChainId:p,destAsset:s.BridgeAssetSchema,destTokenAmount:(0,r.string)(),minDestTokenAmount:(0,r.string)(),feeData:(0,r.type)({[i.METABRIDGE]:s.FeeDataSchema,[i.TX_FEE]:(0,r.optional)((0,r.intersection)([s.FeeDataSchema,(0,r.type)({maxFeePerGas:(0,r.string)(),maxPriorityFeePerGas:(0,r.string)()})]))}),gasIncluded:(0,r.optional)((0,r.boolean)()),gasIncluded7702:(0,r.optional)((0,r.boolean)()),bridgeId:(0,r.string)(),bridges:(0,r.array)((0,r.string)()),steps:(0,r.array)(s.StepSchema),refuel:(0,r.optional)(b),priceData:(0,r.optional)((0,r.type)({totalFromAmountUsd:(0,r.optional)((0,r.string)()),totalToAmountUsd:(0,r.optional)((0,r.string)()),priceImpact:(0,r.optional)((0,r.string)()),totalFeeAmountUsd:(0,r.optional)((0,r.string)())})),intent:(0,r.optional)(s.IntentSchema),gasSponsored:(0,r.optional)((0,r.boolean)())}),s.TxDataSchema=(0,r.type)({chainId:(0,r.number)(),to:l,from:l,value:u,data:u,gasLimit:(0,r.nullable)((0,r.number)()),effectiveGas:(0,r.optional)((0,r.number)())}),s.BitcoinTradeDataSchema=(0,r.type)({unsignedPsbtBase64:(0,r.string)(),inputsToSign:(0,r.nullable)((0,r.array)((0,r.type)({})))}),s.TronTradeDataSchema=(0,r.type)({raw_data_hex:(0,r.string)(),visible:(0,r.optional)((0,r.boolean)()),raw_data:(0,r.optional)((0,r.nullable)((0,r.type)({contract:(0,r.optional)((0,r.array)((0,r.type)({type:(0,r.optional)((0,r.string)())}))),fee_limit:(0,r.optional)((0,r.number)())})))}),s.QuoteResponseSchema=(0,r.type)({quote:s.QuoteSchema,estimatedProcessingTimeInSeconds:(0,r.number)(),approval:(0,r.optional)((0,r.union)([s.TxDataSchema,s.TronTradeDataSchema])),trade:(0,r.union)([s.TxDataSchema,s.BitcoinTradeDataSchema,s.TronTradeDataSchema,(0,r.string)()])});s.validateQuoteResponse=e=>((0,r.assert)(e,s.QuoteResponseSchema),!0)}}},{package:"@metamask/bridge-controller",file:"node_modules/@metamask/bridge-controller/dist/utils/validators.cjs"}],[1546,{"../api/accounts-api.cjs":1548,"../constants.cjs":1549,"../types.cjs":1551,"../utils.cjs":1552,"@metamask/base-controller":1520,"@metamask/keyring-api":2510,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o,c,l,u,d,h=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},p=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.MultichainNetworkController=void 0;const m=e("@metamask/base-controller"),f=e("@metamask/keyring-api"),g=e("@metamask/utils"),b=e("../api/accounts-api.cjs"),S=e("../constants.cjs"),A=e("../types.cjs"),y=e("../utils.cjs");class E extends m.BaseController{constructor({messenger:e,state:t,networkService:s}){super({messenger:e,name:A.MULTICHAIN_NETWORK_CONTROLLER_NAME,metadata:S.MULTICHAIN_NETWORK_CONTROLLER_METADATA,state:{...(0,S.getDefaultMultichainNetworkControllerState)(),...t,multichainNetworkConfigurationsByChainId:S.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS}}),n.add(this),r.set(this,void 0),h(this,r,s,"f"),p(this,n,"m",u).call(this),p(this,n,"m",d).call(this)}async setActiveNetwork(e){if((0,g.isCaipChainId)(e)){if(!(0,y.checkIfSupportedCaipChainId)(e))throw new Error(`Unsupported Caip chain ID: ${String(e)}`);return p(this,n,"m",i).call(this,e)}return await p(this,n,"m",a).call(this,e)}async getNetworksWithTransactionActivityByAccounts(){const e=this.messenger.call("AccountsController:listMultichainAccounts").filter(e=>(0,f.isEvmAccountType)(e.type));if(!e||0===e.length)return this.state.networksWithTransactionActivity;const t=e.map(e=>(0,b.toAllowedCaipAccountIds)(e)).flat(),s=await p(this,r,"f").fetchNetworkActivity(t),n=(0,b.toActiveNetworksByAddress)(s);return this.update(e=>{e.networksWithTransactionActivity=n}),this.state.networksWithTransactionActivity}async removeNetwork(e){return(0,y.isEvmCaipChainId)(e)?await p(this,n,"m",o).call(this,e):p(this,n,"m",c).call(this,e)}}s.MultichainNetworkController=E,r=new WeakMap,n=new WeakSet,a=async function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState"),s=!this.state.isEvmSelected,n=e!==t;(s||n)&&(s&&this.update(e=>{e.isEvmSelected=!0}),n&&await this.messenger.call("NetworkController:setActiveNetwork",e),(s||n)&&this.messenger.publish("MultichainNetworkController:networkDidChange",e))},i=function(e){(e!==this.state.selectedMultichainNetworkChainId||this.state.isEvmSelected)&&(this.update(t=>{t.selectedMultichainNetworkChainId=e,t.isEvmSelected=!1}),this.messenger.publish("MultichainNetworkController:networkDidChange",e))},o=async function(e){const t=(0,y.convertEvmCaipToHexChainId)(e);if(this.messenger.call("NetworkController:getSelectedChainId")===t){if(this.state.isEvmSelected)throw new Error("Cannot remove the currently selected network");const e="0x1",t=this.messenger.call("NetworkController:findNetworkClientIdByChainId",e);await this.messenger.call("NetworkController:setActiveNetwork",t)}this.messenger.call("NetworkController:removeNetwork",t)},c=function(e){throw new Error("Removal of non-EVM networks is not supported")},l=function(e){const{type:t,scopes:s}=e;if((0,f.isEvmAccountType)(t)){if(this.state.isEvmSelected)return;return void this.update(e=>{e.isEvmSelected=!0})}if(s.includes(this.state.selectedMultichainNetworkChainId))return void this.update(e=>{e.isEvmSelected=!1});const n=(0,y.getChainIdForNonEvm)(s);this.update(e=>{e.selectedMultichainNetworkChainId=n,e.isEvmSelected=!1})},u=function(){this.messenger.subscribe("AccountsController:selectedAccountChange",e=>p(this,n,"m",l).call(this,e))},d=function(){this.messenger.registerActionHandler("MultichainNetworkController:setActiveNetwork",this.setActiveNetwork.bind(this)),this.messenger.registerActionHandler("MultichainNetworkController:getNetworksWithTransactionActivityByAccounts",this.getNetworksWithTransactionActivityByAccounts.bind(this))}}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/MultichainNetworkController/MultichainNetworkController.cjs"}],[1547,{"../api/accounts-api.cjs":1548,"@metamask/superstruct":3415,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,a,i,o=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(s,"__esModule",{value:!0}),s.MultichainNetworkService=void 0;const l=e("@metamask/superstruct"),u=e("lodash"),d=e("../api/accounts-api.cjs");s.MultichainNetworkService=class{constructor({fetch:e,batchSize:t}){n.add(this),r.set(this,void 0),a.set(this,void 0),o(this,r,e,"f"),o(this,a,t??20,"f")}async fetchNetworkActivity(e){if(0===e.length)return{activeNetworks:[]};if(e.length<=c(this,a,"f"))return c(this,n,"m",i).call(this,e);const t=(0,u.chunk)(e,c(this,a,"f"));return{activeNetworks:(await Promise.all(t.map(e=>c(this,n,"m",i).call(this,e)))).flatMap(e=>e.activeNetworks)}}},r=new WeakMap,a=new WeakMap,n=new WeakSet,i=async function(e){try{const t=(0,d.buildActiveNetworksUrl)(e),s=await c(this,r,"f").call(this,t.toString(),{method:"GET",headers:{[d.MULTICHAIN_ACCOUNTS_CLIENT_HEADER]:d.MULTICHAIN_ACCOUNTS_CLIENT_ID,Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();return(0,l.assert)(n,d.ActiveNetworksResponseStruct),n}catch(e){if(e instanceof Error){if("AbortError"===e.name)throw new Error("Request timeout: Failed to fetch active networks");throw e}throw new Error(`Failed to fetch active networks: ${String(e)}`)}}}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/MultichainNetworkService/MultichainNetworkService.cjs"}],[1548,{"@metamask/keyring-api":2510,"@metamask/superstruct":3415,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.buildActiveNetworksUrl=s.toActiveNetworksByAddress=s.toAllowedCaipAccountIds=s.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES=s.MULTICHAIN_ACCOUNTS_CLIENT_ID=s.MULTICHAIN_ACCOUNTS_CLIENT_HEADER=s.MULTICHAIN_ACCOUNTS_BASE_URL=s.ActiveNetworksResponseStruct=void 0;const n=e("@metamask/keyring-api"),r=e("@metamask/superstruct"),a=e("@metamask/utils");s.ActiveNetworksResponseStruct=(0,r.object)({activeNetworks:(0,r.array)(a.CaipAccountIdStruct)}),s.MULTICHAIN_ACCOUNTS_BASE_URL="https://accounts.api.cx.metamask.io",s.MULTICHAIN_ACCOUNTS_CLIENT_HEADER="x-metamask-clientproduct",s.MULTICHAIN_ACCOUNTS_CLIENT_ID="metamask-multichain-network-controller",s.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES=[String(n.BtcScope.Mainnet),String(n.BtcScope.Testnet),String(n.BtcScope.Testnet4),String(n.BtcScope.Signet),String(n.BtcScope.Regtest),String(n.SolScope.Mainnet),String(n.SolScope.Devnet),String(n.EthScope.Mainnet),String(n.EthScope.Testnet),String(n.EthScope.Eoa),String(n.TrxScope.Mainnet),String(n.TrxScope.Nile),String(n.TrxScope.Shasta)],s.toAllowedCaipAccountIds=function(e){const t=[];for(const n of e.scopes)s.MULTICHAIN_ALLOWED_ACTIVE_NETWORK_SCOPES.includes(n)&&t.push(`${n}:${e.address}`);return t},s.toActiveNetworksByAddress=function(e){const t={};return e.activeNetworks.forEach(e=>{const{address:s,chain:{namespace:n,reference:r}}=(0,a.parseCaipAccountId)(e);t[s]||(t[s]={namespace:n,activeChains:[]}),t[s].activeChains.push(r)}),t},s.buildActiveNetworksUrl=function(e){const t=new URL(`${s.MULTICHAIN_ACCOUNTS_BASE_URL}/v2/activeNetworks`);return t.searchParams.append("accountIds",e.join(",")),t}}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/api/accounts-api.cjs"}],[1549,{"@metamask/keyring-api":2510,"@metamask/network-controller":2751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.MULTICHAIN_NETWORK_DECIMAL_PLACES=s.MULTICHAIN_NETWORK_TICKER=s.MULTICHAIN_NETWORK_CONTROLLER_METADATA=s.getDefaultMultichainNetworkControllerState=s.NETWORKS_METADATA=s.NON_EVM_TESTNET_IDS=s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS=s.TRX_SHASTA_NATIVE_ASSET=s.TRX_NILE_NATIVE_ASSET=s.TRX_NATIVE_ASSET=s.SOL_DEVNET_NATIVE_ASSET=s.SOL_TESTNET_NATIVE_ASSET=s.SOL_NATIVE_ASSET=s.BTC_REGTEST_NATIVE_ASSET=s.BTC_SIGNET_NATIVE_ASSET=s.BTC_TESTNET4_NATIVE_ASSET=s.BTC_TESTNET_NATIVE_ASSET=s.BTC_NATIVE_ASSET=void 0;const n=e("@metamask/keyring-api"),r=e("@metamask/network-controller");s.BTC_NATIVE_ASSET=`${n.BtcScope.Mainnet}/slip44:0`,s.BTC_TESTNET_NATIVE_ASSET=`${n.BtcScope.Testnet}/slip44:0`,s.BTC_TESTNET4_NATIVE_ASSET=`${n.BtcScope.Testnet4}/slip44:0`,s.BTC_SIGNET_NATIVE_ASSET=`${n.BtcScope.Signet}/slip44:0`,s.BTC_REGTEST_NATIVE_ASSET=`${n.BtcScope.Regtest}/slip44:0`,s.SOL_NATIVE_ASSET=`${n.SolScope.Mainnet}/slip44:501`,s.SOL_TESTNET_NATIVE_ASSET=`${n.SolScope.Testnet}/slip44:501`,s.SOL_DEVNET_NATIVE_ASSET=`${n.SolScope.Devnet}/slip44:501`,s.TRX_NATIVE_ASSET=`${n.TrxScope.Mainnet}/slip44:195`,s.TRX_NILE_NATIVE_ASSET=`${n.TrxScope.Nile}/slip44:195`,s.TRX_SHASTA_NATIVE_ASSET=`${n.TrxScope.Shasta}/slip44:195`,s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS={[n.BtcScope.Mainnet]:{chainId:n.BtcScope.Mainnet,name:"Bitcoin",nativeCurrency:s.BTC_NATIVE_ASSET,isEvm:!1},[n.BtcScope.Testnet]:{chainId:n.BtcScope.Testnet,name:"Bitcoin Testnet",nativeCurrency:s.BTC_TESTNET_NATIVE_ASSET,isEvm:!1},[n.BtcScope.Testnet4]:{chainId:n.BtcScope.Testnet4,name:"Bitcoin Testnet4",nativeCurrency:s.BTC_TESTNET4_NATIVE_ASSET,isEvm:!1},[n.BtcScope.Signet]:{chainId:n.BtcScope.Signet,name:"Bitcoin Mutinynet",nativeCurrency:s.BTC_SIGNET_NATIVE_ASSET,isEvm:!1},[n.BtcScope.Regtest]:{chainId:n.BtcScope.Regtest,name:"Bitcoin Regtest",nativeCurrency:s.BTC_REGTEST_NATIVE_ASSET,isEvm:!1},[n.SolScope.Mainnet]:{chainId:n.SolScope.Mainnet,name:"Solana",nativeCurrency:s.SOL_NATIVE_ASSET,isEvm:!1},[n.SolScope.Testnet]:{chainId:n.SolScope.Testnet,name:"Solana Testnet",nativeCurrency:s.SOL_TESTNET_NATIVE_ASSET,isEvm:!1},[n.SolScope.Devnet]:{chainId:n.SolScope.Devnet,name:"Solana Devnet",nativeCurrency:s.SOL_DEVNET_NATIVE_ASSET,isEvm:!1},[n.TrxScope.Mainnet]:{chainId:n.TrxScope.Mainnet,name:"Tron",nativeCurrency:s.TRX_NATIVE_ASSET,isEvm:!1},[n.TrxScope.Nile]:{chainId:n.TrxScope.Nile,name:"Tron Nile",nativeCurrency:s.TRX_NILE_NATIVE_ASSET,isEvm:!1},[n.TrxScope.Shasta]:{chainId:n.TrxScope.Shasta,name:"Tron Shasta",nativeCurrency:s.TRX_SHASTA_NATIVE_ASSET,isEvm:!1}},s.NON_EVM_TESTNET_IDS=[n.BtcScope.Testnet,n.BtcScope.Testnet4,n.BtcScope.Signet,n.BtcScope.Regtest,n.SolScope.Testnet,n.SolScope.Devnet,n.TrxScope.Nile,n.TrxScope.Shasta],s.NETWORKS_METADATA={[n.BtcScope.Mainnet]:{features:[],status:r.NetworkStatus.Available},[n.SolScope.Mainnet]:{features:[],status:r.NetworkStatus.Available},[n.TrxScope.Mainnet]:{features:[],status:r.NetworkStatus.Available}};s.getDefaultMultichainNetworkControllerState=()=>({multichainNetworkConfigurationsByChainId:s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS,selectedMultichainNetworkChainId:n.SolScope.Mainnet,isEvmSelected:!0,networksWithTransactionActivity:{}}),s.MULTICHAIN_NETWORK_CONTROLLER_METADATA={multichainNetworkConfigurationsByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},selectedMultichainNetworkChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isEvmSelected:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networksWithTransactionActivity:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}},s.MULTICHAIN_NETWORK_TICKER={[n.BtcScope.Mainnet]:"BTC",[n.BtcScope.Testnet]:"tBTC",[n.BtcScope.Testnet4]:"tBTC",[n.BtcScope.Signet]:"sBTC",[n.BtcScope.Regtest]:"rBTC",[n.SolScope.Mainnet]:"SOL",[n.SolScope.Testnet]:"tSOL",[n.SolScope.Devnet]:"dSOL",[n.TrxScope.Mainnet]:"TRX",[n.TrxScope.Nile]:"tTRX",[n.TrxScope.Shasta]:"sTRX"},s.MULTICHAIN_NETWORK_DECIMAL_PLACES={[n.BtcScope.Mainnet]:8,[n.BtcScope.Testnet]:8,[n.BtcScope.Testnet4]:8,[n.BtcScope.Signet]:8,[n.BtcScope.Regtest]:8,[n.SolScope.Mainnet]:5,[n.SolScope.Testnet]:5,[n.SolScope.Devnet]:5,[n.TrxScope.Mainnet]:6,[n.TrxScope.Nile]:6,[n.TrxScope.Shasta]:6}}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/constants.cjs"}],[1550,{"./MultichainNetworkController/MultichainNetworkController.cjs":1546,"./MultichainNetworkService/MultichainNetworkService.cjs":1547,"./constants.cjs":1549,"./utils.cjs":1552},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toEvmCaipChainId=s.toMultichainNetworkConfigurationsByChainId=s.toMultichainNetworkConfiguration=s.checkIfSupportedCaipChainId=s.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS=s.MULTICHAIN_NETWORK_DECIMAL_PLACES=s.MULTICHAIN_NETWORK_TICKER=s.NON_EVM_TESTNET_IDS=s.getDefaultMultichainNetworkControllerState=s.MultichainNetworkService=s.MultichainNetworkController=void 0;var n=e("./MultichainNetworkController/MultichainNetworkController.cjs");Object.defineProperty(s,"MultichainNetworkController",{enumerable:!0,get:function(){return n.MultichainNetworkController}});var r=e("./MultichainNetworkService/MultichainNetworkService.cjs");Object.defineProperty(s,"MultichainNetworkService",{enumerable:!0,get:function(){return r.MultichainNetworkService}});var a=e("./constants.cjs");Object.defineProperty(s,"getDefaultMultichainNetworkControllerState",{enumerable:!0,get:function(){return a.getDefaultMultichainNetworkControllerState}}),Object.defineProperty(s,"NON_EVM_TESTNET_IDS",{enumerable:!0,get:function(){return a.NON_EVM_TESTNET_IDS}}),Object.defineProperty(s,"MULTICHAIN_NETWORK_TICKER",{enumerable:!0,get:function(){return a.MULTICHAIN_NETWORK_TICKER}}),Object.defineProperty(s,"MULTICHAIN_NETWORK_DECIMAL_PLACES",{enumerable:!0,get:function(){return a.MULTICHAIN_NETWORK_DECIMAL_PLACES}}),Object.defineProperty(s,"AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS",{enumerable:!0,get:function(){return a.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS}});var i=e("./utils.cjs");Object.defineProperty(s,"checkIfSupportedCaipChainId",{enumerable:!0,get:function(){return i.checkIfSupportedCaipChainId}}),Object.defineProperty(s,"toMultichainNetworkConfiguration",{enumerable:!0,get:function(){return i.toMultichainNetworkConfiguration}}),Object.defineProperty(s,"toMultichainNetworkConfigurationsByChainId",{enumerable:!0,get:function(){return i.toMultichainNetworkConfigurationsByChainId}}),Object.defineProperty(s,"toEvmCaipChainId",{enumerable:!0,get:function(){return i.toEvmCaipChainId}})}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/index.cjs"}],[1551,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.MULTICHAIN_NETWORK_CONTROLLER_NAME=void 0,s.MULTICHAIN_NETWORK_CONTROLLER_NAME="MultichainNetworkController"}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/types.cjs"}],[1552,{"./constants.cjs":1549,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isKnownCaipNamespace=s.toMultichainNetworkConfigurationsByChainId=s.toMultichainNetworkConfiguration=s.convertEvmCaipToHexChainId=s.toEvmCaipChainId=s.checkIfSupportedCaipChainId=s.getChainIdForNonEvm=s.isEvmCaipChainId=void 0;const n=e("@metamask/utils"),r=e("./constants.cjs");s.isEvmCaipChainId=function(e){const{namespace:t}=(0,n.parseCaipChainId)(e);return t===n.KnownCaipNamespace.Eip155},s.getChainIdForNonEvm=function(e){const t=e.find(e=>Object.keys(r.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS).includes(e));if(t)return t;throw new Error(`Unsupported scope: ${e.join(", ")}.`)},s.checkIfSupportedCaipChainId=function(e){return Object.keys(r.AVAILABLE_MULTICHAIN_NETWORK_CONFIGURATIONS).includes(e)};s.toEvmCaipChainId=e=>(0,n.toCaipChainId)(n.KnownCaipNamespace.Eip155,(0,n.hexToNumber)(e).toString()),s.convertEvmCaipToHexChainId=function(e){const{namespace:t,reference:s}=(0,n.parseCaipChainId)(e);if(t===n.KnownCaipNamespace.Eip155)return(0,n.add0x)(parseInt(s,10).toString(16));throw new Error(`Unsupported CAIP chain ID namespace: ${t}. Only eip155 is supported.`)};s.toMultichainNetworkConfiguration=e=>{const{chainId:t,name:n,rpcEndpoints:r,defaultRpcEndpointIndex:a,nativeCurrency:i,blockExplorerUrls:o,defaultBlockExplorerUrlIndex:c=0}=e;return{chainId:(0,s.toEvmCaipChainId)(t),isEvm:!0,name:n||r[a].url,nativeCurrency:i,blockExplorerUrls:o,defaultBlockExplorerUrlIndex:c}};s.toMultichainNetworkConfigurationsByChainId=e=>Object.entries(e).reduce((e,[,t])=>({...e,[(0,s.toEvmCaipChainId)(t.chainId)]:(0,s.toMultichainNetworkConfiguration)(t)}),{}),s.isKnownCaipNamespace=function(e){return Object.values(n.KnownCaipNamespace).includes(e)}}}},{package:"@metamask/bridge-controller>@metamask/multichain-network-controller",file:"node_modules/@metamask/bridge-controller/node_modules/@metamask/multichain-network-controller/dist/utils.cjs"}],[1553,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){!function(e){var s,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,a=Math.floor,i="[BigNumber Error] ",o=i+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function f(e){for(var t,s,n=1,r=e.length,a=e[0]+"";n<r;){for(t=e[n++]+"",s=l-t.length;s--;t="0"+t);a+=t}for(r=a.length;48===a.charCodeAt(--r););return a.slice(0,r+1||1)}function g(e,t){var s,n,r=e.c,a=t.c,i=e.s,o=t.s,c=e.e,l=t.e;if(!i||!o)return null;if(s=r&&!r[0],n=a&&!a[0],s||n)return s?n?0:-o:i;if(i!=o)return i;if(s=i<0,n=c==l,!r||!a)return n?0:!r^s?1:-1;if(!n)return c>l^s?1:-1;for(o=(c=r.length)<(l=a.length)?c:l,i=0;i<o;i++)if(r[i]!=a[i])return r[i]>a[i]^s?1:-1;return c==l?0:c>l^s?1:-1}function b(e,t,s,n){if(e<t||e>s||e!==a(e))throw Error(i+(n||"Argument")+("number"==typeof e?e<t||e>s?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function S(e){var t=e.c.length-1;return m(e.e/l)==t&&e.c[t]%2!=0}function A(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function y(e,t,s){var n,r;if(t<0){for(r=s+".";++t;r+=s);e=r+e}else if(++t>(n=e.length)){for(r=s,t-=n;--t;r+=s);e+=r}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=function e(t){var s,E,C,_,T,k,w,I,v,N,P=q.prototype={constructor:q,toString:null,valueOf:null},j=new q(1),R=20,O=4,x=-7,D=21,M=-1e7,L=1e7,B=!1,F=1,U=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},W="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function q(e,t){var s,r,i,c,d,h,p,m,f=this;if(!(f instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>L?f.c=f.e=null:e.e<M?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>L?f.c=f.e=null:(f.e=c,f.c=[e]))}m=String(e)}else{if(!n.test(m=String(e)))return C(f,m,h);f.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(c=m.indexOf("."))>-1&&(m=m.replace(".","")),(d=m.search(/e/i))>0?(c<0&&(c=d),c+=+m.slice(d+1),m=m.substring(0,d)):c<0&&(c=m.length)}else{if(b(t,2,W.length,"Base"),10==t&&$)return z(f=new q(e),R+f.e+1,O);if(m=String(e),h="number"==typeof e){if(0*e!=0)return C(f,m,h,t);if(f.s=1/e<0?(m=m.slice(1),-1):1,q.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else f.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(s=W.slice(0,t),c=d=0,p=m.length;d<p;d++)if(s.indexOf(r=m.charAt(d))<0){if("."==r){if(d>c){c=p;continue}}else if(!i&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){i=!0,d=-1,c=0;continue}return C(f,String(e),h,t)}h=!1,(c=(m=E(m,t,10,f.s)).indexOf("."))>-1?m=m.replace(".",""):c=m.length}for(d=0;48===m.charCodeAt(d);d++);for(p=m.length;48===m.charCodeAt(--p););if(m=m.slice(d,++p)){if(p-=d,h&&q.DEBUG&&p>15&&(e>u||e!==a(e)))throw Error(o+f.s*e);if((c=c-d-1)>L)f.c=f.e=null;else if(c<M)f.c=[f.e=0];else{if(f.e=c,f.c=[],d=(c+1)%l,c<0&&(d+=l),d<p){for(d&&f.c.push(+m.slice(0,d)),p-=l;d<p;)f.c.push(+m.slice(d,d+=l));d=l-(m=m.slice(d)).length}else d-=p;for(;d--;m+="0");f.c.push(+m)}}else f.c=[f.e=0]}function V(e,t,s,n){var r,a,i,o,c;if(null==s?s=O:b(s,0,8),!e.c)return e.toString();if(r=e.c[0],i=e.e,null==t)c=f(e.c),c=1==n||2==n&&(i<=x||i>=D)?A(c,i):y(c,i,"0");else if(a=(e=z(new q(e),t,s)).e,o=(c=f(e.c)).length,1==n||2==n&&(t<=a||a<=x)){for(;o<t;c+="0",o++);c=A(c,a)}else if(t-=i,c=y(c,a,"0"),a+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=a-o)>0)for(a+1==o&&(c+=".");t--;c+="0");return e.s<0&&r?"-"+c:c}function G(e,t){for(var s,n,r=1,a=new q(e[0]);r<e.length;r++)(!(n=new q(e[r])).s||(s=g(a,n))===t||0===s&&a.s===t)&&(a=n);return a}function K(e,t,s){for(var n=1,r=t.length;!t[--r];t.pop());for(r=t[0];r>=10;r/=10,n++);return(s=n+s*l-1)>L?e.c=e.e=null:s<M?e.c=[e.e=0]:(e.e=s,e.c=t),e}function z(e,t,s,n){var i,o,u,h,p,m,f,g=e.c,b=d;if(g){e:{for(i=1,h=g[0];h>=10;h/=10,i++);if((o=t-i)<0)o+=l,u=t,p=g[m=0],f=a(p/b[i-u-1]%10);else if((m=r((o+1)/l))>=g.length){if(!n)break e;for(;g.length<=m;g.push(0));p=f=0,i=1,u=(o%=l)-l+1}else{for(p=h=g[m],i=1;h>=10;h/=10,i++);f=(u=(o%=l)-l+i)<0?0:a(p/b[i-u-1]%10)}if(n=n||t<0||null!=g[m+1]||(u<0?p:p%b[i-u-1]),n=s<4?(f||n)&&(0==s||s==(e.s<0?3:2)):f>5||5==f&&(4==s||n||6==s&&(o>0?u>0?p/b[i-u]:0:g[m-1])%10&1||s==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=b[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=m,h=1,m--):(g.length=m+1,h=b[l-o],g[m]=u>0?a(p/b[i-u]%b[u])*h:0),n)for(;;){if(0==m){for(o=1,u=g[0];u>=10;u/=10,o++);for(u=g[0]+=h,h=1;u>=10;u/=10,h++);o!=h&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[m]+=h,g[m]!=c)break;g[m--]=0,h=1}for(o=g.length;0===g[--o];g.pop());}e.e>L?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function Y(e){var t,s=e.e;return null===s?e.toString():(t=f(e.c),t=s<=x||s>=D?A(t,s):y(t,s,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,s;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(s=e[t],0,p,t),R=s),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(s=e[t],0,8,t),O=s),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((s=e[t])&&s.pop?(b(s[0],-p,0,t),b(s[1],0,p,t),x=s[0],D=s[1]):(b(s,-p,p,t),x=-(D=s<0?-s:s))),e.hasOwnProperty(t="RANGE"))if((s=e[t])&&s.pop)b(s[0],-p,-1,t),b(s[1],1,p,t),M=s[0],L=s[1];else{if(b(s,-p,p,t),!s)throw Error(i+t+" cannot be zero: "+s);M=-(L=s<0?-s:s)}if(e.hasOwnProperty(t="CRYPTO")){if((s=e[t])!==!!s)throw Error(i+t+" not true or false: "+s);if(s){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!s,Error(i+"crypto unavailable");B=s}else B=s}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(s=e[t],0,9,t),F=s),e.hasOwnProperty(t="POW_PRECISION")&&(b(s=e[t],0,p,t),U=s),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(s=e[t]))throw Error(i+t+" not an object: "+s);H=s}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(s=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(s))throw Error(i+t+" invalid: "+s);$="0123456789"==s.slice(0,10),W=s}}return{DECIMAL_PLACES:R,ROUNDING_MODE:O,EXPONENTIAL_AT:[x,D],RANGE:[M,L],CRYPTO:B,MODULO_MODE:F,POW_PRECISION:U,FORMAT:H,ALPHABET:W}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,s,n=e.c,r=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&r>=-p&&r<=p&&r===a(r)){if(0===n[0]){if(0===r&&1===n.length)return!0;break e}if((t=(r+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((s=n[t])<0||s>=c||s!==a(s))break e;if(0!==s)return!0}}}else if(null===n&&null===r&&(null===o||1===o||-1===o))return!0;throw Error(i+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return G(arguments,-1)},q.minimum=q.min=function(){return G(arguments,1)},q.random=(_=9007199254740992,T=Math.random()*_&2097151?function(){return a(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,s,n,o,c,u=0,h=[],m=new q(j);if(null==e?e=R:b(e,0,p),o=r(e/l),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(s=crypto.getRandomValues(new Uint32Array(2)),t[u]=s[0],t[u+1]=s[1]):(h.push(c%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw B=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(c%1e14),u+=7);u=o/7}if(!B)for(;u<o;)(c=T())<9e15&&(h[u++]=c%1e14);for(o=h[--u],e%=l,o&&e&&(c=d[l-e],h[u]=a(o/c)*c);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=l);for(u=1,c=h[0];c>=10;c/=10,u++);u<l&&(n-=l-u)}return m.e=n,m.c=h,m}),q.sum=function(){for(var e=1,t=arguments,s=new q(t[0]);e<t.length;)s=s.plus(t[e++]);return s},E=function(){var e="0123456789";function t(e,t,s,n){for(var r,a,i=[0],o=0,c=e.length;o<c;){for(a=i.length;a--;i[a]*=t);for(i[0]+=n.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>s-1&&(null==i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/s|0,i[r]%=s)}return i.reverse()}return function(n,r,a,i,o){var c,l,u,d,h,p,m,g,b=n.indexOf("."),S=R,A=O;for(b>=0&&(d=U,U=0,n=n.replace(".",""),p=(g=new q(r)).pow(n.length-b),U=d,g.c=t(y(f(p.c),p.e,"0"),10,a,e),g.e=g.c.length),u=d=(m=t(n,r,a,o?(c=W,e):(c=e,W))).length;0==m[--d];m.pop());if(!m[0])return c.charAt(0);if(b<0?--u:(p.c=m,p.e=u,p.s=i,m=(p=s(p,g,S,A,a)).c,h=p.r,u=p.e),b=m[l=u+S+1],d=a/2,h=h||l<0||null!=m[l+1],h=A<4?(null!=b||h)&&(0==A||A==(p.s<0?3:2)):b>d||b==d&&(4==A||h||6==A&&1&m[l-1]||A==(p.s<0?8:7)),l<1||!m[0])n=h?y(c.charAt(1),-S,c.charAt(0)):c.charAt(0);else{if(m.length=l,h)for(--a;++m[--l]>a;)m[l]=0,l||(++u,m=[1].concat(m));for(d=m.length;!m[--d];);for(b=0,n="";b<=d;n+=c.charAt(m[b++]));n=y(n,u,c.charAt(0))}return n}}(),s=function(){function e(e,t,s){var n,r,a,i,o=0,c=e.length,l=t%h,u=t/h|0;for(e=e.slice();c--;)o=((r=l*(a=e[c]%h)+(n=u*a+(i=e[c]/h|0)*l)%h*h+o)/s|0)+(n/h|0)+u*i,e[c]=r%s;return o&&(e=[o].concat(e)),e}function t(e,t,s,n){var r,a;if(s!=n)a=s>n?1:-1;else for(r=a=0;r<s;r++)if(e[r]!=t[r]){a=e[r]>t[r]?1:-1;break}return a}function s(e,t,s,n){for(var r=0;s--;)e[s]-=r,r=e[s]<t[s]?1:0,e[s]=r*n+e[s]-t[s];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,r,i,o,u){var d,h,p,f,g,b,S,A,y,E,C,_,T,k,w,I,v,N=n.s==r.s?1:-1,P=n.c,j=r.c;if(!(P&&P[0]&&j&&j[0]))return new q(n.s&&r.s&&(P?!j||P[0]!=j[0]:j)?P&&0==P[0]||!j?0*N:N/0:NaN);for(y=(A=new q(N)).c=[],N=i+(h=n.e-r.e)+1,u||(u=c,h=m(n.e/l)-m(r.e/l),N=N/l|0),p=0;j[p]==(P[p]||0);p++);if(j[p]>(P[p]||0)&&h--,N<0)y.push(1),f=!0;else{for(k=P.length,I=j.length,p=0,N+=2,(g=a(u/(j[0]+1)))>1&&(j=e(j,g,u),P=e(P,g,u),I=j.length,k=P.length),T=I,C=(E=P.slice(0,I)).length;C<I;E[C++]=0);v=j.slice(),v=[0].concat(v),w=j[0],j[1]>=u/2&&w++;do{if(g=0,(d=t(j,E,I,C))<0){if(_=E[0],I!=C&&(_=_*u+(E[1]||0)),(g=a(_/w))>1)for(g>=u&&(g=u-1),S=(b=e(j,g,u)).length,C=E.length;1==t(b,E,S,C);)g--,s(b,I<S?v:j,S,u),S=b.length,d=1;else 0==g&&(d=g=1),S=(b=j.slice()).length;if(S<C&&(b=[0].concat(b)),s(E,b,C,u),C=E.length,-1==d)for(;t(j,E,I,C)<1;)g++,s(E,I<C?v:j,C,u),C=E.length}else 0===d&&(g++,E=[0]);y[p++]=g,E[0]?E[C++]=P[T]||0:(E=[P[T]],C=1)}while((T++<k||null!=E[0])&&N--);f=null!=E[0],y[0]||y.splice(0,1)}if(u==c){for(p=1,N=y[0];N>=10;N/=10,p++);z(A,i+(A.e=p+h*l-1)+1,o,f)}else A.e=h,A.r=+f;return A}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,I=/^\.([^.]+)$/,v=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,C=function(e,t,s,n){var r,a=s?t:t.replace(N,"");if(v.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!s&&(a=a.replace(k,function(e,t,s){return r="x"==(s=s.toLowerCase())?16:"b"==s?2:8,n&&n!=r?e:t}),n&&(r=n,a=a.replace(w,"$1").replace(I,"0.$1")),t!=a))return new q(a,r);if(q.DEBUG)throw Error(i+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},P.absoluteValue=P.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},P.comparedTo=function(e,t){return g(this,new q(e,t))},P.decimalPlaces=P.dp=function(e,t){var s,n,r,a=this;if(null!=e)return b(e,0,p),null==t?t=O:b(t,0,8),z(new q(a),e+a.e+1,t);if(!(s=a.c))return null;if(n=((r=s.length-1)-m(this.e/l))*l,r=s[r])for(;r%10==0;r/=10,n--);return n<0&&(n=0),n},P.dividedBy=P.div=function(e,t){return s(this,new q(e,t),R,O)},P.dividedToIntegerBy=P.idiv=function(e,t){return s(this,new q(e,t),0,1)},P.exponentiatedBy=P.pow=function(e,t){var s,n,o,c,u,d,h,p,m=this;if((e=new q(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new q(t)),u=e.e>14,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return p=new q(Math.pow(+Y(m),u?e.s*(2-S(e)):+Y(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(n=!d&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||u&&m.c[1]>=24e7:m.c[0]<8e13||u&&m.c[0]<=9999975e7)))return c=m.s<0&&S(e)?-0:0,m.e>-1&&(c=1/c),new q(d?1/c:c);U&&(c=r(U/l+2))}for(u?(s=new q(.5),d&&(e.s=1),h=S(e)):h=(o=Math.abs(+Y(e)))%2,p=new q(j);;){if(h){if(!(p=p.times(m)).c)break;c?p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}if(o){if(0===(o=a(o/2)))break;h=o%2}else if(z(e=e.times(s),e.e+1,1),e.e>14)h=S(e);else{if(0===(o=+Y(e)))break;h=o%2}m=m.times(m),c?m.c&&m.c.length>c&&(m.c.length=c):n&&(m=m.mod(t))}return n?p:(d&&(p=j.div(p)),t?p.mod(t):c?z(p,U,O,undefined):p)},P.integerValue=function(e){var t=new q(this);return null==e?e=O:b(e,0,8),z(t,t.e+1,e)},P.isEqualTo=P.eq=function(e,t){return 0===g(this,new q(e,t))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(e,t){return g(this,new q(e,t))>0},P.isGreaterThanOrEqualTo=P.gte=function(e,t){return 1===(t=g(this,new q(e,t)))||0===t},P.isInteger=function(){return!!this.c&&m(this.e/l)>this.c.length-2},P.isLessThan=P.lt=function(e,t){return g(this,new q(e,t))<0},P.isLessThanOrEqualTo=P.lte=function(e,t){return-1===(t=g(this,new q(e,t)))||0===t},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(e,t){var s,n,r,a,i=this,o=i.s;if(t=(e=new q(e,t)).s,!o||!t)return new q(NaN);if(o!=t)return e.s=-t,i.plus(e);var u=i.e/l,d=e.e/l,h=i.c,p=e.c;if(!u||!d){if(!h||!p)return h?(e.s=-t,e):new q(p?i:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new q(h[0]?i:3==O?-0:0)}if(u=m(u),d=m(d),h=h.slice(),o=u-d){for((a=o<0)?(o=-o,r=h):(d=u,r=p),r.reverse(),t=o;t--;r.push(0));r.reverse()}else for(n=(a=(o=h.length)<(t=p.length))?o:t,o=t=0;t<n;t++)if(h[t]!=p[t]){a=h[t]<p[t];break}if(a&&(r=h,h=p,p=r,e.s=-e.s),(t=(n=p.length)-(s=h.length))>0)for(;t--;h[s++]=0);for(t=c-1;n>o;){if(h[--n]<p[n]){for(s=n;s&&!h[--s];h[s]=t);--h[s],h[n]+=c}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--d);return h[0]?K(e,h,d):(e.s=3==O?-1:1,e.c=[e.e=0],e)},P.modulo=P.mod=function(e,t){var n,r,a=this;return e=new q(e,t),!a.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||a.c&&!a.c[0]?new q(a):(9==F?(r=e.s,e.s=1,n=s(a,e,0,3),e.s=r,n.s*=r):n=s(a,e,0,F),(e=a.minus(n.times(e))).c[0]||1!=F||(e.s=a.s),e)},P.multipliedBy=P.times=function(e,t){var s,n,r,a,i,o,u,d,p,f,g,b,S,A,y,E=this,C=E.c,_=(e=new q(e,t)).c;if(!(C&&_&&C[0]&&_[0]))return!E.s||!e.s||C&&!C[0]&&!_||_&&!_[0]&&!C?e.c=e.e=e.s=null:(e.s*=E.s,C&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=m(E.e/l)+m(e.e/l),e.s*=E.s,(u=C.length)<(f=_.length)&&(S=C,C=_,_=S,r=u,u=f,f=r),r=u+f,S=[];r--;S.push(0));for(A=c,y=h,r=f;--r>=0;){for(s=0,g=_[r]%y,b=_[r]/y|0,a=r+(i=u);a>r;)s=((d=g*(d=C[--i]%y)+(o=b*d+(p=C[i]/y|0)*g)%y*y+S[a]+s)/A|0)+(o/y|0)+b*p,S[a--]=d%A;S[a]=s}return s?++n:S.splice(0,1),K(e,S,n)},P.negated=function(){var e=new q(this);return e.s=-e.s||null,e},P.plus=function(e,t){var s,n=this,r=n.s;if(t=(e=new q(e,t)).s,!r||!t)return new q(NaN);if(r!=t)return e.s=-t,n.minus(e);var a=n.e/l,i=e.e/l,o=n.c,u=e.c;if(!a||!i){if(!o||!u)return new q(r/0);if(!o[0]||!u[0])return u[0]?e:new q(o[0]?n:0*r)}if(a=m(a),i=m(i),o=o.slice(),r=a-i){for(r>0?(i=a,s=u):(r=-r,s=o),s.reverse();r--;s.push(0));s.reverse()}for((r=o.length)-(t=u.length)<0&&(s=u,u=o,o=s,t=r),r=0;t;)r=(o[--t]=o[t]+u[t]+r)/c|0,o[t]=c===o[t]?0:o[t]%c;return r&&(o=[r].concat(o),++i),K(e,o,i)},P.precision=P.sd=function(e,t){var s,n,r,a=this;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=O:b(t,0,8),z(new q(a),e,t);if(!(s=a.c))return null;if(n=(r=s.length-1)*l+1,r=s[r]){for(;r%10==0;r/=10,n--);for(r=s[0];r>=10;r/=10,n++);}return e&&a.e+1>n&&(n=a.e+1),n},P.shiftedBy=function(e){return b(e,-9007199254740991,u),this.times("1e"+e)},P.squareRoot=P.sqrt=function(){var e,t,n,r,a,i=this,o=i.c,c=i.s,l=i.e,u=R+4,d=new q("0.5");if(1!==c||!o||!o[0])return new q(!c||c<0&&(!o||o[0])?NaN:o?i:1/0);if(0==(c=Math.sqrt(+Y(i)))||c==1/0?(((t=f(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=m((l+1)/2)-(l<0||l%2),n=new q(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new q(c+""),n.c[0])for((c=(l=n.e)+u)<3&&(c=0);;)if(a=n,n=d.times(a.plus(s(i,a,u,1))),f(a.c).slice(0,c)===(t=f(n.c)).slice(0,c)){if(n.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(n,n.e+R+2,1),e=!n.times(n).eq(i));break}if(!r&&(z(a,a.e+R+2,0),a.times(a).eq(i))){n=a;break}u+=4,c+=4,r=1}return z(n,n.e+R+1,O,e)},P.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),V(this,e,t,1)},P.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),V(this,e,t)},P.toFormat=function(e,t,s){var n,r=this;if(null==s)null!=e&&t&&"object"==typeof t?(s=t,t=null):e&&"object"==typeof e?(s=e,e=t=null):s=H;else if("object"!=typeof s)throw Error(i+"Argument not an object: "+s);if(n=r.toFixed(e,t),r.c){var a,o=n.split("."),c=+s.groupSize,l=+s.secondaryGroupSize,u=s.groupSeparator||"",d=o[0],h=o[1],p=r.s<0,m=p?d.slice(1):d,f=m.length;if(l&&(a=c,c=l,l=a,f-=a),c>0&&f>0){for(a=f%c||c,d=m.substr(0,a);a<f;a+=c)d+=u+m.substr(a,c);l>0&&(d+=u+m.slice(a)),p&&(d="-"+d)}n=h?d+(s.decimalSeparator||"")+((l=+s.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(s.fractionGroupSeparator||"")):h):d}return(s.prefix||"")+n+(s.suffix||"")},P.toFraction=function(e){var t,n,r,a,o,c,u,h,p,m,g,b,S=this,A=S.c;if(null!=e&&(!(u=new q(e)).isInteger()&&(u.c||1!==u.s)||u.lt(j)))throw Error(i+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Y(u));if(!A)return new q(S);for(t=new q(j),p=n=new q(j),r=h=new q(j),b=f(A),o=t.e=b.length-S.e-1,t.c[0]=d[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:p:u,c=L,L=1/0,u=new q(b),h.c[0]=0;m=s(u,t,0,1),1!=(a=n.plus(m.times(r))).comparedTo(e);)n=r,r=a,p=h.plus(m.times(a=p)),h=a,t=u.minus(m.times(a=t)),u=a;return a=s(e.minus(n),r,0,1),h=h.plus(a.times(p)),n=n.plus(a.times(r)),h.s=p.s=S.s,g=s(p,r,o*=2,O).minus(S).abs().comparedTo(s(h,n,o,O).minus(S).abs())<1?[p,r]:[h,n],L=c,g},P.toNumber=function(){return+Y(this)},P.toPrecision=function(e,t){return null!=e&&b(e,1,p),V(this,e,t,2)},P.toString=function(e){var t,s=this,n=s.s,r=s.e;return null===r?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=r<=x||r>=D?A(f(s.c),r):y(f(s.c),r,"0"):10===e&&$?t=y(f((s=z(new q(s),R+r+1,O)).c),s.e,"0"):(b(e,2,W.length,"Base"),t=E(y(f(s.c),r,"0"),10,e,n,!0)),n<0&&s.c[0]&&(t="-"+t)),t},P.valueOf=P.toJSON=function(){return Y(this)},P._isBigNumber=!0,null!=t&&q.set(t),q}(),s.default=s.BigNumber=s,"function"==typeof define&&define.amd?define(function(){return s}):void 0!==t&&t.exports?t.exports=s:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=s)}(this)}}},{package:"@metamask/bridge-controller>bignumber.js",file:"node_modules/@metamask/bridge-controller/node_modules/bignumber.js/bignumber.js"}],[1608,{"./constants.cjs":1609,"./operators/caip-permission-operator-accounts.cjs":1611,"./operators/caip-permission-operator-permittedChains.cjs":1612,"./scope/assert.cjs":1614,"./scope/supported.cjs":1619,"./scope/transform.cjs":1620,"./scope/types.cjs":1621,"@metamask/permission-controller":2862,"@metamask/utils":3554,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.requestPermittedChainsPermissionIncremental=s.getCaip25PermissionFromLegacyPermissions=s.getCaip25CaveatFromPermission=s.generateCaip25Caveat=s.Caip25CaveatMutators=s.caip25EndowmentBuilder=s.caip25CaveatBuilder=s.diffScopesForCaip25CaveatValue=s.createCaip25Caveat=s.Caip25EndowmentPermissionName=s.Caip25CaveatType=void 0;const n=e("@metamask/permission-controller"),r=e("@metamask/utils"),a=e("lodash"),i=e("./constants.cjs"),o=e("./operators/caip-permission-operator-accounts.cjs"),c=e("./operators/caip-permission-operator-permittedChains.cjs"),l=e("./scope/assert.cjs"),u=e("./scope/supported.cjs"),d=e("./scope/transform.cjs"),h=e("./scope/types.cjs");s.Caip25CaveatType="authorizedScopes",s.Caip25EndowmentPermissionName="endowment:caip25";function p(e,t,s){const n=(0,a.cloneDeep)(e),r=t[s];for(const[e,t]of Object.entries(r)){const r=e,a=n[s][r];if(a){const e=t.accounts.filter(e=>!a?.accounts.includes(e));if(e.length>0){n[s][r]={accounts:e};continue}delete n[s][r]}else n[s][r]=t}return n}function m(e,t,s){return Object.values(e).every(e=>e.accounts.every(e=>(0,u.isSupportedAccount)(e,{getEvmInternalAccounts:t,getNonEvmAccountAddresses:s})))}s.createCaip25Caveat=e=>({type:s.Caip25CaveatType,value:e}),s.diffScopesForCaip25CaveatValue=p;s.caip25CaveatBuilder=({findNetworkClientIdByChainId:e,listAccounts:t,isNonEvmScopeSupported:n,getNonEvmAccountAddresses:a})=>({type:s.Caip25CaveatType,validator:(i,o,c)=>{if(!(i.value&&(0,r.hasProperty)(i.value,"requiredScopes")&&(0,r.hasProperty)(i.value,"optionalScopes")&&(0,r.hasProperty)(i.value,"isMultichainOrigin")&&(0,r.hasProperty)(i.value,"sessionProperties")&&"boolean"==typeof i.value.isMultichainOrigin&&(0,r.isObject)(i.value.sessionProperties)))throw new Error(`${s.Caip25EndowmentPermissionName} error: Received invalid value for caveat of type "${s.Caip25CaveatType}".`);const{requiredScopes:d,optionalScopes:h,sessionProperties:p}=i.value;if(!Object.keys(p).every(e=>(0,u.isSupportedSessionProperty)(e)))throw new Error(`${s.Caip25EndowmentPermissionName} error: Received unknown session property(s) for caveat of type "${s.Caip25CaveatType}".`);if((0,l.assertIsInternalScopesObject)(d),(0,l.assertIsInternalScopesObject)(h),0===Object.keys(d).length&&0===Object.keys(h).length)throw new Error(`${s.Caip25EndowmentPermissionName} error: Received no scopes for caveat of type "${s.Caip25CaveatType}".`);const f=t=>{try{return e(t),!0}catch{return!1}},g=Object.keys({...d,...h}).filter(e=>!(0,u.isSupportedScopeString)(e,{isEvmChainIdSupported:f,isNonEvmScopeSupported:n}));if(g.length>0)throw new Error(`${s.Caip25EndowmentPermissionName} error: Received scopeString value(s): ${g.join(", ")} for caveat of type "${s.Caip25CaveatType}" that are not supported by the wallet.`);const b=m(d,t,a),S=m(h,t,a);if(!b||!S)throw new Error(`${s.Caip25EndowmentPermissionName} error: Received account value(s) for caveat of type "${s.Caip25CaveatType}" that are not supported by the wallet.`)},merger:(e,t)=>{const s={requiredScopes:(0,d.mergeInternalScopes)(e.requiredScopes,t.requiredScopes),optionalScopes:(0,d.mergeInternalScopes)(e.optionalScopes,t.optionalScopes),sessionProperties:{...e.sessionProperties,...t.sessionProperties},isMultichainOrigin:e.isMultichainOrigin},n=p(e,s,"requiredScopes");return[s,p(n,s,"optionalScopes")]}});s.caip25EndowmentBuilder=Object.freeze({targetName:s.Caip25EndowmentPermissionName,specificationBuilder:()=>({permissionType:n.PermissionType.Endowment,targetName:s.Caip25EndowmentPermissionName,allowedCaveats:[s.Caip25CaveatType],endowmentGetter:e=>null,validator:e=>{if(1!==e.caveats?.length||e.caveats?.[0]?.type!==s.Caip25CaveatType)throw new Error(`${s.Caip25EndowmentPermissionName} error: Invalid caveats. There must be a single caveat of type "${s.Caip25CaveatType}".`)}})}),s.Caip25CaveatMutators={[s.Caip25CaveatType]:{removeScope:function(e,t){const s=Object.entries(e.requiredScopes).filter(([e])=>e!==t),a=Object.entries(e.optionalScopes).filter(([e])=>e!==t),i=s.length!==Object.keys(e.requiredScopes).length,o=a.length!==Object.keys(e.optionalScopes).length;if(!i&&!o)return{operation:n.CaveatMutatorOperation.Noop};const c={...e,requiredScopes:Object.fromEntries(s),optionalScopes:Object.fromEntries(a)};if([...s,...a].some(([e])=>{const{namespace:t}=(0,h.parseScopeString)(e);return t!==r.KnownCaipNamespace.Wallet}))return{operation:n.CaveatMutatorOperation.UpdateValue,value:c};return{operation:n.CaveatMutatorOperation.RevokePermission}},removeAccount:function(e,t){const s=(0,a.cloneDeep)(e);[s.requiredScopes,s.optionalScopes].forEach(e=>{Object.entries(e).forEach(([,e])=>{!function(e,t){e.accounts&&(e.accounts=e.accounts.filter(function(e){return t=>(0,r.parseCaipAccountId)(t).address!==e}(t)))}(e,t)})});if((0,a.isEqual)(s,e))return{operation:n.CaveatMutatorOperation.Noop};if([...Object.values(s.requiredScopes),...Object.values(s.optionalScopes)].some(({accounts:e})=>e.length>0))return{operation:n.CaveatMutatorOperation.UpdateValue,value:s};return{operation:n.CaveatMutatorOperation.RevokePermission}}}};s.generateCaip25Caveat=(e,t,n)=>{const r=(0,c.setChainIdsInCaip25CaveatValue)(e,n),a=(0,o.setNonSCACaipAccountIdsInCaip25CaveatValue)(r,t);return{[s.Caip25EndowmentPermissionName]:{caveats:[{type:s.Caip25CaveatType,value:a}]}}},s.getCaip25CaveatFromPermission=function(e){return e?.caveats.find(e=>e.type===s.Caip25CaveatType)};s.getCaip25PermissionFromLegacyPermissions=e=>{const t=(0,a.pick)(e,[i.PermissionKeys.eth_accounts,i.PermissionKeys.permittedChains]);t[i.PermissionKeys.eth_accounts]||(t[i.PermissionKeys.eth_accounts]={}),t[i.PermissionKeys.permittedChains]||(t[i.PermissionKeys.permittedChains]={});const n=t[i.PermissionKeys.eth_accounts]?.caveats?.find(e=>e.type===i.CaveatTypes.restrictReturnedAccounts)?.value??[],r=t[i.PermissionKeys.permittedChains]?.caveats?.find(e=>e.type===i.CaveatTypes.restrictNetworkSwitching)?.value??[],l=(0,c.setPermittedEthChainIds)({requiredScopes:{},optionalScopes:{"wallet:eip155":{accounts:[]}},sessionProperties:{},isMultichainOrigin:!1},r),u=(0,o.setEthAccounts)(l,n);return{[s.Caip25EndowmentPermissionName]:{caveats:[{type:s.Caip25CaveatType,value:u}]}}};s.requestPermittedChainsPermissionIncremental=async({origin:e,chainId:t,autoApprove:n,hooks:r,metadata:a})=>{const i=(0,c.setPermittedEthChainIds)({requiredScopes:{},optionalScopes:{},sessionProperties:{},isMultichainOrigin:!1},[t]);if(!n){let t;return a&&(t={metadata:a}),void await r.requestPermissionsIncremental({origin:e},{[s.Caip25EndowmentPermissionName]:{caveats:[{type:s.Caip25CaveatType,value:i}]}},t)}r.grantPermissionsIncremental({subject:{origin:e},approvedPermissions:{[s.Caip25EndowmentPermissionName]:{caveats:[{type:s.Caip25CaveatType,value:i}]}}})}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/caip25Permission.cjs"}],[1609,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.PermissionKeys=s.CaveatTypes=void 0,s.CaveatTypes=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts",restrictNetworkSwitching:"restrictNetworkSwitching"}),s.PermissionKeys=Object.freeze({eth_accounts:"eth_accounts",permittedChains:"endowment:permitted-chains"})}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/constants.cjs"}],[1610,{"./caip25Permission.cjs":1608,"./operators/caip-permission-operator-accounts.cjs":1611,"./operators/caip-permission-operator-permittedChains.cjs":1612,"./operators/caip-permission-operator-session-scopes.cjs":1613,"./scope/assert.cjs":1614,"./scope/authorization.cjs":1615,"./scope/constants.cjs":1616,"./scope/errors.cjs":1617,"./scope/filter.cjs":1618,"./scope/transform.cjs":1620,"./scope/types.cjs":1621},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Caip25Errors=s.KnownSessionProperties=s.requestPermittedChainsPermissionIncremental=s.getCaip25PermissionFromLegacyPermissions=s.getCaip25CaveatFromPermission=s.generateCaip25Caveat=s.Caip25CaveatMutators=s.caip25EndowmentBuilder=s.Caip25EndowmentPermissionName=s.createCaip25Caveat=s.Caip25CaveatType=s.caip25CaveatBuilder=s.normalizeAndMergeScopes=s.mergeInternalScopes=s.mergeNormalizedScopes=s.mergeScopeObject=s.normalizeScope=s.getUniqueArrayItems=s.parseScopeString=s.getSupportedScopeObjects=s.isKnownSessionPropertyValue=s.KnownWalletScopeString=s.KnownNotifications=s.KnownWalletNamespaceRpcMethods=s.KnownRpcMethods=s.KnownWalletRpcMethods=s.assertIsInternalScopeString=s.isNamespaceInScopesObject=s.bucketScopes=s.validateAndNormalizeScopes=s.getPermittedAccountsForScopes=s.getSessionScopes=s.getInternalScopesObject=s.getAllScopesFromScopesObjects=s.getAllScopesFromCaip25CaveatValue=s.getAllScopesFromPermission=s.getAllNamespacesFromCaip25CaveatValue=s.addCaipChainIdInCaip25CaveatValue=s.setChainIdsInCaip25CaveatValue=s.setPermittedEthChainIds=s.addPermittedEthChainId=s.getPermittedEthChainIds=s.isCaipAccountIdInPermittedAccountIds=s.isInternalAccountInPermittedAccountIds=s.getCaipAccountIdsFromCaip25CaveatValue=s.getCaipAccountIdsFromScopesObjects=s.setNonSCACaipAccountIdsInCaip25CaveatValue=s.setEthAccounts=s.getEthAccounts=void 0;var n=e("./operators/caip-permission-operator-accounts.cjs");Object.defineProperty(s,"getEthAccounts",{enumerable:!0,get:function(){return n.getEthAccounts}}),Object.defineProperty(s,"setEthAccounts",{enumerable:!0,get:function(){return n.setEthAccounts}}),Object.defineProperty(s,"setNonSCACaipAccountIdsInCaip25CaveatValue",{enumerable:!0,get:function(){return n.setNonSCACaipAccountIdsInCaip25CaveatValue}}),Object.defineProperty(s,"getCaipAccountIdsFromScopesObjects",{enumerable:!0,get:function(){return n.getCaipAccountIdsFromScopesObjects}}),Object.defineProperty(s,"getCaipAccountIdsFromCaip25CaveatValue",{enumerable:!0,get:function(){return n.getCaipAccountIdsFromCaip25CaveatValue}}),Object.defineProperty(s,"isInternalAccountInPermittedAccountIds",{enumerable:!0,get:function(){return n.isInternalAccountInPermittedAccountIds}}),Object.defineProperty(s,"isCaipAccountIdInPermittedAccountIds",{enumerable:!0,get:function(){return n.isCaipAccountIdInPermittedAccountIds}});var r=e("./operators/caip-permission-operator-permittedChains.cjs");Object.defineProperty(s,"getPermittedEthChainIds",{enumerable:!0,get:function(){return r.getPermittedEthChainIds}}),Object.defineProperty(s,"addPermittedEthChainId",{enumerable:!0,get:function(){return r.addPermittedEthChainId}}),Object.defineProperty(s,"setPermittedEthChainIds",{enumerable:!0,get:function(){return r.setPermittedEthChainIds}}),Object.defineProperty(s,"setChainIdsInCaip25CaveatValue",{enumerable:!0,get:function(){return r.setChainIdsInCaip25CaveatValue}}),Object.defineProperty(s,"addCaipChainIdInCaip25CaveatValue",{enumerable:!0,get:function(){return r.addCaipChainIdInCaip25CaveatValue}}),Object.defineProperty(s,"getAllNamespacesFromCaip25CaveatValue",{enumerable:!0,get:function(){return r.getAllNamespacesFromCaip25CaveatValue}}),Object.defineProperty(s,"getAllScopesFromPermission",{enumerable:!0,get:function(){return r.getAllScopesFromPermission}}),Object.defineProperty(s,"getAllScopesFromCaip25CaveatValue",{enumerable:!0,get:function(){return r.getAllScopesFromCaip25CaveatValue}}),Object.defineProperty(s,"getAllScopesFromScopesObjects",{enumerable:!0,get:function(){return r.getAllScopesFromScopesObjects}});var a=e("./operators/caip-permission-operator-session-scopes.cjs");Object.defineProperty(s,"getInternalScopesObject",{enumerable:!0,get:function(){return a.getInternalScopesObject}}),Object.defineProperty(s,"getSessionScopes",{enumerable:!0,get:function(){return a.getSessionScopes}}),Object.defineProperty(s,"getPermittedAccountsForScopes",{enumerable:!0,get:function(){return a.getPermittedAccountsForScopes}});var i=e("./scope/authorization.cjs");Object.defineProperty(s,"validateAndNormalizeScopes",{enumerable:!0,get:function(){return i.validateAndNormalizeScopes}}),Object.defineProperty(s,"bucketScopes",{enumerable:!0,get:function(){return i.bucketScopes}}),Object.defineProperty(s,"isNamespaceInScopesObject",{enumerable:!0,get:function(){return i.isNamespaceInScopesObject}});var o=e("./scope/assert.cjs");Object.defineProperty(s,"assertIsInternalScopeString",{enumerable:!0,get:function(){return o.assertIsInternalScopeString}});var c=e("./scope/constants.cjs");Object.defineProperty(s,"KnownWalletRpcMethods",{enumerable:!0,get:function(){return c.KnownWalletRpcMethods}}),Object.defineProperty(s,"KnownRpcMethods",{enumerable:!0,get:function(){return c.KnownRpcMethods}}),Object.defineProperty(s,"KnownWalletNamespaceRpcMethods",{enumerable:!0,get:function(){return c.KnownWalletNamespaceRpcMethods}}),Object.defineProperty(s,"KnownNotifications",{enumerable:!0,get:function(){return c.KnownNotifications}}),Object.defineProperty(s,"KnownWalletScopeString",{enumerable:!0,get:function(){return c.KnownWalletScopeString}}),Object.defineProperty(s,"isKnownSessionPropertyValue",{enumerable:!0,get:function(){return c.isKnownSessionPropertyValue}});var l=e("./scope/filter.cjs");Object.defineProperty(s,"getSupportedScopeObjects",{enumerable:!0,get:function(){return l.getSupportedScopeObjects}});var u=e("./scope/types.cjs");Object.defineProperty(s,"parseScopeString",{enumerable:!0,get:function(){return u.parseScopeString}});var d=e("./scope/transform.cjs");Object.defineProperty(s,"getUniqueArrayItems",{enumerable:!0,get:function(){return d.getUniqueArrayItems}}),Object.defineProperty(s,"normalizeScope",{enumerable:!0,get:function(){return d.normalizeScope}}),Object.defineProperty(s,"mergeScopeObject",{enumerable:!0,get:function(){return d.mergeScopeObject}}),Object.defineProperty(s,"mergeNormalizedScopes",{enumerable:!0,get:function(){return d.mergeNormalizedScopes}}),Object.defineProperty(s,"mergeInternalScopes",{enumerable:!0,get:function(){return d.mergeInternalScopes}}),Object.defineProperty(s,"normalizeAndMergeScopes",{enumerable:!0,get:function(){return d.normalizeAndMergeScopes}});var h=e("./caip25Permission.cjs");Object.defineProperty(s,"caip25CaveatBuilder",{enumerable:!0,get:function(){return h.caip25CaveatBuilder}}),Object.defineProperty(s,"Caip25CaveatType",{enumerable:!0,get:function(){return h.Caip25CaveatType}}),Object.defineProperty(s,"createCaip25Caveat",{enumerable:!0,get:function(){return h.createCaip25Caveat}}),Object.defineProperty(s,"Caip25EndowmentPermissionName",{enumerable:!0,get:function(){return h.Caip25EndowmentPermissionName}}),Object.defineProperty(s,"caip25EndowmentBuilder",{enumerable:!0,get:function(){return h.caip25EndowmentBuilder}}),Object.defineProperty(s,"Caip25CaveatMutators",{enumerable:!0,get:function(){return h.Caip25CaveatMutators}}),Object.defineProperty(s,"generateCaip25Caveat",{enumerable:!0,get:function(){return h.generateCaip25Caveat}}),Object.defineProperty(s,"getCaip25CaveatFromPermission",{enumerable:!0,get:function(){return h.getCaip25CaveatFromPermission}}),Object.defineProperty(s,"getCaip25PermissionFromLegacyPermissions",{enumerable:!0,get:function(){return h.getCaip25PermissionFromLegacyPermissions}}),Object.defineProperty(s,"requestPermittedChainsPermissionIncremental",{enumerable:!0,get:function(){return h.requestPermittedChainsPermissionIncremental}});var p=e("./scope/constants.cjs");Object.defineProperty(s,"KnownSessionProperties",{enumerable:!0,get:function(){return p.KnownSessionProperties}});var m=e("./scope/errors.cjs");Object.defineProperty(s,"Caip25Errors",{enumerable:!0,get:function(){return m.Caip25Errors}})}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/index.cjs"}],[1611,{"../scope/constants.cjs":1616,"../scope/transform.cjs":1620,"../scope/types.cjs":1621,"@metamask/controller-utils":1639,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isCaipAccountIdInPermittedAccountIds=s.isInternalAccountInPermittedAccountIds=s.setNonSCACaipAccountIdsInCaip25CaveatValue=s.getCaipAccountIdsFromCaip25CaveatValue=s.getCaipAccountIdsFromScopesObjects=s.setEthAccounts=s.getEthAccounts=void 0;const n=e("@metamask/controller-utils"),r=e("@metamask/utils"),a=e("../scope/constants.cjs"),i=e("../scope/transform.cjs"),o=e("../scope/types.cjs"),c=e=>{const{namespace:t}=(0,o.parseScopeString)(e);return t===r.KnownCaipNamespace.Eip155||e===a.KnownWalletScopeString.Eip155},l=e=>{const t=[];return Object.entries(e).forEach(([e,{accounts:s}])=>{s?.forEach(e=>{const{address:s,chainId:n}=(0,r.parseCaipAccountId)(e);c(n)&&((0,r.assertIsStrictHexString)(s),t.push(s))})}),t};s.getEthAccounts=e=>{const{requiredScopes:t,optionalScopes:s}=e,n=[...l(t),...l(s)];return(0,i.getUniqueArrayItems)(n)};const u=(e,t)=>{const s={};return Object.entries(e).forEach(([e,n])=>{const a=e,i=a===r.KnownCaipNamespace.Wallet,{namespace:l,reference:u}=(0,o.parseScopeString)(a);if(!c(a)&&!i)return void(s[a]=n);let d=[];l&&u&&(d=t.map(e=>`${l}:${u}:${e}`)),s[a]={...n,accounts:d}}),s};function d(e){const t=new Set;for(const s of e)for(const{accounts:e}of Object.values(s))for(const s of e)t.add(s);return Array.from(t)}s.setEthAccounts=(e,t)=>({...e,requiredScopes:u(e.requiredScopes,t),optionalScopes:u(e.optionalScopes,t)}),s.getCaipAccountIdsFromScopesObjects=d,s.getCaipAccountIdsFromCaip25CaveatValue=function(e){return d([e.requiredScopes,e.optionalScopes])};const h=(e,t)=>{const s=new Map;for(const e of t){const{chain:{namespace:t},address:n}=(0,r.parseCaipAccountId)(e);s.has(t)||s.set(t,new Set),s.get(t)?.add(n)}const n={};for(const[t,r]of Object.entries(e)){const{namespace:e,reference:a}=(0,o.parseScopeString)(t);let c=[];if(e&&a&&s.has(e)){const t=s.get(e);t&&(c=Array.from(t).map(t=>`${e}:${a}:${t}`))}n[t]={...r,accounts:(0,i.getUniqueArrayItems)(c)}}return n};function p(e,t,s){return!!(e&&t.length&&s.length)&&s.some(s=>{const a=(0,r.parseCaipAccountId)(s);return t.some(({namespace:t,reference:s})=>(t===a.chain.namespace||a.chain.namespace===r.KnownCaipNamespace.Wallet)&&((a.chain.namespace!==r.KnownCaipNamespace.Wallet||t===a.chain.reference)&&(t===r.KnownCaipNamespace.Eip155?("0"===s||s===a.chain.reference)&&(0,n.isEqualCaseInsensitive)(e,a.address):(a.chain.namespace===r.KnownCaipNamespace.Wallet||s===a.chain.reference)&&e===a.address)))})}s.setNonSCACaipAccountIdsInCaip25CaveatValue=(e,t)=>({...e,requiredScopes:h(e.requiredScopes,t),optionalScopes:h(e.optionalScopes,t)}),s.isInternalAccountInPermittedAccountIds=function(e,t){if(!e?.scopes?.length)return!1;const s=e.scopes.map(e=>(0,o.parseScopeString)(e));return p(e.address,s,t)},s.isCaipAccountIdInPermittedAccountIds=function(e,t){const{address:s,chain:n}=(0,r.parseCaipAccountId)(e);return p(s,[n],t)}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/operators/caip-permission-operator-accounts.cjs"}],[1612,{"../caip25Permission.cjs":1608,"../scope/transform.cjs":1620,"../scope/types.cjs":1621,"@metamask/controller-utils":1639,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.setChainIdsInCaip25CaveatValue=s.addCaipChainIdInCaip25CaveatValue=s.getAllScopesFromPermission=s.getAllNamespacesFromCaip25CaveatValue=s.getAllScopesFromCaip25CaveatValue=s.getAllScopesFromScopesObjects=s.setPermittedEthChainIds=s.addPermittedEthChainId=s.getPermittedEthChainIds=void 0;const n=e("@metamask/controller-utils"),r=e("@metamask/utils"),a=e("../caip25Permission.cjs"),i=e("../scope/transform.cjs"),o=e("../scope/types.cjs"),c=e=>{const t=[];return Object.keys(e).forEach(e=>{const{namespace:s,reference:a}=(0,o.parseScopeString)(e);s===r.KnownCaipNamespace.Eip155&&a&&t.push((0,n.toHex)(a))}),t};s.getPermittedEthChainIds=e=>{const{requiredScopes:t,optionalScopes:s}=e,n=[...c(t),...c(s)];return(0,i.getUniqueArrayItems)(n)};s.addPermittedEthChainId=(e,t)=>{const s=`eip155:${(0,r.hexToBigInt)(t).toString(10)}`;return Object.keys(e.requiredScopes).includes(s)||Object.keys(e.optionalScopes).includes(s)?e:{...e,optionalScopes:{...e.optionalScopes,[s]:{accounts:[]}}}};const l=(e,t)=>{const s={};return Object.entries(e).forEach(([e,a])=>{const i=e,{namespace:c,reference:l}=(0,o.parseScopeString)(i);if(l)if(c===r.KnownCaipNamespace.Eip155){const e=(0,n.toHex)(l);t.includes(e)&&(s[i]=a)}else s[i]=a;else s[i]=a}),s};function u(e){const t=new Set;for(const s of e)for(const e of Object.keys(s))t.add(e);return Array.from(t)}function d(e){return u([e.requiredScopes,e.optionalScopes])}s.setPermittedEthChainIds=(e,t)=>{let n={...e,requiredScopes:l(e.requiredScopes,t),optionalScopes:l(e.optionalScopes,t)};return t.forEach(e=>{n=(0,s.addPermittedEthChainId)(n,e)}),n},s.getAllScopesFromScopesObjects=u,s.getAllScopesFromCaip25CaveatValue=d,s.getAllNamespacesFromCaip25CaveatValue=function(e){const t=d(e),s=new Set;for(const e of t){const{namespace:t,reference:n}=(0,o.parseScopeString)(e);t===r.KnownCaipNamespace.Wallet?s.add(n??t):t&&s.add(t)}return Array.from(s)},s.getAllScopesFromPermission=function(e){const t=e.caveats.find(e=>e.type===a.Caip25CaveatType);return t?d(t.value):[]};s.addCaipChainIdInCaip25CaveatValue=(e,t)=>e.requiredScopes[t]||e.optionalScopes[t]?e:{...e,optionalScopes:{...e.optionalScopes,[t]:{accounts:[]}}};s.setChainIdsInCaip25CaveatValue=(e,t)=>{const s=new Set(t),n={requiredScopes:{},optionalScopes:{},sessionProperties:e.sessionProperties,isMultichainOrigin:e.isMultichainOrigin};for(const[t,r]of Object.entries(e.requiredScopes)){const e=t;((0,o.isWalletScope)(e)||s.has(e))&&(n.requiredScopes[e]=r)}for(const[t,r]of Object.entries(e.optionalScopes)){const e=t;((0,o.isWalletScope)(e)||s.has(e))&&(n.optionalScopes[e]=r)}for(const e of t)n.requiredScopes[e]||n.optionalScopes[e]||(n.optionalScopes[e]={accounts:[]});return n}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/operators/caip-permission-operator-permittedChains.cjs"}],[1613,{"../scope/constants.cjs":1616,"../scope/transform.cjs":1620,"../scope/types.cjs":1621,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getPermittedAccountsForScopes=s.getSessionScopes=s.getInternalScopesObject=void 0;const n=e("@metamask/utils"),r=e("../scope/constants.cjs"),a=e("../scope/transform.cjs"),i=e("../scope/types.cjs");s.getInternalScopesObject=e=>{const t={};return Object.entries(e).forEach(([e,{accounts:s}])=>{t[e]={accounts:s}}),t};const o=(e,{getNonEvmSupportedMethods:t})=>{const s={};return Object.entries(e).forEach(([e,{accounts:a}])=>{const o=e,{namespace:c,reference:l}=(0,i.parseScopeString)(o);let u=[],d=[];o===n.KnownCaipNamespace.Wallet||c===n.KnownCaipNamespace.Wallet?u=l===n.KnownCaipNamespace.Eip155?r.KnownWalletNamespaceRpcMethods[l]:(0,n.isCaipChainId)(o)?t(o):r.KnownWalletRpcMethods:c===n.KnownCaipNamespace.Eip155?(u=r.KnownRpcMethods[c],d=r.KnownNotifications[c]):(u=t(o),d=[]),s[o]={methods:u,notifications:d,accounts:a}}),s};s.getSessionScopes=(e,{getNonEvmSupportedMethods:t})=>(0,a.mergeNormalizedScopes)(o(e.requiredScopes,{getNonEvmSupportedMethods:t}),o(e.optionalScopes,{getNonEvmSupportedMethods:t}));s.getPermittedAccountsForScopes=(e,t)=>{const s=[];return t.forEach(t=>{const n=e.requiredScopes[t],r=e.optionalScopes[t];n&&s.push(...n.accounts),r&&s.push(...r.accounts)}),[...new Set(s)]}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/operators/caip-permission-operator-session-scopes.cjs"}],[1614,{"./errors.cjs":1617,"./supported.cjs":1619,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertIsInternalScopesObject=s.assertIsInternalScopeString=s.assertIsExternalScopesObject=s.assertScopesSupported=s.assertScopeSupported=void 0;const n=e("@metamask/utils"),r=e("./errors.cjs"),a=e("./supported.cjs");s.assertScopeSupported=(e,t,{isEvmChainIdSupported:s,isNonEvmScopeSupported:n,getNonEvmSupportedMethods:i})=>{const{methods:o,notifications:c}=t;if(!(0,a.isSupportedScopeString)(e,{isEvmChainIdSupported:s,isNonEvmScopeSupported:n}))throw r.Caip25Errors.requestedChainsNotSupportedError();if(!o.every(t=>(0,a.isSupportedMethod)(e,t,{getNonEvmSupportedMethods:i})))throw r.Caip25Errors.requestedMethodsNotSupportedError();if(c&&!c.every(t=>(0,a.isSupportedNotification)(e,t)))throw r.Caip25Errors.requestedNotificationsNotSupportedError()};function i(e){if("object"!=typeof e||null===e)throw new Error("ExternalScopeObject must be an object");if((0,n.hasProperty)(e,"references")&&(!Array.isArray(e.references)||!e.references.every(n.isCaipReference)))throw new Error("ExternalScopeObject.references must be an array of CaipReference");if((0,n.hasProperty)(e,"accounts")&&(!Array.isArray(e.accounts)||!e.accounts.every(n.isCaipAccountId)))throw new Error("ExternalScopeObject.accounts must be an array of CaipAccountId");if((0,n.hasProperty)(e,"methods")&&(!Array.isArray(e.methods)||!e.methods.every(e=>"string"==typeof e)))throw new Error("ExternalScopeObject.methods must be an array of strings");if((0,n.hasProperty)(e,"notifications")&&(!Array.isArray(e.notifications)||!e.notifications.every(e=>"string"==typeof e)))throw new Error("ExternalScopeObject.notifications must be an array of strings");if((0,n.hasProperty)(e,"rpcDocuments")&&(!Array.isArray(e.rpcDocuments)||!e.rpcDocuments.every(e=>"string"==typeof e)))throw new Error("ExternalScopeObject.rpcDocuments must be an array of strings");if((0,n.hasProperty)(e,"rpcEndpoints")&&(!Array.isArray(e.rpcEndpoints)||!e.rpcEndpoints.every(e=>"string"==typeof e)))throw new Error("ExternalScopeObject.rpcEndpoints must be an array of strings")}function o(e){if("string"!=typeof e||!(0,n.isCaipNamespace)(e)&&!(0,n.isCaipChainId)(e))throw new Error("scopeString is not a valid ExternalScopeString")}function c(e){if("object"!=typeof e||null===e)throw new Error("InternalScopeObject must be an object");if(!(0,n.hasProperty)(e,"accounts")||!Array.isArray(e.accounts)||!e.accounts.every(n.isCaipAccountId))throw new Error("InternalScopeObject.accounts must be an array of CaipAccountId")}function l(e){if("string"!=typeof e||e!==n.KnownCaipNamespace.Wallet&&!(0,n.isCaipChainId)(e))throw new Error("scopeString is not a valid InternalScopeString")}s.assertScopesSupported=(e,{isEvmChainIdSupported:t,isNonEvmScopeSupported:n,getNonEvmSupportedMethods:r})=>{for(const[a,i]of Object.entries(e))(0,s.assertScopeSupported)(a,i,{isEvmChainIdSupported:t,isNonEvmScopeSupported:n,getNonEvmSupportedMethods:r})},s.assertIsExternalScopesObject=function(e){if("object"!=typeof e||null===e)throw new Error("ExternalScopesObject must be an object");for(const[t,s]of Object.entries(e))o(t),i(s)},s.assertIsInternalScopeString=l,s.assertIsInternalScopesObject=function(e){if("object"!=typeof e||null===e)throw new Error("InternalScopesObject must be an object");for(const[t,s]of Object.entries(e))l(t),c(s)}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/assert.cjs"}],[1615,{"./filter.cjs":1618,"./transform.cjs":1620,"./types.cjs":1621,"./validation.cjs":1622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isNamespaceInScopesObject=s.bucketScopes=s.validateAndNormalizeScopes=void 0;const n=e("./filter.cjs"),r=e("./transform.cjs"),a=e("./types.cjs"),i=e("./validation.cjs");s.validateAndNormalizeScopes=(e,t)=>{const{validRequiredScopes:s,validOptionalScopes:n}=(0,i.getValidScopes)(e,t);return{normalizedRequiredScopes:(0,r.normalizeAndMergeScopes)(s),normalizedOptionalScopes:(0,r.normalizeAndMergeScopes)(n)}};s.bucketScopes=(e,{isEvmChainIdSupported:t,isEvmChainIdSupportable:s,isNonEvmScopeSupported:r,getNonEvmSupportedMethods:a})=>{const{supportedScopes:i,unsupportedScopes:o}=(0,n.bucketScopesBySupport)(e,{isEvmChainIdSupported:t,isNonEvmScopeSupported:r,getNonEvmSupportedMethods:a}),{supportedScopes:c,unsupportedScopes:l}=(0,n.bucketScopesBySupport)(o,{isEvmChainIdSupported:s,isNonEvmScopeSupported:r,getNonEvmSupportedMethods:a});return{supportedScopes:i,supportableScopes:c,unsupportableScopes:l}},s.isNamespaceInScopesObject=function(e,t){return Object.keys(e).some(e=>{const{namespace:s}=(0,a.parseScopeString)(e);return s===t})}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/authorization.cjs"}],[1616,{"@metamask/api-specs":1625},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.isKnownSessionPropertyValue=s.KnownSessionProperties=s.KnownNotifications=s.KnownWalletNamespaceRpcMethods=s.KnownRpcMethods=s.Eip1193OnlyMethods=s.KnownWalletRpcMethods=s.CaipReferenceRegexes=s.KnownWalletScopeString=void 0;const r=n(e("@metamask/api-specs"));var a;!function(e){e.Eip155="wallet:eip155"}(a||(s.KnownWalletScopeString=a={})),s.CaipReferenceRegexes={eip155:/^(0|[1-9][0-9]*)$/u,bip122:/.*/u,solana:/.*/u,tron:/.*/u},s.KnownWalletRpcMethods=["wallet_registerOnboarding","wallet_scanQRCode"];const i=["wallet_addEthereumChain"];s.Eip1193OnlyMethods=["wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_revokePermissions","eth_requestAccounts","eth_accounts","eth_coinbase","net_version","metamask_logWeb3ShimUsage","metamask_getProviderState","metamask_sendDomainMetadata","wallet_registerOnboarding"];const o=r.default.methods.map(({name:e})=>e).filter(e=>!i.includes(e)).filter(e=>!s.KnownWalletRpcMethods.includes(e)).filter(e=>!s.Eip1193OnlyMethods.includes(e));var c;s.KnownRpcMethods={eip155:o,bip122:[],solana:[],tron:[]},s.KnownWalletNamespaceRpcMethods={eip155:i,bip122:[],solana:[],tron:[]},s.KnownNotifications={eip155:["eth_subscription"],bip122:[],solana:[],tron:[]},function(e){e.SolanaAccountChangedNotifications="solana_accountChanged_notifications",e.TronAccountChangedNotifications="tron_accountChanged_notifications"}(c||(s.KnownSessionProperties=c={})),s.isKnownSessionPropertyValue=function(e){return Object.values(c).includes(e)}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/constants.cjs"}],[1617,{"@metamask/rpc-errors":3026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Caip25Errors=void 0;const n=e("@metamask/rpc-errors");s.Caip25Errors={requestedChainsNotSupportedError:()=>new n.JsonRpcError(5100,"Requested chains are not supported"),requestedMethodsNotSupportedError:()=>new n.JsonRpcError(5101,"Requested methods are not supported"),requestedNotificationsNotSupportedError:()=>new n.JsonRpcError(5102,"Requested notifications are not supported"),unknownMethodsRequestedError:()=>new n.JsonRpcError(5201,"Unknown method(s) requested"),unknownNotificationsRequestedError:()=>new n.JsonRpcError(5202,"Unknown notification(s) requested")}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/errors.cjs"}],[1618,{"./assert.cjs":1614,"./supported.cjs":1619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getSupportedScopeObjects=s.bucketScopesBySupport=void 0;const n=e("./assert.cjs"),r=e("./supported.cjs");s.bucketScopesBySupport=(e,{isEvmChainIdSupported:t,isNonEvmScopeSupported:s,getNonEvmSupportedMethods:r})=>{const a={},i={};for(const[o,c]of Object.entries(e)){(0,n.assertIsInternalScopeString)(o);try{(0,n.assertScopeSupported)(o,c,{isEvmChainIdSupported:t,isNonEvmScopeSupported:s,getNonEvmSupportedMethods:r}),a[o]=c}catch{i[o]=c}}return{supportedScopes:a,unsupportedScopes:i}};const a=(e,t,{getNonEvmSupportedMethods:s})=>{const{methods:n,notifications:a}=t,i=n.filter(t=>(0,r.isSupportedMethod)(e,t,{getNonEvmSupportedMethods:s})),o=a.filter(t=>(0,r.isSupportedNotification)(e,t));return{...t,methods:i,notifications:o}};s.getSupportedScopeObjects=(e,{getNonEvmSupportedMethods:t})=>{const s={};for(const[r,i]of Object.entries(e))(0,n.assertIsInternalScopeString)(r),s[r]=a(r,i,{getNonEvmSupportedMethods:t});return s}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/filter.cjs"}],[1619,{"./constants.cjs":1616,"./types.cjs":1621,"@metamask/controller-utils":1639,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isSupportedSessionProperty=s.isSupportedNotification=s.isSupportedMethod=s.isSupportedAccount=s.isSupportedScopeString=void 0;const n=e("@metamask/controller-utils"),r=e("@metamask/utils"),a=e("./constants.cjs"),i=e("./types.cjs");s.isSupportedScopeString=(e,{isEvmChainIdSupported:t,isNonEvmScopeSupported:s})=>{const{namespace:o,reference:c}=(0,i.parseScopeString)(e);switch(o){case r.KnownCaipNamespace.Wallet:return!(0,r.isCaipChainId)(e)||c===r.KnownCaipNamespace.Eip155||s(e);case r.KnownCaipNamespace.Eip155:return!c||a.CaipReferenceRegexes.eip155.test(c)&&t((0,n.toHex)(c));default:return!!(0,r.isCaipChainId)(e)&&s(e)}};s.isSupportedAccount=(e,{getEvmInternalAccounts:t,getNonEvmAccountAddresses:s})=>{const{address:a,chainId:i,chain:{namespace:o,reference:c}}=(0,r.parseCaipAccountId)(e),l=()=>t().some(e=>["eip155:eoa","eip155:erc4337"].includes(e.type)&&(0,n.isEqualCaseInsensitive)(a,e.address)),u=()=>s(i).includes(e);switch(o){case r.KnownCaipNamespace.Wallet:return c===r.KnownCaipNamespace.Eip155?l():u();case r.KnownCaipNamespace.Eip155:return l();default:return u()}};s.isSupportedMethod=(e,t,{getNonEvmSupportedMethods:s})=>{const{namespace:n,reference:o}=(0,i.parseScopeString)(e);if(!n)return!1;const c=()=>(0,r.isCaipChainId)(e)&&s(e).includes(t);return n===r.KnownCaipNamespace.Wallet?o?o===r.KnownCaipNamespace.Eip155?a.KnownWalletNamespaceRpcMethods[o].includes(t):c():a.KnownWalletRpcMethods.includes(t):n===r.KnownCaipNamespace.Eip155?a.KnownRpcMethods[n].includes(t):c()};s.isSupportedNotification=(e,t)=>{const{namespace:s}=(0,i.parseScopeString)(e);return s===r.KnownCaipNamespace.Eip155&&a.KnownNotifications[s].includes(t)};s.isSupportedSessionProperty=e=>Object.values(a.KnownSessionProperties).includes(e)}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/supported.cjs"}],[1620,{"./types.cjs":1621,lodash:5239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.normalizeAndMergeScopes=s.mergeInternalScopes=s.mergeNormalizedScopes=s.mergeScopeObject=s.normalizeScope=s.getUniqueArrayItems=void 0;const n=e("lodash"),r=e("./types.cjs");s.getUniqueArrayItems=e=>Array.from(new Set(e));s.normalizeScope=(e,t)=>{const{references:s,...a}=t,{namespace:i,reference:o}=(0,r.parseScopeString)(e),c={accounts:[],...a};return i&&!o&&s!==undefined&&s.length>0?Object.fromEntries(s.map(e=>[`${i}:${e}`,(0,n.cloneDeep)(c)])):{[e]:c}};s.mergeScopeObject=(e,t)=>{const n={methods:(0,s.getUniqueArrayItems)([...e.methods,...t.methods]),notifications:(0,s.getUniqueArrayItems)([...e.notifications,...t.notifications]),accounts:(0,s.getUniqueArrayItems)([...e.accounts,...t.accounts])};return(e.rpcDocuments||t.rpcDocuments)&&(n.rpcDocuments=(0,s.getUniqueArrayItems)([...e.rpcDocuments??[],...t.rpcDocuments??[]])),(e.rpcEndpoints||t.rpcEndpoints)&&(n.rpcEndpoints=(0,s.getUniqueArrayItems)([...e.rpcEndpoints??[],...t.rpcEndpoints??[]])),n};s.mergeNormalizedScopes=(e,t)=>{const n={};return Object.entries(e).forEach(([e,r])=>{const a=e,i=t[a];n[a]=i?(0,s.mergeScopeObject)(r,i):r}),Object.entries(t).forEach(([t,s])=>{const r=t;e[r]||(n[r]=s)}),n};s.mergeInternalScopes=(e,t)=>{const r=(0,n.cloneDeep)(e);return Object.entries(t).forEach(([e,t])=>{const n=e,a=r[n];r[n]=a?{accounts:(0,s.getUniqueArrayItems)([...a.accounts,...t.accounts])}:t}),r};s.normalizeAndMergeScopes=e=>{let t={};return Object.keys(e).forEach(n=>{const r=(0,s.normalizeScope)(n,e[n]);t=(0,s.mergeNormalizedScopes)(t,r)}),t}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/transform.cjs"}],[1621,{"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isWalletScope=s.parseScopeString=void 0;const n=e("@metamask/utils");s.parseScopeString=e=>(0,n.isCaipNamespace)(e)?{namespace:e}:(0,n.isCaipChainId)(e)?(0,n.parseCaipChainId)(e):{};s.isWalletScope=e=>{const{namespace:t}=(0,s.parseScopeString)(e);return t===n.KnownCaipNamespace.Wallet}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/types.cjs"}],[1622,{"./types.cjs":1621,"@metamask/utils":3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getValidScopes=s.isValidScope=void 0;const n=e("@metamask/utils"),r=e("./types.cjs");s.isValidScope=(e,t)=>{const{namespace:s,reference:a}=(0,r.parseScopeString)(e);if(!s)return!1;const{references:i,methods:o,notifications:c,accounts:l,rpcDocuments:u,rpcEndpoints:d,...h}=t;if(!o||!c)return!1;if(!("wallet"===s||a||i&&0!==i.length))return!1;if(i){if(a)return!1;if(!i.every(e=>(0,n.isCaipReference)(e)))return!1}if(!o.every(e=>"string"==typeof e&&""!==e.trim()))return!1;return!!c.every(e=>"string"==typeof e&&""!==e.trim())&&!(Object.keys(h).length>0)};s.getValidScopes=(e,t)=>{const n={};for(const[t,r]of Object.entries(e||{}))(0,s.isValidScope)(t,r)&&(n[t]={accounts:[],...r});const r={};for(const[e,n]of Object.entries(t||{}))(0,s.isValidScope)(e,n)&&(r[e]={accounts:[],...n});return{validRequiredScopes:n,validOptionalScopes:r}}}}},{package:"@metamask/chain-agnostic-permission",file:"node_modules/@metamask/chain-agnostic-permission/dist/scope/validation.cjs"}],[1623,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={openrpc:"1.2.4",info:{title:"MetaMask MultiChain API",version:"1.0.0",description:"This provides the specs for the MultiChain API Layer for the MetaMask API"},methods:[{name:"wallet_notify",paramStructure:"by-name",params:[{name:"scope",description:"a valid `scope` string that has been previously authorized via `provider_authorize`",required:!0,schema:{$ref:"#/components/schemas/ScopeString"}},{name:"notification",description:"an object containing a JSON-RPC notification with `method` and `params`",deprecated:!1,required:!0,schema:{type:"object",properties:{method:{type:"string"},params:!0}}}]},{name:"wallet_invokeMethod",paramStructure:"by-name",params:[{name:"scope",description:"a valid `scope` string that has been previously authorized via `provider_authorize`",required:!0,schema:{$ref:"#/components/schemas/ScopeString"}},{name:"request",description:"an object containing a JSON-RPC request with `method` and `params`",deprecated:!1,required:!0,schema:{type:"object",properties:{method:{type:"string"},params:!0}}}],result:{name:"wallet_invokeMethodResult",schema:!0},examples:[{name:"wallet_invokeMethodExample",params:[{name:"scope",value:"eip155:1"},{name:"request",value:{method:"eth_getBalance",params:[]}}],result:{name:"wallet_invokeMethodResult",value:"0x1"}}]},{name:"wallet_revokeSession",description:"The `wallet_revokeSession` method revokes the entire active session.",params:[],result:{name:"wallet_revokeSessionResult",schema:{type:"boolean"}},examples:[{name:"wallet_revokeSessionExample",params:[],result:{name:"wallet_revokeSessionExampleResult",value:!0}}],errors:[{$ref:"#/components/errors/UnknownError"}]},{name:"wallet_sessionChanged",paramStructure:"by-name",description:"This notification is published by the wallet to notify the callers of updates to a shared session's authorization scopes. The event payload contains the new `sessionScopes`.",params:[{name:"sessionScopes",schema:{$ref:"#/components/schemas/SessionScopes"}}],examples:[{name:"wallet_sessionChangedExample",description:"Example of a wallet_sessionChanged notification.",params:[{name:"sessionScopes",value:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}]}]},{name:"wallet_getSession",description:"The `wallet_getSession` method returns an active session.",params:[],result:{name:"wallet_getSessionResult",schema:{type:"object",properties:{sessionScopes:{$ref:"#/components/schemas/SessionScopes"}}}},examples:[{name:"wallet_getSessionExample",description:"Example of a getSession request.",params:[],result:{name:"wallet_getSessionResultExample",value:{sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}}]},{name:"wallet_createSession",paramStructure:"by-name",params:[{name:"requiredScopes",description:"Scopes that the wallet must support in order to be used with this provider.",schema:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}}},{name:"optionalScopes",description:"Scopes that the wallet may support in order to be used with this provider.",schema:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}}},{name:"sessionProperties",description:"Properties that the wallet may use to determine if the session is valid.",schema:{type:"object"}}],result:{name:"wallet_createSessionResult",schema:{type:"object",properties:{sessionScopes:{$ref:"#/components/schemas/SessionScopes"},sessionProperties:{type:"object"}}}},examples:[{name:"wallet_createSessionEthExample",description:"Example of a createSession request.",params:[{name:"optionalScopes",value:{"eip155:1337":{methods:["wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{methods:["wallet_addEthereumChain"],notifications:[]}}}],result:{name:"wallet_createSessionResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}},{name:"wallet_createSessionEthUnsupportedMethodsExample",description:"Example of a createSession request with unsupported eip155 methods.",params:[{name:"optionalScopes",value:{"eip155:1337":{methods:["not_supported"],notifications:[]},wallet:{methods:[],notifications:[]},"wallet:eip155":{methods:[],notifications:[]}}}],result:{name:"wallet_createSessionEthUnsupportedMethodsResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}},{name:"wallet_createSessionUnsupportedScopesExample",description:"Example of a createSession request with unsupported scopes.",params:[{name:"optionalScopes",value:{foobar:{methods:["eth_getBalance"],notifications:["eth_subscription"]},"eip155:1":{accounts:["eip155:1:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]}}}],result:{name:"wallet_createSessionUnsupportedScopesResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1":{accounts:["eip155:1:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]}}}}}],errors:[{$ref:"#/components/errors/UnknownError"},{code:5100,message:"Requested networks are not supported"},{code:5101,message:"Requested methods are not supported"},{code:5102,message:"Requested notifications are not supported"},{code:5300,message:"Invalid scopedProperties requested"},{code:5301,message:"scopedProperties can only be outside of sessionScopes"},{code:5302,message:"Invalid sessionProperties requested"}]}],components:{errors:{UnknownError:{code:5e3,message:"Unknown error with request"}},schemas:{SessionScopes:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}},ScopeString:{type:"string",pattern:"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?"},Scope:{type:"object",title:"Scope",description:"Scope for a multi-chain connection",additionalProperties:!0,required:["notifications","methods"],properties:{scopes:{type:"array",items:{$ref:"#/components/schemas/ScopeString"}},methods:{description:"Methods that the wallet must support in order to be used with this provider.",type:"array",items:{type:"string"}},notifications:{description:"Notifications that the wallet must support in order to be used with this provider.",type:"array",items:{type:"string"}},rpcEndpoints:{description:"JSON-RPC endpoints for this namespace.",type:"array",items:{type:"string",format:"uri"}},rpcDocuments:{type:"array",description:"OpenRPC documents that define RPC methods in which to anchor the methods authorized in a CAIP-25 interaction.",items:{type:"string",format:"uri"}}}}}}}}}},{package:"@metamask/chain-agnostic-permission>@metamask/api-specs",file:"node_modules/@metamask/chain-agnostic-permission/node_modules/@metamask/api-specs/dist/build/multichain-openrpc.json"}]],[],{});